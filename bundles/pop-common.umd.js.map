{"version":3,"file":"pop-common.umd.js","sources":["../../../projects/pop-common/src/lib/pipes/phone.pipe.ts","../../../projects/pop-common/src/lib/pipes/toYesNo.pipe.ts","../../../node_modules/tslib/tslib.es6.js","../../../projects/pop-common/src/lib/pop-common.model.ts","../../../projects/pop-common/src/lib/pipes/toActiveOrArchived.pipe.ts","../../../projects/pop-common/src/lib/pipes/label.pipe.ts","../../../projects/pop-common/src/lib/pop-common-utility.ts","../../../projects/pop-common/src/lib/pipes/truncate.pipe.ts","../../../projects/pop-common/src/lib/pop-common-token.model.ts","../../../projects/pop-common/src/lib/pop-common-dom.models.ts","../../../projects/pop-common/src/lib/services/pop-extend.service.ts","../../../projects/pop-common/src/lib/services/pop-base.service.ts","../../../projects/pop-common/src/lib/modules/app/pop-menu/pop-menu.service.ts","../../../projects/pop-common/src/lib/services/pop-credential.service.ts","../../../projects/pop-common/src/lib/modules/base/pop-tab-menu/tab-menu.model.ts","../../../projects/pop-common/src/lib/modules/base/pop-side-by-side/pop-side-by-side.model.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-select/select-config.model.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-select-multi/select-mulit-config.model.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-input/input-config.model.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-number/number-config.model.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-date/date-config.model.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-time/time-config.model.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-checkbox/checkbox-config.model.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-switch/switch-config.model.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-min-max/min-max.models.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-radio/radio-config.model.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-textarea/textarea-config.model.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-label/label-config.model.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-button/button-config.model.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-email/email.setting.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-switch-param.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-address/address.setting.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-phone/phone.setting.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-name/name.setting.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-input/input.settings.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-radio/radio.setting.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-switch/switch.setting.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-select/select.setting.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-checkbox/checkbox.setting.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-textarea/textarea.setting.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-select-filter/select-filter-config.model.ts","../../../projects/pop-common/src/lib/services/pop-validators.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-text/text-config.model.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-select-list/select-list-config.model.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-datepicker/datepicker-config.model.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-select-modal/select-modal-config.model.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-utility.ts","../../../projects/pop-common/src/lib/pop-extend.component.ts","../../../projects/pop-common/src/lib/modules/app/pop-menu/pop-menu.component.ts","../../../projects/pop-common/src/lib/modules/app/pop-menu/pop-menu.module.ts","../../../projects/pop-common/src/lib/modules/app/assets/ajax-loader.component.ts","../../../projects/pop-common/src/lib/modules/app/assets/goodbye.component.ts","../../../projects/pop-common/src/lib/modules/app/assets/welcome.component.ts","../../../projects/pop-common/src/lib/modules/app/assets/error.component.ts","../../../projects/pop-common/src/lib/modules/app/assets/buffer.component.ts","../../../projects/pop-common/src/lib/modules/app/pop-cac-filter/pop-cac-filter.model.ts","../../../projects/pop-common/src/lib/modules/entity/services/pop-entity-event.service.ts","../../../projects/pop-common/src/lib/services/pop-cache.service.ts","../../../projects/pop-common/src/lib/services/pop-resource.service.ts","../../../projects/pop-common/src/lib/services/pop-pipe.service.ts","../../../projects/pop-common/src/lib/modules/app/pop-cac-filter/pop-cac-filter.service.ts","../../../projects/pop-common/src/lib/modules/app/pop-template.service.ts","../../../projects/pop-common/src/lib/modules/app/pop-template.component.ts","../../../projects/pop-common/src/lib/modules/app/pop-left-menu/entity-menu.model.ts","../../../projects/pop-common/src/lib/modules/entity/services/pop-entity-util-param.service.ts","../../../projects/pop-common/src/lib/modules/app/pop-left-menu/pop-left-menu.component.ts","../../../projects/pop-common/src/lib/modules/material/material.module.ts","../../../projects/pop-common/src/lib/modules/base/pop-indicators/main-spinner.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-indicators/pop-indicators.module.ts","../../../projects/pop-common/src/lib/modules/app/pop-left-menu/pop-left-menu.module.ts","../../../projects/pop-common/src/lib/pop-extend-dynamic.component.ts","../../../projects/pop-common/src/lib/modules/app/pop-widget-bar/pop-widget-bar.component.ts","../../../projects/pop-common/src/lib/modules/app/pop-widget-bar/pop-widget-bar.module.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-field-item.component.ts","../../../projects/pop-common/src/lib/pop-common-animations.model.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-input/pop-input.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-select/pop-select.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-select-multi/pop-select-multi.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-checkbox/pop-checkbox.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-radio/pop-radio.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-switch/pop-switch.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-textarea/pop-textarea.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-label/pop-label.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-select-filter/pop-select-filter.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/click-outside-directive.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-date/datepicker-expansion-items/expansion-items.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-date/pop-date.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-date/pop-date-range/expansion-items/date-range-expansion-items.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-date/pop-date-range/date-range-config.models.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-date/pop-date-range/pop-date-range.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-date/datepicker-expansion-items/custom-panel/custom-panel.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-time/pop-time.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-select-list/pop-select-list.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-select-modal/pop-select-modal-dialog/pop-select-modal-dialog.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-select-modal/pop-select-modal.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-button/pop-button.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-min-max/pop-min-max.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-slider/pop-slider.model.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-slider/pop-slider.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-number/pop-number.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/asset/pop-field-item-loader.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/asset/pop-field-item-helper.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/asset/pop-field-item-error.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-text/pop-text.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-date/pop-date-range/expansion-items/custom-panel/date-range-panel.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-datepicker/pop-datepicker.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-field-item.module.ts","../../../projects/pop-common/src/lib/modules/app/pop-cac-filter/pop-cac-filter.component.ts","../../../projects/pop-common/src/lib/modules/app/pop-cac-filter/pop-cac-filter-view/pop-cac-filter-view.component.ts","../../../projects/pop-common/src/lib/modules/app/pop-cac-filter/pop-cac-filter.module.ts","../../../projects/pop-common/src/lib/modules/app/pop-template.module.ts","../../../projects/pop-common/src/lib/services/pop-container.service.ts","../../../projects/pop-common/src/lib/directives/lib-container.directive.ts","../../../projects/pop-common/src/lib/directives/lib-outside-click.directive.ts","../../../projects/pop-common/src/lib/directives/lib-track-caps-lock.directive.ts","../../../projects/pop-common/src/lib/pop-common.module.ts","../../../projects/pop-common/src/lib/services/pop-datetime.service.ts","../../../projects/pop-common/src/environments/environment.ts","../../../projects/pop-common/src/lib/services/pop-log.service.ts","../../../projects/pop-common/src/lib/services/pop-display.service.ts","../../../projects/pop-common/src/lib/services/pop-request.service.ts","../../../projects/pop-common/src/lib/modules/base/pop-context-menu/pop-context-menu.model.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-field.setting.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-field.service.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-field.component.ts","../../../projects/pop-common/src/lib/services/pop-dom.service.ts","../../../projects/pop-common/src/lib/modules/base/pop-dialogs/pop-table-dialog/pop-table-dialog.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-side-by-side/pop-side-by-side.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-dialogs/pop-confirmation-dialog/pop-confirmation-dialog.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-field-modal/pop-entity-field-modal.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-field-boiler.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-name/pop-entity-name.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-datetime/pop-entity-datetime.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-email/pop-entity-email.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-phone/pop-entity-phone.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-address/pop-entity-address.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-input/pop-entity-input.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-select/pop-entity-select.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-radio/pop-entity-radio.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-checkbox/pop-entity-checkbox.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-switch/pop-entity-switch.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-select-multi/select-mulit.setting.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-select-multi/pop-entity-select-multi.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-textarea/pop-entity-textarea.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field-editor/pop-entity-field-editor.service.ts","../../../projects/pop-common/src/lib/modules/entity/services/pop-entity-util-field.service.ts","../../../projects/pop-common/src/lib/modules/entity/services/pop-entity-repo.service.ts","../../../projects/pop-common/src/lib/modules/entity/models/pop-entity-default.action.ts","../../../projects/pop-common/src/lib/modules/entity/models/pop-entity-default.table.ts","../../../projects/pop-common/src/lib/modules/entity/models/pop-entity-default.field.ts","../../../projects/pop-common/src/lib/modules/entity/models/pop-entity-default.resource.ts","../../../projects/pop-common/src/lib/modules/entity/models/pop-entity-default.menu.ts","../../../projects/pop-common/src/lib/modules/entity/models/pop-entity-default.route.ts","../../../projects/pop-common/src/lib/modules/entity/services/pop-entity.service.ts","../../../projects/pop-common/src/lib/services/pop-route-history.resolver.ts","../../../projects/pop-common/src/lib/modules/base/pop-tab-menu/pop-tab-menu.service.ts","../../../projects/pop-common/src/lib/modules/base/pop-tab-menu/pop-tab-menu.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-scheme/pop-entity-scheme.model.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item-group/pop-field-item-group.model.ts","../../../projects/pop-common/src/lib/modules/base/pop-dialogs/pop-action-dialog/pop-action-dialog.component.ts","../../../projects/pop-common/src/lib/modules/entity/services/pop-entity-action.service.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-scheme/pop-entity-scheme-custom-component/pop-entity-scheme-custom.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-tab/pop-entity-tab.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-tab-menu/pop-entity-portal-menu/pop-entity-portal-menu.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-tab-menu/pop-entity-tab-menu.component.ts","../../../projects/pop-common/src/lib/modules/entity/services/pop-entity-util-portal.service.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field-group/pop-entity-field-group.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-table/pop-table.model.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-history/pop-entity-history.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-assignments/pop-entity-provider-dialog/pop-entity-provider-dialog.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-assignments/pop-entity-assignments.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-settings.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-scheme/pop-entity-scheme-field-setting/pop-entity-scheme-field-setting.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-scheme/pop-entity-scheme.service.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-scheme/pop-entity-scheme-asset-pool/pop-entity-scheme-asset-pool.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-scheme/pop-entity-scheme-asset-layout/pop-entity-scheme-asset-layout.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-scheme/pop-entity-scheme-details/pop-entity-scheme-details.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-scheme/pop-entity-scheme.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field-editor/pop-entity-field-details/pop-entity-field-details.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field-editor/pop-entity-field-preview/pop-entity-field-preview.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field-editor/pop-entity-field-editor.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-status/pop-entity-status.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-tab/pop-entity-tab.model.ts","../../../projects/pop-common/src/lib/services/pop-base.interceptors.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/custom-date-adapter.ts","../../../projects/pop-common/src/lib/modules/base/pop-redirects/pop-error-redirect/pop-error-redirect.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-redirects/pop-cache-redirect/pop-cache-redirect.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-redirects/pop-guard-redirect/pop-guard-redirect.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-redirects/pop-redirects-module.ts","../../../projects/pop-common/src/lib/modules/base/pop-redirects/pop-redirect.guard.ts","../../../projects/pop-common/src/lib/modules/base/pop-redirects/pop-cache-redirect.guard.ts","../../../projects/pop-common/src/lib/services/pop-request-external.service.ts","../../../projects/pop-common/src/lib/modules/entity/services/pop-entity-scheme-component.service.ts","../../../projects/pop-common/src/lib/modules/pop-initializer.module.ts","../../../projects/pop-common/src/lib/modules/base/pop-tab-menu/pop-tab-menu-section-bar/pop-tab-menu-section-bar.service.ts","../../../projects/pop-common/src/lib/modules/base/pop-tab-menu/pop-tab-menu-section-bar/pop-tab-menu-section-bar.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-tab-menu/pop-tab-menu.module.ts","../../../projects/pop-common/src/lib/modules/base/pop-errors/error/error.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-errors/pop-errors.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-errors/pop-errors.module.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item-group/in-dialog/in-dialog.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item-group/group/group.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-context-menu/pop-context-menu.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-context-menu/pop-context-menu.module.ts","../../../projects/pop-common/src/lib/pipes/characterIcon.pipe.ts","../../../projects/pop-common/src/lib/modules/base/pop-side-by-side/pop-side-by-side.module.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item-group/pop-field-item-group.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item-group/pop-field-item-group.module.ts","../../../projects/pop-common/src/lib/services/pop-common.service.ts","../../../projects/pop-common/src/lib/modules/base/pop-table/pop-table-dialog/pop-table-dialog.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-table/pop-table.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-table/pop-table-view/pop-table-view.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-table/pop-table.module.ts","../../../projects/pop-common/src/lib/modules/base/pop-ajax-dialog/dialog/dialog.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-ajax-dialog/pop-ajax-dialog.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-ajax-dialog/pop-ajax-dialog.module.ts","../../../projects/pop-common/src/lib/modules/base/pop-dialogs/pop-navigation-dialog/pop-navigation-dialog.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-dialogs/pop-success-dialog/pop-success-dialog.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-dialogs/pop-message-dialog/pop-message-dialog.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-dialogs/pop-dialogs.module.ts","../../../projects/pop-common/src/lib/modules/base/pop-base.module.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-list/pop-entity-advanced-search/pop-entity-advanced-search.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-list/pop-entity-list.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-access/pop-entity-access.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/assets/pop-entity-field-action-btn.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/assets/pop-entity-field-edit-icon/pop-entity-field-edit-icon.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/assets/pop-entity-field-dash.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/assets/pop-entity-field-spacer.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-tab/pop-entity-tab-column.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-scheme/pop-entity-asset-field-modal/params/field-input-setting.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-scheme/pop-entity-asset-field-modal/params/field-label-setting.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-scheme/pop-entity-asset-field-modal/params/field-radio-setting.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-scheme/pop-entity-asset-field-modal/params/field-select-setting.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-scheme/pop-entity-asset-field-modal/params/field-switch-setting.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-scheme/pop-entity-asset-field-modal/params/field-textarea-setting.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-scheme/pop-entity-asset-component-modal/pop-entity-asset-component-modal.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-scheme/pop-entity-asset-field-modal/pop-entity-asset-field-modal.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-scheme/pop-entity-scheme-asset-layout/entity-scheme-layout-section/entity-scheme-layout-section.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-scheme/pop-entity-scheme-asset-layout/entity-scheme-layout-section/entity-scheme-field-content/entity-scheme-field-content.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-scheme/pop-entity-scheme-asset-layout/entity-scheme-layout-section/entity-scheme-table-content/entity-scheme-table-content.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-scheme/pop-entity-scheme-asset-layout/entity-scheme-layout-section/entity-scheme-component-content/entity-scheme-component-content.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-items/pop-entity-field-items.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-values/pop-entity-field-values.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-label-param.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-textarea-param.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-radio-param.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-select-param.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-input-param.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-number-param.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/pop-entity-field-item-params.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-slider-param.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-entries/pop-entity-field-entries.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-tab-list/pop-entity-tab-list.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-address/pop-entity-address-edit/pop-entity-address-edit.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-scheme/pop-entity-scheme-custom-setting/pop-entity-scheme-custom-setting.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity.module.ts","../../../projects/pop-common/src/lib/modules/base/pop-ajax-dialog/pop-ajax-dialog.model.ts","../../../projects/pop-common/src/lib/services/pop-preference.service.ts","../../../projects/pop-common/src/lib/services/pop-auth-guard.guard.ts","../../../projects/pop-common/src/lib/services/pop-route-verified.guard.ts","../../../projects/pop-common/src/lib/services/pop-route-access.guard.ts","../../../projects/pop-common/src/lib/modules/entity/services/pop-entity-extend.service.ts","../../../projects/pop-common/src/public_api.ts","../../../projects/pop-common/src/pop-common.ts"],"sourcesContent":["import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe( {\n  name: 'phone'\n} )\nexport class PhonePipe implements PipeTransform {\n  transform( val, args = null ){\n\n    if( !args ) args = '(XXX) XXX-XXXX';\n\n    if( typeof val === 'string' && String(val).length ){\n\n      let viewVal = String( val ).trim();\n      viewVal = viewVal.replace( /^\\+/, '' );\n      viewVal = viewVal.replace( /[^0-9]/g, '' );\n      viewVal = viewVal.slice( 0, ( args.match( /X/g ) || [] ).length );\n\n      let number = args;\n      const digits = viewVal.split( '' );\n      let index = 0;\n      digits.forEach( function( digit ){\n        index = number.indexOf( 'X' );\n        if( index >= 0 ){\n          number = number.substr( 0, index ) + digit + number.substr( index + 1 );\n        }\n      } );\n\n      let limit = args.length;\n      if( index != -1 ) limit = index + 1;\n      return number.substr( 0, limit );\n    }\n    return val;\n  }\n}\n","import {Pipe, PipeTransform} from '@angular/core';\n\n@Pipe({name: 'toYesNo', pure: true})\nexport class ToYesNoPipe implements PipeTransform {\n  transform(value) {\n    return value ? 'Yes' : 'No';\n  }\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","import {ChangeDetectorRef, ComponentFactoryResolver, ElementRef, InjectionToken, Injector} from '@angular/core';\nimport {ComponentType} from '@angular/cdk/portal';\nimport {FormGroup, Validators} from '@angular/forms';\nimport {EventEmitter} from '@angular/core';\n\nimport {FieldItemGroupConfig} from './modules/base/pop-field-item-group/pop-field-item-group.model';\nimport {TabButtonInterface, TabComponentInterface, TabConfig} from './modules/base/pop-tab-menu/tab-menu.model';\nimport {PopEntityRepoService} from './modules/entity/services/pop-entity-repo.service';\nimport {LabelConfig, MetadataConfig} from './modules/base/pop-field-item/pop-label/label-config.model';\nimport {CheckboxConfig} from './modules/base/pop-field-item/pop-checkbox/checkbox-config.model';\nimport {InputConfig} from './modules/base/pop-field-item/pop-input/input-config.model';\nimport {SelectConfig} from './modules/base/pop-field-item/pop-select/select-config.model';\nimport {SelectMultiConfig} from './modules/base/pop-field-item/pop-select-multi/select-mulit-config.model';\nimport {RadioConfig} from './modules/base/pop-field-item/pop-radio/radio-config.model';\nimport {TextareaConfig} from './modules/base/pop-field-item/pop-textarea/textarea-config.model';\nimport {SwitchConfig} from './modules/base/pop-field-item/pop-switch/switch-config.model';\nimport {SideBySideConfig} from './modules/base/pop-side-by-side/pop-side-by-side.model';\nimport {MinMaxConfig} from './modules/base/pop-field-item/pop-min-max/min-max.models';\nimport {PopLogService} from './services/pop-log.service';\nimport {NumberConfig} from './modules/base/pop-field-item/pop-number/number-config.model';\nimport {PopTemplateService} from './modules/app/pop-template.service';\nimport {App, AuthDetails, Business, BusinessUser} from './pop-common-token.model';\nimport {CacFilter} from './modules/app/pop-cac-filter/pop-cac-filter.model';\nimport {PopPipeService} from './services/pop-pipe.service';\nimport {PopDatetimeService} from './services/pop-datetime.service';\nimport {PopRequestService} from './services/pop-request.service';\nimport {PopEntityService} from './modules/entity/services/pop-entity.service';\nimport {PopRouteHistoryResolver} from './services/pop-route-history.resolver';\nimport {PopEntityUtilPortalService} from './modules/entity/services/pop-entity-util-portal.service';\nimport {EntityMenu} from './modules/app/pop-left-menu/entity-menu.model';\nimport {BehaviorSubject, Subject} from 'rxjs';\nimport {Router} from '@angular/router';\nimport {ComponentDomInterface} from './pop-common-dom.models';\nimport {PopRequestExternalService} from './services/pop-request-external.service';\nimport {PopDomService} from './services/pop-dom.service';\nimport {DateFilterPredicate} from './modules/base/pop-field-item/pop-date/date-config.model';\nimport {PopEntitySchemeComponentService} from \"./modules/entity/services/pop-entity-scheme-component.service\";\n\nexport type EventCallback = (core: CoreConfig, event: PopBaseEventInterface, dom?: ComponentDomInterface) => void;\nexport type EventPromiseCallback = (core: CoreConfig, event: PopBaseEventInterface, dom?: ComponentDomInterface) => Promise<any>;\nexport type OutletReset = (position?: number) => void;\nexport type PopTask = () => void;\n\nexport type DataFactory = (id?: number, archived?: boolean | number) => Promise<any[]>;\nexport type DataDecorator = (core: CoreConfig, entity: Entity) => Entity;\nexport type DataFilter = (entity: Entity) => boolean;\nexport type DataSetter = (core: CoreConfig, data: any, domRepo?: PopDomService) => any;\n\n\nexport let ServiceInjector: Injector;\n\nexport function SetServiceInjector(injector: Injector) {\n  if (!ServiceInjector) ServiceInjector = injector;\n}\n\nexport let PopEntity: PopEntityService;\n\nexport function SetPopEntity(entity: PopEntityService) {\n  if (!PopEntity) PopEntity = entity;\n}\n\nexport let PopHistory: PopRouteHistoryResolver;\n\nexport function SetPopHistory(history: PopRouteHistoryResolver) {\n  if (!PopHistory) PopHistory = history;\n}\n\nexport let PopPipe: PopPipeService;\n\nexport function SetPopPipe(pipe: PopPipeService) {\n  if (!PopPipe) PopPipe = pipe;\n}\n\nexport let PopDate: PopDatetimeService;\n\nexport function SetPopDate(date: PopDatetimeService) {\n  if (!PopDate) PopDate = date;\n}\n\nexport let PopLog: PopLogService;\n\nexport function SetPopLogger(log: PopLogService) {\n  if (!PopLog) PopLog = log;\n}\n\nexport let PopEnv: Dictionary<any>;\n\nexport function SetPopEnv(env: Dictionary<any>) {\n  if (!PopEnv) PopEnv = env;\n}\n\n\nexport let PopComponentResolver: ComponentFactoryResolver;\n\nexport function SetPopComponentResolver(cfr: ComponentFactoryResolver) {\n  if (!PopComponentResolver) PopComponentResolver = cfr;\n}\n\nexport let PopRequest: PopRequestService;\n\nexport function SetPopRequest(request: PopRequestService) {\n  if (!PopRequest) PopRequest = request;\n}\n\nexport let PopExternalApi: PopRequestExternalService;\n\nexport function SetPopExternalApi(api: PopRequestExternalService) {\n  if (!PopExternalApi) PopExternalApi = api;\n}\n\n\nexport let PopPortal: PopEntityUtilPortalService;\n\nexport function SetPopPortal(portal: PopEntityUtilPortalService) {\n  if (!PopPortal) PopPortal = portal;\n}\n\nexport let PopHref: string;\n\nexport function SetPopHref(href: string) {\n  if (href && typeof href === 'string') {\n    PopHref = href;\n  }\n}\n\nexport let PopMessage: string;\n\nexport function SetPopMessage(message: string) {\n  if (message && typeof message === 'string') {\n    PopMessage = message;\n  } else {\n    PopMessage = undefined;\n  }\n}\n\nexport let PopCacheRedirectUrl: string;\n\nexport function SetPopCacheRedirectUrl(router: Router = null, url: string = null): void {\n  if (router instanceof Router) {\n    if (!url) url = router.url;\n    PopCacheRedirectUrl = url;\n    router.navigateByUrl('system/cache/clear', {skipLocationChange: true}).catch((e) => {\n      console.log('e', e);\n    });\n  } else {\n    PopCacheRedirectUrl = undefined;\n  }\n}\n\n\nexport let PopAuth: AuthDetails;\n\nexport function SetPopAuth(auth: AuthDetails) {\n  if (auth && typeof auth === 'object' && auth !== null && Object.keys(auth).length) {\n    PopAuth = JSON.parse(JSON.stringify(auth));\n  }\n}\n\nexport let PopBusiness: Business;\n\nexport function SetPopBusiness(business: Business) {\n  if (business && typeof business === 'object' && business !== null && Object.keys(business).length) {\n    PopBusiness = JSON.parse(JSON.stringify(business));\n  }\n}\n\nexport let PopApp: App;\n\nexport function SetPopApp(app: App) {\n  if (app && typeof app === 'object' && app !== null && Object.keys(app).length) {\n    PopApp = JSON.parse(JSON.stringify(app));\n  }\n}\n\nexport let PopUser: BusinessUser;\n\nexport function SetPopUser(user: BusinessUser) {\n  if (user && typeof user === 'object' && user !== null && Object.keys(user).length) {\n    PopUser = JSON.parse(JSON.stringify(user));\n  }\n}\n\nexport let PopFilter: CacFilter = {};\n\nexport function SetPopFilter(filter: CacFilter) {\n  if (typeof filter === 'object' && filter !== null) {\n    PopFilter = filter;\n  }\n}\n\nexport let PopSchemeComponent: PopEntitySchemeComponentService;\n\nexport function SetPopSchemeComponent(schemeComponent: PopEntitySchemeComponentService) {\n  if (!PopSchemeComponent) PopSchemeComponent = schemeComponent;\n}\n\nexport let PopRouteAliasMap: { client?: string; account?: string, campaign?: string, profile?: string };\n\nexport function SetPopRouteAliasMap(aliasMap: { client?: string; account?: string, campaign?: string, profile?: string }) {\n  if (aliasMap && typeof aliasMap === 'object') PopRouteAliasMap = aliasMap;\n}\n\nexport let PopAliasRouteMap: Dictionary<string> = {};\n\nexport function SetPopAliasRouteMap(routeMap: Dictionary<string>) {\n  if (routeMap && typeof routeMap === 'object') PopAliasRouteMap = routeMap;\n}\n\n\nexport let PopTemplate: PopTemplateService;\n\nexport function SetPopTemplate(srv: PopTemplateService) {\n  if (!PopTemplate) PopTemplate = srv;\n}\n\nexport const FIELD_CUSTOM_SETTING = new InjectionToken<Dictionary<FieldCustomSettingInterface>>('Field Custom Setting', {\n  providedIn: 'root',\n  factory: () => <Dictionary<FieldCustomSettingInterface>>{}\n});\n\n// export const APP_MENUS = new InjectionToken<Dictionary<FieldCustomSettingInterface>>('APP_MENUS', {\n//   providedIn: 'root',\n//   factory: () => <Dictionary<FieldCustomSettingInterface>>{}\n// });\n\nexport interface AppMenusInterface {\n  get: () => EntityMenu[];\n  set: (menus: EntityMenu[]) => void;\n  init: (menus: EntityMenu[]) => EntityMenu[];\n}\n\n\nexport interface AppWidgetsInterface {\n  get: () => EntityMenu[];\n  set: (menus: EntityMenu[]) => void;\n}\n\n\nexport interface AppThemeInterface {\n  init: BehaviorSubject<boolean>;\n  get: () => string;\n  set: (theme: string, contrast: string) => void;\n  isLoaded: () => boolean;\n}\n\n\nexport interface AppGlobalInterface {\n  isVerified: () => Promise<boolean>;\n  setVerified: () => void;\n  setModal: () => void;\n  isModal: () => number;\n  removeModal: () => void;\n  isEntities: () => boolean;\n  setEntities: (value: boolean) => void;\n  isFilterBar: () => boolean;\n  setFilterBar: (value: boolean) => void;\n  isPipes: () => boolean;\n  setPipes: (value: boolean) => void;\n  isAliases: () => boolean;\n  setAliases: (value: boolean) => void;\n  isOpen: () => boolean;\n  setOpen: (value: boolean) => void;\n  isSecurity: () => boolean;\n  setSecurity: (value: boolean) => void;\n  isPermissions: () => boolean;\n  setPermissions: (value: boolean) => void;\n  init: BehaviorSubject<boolean>;\n  verification: Subject<boolean>;\n  _unload: Subject<boolean>;\n}\n\n\nexport interface AppGlobalParamInterface {\n  filter?: boolean; // will the app use the filter bar\n  pipes?: boolean; // will the app heavily use the pipe service, meaning a lot thing will auto import into that\n  aliases?: boolean; // will the app use aliases\n  entities?: boolean; // will the app use entities menus from the database\n  open?: boolean; // will the app be a public facing app\n  security?: boolean; // will the app enforce security profiles\n  permissions?: boolean; // will the app enforce security profiles\n}\n\n\n// export const APP_INITIALIZER_TASKS = new InjectionToken<Promise<boolean>[]>('App Initializer Tasks', {\n//   providedIn: 'root',\n//   factory: () => <Promise<boolean>[]>[]\n// });\n\n// ********************* Core  *************************************************\n\n\nexport interface CoreInterface {\n  params: EntityParams;   // the base entityId definitions\n  flag?: EntityFlagInterface;\n  repo?: PopEntityRepoService;  // handles are server calls\n  entity?: Entity | undefined; // the active record\n  metadata?: Dictionary<any>; // additional input\n  resource?: Dictionary<any>;\n  preference?: EntityPreference; // the blueprint for field groups\n}\n\n\nexport class CoreConfig {\n  flag: EntityFlagInterface = {};\n  params: EntityParams;\n  repo: PopEntityRepoService;\n  entity: Entity;\n  resource: Dictionary<any> = {};\n  metadata: object;\n  preference: EntityPreference;\n  access: EntityAccessInterface;\n  channel?: EventEmitter<PopBaseEventInterface>;\n\n\n  constructor(params?: CoreInterface) {\n    if (params) for (const i in params) this[i] = params[i];\n    if (!this.metadata) this.metadata = {};\n  }\n}\n\n\nexport interface EntityFilterInterface {\n  entity: string;\n  name: string;\n  options: OptionItem[];\n  path: string;\n  parent_link: string | null;\n  child_link: string | null;\n  single: boolean;\n  sort_order: number;\n}\n\n\n// ********************* Entity *********************\n\n\nexport interface Entity {\n  id: number;\n  name: string;\n  client_id?: number;\n  client_name?: string;\n  account_id?: number;\n  account_name?: string;\n  campaign_id?: number;\n  campaign_name?: string;\n  created_at?: string;\n  created_by_user_id?: string;\n  description?: string;\n  added_by_user_id?: number;\n  added_by_user?: string;\n  added_at?: string;\n  updated_by_user_id?: string;\n  updated_at?: string;\n  deleted_by_user_id?: string;\n  deleted_at?: string;\n  internal_name?: string;\n  scheme_id?: number;\n  scheme_assets?: Dictionary<any>;\n  ui?: Dictionary<any>;\n  assignments?: Dictionary<any>;\n\n  [key: string]: any;\n}\n\n\nexport interface EntityAccessInterface {\n  can_create: boolean | number;\n  can_read: boolean | number;\n  can_update: boolean | number;\n  can_delete: boolean | number;\n  can_destroy: boolean | number;\n}\n\n\nexport interface EntityParamsInterface {\n  alias?: { name: string, plural: string };\n  access?: EntityAccessInterface;\n  entityId?: number; // the entityId of the entityId,\n  can_extend?: boolean;\n  api?: string;\n  app?: string;\n  id?: number;\n  internal_name: string;\n  name: string;\n  param?: string;\n  path?: string; // the api path for the entityId\n  cache?: boolean | number;\n  refresh?: boolean;\n}\n\n\nexport class EntityParams {\n  // id = 0; // the entityId of the entityId\n  alias?: { name: string, plural: string };\n  access?: EntityAccessInterface;\n  api = ''; // the api path of this entityId http:server/app/<api>\n  app?: string; // the name of the app this entityId belongs to used on both local and server urls\n  entityId?: number;\n  can_extend = false;\n  id: number;\n  internal_name: string; // the internal name of this entityId ... client maybe aliased so we need to have a hard reference back to it\n  name: string;\n  path? = '';\n  param? = '';\n  refresh? = false;\n  blockAssets? = false;\n\n\n  constructor(params?: EntityParamsInterface) {\n    if (params) for (const i in params) this[i] = params[i];\n  }\n}\n\n\nexport interface EntityFlagInterface {\n  routeCheck?: boolean;\n  assetCheck?: boolean;\n  modalCheck?: boolean;\n  refreshCheck?: boolean;\n\n  [key: string]: boolean;\n}\n\n\nexport interface EntityPreference {\n  table: any;\n  fields: any;\n  filters: boolean;\n  options: any;\n}\n\n\nexport interface EntityFieldItemInterface {\n  name?: string; // user assigned label for field use for header\n  data?: Dictionary<any>; //\n  items?: FieldItemInterface[];\n\n  [key: string]: any;\n}\n\n\nexport interface EntityModelInterface {\n  action?: Dictionary<any>;\n  dataSetter?: DataSetter;\n  lastDataSetter?: DataSetter;\n  decorator?: DataDecorator;\n  entryAccess?: string[];\n  filter?: DataFilter;\n  tab?: TabConfig[];\n  table?: EntityModelTableInterface;\n  menu?: EntityModelMenuInterface;\n  scheme?: Dictionary<any>;\n  field?: Dictionary<FieldInterface>;\n  resource?: Dictionary<ResourceInterface>;\n  route?: ServiceRoutesInterface;\n}\n\n\nexport class EntityExtendInterface {\n  buttons?: TabButtonInterface[];\n  can_read?: boolean | string;\n  can_update?: boolean;\n  debug?: boolean;\n  goToUrl?: string;\n  postUrl?: string;\n  internal_name?: string;\n  linkBehavior?: 'portal';\n  parent?: string;\n  parentId?: string | number;\n  portal?: boolean;\n  syncTabs?: boolean;\n  width?: string | number;\n  table?: EntityModelTableInterface;\n  tabs?: TabConfig[];\n}\n\n\nexport interface EntityModelTableInterface {\n  advanced_search?: boolean;\n  preference?: Dictionary<any>;\n  button?: EntityModelTableButtonInterface;\n  filter?: EntityModelTableFilterInterface;\n  linkBehavior?: 'portal';\n  extension?: EntityExtendInterface;\n  permission?: Dictionary<boolean>;\n  whitelist?: Dictionary<1>; // fields to always show\n  blacklist?: Dictionary<1>; // fields to never show\n  appendlist?: Dictionary<number | string | boolean>; // fields to never show\n  route?: string;\n}\n\n\nexport interface EntityModelTableFilterInterface {\n  active?: boolean;\n  display?: string;\n  query?: Dictionary<string>;\n  view?: string[];\n  api?: EntityFilterInterface[];\n}\n\n\nexport interface EntityModelTableButtonInterface {\n  advanced_search?: boolean;\n  archived?: boolean;\n  custom?: any[];\n  new?: boolean;\n}\n\n\nexport interface EntityModelMenuInterface {\n  button?: {\n    archive?: boolean;\n    clone?: boolean;\n    custom?: any[];\n    delete?: boolean;\n    goBack?: boolean;\n  };\n  archiveKey?: string;\n}\n\nexport interface SchemeComponentModelInterface {\n  action?: Dictionary<any>;\n  tab?: TabConfig[];\n  component?: DynamicComponentInterface;\n  resource?: Dictionary<ResourceInterface>;\n  setting?: SchemeComponentSettingInterface;\n  option?: Dictionary<any>;\n}\n\n\nexport interface SchemeComponentSettingInterface {\n  component?: DynamicComponentInterface;\n  client_id?: number[];\n  account_id?: number[];\n  campaign_id?: number[];\n  readonly?: boolean;\n\n  [key: string]: any;\n}\n\n\nexport interface SchemeComponentOptionInterface {\n  component?: DynamicComponentInterface;\n  client_id?: number[];\n  account_id?: number[];\n  campaign_id?: number[];\n  startDate?: string;\n  endDate?: string;\n\n  [key: string]: any;\n}\n\n\nexport interface SchemeComponentParamInterface {\n  id?: string;\n  internal_name?: string;\n  name?: string;\n}\n\n\nexport class SchemeComponentParams {\n  id?: string;\n  internal_name?: string; // the internal name of this entityId ... client maybe aliased so we need to have a hard reference back to it\n  name?: string;\n\n\n  constructor(params?: SchemeComponentParamInterface) {\n    if (params) for (const i in params) this[i] = params[i];\n  }\n}\n\n\nexport interface SchemeComponentConfigInterface {\n  cols?: number;\n  component?: DynamicComponentInterface;\n  config?: Dictionary<any>;\n  faux?: string;\n  group?: string;\n  icon?: string;\n  id?: string;\n  internal_name?: string;\n  minItemRows?: number;\n  minItemCols?: number;\n  name?: string;\n  option?: SchemeComponentOptionInterface;\n  param: SchemeComponentParamInterface;\n  preferences?: Dictionary<any>;\n  resource?: Dictionary<ResourceInterface>;\n  rows?: number;\n  setting?: SchemeComponentSettingInterface;\n  type?: string;\n  x?: number;\n  y?: number;\n  component_id?: number;\n}\n\n\nexport class SchemeComponentConfig {\n  cols?: number;\n  component?: DynamicComponentInterface;\n  config?: Dictionary<any>;\n  faux?: string;\n  group?: string;\n  icon?: string;\n  id?: string;\n  internal_name?: string;\n  minItemRows?: number;\n  minItemCols?: number;\n  name?: string;\n  option?: SchemeComponentOptionInterface;\n  param: SchemeComponentParamInterface;\n  preferences?: Dictionary<any>;\n  resource?: Dictionary<ResourceInterface>;\n  rows?: number;\n  setting?: SchemeComponentSettingInterface;\n  type?: string;\n  x?: number;\n  y?: number;\n  widget_id?: number;\n\n\n  constructor(params?: SchemeComponentConfigInterface) {\n    if (params) for (const i in params) this[i] = params[i];\n  }\n}\n\n\nexport interface SchemeComponentGroupInterface {\n  id?: number | string;\n  name?: string;\n  widgets?: SchemeComponentConfigInterface[];\n}\n\n\n// ********************* Resource *************************************************\n\nexport interface ResourceInterface {\n  name: string;\n  defaultValue?: string | number | boolean;\n  api_cache?: boolean | number;\n  api_path?: string;\n  api_when?: any[];\n\n  api_path_vars?: Dictionary<string>;\n  api_params?: QueryParamsInterface;\n  api_version?: number;\n  can_read?: string;\n  data?: any;\n  data_values?: OptionItem[];\n  data_decorator?: DataDecorator;\n  data_filter?: Dictionary<string | number | boolean>;\n  data_setter?: DataSetter;\n  data_when?: any[];\n  data_storage?: 'data_values' | 'data';\n}\n\n\nexport class ResourceConfig {\n  name: string;\n  defaultValue?: string | number | boolean = null;\n  api_cache?: boolean | number = false;\n  api_version? = 1;\n  api_path? = '';\n  api_when?: any[];\n  api_path_vars?: Dictionary<string> = null;\n  api_params?: QueryParamsInterface;\n  can_read?: string;\n  data?: any;\n  data_values?: OptionItem[] = [];\n  data_filter?: Dictionary<string | number | boolean> = null;\n  data_setter?: DataSetter;\n  data_decorator?: DataDecorator;\n  data_when?: any[] = null;\n  data_storage?: 'data_values' | 'data';\n\n\n  constructor(params?: ResourceInterface) {\n    if (params) for (const i in params) this[i] = params[i];\n  }\n}\n\n\n// ********************* Fields *************************************************\n\n\nexport class FieldItemInterface {\n  id?: number;\n  active?: boolean | number;\n  name?: string;\n  component?: ComponentType<any>;\n  config?: SideBySideConfig | LabelConfig | CheckboxConfig | InputConfig | NumberConfig | SelectConfig | SelectMultiConfig | RadioConfig | TextareaConfig | SwitchConfig | MinMaxConfig | MetadataConfig;\n  custom_setting?: Dictionary<FieldCustomSettingInterface>;\n  entry?: FieldEntry;\n  field_id?: number;\n  field_item_id?: number;\n  model?: FieldItemModelInterface;\n  view?: Dictionary<any>;\n  rule?: Dictionary<string | number | boolean | any[]>;\n  rules?: FieldItemRule[];\n  table?: FieldItemTableInterace;\n  trait?: FieldItemTrait;\n  field?: Dictionary<string>;\n  source?: FieldItemOption[];\n  sourceMap?: KeyMap<number>;\n  setting?: Dictionary<boolean | number | string | any[] | Dictionary<boolean | number | string>>;\n  sort?: number;\n}\n\n\nexport class FieldItemConfig {\n  id?: number;\n  active?: boolean | number;\n  name?: string;\n  custom_setting?: Dictionary<FieldCustomSettingInterface> = {};\n  component: ComponentType<any>;\n  config?: LabelConfig | CheckboxConfig | InputConfig | NumberConfig | SelectConfig | SelectMultiConfig | RadioConfig | TextareaConfig | SwitchConfig | MetadataConfig;\n  entry?: FieldEntry;\n  field?: Dictionary<string>;\n  internal_name?: string;\n  model?: FieldItemModelInterface;\n  table?: FieldItemTableInterace;\n  setting?: Dictionary<boolean | number | string | any[] | Dictionary<boolean | number | string>> = {};\n  sort?: number;\n\n\n  constructor(config?: FieldItemInterface) {\n    for (const i in config) this[i] = config[i];\n  }\n}\n\n\nexport interface FieldCustomSettingInterface {\n  id?: number;\n  component?: ComponentType<any>;\n  defaultValue?: boolean | number | string | any[] | Dictionary<boolean | number | string>;\n  disabled?: boolean;\n  field_id?: number;\n\n  group?: string;\n  helpText?: string;\n  icon?: string;\n  item?: string;\n  items?: any;\n  label?: string;\n  modal?: ComponentType<any>;\n  model?: string;\n  multiple?: boolean;\n  name: string;\n  options?: FieldItemOptions;\n  selected?: boolean;\n  type: 'boolean' | 'expression' | 'validation' | 'transformation' | 'model' | 'primary' | 'fixed' | 'trait'; // just guesses at this point\n  value?: boolean | number | string | any[] | Dictionary<boolean | number | string>;\n  when?: any[];\n}\n\n\nexport interface FieldEntry {\n  disabled?: boolean;\n  id: number;\n  field_id: number;\n  name: string;\n  orphaned?: boolean;\n  orphaned_at?: boolean | string;\n  sort_order: number;\n  type: string;\n  traits: FieldCustomSettingInterface[];\n}\n\n\nexport interface FieldItemPatchInterface {\n  field: string;\n  path: string;\n  method?: 'POST' | 'PATCH';\n  businessId?: number; // specify the business\n  callback?: EventCallback;\n  disabled?: boolean;  // allow for auto-patch to be disabled and but still allow to be called manually\n  displayIndicator?: boolean;\n  duration?: number;\n  ignore401?: boolean;\n  metadata?: {};\n  trigger?: 'auto' | 'manual';\n  version?: number;\n  running?: boolean;\n  success?: boolean;\n  raw?: boolean;          // Set to True to patch raw value, aka not json_encode\n  json?: boolean;          // Set to True to patch raw value, aka not json_encode\n}\n\n\nexport interface FieldItemRule {\n  id: number;\n  field_id: number | null;\n  field_item_id: number | null;\n  name: string;\n  defaultValue?: string | boolean | number | any[];\n  value?: string | boolean | number | any[];\n  source?: any[] | null;\n  options?: any[] | null;\n}\n\n\nexport interface FieldItemOptions {\n  assigned?: any;\n  child?: string;\n  converted?: boolean;                      // Indicates that option list has already been parsed into an options set\n  defaultValue?: string | number | boolean | any[];\n  empty?: OptionItem;                       // Pass in an Option Item that you want to represent an unassigned value\n  ensure?: OptionItem;\n  nameKey?: 'string';\n  parent?: string;\n  preserveKeys?: string[];\n  rawValues?: FieldItemOption[];\n  values?: FieldItemOption[];\n  resource?: string;\n  sort?: boolean;\n  prevent?: Array<string | number>;         // pass in ids of an Option Items that you don't want in list\n}\n\n\nexport interface FieldItemOption {\n  value: number | string;\n  name: string;\n  group?: string;\n  groupFk?: number;\n  level?: number;\n  indentation?: number;\n  mode?: number | string;\n  sort_order?: number;\n  selected?: boolean;\n  hidden?: boolean;\n}\n\n\nexport interface FieldItemTableInterace {\n  sort?: number;\n  visible?: boolean;\n  transformation?: any;\n  hidden?: boolean;\n}\n\n\nexport interface FieldItemTrait {\n  metadata?: boolean;\n  primary?: boolean;\n  bubble?: boolean;\n  readonly?: boolean;\n  unique?: boolean;\n  secure?: boolean;\n}\n\n\nexport interface FieldOptionsInterface {\n  layout?: string;\n  legend?: boolean;\n  bubble?: boolean;\n\n  [key: string]: any;\n}\n\n\nexport interface FieldItemModelInterface {\n  active?: boolean;\n  all?: boolean;\n  allowAll?: boolean;\n  allowGroupAll?: boolean;\n  allOverlay?: boolean;\n  allOverlayEnabled?: boolean;\n  allOverlayLabel?: string;\n  allOverlayMessage?: string;\n  allOverlayCallback?: EventCallback;\n  api_path?: string;\n  api_column?: string;\n  api_metadata?: object | any[];\n  assign_all?: boolean;\n  autoFill?: boolean;\n  autoSize?: boolean;\n  autofocus?: boolean;\n  autoselect?: boolean;\n  assignedLabel?: string;\n  bubble?: boolean;\n  button?: boolean;\n\n  border?: boolean;\n  checkbox?: { visible?: boolean, sort?: number };      // [Table: 'Display a selectable checkbox:extraction: a little muddy']\n  name?: string;\n  className?: string;\n  copyLabel?: boolean;         // [Label: The label text has a click to copy]\n  copyLabelDisplay?: string;  // [Label: The label that should go with the label copy button]\n  copyLabelBody?: string | number;    // [Label: The value that be copied when the label copy button is clicked]\n  copyLabelDisplayTransformation?: any; // The transformation that should happen to the copyLabelDisplay\n  copyLabelBodyTransformation?: any; // The transformation that should happen to the copyLabelBody\n\n  copyValue?: boolean;         // [Label: The value text has a click to copy]\n  copyValueDisplay?: string;  // [Label: The value that should go with the value copy button]\n  copyValueBody?: string | number;    // [Label: The value that be copied when the label value button is clicked]\n  copyValueDisplayTransformation?: any; // The transformation that should happen to the copyLabelDisplay\n  copyValueBodyTransformation?: any; // The transformation that should happen to the copyLabelBody\n\n  display?: string;     // [Univr: 'the label of the field/name']\n  displayTitle?: boolean;\n  displayHelper?: boolean;\n  entry?: FieldEntry;\n  empty?: 'ConvertEmptyToNull' | 'ConvertEmptyToZero';\n  filter?: boolean;\n  filterPredicate?: string | DateFilterPredicate;\n  helpText?: string;  // [Univr: 'Creates a tooltip that displays this value :usage: <'The is some helpful information about this field'>']\n  helper?: string;       // [Univr: 'A navigation mechanism: a combo of tooltip, route, and helpText: usage < 'Go to <client>' : extraction : Will look on the active record to find the actual value of client to display inn tooltip and also look for 'client' + '_fk' to create a route\n  hidden?: boolean;\n  html?: string;\n  route?: string;        // [Univr: 'Navigate on click target':extraction: If a field or name navigates, this value needs to till it where to go]\n  subLabel?: string;\n  subValue?: string;\n  id?: string | number;\n  icon?: string;        // Material icon\n  iconType?: string;\n  link?: boolean;       // [Univr: 'Indicate <hype-route> text':extraction:Displays the value as a hyperlink, fires a event when clicked]\n  order?: number;      // [Univr: 'left to right (horizontal) position']\n  sort?: number;       // [Univr: 'top to bottom (vertical) position']\n  visible?: boolean;    // [Table: 'Set to true to see in table view']\n  // show name'\n\n  form?: string;       // [Field: 'html input type <'input' | 'select' | 'textarea' | 'radio' | 'checkbox' | 'switch' | 'metadata'>  'metadata' will not display an html capture but will append field=>value to metadata']\n  value?: any;         // [Field: 'A default/existing value on the html capture'\n  header?: string | number | boolean;\n  height?: string | number;\n  hint?: boolean;\n  hintText?: string;\n  maxHeight?: number;\n  interval?: string;\n  disabled?: boolean;   // [Field: 'Disabled']\n  facade?: boolean;    // [Field: 'Set to true to signal that this field is a client side mechanism (filter, helper, toggle),effects no actual value on the server side(no patch)]\n  label?: string;     // [Univr: 'the label of the field/name']\n  labelButton?: boolean;  // Display the label with a button\n  labelPosition?: string;\n  layout?: string;\n  list?: any;\n  min?: number;         // [Field: 'min value']\n  max?: number;         // [Field: 'max value']\n  mode?: any;\n  maxColumn?: string;\n  maxlength?: number;   // [Field: 'maxlength:default:64]\n  minHeight?: number;   // [Field: 'maxlength:default:64]\n  minlength?: number;   // [Field: 'maxlength:default:64]\n  minValue?: number;\n  maxValue?: number;\n  minColumn?: string;\n  metadata?: object;   // [Field: 'maxlength:default:64]\n  noInitialValue?: boolean;\n  multiple?: boolean;\n  options?: FieldItemOptions;   // [Field: 'maxlength:default:64]\n  optionsLabel?: string;\n  patch?: FieldItemPatchInterface;\n  prevent?: any[];\n  pattern?: string;     // [Field: 'regex pattern:default:'AlphaNumeric']\n  preserve?: boolean;\n  required?: boolean | number;   // [Field: 'set to false to bypass required validator:default:true']\n\n\n  removeAll?: boolean;\n  readonly?: boolean;   // [Field: 'Html attribute']\n  reset?: boolean;       // Flags whether the view should be reset if this field changes\n  step?: number;\n  mask?: string;        // [Field: 'Input Mask']\n  prefix?: string;      // [Field: 'Set a prefix on the html capture .. $, does not get stored on captured value']\n  session?: boolean;\n  sessionPath?: string;\n  size?: number;\n  suffix?: string;      // [Field: 'Set a prefix on the html capture .. '%', does not get stored on captured value']\n  transformation?: any;\n  tabOnEnter?: boolean;           // Convert enter to a tab when control is valid, default is false ie .. set to true when you want to moved down a form list\n  time?: string;\n  truncate?: number;\n  textOverflow?: 'ellipsis' | 'wrap'; // Text overflow behavior,\n  type?: string;\n  validators?: Array<Validators>; // Array of Validators.\n  valueButton?: boolean;  // Display the value with a button\n  valueButtonDisabled?: boolean;  // Display the value with a button\n  valueButtonDisplay?: string;  // The label that should go with the label value button\n  valueButtonDisplayTransformation?: any;  // The transformation that should happen to the valueButtonDisplay\n  warning?: string | number | boolean;\n  when?: any[];         // [Field: 'Pass an array of strings <['name[:value]']> that should be truthful for this field to show.// ['account_fk'] ..ie  <['account_fk']> account_fk just needs to be defined or <['client_fk', 'account_fk:88']> client just needs to be defined, account_fk has to be 88']\n}\n\n\nexport interface FieldInterface {\n  canAdd?: boolean;\n  canRemove?: boolean;\n  configs?: { field_configs: FieldCustomSettingInterface[ ], item_configs: KeyMap<FieldCustomSettingInterface[]> };\n  custom_rule?: Dictionary<any>;\n  custom_setting?: Dictionary<FieldCustomSettingInterface>;\n  custom?: boolean;\n  component?: ComponentType<any>;\n  ancillary?: boolean | number;\n  children?: Dictionary<FieldItemInterface>;\n  data?: any;\n  data_keys?: any[];\n  entries?: FieldEntry[];\n  metadata?: Dictionary<any>;\n  multiple?: boolean;\n  multiple_min?: number;\n  multiple_max?: number;\n  multiple_max_limit?: number;\n  facade?: boolean;\n  fieldgroup?: Entity;\n  hidden?: boolean;\n  id?: number | string;\n  internal_name?: string;\n  model?: FieldItemModelInterface;\n  items?: KeyMap<FieldItemInterface>;\n  itemMap?: any;\n  name?: string;\n  label?: string;\n  options?: Dictionary<any>;\n  position?: number;\n  primary?: boolean;\n  setting?: Dictionary<boolean | number | string | any[] | Dictionary<boolean | number | string>>;\n  show_name?: boolean;\n  sort?: number;\n  state?: 'template_edit' | 'template_readonly' | 'text_single' | 'text_format';\n  table?: Dictionary<any>;\n  trait?: Dictionary<any>;\n  value?: any;\n  view?: Dictionary<any>;\n  when?: any;\n}\n\n\nexport class FieldConfig {\n  canAdd = false;\n  canRemove = false;\n  children?: Dictionary<FieldItemInterface>;\n  component: ComponentType<any>;\n  configs?: { field_configs: FieldCustomSettingInterface[ ], item_configs: KeyMap<FieldCustomSettingInterface[]> };\n  custom_rule?: Dictionary<any>;\n  custom_setting?: Dictionary<FieldCustomSettingInterface> = {};\n  data?: any = {};\n  data_keys: any[] = [];\n  facade? = false;\n  fieldgroup?: Entity;\n  entry?: FieldEntry;\n  entries?: FieldEntry[] = [];\n  metadata? = {};\n  multiple = false;\n  multiple_min? = 1;\n  multiple_max? = 1;\n  multiple_max_limit? = 10;\n\n  id = null;\n  internal_name?: string;\n\n  items?: any;\n  itemMap: any;\n  name = '';\n  label: string;\n  modal?: ComponentType<any>;\n  show_name = true;\n  options = <FieldOptionsInterface>{};\n  primary?: boolean;\n  setting?: Dictionary<boolean | number | string | any[] | Dictionary<boolean | number | string>> = {};\n  sort? = 99;\n  state: 'template_edit' | 'template_readonly' | 'text_single' | 'text_format' = 'template_edit';\n  view?: Dictionary<any>;\n\n\n  // onEvent: Subject<PopBaseEventInterface>;\n\n\n  constructor(params?: FieldInterface) {\n    if (params) for (const i in params) this[i] = params[i];\n    if (!this.options) this.options = {};\n  }\n}\n\n\n// ********************* FIELD GROUPS *************************************************\n\n\nexport interface FieldGroupInterface {\n  id?: string | number;\n  header?: string;\n  border?: boolean;\n  position?: string;\n  debug?: boolean;\n  layout?: 'row' | 'column';\n  metadata?: object;   // Any metadata desired.\n  fields?: FieldInterface[];\n  fieldMap?: object;\n}\n\n\nexport class FieldGroupConfig {\n  id?: string | number;\n  header? = '';\n  border? = false;\n  position? = 'left';\n  debug? = false;\n  layout?: 'row' | 'column' = 'column';\n  metadata?: object = {};   // Any metadata desired.\n  fields?: FieldInterface[] = [];\n  fieldMap?: object;\n\n\n  constructor(params?: FieldGroupInterface) {\n    if (params) for (const i in params) this[i] = params[i];\n  }\n}\n\n\nexport interface SectionInterface {\n  id: string;\n  active?: boolean;\n  name?: string;\n  path?: string;\n  inputs?: object;\n  component: ComponentType<any>;\n  metadata?: object;\n  requireRefresh?: boolean;        // require an api call to refresh the entityId on every load\n}\n\n\nexport class SectionConfig {\n  id: string;\n  name?: string;\n  path? = '';\n  metadata?: object;\n  inputs = {};\n  component: ComponentType<any>;\n  visible = true;\n  require_refresh? = false;\n\n\n  constructor(params: SectionInterface) {\n    if (params) for (const i in params) this[i] = params[i];\n    if (!this.name) this.name = this.id.replace(/_/g, ' ').replace(/(?:^|\\s)\\S/g, function (a) {\n      return a.toUpperCase();\n    });\n\n    if (!this.path) this.path = this.id.replace(/_/g, '-').toLowerCase();\n    if (!this.metadata) this.metadata = {};\n  }\n}\n\n\nexport interface TabSectionBarInterface {\n  name: string;\n  params: EntityParams;\n  access?: EntityAccessInterface;\n  field?: Dictionary<any>;\n  action?: Dictionary<any>;\n  repo?: PopEntityRepoService;\n  entity?: Entity;\n  preference?: EntityPreference;\n  sections?: Array<SectionConfig>;\n  metadata?: any;\n}\n\n\nexport class TabSectionBarConfig {\n  access: EntityAccessInterface = {\n    can_create: false,\n    can_read: false,\n    can_update: false,\n    can_delete: false,\n    can_destroy: false,\n  };\n  params: EntityParams;\n  repo: PopEntityRepoService;\n  entity: Entity;\n  field?: Dictionary<any>;\n  action?: Dictionary<any>;\n  preference: EntityPreference;\n  metadata?: any;\n  name = '';\n  sections: Array<SectionConfig> = [];\n\n\n  constructor(params?: TabSectionBarInterface) {\n    if (params) for (const i in params) this[i] = params[i];\n    if (!this.metadata) this.metadata = {};\n  }\n}\n\n\nexport interface FieldParamInterface {\n  column: string;\n  name: string;   // the base entityId definitions\n  label: string;\n  value: number | string | boolean;\n  defaultValue: number | string | boolean;\n  default_value: number | string | boolean;\n  metadata: Dictionary<any>;\n  params: any;\n  options?: FieldItemOptions;\n  helpText?: string;\n  patch?: FieldItemPatchInterface;\n  facade?: boolean;\n  readonly: boolean;\n  required: boolean;\n  min?: number;\n  max?: number;\n}\n\n\nexport interface Dictionary<T> {\n  [key: string]: T;\n}\n\n\nexport interface KeyMap<T> {\n  [key: number]: T;\n}\n\n\nexport interface DynamicComponentInterface {\n  type: ComponentType<any>;\n  inputs?: Dictionary<number | string | boolean | object | any[]>;\n  position?: number;\n  when?: any;\n  ancillary?: boolean | number;\n  hidden?: boolean;\n  sort?: number;\n}\n\n\nexport interface QueryParamsInterface {\n  archived?: -1 | 0 | 1;\n  related?: boolean;\n  bypassFilters?: boolean;\n  bypassParams?: boolean;\n  select?: string;\n  with?: string;\n  bypassCache?: boolean;\n  cache?: boolean;\n  cacheKey?: string;\n}\n\n\nexport interface PopBaseEventInterface {\n  type: string;                             // (*required)  this should be a generic name of the source component  ..ie field, table, tab, button\n  source: string;                           // the name of the Component that the event came from\n  name: string;                             // (*required)  this should be specific to the event ie ... blur, patch, focus, onValueChange\n\n  channel?: boolean;                        // (optional)   This sets a flag that this event has already be sent across the channel, and should NOT be sent across the channel again\n  session?: boolean;                        // (optional)   This sets a flag that this event created a onSession event\n\n  access?: string;                          // (optional)   This should be a crud access\n  config?: any;                             // (optional)   This should be the source component's configuration\n  core?: CoreConfig;                        // (optional)   This should be an core\n\n  data?: any;                               // (optional)   Used for tracking a changed value\n  data_key?: number;                        // (optional)   data index\n  id?: string | number;                     // (optional)   Misc, used to track between events of modules that are similar\n  ids?: any[];                              // (optional)   Misc, used to track between events of modules that are similar\n  entity?: Entity;\n  form?: FormGroup;                         // (optional)   Form Group of fieldItems\n  group?: FieldItemGroupConfig;             // (optional)   The Field Group Config that this event source belongs to .. ie will give you permissons to the config of other fieldItems in the group\n  field?: FieldInterface;                   // (optional)   Core Field Interface\n  fields?: Dictionary<FieldInterface>;                   // (optional)   Core Field Interface\n  column?: string;                          // (optional)   The field item entityId\n  fieldgroup?: FieldGroupConfig;            // (optional)   The Field Group Config that this event source belongs to .. ie will give you permissons to the config of other fieldItems in the group\n  internal_name?: string;                   // (optional)\n  message?: string;                         // (optional)   Helpful language\n  metadata?: any;                           // (optional)   Additional info\n  method?: string;                          // (optional)   This should be a entityId name create, read, store, delete\n  model?: any;                              // (optional)   This should be the field configuration model that a field config is built off\n  open?: boolean;                            //\n  option?: any;                              //\n\n  tab?: TabConfig;                          // (optional)   The tab config that this event occurred from, ie ... will contain a mapping of the view, ie ... allow you to reload all/portion of the view\n  target?: string;                           // the name of the Component that the event should go to\n  component?: TabComponentInterface;        // (optional)   The tab component config that this event occurred from, ie ... will contain a mapping of the specific tab section of the view\n  options?: any[];                          // (optional)   Used to track options of selects fieldItems, sidebyside, radios\n  position?: string;                        // (optional)   This should reference a template position ie ... left, center, right\n  success?: boolean;                        // (optional)   Specify if a event was successful ie.. patch\n  refresh?: boolean;                        //\n  response?: any;                           // (optional)   The server response on a patch\n  value?: boolean;                          // (optional)   Specify a certain value ie.. patch\n  cdr?: ChangeDetectorRef;                  // (optional)   Reload Tab Position\n\n}\n\n\n/**\n * Method to travel up dom of element until a height is found\n * @param el\n */\n\nexport function ParentHeightSetter(el: ElementRef, className: string = null) {\n  let height = 0;\n  let maxHeight = 0;\n  let attempts = 20;\n  if (el && el.nativeElement && el.nativeElement.parentElement) {\n    let parent = el.nativeElement.parentElement;\n    while (!height && attempts) {\n      if (parent.clientHeight) {\n        if (parent.clientHeight > maxHeight) {\n          maxHeight = parent.clientHeight;\n        }\n        if (className) {\n          if (parent.classList && parent.classList.contains(className)) {\n            height = parent.clientHeight;\n          }\n        } else {\n          height = parent.clientHeight;\n        }\n      }\n      if (!height && parent.parentElement) {\n        parent = parent.parentElement;\n\n      }\n      attempts--;\n    }\n  }\n  if (!height && maxHeight) height = maxHeight;\n\n  return height;\n}\n\n\nexport interface OptionItem {\n  id?: string | number;\n  value?: string | number | null;\n  name: string;\n  label?: string;\n  sort?: number;\n  active?: number | boolean;\n  compact?: boolean;\n}\n\n\nexport interface OptionParamsInterface {\n  key?: string;                             // the default key is 'entityId' ie.. it is going to look for the entityId of the passing in options and convert it to setKey which should be 'value'\n  setKey?: string;                          // the default key is 'value', not really an reason to subject ... yet\n  nameKey?: string;                          // the default key is 'name', this is the column that should be used to present the \"name\" of the item\n  tags?: string[];                          // cant remember\n  sort?: boolean;                           // If set to true, will sort based off of key\n  group?: string;                           // set a default group on the options\n  activeKey?: string;                        // which key should be used for active\n  groupKey?: string;                        // which key should be used for the grouping\n  groupFkKey?: string;                      // which key should be used for the groupFk\n  parent?: { field: string, value: number };// If Set, all options that do not have field:value match will be removed\n  level?: number;                           // Set an indentation level\n  empty?: OptionItem;                       // Pass in an Option Item that you want to represent an unassigned value\n  preserveKeys?: Array<string>;             // pass in keys that should remain in the list\n  prevent?: Array<string | number>;         // pass in ids of an Option Items that you don't want in list\n  ensure?: OptionItem;                      // Pass in an Option item that has to be in the list ... ie maybe the assigned value is archived and does not come through\n  converted?: boolean;\n  hasEmpty?: boolean;\n}\n\n\nexport interface EntityActionInterface {\n  name: string;\n  bubbleAll?: boolean;\n  component?: DynamicComponentInterface;\n  blockEntity?: boolean;\n  facade?: boolean;\n  facadeDuration?: number;\n  fields?: Dictionary<any>;\n  header?: string;\n  width?: string;\n  submitText?: string;\n  cancelText?: string;\n  label?: string;\n  postUrl?: string;\n  goToUrl?: string;\n  http?: 'POST' | 'PATCH' | 'DELETE' | 'GET';\n  responseType?: 'form' | 'boolean' | 'store';\n  store?: Dictionary<any>;\n  active?: boolean | number;\n  callback?: EventCallback;\n  onEvent?: EventPromiseCallback;\n}\n\n\nexport interface EntityActionDataInterface {\n  core: CoreConfig;\n  action?: EntityActionInterface;\n  actionName?: string;\n  extension?: EntityExtendInterface;\n}\n\n\nexport interface EntitySuccessDataInterface {\n  header: string;\n  message: string;\n  submitText?: string;\n}\n\n\nexport interface ServiceRoutesInterface {\n  get?: {\n    entity?: ServiceRouteInterface;\n    entities?: ServiceRouteInterface;\n    config?: ServiceRouteInterface;\n    preference?: ServiceRouteInterface;\n  };\n  patch?: {\n    entity: ServiceRouteInterface;\n    entities?: ServiceRouteInterface;\n  };\n  archive?: {\n    entity?: ServiceRouteInterface;\n  };\n  restore?: {\n    entity?: ServiceRouteInterface;\n  };\n}\n\n\nexport interface ServiceRouteInterface {\n  path: string;\n  params?: ServiceRouteParamInterface;\n}\n\n\nexport interface ServiceRouteParamInterface {\n  with?: string;\n  select?: string;\n\n  [key: string]: string | boolean | number | number[];\n}\n\n\n\n\n","import { Pipe, PipeTransform } from '@angular/core';\n\n\n@Pipe({ name: 'toActiveOrArchived', pure: true })\nexport class ToActiveOrArchivedPipe implements PipeTransform {\n  /**\n   * If value is true, then that would indicate that is archived\n   * @param value\n   */\n  transform(value){\n    if( value === 'true' || value === '1' ) value = true;\n    if( value === 'false' || value === '0' ) value = false;\n    return value && value !== null ? 'Archived' : 'Active';\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({ name: 'label', pure: true })\nexport class LabelPipe implements PipeTransform {\n\n  aliases = [];\n\n\n  /**\n   * Provides the actual name we want displayed to the user.\n   * text - The field name coming from the DB.\n   * displayInfo - Either a string or object. If object then will look for property display or label. Takes aliases into account. IE: account:ID\n   * set - If passed will look in the displayInfo object for this field before falling back to the display or label field.\n   * returns {string}\n   */\n  transform(text: string, displayInfo: any = '', displayField: string = ''){\n    let displayString = '';\n\n    if( displayInfo && typeof displayInfo === 'string' ){\n      displayString = displayInfo;\n    }else if( displayInfo && displayField && displayInfo[ displayField ] ){\n      displayString = displayInfo[ displayField ];\n    }else if( displayInfo && displayInfo.display ){\n      displayString = displayInfo.display;\n    }else if( displayInfo && displayInfo.label ){\n      displayString = displayInfo.label;\n    }\n\n    // Check for aliases.\n    if( displayString ){\n      if( displayString.includes('alias:') ){\n        const aliasArray = displayString.split(':');\n        aliasArray.shift();\n        const alias = this.getAlias(aliasArray.shift()).toLocaleLowerCase();\n        displayString = alias.charAt(0).toUpperCase() + alias.slice(1) + ' ';\n        let tempString = '';\n        while( tempString = aliasArray.shift() ) displayString += ' ' + tempString;\n      }\n    }else{\n      // Format the string base on the field name.\n      const words = text.split('_');\n      for( const word of words ){\n        if( word === 'id' || word === 'fk' ){\n          displayString += 'ID ';\n        }else{\n          displayString += word.charAt(0).toUpperCase() + word.slice(1) + ' ';\n        }\n      }\n    }\n\n    return displayString.trim();\n  }\n\n\n  public getAlias(entity){\n    return ( this.aliases[ entity ] ? this.aliases[ entity ] : entity );\n  }\n}\n","import {\n  Dictionary,\n  Entity,\n  OptionItem,\n  OptionParamsInterface,\n  PopAuth, PopLog,\n  PopRouteAliasMap,\n  PopTemplate,\n  ServiceInjector\n} from './pop-common.model';\nimport {PopLogService} from './services/pop-log.service';\nimport {PhonePipe} from './pipes/phone.pipe';\nimport {ToActiveOrArchivedPipe} from './pipes/toActiveOrArchived.pipe';\nimport {LabelPipe} from './pipes/label.pipe';\nimport {isDevMode} from '@angular/core';\n\n\n/************************************************************************************************\n *                                                                                              *\n *                                      Local Storage                                           *\n *                                                                                              *\n ************************************************************************************************/\n\n/**\n * Store a value in localStorage for the site\n * @param siteVarPath - This should always follow a dot notation that represents the structure of an object App.Setting.value\n * @param siteVal\n */\nexport function SetSiteVar(siteVarPath: string, siteVal: any) {\n  if (IsString(siteVarPath, true) && siteVarPath.includes('.') && IsDefined(siteVal)) {\n    // if( IsObject(siteVal) || IsArray(siteVal) ) siteVal = JSON.stringify(siteVal);\n    const steps: string[] = siteVarPath.split('.');\n    const basePath = steps.shift();\n    if (basePath) {\n      const baseStorage = JSON.parse(localStorage.getItem(basePath) || '{}');\n      const key = steps.length ? steps.pop() : basePath;\n      const pathStorage = steps.length ? StorageSetter(baseStorage, steps) : baseStorage;\n      if (pathStorage && key) {\n        if (siteVal === null) {\n          delete pathStorage[key];\n        } else {\n          pathStorage[key] = siteVal;\n        }\n        localStorage.setItem(basePath, JSON.stringify(baseStorage));\n      }\n    }\n  }\n\n}\n\n\n/**\n * Get stored value in localStorage for the site\n * @param siteVarPath - This should always follow a dot notation that represents the structure of an object App.Setting.value\n * @param defaultValue\n * @constructor\n */\nexport function GetSiteVar(siteVarPath: string, defaultValue: any = null) {\n  if (IsString(siteVarPath, true) && siteVarPath.includes('.')) {\n    const steps = siteVarPath.split('.');\n    const basePath = steps.shift();\n    if (basePath) {\n      const key = steps.length ? steps.pop() : basePath;\n      // console.log('basePath ', basePath, ' key', key);\n      const baseStorage = JSON.parse(localStorage.getItem(basePath) || '{}');\n      // console.log('baseStorage', basePath, baseStorage);\n      const pathStorage = steps.length ? StorageSetter(baseStorage, steps) : baseStorage;\n      // console.log('pathStorage', pathStorage);\n      if (pathStorage && key) {\n        const value = typeof pathStorage[key] !== 'undefined' ? pathStorage[key] : defaultValue;\n        // console.log('GetSiteVar', siteVarPath, value, typeof value);\n        return value;\n      } else {\n        return defaultValue;\n      }\n    }\n\n  }\n  return defaultValue;\n}\n\n\nexport function GetRouteAlias(internal_name, type: 'plural' | 'singular' = 'plural'): string {\n  if (IsString(internal_name, true)) {\n    if (IsObject(PopRouteAliasMap, [internal_name])) {\n      return PopRouteAliasMap[internal_name][type];\n    } else {\n      let alias = SnakeToPascal(internal_name);\n      alias = SpaceToHyphenLower(alias);\n      if (type === 'plural') {\n        if (alias.slice(-1) !== 's') alias = `${alias}s`;\n      }\n      return alias;\n    }\n  }\n  return internal_name;\n\n}\n\n\n/************************************************************************************************\n *                                                                                              *\n *                                      Session Storage                                         *\n *                                                                                              *\n ************************************************************************************************/\n\n\n/**\n * Set a session variable for the site\n * @param siteVarPath - This should always follow a dot notation that represents the structure of an object App.Setting.value\n * @param siteVal\n * @constructor\n */\nexport function SetSessionSiteVar(siteVarPath: string, siteVal): void {\n  if (IsString(siteVarPath, true) && siteVarPath.includes('.') && IsDefined(siteVal)) {\n    // if( IsObject(siteVal) || IsArray(siteVal) ) siteVal = JSON.stringify(siteVal);\n    const steps: string[] = siteVarPath.split('.');\n    const basePath = steps.shift();\n    if (basePath) {\n      const key = steps.length ? steps.pop() : basePath;\n      const baseStorage = JSON.parse(sessionStorage.getItem(basePath) || '{}');\n      const pathStorage = steps.length ? StorageSetter(baseStorage, steps) : baseStorage;\n      if (pathStorage && key) {\n        if (siteVal === null) {\n          delete pathStorage[key];\n        } else {\n          pathStorage[key] = siteVal;\n        }\n        sessionStorage.setItem(basePath, JSON.stringify(baseStorage));\n        // console.log('SetSessionSiteVar', basePath, baseStorage);\n      }\n    }\n\n  }\n}\n\n/**\n * Get a stored session variable for the site\n * @param siteVarPath - This should always follow a dot notation that represents the structure of an object App.Setting.value\n * @param defaultValue - Return this value if a stored value is not found\n * @constructor\n */\nexport function GetSessionSiteVar(siteVarPath: string, defaultValue: any = null) {\n  if (IsString(siteVarPath, true) && siteVarPath.includes('.')) {\n    const steps = siteVarPath.split('.');\n    const basePath = steps.shift();\n    if (basePath) {\n      const key = steps.length ? steps.pop() : basePath;\n      const baseStorage = JSON.parse(sessionStorage.getItem(basePath) || '{}');\n      const pathStorage = steps.length ? StorageSetter(baseStorage, steps) : baseStorage;\n      if (pathStorage && key) {\n        const value = typeof pathStorage[key] !== 'undefined' ? pathStorage[key] : defaultValue;\n        // console.log('GetSessionSiteVar', siteVarPath, value, typeof value);\n        return value;\n      } else {\n        return defaultValue;\n      }\n    }\n  }\n  return defaultValue;\n}\n\n/**\n * Get a stored session variable for the site that has been base64 encoded\n * @param siteVarPath\n * @param defaultValue\n * @constructor\n */\nexport function GetEncodedSessionSiteVar(siteVarPath: string, defaultValue: any = null) {\n  let siteVar = GetSessionSiteVar(siteVarPath, defaultValue);\n  if (IsString(siteVar, true)) {\n    try {\n      siteVar = JSON.parse(atob(siteVar));\n    } catch (e) {\n      siteVar = null;\n    }\n  } else {\n    siteVar = null;\n  }\n  return siteVar;\n}\n\n/**\n * Deep Copy an Object\n * @param obj\n */\nexport function DeepCopy(obj) {\n  let copy;\n\n  // Handle the 3 simple types, and null or undefined\n  if (null == obj || 'object' != typeof obj) return obj;\n\n  // Handle Date\n  if (obj instanceof Date) {\n    copy = new Date();\n    copy.setTime(obj.getTime());\n    return copy;\n  }\n\n  // Handle Array\n  if (obj instanceof Array) {\n    copy = [];\n    for (let i = 0, len = obj.length; i < len; i++) {\n      copy[i] = DeepCopy(obj[i]);\n    }\n    return copy;\n  }\n\n  // Handle Object\n  if (obj instanceof Object) {\n    copy = {};\n    for (const attr in obj) {\n      if (obj.hasOwnProperty(attr)) copy[attr] = DeepCopy(obj[attr]);\n    }\n    return copy;\n  }\n\n  throw new Error('Unable to copy obj! Its type isn\\'t supported.');\n}\n\nexport function RandomInt(min, max) {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nexport function JsonCopy(x: any) {\n  return JSON.parse(JSON.stringify(x));\n}\n\n/**\n * Deep merge two objects.\n * @param target\n * @param ...sources\n */\nexport function DeepMerge(target, ...sources) {\n  if (!sources.length) return target;\n  const source = sources.shift();\n\n  if (IsObject(target) && IsObject(source)) {\n    for (const key in source) {\n      if (IsObject(source[key])) {\n        if (!target[key]) Object.assign(target, {[key]: {}});\n        DeepMerge(target[key], source[key]);\n      } else {\n        Object.assign(target, {[key]: source[key]});\n      }\n    }\n  }\n\n  return DeepMerge(target, ...sources);\n}\n\n/**\n * Helper Function to prepare an array to used as an option set for a field item\n * @param arr\n * @param params\n */\nexport function ConvertArrayToOptionList(arr: OptionItem[], params: OptionParamsInterface = {}) {\n  if (!params.key) params.key = 'id';\n  if (!params.setKey) params.setKey = 'value';\n  if (!params.nameKey) params.nameKey = 'name';\n  if (!params.tags) params.tags = null;\n  if (!params.prevent) params.prevent = [];\n  if (!params.parent) params.parent = null;\n  if (!params.groupKey) params.groupKey = 'group';\n  if (!params.activeKey) params.activeKey = 'active';\n  if (!params.preserveKeys) params.preserveKeys = [];\n\n  // if( typeof params.level === 'undefined') params.level = 1;\n\n  if (params.converted) return arr.slice();\n\n  let optionList = [];\n  let listOption;\n  let ensureOptionFound = false;\n  if (Array.isArray(arr) && arr.length) {\n    // check if this list has already be converted to the option list structure, so it does not get re-run\n    let tmpArr = [...arr];\n    const first = tmpArr[0];\n\n    if (params.key === 'id' && typeof first.id === 'undefined' && typeof first.value !== 'undefined') params.key = 'value';\n    if (typeof first[params.activeKey] !== 'undefined') {\n      tmpArr = tmpArr.filter((item) => item[params.activeKey]);\n    }\n\n    if (typeof first[params.nameKey] === 'undefined' && first.name) {\n      params.nameKey = 'name';\n    }\n\n    tmpArr.map((item) => {\n      if (item && params.key in item && params.prevent.indexOf(item[params.key]) === -1) {\n        if (params.parent) {\n          if (params.parent.field in item && +item[params.parent.field] === +params.parent.value) {\n            // continue\n          } else {\n            return false;\n          }\n        }\n        listOption = {name: item[params.nameKey], sort_order: item.sort};\n        listOption[params.setKey] = item[params.key];\n        if (params.preserveKeys.length) {\n          params.preserveKeys.map(preserveKey => {\n            listOption[preserveKey] = item[preserveKey] ? item[preserveKey] : undefined;\n          });\n        }\n        if (typeof item['level'] === 'number') {\n          listOption.level = item['level'];\n        } else if (params.level) {\n          listOption.level = params.level;\n        }\n\n        if (typeof item[params.groupKey] === 'string') {\n          listOption.group = item[params.groupKey] ? item[params.groupKey] : params.group ? item[params.groupKey] : '';\n        }\n        if (typeof params.groupFkKey === 'string') {\n          listOption.groupFk = item[params.groupFkKey] ? item[params.groupFkKey] : 0;\n        }\n        if (params.ensure && params.ensure.id && !ensureOptionFound && params.ensure[params.setKey] === item[params.setKey]) {\n          ensureOptionFound = true;\n        }\n        if (params.tags) {\n          params.tags.map((tag) => {\n            if (tag in item) {\n              listOption[tag] = item[tag];\n            }\n          });\n        }\n        if (listOption[params.setKey]) optionList.push(listOption);\n      }\n    });\n    if (params.ensure && !ensureOptionFound) {\n      optionList.push(params.ensure);\n    }\n    if (params.sort && optionList.length > 1) {\n      if (typeof optionList[0].sort_order !== 'undefined') {\n        optionList.sort((a, b) => {\n          if (a.sort_order < b.sort_order) return -1;\n          if (a.sort_order > b.sort_order) return 1;\n          return 0;\n        });\n      } else {\n        optionList.sort((a, b) => {\n          if (a.name < b.name) return -1;\n          if (a.name > b.name) return 1;\n          return 0;\n        });\n      }\n    }\n  }\n  // add empty option only if the optionList is empty !IsArray(optionList,true)\n\n\n  // remove any duplicates\n\n  // return optionList;\n\n  return [...new Map(optionList.map(item => [item['name'], item])).values()];\n}\n\n/**\n * Helper to get an nested value out of an object\n * @param storage - The base object you want to reach into\n * @param steps  - the nested path to the find the value you are looking for\n * @param defaultValue Set a default value to return if value is not found\n */\nexport function StorageGetter(storage, steps: string[], defaultValue: any = null): any {\n  if (IsObject(storage, true)) {\n    let pathLength = steps.length;\n    let path: string;\n    while (pathLength) {\n      path = steps.shift();\n      if (!storage[path]) {\n        return defaultValue;\n      }\n      storage = storage[path];\n      pathLength--;\n    }\n    if (!storage) {\n      return defaultValue;\n    }\n  } else {\n    return defaultValue;\n  }\n\n  return storage;\n}\n\n/**\n * Helper to set a storage container into a nested location in an object\n * @param storage - The base object you want to reach into\n * @param steps  - the nested path to the find the value you are looking for\n * @param defaultValue Set a default value to return if value is not found\n */\nexport function StorageSetter(storage, steps: string[]): object | null {\n  let pathLength = steps.length;\n  let path: string;\n  while (pathLength) {\n    path = steps.shift();\n    if (!storage[path]) {\n      storage[path] = {};\n    }\n    storage = storage[path];\n    pathLength--;\n  }\n  return storage;\n}\n\nexport function Sleep(milliseconds) {\n  return new Promise(resolve => setTimeout(resolve, milliseconds));\n}\n\n\n/**\n * Sort helper for a list of objects where the sort needs to be done on a specific property\n * @param key\n * @param order\n */\nexport function DynamicSort(key, order = 'asc') {\n  return function (a, b) {\n    if (!a.hasOwnProperty(key) || !b.hasOwnProperty(key)) {\n      // property doesn't exist on either object\n      return 0;\n    }\n    const varA = (typeof a[key] === 'string') ?\n      a[key].toUpperCase() : a[key];\n    const varB = (typeof b[key] === 'string') ?\n      b[key].toUpperCase() : b[key];\n\n    let comparison = 0;\n    if (varA > varB) {\n      comparison = 1;\n    } else if (varA < varB) {\n      comparison = -1;\n    }\n    return (\n      (order == 'desc') ? (comparison * -1) : comparison\n    );\n  };\n}\n\n/**\n * Check if the values of two arrays contain the same items\n * This is way to get around the order not being the same, but the items are the same\n * @param arr1\n * @param arr2\n * @param field\n */\nexport function ArraysMatch(arr1: any[], arr2: any[], field: string) {\n  if (arr1.length !== arr2.length)\n    return false;\n  if (field) {\n    for (let i = arr1.length; i--;) {\n      if (arr1[i][field] !== arr2[i][field])\n        return false;\n    }\n  } else {\n    for (let i = arr1.length; i--;) {\n      if (arr1[i] !== arr2[i])\n        return false;\n    }\n  }\n\n\n  return true;\n}\n\n/**\n * Check if an array contains a list of key:value pairs\n * @param needles\n * @param haystack\n * @param strict\n */\nexport function ArrayContainsAll(needles: Array<string>, haystack: Array<string>, strict: boolean = false) {\n  haystack = haystack.map(function (hay) {\n    return String(hay).toLowerCase().trim();\n  });\n  if (strict) {\n    for (let i = 0, len = needles.length; i < len; i++) {\n      needles[i] = String(needles[i]).toLowerCase().trim();\n      if (haystack.indexOf(needles[i]) === -1) return false;\n    }\n  } else {\n    const need = needles.length;\n    let match: boolean;\n    let met = 0;\n    needles.forEach(function (needle) {\n      // loop over the blacklisted terms\n      match = null;\n      haystack.some(function (str) {\n        if (String(str).toLowerCase().trim().indexOf(needle) > -1) {\n          match = true;\n          return true;\n        }\n      });\n      if (match) {\n        met++;\n      }\n    });\n    return met >= need;\n  }\n  return true;\n}\n\n/**\n * Create a map of an array of objects using a specific property\n * @param arr\n * @param array_key_field\n */\nexport function ArrayMapSetter(arr: any[], array_key_field) {\n  const map = {};\n  if (Array.isArray(arr)) {\n    arr.forEach((value, index) => {\n      if (value[array_key_field]) map[value[array_key_field]] = index;\n    });\n  }\n\n  return map;\n}\n\n/**\n * Sort an array by a parent_id\n * @param arr\n * @param parentId\n * @param result\n * @param itemKey\n * @param parentKey\n * @constructor\n */\nexport function ArrayParentSort(arr: any[], parentId = 0, result = [], itemKey = 'id', parentKey = 'parent_id') {\n  if (IsArray(arr, true)) {\n    arr.map(item => {\n      if (+item[parentKey] === +parentId) {\n        result.push(item);\n        ArrayParentSort(arr, item[itemKey], result, itemKey, parentKey);\n      }\n    });\n  }\n  return result;\n}\n\n/**\n * Convert an array to a nested array\n * @param data\n * @param itemKey\n * @param parentKey\n * @constructor\n */\nexport function ArrayTreeList(data: any[], itemKey = 'id', parentKey = 'parent_id') {\n  const map = {};\n  const roots = [];\n  let node;\n  let i;\n\n  for (i = 0; i < data.length; i += 1) {\n    map[data[i][itemKey]] = i; // initialize the map\n    data[i].children = []; // initialize the children\n  }\n\n  for (i = 0; i < data.length; i += 1) {\n    node = data[i];\n    if (node[parentKey] !== 0) {\n      // if you have dangling branches check that map[node.parentId] exists\n      data[map[node[parentKey]]].children.push(node);\n    } else {\n      roots.push(node);\n    }\n  }\n  return roots;\n}\n\n/**\n * Flatten an array that has parent/child relationship\n * @param list\n * @param result\n * @param level\n * @param itemKey\n * @param parentKey\n * @constructor\n */\nexport function ArrayParentTreeFlatten(list: any[], result = [], level = 0, itemKey = 'id', parentKey = 'parent_id') {\n  let children;\n  if (IsArray(list, true)) {\n    list.map((item) => {\n      children = item.children;\n      delete item.children;\n      item.level = level;\n      result.push(item);\n      if (IsArray(children, true)) {\n        ArrayParentTreeFlatten(children, result, level + 1);\n      }\n    });\n  }\n  return result;\n}\n\n/**\n * Create an array with parent child relations\n * @param data\n * @param parentId\n * @param result\n * @param tree\n * @param itemKey\n * @param parentKey\n * @param flatten\n * @constructor\n */\nexport function ArrayParentTree(data: any[], parentId = 0, result = [], tree?: any[], itemKey = 'id', parentKey = 'parent_id', flatten = false) {\n  data = ArrayParentSort(data, parentId, result, itemKey, parentKey);\n  data = ArrayTreeList(data, itemKey, parentKey);\n  return data;\n}\n\n/**\n * Create a map of list of object keyed by an object property\n * @param arr\n * @param array_key_field\n */\nexport function ArrayKeyBy(arr: any[], key: string) {\n  const keyBy = {};\n  if (IsArray(arr, true) && IsString(key, true)) {\n    arr.map(x => {\n      if (IsDefined(x[key])) keyBy[x[key]] = x;\n    });\n  }\n  return keyBy;\n}\n\n\n/**\n * Determine if an object is an array\n * @param arr\n * @param requireLength - Requires that it is an array but also has values\n */\nexport function IsArray(arr: any, requireLength = false): boolean {\n  if (Array.isArray(arr)) {\n    if (requireLength) {\n      if (arr.length) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n    return true;\n  }\n  return false;\n}\n\nexport function IsArrayThrowError(arr: any, requireLength = false, throwError: string): boolean {\n  const isArray = IsArray(arr, requireLength);\n  if (!isArray) {\n    if (IsObject(PopLog)) {\n      if (PopLog.enabled('error')) {\n        console.log(PopLog.message(`IsArrayError: Fail`), PopLog.color('error'), {\n          data: arr,\n          requireLength: requireLength,\n          name: throwError\n        });\n      }\n    }\n\n    throw new Error(throwError);\n  }\n  return isArray;\n}\n\n\n/**\n * Convert an Object to an Array\n * @param obj\n */\nexport function ToArray(obj: object): any[] {\n  if (typeof obj === 'object' && Object.keys(obj).length) {\n    return Object.keys(obj).map(function (key) {\n      return obj[key];\n    });\n  }\n  return [];\n}\n\n/**\n * Check if a var is undefined\n * @param x\n */\nexport function IsUndefined(x: any): boolean {\n  if (typeof x === 'undefined') return true;\n  return false;\n}\n\n/**\n * Check if a var is defined\n * @param x\n */\nexport function IsDefined(x: any, allowNull = true): boolean {\n  if (x === null && !allowNull) return false;\n  if (typeof x === 'undefined') return false;\n  return true;\n}\n\n/**\n * Convert an Array to an object\n * @param obj\n */\nexport function ToObject(arr: any[]) {\n  if (arr && Array.isArray(arr) && arr.length) {\n    const rv = {};\n    for (let i = 0; i < arr.length; ++i)\n      rv[i] = arr[i];\n    return rv;\n  }\n  return arr;\n}\n\nexport function ObjectsMatch(x, y) {\n  if (x === null || x === undefined || y === null || y === undefined) {\n    return x === y;\n  }\n  // after this just checking type of one would be enough\n  if (x.constructor !== y.constructor) {\n    return false;\n  }\n  // if they are functions, they should exactly refer to same one (because of closures)\n  if (x instanceof Function) {\n    return x === y;\n  }\n  // if they are regexps, they should exactly refer to same one (it is hard to better equality check on current ES)\n  if (x instanceof RegExp) {\n    return x === y;\n  }\n  if (x === y || x.valueOf() === y.valueOf()) {\n    return true;\n  }\n  if (Array.isArray(x) && x.length !== y.length) {\n    return false;\n  }\n\n  // if they are dates, they must had equal valueOf\n  if (x instanceof Date) {\n    return false;\n  }\n\n  // if they are strictly equal, they both need to be object at least\n  if (!(x instanceof Object)) {\n    return false;\n  }\n  if (!(y instanceof Object)) {\n    return false;\n  }\n\n  // recursive object equality check\n  const p = Object.keys(x);\n  return Object.keys(y).every(function (i) {\n      return p.indexOf(i) !== -1;\n    }) &&\n    p.every(function (i) {\n      return ObjectsMatch(x[i], y[i]);\n    });\n}\n\n/**\n * Check for a qualified object\n * @param value\n * @param requireKeys\n * @constructor\n */\nexport function IsObject(value: any, requireKeys: boolean | string[] = false): boolean {\n  if (!Array.isArray(value) && value !== null && typeof value === 'object') {\n    if (requireKeys) {\n      if (typeof requireKeys === 'boolean' && Object.keys(value).length) {\n        return true;\n      } else if (IsArray(requireKeys, true)) {\n        let pass = true;\n        const keys = <string[]>requireKeys;\n        keys.some((key) => {\n          if (!(key in value)) pass = false;\n          return true;\n        });\n        if (!pass) return false;\n      } else {\n        return false;\n      }\n    }\n    return true;\n  }\n  return false;\n}\n\n\n/**\n * Check for a qualified function\n * @param value\n * @param requireKeys\n * @constructor\n */\nexport function IsCallableFunction(fn: any): boolean {\n  return typeof fn === 'function';\n}\n\n/**\n * Remove empty values from an object\n * @param obj\n * @constructor\n */\nexport function CleanObject(obj: Object, options: { whitelist?: string[], blacklist?: string[], alias?: Dictionary<string> } = {}) {\n  if (!(IsArray(options.whitelist))) options.whitelist = [];\n  if (!(IsArray(options.blacklist))) options.blacklist = [];\n  if (!(IsObject(options.alias))) options.alias = {};\n  for (const propName in obj) {\n    if (!(options.whitelist.includes(propName)) && (obj[propName] === null || obj[propName] === undefined || options.blacklist.includes(propName))) {\n      delete obj[propName];\n    }\n    if (propName in options.alias && IsString(options.alias[propName], true)) {\n      obj[options.alias[propName]] = obj[propName];\n      delete obj[propName];\n    }\n  }\n  return obj;\n}\n\n/**\n * A helper function to determine if a variable is a qualified object\n *\n * @param value\n * @param requireKeys\n * @param throwError\n */\nexport function IsObjectThrowError(value: any, requireKeys: boolean | string[] = false, throwError: string): boolean {\n  const isObject = IsObject(value, requireKeys);\n  if (!isObject && throwError) {\n    if (IsObject(PopLog)) {\n      if (PopLog.enabled('error')) {\n        if (PopTemplate) {\n          if (isDevMode() && !(IsObject(PopAuth, ['token']))) {\n            PopTemplate.error({message: `${throwError}, this may be due to not being authenticated.`, code: 500});\n          }\n        }\n        console.log(PopLog.message(`IsObjectError: Fail`), PopLog.color('error'), {\n          data: value,\n          requireKeys: requireKeys,\n          name: throwError\n        });\n      }\n    }\n\n    throw new Error(throwError);\n  }\n\n  return isObject;\n}\n\n/**\n * Check for a qualified number\n * @param value\n * @param requireTruthy\n * @constructor\n */\n\nexport function IsNumber(value: any, requireTruthy?: boolean): boolean {\n  if ((typeof value === 'number' || typeof value === 'string') && String(value).length && !isNaN(Number(value.toString()))) {\n    if (requireTruthy) {\n      if (+value) {\n        return true;\n      } else {\n        return false;\n      }\n    } else {\n      return true;\n    }\n  }\n  return false;\n}\n\n\n/**\n * Check for a qualified string\n * @param value\n * @param requireLength\n * @constructor\n */\nexport function IsString(value: any, requireLength = false): boolean {\n  if (value && typeof value === 'string' && !(IsNumber(value))) {\n    if (requireLength) {\n      if (String(value).length) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n    return true;\n  }\n  return false;\n}\n\n/**\n *\n * A helper function to determine if a variable is a qualified string\n * @param value\n * @param requireLength\n * @param throwError\n */\nexport function IsStringError(value: any, requireLength = false, throwError: string): boolean {\n  const isString = IsString(value, requireLength);\n  if (!isString && throwError) {\n    if (IsObject(PopLog)) {\n      if (PopLog.enabled('error')) {\n        console.log(PopLog.message(`IsStringError: Fail`), PopLog.color('error'), {\n          data: value,\n          requireLength: requireLength,\n          name: throwError\n        });\n      }\n    }\n    throw new Error(throwError);\n  }\n  return isString;\n}\n\n/**\n * Capitalize the first Letter of every word in a string\n * @param str\n * @returns str\n */\nexport function TitleCase(str: string) {\n  if (IsString(str, true)) {\n    str = StringReplaceAll(str, '_', ' ');  // convert underscores to spaces\n    str = String(str).replace(/\\w\\S*/g, (txt) => {\n      return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase(); // capitalize first letter of words\n    });\n    str = str.replace(/(^|[\\s-])\\S/g, function (match) { // capitalize letters after hyphens\n      return match.toUpperCase();\n    });\n  }\n  return str;\n}\n\n/**\n * Capitalize the first Letter of every word in a string\n * @param str\n * @returns str\n */\nexport function Capitalize(str: string) {\n  if (IsString(str, true)) {\n    str = str.trim();\n    str = StringReplaceAll(str, '_', ' ');  // convert underscores to spaces\n    str = StringReplaceAll(str, '\\'', '');  // convert ' to spaces\n    str = str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();\n  }\n  return str;\n}\n\n/**\n * Convert a string from snake case to Pascal Case\n * @param field\n * @returns string\n */\nexport function SnakeToPascal(field: string): string {\n  if (IsString(field, true)) {\n    const words = field.split('_');\n    let validField = '';\n    for (const word of words) {\n      validField += word.charAt(0).toUpperCase() + word.slice(1) + ' ';\n    }\n    return String(validField).trim();\n  }\n  return field;\n\n}\n\n/**\n * Convert a string with spaces to snake case .. 'this is snake case' to 'this_is_snake_case'\n * @param field\n * @returns string\n */\nexport function SpaceToSnake(pascal: string): string {\n  const words = pascal.split(' ');\n  for (let word of words) {\n    word = String(word).toLowerCase();\n  }\n  return words.join('_');\n}\n\n\n/**\n * Convert a string with hyphens to Pascal Case\n * @param field\n * @returns string\n */\nexport function HyphenToPascal(field: string): string {\n  const words = field.split('-');\n  let validField = '';\n  for (const word of words) {\n    validField += word.charAt(0).toUpperCase() + word.slice(1) + ' ';\n  }\n  return validField;\n}\n\n/**\n * Convert a string with spaces to Pascal Case\n * @param field\n * @returns string\n */\nexport function SpaceToHyphenLower(str: string): string {\n  const tmp = str.trim();\n  return String(StringReplaceAll(tmp, ' ', '-')).toLowerCase();\n}\n\n\n/**\n * String replace all\n * @param str\n * @param find\n * @param replace\n * @constructor\n */\nexport function StringReplaceAll(str: string, find: string, replace: string): string {\n  return str.replace(new RegExp(find, 'g'), replace);\n}\n\n\n/**\n * Search filter helper to see if an object contains tags\n * @param obj\n * @param tags\n * @param match\n * @param values\n * @param has\n * @param not\n * @constructor\n */\nexport function ObjectContainsTagSearch(obj, tags: string, match = null, values = null, has = null, not = null) {\n  if (String(tags).length) {\n    has = String(tags).toLowerCase().split(',').map(function (str) {\n      return str.trim();\n    }).filter(\n      item => {\n        return String(item).length && String(item).charAt(0) !== '!';\n      }\n    );\n\n    not = String(tags).toLowerCase().split(',').map((str) => {\n      return str.trim();\n    }).filter(\n      item => {\n        return String(item).length >= 2 && String(item).charAt(0) === '!';\n      }\n    );\n    not = not.map((tag) => {\n      return StringReplaceAll(tag, '!', '');\n    }).filter((tag) => {\n      return tag.length >= 1;\n    });\n\n    match = true;\n    values = Object.values(obj).filter(\n      val => {\n        return String(val).length > 0;\n      });\n\n    if (Array.isArray(not) && not.length) {\n      match = true;\n      not.some(tag => {\n        values.some((val) => {\n          if (String(val).toLowerCase().indexOf(tag) > -1) {\n            match = null;\n            return true;\n          }\n        });\n        if (!match) {\n          return true;\n        }\n      });\n    }\n    if (match === true) {\n      match = null;\n      if (Array.isArray(has) && has.length) {\n        has.some((tag) => {\n          if (tag.indexOf('&') > -1) {\n            const has2 = String(tag).toLowerCase().split('&').map((str) => {\n              return str.trim();\n            }).filter(item => {\n              return String(item).length && String(item).charAt(0) !== '!';\n            });\n\n            let not2 = String(tag).toLowerCase().split('&').map((str) => {\n              return str.trim();\n            }).filter(\n              item => {\n                return String(item).length >= 1 && String(item).charAt(0) === '!';\n              });\n\n            not2 = not2.map(firstTag => {\n              return StringReplaceAll(firstTag, '!', '');\n            }).filter(nextTag => {\n              return nextTag.length >= 1;\n            });\n\n            match = true;\n            if (Array.isArray(not2) && not2.length) {\n              match = true;\n              not2.some((firstTag) => {\n                values.some((val) => {\n                  if (String(val).toLowerCase().indexOf(firstTag) > -1) {\n                    match = null;\n                    return true;\n                  }\n                });\n                if (!match) {\n                  return true;\n                }\n              });\n            }\n            if (match === true) {\n              match = null;\n              if (Array.isArray(has2) && has2.length) {\n                if (ArrayContainsAll(has2, values)) {\n                  match = true;\n                }\n                return match;\n              }\n            }\n            return match;\n          } else {\n            values.some((val) => {\n              if (String(val).toLowerCase().indexOf(tag) > -1) {\n                match = true;\n                return true;\n              }\n            });\n          }\n          if (match) {\n            return true;\n          }\n        });\n      }\n    }\n    return match;\n  }\n\n  return true;\n}\n\nexport function ConvertDateToDateTimeFormat(value): string {\n  const dt = new Date(value);\n  dt.setHours(dt.getHours() + Math.round(dt.getMinutes() / 60));\n  dt.setMinutes(0);\n\n  let date: any = dt.getDate();\n  if (String(date).length === 1) {\n    date = '0' + date;\n  }\n\n  let month: any = dt.getMonth() + 1;\n  if (String(month).length === 1) {\n    month = '0' + month;\n  }\n\n  const year = dt.getFullYear();\n  let h: any = dt.getHours();\n  if (String(h).length === 1) {\n    h = '0' + h;\n  }\n\n  return year + '-' + month + '-' + date + ' ' + h + ':' + '00' + ':' + '00';\n}\n\nexport function ConvertDateFormat(value: string, format = 'yyyy-mm-dd'): string {\n  const dt = new Date(value);\n  let dateFormat;\n\n  let date: any = dt.getDate();\n  if (String(date).length === 1) {\n    date = '0' + date;\n  }\n\n  let month: any = dt.getMonth() + 1;\n  if (String(month).length === 1) {\n    month = '0' + month;\n  }\n\n  const year = dt.getFullYear();\n\n  switch (String(format).toLowerCase()) {\n    case 'mm-dd-yyyy':\n      dateFormat = month + '-' + date + '-' + year;\n      break;\n    case 'mm/dd/yyyy':\n      dateFormat = month + '/' + date + '/' + year;\n      break;\n    case 'yyyy-mm-dd':\n      dateFormat = year + '-' + month + '-' + date;\n      break;\n    default:\n      dateFormat = year + '-' + month + '-' + date;\n      break;\n  }\n  return dateFormat;\n}\n\nexport function ConvertDateToTimeFormat(value): string {\n  const dt = new Date(value);\n  const h = dt.getHours().toString(10).padStart(2, '0');\n  const m = dt.getMinutes().toString(10).padStart(2, '0');\n  const s = dt.getSeconds().toString(10).padStart(2, '0');\n  return h + ':' + m + ':' + s;\n}\n\nexport function PopUid() {\n  return Math.random().toString(36).replace(/[^a-z]+/g, '').substr(0, 5);\n}\n\nexport function ConvertObjectToUri(obj: object | any[]) {\n  if (Array.isArray(obj)) {\n    obj = ToObject(obj);\n  }\n  return Object.entries(obj).map(([key, val]) => `${key}=${encodeURIComponent(val)}`).join('&');\n}\n\n\n/**\n * Group a list of objects inside of an array\n * @param arr\n * @param key\n * @constructor\n */\nexport function ArrayGroupBy(arr: Dictionary<any>[], key) {\n  if (IsArray(arr, true)) {\n    return arr.reduce(function (rv, x) {\n      (rv[x[key]] = rv[x[key]] || []).push(x);\n      return rv;\n    }, {});\n  } else {\n    return arr;\n  }\n\n}\n\n\n/**\n * Pick a random element from an array\n * @param arr\n * @constructor\n */\nexport function RandomArrayElement(arr: any[]) {\n  if (IsArrayThrowError(arr, true, `RandomArrayElement: Invalid Array`)) {\n    return arr[Math.floor(Math.random() * arr.length)];\n  }\n}\n\n/**\n * Helper method to remove duplicate items from a  flat array [1,2,3,1,1], [['a','b','c','a']\n * @param arr\n */\nexport function ArrayOnlyUnique(arr: any[]) {\n  if (IsArray(arr, true)) {\n    return arr.filter(function (elem, index, self) {\n      return index === self.indexOf(elem);\n    });\n  }\n  return arr;\n}\n\nexport function ArrayRemoveDupliates(array: object[], prop) {\n  return array.filter((obj, pos, arr) => {\n    return arr.map(mapObj => mapObj[prop]).indexOf(obj[prop]) === pos;\n  });\n}\n\n/**\n * Pass in a state verb to resolve to a color theme ... use case would be color of buttons, icons, and notifications\n * @param state\n */\nexport function GetVerbStateTheme(stateVerb: string | boolean | number): string {\n\n  const successVerbs = ['active', 'success', 'on', '1'];\n  const dangerVerbs = ['err', 'off', 'remove', '0', 'fail', 'archived'];\n  const warningVerbs = ['warn', 'pend', 'remove'];\n  const infoVerbs = ['new', 'info', 'add'];\n  let theme = null;\n  successVerbs.some((verb) => {\n    if (String(stateVerb).toLowerCase().search(verb) > -1) {\n      theme = 'success';\n      return true;\n    }\n  });\n  if (!theme) {\n    dangerVerbs.some(function (verb) {\n      if (String(stateVerb).toLowerCase().search(verb) > -1) {\n        theme = 'danger';\n        return true;\n      }\n    });\n  }\n  if (!theme) {\n    warningVerbs.some(function (verb) {\n      if (String(stateVerb).toLowerCase().search(verb) > -1) {\n        theme = 'warn';\n        return true;\n      }\n    });\n  }\n  if (!theme) {\n    infoVerbs.some(function (verb) {\n      if (String(stateVerb).toLowerCase().search(verb) > -1) {\n        theme = 'info';\n        return true;\n      }\n    });\n  }\n  if (!theme) theme = 'default';\n\n  return theme;\n}\n\n\n/**\n * Helper for getting a message string from an http error\n * @param err\n * @constructor\n */\nexport function GetHttpErrorMsg(err: any) {\n  let errorMessage = '';\n  let location = err;\n  if (IsObject(location, true)) {\n    if (IsObject(err.error, true)) {\n      location = err.error;\n      if (IsObject(location.errors, true)) {\n        Object.keys(location.errors).map((key) => {\n          if (IsArray(location.errors[key], true)) {\n            location.errors[key].map((errorMsg, index) => {\n              if (index) errorMessage += `<br/>`;\n              errorMessage += errorMsg + `<br/>`;\n            });\n          } else if (IsString(location.errors[key])) {\n            errorMessage += err.errors[key] + `<br/>`;\n          }\n          errorMessage += `<br/>`;\n        });\n      } else if (IsString(location.message, true)) {\n        errorMessage = location.message;\n      }\n    } else if (IsString(location.message, true)) {\n      errorMessage = err.message;\n    } else if (StorageGetter(location, ['data', 'message'])) {\n      errorMessage = location.data.message;\n    }\n  } else if (IsObject(location, ['message'])) {\n    errorMessage = location.message;\n  } else if (IsString(location, true)) {\n    errorMessage = String(location);\n  }\n  if (!errorMessage) {\n    if (IsObject(PopLog)) {\n      console.log(PopLog.message(`GetHttpErrorMsg: Fail`), PopLog.color('error'), {\n        data: location,\n      });\n    }\n    errorMessage = `Server Error: Code ${err.status + (err.statusText ? ' - ' + err.statusText : '') + '.'}`;\n  }\n\n  return errorMessage;\n}\n\n\n/**\n * Helper for getting an array from a response\n * @param err\n * @constructor\n */\nexport function GetHttpResult(res: any): any {\n  if (res) {\n    if (res.data) res = res.data;\n  } else {\n    console.log(`Undefined response: ${JSON.stringify(res)}`);\n  }\n  return res;\n}\n\n/**\n * Helper for getting an array from a response\n * @param err\n * @constructor\n */\nexport function GetHttpArrayResult(res: Response, requireLength = false): Entity[] {\n  let result = <any>res;\n  if (result && result.data) {\n    result = result.data;\n  }\n  return IsArrayThrowError(result, requireLength, `Api Result was not an array as expected`) ? result : null;\n}\n\n/**\n * Helper for getting an object from a response\n * @param err\n * @constructor\n */\nexport function GetHttpObjectResult(res: Response, requireKeys: boolean | string[] = false): Entity {\n  let result = <any>res;\n  if (result && result.data) {\n    result = result.data;\n  }\n  return IsObjectThrowError(result, requireKeys, `Api Result was not an object as expected`) ? result : null;\n}\n\n\n/**\n * Replace { var } in a string with the corresponding data value of an object\n * @param str\n * @param obj\n * @constructor\n */\nexport function InterpolateString(str: string, obj: Object) { // recursive\n  if (typeof (str) === 'string' && str.includes('{') && IsObject(obj, true)) {\n    const start = str.indexOf('{');\n    const end = str.indexOf('}', start) !== -1 ? str.indexOf('}', start) : str.length;\n    const fieldName = str.substring(start + 1, end);\n    const varName = fieldName.trim();\n    if (varName in obj) {\n      str = str.replace('{' + fieldName + '}', obj[varName]);\n      if (str && str.includes('{')) {\n        str = InterpolateString(str, obj);\n      }\n    }\n\n  }\n  return str;\n}\n\nexport function GetStringAbbrv(str: string): string {\n  let abbrv = '';\n  if (IsString(str, true)) {\n    const strArray = String(str).trim().split(' ');\n    let word;\n    while (strArray.length) {\n      word = strArray.shift();\n      abbrv += String(word).trim().charAt(0).toLocaleUpperCase();\n    }\n  }\n  return abbrv;\n}\n\n\nexport function PopTransform(value: string | number | boolean, transformation: string | object): any {\n\n  switch (String(transformation).toLowerCase()) {\n    case 'toRelationName':\n      if (IsObject(value)) {\n        const val = <any>value;\n        const location = val.label ? 'label' : 'name';\n        const name = <string>StorageGetter(value, [location]);\n        if (name) value = name;\n      }\n      break;\n    case 'totitlecase':\n    case 'title':\n      value = TitleCase(String(value));\n      break;\n    case 'tolowercase':\n    case 'lower':\n      value = String(value).toLowerCase();\n      break;\n    case 'label':\n      const label = new LabelPipe();\n      value = label.transform(value + '');\n      break;\n    case 'todigits':\n    case 'digits':\n      value = String(value).match(/\\d+/g).map(Number).join('');\n      break;\n    case 'tophonepipe':\n    case 'phone':\n      const phone = new PhonePipe();\n      value = phone.transform(value);\n      break;\n    case 'active':\n    case 'archived':\n    case 'toactiveararchived':\n      const active = new ToActiveOrArchivedPipe();\n      value = active.transform(value);\n      break;\n    case 'touppercase':\n    case 'upper':\n      value = String(value).toUpperCase();\n      break;\n    case 'convertemptytonull':\n      if (!String(value).length) value = null;\n      break;\n    case 'convertemptyzero':\n      if (!String(value).length) value = 0;\n      break;\n    case 'tocurrency':\n    case 'currency':\n    case 'dollar':\n      if (IsNumber(value)) {\n        value = new Intl.NumberFormat('en-US', {\n          style: 'currency',\n          currency: 'USD',\n          minimumFractionDigits: 2\n        }).format(Number(value));\n      }\n      break;\n    case 'amount':\n      value = IsNumber(value) ? parseFloat(String(value)).toFixed(2) : '0.00';\n      break;\n    default:\n      break;\n  }\n\n  return value;\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { IsString } from '../pop-common-utility';\n\n\n@Pipe( {\n  name: 'truncate'\n} )\n\nexport class TruncatePipe implements PipeTransform {\n\n  transform( value: string, args: string | number[] ): string{\n\n    if( IsString( value, true ) ){\n      const limit = args.length > 0 ? parseInt( args[ 0 ] + '', 10 ) : 20;\n      const trail = args.length > 1 ? args[ 1 ] : '...';\n      return String( value ).length > limit ? String(value).substring( 0, limit ) + trail : value;\n    }\n    return value;\n  }\n}\n","import { Dictionary, EntityParamsInterface, KeyMap } from './pop-common.model';\nimport { GetSessionSiteVar, GetSiteVar, IsObject } from './pop-common-utility';\nimport { EntityMenu } from './modules/app/pop-left-menu/entity-menu.model';\n\n\nexport interface AuthDetails {\n  created?: number;\n  max_ttl?: number;\n  id: number;\n  first_name: string;\n  last_name: string;\n  name: string;\n  initials: string;\n  email: string;\n  email_verified_at?: string| boolean | number;\n  avatarLink?: string;\n  business_fk?: number;\n  last_login_at?: string;\n  legacy_user_id?: number;\n  username?: string;\n  token?: string;\n  x_popcx_token?: string;\n  created_at?: number;\n  users?: KeyMap<BusinessUser>;\n  businesses?: KeyMap<Business>;\n}\n\n\nexport interface BusinessUser {\n  id: number;\n  first_name: string;\n  last_name: string;\n  email: string;\n  phone: string;\n  business?: Business;\n  setting?: Dictionary<any>;\n  business_id: number;\n  permissions?: Dictionary<any>;\n}\n\n\nexport interface Business {\n  id: number;\n  name: string;\n  short_name: string;\n  theme: string;\n  date_format: string;\n  hour_format: '12' | '24';\n  homepage?: string;\n  logo_small_url?: string;\n  logo_main_url?: string;\n  timezone_value_id?: number;\n  aliases?: any[];\n  timezone?: string;\n  apps?: App[];\n}\n\n\nexport interface App {\n  id: number;\n  name: string;\n  label?: string;\n  sort?: number;\n  active?: boolean;\n  path?: string;\n  href?: string;\n  menu?: Dictionary<EntityMenu>;\n\n  entities?: EntityParamsInterface[];\n}\n\n\nexport interface AppMenu {\n  id?: number;\n  name: string;\n  path: string;\n  description: string;\n  short_description: string;\n  sort: number;\n  icon: string;\n  entityId?: number;\n  hasAlias?: boolean;\n  originalPath?: string;\n  originalName?: string;\n}\n\n\nexport interface AuthUser {\n  id?: number;\n  name?: string;\n  first_name?: string;\n  last_name?: string;\n  initials?: string;\n  email?: string;\n  email_verified_at?: string | number | boolean;\n  avatarLink?: string;\n  username?: string;\n  business_fk?: number;\n}\n\n\nexport function GetAuthStorage(): { token: string, popcxToken: string, time: number, auth: AuthDetails, businessId: number }{\n  return {\n    token: GetSiteVar('Auth.token', ''),\n    popcxToken: GetSiteVar('Auth.popcx-token', ''),\n    time: parseInt(GetSiteVar('Auth.time', 0), 10),\n    auth: <AuthDetails>GetSiteVar('Auth.details', {}),\n    businessId: parseInt(GetSessionSiteVar('Business.current', 0), 10)\n  };\n}\n","import {\n  CoreConfig,\n  Dictionary,\n  DynamicComponentInterface,\n  EntityAccessInterface,\n  EventCallback,\n  PopBaseEventInterface,\n  ServiceInjector\n} from './pop-common.model';\nimport {Subscription} from 'rxjs';\nimport {PopContextMenuConfig} from './modules/base/pop-context-menu/pop-context-menu.model';\nimport {ComponentRef, ElementRef, EventEmitter, ViewContainerRef} from '@angular/core';\nimport {PopLogService} from './services/pop-log.service';\nimport {HttpErrorResponse} from '@angular/common/http';\n\n\nexport interface ServiceDomInterface {\n  subscriber?: Dictionary<Subscription>;\n  delay?: Dictionary<any>;\n  interval?: Dictionary<any>;\n  handler?: {\n    core?: EventCallback,\n    bubble?: EventCallback,\n    [key: string]: EventCallback\n  };\n  session?: Dictionary<any>;\n  state: DomStateInterface;\n  setSubscriber?: (subscriptionKey: string, subscription: Subscription) => void;\n  setTimeout?: (timeoutKey: string, callback, delay?: number) => void;\n}\n\n\nexport function GetServiceDom(): ServiceDomInterface {\n  return <ServiceDomInterface>{\n    subscriber: {},\n    delay: {},\n    interval: {},\n    handler: {},\n    session: {},\n    state: {},\n  };\n}\n\nexport function DestroyServiceDom(dom: ServiceDomInterface): void {\n  if (typeof (dom.interval) === 'object') {\n    Object.keys(dom.interval).map((name) => {\n      if (dom.interval[name]) {\n        clearInterval(dom.interval[name]);\n      }\n      if (dom.interval[name]) {\n        clearInterval(dom.interval[name]);\n      }\n    });\n  }\n\n  if (typeof (dom.delay) === 'object') {\n    Object.keys(dom.delay).map((name) => {\n      if (dom.delay[name]) {\n        clearTimeout(dom.delay[name]);\n      }\n      if (dom.delay[name]) {\n        clearTimeout(dom.delay[name]);\n      }\n    });\n  }\n  if (typeof (dom.subscriber) === 'object') {\n    Object.keys(dom.subscriber).map((name) => {\n      if (dom.subscriber[name] && typeof dom.subscriber[name].unsubscribe === 'function') {\n        dom.subscriber[name].unsubscribe();\n      }\n    });\n  }\n}\n\n\nexport interface DomStateInterface {\n  authenticated?: boolean;\n  archived?: boolean;\n  closed?: boolean;\n  loaded?: boolean;\n  loader?: boolean;\n  loading?: boolean;\n  isDevMode?: boolean;\n  open?: boolean;\n  refreshing?: boolean;\n  pending?: boolean;\n  success?: boolean;\n  validated?: boolean;\n  showArchived?: boolean;\n  hidden?: boolean;\n  template?: number | boolean | string;\n  visibility?: boolean;\n\n  [key: string]: any;\n}\n\n\nexport type Constructor<T> = new(...args: any[]) => T;\n\n\nexport interface ServiceContainerInterface {\n  [key: string]: Dictionary<any>;\n}\n\n\nexport function GetServiceAssetContainer(): ServiceAssetContainerInterface {\n  return {\n    map: {}\n  };\n}\n\n\nexport interface ServiceUiContainerInterface {\n  state: DomStateInterface;\n  active: Dictionary<any>;\n  session: Dictionary<any>;\n  asset: {\n    map: Dictionary<any>\n    [key: string]: any;\n  };\n}\n\n\nexport function GetServiceUiContainer(): ServiceUiContainerInterface {\n  return {\n    state: {loaded: false, loading: true, refreshing: false},\n    active: {},\n    session: {},\n    asset: {\n      map: <Dictionary<any>>{},\n    }\n  };\n}\n\n\n/************************************************************************************************\n *                                                                                              *\n *                                          Service                                             *\n *                                      ( Handles Services )                                    *\n *                                                                                              *\n ************************************************************************************************/\n\n\nexport function GetServiceContainer(): ServiceContainerInterface {\n  return <ServiceContainerInterface>{};\n}\n\n\nexport interface ServiceAssetContainerInterface {\n  map?: Dictionary<any>;\n\n  [key: string]: any;\n}\n\n\n/************************************************************************************************\n *                                                                                              *\n *                                          Base                                                *\n *                                          (  )                                                *\n *                                                                                              *\n ************************************************************************************************/\n\nexport interface HasName {\n  name: string;\n}\n\n\nexport interface HasDom {\n  dom: ComponentDomInterface;\n}\n\n\nexport interface HasPosition {\n  position: number;\n}\n\n\nexport interface HasCore {\n  core: CoreConfig;\n}\n\n\nexport interface HasTemplate {\n  template: ComponentTemplateInterface;\n}\n\n\nexport interface HasEvents {\n  events: EventEmitter<PopBaseEventInterface>;\n}\n\n\nexport interface HasTrait {\n  trait: ComponentTraitContainerInterface;\n}\n\n\nexport interface SetControl {\n  setControl: () => void;\n}\n\n\n/************************************************************************************************\n *                                                                                              *\n *                                          UI                                                  *\n *                                         (  )                                                 *\n *                                                                                              *\n ************************************************************************************************/\n\n\nexport interface ComponentUiContainerInterface {\n  error?: { code?: number, message: string };\n  overhead: number;\n  height: {\n    content?: number\n    default: number\n    inner: number,\n    min?: number,\n    max?: number,\n    outer: number,\n    parent?: number\n    split?: number\n  };\n\n  width: {\n    outer?: number,\n    inner?: number,\n    min?: number,\n    max?: number,\n    parent?: number\n  };\n  state: DomStateInterface;\n  active: Dictionary<any>;\n  session: Dictionary<any>;\n  resource: {\n    map: Dictionary<any>\n    [key: string]: any;\n  };\n  asset: {\n    map?: Dictionary<any>\n    [key: string]: any;\n  };\n\n  contextMenu: {\n    config: PopContextMenuConfig;\n    configure: CallableFunction;\n  };\n\n}\n\n\nexport function GetComponentUiContainer(): ComponentUiContainerInterface {\n  return {\n    error: {\n      code: 0,\n      message: ''\n    },\n    overhead: 0,\n    height: {\n      outer: null,\n      inner: null,\n      default: 0\n    },\n    width: {},\n    state: <DomStateInterface>{},\n    resource: {\n      map: <Dictionary<any>>{},\n    },\n    active: {\n      map: <Dictionary<any>>{},\n    },\n    session: <Dictionary<any>>{},\n    asset: {\n      map: <Dictionary<any>>{},\n    },\n    contextMenu: {\n      config: <PopContextMenuConfig>undefined,\n      configure: undefined,\n    }\n  };\n}\n\nexport function AbstractUiMixin<T extends Constructor<{}>>(Base: T = (class {\n} as any)): any {\n  return class extends Base {\n    ui: ComponentUiContainerInterface = GetComponentUiContainer();\n  };\n}\n\n\n/************************************************************************************************\n *                                                                                              *\n *                                          Trait                                               *\n *                                           (  )                                               *\n *                                                                                              *\n ************************************************************************************************/\n\nexport interface ComponentTraitContainerInterface {\n  bubble: boolean;\n\n  [key: string]: boolean;\n}\n\n\nexport function GetComponentTraitContainer(): ComponentTraitContainerInterface {\n  return {\n    bubble: false\n  };\n}\n\n\n/************************************************************************************************\n *                                                                                              *\n *                                           Asset                                              *\n *                                           (  )                                               *\n *                                                                                              *\n ************************************************************************************************/\n\nexport interface ComponentAssetContainerInterface {\n  map?: Dictionary<any>;\n\n  [key: string]: any;\n}\n\n\nexport function GetComponentAssetContainer(): ComponentAssetContainerInterface {\n  return {\n    map: {}\n  };\n}\n\n\n/************************************************************************************************\n *                                                                                              *\n *                                          Dom                                                 *\n *                    ( Handles Subscriptions, Timeouts, Intervals, etc )                       *\n *                                                                                              *\n ************************************************************************************************/\n\n\nexport interface ComponentDomInterface {\n  active: Dictionary<any>;\n  access: EntityAccessInterface;\n\n  contextMenu: {\n    config: PopContextMenuConfig;\n    configure: CallableFunction;\n  };\n\n\n  delay: Dictionary<any>;\n\n  error?: { code?: number, message: string };\n\n  interval: Dictionary<any>;\n\n  handler: {\n    core?: EventCallback,\n    bubble?: EventCallback,\n    [key: string]: EventCallback\n  };\n\n  height: {\n    content?: number\n    default: number\n    inner: number,\n    min?: number,\n    max?: number,\n    outer: number,\n    parent?: number\n    split?: number\n  };\n\n  overhead: number;\n\n  width: {\n    outer?: number,\n    inner?: number,\n    min?: number,\n    max?: number,\n    parent?: number\n  };\n  state: DomStateInterface;\n\n  session: Dictionary<any>;\n\n  subscriber: Dictionary<Subscription>;\n\n\n  repo: any;\n  injectRepo: () => void;\n  loading: () => void;\n  refreshing: () => void;\n  _extend: () => Promise<boolean>;\n  configure: () => Promise<boolean>;\n  register: () => Promise<boolean>;\n  proceed: () => Promise<boolean>;\n  ready: () => void;\n  find: (assetType: 'component' | 'field' | 'el', id: number | string) => any;\n  focus: (querySelector: string, delay: number) => void;\n  focusNextInput: (el: ElementRef) => void;\n  setError: (err: HttpErrorResponse, modal: boolean) => void;\n  setHeight: (parentHeight: number, overhead: number) => void;\n  setHeightWithParent: (parentClassName: string, overhead?: number, defaultHeight?: number) => Promise<boolean>;\n  setWithComponentInnerHeight: (component: string, componentId, overhead: number, defaultHeight: number) => Promise<number>;\n  unload: () => Promise<boolean>;\n  waitForParent: (el, className?: string, time?: number, counter?: number) => Promise<Element>;\n  waitForParentHeight: (el: Element, time?: number, counter?: number) => Promise<number>;\n  findParentElement: (el, className) => ElementRef;\n  store: (key?: string) => void;\n  setSubscriber: (subscriptionKey: string, subscription: Subscription) => void;\n  setTimeout: (timeoutKey: string, callback, delay?: number) => void;\n  destroy: () => void;\n\n}\n\n\nexport function GetComponentDomContainer(): ComponentDomInterface {\n  const dom = <ComponentDomInterface>{\n    /**\n     * Service will preserve session, state, etc and allow all components on the core to communicate and share assets`\n     */\n\n    active: <Dictionary<any>>{},\n\n    error: {\n      code: 0,\n      message: ''\n    },\n\n\n    overhead: 0,\n    height: {\n      outer: null,\n      inner: null,\n      default: 0\n    },\n    width: {},\n    state: <DomStateInterface>{},\n\n\n    session: <Dictionary<any>>{},\n\n    contextMenu: {\n      config: <PopContextMenuConfig>undefined,\n      configure: undefined,\n    },\n\n    repo: undefined,\n\n    /**\n     * Store all subscribers here\n     */\n    subscriber: {},\n\n    /**\n     * Store all time intervals here\n     */\n    interval: {},\n\n    /**\n     * Store all timeouts here\n     */\n    delay: {},\n\n    handler: {},\n\n  };\n  return dom;\n}\n\n\nexport function AbstractDomMixin<T extends Constructor<{}>>(Base: T = (class {\n} as any)) {\n  return class extends Base {\n    dom: ComponentDomInterface = GetComponentDomContainer();\n  };\n}\n\n\nexport function DestroyComponentDom(dom: ComponentDomInterface): void {\n\n  if (typeof (dom.interval) === 'object') {\n    Object.keys(dom.interval).map((name) => {\n      if (dom.interval[name]) {\n        clearInterval(dom.interval[name]);\n      }\n      if (dom.interval[name]) {\n        clearInterval(dom.interval[name]);\n      }\n    });\n  }\n\n  if (typeof (dom.delay) === 'object') {\n    Object.keys(dom.delay).map((name) => {\n      if (dom.delay[name]) {\n        clearTimeout(dom.delay[name]);\n      }\n      if (dom.delay[name]) {\n        clearTimeout(dom.delay[name]);\n      }\n    });\n  }\n  if (typeof (dom.subscriber) === 'object') {\n    Object.keys(dom.subscriber).map((name) => {\n      if (dom.subscriber[name] && typeof dom.subscriber[name].unsubscribe === 'function') {\n        dom.subscriber[name].unsubscribe();\n      }\n    });\n  }\n}\n\n\n/************************************************************************************************\n *                                                                                              *\n *                                          Log                                                 *\n *                                  ( Handles Logging )                                         *\n *                                                                                              *\n ************************************************************************************************/\n\nexport interface ComponentLogInterface {\n  repo: {\n    message: (message?: string) => string;\n    color: (type?: string) => string;\n    enabled: (type?: string, component?: string) => boolean;\n    init: (componentName: string, message: string, data?: any, force?: boolean) => void;\n    debug: (componentName: string, message: string, data?: any, force?: boolean) => void;\n    cache: (componentName: string, message: string, set?: boolean, force?: boolean) => void;\n    warn: (componentName: string, message: string, data?: any, force?: boolean) => void;\n    info: (componentName: string, message: string, data?: any, force?: boolean) => void;\n    theme: (componentName: string, message: string, data?: any, force?: boolean) => void;\n    event: (componentName: string, message: string, event?: PopBaseEventInterface, force?: boolean) => void;\n    error: (componentName: string, message: string, data?: any, force?: boolean) => void;\n  };\n  init: () => void;\n  debug: (msg: string, data?: any) => void;\n  error: (msg: string, error?: any) => void;\n  warn: (msg: string, data?: any) => void;\n  info: (msg: string, data?: any) => void;\n  event: (msg: string, event: PopBaseEventInterface) => void;\n  config: (msg: string, config?: any) => void;\n  destroy: () => void;\n}\n\n\n/************************************************************************************************\n *                                                                                              *\n *                                          Template                                            *\n *                            ( Handles rendering Dynamic content )                             *\n *                                                                                              *\n ************************************************************************************************/\n\n\nexport interface ComponentTemplateInterface {\n  container: ViewContainerRef;\n  refs: ComponentRef<any>[];\n  ref_events: Subscription[];\n  attach: (container: string | ViewContainerRef) => void;\n  render: (list: DynamicComponentInterface[], transfer?: string[], bypassTransfer?: boolean) => void;\n  transfer: Dictionary<any>;\n  clear: () => void;\n  destroy: () => void;\n}\n\n\nexport function GetComponentTemplateContainer(): ComponentTemplateInterface {\n  const template = <ComponentTemplateInterface>{\n    container: undefined,\n    refs: [],\n    ref_events: []\n  };\n\n  return template;\n}\n\nexport function AbstractTemplateMixin<T extends Constructor<{}>>(Base: T = (class {\n} as any)): any {\n  return class extends Base implements HasTemplate {\n    template: ComponentTemplateInterface = GetComponentTemplateContainer();\n  };\n}\n\n\nexport function DestroyComponentTemplate(template: ComponentTemplateInterface) {\n  if (typeof template === 'object') {\n    template.ref_events.map((subscription: Subscription) => {\n      if (subscription && typeof subscription.unsubscribe === 'function') {\n        subscription.unsubscribe();\n      }\n    });\n\n    template.refs = template.refs.map(function (componentRef: ComponentRef<any>) {\n      if (componentRef && typeof componentRef.destroy === 'function') {\n        componentRef.destroy();\n      }\n      componentRef = null;\n      return null;\n    });\n\n    if (template.container) template.container.clear();\n\n    template = null;\n  }\n}\n\n\n\n\n","import { Injectable, OnDestroy } from '@angular/core';\n\nimport {\n  DestroyServiceDom,\n  GetServiceUiContainer,\n  GetServiceDom,\n  GetServiceAssetContainer,\n  ServiceUiContainerInterface,\n  ServiceAssetContainerInterface,\n} from '../pop-common-dom.models';\nimport { Subscription } from 'rxjs';\nimport { PopUid } from '../pop-common-utility';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PopExtendService implements OnDestroy {\n  protected dom = GetServiceDom();\n  protected id: number | string = PopUid();\n  protected name;\n  protected asset;\n\n\n  // public ui = <ServiceUiContainerInterface>GetServiceUiContainer();\n\n\n  constructor(){\n    if( !this.asset ) this.asset = <ServiceAssetContainerInterface>GetServiceAssetContainer();\n    this.dom = {\n      ...this.dom, ...{\n        setSubscriber: (subscriptionKey: string, subscription: Subscription = null) => {\n          if( subscriptionKey && this.dom.subscriber && subscriptionKey in this.dom.subscriber && this.dom.subscriber[ subscriptionKey ] && typeof this.dom.subscriber[ subscriptionKey ].unsubscribe === 'function' ){\n            this.dom.subscriber[ subscriptionKey ].unsubscribe();\n          }\n          if( subscription ){\n            this.dom.subscriber[ subscriptionKey ] = subscription;\n          }\n        },\n\n        setTimeout: (timeoutKey: string, callback = null, delay = 250) => {\n          if( timeoutKey && this.dom.delay && timeoutKey in this.dom.delay && this.dom.delay[ timeoutKey ] ){\n            clearTimeout(this.dom.delay[ timeoutKey ]);\n          }\n          if( typeof callback === 'function' ){\n            this.dom.delay[ timeoutKey ] = setTimeout(callback, delay);\n          }\n        },\n      }\n    };\n  }\n\n\n  ngOnDestroy(){\n    DestroyServiceDom(this.dom);\n  }\n}\n","import {Injectable, isDevMode, OnDestroy} from '@angular/core';\nimport {KeyMap, PopBusiness, PopHref, SetPopAuth} from '../pop-common.model';\nimport {GetSiteVar, IsObject, IsString, SetSessionSiteVar, SetSiteVar, StorageGetter} from '../pop-common-utility';\nimport {AuthUser, Business, BusinessUser, GetAuthStorage, AuthDetails, App} from '../pop-common-token.model';\nimport {PopExtendService} from './pop-extend.service';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PopBaseService extends PopExtendService implements OnDestroy {\n  public name = 'PopBaseService';\n\n  protected asset = {\n    sessionRoot: 'SiteVars',\n    businessId: 0,\n    authTime: <number>undefined,\n  };\n\n  private auth: AuthDetails;\n\n\n  constructor() {\n    super();\n    const authStorage = GetAuthStorage();\n    this.auth = authStorage.auth;\n    this.asset.businessId = authStorage.businessId;\n    this.asset.authTime = authStorage.time;\n\n\n    if (!this.asset.businessId) {\n      const lastBusinessId = parseInt(GetSiteVar('Business.last') || '0', 10);\n      if (lastBusinessId) {\n        this.setCurrentBusinessId(lastBusinessId);\n      }\n    }\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Local Storage                                           *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  /**\n   * Clear localStorage data\n   */\n  public clearLocalStorage(): void {\n    localStorage.clear();\n    this.auth = null;\n    this.asset.authTime = 0;\n    this.asset.businessId = 0;\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Auth Details                                            *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  /**\n   * Remove any user auth relics\n   */\n  public clearAuthDetails(caller: string): void {\n    SetSessionSiteVar('Login.time', 0);\n    this.clearLocalStorage();\n    sessionStorage.clear();\n  }\n\n\n  /**\n   * Clear the time when an auth was last completed\n   */\n  public clearAuthTime(): void {\n    this.asset.authTime = 0;\n    SetSiteVar('Auth.time', 0);\n    // localStorage.setItem('Auth-Time', '0');\n  }\n\n\n  /**\n   * Return the entire Auth Object\n   */\n  public getAuthDetails(): AuthDetails {\n    if (!IsObject(this.auth, true)) {\n      const authStorage = GetAuthStorage();\n      this.auth = authStorage.auth;\n    }\n    return this.auth;\n  }\n\n\n  /**\n   * Extract the prime user/ root out of the auth details\n   */\n  public getAuthPrimeUser(): AuthUser {\n    if (IsObject(this.auth, ['id', 'email'])) {\n      return {\n        id: this.auth.id,\n        name: this.auth.name,\n        first_name: this.auth.first_name,\n        last_name: this.auth.last_name,\n        initials: this.auth.initials,\n        avatarLink: StorageGetter(this.auth, ['profile', 'avatar_link'], null),\n        email: this.auth.email,\n        business_fk: this.auth.business_fk,\n      };\n    }\n    return null;\n  }\n\n\n  /**\n   * Return the time when the last authentication took place\n   */\n  public getAuthTime(): number {\n    return this.asset.authTime;\n  }\n\n\n  /**\n   * Bearer token helper\n   * The api will expect an auth token for any authenticated routes\n   */\n  public getBearerToken(): string {\n    if (IsObject(this.auth, ['token'])) {\n      return 'Bearer ' + (this.auth.token ? this.auth.token : '123');\n    } else {\n      return '';\n    }\n  }\n\n\n  /**\n   * Get all the Business Users that belong to the auth user\n   */\n  public getAuthUsers(): KeyMap<BusinessUser> {\n    return JSON.parse(JSON.stringify(this.auth.users));\n  }\n\n\n  /**\n   * Get the current business id that is in user\n   */\n  public getCurrentBusinessId(): number {\n    return this.asset.businessId;\n  }\n\n\n  /**\n   * Return the business details for the current business\n   */\n  public getCurrentBusinessUserId(): number {\n    const businessId = this.getCurrentBusinessId();\n    if (IsObject(this.auth.users, true) && businessId in this.auth.users) {\n      return this.auth.users[businessId].id;\n    }\n    return 0;\n  }\n\n\n  /**\n   * Determine if the last auth has expired\n   */\n  public isAuthExpired(): boolean {\n    let expired = false;\n\n    if (!(IsObject(this.auth, ['token']))) {\n      return true;\n    }\n\n    const currentTime = Math.round(new Date().getTime() / 1000);\n    if (!this.asset.authTime || typeof this.auth.created_at == 'undefined' || !this.getBearerToken()) {\n      expired = true;\n    } else if (currentTime > ((+this.auth.created_at) + (this.auth.max_ttl * 60))) { // Check if token is passed max_ttl\n      expired = true;\n      return true;\n    } else if (currentTime > (this.asset.authTime + (this.auth.max_ttl * 60))) {// Check if token has timed out.\n      expired = true;\n    }\n    return expired;\n  }\n\n\n  /**\n   * Stores a timestamp to track when the last authentication took place\n   */\n  public setAuthTime(): void {\n    // This gets set when there is a new token. It will calculate this and the tokendetails TTL / timeout to decide if the token\n    // is expired without having to make an ajax call to know.\n    this.asset.authTime = Math.round(new Date().getTime() / 1000);\n    // localStorage.setItem('Auth-Time', this.asset.authTime.toString());\n    SetSiteVar('Auth.time', this.asset.authTime.toString());\n  }\n\n\n  /**\n   * Exposes the Auth Token at the root level of localStorage for convenience\n   * @param token\n   */\n  public setAuthToken(authToken: string): void {\n    // localStorage.setItem('Auth-Token', authToken);\n    SetSiteVar('Auth.token', authToken);\n  }\n\n\n  /**\n   * Store the auth object that the auth/user login route return to the app\n   * @param authDetails\n   */\n  public setAuthDetails(auth: AuthDetails): void {\n    if (IsObject(auth, ['id', 'token'])) {\n      const existingAuthDetailsDetails = this.auth;\n      if (existingAuthDetailsDetails && +existingAuthDetailsDetails.id && +existingAuthDetailsDetails.id !== +auth.id) {\n        // this.clearAuthDetails('setAuthDetails');\n      }\n      this.auth = auth;\n      this.setAuthToken(this.auth.token);\n      this.setAuthPopcxToken(this.auth.x_popcx_token);\n      this.setAuthTime();\n      SetPopAuth({\n        id: auth.id,\n        name: auth.name,\n        first_name: auth.first_name,\n        last_name: auth.last_name,\n        initials: auth.initials,\n        email: auth.email,\n        email_verified_at: auth.email_verified_at,\n        avatarLink: StorageGetter(this.auth, ['profile', 'avatar_link'], null),\n        username: auth.username,\n        created_at: auth.created_at\n      });\n      SetSiteVar('Auth.details', auth);\n    }\n  }\n\n\n  /**\n   * Exposes the Auth User at the root level of localStorage for convenience\n   * @param token\n   */\n  public setAuthUser(primeUser): void {\n    if (IsObject(primeUser, true)) {\n      SetSiteVar('Auth.User', primeUser);\n    }\n  }\n\n\n  /**\n   * Exposes the Auth Popcx Token at the root level of localStorage for convenience\n   * @param token\n   */\n  public setAuthPopcxToken(token: string): void {\n    // localStorage.setItem('Auth-Popcx-Token', token);\n    SetSiteVar('Auth.popcx-token', token);\n  }\n\n\n  /**\n   * Track the current business that has been selected\n   * @param id\n   */\n  public setCurrentBusinessId(id: number): void {\n    this.asset.businessId = id;\n    SetSessionSiteVar('Business.current', id);\n    SetSiteVar('Business.last', id);\n  }\n\n\n  /**\n   * Get all the Businesses that the auth user has access to\n   */\n  public getAuthBusinesses(): KeyMap<Business> {\n    return IsObject(this.auth, ['token']) && IsObject(this.auth.businesses) ? JSON.parse(JSON.stringify(this.auth.businesses)) : null;\n  }\n\n\n  /**\n   * Switch to a different business\n   * @param id\n   */\n  public switchBusiness(id) {\n    this.setCurrentBusinessId(id);\n    this.redirect();\n  }\n\n\n  /**\n   * Change to a different app with the current business\n   * @param appPath\n   */\n  public switchApps(appPath: string): void {\n    window.location.href = window.location.origin + appPath;\n  }\n\n  /**\n   * Change to a different app with the current business\n   * @param appPath\n   */\n  public checkAppAccess(appName: string, redirect: boolean = false): boolean {\n    if (IsObject(PopBusiness, ['id', 'apps']) && IsObject(PopBusiness.apps, true)) {\n      if (IsString(appName, true) && appName in PopBusiness.apps) {\n        return true;\n      }\n    }\n    if (redirect && !isDevMode()) {\n      if(IsString(PopHref) && PopHref !== 'home' ) window.location.href = window.location.protocol + '//' + window.location.host + '/home';\n    }\n    return false;\n  }\n\n\n  /**\n   * Determine the route after a user has authenticated\n   */\n  public redirect(): void {\n    const auth = this.getAuthDetails();\n    let url = '';\n\n    // First check if the redirect url was set. This is for if you want to over-ride and take priority over other redirects.\n    url = GetSiteVar('App.redirect');\n    if (url) SetSiteVar('App.redirect', '');\n\n    // Check if the site was redirected due to a 401.\n    if (!url) {\n      url = GetSiteVar('App.redirectAfterLogin');\n      if (url) SetSiteVar('App.redirectAfterLogin', '');\n    }\n\n    if (!auth.email_verified_at) {\n      url = window.location.origin + '/user/confirm-email-resend';\n    }\n\n    // Check if there is a current business unit for this onSession and a corresponding default page.\n    if (!url) {\n      // const currentBuId = this.asset.businessId;\n      // If their current B.U. is no longer available then make sure the settings are zero'd out.\n      if (this.asset.businessId && IsObject(auth.businesses, true) && typeof auth.businesses[this.asset.businessId] === 'undefined') {\n        this.setCurrentBusinessId(0);\n      } else if (this.asset.businessId && IsObject(auth.businesses, true) && typeof auth.businesses[this.asset.businessId] !== 'undefined') {\n        if (auth.businesses[this.asset.businessId].homepage) {\n          const business = auth.businesses[this.asset.businessId];\n          url = window.location.origin + business.homepage;\n        } else {\n          if (isDevMode()) {\n            url = window.location.origin + '/';\n          } else {\n            url = window.location.origin + '/home';\n          }\n\n        }\n      }\n    }\n\n    // Check if there is a home page set for the default business unit.\n    if (!url) {\n      if (IsObject(auth.businesses, true)) {\n        if (auth.business_fk && typeof auth.businesses[auth.business_fk] !== 'undefined') {\n          if (auth.businesses[auth.business_fk].homepage) {\n            url = window.location.origin + auth.businesses[auth.business_fk].homepage;\n          } else {\n            if (isDevMode()) {\n              url = window.location.origin + '/' + (IsString(PopHref, true) ? PopHref : '');\n            } else {\n              url = window.location.origin + '/home';\n            }\n\n          }\n        }\n      }\n    }\n\n\n    if (url) {\n      window.location.href = url;\n    } else {\n      // If still no url then redirect to the users profile page.\n      if (isDevMode()) {\n        window.location.href = window.location.origin + '/';\n      } else {\n        window.location.href = window.location.origin + '/home';\n      }\n    }\n  }\n\n\n  ngOnDestroy() {\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n}\n\n","import { Injectable } from '@angular/core';\nimport { PopBaseService } from '../../../services/pop-base.service';\nimport { ServiceInjector } from '../../../pop-common.model';\n\n\n@Injectable()\nexport class PopMenuService {\n  protected srv: {\n    base: PopBaseService,\n  } = {\n    base: ServiceInjector.get(PopBaseService),\n  };\n\n  isAuthenticated(){\n    return !this.srv.base.isAuthExpired();\n  }\n\n\n  changeBusiness(id: number){\n    this.srv.base.switchBusiness(id);\n  }\n}\n","import {Inject, Injectable, isDevMode} from '@angular/core';\nimport {catchError, map} from 'rxjs/operators';\n\nimport {PopBaseService} from './pop-base.service';\nimport {AuthDetails, Business, BusinessUser} from '../pop-common-token.model';\nimport {forkJoin, of} from 'rxjs';\nimport {\n  ArrayKeyBy,\n  GetHttpErrorMsg, GetHttpResult,\n  GetStringAbbrv,\n  IsArray,\n  IsDefined,\n  IsObject,\n  IsString,\n  IsUndefined, SetSessionSiteVar,\n  SetSiteVar\n} from '../pop-common-utility';\nimport {HttpBackend, HttpClient, HttpHeaders, HttpParams} from '@angular/common/http';\nimport {AppGlobalInterface, PopRequest, PopUser, SetPopAuth, SetPopBusiness} from '../pop-common.model';\n\n\n@Injectable() @Injectable({\n  providedIn: 'root'\n})\nexport class PopCredentialService {\n  public name = 'PopCredentialService';\n  private http: HttpClient;\n\n\n  private readonly baseUrl;\n\n\n  constructor(\n    private base: PopBaseService,\n    private backend: HttpBackend,\n    @Inject('APP_GLOBAL') private APP_GLOBAL: AppGlobalInterface,\n    @Inject('env') public env?,\n  ) {\n    if (!this.baseUrl) {\n      const envUrl = isDevMode() && this.env && this.env.apiBaseUrl ? this.env.apiBaseUrl : null;\n      this.baseUrl = (envUrl ? envUrl : `${window.location.protocol}//api.${window.location.host}`);\n    }\n    this.http = new HttpClient(this.backend); // bypass the default interceptors\n  }\n\n\n  /**\n   * Main login function hit after they click the Login button.\n   *\n   * @param credentials\n   * @returns {Observable<void>}\n   */\n  authenticate(credentials): Promise<AuthDetails | string> {\n    return new Promise<AuthDetails | string>(resolve => {\n      this.base.clearAuthDetails(`${this.name}:authenticate`);\n      this.http.post(`${this.baseUrl}/auth/login`, credentials).pipe(\n        map((auth: any) => {\n          auth = auth.data ? auth.data : auth;\n          auth = this._transformAuthResponse(auth);\n          // this.base.setAuthDetails( auth );\n          SetSiteVar('Legacy.remember_me', credentials.remember_me);\n          SetSiteVar('Legacy.remembered_username', (credentials.remember_me ? credentials.username : null));\n          return auth;\n        })\n      ).subscribe(async (auth) => {\n          auth = await this._attachBusinesses(auth);\n          this.base.setAuthDetails(auth);\n          SetSessionSiteVar('Login.time', new Date().getTime());\n          return resolve(auth);\n        },\n        (err) => {\n          return resolve(GetHttpErrorMsg(err));\n        });\n    });\n  }\n\n\n  /**\n   * Reset login function hit after password reset\n   *\n   * @param credentials\n   * @returns {Observable<void>}\n   */\n\n  reset(credentials, businessId: number = 0): Promise<AuthDetails | string> {\n    return new Promise<AuthDetails | string>((resolve, reject) => {\n      this.base.clearLocalStorage();\n      this.http.post(`${this.baseUrl}/auth/password/reset`, credentials).pipe(\n        map((auth: any) => {\n          auth = auth.data ? auth.data : auth;\n          auth = this._transformAuthResponse(auth);\n          this.base.setAuthDetails(auth);\n          return auth;\n        })\n      ).subscribe(async (auth) => {\n          if (IsObject(auth), ['token', 'id']) {\n            auth = auth.data ? <AuthDetails>auth.data : <AuthDetails>auth;\n            auth = await this._attachBusinesses(auth, businessId);\n            this.base.setAuthDetails(auth);\n            return resolve(auth);\n          } else {\n            return reject(auth);\n          }\n\n        },\n        err => {\n          return resolve(GetHttpErrorMsg(err));\n        });\n    });\n  }\n\n\n  update(auth: AuthDetails, businessId: number = 0): Promise<AuthDetails | string> {\n    return new Promise<AuthDetails | string>(async (resolve) => {\n      this.base.clearLocalStorage();\n      auth = this._transformAuthResponse(auth);\n      auth = await this._attachBusinesses(auth, businessId);\n      this.base.setAuthDetails(auth);\n      return resolve(auth);\n    });\n  }\n\n\n  clear(storage = true) {\n    return PopRequest.doPost(`auth/logout`, {}).pipe(\n      map((res: any) => {\n        res = res.data ? res.data : res;\n        if (storage) {\n          this.base.clearAuthDetails(`${this.name}:clear`);\n        }\n\n        return res;\n      })\n    );\n  }\n\n\n  clearAll(storage = true) {\n    return PopRequest.doPost(`auth/logout`, {logoutAll: true}).pipe(\n      map((res: any) => {\n        res = res.data ? res.data : res;\n        if (storage) {\n          SetPopAuth(null);\n          SetPopBusiness(null);\n          this.base.clearAuthDetails(`${this.name}:clearAll`);\n        }\n        return res;\n      })\n    );\n  }\n\n\n  /**\n   * Verify the current auth storage\n   *\n   * @param credentials\n   * @returns {Observable<void>}\n   */\n  verify(businessId: number): Promise<AuthDetails> {\n    return new Promise<AuthDetails>(async (resolve) => {\n      if (!businessId || this.base.isAuthExpired()) {\n        return resolve(null);\n      }\n      let checkedPermission = false;\n      const initRequests = [\n        PopRequest.doGet(`/auth/user`).pipe(\n          map((auth: any) => {\n            auth = auth.data ? auth.data : auth;\n            auth = this._transformAuthResponse(auth);\n            if (+businessId) {\n              let tmp = IsObject(auth.businesses[businessId], true) ? auth.businesses[businessId] : null;\n              auth.businesses = {};\n              if (tmp) {\n                auth.businesses[businessId] = tmp;\n              }\n\n              tmp = IsObject(auth.users[businessId], true) ? auth.users[businessId] : null;\n              auth.users = {};\n              if (tmp) {\n                auth.users[businessId] = tmp;\n              }\n            }\n            return auth;\n          })\n        )\n      ];\n      if (IsObject(PopUser, ['id']) && this.APP_GLOBAL.isPermissions()) {\n        checkedPermission = true;\n        initRequests.push(PopRequest.doPatch(`/businesses/${businessId}/users/${PopUser.id}/permissions`, {\n          with: ''\n        }, 1, true));\n      }\n\n      forkJoin(initRequests).subscribe((results) => {\n        const auth = <AuthDetails>results[0];\n        const existing = <AuthDetails>this.base.getAuthDetails();\n        existing.users = {...existing.users, ...auth.users};\n        existing.businesses = {...existing.businesses, ...auth.businesses};\n\n        if (checkedPermission) {\n\n          const user = GetHttpResult(results[1]);\n          if (businessId in existing.users) {\n            existing.users[businessId].permissions = user.permissions;\n          }\n        }\n        if (+businessId) {\n          forkJoin([\n            PopRequest.doGet(`/businesses/${businessId}`, {with: 'apps'}, 1, false, businessId).pipe(\n              catchError(error => of(error)),\n              map((res: any) => {\n                if (res.data) res = res.data;\n                if (IsArray(res)) {\n                  return res.pop();\n                } else {\n                  return res;\n                }\n\n              })),\n            PopRequest.doGet(`/apps/user/${auth.users[businessId].id}/settings`, {}, 1, false, businessId).pipe(\n              catchError(error => of(error)),\n              map((res: any) => {\n                if (res.data) res = res.data;\n                return res;\n              })),\n          ]).subscribe((data: any) => {\n            if (!(IsObject(existing.businesses[businessId], true)) || !(existing.users[businessId])) {\n              return resolve(null);\n            }\n\n            existing.businesses[businessId] = data[0];\n            existing.users[businessId].setting = {};\n            if (IsArray(data[1], true)) {\n              data[1].map((item) => {\n                if (IsObject(item, true)) {\n                  existing.users[businessId].setting[item.name] = item.setting.value ? item.setting.value : item.defaultValue;\n                }\n              });\n            }\n            // existing.users[businessId] = auth.users[businessId];\n            // existing.businesses[businessId] = auth.businesses[businessId];\n            this.base.setAuthDetails(existing);\n            return resolve(existing);\n          }, () => {\n            return resolve(existing);\n          });\n        } else {\n          this.base.setAuthDetails(existing);\n          return resolve(existing);\n        }\n\n      }, () => {\n        return resolve(null);\n      });\n    });\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  private _attachBusinesses(auth: AuthDetails, defaultBusinessId: number = 0): Promise<AuthDetails> {\n    return new Promise<AuthDetails>(async (resolve) => {\n      const businessIds = Object.keys(auth.users).map((id) => +id);\n      if (!defaultBusinessId) defaultBusinessId = +auth.business_fk && businessIds.includes(+auth.business_fk) ? +auth.business_fk : (IsArray(businessIds, true) ? +businessIds[0] : 0);\n      if (+defaultBusinessId > 0) {\n        this.base.setCurrentBusinessId(defaultBusinessId);\n        this.http.get(`${this.baseUrl}/businesses`, {\n          headers: new HttpHeaders(\n            {\n              'Authorization': `Bearer ${auth.token}`,\n              'X-Popcx-Business': defaultBusinessId + '',\n              'Content-Type': 'application/json',\n              'Api-Version': '1'\n            }\n          ),\n          params: this._setParams({\n            id: businessIds\n          })\n        }).subscribe((res: any) => {\n          const businesses = res.data ? res.data : res;\n          auth.businesses = {};\n          if (IsArray(businesses, true)) {\n            businesses.map((business: Business) => {\n              auth.businesses[business.id] = business;\n            });\n          }\n          // Check if this app was public facing, and turn it off\n          if (this.APP_GLOBAL.isOpen()) this.APP_GLOBAL.setOpen(false);\n          return resolve(auth);\n        });\n      } else {\n        auth.businesses = {};\n        auth.users = {};\n        return resolve(auth);\n      }\n    });\n  }\n\n\n  private _setParams(body) {\n    let params: HttpParams = new HttpParams();\n    for (const key of Object.keys(body)) {\n      if (body[key]) {\n        if (body[key] instanceof Array) {\n          body[key].forEach((item) => {\n            params = params.append(`${key.toString()}[]`, item);\n          });\n        } else {\n          params = params.append(key.toString(), body[key]);\n        }\n      }\n    }\n    return params;\n  }\n\n\n  private _transformAuthResponse(auth: any): AuthDetails {\n    const existingAuth = this.base.getAuthDetails();\n    if (!(IsObject(auth.businesses))) {\n      auth.businesses = {};\n    }\n    if (IsArray(auth.users, true)) {\n      auth.users.map((user: BusinessUser) => {\n        auth.businesses[user.business_id] = user.business;\n        delete user.business;\n      });\n      auth.users = ArrayKeyBy(auth.users, 'business_id');\n    }\n    if (IsString(auth.first_name, true) && IsString(auth.last_name, true)) {\n      auth.initials = GetStringAbbrv(`${auth.first_name} ${auth.last_name}`);\n    } else if (IsString(auth.name, true)) {\n      auth.initials = GetStringAbbrv(auth.name);\n    } else if (auth.first_name || auth.last_name) {\n      if (auth.first_name) {\n        auth.initials = GetStringAbbrv(auth.first_name);\n      } else {\n        auth.initials = GetStringAbbrv(auth.last_name);\n      }\n    } else {\n      auth.initials = '?';\n    }\n    if (IsDefined(auth.created_at)) auth.created_at = Math.floor((new Date(auth.created_at)).getTime() / 1000);\n    if (IsDefined(auth.last_login_at)) auth.last_login_at = Math.floor(new Date(auth.last_login_at).getTime() / 1000);\n    if (IsString(auth.email_verified_at, true)) auth.email_verified_at = Math.floor(new Date(auth.email_verified_at).getTime() / 1000);\n    if (IsDefined(auth.token_created_at) && IsUndefined(auth.created_at)) auth.created_at = auth.token_created_at;\n    if (IsUndefined(auth.max_ttl)) auth.max_ttl = 720;\n    if (!(IsString(auth.token, true)) && IsObject(existingAuth, ['token'])) auth.token = existingAuth.token;\n    if (IsDefined(existingAuth.created_at)) auth.created_at = existingAuth.created_at;\n\n\n    return <AuthDetails>auth;\n  }\n\n}\n","import { ComponentType } from '@angular/cdk/portal';\nimport { CoreConfig, Dictionary, EntityExtendInterface, EventCallback, OutletReset, PopBaseEventInterface, SectionConfig } from '../../../pop-common.model';\nimport { FieldItemGroupConfig } from '../pop-field-item-group/pop-field-item-group.model';\nimport { Subject } from 'rxjs';\n\nexport type TabLoadCallback = ( config: CoreConfig, tab: TabConfig ) => void;\nexport type TabUnloadCallback = ( config: CoreConfig, tab: TabConfig ) => void;\nexport type TabCoreCallback = ( event: PopBaseEventInterface ) => void;\n\n\nconst enum TabPosition {\n  left = 'left',\n  center = 'center',\n  right = 'center'\n}\n\n\nexport interface TabComponentInterface {\n  type: ComponentType<any>;\n  inputs?: Dictionary<any>;\n  position: number;\n  name?: string;\n  width?: string;\n  header?: string;\n  when?:any[];\n}\n\n\nexport interface TabPositionInterface {\n  id?: string | number;\n  name?: string;\n  flex: number;\n  maxWidth?: number;\n  minWidth?: number;\n  maxHeight?: number;\n  position?: number;\n  components?: TabComponentInterface[];\n  reset?: Subject<any>;\n  header?: string;\n  extension?: EntityExtendInterface;\n}\n\n\nexport interface TabInterface {\n  id: string;\n  hidden?: boolean;\n  positions?: any;\n  name?: string;\n  path?: string;\n  metadata?: object;\n  onLoad?: TabLoadCallback; // initial load event hook for custom logic\n  onEvent?: EventCallback;  // main event hook for custom logic\n  overhead?: number;       // compute extra overhead assigned by parent component\n  onUnload?: TabUnloadCallback;\n  requireRefresh?: boolean;        // require an api call to refresh the entityId on every load\n  scheme?: boolean;\n  sections?: SectionConfig[];\n  syncPositionFields?: string[]; // a list of fieldItems that should only trigger tab to reload modules of the tab\n  syncPositionMap?: Dictionary<number[]>; // a more specific mapping to specify certain positions to reload with a patch comes from a certain position\n  syncPositions?: boolean;  // a general switch that triggers all positions to reset on a patch, should be reduced by providing syncPositionFields <['security_profile_fk', 'type_fk']> or syncPositionMap <{'left':['right']>}\n  wrap?: boolean;   // Indicate whether this tab should have the default wrapper .ie margin, sometimes a tab might be framed from within another tab that already has the wrap\n  columnWrap?: boolean;   // Indicate whether this tab should have the default wrapper .ie margin, sometimes a tab might be framed from within another tab that already has the wrap\n  when?: any[];  // conditional whether to show tab or not\n}\n\n\nexport class TabConfig {\n  id: string;\n  name?: string;\n  hidden? = false;\n  path? = '';\n  metadata?: object;\n  scheme? = false;\n  overhead? = 0;\n  positions?: {\n    1?: TabPositionInterface,\n    2?: TabPositionInterface,\n    3?: TabPositionInterface,\n  };\n  sections? = null;\n  syncPositionFields?: string[];\n  syncPositions? = false;\n  syncPositionMap?: Dictionary<number[]>;\n  requireRefresh? = false;\n  onLoad?: TabLoadCallback;\n  onEvent?: EventCallback;\n  onUnload?: TabUnloadCallback;\n  // internal assets\n  view?: any;\n  resetView?: OutletReset;\n  when? = null;\n\n  wrap? = true;\n  columnWrap? = true;\n  groups?: Dictionary<FieldItemGroupConfig> = {};\n\n\n  constructor( params: TabInterface ){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n    if( !this.name ) this.name = this.id.replace( /_/g, ' ' ).replace( /(?:^|\\s)\\S/g, function( a ){\n      return a.toUpperCase();\n    } );\n\n    if( !this.path ) this.path = this.id.replace( /_/g, '-' ).toLowerCase();\n    if( !this.metadata ) this.metadata = {};\n    if( !this.syncPositionMap ) this.syncPositionMap = {};\n    if( !this.positions ) this.positions = { 1: { flex: 1 } };\n    Object.keys( this.positions ).map( ( position ) => {\n      if( !this.positions[ position ].min ) this.positions[ position ].multiple_min = null;\n      if( !this.positions[ position ].max ) this.positions[ position ].multiple_max = null;\n      if( !this.positions[ position ].flex && this.positions[ position ].cols ) this.positions[ position ].flex = this.positions[ position ].cols;\n      delete this.positions[ position ].cols;\n    } );\n  }\n}\n\n\nexport interface TabButtonInterface {\n  id: number | string;\n  name: string;\n  metadata?: any;\n  hidden?: boolean;\n  disabled?: boolean;\n  accessType?: string;\n}\n\n\nexport interface TabMenuInterface {\n  name: string;\n  goBack?: boolean;\n  portal?: boolean;\n  tabs?: Array<TabConfig>;\n  buttons?: Array<TabButtonInterface>;\n}\n\n\nexport interface TabMenuPortalInterface {\n  internal_name: string;\n  entity_id: number;\n}\n\n\nexport class TabMenuConfig {\n  name = '';\n  goBack = true;\n  tabs: Array<TabConfig> = [];\n  buttons: Array<TabButtonInterface> = [];\n  portal = <boolean>false;\n  metadata: Dictionary<any> = {};\n  loaded = false;\n  loading = false;\n\n\n  constructor( params?: TabMenuInterface ){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n  }\n}\n\n\nexport interface BackButton {\n  returnUrl: string;\n  hardReload: boolean;\n} \n\n\n\n","import { EventCallback, FieldItemOptions, OptionItem } from '../../../pop-common.model';\nimport { TableConfig } from '../pop-table/pop-table.model';\n\n\nexport interface SideBySideOptionInterface {\n  value: string | number;\n  name: string;\n  group?: string;\n  sort_order?: number;\n  patching?: boolean;\n  optionFilter?: boolean;\n  assignBlock?: boolean;\n  optionBlock?: boolean;\n  assignedFilter?: boolean;\n  errMessage?: string;\n}\n\n\nexport interface SideBySideOptions {\n  assigned?: any;\n  resource?: string;\n  child?: string;\n  parent?: string;\n  values: SideBySideOptionInterface[];\n  empty?: OptionItem;                       // Pass in an Option Item that you want to represent an unassigned value\n  prevent?: Array<string | number>;         // pass in ids of an Option Items that you don't want in list\n  ensure?: OptionItem;\n}\n\n\nexport interface SideBySideInterface {\n  id?: number | string;           // A number that will be included in the events so you know which field it came from.\n  name?: string;              // the entityId field name\n  assigned?: Array<string | number>;  // the ids of the assigned items\n  assignAll?: boolean;        // If \"Assign All\" should be available.\n  assignedLabel?: string;     // Label of the assigned items name\n  bubble?:boolean;\n\n  bucketHeight?: number;      // The exact px height you want the buckets to be. Overrides bucket limit\n  bucketLimit?: number;      // The limit of items to show in a bucket\n  disabled?: boolean;          // Set to true to disable buttons\n  displayCircleID?: boolean;   //\n  displayHelper?: boolean;     // Set to false if you don't want to see helper icons when no assigned\n  displayTitle?: boolean;     //\n  facade?:boolean;            // mimic api calls\n  facadeEvent?:boolean;       // If set means that only an event should be fired instead of actually doing anything\n  helpText?: string;         // Displayed text when none assigned\n  helpTextRight?:string;   // Displayed text when no options available to assign\n  height?: number;               // static px height\n  optionsLabel?: string;         // Label of the available items name.\n  filter?: boolean;           // If filters are available\n  filterBoth?: boolean;        // If filter boxes should be combined\n  route?: string;              // Absolute Url path to route to each option: Extrapolate the entityId/value by  passing 'users/:value'\n  metadata?: object;\n  options: SideBySideOptions;// The options available.\n  removeAll?: boolean;        // If \"Remove All\" should be available.\n  required?: boolean;\n  sort?: boolean;             //  Set to true if you want items to be sorted in priority of sort_order, name\n  sessionPath?: string;          // Entity Config location to store values, ie...  a way store the captured values of facades on the entityId metadata <'entityId.metadata.role_type'>\n  display?: string;             // Title of the Side by Side\n  parentHeight?: string;     // class name of parent height to match\n  patch?: {\n    path: string;\n    conflictPath?:string;\n    conflictMessage?:string;\n    conflictHeader?:string;\n    addId?:boolean\n    conflictTableConfig?:TableConfig;\n    field?: string;\n    businessId?: number;\n    callback?: EventCallback;\n    ignore401?: boolean,\n    metadata?: object;\n    displayIndicator?: boolean;\n    version?: number,\n    running?: boolean;\n    assignErrMessage?: string // Store (mass) assign Http Error message\n    removeErrMessage?: string // Store (mass) remove Http Error message\n    assignMethod?: 'POST' | 'PATCH';\n    removeMethod?: 'POST' | 'PATCH' | 'DELETE';\n  };\n}\n\n\nexport class SideBySideConfig {\n  id;\n  name = 'name';\n  bubble = false;\n  hasLabelRow = false;\n  hasFilterRow = false;\n  hasHeader = false;\n  assigned: Array<string | number> = []; // List of item ids of assigned items\n  assignAll = false;\n  assignedLabel = '';\n  bucketHeight?: number;\n  bucketLimit = 0;\n  disabled = false;\n  displayCircleID = true;\n  displayHelper = true;\n  displayTitle = true;\n  facade = false;\n  facadeEvent = false;\n  helpText: string;\n  helpTextRight:string;\n  optionsLabel = '';\n  optionHtml = 'label';\n  filter = true;\n  filterBoth = false;\n  height?: number;               // static px height\n  route = '';\n  metadata = null;\n  options: SideBySideOptions = { values: [] }; // List of all available items\n  removeAll = false;\n  required?: boolean;\n  sort: false;\n  display = '';\n  patch = null;\n  parentClassName?: string;     // class name of parent height to match\n  removeAllOptions;\n  addAllOptions;\n  assign;\n  remove;\n  applyFilter;\n  getAssigned;\n  block;\n  unblock;\n  control;\n\n\n  constructor(config: SideBySideInterface){\n    for( const i in config ) this[ i ] = config[ i ];\n    if( !this.patch ) this.patch = {};\n    if( this.patch.displayIndicator !== false ) this.patch.displayIndicator = true;\n    if( !this.patch.field ) this.patch.field = 'option';\n    if( !this.patch.assignMethod ) this.patch.assignMethod = 'POST';\n    if( !this.patch.removeMethod ) this.patch.removeMethod = 'DELETE';\n    if( !this.patch.businessId ) this.patch.businessId = 0;\n\n    if( !this.metadata ) this.metadata = {};\n    this.hasHeader = this.display && this.displayTitle;\n    this.hasLabelRow = this.assignAll || this.removeAll || this.optionsLabel || this.assignedLabel ? true : false;\n    this.hasFilterRow = this.filter || this.filterBoth ? true : false;\n\n\n    if( this.route ) this.optionHtml = 'route';\n\n    if( this.displayHelper && !this.helpText ) this.helpText = 'You have no ' + ( this.display ? this.display.toLowerCase() : 'options' );\n    this.options = JSON.parse(JSON.stringify(this.options)); // make as deep copy of options so that options reference can be used elsewhere\n\n    if( this.displayHelper && !this.helpTextRight ) this.helpTextRight = ' No ' + ( this.display ? this.display.toLowerCase() +' available ' : 'data available ');\n    this.options = JSON.parse(JSON.stringify(this.options)); // make as deep copy of options so that options reference can be used elsewhere\n\n    if( this.sort && this.options.values.length > 1 ){\n      if( typeof this.options[ 0 ].sort_order !== 'undefined' ){\n        this.options.values.sort((a, b) => {\n          if( a.sort_order < b.sort_order ) return -1;\n          if( a.sort_order > b.sort_order ) return 1;\n          return 0;\n        });\n      }else{\n        this.options.values.sort((a, b) => {\n          if( a.name < b.name ) return -1;\n          if( a.name > b.name ) return 1;\n          return 0;\n        });\n      }\n    }\n  }\n}\n","import { FormControl, Validators } from '@angular/forms';\nimport { FieldItemOption, FieldItemOptions, FieldItemPatchInterface } from '../../../../pop-common.model';\nimport { SetControl } from '../../../../pop-common-dom.models';\n\n\nexport interface SelectConfigInterface {\n  autoFill?: boolean;\n  bubble?: boolean;               // fire events\n  control?: FormControl;          // The form control. If not passed one will be created.\n  disabled?: boolean;             // Mark as readonly.\n  displayErrors?: boolean;        // If Error messages should be displayed.\n  emptyOption?: FieldItemOption;      // Sets an empty or a null option value as the first option\n  empty?: 'ConvertEmptyToNull' | 'ConvertEmptyToZero';\n  facade?: boolean;               // Sets a flag that says this fieldItems really does not exist in the backend, and just pretend to hit the api\n  helpText?: string;           // On hover helper text.\n  height?: number;\n  hidden?: boolean;                // Hide a field by setting to true;\n  id?: number | string;           // A number that will be included in the events so you know which field it came from.\n  label?: string;                 // Input label.\n  metadata?: object;              // Array of objects. To be passed back on the event emitter and included in a patch if desired.\n  mode?: 'select' | 'label';\n  minimal?: boolean;              // Allows the input to fit in a tighter space, removes indicators and padding\n  name?: string;                 //  name of column\n  noInitialValue?: boolean;        // Set to true to always have an empty value on load\n  options?: FieldItemOptions;        // Array of FieldOptions\n  patch?: FieldItemPatchInterface;         // If field should be auto-patched.\n  route?: string;                 // a router url path\n  readonly?: boolean;\n  required?: boolean;\n  session?: boolean;                // If field value change should be stored to core entity\n  sessionPath?: string;                // If session path if not stored on root entity\n  sort?: boolean;                 //  Set to true if you want options to be sorted in priority of sort_order, name\n  tooltip?: string;               // Tooltip for information to show when input is focused\n  validators?: Array<Validators>; // Array of Validators.\n  value?: boolean | string | number;        // Initial value.\n}\n\n\nexport class SelectConfig implements SetControl {\n  autoFill?: boolean;\n  bubble = false;\n  clearMessage;\n  control: FormControl;\n  disabled = false;\n  displayErrors = true;\n  empty;\n  facade = false;\n  helpText = '';\n  hidden: false;\n  height? = 240;\n  id;\n  label = '';\n  message = '';\n  mode = 'select';\n  metadata;\n  minimal = false;\n  name = 'name';\n  noInitialValue = false;\n  options?: FieldItemOptions = { values: [] };\n  patch: FieldItemPatchInterface;\n  route;\n  readonly = false;\n  required?: boolean;\n  showTooltip = false;\n  sort = false;\n  session?: boolean;\n  sessionPath?: string;\n  triggerOnChange;\n  tooltip = '';\n  validators;\n  value?: boolean | string | number | any[] = null;\n\n\n  constructor( params?: SelectConfigInterface ){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n    if( this.sort && this.options.values.length > 1 ){\n      if( typeof this.options.values[ 0 ].sort_order !== 'undefined' ){\n        this.options.values.sort( ( a, b ) => {\n          if( a.sort_order < b.sort_order ) return -1;\n          if( a.sort_order > b.sort_order ) return 1;\n          return 0;\n        } );\n      }else{\n        this.options.values.sort( ( a, b ) => {\n          if( a.name < b.name ) return -1;\n          if( a.name > b.name ) return 1;\n          return 0;\n        } );\n      }\n    }\n    if( this.options.empty ) this.options.values.unshift( { value: this.options.empty.value, name: this.options.empty.name } );\n\n    if( !this.patch ) this.patch = { field: '', duration: 750, path: '', disabled: false, businessId: 0 };\n    if( !this.disabled ) this.disabled = false;\n    if( this.patch.displayIndicator !== false ) this.patch.displayIndicator = true;\n    if( this.noInitialValue ) this.value = '';\n    if( !this.control ) this.setControl();\n  }\n\n\n  setControl(){\n    this.control = ( this.disabled\n        ? new FormControl( { value: this.value, disabled: true } )\n        : new FormControl( this.value, ( this.validators ? this.validators : [] ) )\n    );\n  }\n}\n","import { FormControl, Validators } from '@angular/forms';\nimport { FieldItemOptions, FieldItemPatchInterface } from '../../../../pop-common.model';\nimport { SetControl } from '../../../../pop-common-dom.models';\n\n\nexport interface SelectMultiConfigInterface {\n  bubble?: boolean;               // fire events\n  column?: string;              // the entityId field name\n  control?: FormControl;          // The form control. If not passed one will be created.\n  displayErrors?: boolean;        // If Error messages should be displayed.\n  disabled?: boolean;             // Mark as readonly.\n  facade?:boolean;\n  helpText?: string;            // On hover helper text.\n  id?: number | string;           // A number that will be included in the events so you know which field it came from.\n  label?: string;                 // Input label.\n  metadata?: object;              // Array of objects. To be passed back on the event emitter and included in a patch if desired.\n  minimal?: boolean;              // Allows the input to fit in a tighter space, removes indicators and padding\n  noInitialValue?:boolean;         // Set to true to always have an empty value on load\n  options?: FieldItemOptions;        // Array of FieldOptions\n  patch?: FieldItemPatchInterface;         // If field should be auto-patched.\n  session?: boolean;                // If field value change should be stored to core entity\n  sessionPath?: string;                // If session path if not stored on root entity\n  sort?: boolean;                 //  Set to true if you want options to be sorted in priority of sort_order, name\n  tooltip?: string;               // Tooltip for information to show when input is focused\n  validators?: Array<Validators>; // Array of Validators.\n  value?: Array<number | string>;   // Initial value.\n}\n\n\nexport class SelectMultiConfig implements SetControl {\n  bubble = false;\n  clearMessage;\n  control: FormControl;\n  displayErrors = true;\n  disabled = false;\n  facade = false;\n  helpText = '';\n  id;\n  label = '';\n  minimal?: false;\n  metadata;\n  message = '';\n  noInitialValue = false;\n  name = 'name';\n  options?: FieldItemOptions;\n  patch: FieldItemPatchInterface;\n  route;\n  session?: boolean;\n  sessionPath?: string;\n  sort: false;\n  showTooltip = false;\n  tooltip = '';\n  triggerOnChange: CallableFunction;\n  validators;\n  value;\n\n\n  constructor( params?: SelectMultiConfigInterface ){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n    this.value = Array.isArray( this.value ) ? this.value : [];\n    if( !this.options ) this.options = { values: [] };\n    if( this.sort && this.options.values.length > 1 ){\n      if( typeof this.options.values[ 0 ].sort_order !== 'undefined' ){\n        this.options.values.sort( ( a, b ) => {\n          if( a.sort_order < b.sort_order ) return -1;\n          if( a.sort_order > b.sort_order ) return 1;\n          return 0;\n        } );\n      }else{\n        this.options.values.sort( ( a, b ) => {\n          if( a.name < b.name ) return -1;\n          if( a.name > b.name ) return 1;\n          return 0;\n        } );\n      }\n    }\n\n    if( !this.patch ) this.patch = { field: '', duration: 750, path: '', disabled: false };\n    if( this.patch.displayIndicator !== false ) this.patch.displayIndicator = true;\n    if( this.noInitialValue ) this.value = [];\n    if( !this.control ) this.setControl();\n  }\n\n\n  setControl(){\n    this.control = ( this.disabled ? new FormControl( {\n      value: this.value,\n      disabled: true\n    } ) : new FormControl( this.value, ( this.validators ? this.validators : [] ) ) );\n  }\n}\n","import { FormControl, Validators } from '@angular/forms';\nimport { EventPromiseCallback, FieldItemPatchInterface } from '../../../../pop-common.model';\nimport { SetControl } from '../../../../pop-common-dom.models';\n\n\nexport interface InputConfigInterface {\n  autofocus?:boolean;\n  autoselect?:boolean;\n  bubble?: boolean;               // fire events\n  conceal?: boolean;              // Mask the input as dots\n\n  control?: FormControl;          // The form control. If not passed one will be created.\n\n  dropSpecial?: boolean;\n  disabled?: boolean;             // Mark as disabled.\n  displayErrors?: boolean;        // If Error messages should be displayed.\n  empty?: 'ConvertEmptyToNull' | 'ConvertEmptyToZero';\n  facade?: boolean;\n  helpText?: string;            // On hover helper text.\n  hintText?: string;\n  hidden?: boolean;               // Hide input.\n  hint?: boolean;\n  id?: string | number;           // A number that will be included in the events so you know which field it came from.\n  label?: string;                 // Input label.\n\n  minimal?: boolean;              // Allows the input to fit in a tighter space, removes indicators and padding\n  mask?: string;                  // ngxMask expression\n  maxlength?: number;             // Field multiple_max length.\n  metadata?: object;              // Array of objects. To be passed back on the event emitter and included in a patch if desired.\n  name?: string;                 // name of column\n  noInitialValue?: boolean;        // Set to true to always have an empty value on load\n  onEnter?:EventPromiseCallback;\n  patch?: FieldItemPatchInterface; // If field should be auto-patched.\n  pattern?: string;               // Character type limiter.\n  prefix?: string;                // Prefix Character\n  prevent?: any[];\n  readonly?: boolean;             // Mark as readonly.\n  required?: boolean;\n  session?: boolean;                // If field value change should be stored to core entity\n  sessionPath?: string;                // If session path if not stored on root entity\n  showMask?: boolean;\n  specialChars?: string[];        // New default characters for mask\n  suffix?: string;                // Suffix Character\n  selectMode?: boolean;               // Marks input html to mimic disabled select input : ie.. pop a modal when input is clicked, set an onclick event function to on component tag to call a certain function\n  selectModeOptionsDirection?: 'up' | 'down';\n  tooltip?: string;               // Tooltip for information to show when input is focused\n  tabOnEnter?: boolean;           // Convert enter to a tab when control is valid, default is false ie .. set to true when you want to moved down a form list\n  type?: 'text' | 'password' | 'email';     // HTML input type.\n  transformation?: any;// Transform the input to match a specific case of format 'title' | 'lower' | 'upper' | 'ConvertEmptyToNull' | 'ConvertEmptyToZero'\n  validators?: Array<Validators>; // Array of Validators.\n  value?: boolean | string | number;        // Initial value.\n\n}\n\n\nexport class InputConfig implements SetControl {\n  // Defaults\n  autofocus = false;\n  autoselect = false;\n  bubble = false;\n  conceal = false;\n  displayErrors = true;\n  disabled = false;\n  dropSpecial = true;\n  empty;\n  facade? = false;\n  helpText = '';\n  hintText = '';\n  hidden = false;\n  hint = false;\n  id = '';\n  label = '';\n  maxlength = 129;\n  mask = null;\n  minimal = false;\n  message = '';\n  name = 'name';\n  noInitialValue = false;\n  onEnter?:EventPromiseCallback;\n  patch: FieldItemPatchInterface;\n  prefix = '';\n  prevent?: any[];\n  readonly = false;\n  required?: boolean;\n  showMask = false;\n  showTooltip = false;\n  suffix = '';\n  selectMode = false;\n  selectModeOptionsDirection = 'down';\n  session?: boolean;\n  sessionPath?: string;\n  specialChars = [ '-', '/', '(', ')', '.', ':', ' ', '+', ',', '@', '[', ']' ];\n  tooltip = '';\n  type = 'text';\n  tabOnEnter = false;\n  value?: boolean | string | number = '';\n\n\n  // No Defaults\n  control;\n  clearMessage;\n  metadata;\n  pattern;\n  setType;\n  transformation;\n  triggerOnChange;\n  triggerDirectPatch;\n  validators;\n\n\n  constructor( params?: InputConfigInterface ){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n    if( !this.patch ) this.patch = { field: '', path: '', duration: 750, disabled: false, businessId: 0 };\n    if( this.patch.displayIndicator !== false ) this.patch.displayIndicator = true;\n    if( !this.readonly ) this.readonly = false;\n    if( this.selectMode ) this.readonly = true; // input is mimicking a select box to a trigger  modal functionality\n    if( this.noInitialValue ) this.value = '';\n    if( !this.control ) this.setControl();\n    if( this.mask ){\n      this.maxlength = null;\n      this.hint = false;\n      this.pattern = null;\n    }\n  }\n\n\n  setControl(){\n    this.control = ( this.disabled ? new FormControl( {\n      value: this.value,\n      disabled: true\n    } ) : new FormControl( this.value, ( this.validators ? this.validators : [] ) ) );\n  }\n}\n","import { FormControl, Validators } from '@angular/forms';\nimport { FieldItemPatchInterface } from '../../../../pop-common.model';\nimport { SetControl } from '../../../../pop-common-dom.models';\n\n\nexport interface NumberConfigInterface {\n  bubble?: boolean;               // fire events\n  column?: string;              // the entityId field name\n  control?: FormControl;          // The form control. If not passed one will be created.\n  readonly?: boolean;             // Mark as readonly.\n  disabled?: boolean;             // Mark as disabled.\n  displayErrors?: boolean;        // If Error messages should be displayed.\n  dropSpecial?: boolean;\n  facade?: boolean;\n  helpText?: string;            // On hover helper text.\n  hidden?: boolean;               // Hide input.\n  id?: string | number;           // A number that will be included in the events so you know which field it came from.\n  label?: string;                 // Input label.\n  metadata?: object;              // Array of objects. To be passed back on the event emitter and included in a patch if desired.\n  minimal?: boolean;              // Allows the input to fit in a tighter space, removes indicators and padding\n  min?: number;             // Field multiple_max length.\n  max?: number;             // Field multiple_max length.\n  noInitialValue?:boolean;        // Set to true to always have an empty value on load\n  name?: string;\n  patch?: FieldItemPatchInterface; // If field should be auto-patched.\n  prefix?: string;\n  session?: boolean;                // If field value change should be stored to core entity\n  sessionPath?: string;                // If session path if not stored on root entity\n  suffix?: string;\n  step?: number;\n  showMask?: boolean;\n  tooltip?: string;               // Tooltip for information to show when input is focused\n  transformation?: any;// Transform the input to match a specific case of format 'title' | 'lower' | 'upper' | 'ConvertEmptyToNull' | 'ConvertEmptyToZero'\n  validators?: Array<Validators>; // Array of Validators.\n  value?: boolean | string | number;        // Initial value.\n\n}\n\n\nexport class NumberConfig implements SetControl {\n  // Defaults\n  bubble = false;\n  control;\n  dropSpecial = true;\n  displayErrors = true;\n  disabled = false;\n  facade? = false;\n  helpText = '';\n  hidden = false;\n  id = '';\n  label = '';\n  message = '';\n  min? = 1;\n  max? = 100;\n  metadata;\n  minimal = false;\n  maxlength;\n  mask = '0*';\n  name = 'name';\n  noInitialValue = false;\n  pattern = 'Numeric';\n  patch: FieldItemPatchInterface;\n  prefix = '';\n  readonly = false;\n  session?: boolean;\n  sessionPath?: string;\n  showTooltip = false;\n  specialChars = [ '$', ' ', ',', '%' ];\n  showMask = false;\n  suffix = '';\n  step? = 1;\n  tooltip = '';\n  transformation;\n  triggerOnChange;\n  triggerDirectPatch;\n  value?: boolean | string | number = '';\n  validators;\n  \n  \n\n  // No Defaults\n\n\n\n  constructor(params?: NumberConfigInterface){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n    if( !this.patch ) this.patch = { field: '', duration: 750, path: '', disabled: false, businessId: 0 };\n    if( this.patch.displayIndicator !== false ) this.patch.displayIndicator = true;\n    if( !this.readonly ) this.readonly = false;\n\n    if( this.min > this.max ) this.min = this.max;\n    if( this.max < this.min ) this.max = this.min;\n    this.maxlength = String(this.max).length;\n\n    if( this.value ){\n      if( this.value < this.min ) this.value = this.min;\n      if( this.value > this.max ) this.value = this.max;\n    }\n    if( this.noInitialValue ) this.value =  '';\n    if( !this.control ) this.setControl();\n  }\n\n\n  setControl(){\n    this.control = ( this.disabled ? new FormControl({\n      value: this.value,\n      disabled: true\n    }) : new FormControl(this.value, ( this.validators ? this.validators : [] )) );\n  }\n}\n","import { FormControl, Validators } from '@angular/forms';\nimport { FieldItemPatchInterface } from '../../../../pop-common.model';\nimport { SetControl } from '../../../../pop-common-dom.models';\n\nexport type DateFilterPredicate = ( d: Date ) => boolean;\n\n\n\n\nexport interface DateConfigInterface {\n  type?: 'Basic' | 'Expanded';\n  bubble?: boolean;                                 // fire events\n  disabled?: boolean;                               // Mark as disabled.\n  displayErrors?: boolean;                          // If Error messages should be displayed.\n  name?: string;                                // the entityId field name\n  facade?: boolean;\n  filterPredicate?: string | DateFilterPredicate;   // A function to remove certain dates\n  helpText?: string;                             // On hover helper text.\n  id?: string | number;                             // A number that will be included in the events so you know which field it came from.\n  label?: string;                                   // Date label.\n  min?: string | number | Date;                            // Field multiple_min date.\n  max?: string | number | Date;                            // Field multiple_max date.\n  metadata?: object;                                // Array of objects. To be passed back on the event emitter and included in a patch if desired.\n  noInitialValue?: boolean;                          // Set to true to always have an empty value on load\n  required?: boolean;\n  session?: boolean;                                // If field value change should be stored to core entity\n  sessionPath?: string;                            // If session path if not stored on root entity\n  patch?: FieldItemPatchInterface;                           // If field should be auto-patched.\n  tooltip?: string;                                 // Tooltip for information to show when input is focused\n  transformation?: string;                          // Transform the input to match a specific case of format\n  validators?: Array<Validators>;                   // Array of Validators.\n  value?: string | number;                          // Initial value\n  options?: object;                                 //\n}\n\n\nexport class DateConfig implements SetControl {\n\n\n  // Defaults\n  type = 'Expanded';\n  bubble = false;\n  control: FormControl;\n  displayErrors = true;\n  disabled = false;\n  facade?: boolean;\n  filterPredicate = null;\n  helpText = '';\n  id = '';\n  label = '';\n  min = null;\n  max = null;\n  message = '';\n  metadata;\n  name = 'name';\n  noInitialValue = false;\n  patch: FieldItemPatchInterface;\n  required?: boolean;\n  session?: boolean;\n  sessionPath?: string;\n  showTooltip = false;\n  transformation;\n  tooltip = '';\n  value;\n  clearMessage;\n  triggerOnChange;\n\n  // No Defaults\n\n  validators;\n\n\n  constructor( params?: DateConfigInterface ){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n    if( this.value ) this.value = new Date( this.value );\n    if( typeof this.min === 'string'){\n      this.min = new Date( this.min );\n    }\n    if( typeof this.max === 'string'){\n      this.max = new Date( this.max );\n    }\n    // if( isNaN( this.max ) === false ){\n    //   const maxDate = new Date();\n    //   // maxDate.setDate(maxDate.getDate() - 1);\n    //   maxDate.setDate( maxDate.getDate() + parseInt( this.max, 10 ) );\n    //   this.max = new Date( maxDate );\n    // }\n    if( !this.patch ) this.patch = { field: '', duration: 750, path: '', disabled: false, businessId: 0 };\n    if( this.patch.displayIndicator !== false ) this.patch.displayIndicator = true;\n    if( this.noInitialValue ) this.value = '';\n    if( !this.control ) this.setControl();\n  }\n\n\n  setControl(){\n    this.control = <FormControl> ( this.disabled ? new FormControl( {\n      value: this.value,\n      disabled: true\n    } ) : new FormControl( this.value, ( this.validators ? this.validators : [] ) ) );\n  }\n}\n","import { FormControl, Validators } from '@angular/forms';\nimport { FieldItemPatchInterface } from '../../../../pop-common.model';\nimport { SetControl } from '../../../../pop-common-dom.models';\n\n\nexport interface TimeConfigInterface {\n  bubble?: boolean;               // fire events\n  control?: FormControl;          // The form control. If not passed one will be created.\n  disabled?: boolean;             // Mark as disabled.\n  displayErrors?: boolean;        // If Error messages should be displayed.\n  facade?: boolean;               // Sets a flag that says this fieldItems really does not exist in the backend, and just pretend to hit the api\n  helpText?: string;           // On hover helper text.\n  interval: 1 | 5 | 10 | 15;      // Minute interval\n  id?: string | number;           // A number that will be included in the events so you know which field it came from.\n  label?: string;                 // Time label.\n  metadata?: object;              // Array of objects. To be passed back on the event emitter and included in a patch if desired.\n  name?: string;              // the entityId field name\n  noInitialValue?: boolean;        // Set to true to always have an empty value on load\n  patch?: FieldItemPatchInterface;         // If field should be auto-patched.\n  readonly?: boolean;             // Mark as readonly.\n  session?: boolean;                // If field value change should be stored to core entity\n  sessionPath?: string;                // If session path if not stored on root entity\n  tooltip?: string;               // Tooltip for information to show when input is focused\n  time: 12 | 24;                  // Selectable times\n  transformation?: string;        // Transform the input to match a specific case of format\n  validators?: Array<Validators>; // Array of Validators.\n  value?: string | number;        // Initial value.\n}\n\n\nexport class TimeConfig implements SetControl {\n  // Defaults\n  bubble = false;\n  control;\n  displayErrors = true;\n  disabled = false;\n  facade = false;\n  helpText = '';\n  id = '';\n  label = '';\n  message = '';\n  metadata;\n  name = 'name';\n  noInitialValue = false;\n  patch: FieldItemPatchInterface;\n  showTooltip = false;\n  readonly = false;\n  session?: boolean;\n  sessionPath?: string;\n  tooltip = '';\n  transformation;\n  triggerOnChange;\n  time: 12 | 24 = 12;\n  interval: 1 | 5 | 10 | 15 = 15;\n  value = '';\n  validators;\n  // No Defaults\n\n\n  constructor( params?: TimeConfigInterface ){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n    if( !this.patch ) this.patch = { field: '', duration: 750, path: '', disabled: false, businessId: 0 };\n    if( this.patch.displayIndicator !== false ) this.patch.displayIndicator = true;\n    if( !this.readonly ) this.readonly = false;\n    if( this.noInitialValue ) this.value = '';\n    if( !this.control ) this.setControl();\n\n  }\n\n\n  setControl(){\n    this.control = ( this.disabled ? new FormControl( {\n      value: this.value,\n      disabled: true\n    } ) : new FormControl( this.value, ( this.validators ? this.validators : [] ) ) );\n  }\n}\n","import { FormControl, Validators } from '@angular/forms';\nimport { FieldItemOptions, FieldItemPatchInterface } from '../../../../pop-common.model';\nimport { SetControl } from '../../../../pop-common-dom.models';\n\n\nexport interface CheckboxConfigInterface {\n \n  align?: string;                  // With no label, align checkbox < 'left', 'center', 'right';\n  bubble?: boolean;               // fire events\n  control?: FormControl;          // The form control. If not passed one will be created.\n  disabled?: boolean;             // Mark as readonly.\n  displayErrors?: boolean;        // If Error messages should be displayed.\n  facade?: boolean;               // Sets a flag that says this fieldItems really does not exist in the backend, and should not patch to the api\n  helpText?: string;            // On hover helper text.\n  id?: number | string;           // A number that will be included in the events so you know which field it came from.\n  label?: string;                 // Input label. A label is optional, checkbox will center inside the container without a label\n  labelPosition?: string;          // Label can be positioned to be 'before' or 'after' the checkbox. Default is 'after'\n  metadata?: object;              // Array of objects. To be passed back on the event emitter and included in a patch if desired.\n  name?: string;               // the entityId field name\n  noInitialValue?:boolean;        // Set to true to always have an empty value on load\n  options?: FieldItemOptions;        // Array of FieldOptions\n  patch?: FieldItemPatchInterface;         // If field should be auto-patched.\n  session?: boolean;                // If field value change should be stored to core entity\n  sessionPath?: string;                // If session path if not stored on root entity\n  tabOnEnter?:boolean;\n  textOverflow?:'wrap' | 'ellipsis';   // Set the text overflow behavior, default wrap\n  validators?: Array<Validators>; // Array of Validators.\n  value?: number | boolean;        // Initial value.\n}\n\n\nexport class CheckboxConfig implements SetControl {\n\n  align = 'right';\n  bubble = false;\n  control: FormControl;\n  disabled = false;\n  displayErrors = true;\n  facade = false;\n  helpText = '';\n  id: number | string = '';\n  label = '';\n  labelPosition = 'after';\n  message = '';\n  metadata;\n  name = 'name';\n  noInitialValue = false;\n  options?: FieldItemOptions = { values: [] };\n  patch;\n  patchSuccess;\n  patchFail;\n  session?: boolean;\n  sessionPath?: string;\n  startPatch;\n  tabOnEnter = false;\n  toolTipDirection = 'right';\n  textOverflow = 'wrap';\n  value: number | boolean = false;\n  validators;\n\n  constructor(params?: CheckboxConfigInterface){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n    if( this.label ){\n      this.toolTipDirection = this.labelPosition === 'after' ? 'right' : 'left';\n    }else{\n      this.toolTipDirection = 'above';\n    }\n    if( [ 'left', 'center', 'right', ].indexOf(this.align) === -1 ) this.align = 'center';\n    if( !this.patch ) this.patch = { field: '', path: '', disabled: false, businessId: 0  };\n    if( this.patch.displayIndicator !== false ) this.patch.displayIndicator = true;\n    if( this.noInitialValue ) this.value =  null;\n    if( !this.control ) this.setControl();\n  }\n\n\n  setControl(){\n    this.control = this.disabled === true ? new FormControl({\n      value: this.value,\n      disabled: this.disabled\n    }) : new FormControl(this.value, ( this.validators ? this.validators : [] ));\n  }\n\n}\n","import { FormControl, Validators } from '@angular/forms';\nimport { FieldItemPatchInterface } from '../../../../pop-common.model';\nimport { SetControl } from '../../../../pop-common-dom.models';\n\n\nexport interface SwitchConfigInterface {\n  bubble?: boolean;               // fire events\n  control?: FormControl;          // The form control. If not passed one will be created.\n  disabled?: boolean;             // Mark as readonly.\n  displayErrors?: boolean;        // If Error messages should be displayed.\n  empty?: 'ConvertEmptyToNull' | 'ConvertEmptyToZero';\n  facade?: boolean;               // Sets a flag that says this fieldItems really does not exist in the backend, and should not patch to the api\n  helpText?: string;            // On hover helper text.\n  id?: number | string;           // A number that will be included in the events so you know which field it came from.\n  label?: string;                 // Input label. A label is optional, checkbox will center inside the container without a label\n  labelPosition?: string;          // Label can be positioned to be 'before' or 'after' the checkbox. Default is 'after'\n  metadata?: object;              // Array of objects. To be passed back on the event emitter and included in a patch if desired.\n  name?: string;\n  noInitialValue?:boolean;                                // Set to true to always have an empty value on load\n  patch?: FieldItemPatchInterface;         // If field should be auto-patched.\n  tabOnEnter?:boolean;\n  padding?: string;               // padding adjustment\n  session?: boolean;                // If field value change should be stored to core entity\n  sessionPath?: string;                // If session path if not stored on root entity\n  textOverflow?:'wrap' | 'ellipsis';   // Set the text overflow behavior, default wrap\n  tooltip?: string;\n  validators?: Array<Validators>; // Array of Validators.\n  value?: boolean | number | string;        // Initial value.\n\n}\n\n\nexport class SwitchConfig implements SetControl {\n  bubble = false;\n  control: FormControl;\n  disabled = false;\n  displayErrors = true;\n  empty?: 'ConvertEmptyToNull' | 'ConvertEmptyToZero';\n  facade = false;\n  helpText = '';\n  id: number | string;\n  label = '';\n  labelPosition = 'after';\n  message = '';\n  metadata;\n  noInitialValue = false;\n  name? = 'name';\n  patch: FieldItemPatchInterface;\n  padding = '0';\n  session?: boolean;\n  sessionPath?: string;\n  setValue;\n  switchRef;\n  triggerOnChange;\n  tooltip: string;\n  toolTipDirection = 'right';\n  tabOnEnter = false;\n  textOverflow = 'wrap';\n  validators;\n  value: boolean | number | string = false;\n\n\n  constructor(params?: SwitchConfigInterface){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n    this.value = +this.value === 1 ? true : false;\n    this.labelPosition = [ 'before', 'after' ].indexOf(this.labelPosition) >= 0 ? this.labelPosition : 'after';\n    if( this.label ){\n      if( this.labelPosition === 'after' ){\n        this.toolTipDirection = 'right';\n      }\n    }else{\n      this.toolTipDirection = 'above';\n    }\n    if( !this.patch ) this.patch = { field: '', duration: 750, path: '', disabled: false , businessId: 0 };\n    if( !this.disabled ) this.disabled = false;\n    if( this.patch.displayIndicator !== false ) this.patch.displayIndicator = true;\n    if( !this.control ) this.setControl();\n  }\n\n\n  setControl(){\n    this.control = this.disabled === true ? new FormControl({\n      value: this.value,\n      disabled: this.disabled\n    }) : new FormControl(this.value, ( this.validators ? this.validators : [] ));\n  }\n\n}\n\n","import { FormControl } from '@angular/forms';\nimport { FieldItemPatchInterface } from '../../../../pop-common.model';\nimport { SetControl } from '../../../../pop-common-dom.models';\nimport { NumberConfig } from '../pop-number/number-config.model';\nimport { SwitchConfig } from '../pop-switch/switch-config.model';\n\n\nexport interface MinMaxConfigInterface {\n  allowNegative?: boolean;\n  bubble?: boolean;               // fire events\n  disabled?: boolean;             // Mark as disabled.\n  displayErrors?: boolean;        // If Error messages should be displayed.\n  helpText?: string;            // On hover helper text.\n  id?: string | number;           // A number that will be included in the events so you know which field it came from.\n  facade?: boolean;\n   \n  label?: string;                 // Input label.\n  limit?: number;             // Field multiple_max length.\n  minValue?: number;\n  maxValue?: number;\n\n  minReadonly?: boolean;\n  maxReadonly?: boolean;\n\n  min?: number;\n  max?: number;\n\n\n  minRequired?: boolean;\n  maxRequired?: boolean;\n\n \n  minColumn?: string;              // Override the patch name for multiple_min\n  maxColumn?: string;              // Override the patch name for multiple_max\n  minimal?: boolean;\n  minLabel?: string;              // Override the patch name for multiple_min\n  maxLabel?: string;              // Override the patch name for multiple_max\n  metadata?: object;              // Array of objects. To be passed back on the event emitter and included in a patch if desired.\n  patch?: FieldItemPatchInterface; // If field should be auto-patched.\n  session?: boolean;                // If field value change should be stored to core entity\n  sessionPath?: string;            // If session path if not stored on root entity\n  tooltip?: string;               // Tooltip for information to show when input is focused\n}\n\n\nexport class MinMaxConfig implements SetControl {\n  // Defaults\n\n  allowNegative? = false;\n  bubble = false;\n  control;\n\n  disabled = false;\n  facade = false;\n  helpText = '';\n  id = '';\n  isMinConfig: SwitchConfig;\n  isMaxConfig: SwitchConfig;\n  label = 'Min/Max';\n  limit = 100;\n  minValue = 1;\n  maxValue = 10;\n\n  min = 1;\n  max = 10;\n\n  minColumn = 'min';\n  maxColumn = 'max';\n\n  minReadonly = false;\n  maxReadonly = false;\n\n  minConfig: NumberConfig;\n\n  minRequired? = false;\n\n  maxConfig: NumberConfig;\n\n  maxRequired? = false;\n\n  minDefaultValue? = 1;\n  maxDefaultValue? = 1;\n\n  minLabel = 'Minimum';\n  maxLabel = 'Maximum';\n\n  minimal: false;\n  metadata;\n  message = '';\n  name;\n  pattern;\n  patch: FieldItemPatchInterface;\n  session?: boolean;\n  sessionPath?: string;\n  showTooltip = false;\n  tooltip = '';\n  triggerOnChange;\n  transformation;\n  validators;\n  value = '';\n\n  // No Defaults\n\n\n\n\n\n\n\n  constructor(params?: MinMaxConfigInterface){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n    if( !this.patch ) this.patch = { field: '', duration: 750, path: '', disabled: false };\n    if( this.patch.displayIndicator !== false ) this.patch.displayIndicator = true;\n\n    // const maxOptions = [];\n    // let maxLimit = this.limit;\n    // while( maxLimit ){\n    //   maxOptions.push({ value: maxLimit, name: maxLimit, sort: maxLimit });\n    //   maxLimit--;\n    // }\n\n    if( this.limit && this.maxValue > this.limit ) this.maxValue = +this.limit;\n\n    this.isMaxConfig = new SwitchConfig({\n      label: this.maxLabel,\n      value: +this.maxValue ? true : this.maxRequired ? true : false,\n      disabled: this.maxRequired ? true : false,\n      bubble: true,\n      facade: false,\n      labelPosition: 'after',\n    });\n\n    this.maxConfig = new NumberConfig({\n      label: null,\n      value: +this.maxValue,\n      min: this.min,\n      max: this.max,\n      readonly: this.maxReadonly,\n      facade: true,\n      minimal: true,\n      bubble: true,\n    });\n\n    if( this.minValue > this.maxValue ) this.minValue = this.maxValue;\n\n    // let minLimit = this.maxValue;\n    // const minOptions = [];\n    // while( minLimit ){\n    //   minOptions.push({ value: minLimit, name: minLimit, sort: minLimit });\n    //   minLimit--;\n    // }\n\n\n    this.isMinConfig = new SwitchConfig({\n      label: this.minLabel,\n      value: +this.minValue ? true : this.minRequired ? true : false,\n      disabled: this.minRequired ? true : false,\n      bubble: true,\n      facade: false,\n      labelPosition: 'after',\n    });\n\n    this.minConfig = new NumberConfig({\n      label: null,\n      value: +this.minValue,\n      min: this.min,\n      max: this.max,\n      readonly: this.minReadonly,\n      facade: true,\n      minimal: true,\n      bubble: true,\n    });\n\n\n    if( !this.control ) this.setControl();\n\n  }\n\n\n  setControl(){\n    this.control = ( this.disabled ? new FormControl({\n      value: { min: this.minValue, max: this.maxValue },\n      disabled: true\n    }) : new FormControl(this.value, ( this.validators ? this.validators : [] )) );\n  }\n}\n","import { FormControl, Validators } from '@angular/forms';\nimport { FieldItemOption, FieldItemOptions, FieldItemPatchInterface } from '../../../../pop-common.model';\nimport { SetControl } from '../../../../pop-common-dom.models';\n\n\nexport interface RadioConfigInterface {\n  bubble?: boolean;               // fire events\n  control?: FormControl;          // The form control. If not passed one will be created.\n  disabled?: boolean;             // Mark as readonly.\n  displayErrors?: boolean;        // If Error messages should be displayed.\n  emptyOption?: FieldItemOption;      // Sets an empty or a null option value as the first option\n  facade?: boolean;               // Sets a flag that says this fieldItems really does not exist in the backend, and should not patch to the api\n  helpText?: string;            // On hover helper text.\n  id?: number | string;           // A number that will be included in the events so you know which field it came from.\n  label?: string;                 // Input label.\n  labelPosition?: string;         // 'above' (default) 'inline' (Left of selection)\n  layout?: string;                // Default to 'row'. Set to 'name' to display options vertically\n  metadata?: object;              // Array of objects. To be passed back on the event emitter and included in a patch if desired.\n  name?: string;              // the entityId field name\n  noInitialValue?: boolean;        // Set to true to always have an empty value on load\n  options?: FieldItemOptions;        // Array of FieldOptions\n  patch?: FieldItemPatchInterface;         // If field should be auto-patched.\n  session?: boolean;                // If field value change should be stored to core entity\n  sessionPath?: string;                // If session path if not stored on root entity\n  sort?: boolean;                 //  Set to true if you want options to be sorted in priority of sort_order, name\n  validators?: Array<Validators>; // Array of Validators.\n  value?: boolean | string | number;        // Initial value.\n}\n\n\nexport class RadioConfig implements SetControl {\n  bubble = false;\n  control: FormControl;\n  clearMessage;\n  disabled = false;\n  displayErrors = true;\n  facade = false;\n  helpText = '';\n  id: number | string;\n  label = '';\n  labelPosition = 'above';\n  layout = 'row';\n  message = '';\n  metadata;\n  noInitialValue = false;\n  name = 'name';\n  options: FieldItemOptions;\n  patch: FieldItemPatchInterface;\n  reset? = false;\n  session?: boolean;\n  sessionPath?: string;\n  sort? = false;\n  triggerOnChange;\n  validators;\n  value?: boolean | string | number = '';\n\n\n  constructor( params?: RadioConfigInterface ){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n    if( this.sort && this.options.values.length > 1 ){\n      if( typeof this.options.values[ 0 ].sort_order !== 'undefined' ){\n        this.options.values.sort( ( a, b ) => {\n          if( a.sort_order < b.sort_order ) return -1;\n          if( a.sort_order > b.sort_order ) return 1;\n          return 0;\n        } );\n      }else{\n        this.options.values.sort( ( a, b ) => {\n          if( a.name < b.name ) return -1;\n          if( a.name > b.name ) return 1;\n          return 0;\n        } );\n      }\n    }\n    if( this.layout !== 'column' ) this.layout = 'row';\n\n    if( !this.patch ) this.patch = { field: '', duration: 750, path: '', disabled: false, businessId: 0 };\n    if( !this.disabled ) this.disabled = false;\n    if( this.patch.displayIndicator !== false ) this.patch.displayIndicator = true;\n    if( this.noInitialValue ) this.value = '';\n    if( !this.control ) this.setControl();\n  }\n\n\n  setControl(){\n    if( !this.control ){\n      this.control = ( this.disabled === true\n        ? new FormControl( {\n          value: this.value,\n          disabled: this.disabled\n        } )\n        : new FormControl( this.value, ( this.validators ? this.validators : [] ) ) );\n    }\n  }\n}\n","import { FormControl, Validators } from '@angular/forms';\nimport { FieldItemPatchInterface } from '../../../../pop-common.model';\nimport { SetControl } from '../../../../pop-common-dom.models';\n\n\nexport interface TextareaConfigInterface {\n  autoSize?: boolean;           // Auto Adjust the height to fit content\n  bubble?: boolean;               // fire events\n  column?: string;              // the entityId field name\n  control?: FormControl;          // The form control. If not passed one will be created.\n  displayErrors?: boolean;        // If Error messages should be displayed.\n  disabled?: boolean;             // Mark as disabled.\n  facade?: boolean;               // Sets a flag that says this fieldItems really does not exist in the backend, and should not patch to the api\n  helpText?: string;            // On hover helper text.\n  height?: number;                // Set a fixed height for the text area otherwise container will auto expand\n  hint?: boolean;                 // If remaining of available characters should be displayed\n  id?: string | number;           // A number that will be included in the events so you know which field it came from.\n  label?: string;                 // Input label.\n  maxHeight?: number;                // Set a fixed height for the text area otherwise container will auto expand\n  maxlength?: number;             // Field multiple_max length.\n  metadata?: object;              // Array of objects. To be passed back on the event emitter and included in a patch if desired.\n  name?: string;\n  noInitialValue?:boolean;        // Set to true to always have an empty value on load\n  patch?: FieldItemPatchInterface;         // If field should be auto-patched.\n  readonly?: boolean;             // Mark as readonly.\n  session?: boolean;                // If field value change should be stored to core entity\n  sessionPath?: string;                // If session path if not stored on root entity\n  tooltip?: string;               // Tooltip for information to show when input is focused\n  validators?: Array<Validators>; // Array of Validators.\n  value?: boolean | string | number;        // Initial value.\n}\n\n\nexport class TextareaConfig implements SetControl{\n  autoSize = false;\n  bubble = false;\n  control: FormControl;\n  _disabled = false;\n  displayErrors = true;\n  facade = false;\n  helpText = '';\n  height = 0;\n  maxHeight = null;\n  hint = false;\n  id: number | string;\n  label: string;\n  message = '';\n  metadata;\n  maxlength = 1024;\n  name = 'name';\n  noInitialValue = false;\n  patch:FieldItemPatchInterface;\n  readonly = false;\n  session?: boolean;\n  sessionPath?: string;\n  showTooltip = false;\n  tabOnEnter = false;\n  tooltip = '';\n  validators;\n  value:boolean | string | number = '';\n\n\n  constructor(params?: TextareaConfigInterface){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n    // if( this.height && !isNaN(Number(this.height)) ) this.height = this.height + 'px';\n    if( !this.patch ) this.patch = { field: '', duration: 750, path: '', disabled: false , businessId: 0 };\n    if( this.patch.displayIndicator !== false ) this.patch.displayIndicator = true;\n    if( this.noInitialValue) this.value = '';\n    if( !this.control ) this.setControl();\n  }\n\n  setControl(){\n    this.control = ( this.disabled ? new FormControl({\n      value: this.value,\n      disabled: true\n    }) : new FormControl(this.value, ( this.validators ? this.validators : [] )) );\n  }\n\n  get disabled():boolean{\n    return this._disabled;\n  }\n\n  set disabled(value){\n    this._disabled = value;\n    if(value === true){\n      this.control.disable();\n    }else if (value === false){\n      this.control.enable();\n    }\n  }\n\n}\n","import { FormControl } from '@angular/forms';\nimport { FieldItemPatchInterface } from '../../../../pop-common.model';\nimport { SetControl } from '../../../../pop-common-dom.models';\n\n\nexport interface LabelConfigInterface {\n  button?: boolean;       // Turn text/icon into a route method\n  bubble?: boolean;\n  border?: boolean;\n  copyLabel?: boolean;         // The label text has a click to copy\n  copyLabelDisplay?: string;  // The label that should go with the label copy button\n  copyLabelBody?: string | number;    // The value that be copied when the label copy button is clicked\n  copyLabelDisplayTransformation?: any; // The transformation that should happen to the copyLabelDisplay\n  copyLabelBodyTransformation?: any; // The transformation that should happen to the copyLabelBody\n  copyValue?: boolean;         // The value text has a click to copy\n  copyValueDisplay?: string;  // The value that should go with the value copy button\n  copyValueBody?: string | number;    // The value that be copied when the label value button is clicked\n  copyValueDisplayTransformation?: any; // The transformation that should happen to the copyLabelDisplay\n  copyValueBodyTransformation?: any; // The transformation that should happen to the copyLabelBody\n  helpText?: string;  // Helper Text on the right side of label\n  icon?: string;        // Use an icon instead of text. Pass in icon string as Materials(icon_key) or Pop(A)\n  labelButton?: boolean;  // Display the label with a button\n  link?: boolean;       // Turn text/icon into a route method\n  label: string;          // The label Text on the left side\n  metadata?: object;    // Desired Metadata\n  name?: string;    // the entityId field name\n  patch?: FieldItemPatchInterface; // If field should be auto-patched.\n  route?: string;       // a router url path\n  subLabel?: string;\n  subValue?: string;\n  textOverflow?: 'wrap' | 'ellipsis';   // Set the text overflow behavior, default wrap\n  truncate?: number;    // Truncate the text a character length\n  tooltip?: string;     // Tooltip on the left side of the text/icon\n  valueButton?: boolean;  // Display the value with a button\n  valueButtonDisplay?: string;\n  valueButtonDisplayTransformation?: any; // The transformation that should happen to the valueButtonDisplay\n  valueButtonDisabled?: boolean; // The transformation that should happen to the valueButtonDisplay\n  value?: string | number; // The text on the right side\n\n}\n\n\nexport class LabelConfig implements SetControl {\n  bubble = false;\n  button = false;\n  border = false;\n  control;\n  copyValue = false;\n  copyValueDisplay?: string;\n  copyValueBody?: string | number;\n  copyValueDisplayTransformation?: string;\n  copyValueBodyTransformation?: string;\n  copyLabel = false;\n  copyLabelDisplay?: string;\n  copyLabelBody?: string | number;\n  copyLabelDisplayTransformation?: string;\n  copyLabelBodyTransformation?: string;\n  html = 'label';\n  helpText = '';\n  icon;\n  iconType = 'mat';\n  name = 'name';\n  label = 'Label';\n  labelButton?: boolean;\n  link = false;\n  metadata;\n  patch: FieldItemPatchInterface;\n  route;\n  subLabel = '';\n  subValue = '';\n  tooltip = '';\n  textOverflow?: 'wrap' | 'ellipsis' = 'wrap';\n  truncate = 0;\n  value = '';\n  valueButton = false;\n  valueButtonDisplay?: string;\n  valueButtonDisplayTransformation?: any;\n  valueButtonDisabled = false;\n \n\n\n\n  constructor( params?: LabelConfigInterface ){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n    if( this.link || this.route ) this.html = 'link';\n    if( !this.patch ) this.patch = { field: '', duration: 750, path: '', disabled: false };\n    if( this.patch.displayIndicator !== false ) this.patch.displayIndicator = true;\n    if( this.icon ){\n      if( this.icon.length === 1 ){\n        this.icon = this.icon.toUpperCase();\n        this.iconType = 'sw';\n      }\n    }\n  }\n\n\n  setControl(){\n    // meet requirement\n  }\n}\n\n\nexport class MetadataConfig {\n  bubble = false;\n  value: string | number | any[] = '';\n  control: FormControl;\n  name;\n\n\n  constructor( name: string, value: string | number | any[] ){\n    this.name = name;\n    this.value = value;\n    this.control = new FormControl( value );\n  }\n}\n","import { FormControl, Validators } from '@angular/forms';\nimport { FieldItemPatchInterface } from '../../../../pop-common.model';\nimport { SetControl } from '../../../../pop-common-dom.models';\n\n\nexport interface ButtonConfigInterface {\n  bubble?: boolean;                         // fire events\n  color?: 'accent' | 'primary' | 'default'; // Color of Icon\n  conceal?: boolean;                        // Mask the button as dots\n  control?: FormControl;                    // The form control. If not passed one will be created.\n  disabled?: boolean;                       // Mark as disabled.\n  displayErrors?: boolean;                  // If Error messages should be displayed.\n  event?: string;                             // The name you want to give the event that is fired on click\n  helpText?: string;                     // On hover helper text.\n  hidden?: boolean;                         // Hide button.\n  icon?: string;                             // Angular material icon\n  iconColor?: 'accent' | 'primary' | 'default'; // Color of Icon\n  id?: string | number;                     // A number that will be included in the events so you know which field it came from.\n  label?: string;                           // Input label.\n  metadata?: object;                        // Array of objects. To be passed back on the event emitter and included in a patch if desired.\n  name?: string;                        // the entityId field name\n  patch?: FieldItemPatchInterface;          // If field should be auto-patched.\n  radius?: number;                          // Radius of button\n  size?: number;                             // Width and height of box\n  text?: number;                             // Width and height of box\n  tooltip?: string;                         // Tooltip for information to show when input is focused\n  type?: 'mat-button' | 'mat-raised-button' | 'mat-flat-button'; // HTML input type.\n  validators?: Array<Validators>;           // Array of Validators.\n  value?: string | number;                  // Initial value.\n  width?: number;                           // Width of the value and icon\n}\n\n\nexport class ButtonConfig implements SetControl {\n  // Defaults\n  control;\n  color: 'accent' | 'primary' | 'default' = 'default';\n  bubble = false;\n  displayErrors = true;\n  disabled = false;\n  event? = 'click';\n  helpText = '';\n  hidden = false;\n  icon = 'help_outline';\n  iconColor: 'accent' | 'primary' | 'default' = 'accent';\n  id = '';\n  label = '';\n  message = '';\n  metadata;\n  name = 'name';\n  patch;\n  radius = 2;\n  size = 35;\n  showTooltip = false;\n  text = 26;\n  tooltip = '';\n  type = 'mat-button';\n\n  // No Defaults\n\n  transformation;\n  validators;\n\n  triggerOnChange;\n  value = 'Button';\n  width = null;\n\n\n  constructor(params?: ButtonConfigInterface){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n    if( !this.patch ) this.patch = { field: '', path: '', disabled: false };\n    if( this.patch.displayIndicator !== false ) this.patch.displayIndicator = true;\n    if( this.size < 10 ) this.size = 10;\n    if( !this.control ) this.setControl();\n  }\n\n\n  setControl(){\n    this.control = ( this.disabled ? new FormControl({\n      value: this.value,\n      disabled: true\n    }) : new FormControl(this.value, ( this.validators ? this.validators : [] )) );\n  }\n}\n","import { Dictionary, FieldCustomSettingInterface } from '../../../../pop-common.model';\n\nexport const EmailFieldSetting = <Dictionary<FieldCustomSettingInterface>>{\n  unique_label: {\n    name: 'unique_label',\n    type: 'boolean',\n    defaultValue: true,\n  },\n  disabled: {\n    name: 'disabled',\n    type: 'boolean',\n    item: 'address',\n    defaultValue: false,\n  },\n  address_pattern: {\n    name: 'address_pattern',\n    item: 'address',\n    type: 'model',\n    model: 'pattern',\n    value: 'Email',\n  },\n  make_primary: {\n    name: 'make_primary',\n    type: 'fixed',\n    defaultValue: false,\n  },\n\n  email_primary: {\n    name: 'email_primary',\n    type: 'trait',\n    icon: 'email',\n    defaultValue: false,\n  },\n};\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { FieldParamInterface, PopBaseEventInterface } from '../../../../../../pop-common.model';\nimport { SwitchConfig } from '../../../../../base/pop-field-item/pop-switch/switch-config.model';\nimport { IsDefined} from '../../../../../../pop-common-utility';\n\n\n@Component({\n  selector: 'lib-field-switch-param',\n  template: `\n    <lib-pop-switch (events)=\"events.emit($event);\" [config]=param></lib-pop-switch>`,\n})\nexport class FieldSwitchParamComponent implements OnInit {\n  @Input() config: FieldParamInterface;\n  @Output() events: EventEmitter<PopBaseEventInterface> = new EventEmitter<PopBaseEventInterface>();\n\n  param: SwitchConfig;\n\n\n  ngOnInit(){\n    this.param = new SwitchConfig({\n      name: this.config.name,\n      label: this.config.label,\n      labelPosition: 'after',\n      value: IsDefined(this.config.value) ? this.config.value : this.config.defaultValue,\n      patch: this.config.patch,\n      facade: this.config.facade,\n      metadata: this.config.metadata ? this.config.metadata : {}\n    });\n  }\n}\n","import { Dictionary, FieldCustomSettingInterface } from '../../../../pop-common.model';\nimport {FieldSwitchParamComponent} from \"../../pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-switch-param.component\";\n\nexport const AddressFieldSetting = <Dictionary<FieldCustomSettingInterface>>{\n  show_name: null,\n  unique_label: {\n    name: 'unique_label',\n    type: 'boolean',\n    defaultValue: true,\n  },\n  primary_can_text: {\n    name: 'primary_can_text',\n    label: 'Primary Text',\n    type: 'primary',\n    defaultValue: true,\n  },\n  primary_can_call: {\n    name: 'primary_can_call',\n    label: 'Primary Call',\n    type: 'primary',\n    defaultValue: true,\n  },\n  make_primary: {\n    name: 'make_primary',\n    type: 'fixed',\n    defaultValue: false,\n  },\n  shipping_primary: {\n    name: 'shipping_primary',\n    type: 'trait',\n    icon: 'local_shipping',\n    defaultValue: false,\n  },\n  billing_primary: {\n    name: 'billing_primary',\n    type: 'trait',\n    icon: 'local_post_office',\n    component: FieldSwitchParamComponent,\n    defaultValue: false,\n  },\n  allow_canada: {\n    name: 'allow_canada',\n    type: 'boolean',\n    item: 'zip',\n    defaultValue: false,\n  },\n  auto_fill: {\n    name: 'auto_fill',\n    type: 'boolean',\n    item: 'zip',\n    component: FieldSwitchParamComponent,\n    defaultValue: true,\n  },\n};\n","import { Dictionary, FieldCustomSettingInterface, FieldItemOptions } from '../../../../pop-common.model';\n\nexport const PhoneFieldSetting = <Dictionary<FieldCustomSettingInterface>>{\n  unique_label: {\n    name: 'unique_label',\n    type: 'boolean',\n    defaultValue: true,\n  },\n\n  make_primary: {\n    name: 'make_primary',\n    type: 'fixed',\n    defaultValue: false,\n  },\n\n  text_primary: {\n    name: 'text_primary',\n    type: 'trait',\n    icon: 'sms',\n    defaultValue: false,\n  },\n\n  call_primary: {\n    name: 'call_primary',\n    type: 'trait',\n    icon: 'call',\n    defaultValue: false,\n  },\n};\n","import { Dictionary, FieldCustomSettingInterface } from '../../../../pop-common.model';\n\nexport const NameFieldSetting = <Dictionary<FieldCustomSettingInterface>>{\n  unique_label: {\n    name: 'unique_label',\n    type: 'boolean',\n    defaultValue: true,\n  },\n  disabled: {\n    name: 'disabled',\n    type: 'boolean',\n    defaultValue: false,\n  },\n  make_primary: {\n    name: 'make_primary',\n    type: 'fixed',\n    defaultValue: false,\n  },\n  name_primary: {\n    name: 'name_primary',\n    type: 'trait',\n    icon: 'api',\n    defaultValue: false,\n  },\n};\n","import { Dictionary, FieldCustomSettingInterface } from '../../../../pop-common.model';\n\nexport const InputFieldSetting = <Dictionary<FieldCustomSettingInterface>>{\n  unique_label: {\n    name: 'unique_label',\n    type: 'boolean',\n    defaultValue: true,\n  },\n  transformation: {\n    name: 'transformation',\n    type: 'transformation',\n    item: 'value',\n    defaultValue: '',\n    options: {\n      empty: { value: '', name: '--- Select One ---' },\n      values: [\n        { value: 'toTitleCase', name: 'Title Case' },\n        { value: 'toUpperCase', name: 'Upper Case' },\n        { value: 'toLowerCase', name: 'Lower Case' },\n        { value: 'toCurrency', name: 'Currency' },\n        { value: 'date', name: 'Date' },\n      ]\n    }\n  },\n};\n","import { Dictionary, FieldCustomSettingInterface } from '../../../../pop-common.model';\n\nexport const RadioFieldSetting = <Dictionary<FieldCustomSettingInterface>>{\n  unique_label: {\n    name: 'unique_label',\n    type: 'boolean',\n    defaultValue: true,\n  },\n};\n","import { Dictionary, FieldCustomSettingInterface } from '../../../../pop-common.model';\n\nexport const SwitchFieldSetting = <Dictionary<FieldCustomSettingInterface>>{\n  unique_label: {\n    name: 'unique_label',\n    type: 'boolean',\n    defaultValue: true,\n  },\n};\n","import { Dictionary, FieldCustomSettingInterface } from '../../../../pop-common.model';\n\nexport const SelectFieldSetting = <Dictionary<FieldCustomSettingInterface>>{\n  unique_label: {\n    name: 'unique_label',\n    type: 'boolean',\n    defaultValue: true,\n  },\n};\n","import { Dictionary, FieldCustomSettingInterface } from '../../../../pop-common.model';\n\nexport const CheckboxFieldSetting = <Dictionary<FieldCustomSettingInterface>>{\n  unique_label: {\n    name: 'unique_label',\n    type: 'boolean',\n    defaultValue: true,\n  },\n};\n","import { Dictionary, FieldCustomSettingInterface } from '../../../../pop-common.model';\n\nexport const TextareaFieldSetting = <Dictionary<FieldCustomSettingInterface>>{\n  disabled: {\n    name: 'disabled',\n    type: 'boolean',\n    item: 'address',\n    defaultValue: false,\n  },\n};\n","import { FormControl, ValidatorFn } from '@angular/forms';\nimport { FieldItemOption, FieldItemOptions, FieldItemPatchInterface } from '../../../../pop-common.model';\nimport { SetControl } from '../../../../pop-common-dom.models';\nimport { DynamicSort, IsArray, IsNumber } from '../../../../pop-common-utility';\n\n\nexport interface SelectFilterGroupInterface {\n  label: string;                   // Input label.\n  options: FieldItemOptions;          // Array of FieldOptions\n  all?: boolean;\n  indeterminate?: boolean;\n  groupFk: number;\n  visible?: number; // the count of  visible options within the group\n  open?: boolean;\n  selected?: number; // the count of selected visible options within the group\n}\n\n\nexport interface SelectFilterConfigInterface {\n  allLabel?: string;                                      // Set string to as label to indicate that all options are selected\n  all?: boolean;                                          // Set boolean to indicate that all options are selected\n  allValue?: boolean | string | number | null | any[];    // A custom value for when all options are selected\n  allowAll?: boolean;                                     // Set boolean to indicate whether to set check all option\n  bubble?: boolean;                                       // fire events\n  checkboxPosition?: string;                             // The position of the checkbox for a multiple selection.\n  collapsed?: boolean;                                    // Set to true on massive sets to show only option headers on render\n  control?: FormControl;                                  // The form control. If not passed one will be created.\n  disabled?: boolean;                                     // Mark as readonly.\n  displayErrors?: boolean;                                // If Error messages should be displayed.\n  emptyLabel?: string;                                    // Set string as label to when no options are selected\n  emptyValue?: boolean | string | number | null | any[];  // A custom value for when all options are unselected\n  float?: boolean;\n  filter?: boolean;                                       // Search filter.\n  facade?: boolean;                                       // Sets a flag that says this fieldItems really does not exist in the backend, and just pretend to hit the api\n  helpText?: string;                                   // On hover helper text.\n  height?: number;                                        // List height.\n  id?: number | string;                                   // A number that will be included in the events so you know which field it came from.\n  levelGap?: number;\n  label?: string;                                         // Input label.\n  metadata?: object;                                  // Array of objects. To be passed back on the event emitter and included in a patch if desired.\n  multiple?: boolean;                                     // If multiple is needed.\n  name?: string;                                      // the entityId field name\n  noInitialValue?:boolean;                                // Set to true to always have an empty value on load\n  options?: FieldItemOptions;                                // Array of FieldOptions\n  patch?: FieldItemPatchInterface;                                 // If field should be auto-patched.\n  patchGroupFk?: boolean;                                 // If value should contain groupFk, 3:12,4:12,5:13 <value:groupFk>\n  session?: boolean;                                      // If field value change should be stored to core entity\n  sessionPath?: string;                                  // If session path if not stored on root entity\n  sort?: boolean;                                         //  Set to true if you want options to be sorted in priority of sort_order, name\n  position?: 'above' | 'below';                           // list position\n  value?: Array<number | string> | number | string;                         // Initial value.\n  validators?: Array<ValidatorFn>;                        // Array of Validators.\n}\n\n\nexport class SelectFilterConfig implements SetControl {\n  allLabel = 'All';\n  all = false;\n  allValue;\n  allowAll = true;\n  bubble = false;\n  displayErrors = true;\n  collapsed = false;\n  checkboxPosition = 'before';\n  control: FormControl;\n  defaultHeight;\n  defaultMinHeight = 1;\n  disabled: boolean;\n  emptyValue;\n  emptyLabel;\n  facade = false;\n  float? = false;\n  filter = true;\n  groups: SelectFilterGroupInterface[];\n  helpText = '';\n  height = 200;\n  id: number | string;\n  label: string;\n  levelGap = 35;\n  message: string;\n  metadata;\n  minHeight = 50;\n  multiple = false;\n  name = 'name';\n  noInitialValue = false;\n  offset = null;\n  offsetSession = null;\n  options?: FieldItemOptions;\n  patch: FieldItemPatchInterface;\n  patchGroupFk = false;\n  position;\n  session?: boolean;\n  sessionPath?: string;\n  sort: boolean;\n  selectedOptions: any[];\n  strVal = '';\n  value?: Array<number | string> | number | string;\n  validators: Array<ValidatorFn>;\n  route;\n\n\n  constructor( params?: SelectFilterConfigInterface ){\n    this.setDefaultValues();\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n\n    this.value = this.multiple ? ( Array.isArray( this.value ) ? this.value : [] ) : ( +this.value ? this.value : null );\n\n    if( this.options.values.length > 1 ){\n      if( this.sort ){\n        if( typeof this.options.values[ 0 ].sort_order !== 'undefined' ){\n          this.options.values.sort( ( a, b ) => {\n            if( a.sort_order < b.sort_order ) return -1;\n            if( a.sort_order > b.sort_order ) return 1;\n            return 0;\n          } );\n        }else{\n          this.options.values.sort( ( a, b ) => {\n            if( a.name < b.name ) return -1;\n            if( a.name > b.name ) return 1;\n            return 0;\n          } );\n        }\n      }\n\n      if( this.options.values[ 0 ].group ){\n        this.groups = this.getOptionGroups();\n        if( this.groups.length < 2 ){\n          this.allowAll = false;\n        }\n      }else{\n        const str: string[] = [];\n        this.selectedOptions = [];\n        this.options.values.map( ( option ) => {\n          if( this.all ){\n            option.selected = true;\n            this.selectedOptions.push( option.value );\n          }else{\n            option.selected = IsArray( this.value ) ? ( ( <any[]>this.value ).includes( option.value ) ? true : false ) : false;\n            if( option.selected ){\n              this.selectedOptions.push( option.value );\n              str.push( option.name );\n            }\n          }\n          option.level = this.levelGap * option.level;\n        } );\n        const defaultGroup = {\n          label: '',\n          options: this.options,\n          groupFk: 0,\n          open: true,\n        };\n        this.groups = [ defaultGroup ];\n      }\n    }\n    if( !this.levelGap ) this.levelGap = 35;\n    this.defaultHeight = this.height;\n    this.all = IsArray( this.value ) ? ( this.options.values.length === ( <any[]>this.value ).length ) : false;\n\n    if( !this.position ) this.position = 'below';\n    if( !this.patch ) this.patch = { field: '', duration: 750, path: '', disabled: false };\n    if( this.patch.displayIndicator !== false ) this.patch.displayIndicator = true;\n    if( this.groups.length === 1 ) this.collapsed = false;\n    if( this.noInitialValue ) this.value = this.multiple ? [] : '';\n    if( !this.control ) this.setControl();\n  }\n\n\n  setControl(){\n    this.control = ( this.disabled ? new FormControl( {\n      value: this.value,\n      disabled: true\n    } ) : new FormControl( this.value, ( this.validators ? this.validators : [] ) ) );\n  }\n\n\n  private setDefaultValues(): void{\n    // this.helpText = '';\n    this.label = '';\n    this.message = '';\n    this.options = { values: [] };\n    this.disabled = false;\n    this.sort = false;\n    // this.showTooltip = false;\n    // this.tooltip = '';\n  }\n\n\n  private getOptionGroups(): SelectFilterGroupInterface[]{\n    this.selectedOptions = [];\n\n    const groups = {};\n    const list = [];\n    let defaultGroup = this.options.values[ 0 ].group;\n    this.options.values.map( ( option, index ) => {\n      if( typeof option.level === 'undefined' ) option.level = 0;\n      option.level = this.levelGap * option.level;\n      if( !option.group ) option.group = defaultGroup;\n      if( option.group in groups === false ){\n        groups[ option.group ] = <SelectFilterGroupInterface> {\n          label: option.group,\n          groupFk: option.groupFk,\n          options: {\n            values: [],\n            filtered: []\n          },\n          all: false,\n          open: true,\n          indeterminate: false,\n        };\n        defaultGroup = option.group;\n      }\n      if( this.all ){\n        option.selected = true;\n        this.selectedOptions.push( option.value );\n      }else{\n        option.selected = IsArray(this.value) ? (<any[]>this.value).includes( option.value ): false;\n        if( option.selected ){\n          this.selectedOptions.push( option.value );\n        }\n      }\n      groups[ option.group ].options.values.push( option );\n    } );\n    const count = Object.keys( groups ).length;\n    Object.keys( groups ).map( ( key ) => {\n      const group = groups[ key ];\n      // if(IsArray(group.options.values)){\n      //   // ToDo:: allow ordering by a sort order property\n      //   group.options.values = group.options.values.sort(DynamicSort('name'));\n      // }\n      if( count > 1 && this.collapsed ) group.open = false;\n      list.push( groups[ key ] );\n    } );\n    return list;\n  }\n\n\n  public resetSelection(): void{\n    this.selectedOptions = [];\n  }\n\n\n  public addSelectedOption( option: number ): void{\n    this.selectedOptions.push( option );\n  }\n}\n\n","import { AbstractControl, ValidatorFn } from '@angular/forms';\nimport { IsString } from '../pop-common-utility';\n\n// export class CustomValidators{\n\nexport function RegexPatterns( pattern ){\n  switch( pattern ){\n    case 'Alpha':\n      return { tester: /^[ a-zA-Z\\-\\_]+/g, replacer: /[^ a-zA-Z\\-\\_]+/g };\n    case 'AlphaNoSpace':\n      return { tester: /^[a-zA-Z]+/g, replacer: /[^a-zA-Z\\.\\-\\_]+/g };\n    case 'AlphaNoSpaceOnlyDash':\n      return { tester: /^[a-zA-Z]+/g, replacer: /[^a-zA-Z\\-]+/g };\n    case 'AlphaLowercaseNoSpace':\n      return { tester: /^[a-z]+/g, replacer: /[^a-z\\.\\-\\_]+/g };\n    case 'AlphaNumeric':\n      return { tester: /^[ a-zA-Z0-9\\.\\-\\_]+/g, replacer: /[^ a-zA-Z0-9\\.\\-\\_]+/g };\n    case 'AlphaNumericNoUnderscore':\n      return { tester: /^[ a-zA-Z0-9\\.\\-]+/g, replacer: /[^ a-zA-Z0-9\\.\\-]+/g };\n    case 'AlphaNumericNoSpace':\n      return { tester: /^[a-zA-Z0-9\\.\\-\\_]+/g, replacer: /[^a-zA-Z0-9\\.\\-\\_]+/g };\n    case 'NumericNoSpace':\n      return { tester: /^[0-9]+/g, replacer: /[^0-9]+/g };\n    case 'NoSpace':\n      return { tester: /[^ ]+/g, replacer: /[ ]+/g };\n    case 'Default':\n      return { tester: /^[a-zA-Z0-9\\/\\*\\?\\!\\%\\@\\$\\&\\,\\.\\-\\(\\) ]+/g, replacer: /[^a-zA-Z0-9\\/\\*\\?\\!\\%\\@\\$\\&\\,\\.\\-\\(\\) ]+/g };\n    case 'NumericWithSpace':\n      return { tester: /^[ 0-9]+/g, replacer: /[^ 0-9]+/g };\n    case 'Numeric':\n      return { tester: /^[0-9]+/g, replacer: /[^0-9]+/g };\n    case 'Phone':\n      return { tester: /@\"^[\\d-]+$\"/, replacer: /[^\\d-]+/g };\n    case 'Email':\n      return { tester: /^[^@]+@[a-zA-Z0-9._-]+\\\\.+[a-z._-]+$/, replacer: /[^@a-zA-Z0-9._-]+/g };\n    case 'Password':\n      return {\n        tester: /^(?=.*[A-Za-z])(?=.*\\d)(?=.*[$@$!%*#?&])[A-Za-z\\d$@$!%*#?&]{8,}$/,\n        replacer: /^(?=.*[A-Za-z])(?=.*\\d)(?=.*[$@$!%*#?&])[A-Za-z\\d$@$!%*#?&]{8,}$/\n      };\n    case 'Username':\n      return {\n        tester: /^\\S[a-zA-Z0-9._\\-]{2,}$/g,\n        replacer: /[^a-zA-Z0-9._\\-]+/g\n      };\n\n    case 'Url':\n      return {\n        tester: /https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)/,\n        replacer: /[^\\\\:a-zA-Z0-9._\\\\-\\\\/\\\\?\\\\=\\\\#\\\\&]+/g\n      };\n\n    case 'Zip':\n      return {\n        tester: /^(\\d{5}(-\\d{4})?|[A-Z]\\d[A-Z] *\\d[A-Z]\\d)$/,\n        replacer: /[^[0-9][A-Z][A-Z]$]+/g\n      };\n\n    // case 'NumericSigned': return '^-?[^0-9]+[0-9]';\n    // case 'float': return /[^.0-9]+/g;\n    // case 'float': return /^(.(?!\\d)|\\D)+/;\n    // case 'floatSigned': return '^-?[^0-9]+\\.?[0-9]';\n    default:\n      return { tester: /^[a-zA-Z0-9\\!\\%\\@\\$\\&\\.\\-\\(\\) ]+/g, replacer: /[^a-zA-Z0-9\\!\\%\\@\\$\\&\\.\\-\\(\\) ]+/g }; // default\n  }\n}\n\nexport function PatternValidation( pattern: string, response: 'value' | 'message' | 'test', value?: string ){\n\n  const regExPattern = RegexPatterns( pattern );\n\n  if( response === 'test' ){\n\n    return regExPattern.tester.test( value.trim() );\n\n  }else if( response === 'value' ){\n    if( typeof value !== 'string' ) value = '';\n    switch( pattern ){\n      case 'Alpha':\n        return value.replace( regExPattern.replacer, '' );\n      case 'AlphaNoSpace':\n        return value.replace( regExPattern.replacer, '' );\n      case 'AlphaNoSpaceOnlyDash':\n        return value.replace( regExPattern.replacer, '' );\n      case 'AlphaLowercaseNoSpace':\n        return value.replace( regExPattern.replacer, '' );\n      case 'AlphaNumeric':\n        return value.replace( regExPattern.replacer, '' );\n      case 'AlphaNumericNoUnderscore':\n        return value.replace( regExPattern.replacer, '' );\n      case 'AlphaNumericNoSpace':\n        return value.replace( regExPattern.replacer, '' );\n      case 'NoSpace':\n        return value.replace( regExPattern.replacer, '' );\n      case 'Numeric':\n        return value.replace( regExPattern.replacer, '' );\n      case 'NumericNoSpace':\n        return value.replace( regExPattern.replacer, '' );\n      case 'Phone':\n        return value.replace( regExPattern.replacer, '' );\n      case 'Email':\n        return value.replace( regExPattern.replacer, '' );\n      case 'Zip':\n        return value.replace( regExPattern.replacer, '' );\n      case 'Url':\n        return value.replace( regExPattern.replacer, '' );\n      default:\n        return value.replace( regExPattern.replacer, '' );\n    }\n\n  }else{\n\n    switch( pattern ){\n      case 'Alpha':\n        return 'Only letters are allowed.';\n      case 'AlphaNoSpace':\n        return 'Only letters are allowed.';\n      case 'AlphaLowercaseNoSpace':\n        return 'Only lowercase letters are allowed.';\n      case 'AlphaNumeric':\n        return 'Only letters and Numbers are allowed.';\n      case 'AlphaNumericNoUnderscore':\n        return 'Only letters and Numbers are allowed.';\n      case 'AlphaNumericNoSpace':\n        return 'Only letters and Numbers are allowed.';\n      case 'Blacklist':\n        return 'Not allowed';\n      case 'NoSpace':\n        return 'Spaces not allowed.';\n      case 'Numeric':\n        return 'Only numbers are allowed.';\n      case 'NumericNoSpace':\n        return 'Only numbers are allowed.';\n      case 'Phone':\n        return 'Invalid Phone.';\n      case 'Email':\n        return 'Invalid Email.';\n      case 'Password':\n        return 'Must contain a number, letter, special and be > 8 characters.';\n      case 'Username':\n        return 'Must contain only A-Z 0-9 . - _';\n      case 'Url':\n        return 'Must be a valid url.';\n      default:\n        return 'Invalid characters.';\n    }\n  }\n}\n\nexport function ValidateBlacklist( blacklist: string[] ): ValidatorFn{\n  return ( control: AbstractControl ): { alpha: { message: string | boolean } } | null => {\n    let forbidden = false;\n    for( const s of blacklist ){\n      if( s === control.value ){\n        forbidden = true;\n      }\n    }\n    return forbidden ? { alpha: { message: PatternValidation( 'Blacklist', 'message' ) } } : null;\n  };\n}\n\nexport function ValidateAlpha( control: AbstractControl ){\n  const pattern = RegexPatterns( 'Alpha' );\n  if( !pattern.tester.test( control.value.trim() ) ) return { alpha: { message: PatternValidation( 'Alpha', 'message' ) } };\n  return null;\n}\n\nexport function ValidateAlphaNoSpace( control: AbstractControl ){\n  const pattern = RegexPatterns( 'AlphaNoSpace' );\n  if( !pattern.tester.test( control.value.trim() ) ) return { alpha: { message: PatternValidation( 'AlphaNoSpace', 'message' ) } };\n  return null;\n}\n\nexport function ValidateAlphaLowercaseNoSpace( control: AbstractControl ){\n  const pattern = RegexPatterns( 'AlphaLowercaseNoSpace' );\n  if( !pattern.tester.test( control.value.trim() ) ) return { alpha: { message: PatternValidation( 'AlphaLowercaseNoSpace', 'message' ) } };\n  return null;\n}\n\nexport function ValidateAlphaNumeric( control: AbstractControl ){\n  const pattern = RegexPatterns( 'AlphaNumeric' );\n  if( !pattern.tester.test( control.value.trim() ) ) return { alpha: { message: PatternValidation( 'AlphaNumeric', 'message' ) } };\n  return null;\n}\n\nexport function ValidateAlphaNumericNoUnderscore( control: AbstractControl ){\n  const pattern = RegexPatterns( 'AlphaNumericNoUnderscore' );\n  if( !pattern.tester.test( control.value.trim() ) ) return { alpha: { message: PatternValidation( 'AlphaNumericNoUnderscore', 'message' ) } };\n  return null;\n}\n\nexport function ValidateAlphaNumericNoSpace( control: AbstractControl ){\n  const pattern = RegexPatterns( 'AlphaNumericNoSpace' );\n  if( !pattern.tester.test( control.value.trim() ) ) return { alpha: { message: PatternValidation( 'AlphaNumericNoSpace', 'message' ) } };\n  return null;\n}\n\nexport function ValidateNumeric( control: AbstractControl ){\n  const pattern = RegexPatterns( 'Numeric' );\n  if( !pattern.tester.test( control.value.trim() ) ) return { numeric: { message: PatternValidation( 'Numeric', 'message' ) } };\n  return null;\n}\n\nexport function ValidateNumericNoSpace( control: AbstractControl ){\n  const pattern = RegexPatterns( 'NumericNoSpace' );\n  if( !pattern.tester.test( control.value ) ) return { numeric: { message: PatternValidation( 'NumericNoSpace', 'message' ) } };\n  return null;\n}\n\nexport function ValidateUsername( control: AbstractControl ){\n  const pattern = RegexPatterns( 'Username' );\n  if( !pattern.tester.test( control.value ) ) return { username: { message: PatternValidation( 'Username', 'message' ) } };\n  return null;\n}\n\nexport function ValidateEmail( control: AbstractControl ){\n  const pattern = RegexPatterns( 'Email' );\n  if( !pattern.tester.test( control.value ) ) return { email: { message: PatternValidation( 'Email', 'message' ) } };\n  return null;\n}\n\n\nexport function ValidatePassword( control: AbstractControl ){\n  const pattern = RegexPatterns( 'Password' );\n  if( !pattern.tester.test( control.value ) ) return { password: { message: PatternValidation( 'Password', 'message' ) } };\n  return null;\n}\n\nexport function ValidatePhone( control: AbstractControl ){\n  const pattern = RegexPatterns( 'Phone' );\n  if( !pattern.tester.test( control.value ) ) return { phone: { message: PatternValidation( 'Phone', 'message' ) } };\n  return null;\n}\n\n\nexport function ValidateZip( control: AbstractControl ){\n  const pattern = RegexPatterns( 'Zip' );\n  if( !pattern.tester.test( control.value ) ) return { zip: { message: PatternValidation( 'Zip', 'message' ) } };\n  return null;\n}\n\nexport function ValidateUrl( control: AbstractControl ){\n  const pattern = RegexPatterns( 'Url' );\n  let value = control.value;\n  if( IsString( value, true ) ) value = value.trim();\n  if( !pattern.tester.test( value ) ) return { url: { message: PatternValidation( 'Url', 'message' ) } };\n  return null;\n}\n\n\nexport function MatchPassword( control: AbstractControl ){\n  const password = control.get( 'password' ).value; // to get value in input tag\n  const password_confirmation = control.get( 'password_confirmation' ).value; // to get value in input tag\n  if( password !== password_confirmation ){\n    control.get( 'password_confirmation' ).setErrors( { MatchPassword: true } );\n    if( control.get( 'password_confirmation' ).value ){\n      control.get( 'password_confirmation' ).markAsDirty();\n    }\n  }else{\n    return true;\n  }\n}\n\nexport function MatchEmail( control: AbstractControl ){\n  const email = control.get( 'email' ).value; // to get value in input tag\n  const email_confirmation = control.get( 'email_confirmation' ).value; // to get value in input tag\n  if( email !== email_confirmation ){\n    control.get( 'email_confirmation' ).setErrors( { MatchEmail: true } );\n    if( control.get( 'email_confirmation' ).value ){\n      control.get( 'email_confirmation' ).markAsDirty();\n    }\n  }else{\n    return true;\n  }\n}\n\nexport function ValidationErrorMessages( validationError: object ): string{\n  let message = '';\n  for( const validation in validationError ){\n    if( !validationError.hasOwnProperty( validation ) ) continue;\n    if( typeof validationError[ validation ].message === 'string' ){\n      message += validationError[ validation ].message + ' ';\n    }else{\n      switch( validation ){\n        case 'min':\n          message += `Must be greater than or equal to ${validationError[ validation ].min}. `;\n          break;\n        case 'max':\n          message += `Must be less than or equal to ${validationError[ validation ].max}. `;\n          break;\n        case 'required':\n          message += 'Field is required.';\n          break;\n        case 'email':\n          message += 'Invalid email. ';\n          break;\n        case 'unique':\n          message += 'The current value is already in use.';\n          break;\n        case 'minlength':\n          message += `To short, minimum ${validationError[ validation ].requiredLength} characters. `;\n          break;\n        case 'maxlength':\n          message += `To long, maximum ${validationError[ validation ].requiredLength} characters. `;\n          break;\n        case 'pattern':\n          message += 'Invalid characters. ';\n          break;\n        case 'MatchPassword':\n          message = `This field must match the password.`;\n          break;\n        case 'MatchEmail':\n          message = `This field must match the email.`;\n          break;\n        default:\n          message += 'Invalid. ';\n          break;\n      }\n    }\n  }\n  return message.trim();\n}\n\n// }\n","import { FormControl } from '@angular/forms';\nimport { SetControl } from '../../../../pop-common-dom.models';\n\n\nexport interface TextConfigInterface {\n  border?: boolean;\n  className?: string;\n  control?: FormControl;          // The form control. If not passed one will be created.\n  header?: boolean;\n  id?: number | string;           // A number that will be included in the events so you know which field it came from.\n  name?: string;\n  noInitialValue?: boolean;                 // Set to true to always have an empty value on load\n  tabOnEnter?: boolean;\n  padding?: number;                         // padding adjustment\n  size?: number;                            // font size adjustment\n  textOverflow?: 'wrap' | 'ellipsis';       // Set the text overflow behavior, default wrap\n  value?: boolean | number | string;        // Initial value.\n  warning?:boolean;\n\n}\n\n\nexport class TextConfig implements SetControl {\n\n  border = false;\n  className = 'theme-foreground-base';\n  control: FormControl;\n  header? = false;\n  id: number | string;\n  message = '';\n  noInitialValue = false;\n  name? = 'name';\n  setValue;\n  padding = 5;\n  textOverflow = 'wrap';\n  value: boolean | number | string = false;\n  warning? = true;\n\n\n  constructor( params?: TextConfigInterface ){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n    if( !this.control ) this.setControl();\n  }\n\n\n  setControl(){\n    this.control = new FormControl( this.value );\n  }\n\n}\n","import { FormControl, ValidatorFn } from '@angular/forms';\nimport { SelectFilterGroupInterface } from '../pop-select-filter/select-filter-config.model';\nimport { EventCallback, FieldItemOption, FieldItemOptions, FieldItemPatchInterface } from '../../../../pop-common.model';\nimport { SetControl } from '../../../../pop-common-dom.models';\nimport { ArrayKeyBy, ArrayMapSetter, IsArray, IsDefined, IsUndefined } from '../../../../pop-common-utility';\n\n\nexport interface SelectListGroupInterface {\n  label: string;                   // Input label.\n  options: FieldItemOptions;          // Array of FieldOptions\n  all?: boolean;\n  indeterminate?: boolean;\n  groupFk?: number | string;\n  visible?: number; // the count of  visible options within the group\n  selected?: number; // the count of selected visible options within the group\n  open?: boolean;\n}\n\n\nexport interface SelectListConfigInterface {\n  all?: boolean;                    // Set boolean to indicate that all options are selected\n  allLabel?: string;                // Set string to as label to indicate that all options are selected\n  allowAll?: boolean;               // Set boolean to indicate whether to set check all option\n  allowGroupAll?: boolean;               // Set boolean to indicate whether to set check all option\n  allValue?: boolean | string | number | null | any[];       // A custom value for when all options are selected\n  allOverlay?: boolean;\n  allOverlayEnabled?: boolean;\n  allOverlayLabel?: string;\n  allOverlayMessage?: string;\n  allOverlayCallback?: EventCallback;\n  bubble?: boolean;                 // fire events\n  checkboxPosition?: string;       // The position of the checkbox for a multiple selection.\n  control?: FormControl;            // The form control. If not passed one will be created.\n  collapsed?: boolean;              // Set to true on massive sets to show only option headers on render\n  disabledIds?: number[];\n  disabled?: boolean;               // Mark as readonly.\n  displayErrors?: boolean;          // If Error messages should be displayed.\n  emptyValue?: boolean | string | number | null | any[];     // A custom value for when all options are unselected\n  empty?: 'ConvertEmptyToNull' | 'ConvertEmptyToZero';\n  emptyLabel?: string;              // Set string as label to when no options are selected\n  facade?: boolean;                 // Sets a flag that says this fieldItems really does not exist in the backend, and just pretend to hit the api\n  filter?: boolean;                 // Search filter.\n  helpText?: string;             // On hover helper text.\n  height?: number;                  // List height.\n  id?: number | string;             // A number that will be included in the events so you know which field it came from.\n  label?: string;                   // Input label.\n  levelGap?: number;\n  mode?: FieldItemOption[];\n  minHeight?: number;                  // List height.\n  multiple?: boolean;               // If multiple is needed.\n  noInitialValue?: boolean;          // Set to true to always have an empty value on load\n  name?: string;                    // the entityId field name\n  options?: FieldItemOptions;          // Array of FieldOptions\n  outline?: boolean;                // Show border around option container\n  patch?: FieldItemPatchInterface;           // If field should be auto-patched.\n  patchGroupFk?: boolean;           // If value should contain groupFk, 3:12,4:12,5:13 <value:groupFk>\n  required?: boolean;                // If field value change should be stored to core entity\n  session?: boolean;                // If field value change should be stored to core entity\n  sessionPath?: string;                // If session path if not stored on root entity\n  sort?: boolean;                   //  Set to true if you want options to be sorted in priority of sort_order, name\n  value?: Array<number | string> | number | string;  // Initial value.\n  validators?: Array<ValidatorFn>;  // Array of Validators.\n}\n\n\nexport class SelectListConfig implements SetControl {\n  allValue;\n  allLabel = 'All';\n  allowAll = true;\n  allowGroupAll? = true;\n  allOverlay? = false;\n  allOverlayEnabled? = false;\n  allOverlayLabel? = '';\n  allOverlayMessage? = '';\n  allOverlayCallback?: EventCallback;\n  all = false;\n  bubble = false;\n  checkboxPosition = 'before';\n  collapsed = false;\n  control: FormControl;\n  column = 'column';\n  displayErrors = true;\n  disableOption;\n  defaultHeight = null;\n  defaultMode:string|number;\n  disabled: boolean;\n  disabledIds = [];\n  enableOption;\n  emptyValue;\n  emptyLabel;\n  facade = false;\n  filter = true;\n  focusSearch;\n  groups: SelectListGroupInterface[];\n  helpText = '';\n  height = null;\n  id: number | string;\n  levelGap = 35;\n  label = '';\n  mode?: FieldItemOption[];\n  message: string;\n  multiple = false;\n  minHeight = null;\n  noInitialValue = false;\n  outline = true;\n  options?: FieldItemOptions;\n  patch: FieldItemPatchInterface;\n  patchGroupFk = false;\n  required?: boolean;\n  route;\n  session?: boolean;\n  sessionPath?: string;\n  sort: boolean;\n  setDisabled;\n  strVal = '';\n  setActive;\n  setHeight;\n  clearSelected;\n  selectedOptions: any[];\n  triggerOnChange;\n  value?: Array<number | string> | number | string;\n  validators: Array<ValidatorFn>;\n\n\n  constructor( params?: SelectListConfigInterface ){\n    this.setDefaultValues();\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n    const mode = this.mode;\n    const hasMode = IsArray( this.mode, true ) ? true : false;\n    this.defaultMode = hasMode ? this.mode[ 0 ].value : 0;\n    this.value = Array.isArray( this.value ) ? this.value : [];\n    if( this.options.values.length > 1 ){\n      if( this.sort ){\n        if( typeof this.options.values[ 0 ].sort_order !== 'undefined' ){\n          this.options.values.sort( ( a, b ) => {\n            if( a.sort_order < b.sort_order ) return -1;\n            if( a.sort_order > b.sort_order ) return 1;\n            return 0;\n          } );\n        }else{\n          this.options.values.sort( ( a, b ) => {\n            if( a.name < b.name ) return -1;\n            if( a.name > b.name ) return 1;\n            return 0;\n          } );\n        }\n      }\n\n      if( this.options.values[ 0 ].group ){\n        this.groups = this.getOptionGroups();\n      }else if( this.options.values.length ){\n        let str: string[] = [];\n        this.selectedOptions = [];\n        this.options.values.map( ( option ) => {\n          if( hasMode && IsUndefined( option.mode ) ) option.mode = this.defaultMode;\n          option.selected = ( <any[]>this.value ).includes( option.value ) ? true : false;\n          if( option.selected ){\n            this.selectedOptions.push( option.value );\n            str.push( option.name );\n          }\n          option.indentation = ( +this.levelGap ) * ( option.level + 1 );\n          str = str.sort();\n          this.strVal = str.join( ', ' );\n        } );\n        if( this.options.empty ) this.options.values.unshift( { value: this.options.empty.value, name: this.options.empty.name } );\n        const defaultGroup = {\n          label: '',\n          options: this.options,\n          open: true\n        };\n        this.groups = [ defaultGroup ];\n      }else{\n        this.groups = [];\n      }\n    }\n    if( !this.groups ) this.groups = [];\n    if( !this.levelGap ) this.levelGap = 35;\n    this.defaultHeight = this.height;\n\n    let allGroupsSelected = true;\n    const selected = this.selectedOptions;\n    let groupSelected;\n    if( this.all ){\n      this.selectedOptions = [];\n      this.groups.map( ( group ) => {\n        group.all = true;\n        this.selectedOptions = group.options.values.map( ( option ) => {\n          option.selected = true;\n          this.selectedOptions.push( option.value );\n        } );\n      } );\n      this.strVal = this.allLabel;\n    }else{\n      let str: string[] = [];\n      this.selectedOptions = [];\n      const isGroups = this.groups.length > 1;\n\n      this.groups.map( ( group: SelectFilterGroupInterface ) => {\n        if( group.all ){\n          if( isGroups ){\n            str.push( group.label + ' (All)' );\n          }else{\n            str.push( 'All' );\n          }\n          group.options.values.filter( option => {\n            this.selectedOptions.push( option.value );\n          } );\n        }else{\n          groupSelected = group.options.values.filter( ( option ) => {\n            return option.selected;\n          } );\n          if( groupSelected && groupSelected.length ){\n            if( groupSelected.length === group.options.values.length ) group.all = true;\n            if( group.all ){\n              if( isGroups ){\n                str.push( group.label + ' (All)' );\n              }else{\n                str.push( 'All' );\n              }\n              group.options.values.filter( option => {\n                this.selectedOptions.push( option.value );\n              } );\n            }else{\n              allGroupsSelected = false;\n              if( isGroups && groupSelected.length ){\n                str.push( group.label + ` (${groupSelected.length} of ${group.options.values.length})` );\n                groupSelected.map( ( option: any ) => {\n                  this.selectedOptions.push( option.value );\n                } );\n              }else{\n                groupSelected.map( ( option: any ) => {\n                  this.selectedOptions.push( option.value );\n                  str.push( option.name );\n                } );\n              }\n            }\n          }else{\n            group.all = false;\n            allGroupsSelected = false;\n          }\n        }\n      } );\n      if( !this.selectedOptions.length ){\n        allGroupsSelected = false;\n        if( this.emptyLabel ){\n          str = [ this.emptyLabel ];\n        }\n      }else if( !this.all && allGroupsSelected ){\n        str = [ 'All' ];\n      }\n      this.all = allGroupsSelected;\n      str = str.sort();\n      this.strVal = str.join( ', ' );\n    }\n\n    delete this.options;\n    delete this.value;\n\n    if( !this.patch ) this.patch = { field: '', duration: 750, path: '', disabled: false };\n    if( this.patch.displayIndicator !== false ) this.patch.displayIndicator = true;\n    if( this.groups.length === 1 ) this.collapsed = false;\n    if( this.noInitialValue ) this.value = this.multiple ? [] : '';\n    if( !this.control ) this.setControl();\n    if( !( IsDefined( this.value, false ) ) ) this.value = this.multiple ? [] : '';\n\n    if( this.allOverlay && !this.allOverlayLabel ){\n      this.allOverlayLabel = 'All Access';\n    }\n  }\n\n\n  setControl(){\n    this.control = ( this.disabled ? new FormControl( {\n      value: this.value,\n      disabled: false\n    } ) : new FormControl( this.value, ( this.validators ? this.validators : [] ) ) );\n  }\n\n\n  private setDefaultValues(): void{\n    // this.helpText = '';\n    this.label = '';\n    this.message = '';\n    this.options = { values: [] };\n    this.disabled = false;\n    this.sort = false;\n    // this.showTooltip = false;\n    // this.tooltip = '';\n  }\n\n\n  private getOptionGroups(): SelectListGroupInterface[]{\n    this.selectedOptions = [];\n\n    const groups = {};\n    const list = [];\n    let defaultGroup = this.options.values[ 0 ].group;\n    let defaultGroupFk = this.options.values[ 0 ].groupFk;\n    this.options.values.map( ( option, index ) => {\n      if( typeof option.level === 'undefined' ) option.level = 0;\n      if( this.mode && IsUndefined( option.mode ) ) option.mode = this.defaultMode;\n      option.indentation = ( +this.levelGap ) * ( option.level + 1 );\n      if( !option.group ) option.group = defaultGroup;\n      if( option.group in groups === false ){\n        groups[ option.group ] = <SelectListGroupInterface> {\n          label: option.group,\n          options: { values: [] },\n          all: false,\n          indeterminate: false,\n          open: true,\n          groupFk: option.groupFk,\n        };\n        defaultGroup = option.group;\n        defaultGroupFk = option.groupFk;\n      }\n      option.selected = ( <any[]>this.value ).includes( option.value );\n      if( option.selected ){\n        this.selectedOptions.push( option.value );\n      }\n      groups[ option.group ].options.values.push( option );\n    } );\n\n    const count = Object.keys( groups ).length;\n    Object.keys( groups ).map( ( key ) => {\n      let indeterminate = false;\n      let all = true;\n      groups[ key ].options.values.some( option => {\n        if( !option.selected ){\n          all = false;\n          indeterminate = true;\n          return true;\n        }\n      } );\n      groups[ key ].all = all;\n      groups[ key ].indeterminate = indeterminate;\n      if( count > 1 && this.collapsed ) groups[ key ].open = false;\n      list.push( groups[ key ] );\n    } );\n    const countLabel = this.selectedOptions.length > 1 ? `[${this.selectedOptions.length}] ` : '';\n\n    return list;\n  }\n\n\n  public resetSelection(): void{\n    this.selectedOptions = [];\n  }\n\n\n  public addSelectedOption( option: number ): void{\n    this.selectedOptions.push( option );\n  }\n}\n\n","import { FormControl, Validators } from '@angular/forms';\nimport { FieldItemPatchInterface } from '../../../../pop-common.model';\nimport { SetControl } from '../../../../pop-common-dom.models';\n\nexport type DateFilterPredicate = ( d: Date ) => boolean;\n\n\n\n\nexport interface DatePickerConfigInterface {\n  bubble?: boolean;                                 // fire events\n  disabled?: boolean;                               // Mark as disabled.\n  displayErrors?: boolean;                          // If Error messages should be displayed.\n  name?: string;                                // the entityId field name\n  facade?: boolean;\n  filterPredicate?: string | DateFilterPredicate;   // A function to remove certain dates\n  helpText?: string;                             // On hover helper text.\n  id?: string | number;                             // A number that will be included in the events so you know which field it came from.\n  label?: string;                                   // Date label.\n  min?: string | number | Date;                            // Field multiple_min date.\n  max?: string | number | Date;                            // Field multiple_max date.\n  metadata?: object;                                // Array of objects. To be passed back on the event emitter and included in a patch if desired.\n  noInitialValue?: boolean;                          // Set to true to always have an empty value on load\n  required?: boolean;\n  session?: boolean;                                // If field value change should be stored to core entity\n  sessionPath?: string;                            // If session path if not stored on root entity\n  patch?: FieldItemPatchInterface;                           // If field should be auto-patched.\n  tooltip?: string;                                 // Tooltip for information to show when input is focused\n  transformation?: string;                          // Transform the input to match a specific case of format\n  validators?: Array<Validators>;                   // Array of Validators.\n  value?: string | number;                          // Initial value\n  options?: object;                                 //\n}\n\n\nexport class DatePickerConfig implements SetControl {\n\n\n  // Defaults\n  bubble = false;\n  control: FormControl;\n  displayErrors = true;\n  disabled = false;\n  facade?: boolean;\n  filterPredicate = null;\n  helpText = '';\n  id = '';\n  label = '';\n  min = null;\n  max = null;\n  message = '';\n  metadata;\n  name = 'name';\n  noInitialValue = false;\n  patch: FieldItemPatchInterface;\n  required?: boolean;\n  session?: boolean;\n  sessionPath?: string;\n  showTooltip = false;\n  transformation;\n  tooltip = '';\n  value;\n  clearMessage;\n  triggerOnChange;\n\n  // No Defaults\n\n  validators;\n\n\n  constructor( params?: DatePickerConfigInterface ){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n    if( this.value ) this.value = new Date( this.value );\n    if( typeof this.min === 'string'){\n      this.min = new Date( this.min );\n    }\n    if( isNaN( this.max ) === false ){\n      const maxDate = new Date();\n      // maxDate.setDate(maxDate.getDate() - 1);\n      maxDate.setDate( maxDate.getDate() + parseInt( this.max, 10 ) );\n      this.max = new Date( maxDate );\n    }\n    if( !this.patch ) this.patch = { field: '', duration: 750, path: '', disabled: false, businessId: 0 };\n    if( this.patch.displayIndicator !== false ) this.patch.displayIndicator = true;\n    if( this.noInitialValue ) this.value = '';\n    if( !this.control ) this.setControl();\n  }\n\n\n  setControl(){\n    this.control = <FormControl> ( this.disabled ? new FormControl( {\n      value: this.value,\n      disabled: true\n    } ) : new FormControl( this.value, ( this.validators ? this.validators : [] ) ) );\n  }\n}\n","import { SelectListConfig } from '../pop-select-list/select-list-config.model';\nimport { FieldItemPatchInterface } from '../../../../pop-common.model';\nimport { SetControl } from '../../../../pop-common-dom.models';\nimport { FormControl, ValidatorFn } from '@angular/forms';\n\n\nexport interface SelectModalConfigInterface {\n  bubble?: boolean;                 // Bubble Events\n  disabled?: boolean;               // Mark as readonly.\n  displayErrors?: boolean;         // If Error messages should be displayed.\n  facade?: boolean;                                       // Sets a flag that says this fieldItems really does not exist in the backend, and just pretend to hit the api\n  header?: string;                   // Header of the modal\n  label?: string;                 // label of input trigger field\n  subLabel?: string;                 // label of input trigger field\n  list?: SelectListConfig;           // the selection list inside the modal\n  patch?: FieldItemPatchInterface;            // If field should be auto-patched.\n  metadata?: object;                                  // Array of objects. To be passed back on the event emitter and included in a patch if desired.\n  noInitialValue?: boolean;                                // Set to true to always have an empty value on load\n  value?: Array<number | string> | number | string;                         // Initial value.\n  validators?: Array<ValidatorFn>;\n}\n\n\nexport class SelectModalConfig implements SetControl {\n  control: FormControl;\n  displayErrors? = true;\n  disabled = false;\n  facade? = false;                                       // Sets a flag that says this fieldItems really does not exist in the backend, and just pretend to hit the api\n  header = '';\n  list: SelectListConfig;\n  label = '';\n  metadata?: object;                                  // Array of objects. To be passed back on the event emitter and included in a patch if desired.\n  noInitialValue = false;                                // Set to true to always have an empty value on load\n  patch: FieldItemPatchInterface;\n  triggerOpen;\n  validators?: Array<ValidatorFn>;\n  value?: Array<number | string> | number | string;                         // Initial value.\n\n\n  constructor( params?: SelectModalConfigInterface ){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n    // if( !this.label ) this.label = 'Options';\n    if( !this.patch ) this.patch = { field: '', duration: 750, path: '', disabled: false, json: false };\n    if( this.patch.displayIndicator !== false ) this.patch.displayIndicator = true;\n    if( this.noInitialValue ) this.value = this.list.multiple ? [] : '';\n    if( !this.control ) this.setControl();\n  }\n\n\n  setControl(){\n    this.control = ( this.disabled ? new FormControl( {\n      value: this.value,\n      disabled: false\n    } ) : new FormControl( this.value, ( this.validators ? this.validators : [] ) ) );\n  }\n}\n\n","import {\n  CoreConfig,\n  Dictionary,\n  Entity,\n  EntityParams,\n  FieldItemModelInterface,\n  PopBaseEventInterface,\n  PopPipe,\n  PopLog,\n  ServiceRoutesInterface, PopApp, SetPopRouteAliasMap, PopRouteAliasMap, FieldItemInterface, FieldInterface\n} from '../../pop-common.model';\nimport {\n  ArrayKeyBy,\n  CleanObject,\n  ConvertArrayToOptionList,\n  DeepCopy, DeepMerge, GetRouteAlias,\n  InterpolateString,\n  IsArray, IsDefined,\n  IsNumber,\n  IsObject,\n  IsString, IsUndefined, JsonCopy, PopTransform, SpaceToHyphenLower,\n  StorageGetter, StringReplaceAll,\n  TitleCase,\n  ToObject\n} from '../../pop-common-utility';\nimport {TabButtonInterface, TabConfig, TabMenuConfig} from '../base/pop-tab-menu/tab-menu.model';\nimport {SideBySideConfig, SideBySideInterface} from '../base/pop-side-by-side/pop-side-by-side.model';\nimport {Validator, Validators} from '@angular/forms';\nimport {SelectConfig, SelectConfigInterface} from '../base/pop-field-item/pop-select/select-config.model';\nimport {\n  SelectMultiConfig,\n  SelectMultiConfigInterface\n} from '../base/pop-field-item/pop-select-multi/select-mulit-config.model';\nimport {InputConfig, InputConfigInterface} from '../base/pop-field-item/pop-input/input-config.model';\nimport {NumberConfig, NumberConfigInterface} from '../base/pop-field-item/pop-number/number-config.model';\nimport {DateConfig, DateConfigInterface} from '../base/pop-field-item/pop-date/date-config.model';\nimport {TimeConfig, TimeConfigInterface} from '../base/pop-field-item/pop-time/time-config.model';\nimport {CheckboxConfig, CheckboxConfigInterface} from '../base/pop-field-item/pop-checkbox/checkbox-config.model';\nimport {SwitchConfig, SwitchConfigInterface} from '../base/pop-field-item/pop-switch/switch-config.model';\nimport {MinMaxConfig, MinMaxConfigInterface} from '../base/pop-field-item/pop-min-max/min-max.models';\nimport {RadioConfig, RadioConfigInterface} from '../base/pop-field-item/pop-radio/radio-config.model';\nimport {TextareaConfig, TextareaConfigInterface} from '../base/pop-field-item/pop-textarea/textarea-config.model';\nimport {LabelConfig, LabelConfigInterface, MetadataConfig} from '../base/pop-field-item/pop-label/label-config.model';\nimport {ButtonConfig, ButtonConfigInterface} from '../base/pop-field-item/pop-button/button-config.model';\nimport {Route, Routes} from '@angular/router';\nimport {EmailFieldSetting} from './pop-entity-field/pop-entity-email/email.setting';\nimport {AddressFieldSetting} from './pop-entity-field/pop-entity-address/address.setting';\nimport {PhoneFieldSetting} from './pop-entity-field/pop-entity-phone/phone.setting';\nimport {NameFieldSetting} from './pop-entity-field/pop-entity-name/name.setting';\nimport {InputFieldSetting} from './pop-entity-field/pop-entity-input/input.settings';\nimport {RadioFieldSetting} from './pop-entity-field/pop-entity-radio/radio.setting';\nimport {SwitchFieldSetting} from './pop-entity-field/pop-entity-switch/switch.setting';\nimport {SelectFieldSetting} from './pop-entity-field/pop-entity-select/select.setting';\nimport {CheckboxFieldSetting} from './pop-entity-field/pop-entity-checkbox/checkbox.setting';\nimport {TextareaFieldSetting} from './pop-entity-field/pop-entity-textarea/textarea.setting';\nimport {\n  SelectFilterConfig,\n  SelectFilterConfigInterface\n} from '../base/pop-field-item/pop-select-filter/select-filter-config.model';\nimport {ValidatePassword, ValidatePhone, ValidateUrl, ValidateUsername} from '../../services/pop-validators';\nimport {TextConfig, TextConfigInterface} from '../base/pop-field-item/pop-text/text-config.model';\nimport {\n  SelectListConfig,\n  SelectListConfigInterface\n} from '../base/pop-field-item/pop-select-list/select-list-config.model';\nimport {\n  DatePickerConfig,\n  DatePickerConfigInterface\n} from '../base/pop-field-item/pop-datepicker/datepicker-config.model';\nimport {\n  SelectModalConfig,\n  SelectModalConfigInterface\n} from \"../base/pop-field-item/pop-select-modal/select-modal-config.model\";\nimport {isArray} from \"rxjs/internal-compatibility\";\n\n\n/**\n * A helper method that will build out TabMenuConfig off of an entityConfig\n * @param entityConfig\n * @param tabs\n */\nexport function GetTabMenuConfig(core: CoreConfig, tabs: TabConfig[] = []): TabMenuConfig {\n  const tabMenuConfig = new TabMenuConfig({\n    name: DetermineEntityName(core.entity),\n    goBack: true,\n    portal: false,\n    tabs: tabs,\n    buttons: GetTabMenuButtons(core),\n  });\n  return tabMenuConfig;\n}\n\n/**\n * Determine the buttons that should be shown for this entity\n * @param core\n */\nexport function GetTabMenuButtons(core: CoreConfig) {\n  let buttons = [];\n  const defaultButtons = <TabButtonInterface[]>[\n    {id: 'clone', name: 'Clone', accessType: 'can_update', hidden: false},\n    // { id: 'archive', name: 'Archive', accessType: 'can_update', hidden: true },\n    // { id: 'activate', name: 'Activate', accessType: 'can_update', hidden: true },\n    {id: 'delete', name: 'Delete', accessType: 'can_delete', hidden: true},\n    {id: 'close', name: 'Close', hidden: false},\n  ];\n  if (IsObject(core.repo.model.table.button, true)) {\n    buttons = defaultButtons.filter((button) => {\n\n      if (button.id === 'clone' && !core.repo.model.menu.button.clone) return false;\n      // if( button.id === 'archive' && !core.repo.model.menu.button.archive ) return false;\n      // if( button.id === 'activate' && !core.repo.model.menu.button.archive ) return false;\n      if (button.id === 'delete' && !core.repo.model.menu.button.delete) return false;\n      if (!button.accessType) return true;\n      if (!core.access[button.accessType]) return false;\n      return true;\n    });\n  }\n\n  return buttons;\n}\n\n/**\n * A helper method that sets up a FieldGroupConfig for a create/new pop-table-dialog\n * @param entityConfig\n * @param goToUrl\n */\nexport function GetObjectVar(obj: Dictionary<any>, path: string) {\n  const steps = path.split('.');\n  const key = steps.pop();\n  const pathStorage = StorageGetter(obj, steps);\n  if (pathStorage) {\n    return typeof pathStorage[key] !== 'undefined' ? pathStorage[key] : undefined;\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * Get a list of the transformations that are within a field set\n * @param obj\n * @constructor\n */\nexport function GetObjectTransformations(obj: Object) {\n  const transformations = [];\n  Object.keys(obj).map((key) => {\n    const field = obj[key];\n    if (IsObject(field, ['model'])) {\n      if (field.model && field.model.name && field.model.transformation) {\n        transformations[field.model.name] = CleanObject({\n          type: field.model.transformation.type,\n          arg1: field.model.transformation.arg1 ? field.model.transformation.arg1 : null,\n          arg2: field.model.transformation.arg2 ? field.model.transformation.arg2 : null,\n          arg3: field.model.transformation.arg3 ? field.model.transformation.arg3 : null,\n        });\n      }\n    } else if (IsObject(field, ['id', 'name'])) {\n      console.log('with relation', key, obj[key]);\n    } else {\n      console.log('fail', key);\n    }\n  });\n  return transformations;\n}\n\nexport function SetCoreValue(core: CoreConfig | TabMenuConfig, entity_path: string, value: any): void {\n  const steps: string[] = entity_path.split('.');\n  const key = steps.pop();\n  const pathStorage = StorageGetter(core, steps);\n  if (value === null) {\n    delete pathStorage[key];\n  } else {\n    pathStorage[key] = value;\n  }\n}\n\n/**\n * Parse a value with any mutations that need to be applied\n * @param value\n * @param core\n * @param blockEntity\n * @constructor\n */\nexport function ParseModelValue(value: any = '', core?: CoreConfig, blockEntity = false) {\n  // console.log('ParseModelValue', value);\n  let tmp = value;\n  if (typeof tmp === 'undefined') {\n    // console.log('zzz')\n    return tmp;\n  }\n  if (tmp === 'null' || tmp === null) {\n    // console.log( 'a', tmp );\n    tmp = null;\n  } else if (typeof tmp === 'boolean') {\n    tmp = +tmp;\n    // console.log( 'b', tmp );\n  } else if (IsString(tmp, true)) {\n    if (tmp.includes('/')) { // url\n      if (core && core.params && IsString(tmp, true) && tmp.includes('#')) {\n        tmp = ParseUrlForParams(tmp, core.params);\n        // console.log( 'd', tmp );\n      }\n      if (!blockEntity && core && core.entity && IsString(tmp, true) && tmp.includes(':')) {\n        const entityField = ParseStringForEntityField(tmp, core.entity);\n        if (IsDefined(entityField, false)) {\n          tmp = entityField;\n        }\n        // console.log( 'e', tmp );\n      }\n      return tmp;\n    } else {\n      if (IsString(tmp, true) && tmp.includes('alias:')) {\n        tmp = ParseForAlias(tmp);\n        // console.log( 'f', tmp );\n      }\n      if (core) {\n        if (tmp.includes('.') && !(tmp.includes('@')) && !(tmp.includes(' '))) { // object location\n          const coreVar = GetObjectVar(core, tmp);\n          if (typeof coreVar !== 'undefined') tmp = coreVar;\n          // console.log( 'g', tmp );\n        }\n\n        if (core.params && IsString(tmp, true) && tmp.includes('#')) {\n          const paramsField = ParseStringForParams(tmp, core.params);\n          if (IsDefined(paramsField, false)) {\n            tmp = paramsField;\n          }\n          // console.log( 'h', tmp );\n        }\n        if (!blockEntity && core.entity && IsString(tmp, true) && tmp.includes(':')) {\n          const entityField = ParseStringForEntityField(tmp, core.entity);\n          if (IsDefined(entityField, false)) {\n            tmp = entityField;\n          }\n\n          // console.log( 'i', tmp );\n        }\n      }\n    }\n  } else if (IsNumber(tmp)) {\n    // console.log( 'ca', tmp );\n    tmp = Number(tmp);\n    // console.log( 'c', tmp );\n  }\n  // console.log( 'after', tmp );\n  return tmp;\n}\n\n\n/**\n * Look through an entire object and make the necessary mutations\n * @param obj\n * @param entityConfig\n * @constructor\n */\nexport function ParseObjectDefinitions(obj: object, entityConfig: CoreConfig) {\n  const definitions = {};\n  let value;\n  if (typeof obj !== 'undefined') {\n    if (obj && Array.isArray(obj)) obj = ToObject(obj);\n    if (typeof obj === 'object') {\n      Object.keys(obj).map((key) => {\n        value = ParseModelValue(obj[key], entityConfig);\n        definitions[key] = value;\n      });\n    }\n  }\n\n  return definitions;\n}\n\n/**\n * A method to translate entityId fields out of a url /#app/#plural_name/:entityId, (#) indicates a entityId param, (:) indicates a entityId field\n */\nexport function ParseUrlForEntityFields(url: string, entity: Entity) { // recursive\n  if (url && url.includes(':')) {\n    const start = url.indexOf(':');\n    const end = url.indexOf('/', start) !== -1 ? url.indexOf('/', start) : url.length;\n    const fieldName = url.substring(start + 1, end);\n    url = url.replace(':' + fieldName, entity[fieldName]);\n    if (url && url.includes(':')) {\n      url = ParseUrlForEntityFields(url, entity);\n    }\n  }\n  return url;\n}\n\n\n/**\n * Translate an aliases or mutations within a url\n * @param url\n * @param entity\n * @param ignore\n * @constructor\n */\nexport function ParseLinkUrl(url: string, entity: Object = null, ignore: string[] = []) {\n  if (url) {\n    return url.split('/').map((part) => {\n      if (part.includes('alias:')) {\n        part = PopPipe.label.getAlias((part.split(':')[1]));\n      } else if (part.includes(':') && entity) {\n        if (!(ignore.includes(part))) {\n          part = part.split(':')[1];\n          if (part in entity) part = entity[part];\n        }\n      }\n      return part;\n    }).join('/');\n  }\n  return url;\n}\n\n\n/**\n * A method to translate entityId params out of a url /#app/#plural_name/:entityId, (#) indicates a entityId param, (:) indicates a entityId field\n */\nexport function ParseUrlForParams(url: string, entityParams: EntityParams): string { // recursive\n  if (url && url.includes('#') && !(url.includes(' '))) {\n    const start = url.indexOf('#');\n    const end = url.indexOf('/', start) !== -1 ? url.indexOf('/', start) : url.length;\n    const paramName = url.substring(start + 1, end);\n    url = url.replace('#' + paramName, entityParams[paramName]);\n    if (url && url.includes('#')) {\n      url = ParseUrlForParams(url, entityParams);\n    }\n  }\n  return url;\n}\n\n\n/**\n * A methid that replaces entityId aliases found in a string\n * @param string\n */\nexport function ParseForAlias(string: string) {\n  if (IsString(string, true)) {\n    let alias = false;\n    const parts = [];\n    string.split(':').map((part) => {\n      if (part.includes('alias')) {\n        alias = true;\n      } else {\n        parts.push(alias ? TitleCase(PopPipe.label.getAlias((part))) : part);\n        alias = false;\n      }\n      return part;\n    });\n    return parts.join(' ');\n  }\n  return string;\n}\n\n\n/**\n * A method to translate entityId fields out of a string ':entityId' (:) indicates a entityId field\n */\nexport function ParseStringForEntityField(str: string, entity: Entity) { // recursive\n  if (typeof (str) === 'string' && str.includes(':') && !(str.includes(' '))) {\n    const start = str.indexOf(':');\n    const end = str.indexOf('.', start) !== -1 ? str.indexOf('.', start) : str.length;\n    const fieldName = str.substring(start + 1, end);\n    if (IsDefined(entity[fieldName], false)) {\n      str = str.replace(':' + fieldName, entity[fieldName]);\n      if (str && str.includes(':')) {\n        str = ParseStringForEntityField(str, entity);\n      }\n    }\n  } else if (typeof (str) === 'string' && str.includes(':') && str.includes(' ')) {\n    const parts = str.trim().split(' ');\n    const partials = [];\n    parts.map((part) => {\n      const start = part.indexOf(':');\n      const end = part.indexOf('.', start) !== -1 ? part.indexOf('.', start) : part.length;\n      const fieldName = part.substring(start + 1, end);\n      if (IsDefined(entity[fieldName], false)) {\n        part = part.replace(':' + fieldName, entity[fieldName]);\n        if (part && part.includes(':')) {\n          part = ParseStringForEntityField(part, entity);\n        }\n      }\n      partials.push(part);\n    });\n    str = partials.join(' ').trim();\n\n  }\n  return str;\n}\n\n\n/**\n * A method that replaces entityId params found in a string\n * @param str\n * @param entityParams\n */\nexport function ParseStringForParams(str: string, entityParams: EntityParams, separator = '.'): string { // recursive\n  if (typeof (str) === 'string' && str.includes('#')) {\n    const start = str.indexOf('#');\n    const end = str.indexOf(separator, start) !== -1 ? str.indexOf(separator, start) : str.length;\n    const paramName = str.substring(start + 1, end);\n    if (entityParams[paramName]) {\n      str = str.replace('#' + paramName, entityParams[paramName]);\n      if (str && str.includes('#')) {\n        str = ParseStringForParams(str, entityParams);\n      }\n    }\n\n  }\n  return str;\n}\n\n/**\n * Helper function to set routes for an entity\n * @param routes\n * @param params\n * @constructor\n */\nexport function InterpolateEntityRoutes(routes: ServiceRoutesInterface, params: EntityParams) {\n  if (IsObject(routes)) {\n    const set = <ServiceRoutesInterface>{};\n    Object.keys(routes).map((method) => {\n      set[method] = {};\n      Object.keys(routes[method]).map((route) => {\n        if (!set[method][route]) set[method][route] = {};\n        set[method][route].path = String(ParseUrlForParams(routes[method][route].path, params)).trim();\n        set[method][route].params = routes[method][route].params;\n      });\n    });\n    return set;\n  } else {\n    return routes;\n  }\n}\n\n/**\n * Helper function to set routes for an entity\n * @param routes\n * @param params\n * @constructor\n */\nexport function InterpolateEntityRoute(route: string, obj: Object) {\n  let path = InterpolateString(route, obj);\n  path = StringReplaceAll(path, '\\\\/\\\\/', '\\\\/');\n  return path;\n}\n\n\n/**\n * Remove all the empty values from an object\n * @param model\n * @constructor\n */\nexport function ClearEmptyValues(model: object) {\n  const pointless = [null, undefined, ''];\n  Object.getOwnPropertyNames(model).map((key) => {\n    if (typeof key === 'string' && key.includes('_') == false && pointless.includes(model[key]) && key !== 'value') {\n      delete model[key];\n    }\n    if (model[key] !== null && !Array.isArray(model[key]) && typeof model[key] === 'object') {\n      model[key] = ClearEmptyValues(model[key]);\n    }\n  });\n  return model;\n}\n\n/**\n * Get a name to display for an entity, use fall backs if necessary\n * @param entity\n * @constructor\n */\nexport function DetermineEntityName(entity: Entity) {\n  let name = '';\n  if (entity) {\n    if (IsString(entity.label, true)) {\n      name = entity.label;\n\n    } else if (IsString(entity.name, true)) {\n      name = entity.name;\n\n    } else if (IsString(entity.display_name, true)) {\n      name = entity.display_name;\n\n    } else if (IsString(entity.first_name, true)) {  //code change by Chetu Development Team on 17-05-2021\n      name = entity.first_name + ' ' + entity.last_name;\n\n    } else if (IsString(entity.email, true)) {\n      name = entity.email;\n\n    } else if (typeof entity.id !== 'undefined') {\n      name = String(entity.id);\n    }\n  }\n  return name;\n}\n\n/**\n * Parse conditional logic of a when statement\n * [\n *    first level is OR statements\n *    [ ...Every thing in the second level is an AND statement..., ['name', '=', 'user'], ['age', '>', 21] ],\n *    [key, '=', 'value ],\n *    [key, 'in', [1,2,3,45] ],\n * ]\n * @param obj\n * @param when\n * @param core\n * @constructor\n */\nexport function EvaluateWhenConditions(obj: Dictionary<any>, when: any[] = null, core?: CoreConfig) {\n  if (!when || when === null) return true;\n  let pass = true;\n  if (IsArray(when, true)) { // conditional logic to display fields\n    let block;\n    when = DeepCopy(when).filter((section) => IsArray(section, true));\n    const isOrStatement = when.length > 1;\n    if (isOrStatement) {\n      // console.log('or check', obj, when, core);\n      when.reverse();\n      while (when.length) {\n        block = when.pop().filter((section) => IsArray(section, true));\n        pass = EvaluateWhenCondition(obj, block, core);\n        if (pass) break;\n      }\n    } else {\n      // console.log('check', obj, when, core);\n      pass = EvaluateWhenCondition(obj, when, core);\n    }\n  } else {\n    pass = false;\n  }\n  return pass;\n}\n\n/**\n * Evaluate a single conditional block: [location, operator, value]\n * @param obj\n * @param block\n * @param core\n * @constructor\n */\nexport function EvaluateWhenCondition(obj: Dictionary<any>, block: any[], core?: CoreConfig): boolean {\n  const operators = ['=', '>', '>=', '<', 'truthy', 'falsey', 'length', 'contains'];\n  let pass = true;\n  let location;\n  let operator;\n  let value;\n  if (IsArray(block, true)) {\n    // expects array of arrays\n    block.some((section: any) => {\n\n      section.some((rule) => {\n        // console.log('rule', rule);\n        // console.log('has core', core);\n        if (IsArray(rule, true)) {\n          location = rule[0];\n          if (rule.length === 1) {\n            operator = 'truthy';\n            value = undefined;\n          } else if (rule.length === 2) {\n            operator = '=';\n            value = rule[1];\n            if (['truthy', 'falsey', 'length'].includes(value)) {\n              operator = value;\n              value = undefined;\n            }\n          } else if (rule.length >= 2) {\n            operator = rule[1];\n            value = rule[2];\n          }\n          if (location && operator && operators.includes(operator)) {\n            if (IsString(location, true) && location in obj && obj[location]) {\n              location = obj[location];\n            } else if (IsString(location, true) && location.includes('.')) {\n              location = GetObjectVar(obj, location);\n            } else {\n              location = ParseModelValue(location, core);\n            }\n            if (IsString(value, true) && IsObject(core, [value])) {\n              value = ParseModelValue(value, core);\n            } else if (IsString(value, true) && IsObject(obj, [value])) {\n              value = GetObjectVar(obj, value);\n            }\n            // console.log('location', location);\n            // console.log('operator', operator);\n            // console.log('value', value);\n            switch (operator) {\n              case 'contains':\n                if (IsArray(location)) {\n                  if (!(location.includes(value))) {\n                    pass = false;\n                    return true;\n                  }\n                } else if (IsString(location)) {\n                  if (!(location.search(value) > -1)) {\n                    pass = false;\n                    return true;\n                  }\n                } else if (IsObject(location)) {\n                  if (!(value in location)) {\n                    pass = false;\n                    return true;\n                  }\n                } else {\n                  pass = false;\n                  return true;\n                }\n                break;\n              case 'length':\n                if (!(IsArray(location, true))) {\n                  pass = false;\n                  return true;\n                }\n                break;\n              case 'truthy':\n                if (!location) {\n                  pass = false;\n                  return true;\n                }\n                break;\n              case 'falsey':\n                if (location) {\n                  pass = false;\n                  return true;\n                }\n                break;\n              case '=':\n                if (location != value) {\n                  pass = false;\n                  return true;\n                }\n                break;\n              case '!=':\n                if (location == value) {\n                  pass = false;\n                  return true;\n                }\n                break;\n              case '>':\n                if (!(location > value)) {\n                  pass = false;\n                  return true;\n                }\n                break;\n              case '>=':\n                if (!(location >= value)) {\n                  pass = false;\n                  return true;\n                }\n                break;\n              case '<':\n                if (!(location < value)) {\n                  pass = false;\n                  return true;\n                }\n                break;\n              case '<=':\n                if (!(location <= value)) {\n                  pass = false;\n                  return true;\n                }\n                break;\n              default:\n                pass = false;\n                return true;\n                break;\n            }\n          } else {\n            pass = false;\n            return true;\n          }\n        } else {\n          pass = false;\n          return true;\n        }\n      });\n      return pass === false;\n    });\n  } else {\n    pass = false;\n  }\n\n  return pass;\n}\n\n\n/**\n * check if event matches the signature for a field patch\n * @param core\n * @param event\n * @constructor\n */\nexport function IsValidFieldPatchEvent(core: CoreConfig, event: PopBaseEventInterface) {\n  if (IsObject(event, true)) {\n    if (event.type === 'field' && event.name === 'patch' && event.success) {\n      return true;\n    }\n    if (event.type === 'field' && event.name === 'onChange' && event.config.facade) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * check if event matches the signature for a field patch\n * @param core\n * @param event\n * @constructor\n */\nexport function IsValidChangeEvent(core: CoreConfig, event: PopBaseEventInterface) {\n  if (IsObject(event, true)) {\n    if (event.type === 'field' && event.name === 'onChange') {\n      return true;\n    }\n  }\n  return false;\n}\n\n\n/**\n * Check if a event matches the same core signature of a core that belongs to a component\n * @param core\n * @param event\n * @constructor\n */\nexport function IsValidCoreSignature(core: CoreConfig, event: PopBaseEventInterface = null) {\n  console.log(' IsValidCoreSignature core', core);\n  console.log(' IsValidCoreSignature event', event);\n  if (IsObject(core, true) && IsObject(core.entity)) {\n    if (IsObject(event, true) && IsObject(event.core)) {\n      return core === event.core;\n    }\n    return true;\n  }\n  console.log('IsValidCoreSignature, fail');\n  return false;\n}\n\nexport function GetCustomFieldSettings(field: FieldInterface) {\n  let fieldSettings = {};\n  switch (String(field.fieldgroup.name).toLowerCase()) {\n    case 'email':\n      fieldSettings = EmailFieldSetting;\n      break;\n    case 'address':\n      fieldSettings = AddressFieldSetting;\n      break;\n    case 'phone':\n      fieldSettings = PhoneFieldSetting;\n      break;\n    case 'name':\n      fieldSettings = NameFieldSetting;\n      break;\n    case 'textfield':\n    case 'input':\n      fieldSettings = InputFieldSetting;\n      break;\n    case 'radio':\n      fieldSettings = RadioFieldSetting;\n      break;\n    case 'switch':\n      fieldSettings = SwitchFieldSetting;\n      break;\n    case 'select':\n      fieldSettings = SelectFieldSetting;\n      break;\n    case 'select-multi':\n    case 'select_multi':\n    case 'multi_selection':\n      fieldSettings = SelectFieldSetting;\n      break;\n    case 'checkbox':\n      fieldSettings = CheckboxFieldSetting;\n      break;\n    case 'textarea':\n      fieldSettings = TextareaFieldSetting;\n      break;\n    default:\n      fieldSettings = {};\n  }\n\n  return fieldSettings;\n}\n\n/**\n * Selection type fields require a list of options to present the user\n * The option values may be directly assigned on the field, point to a specific location in the entity data, or reference a resource that may exists in the entity models\n * ...\n * options:{\n *   ...\n *   values: FieldItemOptions[], resolve what is in this list\n *   ...\n * }\n * ...\n * @param core\n * @param options\n * @private\n */\nexport function ModelOptionValues(core: CoreConfig, options: any) {\n  if (IsObject(options, true)) {\n    if (IsString(options.resource, true)) {\n      if (IsObject(core.resource, true) && options.resource in core.resource && IsObject(core.resource[options.resource], ['data_values']) && IsArray(core.resource[options.resource].data_values, true)) {\n        options.converted = false;\n        options.rawValues = DeepCopy(core.resource[options.resource].data_values);\n        // options.values = DeepCopy( core.resource[ options.resource ].data_values );\n      }\n    } else if (IsArray(options.values, true)) {\n      options.converted = false;\n      const tmp = DeepCopy(options.values);\n      options.values = null;\n      options.rawValues = tmp;\n    } else if (IsString(options.values)) {\n      const tmpOptions = GetObjectVar(core, options.values);\n      if (IsArray(tmpOptions)) {\n        options.converted = false;\n        options.rawValues = DeepCopy(tmpOptions);\n      } else {\n        const tmp = ParseModelValue(options.values, core);\n        if (IsArray(tmp, true)) {\n          options.converted = false;\n          options.rawValues = DeepCopy(tmp);\n        }\n      }\n    }\n  }\n  return options;\n}\n\n/**\n * Get the rules that should be applied on this field\n * @param fieldItem\n * @private\n */\nexport function FieldItemRules(fieldItem: any): void {\n  const RuleSet = {};\n  fieldItem.rule = {};\n  const itemRules = IsArray(fieldItem.itemrules, true) ? fieldItem.itemrules : []; // default rules inherited from the field_item_id\n  const fieldRules = IsArray(fieldItem.fieldrules, true) ? fieldItem.fieldrules : []; // rules specific to this field item\n// we want field rules to override items rules when there is overlap ie.. the item might come with a default rule but the items rules should override it\n  itemRules.map((rule) => {\n    if (IsArray(rule.validations, true)) {\n      if (!(IsObject(rule.options))) rule.options = {};\n      rule.options.values = ConvertArrayToOptionList(rule.validations, {\n        nameKey: 'label',\n      });\n      rule.validationMap = ArrayKeyBy(rule.validations, 'id');\n      rule.value = +rule.validation.id;\n    } else {\n      rule.value = rule.raw_value;\n    }\n    if (!rule.value && rule.default_value) rule.value = rule.default_value;\n    RuleSet[rule.name] = rule;\n  });\n  fieldRules.map((rule) => {\n\n    if (IsObject(RuleSet[rule.name])) {\n      RuleSet[rule.name].id = rule.id;\n      RuleSet[rule.name].value = IsArray(RuleSet[rule.name].validations, true) ? rule.validation.id : rule.raw_value;\n      RuleSet[rule.name].field_id = rule.field_id;\n    }\n  });\n\n  fieldItem.rules = Object.values(RuleSet);\n  fieldItem.rules.map((rule: any) => {\n    if (!rule.validation.fixed) {\n      fieldItem.rule[rule.name] = ParseModelValue(rule.value);\n    }\n  });\n\n// delete fieldItem.fieldrules;\n// delete fieldItem.itemrules;\n}\n\n\nexport function FieldItemModel(core: CoreConfig, fieldItem: any, checkAccess = true): FieldItemModelInterface {\n  if (IsObject(fieldItem, true)) {\n    let hasAccess = true;\n    if (checkAccess) {\n      hasAccess = core.access.can_update ? true : false;\n      if (IsObject(core.entity, ['system']) && core.entity.system) hasAccess = false;\n    }\n    const showAsReadonly = +fieldItem.readonly ? true : (!hasAccess ? true : false);\n    const allowPatch = IsObject(core.entity, ['id']) && IsObject(fieldItem.patch, ['path']) && !fieldItem.facade && hasAccess && !showAsReadonly ? true : false;\n    if (!fieldItem.metadata) {\n      fieldItem.metadata = {};\n    }\n\n\n    fieldItem.metadata = DeepMerge(fieldItem.metadata, {internal_name: core.params.internal_name});\n    // ToDo:: Optimize this part, currently uses catch-all method to accommodate all field item types, need to run checks on some and not others which prevents simply merging\n    let model = <FieldItemModelInterface>{\n      ...CleanObject({ // any empty values will be purged\n        access: hasAccess,\n        align: fieldItem.align,\n        all: fieldItem.all,\n        allValue: fieldItem.allValue,\n        allowAll: fieldItem.allowAll,\n        allowGroupAll: fieldItem.allowGroupAll,\n        allOverlay: fieldItem.allOverlay,\n        allOverlayEnabled: fieldItem.allOverlayEnabled,\n        allOverlayLabel: fieldItem.allOverlayLabel,\n        allOverlayMessage: fieldItem.allOverlayMessage,\n        allOverlayCallback: fieldItem.allOverlayCallback,\n        autoFill: +fieldItem.autoFill ? true : null,\n        autoSize: +fieldItem.autoSize ? true : null,\n        autofocus: +fieldItem.autofocus ? true : null,\n        autoselect: +fieldItem.autoselect ? true : null,\n        border: fieldItem.border,\n        bubble: fieldItem.bubble,\n        button: fieldItem.button,\n        checkboxPosition: fieldItem.checkboxPosition,\n        className: fieldItem.className,\n        color: fieldItem.color,\n        collapsed: fieldItem.collapsed,\n        control: fieldItem.control,\n        defaultHeight: fieldItem.defaultHeight,\n        disabled: +fieldItem.disabled ? true : false,\n        displayErrors: +fieldItem.displayErrors ? true : false,\n        dropSpecial: fieldItem.dropSpecial,\n        event: +fieldItem.event,\n        empty: fieldItem.empty,\n        facade: fieldItem.facade ? true : false,\n        filterPredicate: fieldItem.filterPredicate,\n        form: fieldItem.view ? String(fieldItem.view.name).toLowerCase() : fieldItem.form ? fieldItem.form : 'label',\n        header: fieldItem.header,\n        hidden: fieldItem.hidden,\n        hint: fieldItem.hint,\n        hintText: fieldItem.hintText,\n        height: fieldItem.height,\n        helpText: fieldItem.helpText,\n        helper: fieldItem.helper,\n        html: fieldItem.html,\n        icon: fieldItem.icon,\n        iconColor: fieldItem.iconColor,\n        interval: fieldItem.interval,\n        layout: fieldItem.setting && fieldItem.setting.layout,\n        level: fieldItem.level,\n        levelGap: fieldItem.levelGap,\n        link: fieldItem.link,\n        label: fieldItem.label,\n        list: fieldItem.list,\n        maxHeight: fieldItem.maxHeight,\n        multiple: fieldItem.multiple,\n        message: fieldItem.message,\n        minimal: fieldItem.minimal,\n        mode: fieldItem.mode,\n        noInitialValue: fieldItem.noInitialValue,\n        labelPosition: fieldItem.labelPosition,\n        mask: fieldItem.mask,\n        metadata: fieldItem.metadata ? fieldItem.metadata : {},\n        min: fieldItem.min,\n        max: fieldItem.max,\n        minColumn: fieldItem.minColumn,\n        maxColumn: fieldItem.maxColumn,\n        minHeight: fieldItem.minHeight,\n        minlength: IsObject(fieldItem.rule) && IsDefined(fieldItem.rule.minlength) ? fieldItem.rule.minlength : (fieldItem.minlength ? fieldItem.minlength : null),\n        maxlength: IsObject(fieldItem.rule) && IsDefined(fieldItem.rule.maxlength) ? fieldItem.rule.maxlength : (fieldItem.maxlength ? fieldItem.maxlength : 128),\n        minValue: fieldItem.minValue,\n        maxValue: fieldItem.maxValue,\n        name: fieldItem.name,\n        options: ModelOptionValues(core, fieldItem.options),\n        pattern: fieldItem.rule && fieldItem.rule.pattern ? fieldItem.rule.pattern : (fieldItem.pattern ? fieldItem.pattern : null),\n        patch: allowPatch && fieldItem.patch ? fieldItem.patch : null,\n        patchGroupFk: fieldItem.patchGroupFk,\n        padding: fieldItem.padding,\n        position: fieldItem.position,\n        preserve: fieldItem.preserve,\n        prevent: fieldItem.prevent,\n        prefix: fieldItem.prefix ? fieldItem.prefix : null,\n        suffix: fieldItem.suffix ? fieldItem.suffix : null,\n        radius: fieldItem.radius,\n        readonly: showAsReadonly,\n        reset: fieldItem.reset,\n        route: fieldItem.route,\n        required: fieldItem.rule && fieldItem.rule.required ? true : fieldItem.required ? true : false,\n        session: fieldItem.session,\n        sessionPath: fieldItem.sessionPath,\n        showMask: fieldItem.showMask,\n        showTooltip: fieldItem.showTooltip,\n        size: fieldItem.size,\n        sort: fieldItem.sort,\n        sort_order: fieldItem.sort_order,\n        specialChars: fieldItem.specialChars,\n        tooltip: fieldItem.tooltip,\n        toolTipDirection: fieldItem.toolTipDirection,\n        textOverflow: fieldItem.textOverflow,\n        transformation: fieldItem.transformation,\n        truncate: fieldItem.truncate,\n        type: fieldItem.type,\n        value: fieldItem.value,\n        validators: fieldItem.validators,\n        width: fieldItem.width,\n        warning: fieldItem.warning,\n        when: IsArray(fieldItem.when, true) ? fieldItem.when : null\n      })\n    };\n\n    if (model.form === 'label') { // label specific params\n      model = {\n        ...model,\n        ...CleanObject({// label stuff\n          subLabel: fieldItem.subLabel ? fieldItem.subLabel : null,\n          subValue: fieldItem.subValue ? fieldItem.subValue : null,\n          truncate: fieldItem.truncate ? fieldItem.truncate : null,\n          copyLabel: fieldItem.copyLabel ? fieldItem.copyLabel : null,\n          labelButton: fieldItem.labelButton ? fieldItem.labelButton : null,\n          valueButton: fieldItem.valueButton ? fieldItem.valueButton : null,\n          copyLabelBody: fieldItem.copyLabelBody ? fieldItem.copyLabelBody : null,\n          copyLabelDisplay: fieldItem.copyLabelDisplay ? fieldItem.copyLabelDisplay : null,\n          valueButtonDisplay: fieldItem.valueButtonDisplay ? fieldItem.valueButtonDisplay : null,\n          valueButtonDisabled: fieldItem.valueButtonDisabled ? fieldItem.valueButtonDisabled : null,\n          valueButtonDisplayTransformation: fieldItem.valueButtonDisplayTransformation ? fieldItem.valueButtonDisplayTransformation : null,\n        })\n      };\n    }\n\n    delete fieldItem.patch;\n    if (model.patch) {\n      if (model.patch.path) model.patch.path = StringReplaceAll(ParseUrlForParams(model.patch.path, core.params), '//', '/');\n      if (model.patch.metadata) model.patch.metadata = ParseObjectDefinitions(model.patch.metadata, core);\n    }\n    return model;\n  }\n\n  return {};\n\n}\n\n/**\n * When patches are made, we need to update the entity in the core config\n * ToDo:: Hoping to be able to improve this, and have each component be responsible to manage their own updates. My hesitation right now is I want the least amount of components as possible manipulating the core config\n * @param core\n * @param event\n */\nexport function SessionEntityFieldUpdate(core: CoreConfig, event: PopBaseEventInterface, path: string = null) {\n  PopLog.event(`SessionEntityFieldUpdate`, `Session Detected`, event);\n  if (IsValidCoreSignature(core, event)) {\n    if (IsValidFieldPatchEvent(core, event)) {\n\n      let value;\n      if (!(IsString(path, true))) path = 'entity';\n      const session = StorageGetter(core, String(path).trim().split('.'));\n      if (event.config.name in session || event.config.facade) {\n        value = event.config.control ? event.config.control.value : event.data;\n        value = ParseModelValue(value);\n        console.log('SessionEntityFieldUpdate', session, event.config.name, value);\n        session[event.config.name] = value;\n        core.repo.clearCache('active', `SessionEntityFieldUpdate`);\n        core.repo.clearCache('all', `SessionEntityFieldUpdate`);\n        event.session = true;\n      }\n      return true;\n    }\n  }\n  return false;\n}\n\nexport function GetSingularName(value: string): string {\n  if (IsString(value, true) && String(value).length > 3) {\n    let tmp = SpaceToHyphenLower(String(value).toLowerCase().trim());\n    if (String(tmp).slice(-3) === 'ies') {\n      tmp = String(tmp).slice(0, -3);\n      tmp += 'y';\n    } else if (String(tmp).slice(-1) === 's') {\n      tmp = String(tmp).slice(0, -1);\n    }\n\n    return tmp;\n  }\n  return value;\n}\n\n\nexport function IsAliasable(value: string): boolean {\n  if (IsString(value, true) && String(value).length > 3) {\n    const tmp = SpaceToHyphenLower(String(value).toLowerCase().trim());\n    if (IsObject(PopRouteAliasMap, true) && tmp in PopRouteAliasMap) {\n      return true;\n    }\n  }\n  return false;\n}\n\n\nexport function IsEntity(entityValue: string) {\n  if (IsString(entityValue, true)) {\n    if (IsObject(PopApp, ['entities']) && entityValue in PopApp.entities) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport function ParseModuleRoutes(parent: string, config: Route[], routes = []) {\n  for (let i = 0; i < config.length; i++) {\n    const route = config[i];\n    // console.log(parent + '/' + route.path);\n    routes.push(route);\n    if (route.children) {\n      const currentPath = route.path ? parent + '/' + route.path : parent;\n      ParseModuleRoutes(currentPath, route.children, routes);\n    }\n  }\n  return routes;\n}\n\nexport function ParseModuleRoutesForAliases(routes: Routes): Routes {\n  if (IsArray(routes, true)) {\n    routes.map((route: any) => {\n      if (IsObject(route.data, ['alias', 'internal_name'])) {\n        const alias = route.data.alias;\n        if (IsObject(alias, ['target', 'type']) && !route.data.masterPath) {\n          route.data.masterPath = route.path;\n          if (IsString(alias.target, true) && IsString(alias.type, true)) {\n            route.path = String(StringReplaceAll(route.path, alias.target, GetRouteAlias((IsString(alias.internal_name, true) ? alias.internal_name : route.data.internal_name), alias.type))).trim();\n            if (route.data.masterPath !== route.path) routes.push({\n              path: route.data.masterPath,\n              redirectTo: route.path,\n              pathMatch: 'prefix'\n            });\n          }\n          if (IsObject(route.data.table, true)) {\n            if (IsString(route.data.table.route, true)) {\n              const tableRoute = route.data.table.route;\n              if (String(tableRoute).includes(alias.target)) {\n                route.data.table.route = String(StringReplaceAll(tableRoute, alias.target, GetRouteAlias((IsString(alias.internal_name, true) ? alias.internal_name : route.data.internal_name), alias.type))).trim();\n              }\n            }\n            if (IsString(route.data.table.goToUrl)) {\n              const goToUrl = route.data.table.goToUrl;\n              if (String(goToUrl).includes(route.data.alias)) {\n                route.data.table.goToUrl = String(StringReplaceAll(goToUrl, route.data.alias, GetRouteAlias((IsString(alias.internal_name, true) ? alias.internal_name : route.data.internal_name), alias.type))).trim();\n              }\n            }\n          }\n\n        } else if (IsString(route.data.alias, true) && !route.data.masterPath) {\n          route.data.masterPath = route.path;\n          route.path = String(StringReplaceAll(route.path, route.data.alias, GetRouteAlias(route.data.internal_name, 'plural'))).trim();\n          if (route.data.masterPath !== route.path) routes.push({\n            path: route.data.masterPath,\n            redirectTo: route.path,\n            pathMatch: 'prefix'\n          });\n          if (IsObject(route.data.table, true)) {\n            if (IsString(route.data.table.route, true)) {\n              const tableRoute = route.data.table.route;\n              if (String(tableRoute).includes(route.data.alias)) {\n                route.data.table.route = String(StringReplaceAll(tableRoute, route.data.alias, GetRouteAlias(route.data.internal_name, 'plural'))).trim();\n              }\n            }\n            if (IsString(route.data.table.goToUrl)) {\n              const goToUrl = route.data.table.goToUrl;\n              if (String(goToUrl).includes(route.data.alias)) {\n                route.data.table.goToUrl = String(StringReplaceAll(goToUrl, route.data.alias, GetRouteAlias(route.data.internal_name, 'plural'))).trim();\n              }\n            }\n          }\n        }\n      }\n      if (IsArray(route.children, true)) {\n        route.children = ParseModuleRoutesForAliases(route.children);\n      }\n      if (IsObject(route._loadedConfig, ['routes'])) {\n        route._loadedConfig.routes = ParseModuleRoutesForAliases(route._loadedConfig.routes);\n      }\n    });\n  }\n  return routes;\n}\n\n\nexport function FieldItemView(view: any): { id: number, name: string, type: string, description: string } {\n  const tmp = IsObject(view) ? view : null;\n  return <{ id: number, name: string, type: string, description: string }>CleanObject({\n    id: tmp ? tmp.id : 0,\n    name: tmp ? tmp.name : 'label',\n    type: tmp && String(tmp.html).includes('[') ? String(tmp.html).split('[')[1].split(']')[0] : 'text',\n    description: tmp ? tmp.description : null\n  });\n}\n\n\nexport function FieldItemBooleanValue(model: FieldItemModelInterface, core: CoreConfig): boolean {\n  PopLog.debug('FieldItemBooleanValue', `convert:`, {name: name, model: model, core: core});\n  let result;\n  if (IsDefined(model.value, false)) {\n    if (typeof model.value === 'boolean') {\n      result = model.value;\n    } else if (IsString(model.value, true)) {\n      result = ParseModelValue(model.value, core);\n    } else if (IsNumber(model.value, false)) {\n      result = +core.entity[model.name] > 0;\n    }\n  }\n  if (!(IsDefined(result, false)) && model.name && IsObject(core.entity, true) && IsDefined(core.entity[model.name])) {\n    result = +core.entity[model.name] > 0;\n  }\n\n  if (!(IsDefined(result, false))) result = false;\n  PopLog.debug('FieldItemBooleanValue', `result:`, {initial: model.value, result: result});\n  return result;\n}\n\nexport function FieldItemTextValue(model: FieldItemModelInterface, core: CoreConfig): string {\n  let result;\n  if (+model.value > 0) {\n    result = model.value;\n  } else if (IsDefined(model.value, false) && IsString(model.value, true)) {\n    result = ParseModelValue(model.value, core);\n    // console.log( 'belongs to parse', model.value, result );\n  }\n  if (!(IsDefined(result, false)) && model.name && IsObject(core.entity, true) && IsDefined(core.entity[model.name]) && IsString(core.entity[model.name], true)) {\n    result = core.entity[model.name];\n    // console.log( 'belongs to entity', model.value, result );\n  }\n  if (!(IsDefined(result, false)) || result === 'Null') result = '';\n  return result;\n}\n\nexport function FieldItemArrayValue(model: FieldItemModelInterface, core: CoreConfig): any[] {\n  let result;\n  if (IsDefined(model.value, false)) {\n    if (IsArray(model.value, false)) {\n      result = model.value;\n    } else if (IsString(model.value, true)) {\n      result = ParseModelValue(model.value, core);\n    }\n  }\n  if (!(IsArray(result, false)) && model.name && IsObject(core.entity, true) && IsArray(core.entity[model.name], false)) {\n    result = core.entity[model.name];\n  }\n  if (!(IsArray(result, false))) result = [];\n\n  return result;\n}\n\n\nexport function GetPatternValidator(pattern: string) {\n  // ToDo:: Add all of the options that are built for this, numeric, alpha, ....\n  switch (String(pattern).toLowerCase()) {\n    case 'url':\n      return ValidateUrl;\n      break;\n    case 'phone':\n      return ValidatePhone;\n      break;\n    case 'email':\n      return Validators.email;\n      break;\n    case 'zip':\n      return ValidatePhone;\n      break;\n    case 'password':\n      return ValidatePassword;\n      break;\n    case 'username':\n      return ValidateUsername;\n      break;\n    default:\n      return null;\n  }\n}\n\n\nexport function FieldItemOptionValues(model: FieldItemModelInterface, core: CoreConfig): any[] {\n  if (IsUndefined(model.options)) {\n    model.options = {\n      rawValues: [],\n      values: []\n    };\n  }\n  // console.log('model', model.options);\n  if (!IsArray(model.options.rawValues, true)) {\n    const optionValues = IsArray(model.options.values, true) ? model.options.values : [];\n    model.options.rawValues = [...new Map(optionValues.map(item => [item['name'], item])).values()];\n  }\n  const list = ConvertArrayToOptionList(model.options.rawValues, {\n    converted: model.options.converted ? true : false, // if true, this will return default values\n    // ensure that an option shows up in list in case other conditions remove it, aka it has been archived\n    nameKey: model.options.nameKey ? model.options.nameKey : 'name',\n    ensure: model.options.ensure && IsObject(core.entity, true) ? {\n      name: core.entity[model.options.ensure.name],\n      value: core.entity[model.name]\n    } : undefined,\n    prevent: IsArray(model.options.prevent, true) ? model.options.prevent : [], // a list of ids that should not appear in the list for whatever reason\n    preserveKeys: IsArray(model.options.preserveKeys, true) ? model.options.preserveKeys : [], // a list of keys that need to be preserved wile constructing the object\n    // parent means this options should all have a common field trait like client_fk, account_fk ....\n    parent: model.options.parent && IsObject(core.entity, true) ? {\n      field: model.options.parent,\n      value: core.entity[model.options.parent]\n    } : undefined,\n    // empty is the blank or null option that you want to have\n    empty: null,\n    sort: IsDefined(model.options.sort) ? model.options.sort : true,\n  });\n\n  return list;\n}\n\n\n/**\n * Generatea form config from the field item model;\n * @param core\n * @param model\n * @constructor\n */\nexport function FieldItemModelConfig(core: CoreConfig, model: FieldItemModelInterface) {\n  let value;\n  let assigned;\n  let configInterface;\n  let validators;\n//   const isDialogLimit = this.srv.dialog.openDialogs.length > 3;\n  const isDialogLimit = false;\n\n  let config = null;\n\n  // const metadata = { ...GetCoreParamsAsMetadata(core.params), ...model.metadata };\n  switch (model.form) {\n    case 'sidebyside':\n      assigned = Array.isArray(model.options.assigned) && model.options.assigned.length ? model.options.assigned : typeof model.options.assigned === 'string' && IsObject(core.entity.assignments, true) && Array.isArray(core.entity.assignments[model.options.assigned]) ? core.entity.assignments[model.options.assigned] : [];\n      model.options.values = FieldItemOptionValues(model, core);\n      model.options.converted = true;\n      configInterface = <SideBySideInterface>{\n        assigned: assigned,\n        assignAll: typeof model.assign_all === 'boolean' ? model.assign_all : false,\n        assignedLabel: typeof model.assignedLabel === 'string' ? model.assignedLabel : 'Assigned',\n        bubble: model.bubble ? true : false,\n        disabled: model.disabled,\n        displayHelper: typeof model.displayHelper === 'boolean' ? model.displayHelper : false,\n        displayTitle: typeof model.displayTitle === 'boolean' ? model.displayTitle : false,\n        facade: true,\n        filter: typeof model.filter === 'boolean' ? model.filter : true,\n        helpText: typeof model.helpText === 'string' ? model.helpText : undefined,\n        id: model.id ? model.id : undefined,\n        label: model.label ? ParseForAlias(model.label) : '',\n        metadata: model.metadata,\n        noInitialValue: model.noInitialValue ? model.noInitialValue : false,\n        name: model.name ? model.name : null,\n        optionsLabel: typeof model.optionsLabel === 'string' ? model.optionsLabel : 'Available',\n        options: model.options,\n        // bucketHeight: typeof model.bucketHeight === 'string' ? model.bucketHeight : undefined,\n        parentHeight: 'mat-grid-tile',\n        patch: model.patch,\n        route: typeof model.route === 'string' ? model.route : undefined,\n        removeAll: typeof model.removeAll === 'boolean' ? model.removeAll : false,\n        session: model.session,\n        sessionPath: model.sessionPath,\n        validators: model.required ? [Validators.required] : undefined,\n      };\n      config = new SideBySideConfig(<SideBySideInterface>CleanObject(configInterface));\n      break;\n    case 'select':\n      model.options.values = FieldItemOptionValues(model, core);\n      model.options.converted = true;\n      configInterface = <SelectConfigInterface>{\n        autoFill: model.autoFill,\n        bubble: model.bubble ? true : false,\n        disabled: model.disabled,\n        empty: model.empty ? model.empty : null,\n        facade: model.facade ? true : false,\n        height: model.height ? model.height : undefined,\n        helpText: model.helpText ? model.helpText : undefined,\n        id: model.id ? model.id : undefined,\n        label: model.label ? ParseForAlias(model.label) : '',\n        mode: model.mode ? model.mode : 'select',\n        metadata: model.metadata,\n        name: model.name ? model.name : null,\n        noInitialValue: model.noInitialValue ? model.noInitialValue : false,\n        options: model.options,\n        patch: model.patch,\n        readonly: model.readonly ? true : false,\n        session: model.session,\n        sessionPath: model.sessionPath,\n        required: model.required ? true : false,\n        validators: model.required ? [Validators.required] : undefined,\n        value: typeof model.value !== 'undefined' && model.value !== null ? ParseModelValue(model.value, core) : IsObject(core.entity, true) && typeof core.entity[(model.name ? model.name : null)] !== 'undefined' ? core.entity[(model.name ? model.name : null)] : null,\n      };\n      config = new SelectConfig(<SelectConfigInterface>CleanObject(configInterface));\n      break;\n    case 'select-modal':\n      model.options.values = FieldItemOptionValues(model, core);\n      model.options.converted = true;\n      const configListInterface = <SelectListConfigInterface>{\n        autoFill: model.autoFill,\n        bubble: model.bubble ? true : false,\n        disabled: model.disabled,\n        empty: model.empty ? model.empty : null,\n        facade: model.facade ? true : false,\n        height: model.height ? model.height : undefined,\n        helpText: model.helpText ? model.helpText : undefined,\n        id: model.id ? model.id : undefined,\n        label: model.subLabel ? ParseForAlias(model.subLabel) : '',\n        mode: model.mode ? model.mode : 'select',\n        metadata: model.metadata,\n        name: model.name ? model.name : null,\n        noInitialValue: model.noInitialValue ? model.noInitialValue : false,\n        options: model.options,\n        patch: model.patch,\n        readonly: model.readonly ? true : false,\n        session: model.session,\n        sessionPath: model.sessionPath,\n        required: model.required,\n        validators: model.required ? [Validators.required] : undefined,\n        value: typeof model.value !== 'undefined' && model.value !== null ? ParseModelValue(model.value, core) : IsObject(core.entity, true) && typeof core.entity[(model.name ? model.name : null)] !== 'undefined' ? core.entity[(model.name ? model.name : null)] : null,\n      };\n      config = new SelectModalConfig(<SelectModalConfigInterface>{\n        facade: false,\n        header: model.header ? model.header : null,\n        label: model.label ? model.label : null,\n        metadata: {},\n        name: model.name,\n        required: model.required,\n        validators: model.required ? [Validators.required] : undefined,\n        list: new SelectListConfig(<SelectListConfigInterface>CleanObject(configListInterface))\n      });\n      break;\n    case 'select-filter':\n      model.options.values = FieldItemOptionValues(model, core);\n      model.options.converted = true;\n      configInterface = <SelectFilterConfigInterface>{\n        autoFill: model.autoFill,\n        bubble: model.bubble ? true : false,\n        disabled: model.disabled,\n        facade: model.facade ? true : false,\n        helpText: model.helpText ? model.helpText : undefined,\n        height: model.height ? model.height : undefined,\n        id: model.id ? model.id : undefined,\n        label: model.label ? ParseForAlias(model.label) : '',\n        mode: model.mode ? model.mode : 'select',\n        minHeight: model.minHeight ? model.minHeight : undefined,\n        multiple: model.multiple ? true : false,\n        metadata: model.metadata,\n        name: model.name ? model.name : null,\n        noInitialValue: model.noInitialValue ? model.noInitialValue : false,\n        options: model.options,\n        patch: model.patch,\n        readonly: model.readonly ? true : false,\n        session: model.session,\n        sessionPath: model.sessionPath,\n        validators: model.required ? [Validators.required] : undefined,\n        value: typeof model.value !== 'undefined' && model.value !== null ? ParseModelValue(model.value, core) : IsObject(core.entity, true) && typeof core.entity[(model.name ? model.name : null)] !== 'undefined' ? core.entity[(model.name ? model.name : null)] : null,\n      };\n      config = new SelectFilterConfig(<SelectFilterConfigInterface>CleanObject(configInterface));\n      break;\n    case 'select-list':\n      model.options.values = FieldItemOptionValues(model, core);\n      model.options.converted = true;\n      configInterface = <SelectListConfigInterface>{\n        autoFill: model.autoFill,\n        all: model.all,\n        allowAll: model.allowAll,\n        allowGroupAll: model.allowGroupAll,\n        allOverlay: model.allOverlay,\n        allOverlayEnabled: model.allOverlayEnabled,\n        allOverlayLabel: model.allOverlayLabel,\n        allOverlayMessage: model.allOverlayMessage,\n        allOverlayCallback: model.allOverlayCallback,\n        bubble: model.bubble ? true : false,\n        disabled: model.disabled,\n        facade: model.facade ? true : false,\n        helpText: model.helpText ? model.helpText : undefined,\n        height: model.height ? model.height : undefined,\n        id: model.id ? model.id : undefined,\n        label: model.label ? ParseForAlias(model.label) : '',\n        mode: model.mode ? model.mode : null,\n        multiple: model.multiple ? true : false,\n        minHeight: model.minHeight ? model.minHeight : undefined,\n        metadata: model.metadata,\n        name: model.name ? model.name : null,\n        noInitialValue: model.noInitialValue ? model.noInitialValue : false,\n        options: model.options,\n        patch: model.patch,\n        required: model.required,\n        readonly: model.readonly ? true : false,\n        session: model.session,\n        sessionPath: model.sessionPath,\n        validators: model.required ? [Validators.required] : undefined,\n        value: typeof model.value !== 'undefined' && model.value !== null ? ParseModelValue(model.value, core) : IsObject(core.entity, true) && typeof core.entity[(model.name ? model.name : null)] !== 'undefined' ? core.entity[(model.name ? model.name : null)] : null,\n      };\n      config = new SelectListConfig(<SelectListConfigInterface>CleanObject(configInterface));\n      break;\n    case 'select-multi':\n    case 'select_multi':\n      model.options.values = FieldItemOptionValues(model, core);\n      model.options.converted = true;\n      configInterface = <SelectMultiConfigInterface>{\n        bubble: model.bubble ? true : false,\n        disabled: model.disabled,\n        facade: model.facade ? true : false,\n        helpText: model.helpText ? model.helpText : undefined,\n        id: model.id ? model.id : undefined,\n        label: model.label ? ParseForAlias(model.label) : '',\n        metadata: model.metadata,\n        name: model.name ? model.name : null,\n        noInitialValue: model.noInitialValue ? model.noInitialValue : false,\n        options: model.options,\n        patch: model.patch,\n        readonly: model.readonly ? true : false,\n        session: model.session,\n        sessionPath: model.sessionPath,\n        validators: model.required ? [Validators.required] : undefined,\n        value: FieldItemArrayValue(model, core),\n      };\n      model.options.converted = true;\n      config = new SelectMultiConfig(<SelectMultiConfigInterface>CleanObject(configInterface));\n      break;\n    case 'textfield':\n    case 'text':\n    case 'input':\n      validators = [];\n      if (!model.mask) validators.push(Validators.maxLength(+model.maxlength || 64));\n      if (model.mask) model.maxlength = null;\n      if (model.required) validators.push(Validators.required);\n      if (model.pattern) {\n        const patternValidator = GetPatternValidator(model.pattern);\n        if (patternValidator) {\n          validators.push(patternValidator);\n        }\n      }\n\n      if (+model.minlength) validators.push(Validators.minLength(+model.minlength));\n      configInterface = <InputConfigInterface>{\n        autofocus: model.autofocus ? true : null,\n        autoselect: model.autoselect ? true : null,\n        bubble: model.bubble ? true : false,\n        disabled: model.disabled ? true : false,\n        empty: model.empty ? model.empty : null,\n        facade: model.facade ? true : null,\n        hint: model.hint ? true : null,\n        hintText: model.hintText ? model.hintText : null,\n        helpText: model.helpText ? model.helpText : null,\n        hidden: model.hidden ? true : false,\n        id: model.id ? model.id : undefined,\n        label: ParseForAlias(model.label),\n        metadata: model.metadata,\n        maxlength: model.maxlength || 64,\n        mask: typeof model.mask === 'string' && model.mask.length ? model.mask : null,\n        name: model.name ? model.name : null,\n        noInitialValue: model.noInitialValue ? model.noInitialValue : false,\n        patch: model.patch,\n        pattern: typeof model.pattern === 'string' && model.pattern.length ? model.pattern : null,\n        prefix: IsString(model.prefix, true) ? model.prefix : null,\n        prevent: IsArray(model.prevent, true) ? model.prevent : null,\n        readonly: model.readonly ? true : false,\n        session: model.session,\n        sessionPath: model.sessionPath,\n        suffix: typeof model.suffix === 'string' && model.suffix.length ? model.suffix : null,\n        transformation: IsString(model.transformation, true) ? model.transformation : null,\n        validators: validators,\n        value: FieldItemTextValue(model, core),\n      };\n      config = new InputConfig(<InputConfigInterface>CleanObject(configInterface));\n      break;\n    case 'number':\n      validators = [];\n      if (model.min) validators.push(Validators.max(model.min));\n      if (model.max) validators.push(Validators.max(model.max));\n      if (model.required) validators.push(Validators.required);\n      configInterface = <NumberConfigInterface>{\n        bubble: model.bubble ? true : false,\n        facade: model.facade ? true : false,\n        helpText: model.helpText ? model.helpText : null,\n        hidden: model.hidden ? true : false,\n        id: model.id ? model.id : undefined,\n        label: ParseForAlias(model.label),\n        metadata: model.metadata,\n        min: typeof model.min !== 'undefined' ? model.min : 1,\n        noInitialValue: model.noInitialValue ? model.noInitialValue : false,\n        name: model.name ? model.name : null,\n        prefix: IsString(model.prefix, true) ? model.prefix : '',\n        patch: model.patch,\n        readonly: model.readonly ? true : false,\n        session: model.session,\n        sessionPath: model.sessionPath,\n        suffix: typeof model.suffix === 'string' && model.suffix.length ? model.suffix : '',\n        step: typeof model.step ? model.step : 1,\n        transformation: IsString(model.transformation, true) ? model.transformation : null,\n        validators: validators,\n        value: FieldItemTextValue(model, core),\n      };\n      config = new NumberConfig(<NumberConfigInterface>CleanObject(configInterface));\n      break;\n    case 'date':\n      configInterface = <DateConfigInterface>{\n        bubble: model.bubble ? true : false,\n        disabled: model.disabled,\n        facade: model.facade ? true : false,\n        helpText: model.helpText ? model.helpText : null,\n        id: model.id ? model.id : undefined,\n        label: ParseForAlias(model.label),\n        min: IsString(model.min, true) ? model.min : null,\n        // min: isNaN( model.min ) === false ? model.min : null,\n        max: isNaN(model.max) === false ? model.max : null,\n        metadata: model.metadata,\n        noInitialValue: model.noInitialValue ? model.noInitialValue : false,\n        name: model.name ? model.name : null,\n        patch: model.patch,\n        required: model.required,\n\n        readonly: model.readonly ? true : false,\n        session: model.session,\n        sessionPath: model.sessionPath,\n        transformation: IsString(model.transformation, true) ? model.transformation : null,\n        type: IsString(model.type, true) ? model.type : \"Basic\",\n        value: FieldItemTextValue(model, core),\n        validators: model.required ? [Validators.required] : undefined,\n      };\n      configInterface = CleanObject(configInterface);\n      if (IsDefined(model.filterPredicate)) configInterface.filterPredicate = model.filterPredicate;\n      config = new DateConfig(<DateConfigInterface>configInterface);\n      break;\n    case 'datepicker':\n      configInterface = <DatePickerConfigInterface>{\n        bubble: model.bubble ? true : false,\n        disabled: model.disabled,\n        facade: model.facade ? true : false,\n        helpText: model.helpText ? model.helpText : null,\n        id: model.id ? model.id : undefined,\n        label: ParseForAlias(model.label),\n        min: IsString(model.min, true) ? model.min : null,\n        // min: isNaN( model.min ) === false ? model.min : null,\n        max: isNaN(model.max) === false ? model.max : null,\n        metadata: model.metadata,\n        noInitialValue: model.noInitialValue ? model.noInitialValue : false,\n        name: model.name ? model.name : null,\n        patch: model.patch,\n        required: model.required,\n        transformation: IsString(model.transformation, true) ? model.transformation : null,\n        readonly: model.readonly ? true : false,\n        session: model.session,\n        sessionPath: model.sessionPath,\n        value: FieldItemTextValue(model, core),\n        validators: model.required ? [Validators.required] : undefined,\n      };\n      configInterface = CleanObject(configInterface);\n      if (IsDefined(model.filterPredicate)) configInterface.filterPredicate = model.filterPredicate;\n      config = new DatePickerConfig(<DatePickerConfigInterface>configInterface);\n      break;\n    case 'time':\n      configInterface = <TimeConfigInterface>{\n        bubble: model.bubble ? true : false,\n        disabled: model.disabled,\n        facade: model.facade ? true : false,\n        helpText: model.helpText ? model.helpText : null,\n        interval: model.interval ? model.interval : 15,\n        id: model.id ? model.id : undefined,\n        label: ParseForAlias(model.label),\n        metadata: model.metadata,\n        min: typeof model.min === 'string' ? model.min : null,\n        max: typeof model.max === 'string' ? model.max : null,\n        name: model.name ? model.name : null,\n        noInitialValue: model.noInitialValue ? model.noInitialValue : false,\n        patch: model.patch,\n        readonly: model.readonly ? true : false,\n        session: model.session,\n        sessionPath: model.sessionPath,\n        time: model.time ? model.time : 12,\n        transformation: IsString(model.transformation, true) ? model.transformation : null,\n        value: FieldItemTextValue(model, core),\n        validators: model.required ? [Validators.required] : undefined,\n      };\n      config = new TimeConfig(<TimeConfigInterface>CleanObject(configInterface));\n      break;\n    case 'checkbox':\n      model.options.values = FieldItemOptionValues(model, core);\n      model.options.converted = true;\n      configInterface = <CheckboxConfigInterface>{\n        bubble: model.bubble ? true : false,\n        disabled: model.disabled,\n        facade: model.facade ? true : false,\n        helpText: model.helpText ? model.helpText : undefined,\n        id: model.id ? model.id : undefined,\n        label: model.label ? ParseForAlias(model.label) : '',\n        labelPosition: typeof model.labelPosition !== 'undefined' ? model.labelPosition : 'after',\n        metadata: model.metadata,\n        name: model.name ? model.name : null,\n        noInitialValue: model.noInitialValue ? model.noInitialValue : false,\n        options: model.options,\n        patch: model.patch,\n        session: model.session,\n        sessionPath: model.sessionPath,\n        textOverflow: model.textOverflow ? model.textOverflow : 'wrap',\n        value: FieldItemBooleanValue(model, core),\n      };\n      config = new CheckboxConfig(<CheckboxConfigInterface>CleanObject(configInterface));\n      break;\n    case 'switch':\n      configInterface = <SwitchConfigInterface>{\n        bubble: model.bubble ? true : false,\n        disabled: model.disabled,\n        facade: model.facade ? true : false,\n        helpText: model.helpText ? model.helpText : undefined,\n        id: model.id ? model.id : undefined,\n        label: model.label ? ParseForAlias(model.label) : '',\n        labelPosition: typeof model.labelPosition !== 'undefined' ? model.labelPosition : 'after',\n        metadata: model.metadata,\n        name: model.name ? model.name : null,\n        noInitialValue: model.noInitialValue ? model.noInitialValue : false,\n        patch: model.patch,\n        session: model.session,\n        sessionPath: model.sessionPath,\n        textOverflow: model.textOverflow ? model.textOverflow : 'wrap',\n        value: FieldItemBooleanValue(model, core),\n      };\n      config = new SwitchConfig(<SwitchConfigInterface>CleanObject(configInterface));\n      break;\n    case 'minmax':\n      const minColumn = model.minColumn ? model.minColumn : 'min';\n      const maxColumn = model.maxColumn ? model.maxColumn : 'max';\n\n      const minValue = typeof model.minValue !== 'undefined' && model.minValue !== null ? ParseModelValue(model.minValue, core) : IsObject(core.entity, true) && typeof core.entity[minColumn] !== 'undefined' ? core.entity[minColumn] : 1;\n      const maxValue = typeof model.maxValue !== 'undefined' && model.maxValue !== null ? ParseModelValue(model.maxValue, core) : IsObject(core.entity, true) && typeof core.entity[maxColumn] !== 'undefined' ? core.entity[maxColumn] : 10;\n\n      configInterface = <MinMaxConfigInterface>{\n        bubble: model.bubble ? true : false,\n        disabled: model.disabled,\n        facade: model.facade ? true : false,\n        helpText: model.helpText ? model.helpText : undefined,\n        id: model.id ? model.id : undefined,\n        label: model.label ? ParseForAlias(model.label) : '',\n        minColumn: model.minColumn ? model.minColumn : 'min',\n        maxColumn: model.maxColumn ? model.maxColumn : 'max',\n        minValue: minValue,\n        maxValue: maxValue,\n        metadata: model.metadata,\n        name: model.name ? model.name : null,\n        noInitialValue: model.noInitialValue ? model.noInitialValue : false,\n        patch: model.patch,\n        readonly: model.readonly ? true : false,\n        session: model.session,\n        sessionPath: model.sessionPath,\n      };\n      config = new MinMaxConfig(<MinMaxConfigInterface>CleanObject(configInterface));\n      break;\n    case 'radio':\n      model.options.values = FieldItemOptionValues(model, core);\n      model.options.converted = true;\n      configInterface = <RadioConfigInterface>{\n        bubble: model.bubble ? true : false,\n        disabled: model.disabled,\n        facade: model.facade ? true : false,\n        helpText: model.helpText ? model.helpText : '',\n        id: model.id ? model.id : undefined,\n        labelPosition: typeof model.labelPosition !== 'undefined' ? model.labelPosition : 'above',\n        label: model.label ? ParseForAlias(model.label) : '',\n        layout: typeof model.layout !== 'undefined' ? model.layout : 'row',\n        metadata: model.metadata,\n        name: model.name ? model.name : null,\n        noInitialValue: model.noInitialValue ? model.noInitialValue : false,\n        options: model.options,\n        patch: model.patch,\n        reset: model.reset ? true : false,\n        readonly: model.readonly ? true : false,\n        session: model.session,\n        sessionPath: model.sessionPath,\n        sort: typeof model.labelPosition !== 'undefined' ? model.sort : false,\n        value: FieldItemTextValue(model, core),\n      };\n      model.options.converted = true;\n      config = new RadioConfig(<RadioConfigInterface>CleanObject(configInterface));\n      break;\n    case 'textarea':\n      configInterface = <TextareaConfigInterface>{\n        autoSize: model.autoSize ? true : false,\n        bubble: model.bubble ? true : false,\n        facade: model.facade ? true : false,\n        height: model.height || 70,\n        helpText: model.helpText ? model.helpText : '',\n        id: model.id ? model.id : undefined,\n        label: ParseForAlias(model.label),\n        maxlength: model.maxlength || 255,\n        metadata: model.metadata,\n        maxHeight: model.maxHeight || null,\n        name: model.name ? model.name : null,\n        noInitialValue: model.noInitialValue ? model.noInitialValue : false,\n        pattern: typeof model.pattern === 'string' && model.pattern.length ? model.pattern : null,\n        patch: model.patch,\n        readonly: model.readonly,\n        session: model.session,\n        sessionPath: model.sessionPath,\n        validators: model.required ? [Validators.required, Validators.maxLength(model.maxlength || 255)] : [Validators.maxLength(model.maxlength || 255)],\n        value: FieldItemTextValue(model, core),\n      };\n      config = new TextareaConfig(<TextareaConfigInterface>CleanObject(configInterface));\n      break;\n    case 'label':\n      value = typeof model.value !== 'undefined' && model.value !== null ? ParseModelValue(model.value, core) : IsObject(core.entity, true) && IsObject(core.entity, true) && typeof core.entity[(model.name ? model.name : null)] !== 'undefined' ? core.entity[(model.name ? model.name : null)] : '';\n      if (model.transformation && typeof (value) !== 'undefined') {\n        value = PopTransform(value, model.transformation);\n      }\n\n      if (typeof (model.copyLabelDisplay) !== 'undefined') {\n        model.copyLabelDisplay = ParseModelValue(model.copyLabelDisplay, core);\n        if (model.copyLabelDisplay && model.copyLabelDisplayTransformation) {\n          model.copyLabelDisplay = PopTransform(model.copyLabelDisplay, model.copyLabelDisplayTransformation);\n        }\n      }\n\n      if (typeof (model.copyLabelBody) !== 'undefined') {\n        model.copyLabelBody = ParseModelValue(model.copyLabelBody, core);\n        if (model.copyLabelBody && model.copyLabelBodyTransformation) {\n          model.copyLabelBody = PopTransform(model.copyLabelBody, model.copyLabelBodyTransformation);\n        }\n      }\n\n      if (typeof (model.copyValueDisplay) !== 'undefined') {\n        model.copyValueDisplay = model.copyValueDisplay !== null ? ParseModelValue(model.copyValueDisplay, core) : '';\n        if (model.copyValueDisplay && model.copyValueDisplayTransformation) {\n          model.copyValueDisplay = PopTransform(model.copyValueDisplay, model.copyValueDisplayTransformation);\n        }\n      }\n\n      if (typeof (model.copyValueBody) !== 'undefined') {\n        model.copyValueBody = model.copyValueBody !== null ? ParseModelValue(model.copyValueBody, core) : '';\n        if (model.copyValueBody && model.copyValueBodyTransformation) {\n          model.copyValueBody = PopTransform(model.copyValueBody, model.copyValueBodyTransformation);\n        }\n      }\n\n      if (typeof (model.valueButtonDisplay) !== 'undefined') {\n        model.valueButtonDisplay = ParseModelValue(model.valueButtonDisplay, core);\n        if (model.valueButtonDisplay && model.valueButtonDisplayTransformation) {\n          model.valueButtonDisplay = PopTransform(model.valueButtonDisplay, model.valueButtonDisplayTransformation);\n        }\n      }\n\n      configInterface = <LabelConfigInterface>CleanObject({\n        name: model.name ? model.name : null,\n        label: ParseForAlias(model.label),\n        button: model.button,\n        border: model.border,\n        icon: model.icon,\n        iconType: model.iconType,\n        html: model.html,\n        textOverflow: model.textOverflow ? model.textOverflow : 'wrap',\n\n        labelButton: !!model.labelButton,\n        copyLabel: !!model.copyLabel,\n        copyLabelBody: model.copyLabelBody ? model.copyLabelBody : null,\n        copyLabelBodyTransformation: model.copyLabelBodyTransformation ? model.copyLabelBodyTransformation : null,\n        copyLabelDisplay: model.copyLabelDisplay ? model.copyLabelDisplay : null,\n        copyLabelDisplayTransformation: model.copyLabelDisplayTransformation ? model.copyLabelDisplayTransformation : null,\n\n\n        copyValue: !!model.copyValue,\n        copyValueBody: model.copyValueBody ? model.copyValueBody : null,\n        copyValueBodyTransformation: model.copyValueBodyTransformation ? model.copyValueBodyTransformation : null,\n        copyValueDisplay: model.copyValueDisplay ? model.copyValueDisplay : null,\n        copyValueDisplayTransformation: model.copyValueDisplayTransformation ? model.copyValueDisplayTransformation : null,\n\n        valueButton: !!model.valueButton,\n        valueButtonDisabled: !!model.valueButtonDisabled,\n        valueButtonDisplay: model.valueButtonDisplay ? model.valueButtonDisplay : null,\n        valueButtonDisplayTransformation: model.valueButtonDisplayTransformation ? model.valueButtonDisplayTransformation : null,\n\n        value: value,\n        link: model.link || false,\n        helpText: model.helpText ? model.helpText : undefined,\n        route: model.route && !isDialogLimit ? ParseModelValue(model.route, core) : '',\n        metadata: model.metadata,\n      });\n      config = new LabelConfig(<LabelConfigInterface>CleanObject(configInterface));\n      break;\n    case 'textstring':\n      configInterface = <TextConfigInterface>{\n        border: model.border,\n        className: model.className,\n        header: model.header,\n        id: model.id ? model.id : undefined,\n        name: model.name ? model.name : null,\n        size: model.size,\n        textOverflow: model.textOverflow,\n        value: model.value ? model.value : '',\n        warning: model.warning\n      };\n      config = new TextConfig(<TextConfigInterface>CleanObject(configInterface));\n      break;\n    case 'button':\n      configInterface = <ButtonConfigInterface>{\n        bubble: model.bubble ? true : false,\n        disabled: model.disabled,\n        facade: model.facade ? true : false,\n        icon: model.icon ? model.icon : 'help_outline',\n        helpText: model.helpText ? model.helpText : undefined,\n        id: model.id ? model.id : undefined,\n        metadata: model.metadata,\n        name: model.name ? model.name : null,\n        patch: model.patch,\n        value: FieldItemTextValue(model, core),\n      };\n      config = new ButtonConfig(<ButtonConfigInterface>CleanObject(configInterface));\n      break;\n    case 'metadata':\n      const val = IsDefined(model.value) ? model.value : IsObject(core.entity, true) && model.name in core.entity ? core.entity[model.name] : null;\n      config = new MetadataConfig(model.name, val);\n      break;\n    default:\n      PopLog.warn(`FieldItemModelConfig`, `buildCoreFieldItemConfig`, model.form);\n      break;\n  }\n\n  return config;\n}\n\n\n","import {\n  Component,\n  ElementRef,\n  EventEmitter,\n  HostBinding,\n  Input,\n  OnDestroy,\n  OnInit,\n  Output\n} from '@angular/core';\nimport {\n  CoreConfig,\n  EntityExtendInterface,\n  EventPromiseCallback,\n  PopBaseEventInterface,\n  PopEnv,\n  PopTemplate\n} from './pop-common.model';\n\nimport {\n  HasEvents,\n  HasCore,\n  ComponentTraitContainerInterface,\n  ComponentDomInterface,\n  GetComponentAssetContainer,\n  GetComponentTraitContainer,\n  DestroyComponentDom,\n  GetComponentDomContainer,\n  ComponentLogInterface,\n} from './pop-common-dom.models';\n\nimport {Subscription} from 'rxjs';\nimport {\n  GetHttpErrorMsg,\n  IsArray,\n  IsCallableFunction,\n  IsObject,\n  IsString,\n  JsonCopy,\n  StorageGetter,\n} from './pop-common-utility';\nimport {PopDomService} from './services/pop-dom.service';\nimport {PopTabMenuService} from './modules/base/pop-tab-menu/pop-tab-menu.service';\nimport {EvaluateWhenConditions, IsValidFieldPatchEvent} from './modules/entity/pop-entity-utility';\nimport {HttpErrorResponse} from '@angular/common/http';\n\n\n@Component({\n  selector: 'lib-pop-base-component',\n  template: `Base Component`,\n})\nexport class PopExtendComponent implements HasEvents, HasCore, OnInit, OnDestroy {\n  @Input() position = 1;\n  @Input() core: CoreConfig = <CoreConfig>{};\n  @Output() events: EventEmitter<PopBaseEventInterface> = new EventEmitter<PopBaseEventInterface>();\n  @Input() extension: EntityExtendInterface;\n\n  @Input() onLoad?: EventPromiseCallback;\n  @Input() onEvent?: EventPromiseCallback;\n  @Input() onUnload?: EventPromiseCallback;\n\n  @Input() when: any[] = null;\n  @HostBinding('class.sw-hidden') @Input() hidden = false;\n\n  name: string;\n  internal_name: string;\n  protected id: string | number = 1;\n\n  protected el: ElementRef;\n  protected trait = <ComponentTraitContainerInterface>GetComponentTraitContainer();\n  protected asset;\n  protected srv;\n  protected _domRepo: PopDomService;\n  protected _tabRepo: PopTabMenuService;\n\n  /**\n   * The Dom is boiler plate for managing the state and assets of the html view\n   */\n  public dom: ComponentDomInterface;\n\n  public log: ComponentLogInterface;\n\n  /**\n   * The ui is a container for assets that are created for the html view specifically\n   */\n  public ui;\n\n\n  constructor() {\n    if (!this.asset) this.asset = GetComponentAssetContainer();\n    if (!this.ui) this.ui = GetComponentAssetContainer();\n    this.log = this._initializeLogSystem();\n    this.dom = this._initializeDom();\n  }\n\n\n  ngOnInit() {\n    this.dom.loading();\n    const init = new Promise<boolean>(async (resolve) => {\n      await this.dom._extend();\n      await this.dom.configure();\n      await this.dom.register();\n      await this.dom.proceed();\n      if (IsCallableFunction(this.onLoad)) {\n        await this.onLoad(this.core, <PopBaseEventInterface>{\n          source: this.name,\n          type: 'component',\n          name: 'onLoad',\n          data: this\n        }, this.dom);\n      }\n      this.dom.ready();\n      return resolve(true);\n    });\n\n    init.then(() => {\n      this.log.init();\n    });\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy() {\n    const destroy = new Promise<boolean>(async (resolve) => {\n      if (IsCallableFunction(this.onUnload)) {\n        await this.onUnload(this.core, <PopBaseEventInterface>{\n          source: this.name,\n          type: 'component',\n          name: 'onUnload',\n          data: this\n        });\n      }\n      await this.dom.unload();\n      if (this.dom.repo) this.dom.store();\n      this.dom.destroy();\n\n      return resolve(true);\n    });\n    destroy.then(() => {\n      this.log.destroy();\n    });\n  }\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  private _initializeDom(): ComponentDomInterface {\n    return <ComponentDomInterface>{\n      ...GetComponentDomContainer(), ...{\n        /**\n         * Initialize the component in a loading state\n         */\n        loading: () => {\n          this.dom.error = {code: 0, message: ''};\n          this.dom.state.loading = true;\n          this.dom.state.loader = false;\n          this.dom.setTimeout('delay-loader-trigger', () => {\n            this.dom.state.loader = true;\n          }, 500);\n        },\n\n        /**\n         * Configure the component tailored to its specific needs\n         */\n        _extend: (): Promise<boolean> => {\n          return new Promise((resolve) => {\n            const repos = Object.keys(this).filter((key: string) => String(key).startsWith('_') && String(key).endsWith('Repo') && String(key).length > 6 && IsObject(this[key], true));\n            if (IsArray(repos, true)) {\n              if (!(IsObject(this.srv))) this.srv = {};\n              repos.map((repoName: string) => {\n                const srvName = repoName.replace('_', '').replace('Repo', '');\n                // this.log.info( `Transferred ${repoName} to srv container as ${srvName}` );\n                if (srvName === 'dom') {\n                  this.dom.repo = this[repoName];\n                } else {\n                  this.srv[srvName] = this[repoName];\n                }\n                delete this[repoName];\n              });\n            }\n            return resolve(true);\n          });\n        },\n\n        /**\n         * Configure the component tailored to its specific needs\n         */\n        configure: (): Promise<boolean> => {\n          return new Promise((resolve) => {\n            return resolve(true);\n          });\n        },\n\n        /**\n         * Configure the component tailored to its specific needs\n         */\n        proceed: (): Promise<boolean> => {\n          return new Promise((resolve) => {\n            return resolve(true);\n          });\n        },\n\n\n        /**\n         * Trigger the view to render\n         */\n        ready: () => {\n          this.dom.setTimeout('delay-loader-trigger', null);\n          this.dom.state.loading = false;\n          this.dom.state.loaded = true;\n          this.dom.state.loader = false;\n          this.dom.state.refresh = false;\n          if (IsArray(this.when, true)) {\n            this.log.info(`eval when`, this.when);\n            this.hidden = !EvaluateWhenConditions(this.core, this.when, this.core);\n          }\n        },\n\n        /**\n         * Trigger the view to refresh\n         */\n        refreshing: () => {\n          this.dom.state.refresh = true;\n        },\n\n\n        /**\n         * Register this component in the PopDomService so that session, state, etc can be preserved\n         * It will also bind events to the appropriate handlers\n         * CoreConfig is obviously something that you must have for any of this to work\n         */\n        register: (): Promise<boolean> => {\n          return new Promise<boolean>(async (resolve) => {\n            if (this.el && !this.dom.width.outer) this.dom.width.outer = this.el.nativeElement.getBoundingClientRect().width;\n            if (IsObject(this.core, true)) {\n              if (IsObject(this.core.access, true)) this.dom.access = JsonCopy(this.core.access);\n              if (typeof this.dom.handler.core === 'function' || IsArray(this.when, true)) {\n                this.dom.setSubscriber('on-core-event', this.core.channel.subscribe(async (event: PopBaseEventInterface) => {\n                  // if( event.source !== this.name ){\n                  if (IsValidFieldPatchEvent(this.core, event) && IsArray(this.when)) {\n                    this.log.info('eval when', this.when);\n                    this.dom.setTimeout('eval-when', () => {\n                      this.hidden = !EvaluateWhenConditions(this.core, this.when, this.core);\n                    }, 50);\n                  }\n\n                  if (event.source && event.target) {\n                    if (event.source && event.source === this.name) return;\n                    if (event.target && String(event.target).search(this.name) === -1) return;\n                  }\n                  if (IsCallableFunction(this.dom.handler.core)) this.dom.handler.core(IsObject(this.core, true) ? this.core : null, event);\n                  // }\n                }));\n              }\n            }\n\n            if (this.name && typeof this.id !== 'undefined') {\n              if (this.dom.repo && typeof this.dom.repo.onRegister === 'function') {\n                this.dom.repo.onRegister(this);\n              }\n            }\n\n            if (IsCallableFunction(this.onEvent)) {\n              this.dom.setSubscriber(`on-event`, this.events.subscribe(async (event: PopBaseEventInterface) => {\n                await this.onEvent(this.core, event, this.dom);\n                this.log.event(this.name, event);\n              }));\n            }\n            return resolve(true);\n          });\n        },\n\n\n        find: (assetType: 'component' | 'field' | 'el', name: string | number, id: string | number = 1): any => {\n          let asset = null;\n          if (assetType === 'field') {\n            const fieldRepo = StorageGetter(this.dom, ['repo', 'ui', 'fields']);\n            asset = fieldRepo.get(name);\n            asset = StorageGetter(asset, ['inputs', 'config']);\n          } else if (assetType === 'component') {\n            asset = StorageGetter(this.dom, ['repo', 'components', String(name)]);\n            if (IsObject(asset) && id in asset) {\n              asset = asset[id];\n            } else {\n              asset = null;\n            }\n          } else if (this.el && assetType === 'el') {\n            asset = this.el.nativeElement.querySelector(name);\n          }\n\n          return asset;\n        },\n\n        focus: (querySelector: string, delay: 50): void => {\n          if (this.el && IsString(querySelector, true)) {\n            this.dom.setTimeout('focus-child-element-delay', () => {\n              this.dom.setTimeout('focus-child-element', () => {\n                const childEl = this.el.nativeElement.querySelector(querySelector);\n                if (childEl) {\n                  childEl.focus();\n                }\n              }, 0);\n            }, delay);\n          }\n        },\n\n        setError(err: HttpErrorResponse = null, modal = false) {\n          if (IsObject(err)) {\n            if (modal) {\n              PopTemplate.error({code: (err.status ? err.status : 422), message: GetHttpErrorMsg(err)});\n            } else {\n              this.dom.error.code = err.status ? err.status : 422;\n              this.dom.error.message = GetHttpErrorMsg(err);\n            }\n          } else {\n            this.dom.error.message = '';\n          }\n        },\n\n        /**\n         * Configure operations that need to happen when this component is going to be destroyed\n         */\n        unload: (): Promise<boolean> => {\n          return new Promise<boolean>(async (resolve) => {\n            return resolve(true);\n          });\n        },\n        /**\n         * Preferred method of setting a subscriber\n         * @param subscriptionKey\n         * @param subscription\n         */\n        setSubscriber: (subscriptionKey: string, subscription: Subscription = null) => {\n          if (subscriptionKey && this.dom.subscriber && subscriptionKey in this.dom.subscriber && this.dom.subscriber[subscriptionKey] && typeof this.dom.subscriber[subscriptionKey].unsubscribe === 'function') {\n            this.dom.subscriber[subscriptionKey].unsubscribe();\n          }\n          if (subscription) {\n            this.dom.subscriber[subscriptionKey] = subscription;\n          }\n        },\n        /**\n         * Preferred method of setting a timeout\n         * @param timeoutKey\n         * @param callback\n         * @param delay\n         */\n        setTimeout: (timeoutKey: string, callback = null, delay = 250) => {\n          if (timeoutKey && this.dom.delay && timeoutKey in this.dom.delay && this.dom.delay[timeoutKey]) {\n            clearTimeout(this.dom.delay[timeoutKey]);\n          }\n          if (typeof callback === 'function') {\n            this.dom.delay[timeoutKey] = setTimeout(callback, delay);\n          }\n        },\n\n        setHeight: (parentHeight: number, overhead: number) => {\n          if (this.name && parentHeight > 0) {\n            this.dom.overhead = overhead;\n            this.dom.height = {\n              outer: parentHeight,\n              inner: parentHeight - overhead,\n              split: +((parentHeight - overhead) / 2),\n              default: 0\n            };\n          }\n        },\n\n        setHeightWithParent: (parentClassName: string = null, overhead: number = 0, defaultHeight: number): Promise<boolean> => {\n          return new Promise((resolve) => {\n            if (this.el) {\n              this.dom.waitForParent(this.el, parentClassName, 10, 10).then((parentEl: Element) => {\n                if (parentEl) {\n                  this.dom.waitForParentHeight(parentEl).then((parentHeight: number) => {\n                    if (parentHeight < defaultHeight) parentHeight = defaultHeight;\n                    if (parentHeight) {\n                      this.dom.setHeight(+parentHeight, overhead);\n                      resolve(true);\n                    } else {\n                      this.dom.setHeight(defaultHeight, overhead);\n                      resolve(true);\n                    }\n                  });\n                } else {\n                  this.dom.setHeight(defaultHeight, overhead);\n                  resolve(true);\n                }\n              });\n            } else {\n              resolve(false);\n            }\n          });\n        },\n\n        focusNextInput(el: ElementRef): void {\n          if (el) {\n            let limit = 5;\n            let input = null;\n            let next = el.nativeElement.nextElementSibling;\n            while (limit && !input) {\n              input = next.querySelector('input[type=text]');\n              if (!input) {\n                input = next.querySelector('input[type=checkbox]');\n              }\n              if (!input) {\n                input = next.querySelector('mat-select');\n              }\n\n              if (!input) {\n                input = next.querySelector('button');\n              }\n\n              if (!input) {\n                if (next.nativeElement && next.nativeElement.nextElementSibling) {\n                  next = next.nativeElement.nextElementSibling;\n                } else if (next.nextElementSibling) {\n                  next = <Element>next;\n                  next = next.nextElementSibling;\n                } else {\n                  limit = 0;\n                }\n              }\n              limit--;\n            }\n\n            if (input) {\n              if (input instanceof ElementRef) {\n                input.nativeElement.focus();\n              } else if (IsCallableFunction(next.focus)) {\n                input.focus();\n              }\n            }\n          }\n        },\n\n        setWithComponentInnerHeight: (component: string, componentId = 1, overhead: number, defaultHeight: number): Promise<number> => {\n          return new Promise((resolve) => {\n            if (this.dom.repo) {\n              let height = this.dom.repo.getComponentHeight(component);\n              if (height && height.inner) {\n                height = height.inner;\n              } else {\n                height = defaultHeight;\n              }\n\n              this.dom.setHeight(+height, overhead);\n              resolve(this.dom.height.inner);\n            } else {\n              this.dom.setHeight(+defaultHeight, overhead);\n              resolve(this.dom.height.inner);\n            }\n          });\n        },\n\n        waitForParent: (el: ElementRef, className: string = null, time: number = 50, counter: number = 5) => {\n          let interval;\n          let parentEl;\n          return new Promise((resolve) => {\n            interval = setInterval(() => {\n              parentEl = this.dom.findParentElement(el, className);\n              if (!counter || (parentEl)) {\n                clearInterval(interval);\n                return resolve(parentEl);\n              }\n              counter--;\n            }, time);\n          });\n        },\n\n        waitForParentHeight: (el: Element, time: number = 5, counter: number = 10) => {\n          return new Promise((resolve) => {\n            const interval = setInterval(() => {\n              if (!counter || (el && el.clientHeight)) {\n                clearInterval(interval);\n                return resolve(el.clientHeight);\n              }\n              counter--;\n            }, time);\n          });\n        },\n\n        findParentElement: (el: ElementRef, className: string = null) => {\n          let attempts = 10;\n          let found;\n          if (el && el.nativeElement && el.nativeElement.parentElement) {\n            let parent = el.nativeElement.parentElement;\n            while (!found && attempts) {\n              if (parent) {\n                if (className) {\n                  if (parent.classList && parent.classList.contains(className)) {\n                    found = parent;\n                  }\n                } else {\n                  found = parent;\n                }\n                if (!found) {\n                  parent = parent.parentElement;\n                }\n              }\n              attempts--;\n            }\n          }\n          return found;\n        },\n        store: (key: string = null) => {\n          if (this.dom.repo && this.name && this.id) {\n            return this.dom.repo.onSession(this, key);\n          }\n        },\n        destroy: () => {\n          if (this.dom) DestroyComponentDom(this.dom);\n        }\n      }\n    };\n  }\n\n  private _initializeLogSystem(): ComponentLogInterface {\n    return <ComponentLogInterface>{\n      repo: {\n        message: (message: string) => {\n          return `%c${message}`;\n        },\n        color: (type: string) => {\n          let color = 'aqua';\n          switch (type) {\n            case 'warn':\n              color = 'orange';\n              break;\n            case 'force':\n            case 'error':\n            case 'destroy':\n              color = 'red';\n              break;\n            case 'info':\n              color = 'aqua';\n              break;\n            case 'event':\n              color = 'yellow';\n              break;\n            case 'onSession':\n            case 'event-trigger':\n              color = 'gold';\n              break;\n            case 'cache-in':\n              color = 'green';\n              break;\n            case 'cache-out':\n              color = 'darkgreen';\n              break;\n            case 'dom':\n              color = 'brown';\n              break;\n            case 'debug':\n              color = 'pink';\n              break;\n            case 'api':\n              color = 'darkgreen';\n              break;\n            case 'config':\n              color = 'pink';\n              break;\n            case 'theme':\n              color = 'purple';\n              break;\n            default:\n              color = 'aqua';\n              break;\n          }\n          return `color: ${color}`;\n        },\n\n\n        enabled: (type: string = '', component: string = null) => {\n          if (IsObject(PopEnv, true) && PopEnv.debug) {\n            if (type && Array.isArray(PopEnv.debugTypes)) {\n              if (PopEnv.debugTypes.includes(type)) return true;\n            }\n            if (typeof PopEnv.debugLevel === 'number') {\n              if (['error', 'onSession'].includes(type) && PopEnv.debug >= 1) {\n                return true;\n              }\n              if (['warning', 'info'].includes(type) && PopEnv.debug >= 2) {\n                return true;\n              }\n              if (['events'].includes(type) && PopEnv.debug >= 2) {\n                return true;\n              }\n            }\n            if (component && typeof PopEnv.debugComponents === 'string') {\n              return PopEnv.debugComponents.search(component) > -1;\n            }\n          }\n          return false;\n        },\n\n\n        init: (componentName: string, message: string, data: any = '', force = false) => {\n          const type = 'init';\n          if (this.log.repo.enabled(type, componentName) || force) console.log(this.log.repo.message(`${componentName}:${message}`), this.log.repo.color((force ? 'force' : type)), data);\n        },\n\n        debug: (componentName: string, message: string, data: any = '', force = false) => {\n          const type = 'debug';\n          if (this.log.repo.enabled(type, componentName) || force) console.log(this.log.repo.message(`${componentName}:${message}`), this.log.repo.color((force ? 'force' : type)), data);\n        },\n\n\n        cache: (componentName: string, message: string, set = true, force = false) => {\n          let type = 'cache';\n          if (this.log.repo.enabled(type, componentName) || force) {\n            type = set ? 'cache-in' : 'cache-out';\n            console.log(this.log.repo.message(`${componentName}:${message}`), this.log.repo.color((force ? 'force' : type)));\n          }\n        },\n\n\n        warn: (componentName: string, message: string, data: any = '', force = false) => {\n          const type = 'warn';\n          if (this.log.repo.enabled(type, componentName) || force) console.log(this.log.repo.message(`${componentName}:${message}`), this.log.repo.color((force ? 'force' : type)), data);\n        },\n\n\n        info: (componentName: string, message: string, data: any = '', force = false) => {\n          const type = 'info';\n          if (this.log.repo.enabled(type, componentName) || force) console.log(this.log.repo.message(`${componentName}:${message}`), this.log.repo.color((force ? 'force' : type)), data);\n        },\n\n\n        theme: (componentName: string, message: string, data: any = '', force = false) => {\n          const type = 'theme';\n          if (this.log.repo.enabled(type, componentName) || force) console.log(this.log.repo.message(`${componentName}:${message}`), this.log.repo.color((force ? 'force' : type)), data);\n        },\n\n\n        event: (componentName: string, message: string, event: PopBaseEventInterface, force = false) => {\n          const type = 'event';\n          if (this.log.repo.enabled(type, componentName) || force) console.log(this.log.repo.message(`${componentName}:${message}`), this.log.repo.color((force ? 'force' : type)), event);\n        },\n\n\n        error: (componentName: string, message: string, data: any = '', force = false) => {\n          const type = 'error';\n          if (this.log.repo.enabled(type, componentName) || force) {\n            console.log(this.log.repo.message(`${componentName}:${message}`), this.log.repo.color((force ? 'force' : type)), data);\n            // throw new Error('message');\n          }\n        }\n      },\n\n      init: () => {\n        if (this.log.repo.enabled('init', this.name)) console.log(this.log.repo.message(`${this.name}:init`), this.log.repo.color('init'), this);\n      },\n\n      debug: (msg = 'Debug', data: any = '') => {\n        if (this.log.repo.enabled('debug', this.name)) console.log(this.log.repo.message(`${this.name}:${msg}`), this.log.repo.color('debug'), data);\n      },\n\n      error: (msg = 'Error', error: any = '') => {\n        if (this.log.repo.enabled('error', this.name)) console.log(this.log.repo.message(`${this.name}:${msg}`), this.log.repo.color('error'), error);\n      },\n\n      warn: (msg = 'Warning', data: any = '') => {\n        if (this.log.repo.enabled('warn', this.name)) console.log(this.log.repo.message(`${this.name}:${msg}`), this.log.repo.color('error'), data);\n      },\n\n      info: (msg = 'info', data: any = '') => {\n        if (this.log.repo.enabled('event', this.name)) console.log(this.log.repo.message(`${this.name}:${msg}`), this.log.repo.color('info'), data);\n      },\n\n      event: (msg = 'event', event: PopBaseEventInterface) => {\n        if (this.log.repo.enabled('event', this.name)) console.log(this.log.repo.message(`${this.name}:${msg}`), this.log.repo.color('event'), event);\n      },\n\n      config: (msg = 'config', config: any = '') => {\n        if (this.log.repo.enabled('config', this.name)) console.log(this.log.repo.message(`${this.name}:${msg}`), this.log.repo.color('config'), config);\n      },\n      destroy: () => {\n        if (this.log.repo.enabled('destroy', this.name)) console.log(this.log.repo.message(`${this.name}:destroy`), this.log.repo.color('destroy'));\n      },\n    };\n  }\n}\n","import {Component, Inject, OnInit, ViewChild, ElementRef, isDevMode, OnDestroy} from '@angular/core';\nimport {PopBaseService} from '../../../services/pop-base.service';\nimport {App, AppMenu, Business, AuthDetails, AuthUser} from '../../../pop-common-token.model';\nimport {IsArray, IsObject, IsString, ObjectsMatch, SetSiteVar} from '../../../pop-common-utility';\nimport {\n  AppGlobalInterface,\n  KeyMap,\n  PopAliasRouteMap,\n  PopEnv,\n  PopHref,\n  PopTemplate,\n  ServiceInjector\n} from '../../../pop-common.model';\nimport {PopMenuService} from './pop-menu.service';\nimport {PopCredentialService} from '../../../services/pop-credential.service';\nimport {PopExtendComponent} from '../../../pop-extend.component';\nimport {Router} from '@angular/router';\n\n\n@Component({\n  selector: 'lib-pop-menu',\n  templateUrl: './pop-menu.component.html',\n  styleUrls: ['./pop-menu.component.scss']\n})\nexport class PopMenuComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @ViewChild('mmNavRef') mmNavRef: ElementRef;\n  public name = 'PopMenuComponent';\n\n\n  protected asset = {\n    existingBusinesses: <KeyMap<Business>>undefined\n  };\n\n  public ui = {\n    alternate_businesses: <any[]>[],\n    menus: {\n      all: <any[]>[],\n      more: <any[]>[]\n    },\n    user: <AuthUser>undefined\n  };\n\n  protected srv = {\n    base: <PopBaseService>ServiceInjector.get(PopBaseService),\n    credential: <PopCredentialService>ServiceInjector.get(PopCredentialService),\n    menu: <PopMenuService>ServiceInjector.get(PopMenuService),\n    router: <Router>ServiceInjector.get(Router),\n  };\n\n  constructor(\n    @Inject('APP_GLOBAL') private APP_GLOBAL: AppGlobalInterface,\n  ) {\n    super();\n\n    this.dom.configure = (): Promise<boolean> => {\n\n      // this component set the outer height boundary of this view\n      return new Promise(async (resolve) => {\n        await Promise.all([\n          this._setInitialConfig()\n        ]);\n        return resolve(true);\n      });\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise(async (resolve) => {\n        if (!this.dom.state.checkedContent && this.mmNavRef) {\n          this.onUpdateMenus();\n          this.dom.state.checkedContent = true;\n        }\n        return resolve(true);\n      });\n    };\n  }\n\n\n  ngOnInit() {\n    super.ngOnInit();\n  }\n\n\n\n  /**\n   * The user click to a app nav menu\n   * @param appPath\n   */\n  onChangeApp(appPath: string): void {\n    if (isDevMode() && IsString(PopHref)) { // Auto Login/Logout since there is no access to the prime-user-app\n      if (appPath === '/login') {\n        if (PopEnv.username && PopEnv.password) {\n          PopTemplate.lookBusy(30);\n          this.srv.credential.authenticate({\n            username: PopEnv.username,\n            password: PopEnv.password\n          }).then((auth: AuthDetails) => {\n            if (IsObject(auth, true)) {\n              return window.location.reload();\n            } else {\n              PopTemplate.error({message: String(auth), code: 500});\n            }\n          });\n        }\n      } else if (appPath === '/logout') {\n        PopTemplate.goodbye();\n        setTimeout(() => {\n          this.srv.credential.clear().subscribe(() => {\n            this.srv.base.switchApps(`/` + (IsString(PopHref, true) ? PopHref : ''));\n          });\n        }, 0);\n      } else {\n        PopTemplate.notify(`You Shall not Pass! Actually this link will take you to nowhere, so its been disabled.`);\n      }\n    } else {\n      this.srv.base.switchApps(appPath);\n    }\n  }\n\n\n  /**\n   * Temporary fx to help test if the menu can auto update itself to external changes\n   */\n  onAuthVerification() {\n    PopTemplate.verify();\n  }\n\n\n  /**\n   * A user can select from a list of businesses that their prime user has access to\n   * @param appPath\n   */\n  onChangeBusiness(id: number): void {\n    let slugs = <any>window.location.href.split(PopHref + '/').pop().trim();\n    slugs = <string[]>slugs.split('/');\n    slugs = slugs.slice(0, 1);\n    const path = slugs.join('/');\n    const redirect = `${window.location.origin}/${PopHref}/${slugs.join('/')}`;\n    const originalRoute = IsObject(PopAliasRouteMap, true) && path in PopAliasRouteMap ? PopAliasRouteMap[path] : null;\n    SetSiteVar('App.redirect', (originalRoute ? originalRoute : redirect));\n    this.srv.menu.changeBusiness(id);\n  }\n\n\n  /**\n   * Determine the presentation of the nav menus\n   */\n  onUpdateMenus() {\n    if (!this.dom.state.authenticated) {\n      this.ui.menus.all = [];\n      this.ui.menus.more = [];\n    } else {\n      const moreMenus = [];\n      let talliedMenuSize = 0;\n      const children = this.mmNavRef.nativeElement.children;\n      const maxWidth = this.mmNavRef.nativeElement.offsetWidth - 15;\n\n      for (let i = 0; i < children.length; i++) {\n        talliedMenuSize += children[i].offsetWidth;\n        if (talliedMenuSize < maxWidth) {\n          children[i].style.visibility = 'visible';\n        } else {\n          children[i].style.visibility = '';\n          moreMenus.push(this.ui.menus.all[i]);\n        }\n      }\n\n      this.ui.menus.more = moreMenus;\n    }\n  }\n\n\n  ngOnDestroy() {\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  /**\n   * Set the initial config for this component\n   * @private\n   */\n  private _setInitialConfig() {\n    return new Promise(async (resolve) => {\n\n      this.dom.active.path = `/${window.location.pathname.split('/')[1]}`;\n      this.dom.active.business = <Business>undefined;\n      this.dom.state.authenticated = false;\n      this.dom.state.checkedContent = false;\n      this.dom.state.isDevMode = isDevMode();\n\n      this._initialize();\n\n      this.dom.setSubscriber('init', this.APP_GLOBAL.init.subscribe((val: boolean) => {\n        if (val) {\n          this.dom.setTimeout(`init`, () => {\n            this._initialize();\n          }, 100);\n        }\n      }));\n      return resolve(true);\n    });\n  }\n\n  /**\n   * Initialize the component\n   * This is designed so that at any time a verification event can be fired from the Initializer module, and the menu can respond to the business(app)s that is stored in the new Auth Token\n   * Future:  A web socket will be able to detect a change in security+access of apps and trigger the menu to auto update\n   */\n  private _initialize() {\n    this.dom.state.authenticated = this.srv.menu.isAuthenticated();\n    this.ui.user = this.srv.base.getAuthPrimeUser();\n    this._loadBusiness();\n    setTimeout(() => {\n      this.onUpdateMenus();\n    }, 0);\n  }\n\n\n  /**\n   * Set the menus for the current business, apps across the top\n   * @param business\n   */\n  private _loadBusiness(): void {\n    // Token details should contain all the info to populate the menu bar.\n    const businesses = this.srv.base.getAuthBusinesses();\n    if (IsObject(businesses, true) && !(ObjectsMatch(this.asset.existingBusinesses, businesses))) { // check to see if an update is really required\n      this.asset.existingBusinesses = businesses;\n      // Set non-business unit stuff.\n      // Get the current buId from onSession storage.\n      const businessId = this.srv.base.getCurrentBusinessId();\n      this.ui.alternate_businesses = [];\n      // If a business unit has been found then populate the necessary objects.\n      if (businessId) {\n        Object.keys(businesses).map((buId) => {\n          const business = businesses[buId];\n          if (business.id === businessId) {\n            this.dom.active.business = <Business>{\n              id: business.id,\n              name: business.name,\n              short_name: business.short_name,\n              logo_main_url: business.logo_main_url,\n              logo_small_url: business.logo_small_url,\n            };\n            this._setBusinessAppMenus(business);\n          } else {\n            this.ui.alternate_businesses.push({\n              id: business.id,\n              name: business.name,\n              short_name: business.short_name,\n              logo_main_url: business.logo_main_url,\n              logo_small_url: business.logo_small_url,\n            });\n          }\n        });\n      }\n    }\n  }\n\n\n  /**\n   * This set the nav menu across the top of template\n   * @param business\n   */\n  private _setBusinessAppMenus(business: Business) {\n    if (business) {\n      if (IsArray(business.apps, true)) {\n        this.ui.menus.all = business.apps.filter((app: App) => {\n          return +app.active;\n        }).sort(function (a, b) {\n          if (a.sort < b.sort) return -1;\n          if (a.sort > b.sort) return 1;\n          return 0;\n        }).map((app: App) => {\n          return this._extractAppMenu(app);\n        });\n      } else if (IsObject(business.apps, true)) {\n        this.ui.menus.all = Object.keys(business.apps).map((appKey) => {\n          return this._extractAppMenu(business.apps[appKey]);\n        });\n      }\n    }\n  }\n\n\n  /**\n   * This fx will extract the necessary data out of the app data\n   * @param app\n   * @private\n   */\n  private _extractAppMenu(app: App): AppMenu {\n    return <AppMenu>{\n      name: app.label ? app.label : app.name,\n      path: `/${String(app.name).toLowerCase()}`,\n      description: '',\n      short_description: '',\n      sort: app.sort,\n      icon: '',\n    };\n  }\n}\n\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatButtonModule } from \"@angular/material/button\";\nimport { PopMenuComponent} from './pop-menu.component';\nimport { PopMenuService } from './pop-menu.service';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport {MatFormFieldModule} from '@angular/material/form-field';\nimport { MatInputModule} from '@angular/material/input';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    HttpClientModule,\n    MatMenuModule,\n    MatIconModule,\n    MatTooltipModule,\n    MatButtonModule,\n    MatFormFieldModule,\n    MatInputModule\n  ],\n  declarations: [\n    PopMenuComponent,\n  ],\n  providers: [\n    PopMenuService,\n  ],\n  exports: [\n    PopMenuComponent\n  ]\n})\nexport class PopMenuModule { }\n","import { Component } from '@angular/core';\nimport { RandomArrayElement } from '../../../pop-common-utility';\n\n\n@Component({\n  template: `\n    <div class=\"pop-template-ajax-loader\">\n      <div class=\"pop-template-ajax-row\">\n        <h5>{{expression}}</h5>\n      </div>\n      <div class=\"pop-template-ajax-row\">\n        <lib-main-spinner\n          [options]=\"{strokeWidth:10, color:'primary', diameter:40}\">\n        </lib-main-spinner>\n      </div>\n    </div>\n  `,\n  styles: [ `\n    .pop-template-ajax-loader {\n      display: flex;\n      flex-direction: column;\n      width: 100%;\n      min-height: 30px;\n      justify-content: center;\n      align-items: center;\n    }\n\n    .pop-template-ajax-row {\n      display: flex;\n      width: 100%;\n      min-height: 30px;\n      justify-content: center;\n      align-items: center;\n      clear: both;\n    }\n  ` ]\n})\nexport class PopTemplateAjaxLoaderComponent {\n  expression;\n\n\n  constructor(){\n    const greetings = [\n      `Just a sec ...`,\n      `Git \\'Er Done`,\n      `This may take a while ...`,\n      `No Problemo`,\n    ];\n    this.expression = RandomArrayElement(greetings);\n\n  }\n\n}\n","import { Component, OnInit } from '@angular/core';\nimport { ServiceInjector } from '../../../pop-common.model';\nimport { PopBaseService } from '../../../services/pop-base.service';\nimport { RandomArrayElement } from '../../../pop-common-utility';\n\n\n@Component({\n  template: `\n    <div class=\"pop-template-goodbye\">\n      <div class=\"pop-template-goodbye-row\">\n        <h4>{{expression}}</h4>\n      </div>\n    </div>\n  `,\n  styles: [ `\n    .pop-template-goodbye {\n      display: flex;\n      flex-direction: column;\n      width: 100%;\n      min-height: 30px;\n      justify-content: center;\n      align-items: center;\n      font-size: 1.5em;\n    }\n\n    .pop-template-goodbye-row {\n      display: flex;\n      width: 100%;\n      min-height: 30px;\n      justify-content: center;\n      align-items: center;\n      clear: both;\n    }\n  ` ]\n})\nexport class PopTemplateGoodByeComponent {\n\n  expression;\n\n\n  constructor(){\n    const name = ServiceInjector.get(PopBaseService).getAuthPrimeUser().first_name;\n    const greetings = [\n      `Audios Amigo`,\n      `See Ya Later, ${name}`,\n      `Hasta la vista`,\n      `Later Hater`,\n      `Done so soon?`,\n      `GoodBye`,\n      `Thanks for all you have done, ${name}`\n    ];\n    this.expression = RandomArrayElement(greetings);\n\n  }\n}\n","import { Component} from '@angular/core';\nimport { ServiceInjector } from '../../../pop-common.model';\nimport { PopBaseService } from '../../../services/pop-base.service';\nimport { RandomArrayElement } from '../../../pop-common-utility';\n\n\n@Component({\n  template: `\n    <div class=\"pop-template-welcome\">\n      <div class=\"pop-template-welcome-row\">\n        <h4>{{expression}}</h4>\n      </div>\n    </div>\n  `,\n  styles: [ `\n    .pop-template-welcome {\n      display: flex;\n      flex-direction: column;\n      width: 100%;\n      min-height: 30px;\n      justify-content: center;\n      align-items: center;\n      font-size: 1.5em;\n      background: var(--background-2);\n    }\n\n    .pop-template-welcome-row {\n      display: flex;\n      width: 100%;\n      min-height: 30px;\n      justify-content: center;\n      align-items: center;\n      clear: both;\n    }\n  ` ]\n})\nexport class PopTemplateWelcomeComponent {\n  expression;\n\n\n  constructor(){\n    const name = ServiceInjector.get(PopBaseService).getAuthPrimeUser().first_name;\n    const greetings = [\n      `Hola!`,\n      `Welcome Back, ${name}`,\n      `Howd, partner`,\n      `Good to see you, ${name}`,\n      `Hello, ${name}`,\n      `Lets do this!`,\n      `Alright, Alright, Alright ...`\n    ];\n    this.expression = RandomArrayElement(greetings);\n\n  }\n}\n","import { Component, Input } from '@angular/core';\nimport { IsObject } from '../../../pop-common-utility';\n\n\n@Component({\n  template: `\n    <div class=\"pop-template-error\">\n      <div class=\"pop-template-error-row\">\n        <h5>{{error.code}} - {{error.message}}</h5>\n      </div>\n    </div>\n  `,\n  styles: [ `\n    .pop-template-error {\n      display: flex;\n      flex-direction: column;\n      width: 100%;\n      min-height: 30px;\n      justify-content: center;\n      align-items: center;\n      font-size: 1em;\n      color: white;\n      padding: 10px;\n      background: red;\n      box-sizing: border-box;\n    }\n\n    .pop-template-error-row {\n      display: flex;\n      width: 100%;\n      min-height: 30px;\n      justify-content: center;\n      align-items: center;\n      clear: both;\n      word-wrap: break-word;\n      box-sizing: border-box;\n    }\n  ` ]\n})\nexport class PopTemplateErrorComponent {\n  @Input() error: { code: number, message: string };\n\n\n  constructor(){\n    if( !IsObject(this.error) ) this.error = { message: 'Something went wrong!', code: 500 };\n  }\n}\n","import { Component, Inject, OnDestroy, OnInit } from '@angular/core';\nimport { MAT_SNACK_BAR_DATA } from '@angular/material/snack-bar';\n\n\n@Component({\n  template: `\n    <div class=\"pop-template-buffer\">\n      <div class=\"pop-template-ajax-row\" *ngIf=\"data.expression\">\n        <h5>{{data.expression}}</h5>\n      </div>\n      <div class=\"pop-template-buffer-row\">\n        <mat-progress-bar\n          [color]=\"color\"\n          [mode]=\"mode\"\n          [value]=\"value\"\n          [bufferValue]=\"bufferValue\">\n        </mat-progress-bar>\n      </div>\n    </div>\n  `,\n  styles: [ `\n    .pop-template-buffer {\n      display: flex;\n      flex-direction: column;\n      width: 100%;\n      min-height: 30px;\n      justify-content: center;\n      align-items: center;\n      font-size: 1.5em;\n      background: var(--background-code);\n    }\n\n    .pop-template-buffer-row {\n      display: flex;\n      width: 100%;\n      min-height: 30px;\n      justify-content: center;\n      align-items: center;\n      clear: both;\n    }\n  ` ]\n})\nexport class PopTemplateBufferComponent implements OnInit, OnDestroy {\n  expression;\n  color = 'primary';\n  mode = 'buffer';\n  bufferValue = 100;\n  value = 0;\n  interval;\n\n  constructor(@Inject(MAT_SNACK_BAR_DATA) public data){\n  }\n\n\n  ngOnInit(){\n    this._meterProgress();\n  }\n\n\n  ngOnDestroy(){\n    if( this.interval ) clearInterval(this.interval);\n  }\n\n\n  private _meterProgress(){\n    this.interval = setInterval(() => {\n      this.bufferValue -= 5;\n      this.value += 5;\n      if( this.value >= 100 ) clearInterval(this.interval);\n    }, 175, 50);\n  }\n}\n","import { BehaviorSubject } from 'rxjs';\nimport { EntityFilterInterface, KeyMap } from '../../../pop-common.model';\n\n\nexport interface CacFilterBarInterface {\n  app?: string;\n  entity_path?: string;                  // Name of the entityId client, account, campaign ....\n  display?: string;                // default (toggles), static(always open), float(filter bar floats)\n  archived?: boolean;           // Set whether archived items should be looked at\n  active?: boolean;           // Set whether the filter should be shown\n  loader?: boolean;           // Set whether the filter should be shown\n  sortToTop?: boolean;\n}\n\n\nexport class CacFilterBarConfig {\n  archived = false;\n  active = false;\n  api?: EntityFilterInterface[];\n  app: string;\n  display: 'default' | 'static' | 'float' = 'default';\n  loader = false;\n  view: string[] = [ 'client', 'account', 'campaign' ];\n  sortToTop = false;\n  invalid = false;\n\n\n  constructor(params?: CacFilterBarInterface){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n    if( !( [ 'default', 'static', 'float' ].includes(this.display) ) ) this.display = 'default';\n  }\n}\n\n\nexport interface CacFilterBarEntityInterface {\n  internal_name: string;                  // Name of the entity client, account, campaign ....\n  parent_link: string | null; // column that creates the parent/child relationship to the next entity\n  child_link: string | null; // column that creates the parent/child relationship to the next entity\n  name: string;\n  options: CacFilterBarItem[];   // Items that should be displayed as options for this entityId\n  search?: string;               // A search string that will be applies to the options of this entityId\n  single?: boolean;\n  mode?: boolean;\n  visible?: boolean;\n  sort_order?: number;\n}\n\n\nexport class CacFilterBarEntityConfig {\n  /**/\n  allSelected = false;\n  internal_name: string;\n  child_link: string | null; // column that creates the parent/child relationship\n  parent_link: string | null; // column that creates the parent/child relationship\n  name: string;\n  search: '';\n  checkAll = false;\n  options: CacFilterBarItem[];\n  feed: BehaviorSubject<CacFilterBarItem[]>;\n  totalVisible: number;\n  totalSelected: number;\n  totalAvailable: number;\n  totalOptions: number;\n  indeterminate = false;\n  single = true;\n  selected: KeyMap<boolean> = {};\n  display: KeyMap<boolean> = {};\n  hidden: KeyMap<boolean> = {};\n  filter: any[] = [];\n  selectedText = '';\n  displaySelectedText = '';\n  totalText = '';\n  mode = false;\n  visible = false;\n  sort_order?: number;\n\n\n  constructor(params: CacFilterBarEntityInterface){\n    for( const i in params ) this[ i ] = params[ i ];\n    this.feed = new BehaviorSubject<CacFilterBarItem[]>([]);\n  }\n}\n\n\nexport interface CacFilterBarItem {\n  id: number;\n  name: string;\n  selected?: boolean;\n  hidden?: boolean;\n  display?: boolean;\n  client_id: number;\n  account_id?: number;\n  campaign_id?: number;\n  agency_id?: number;\n  sort?: number;\n}\n\n\nexport interface CacFilter {\n  client?: any[];\n  account?: any[];\n  campaign?: any[];\n}\n\n\n\n\n","import { EventEmitter, Injectable } from '@angular/core';\nimport { PopBaseEventInterface } from '../../../pop-common.model';\n\n@Injectable({ providedIn: 'root' })\nexport class PopEntityEventService {\n  events: EventEmitter<PopBaseEventInterface> = new EventEmitter<PopBaseEventInterface>();\n  sendEvent(event: PopBaseEventInterface){\n    this.events.emit(event);\n  }\n}\n\n\n\n","import { Observable, of, Subject,} from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport { Injectable } from '@angular/core';\nimport { IsString } from '../pop-common-utility';\n\n\ninterface CacheContent {\n  expiry: number;\n  value: any;\n}\n\n\n/**\n * Cache Service is an observables based in-memory cache implementation\n * Keeps track of in-flight observables and sets a default expiry for cached values\n */\n@Injectable({ providedIn: 'root' })\nexport class PopCacheService {\n  private name = 'PopCacheService';\n  private cache = {};\n  private inFlightObservables: Map<string, Subject<any>> = new Map<string, Subject<any>>();\n  readonly DEFAULT_MAX_AGE: number = 60000; // 1 minute\n\n  constructor(){\n  }\n\n\n  /**\n   * Gets the value from cache if the key is provided.\n   * If no value exists in cache, then check if the same call exists\n   * in flight, if so return the subject. If not create a new\n   * Subject inFlightObservable and return the source observable.\n   */\n  get(type: string, key: string, fallback?: Observable<any>, maxAge?: number): Observable<any> | Subject<any>{\n    if( this.hasValidCachedValue(type, key) ){\n      return of(this.cache[ type ].get(key).value);\n    }\n\n    if( !maxAge ){\n      maxAge = this.DEFAULT_MAX_AGE;\n    }\n\n    if( fallback && fallback instanceof Observable ){\n      if( this.inFlightObservables.has(key) ){\n        const sub = this.inFlightObservables.get(key);\n        if( sub ){\n          sub.complete();\n          sub.unsubscribe();\n        }\n      }\n      this.inFlightObservables.set(key, new Subject());\n      return fallback.pipe(tap((value) => {\n        this.set(type, key, value, maxAge);\n      }));\n    }else{\n      return of(null);\n      // return throwError('Requested key is not available in Cache');\n    }\n  }\n\n\n  clear(cacheType: string, cacheKey?: string): void{\n    if( IsString(cacheType, true) ){\n      if( IsString(cacheKey, true) ){\n        if( this.cache[ cacheType ] && this.has(cacheType, cacheKey) ){\n          this.cache[ cacheType ].delete(cacheKey);\n        }\n      }else{\n        if( this.cache[ cacheType ] ) delete this.cache[ cacheType ];\n      }\n    }\n  }\n\n\n  clearAll(){\n    this.cache = {};\n  }\n\n\n  /**\n   * Sets the value with key in the cache\n   * Notifies all observers of the new value\n   */\n  set(type: string, key: string, value: any, maxAge: number = this.DEFAULT_MAX_AGE): void{\n    if( !this.cache[ type ] ) this.cache[ type ] = <Map<string, CacheContent> >new Map<string, CacheContent>();\n    this.cache[ type ].set(key, { value: value, expiry: Date.now() + maxAge });\n    this.notifyInFlightObservers(key, value);\n  }\n\n\n  /**\n   * Checks if the a key exists in cache\n   */\n  has(type: string, key: string): boolean{\n    if( this.cache[ type ] ){\n      return this.cache[ type ].has(key);\n    }\n    return false;\n  }\n\n\n  /**\n   * Publishes the value to all observers of the given\n   * in progress observables if observers exist.\n   */\n  private notifyInFlightObservers(key: string, value: any): void{\n    if( this.inFlightObservables.has(key) ){\n      const inFlight = this.inFlightObservables.get(key);\n      const observersCount = inFlight.observers.length;\n      if( observersCount ){\n        inFlight.next(value);\n      }\n      inFlight.complete();\n      this.inFlightObservables.delete(key);\n    }\n  }\n\n\n  /**\n   * Checks if the key exists and  has not expired.\n   */\n  private hasValidCachedValue(type: string, key: string): boolean{\n\n    if( this.cache[ type ] && this.cache[ type ].has(key) ){\n      if( this.cache[ type ].get(key).expiry < Date.now() ){\n        this.cache[ type ].delete(key);\n        return false;\n      }\n      return true;\n    }else{\n      return false;\n    }\n  }\n}\n","import { Injectable, OnDestroy } from '@angular/core';\nimport { forkJoin } from 'rxjs';\nimport { PopCacheService } from './pop-cache.service';\nimport {\n  CoreConfig,\n  Dictionary,\n  PopEntity,\n  PopLog,\n  PopRequest,\n  ResourceConfig,\n  ResourceInterface,\n  ServiceInjector\n} from '../pop-common.model';\nimport { CleanObject, GetHttpResult, IsArray, IsCallableFunction, IsObject, IsString, StorageGetter, StringReplaceAll } from '../pop-common-utility';\nimport { EvaluateWhenConditions, ParseModelValue } from '../modules/entity/pop-entity-utility';\nimport { PopExtendService } from './pop-extend.service';\n\n\n@Injectable( {\n  providedIn: 'root'\n} )\nexport class PopResourceService extends PopExtendService implements OnDestroy {\n\n  public name = 'PopResourceService';\n\n  private cache = new PopCacheService();\n\n\n  constructor(){\n    super();\n  }\n\n\n  /**\n   * This fx will map the api calls for a collection of resources\n   * @param collection\n   * @param core\n   */\n  setCollection( collection: Dictionary<ResourceInterface>, core?: CoreConfig ): Promise<boolean>{\n    return new Promise( async( resolve ) => {\n      const api_requests = [];\n      const request_map = [];\n      let resource;\n      if( IsObject( collection, true ) ){\n        Object.keys( collection ).map( ( resourceKey ) => {\n          resource = <ResourceConfig>collection[ resourceKey ];\n          if( resource.api_path ){\n            if(!resource.can_read || PopEntity.checkAccess(resource.can_read, 'can_read')){\n              // break;\n              let path = resource.api_path;\n              if( IsArray( resource.api_when, true ) && IsObject( core, true ) ){\n                const when = EvaluateWhenConditions( core, resource.api_when );\n                if( !when ){\n                  PopLog.info( this.name, `setCollection: condition not met`, resource );\n                  return false;\n                }\n              }\n              request_map.push( resourceKey );\n              if( IsObject( resource.api_path_vars, true ) && core ){\n                Object.keys( resource.api_path_vars ).map( ( varKey ) => {\n                  let value = '';\n                  if( String( resource.api_path_vars[ varKey ] ).includes( '.' ) ){\n                    value = <any>StorageGetter( core, String( resource.api_path_vars[ varKey ] ).split( '.' ) );\n                  }\n                  if( !value ) value = ParseModelValue( String( resource.api_path_vars[ varKey ] ) );\n                  if( value ){\n                    path = StringReplaceAll( path, `:${varKey}`, value );\n                  }\n                } );\n              }\n              const body = IsObject( resource.api_params, true ) ? resource.api_params : {};\n              if( IsObject( body ) ){\n                Object.keys( body ).map( ( key: string ) => {\n                  body[ key ] = ParseModelValue( body[ key ], core );\n                } );\n              }\n\n              if( +resource.api_cache ){\n                PopLog.info( this.name, `cached resource`, resource );\n                api_requests.push( this.cache.get( 'resource', path, PopRequest.doGet( path, body, resource.api_version ), 3600000 ) );\n              }else{\n                api_requests.push( PopRequest.doGet( path, body, resource.api_version ) );\n              }\n            }\n          }\n        } );\n      }\n      if( api_requests.length ){\n        forkJoin( api_requests ).subscribe( ( results ) => {\n          results.map( ( res: any, index ) => {\n            res = res.data ? res.data : res;\n            resource = <ResourceConfig>collection[ request_map[ index ] ];\n            let dataTarget;\n            if( IsArray( res, false ) ){\n              dataTarget = resource.data_storage ? resource.data_storage : 'data_values';\n              if( IsObject( collection[ request_map[ index ] ].data_filter, true ) ){\n                try{\n                  Object.keys( resource.data_filter ).map( ( filterKey: string ) => {\n                    res = res.filter( ( item ) => {\n                      let filterKeyValue = resource.data_filter[ filterKey ];\n                      if( String( filterKeyValue ).includes( '.' ) ){\n                        filterKeyValue = <any>StorageGetter( core, String( filterKeyValue ).split( '.' ) );\n                      }\n                      if( !filterKeyValue ) filterKeyValue = ParseModelValue( String( resource.data_filter[ filterKey ] ) );\n                      return item[ filterKey ] == filterKeyValue;\n                    } );\n                  } );\n                }catch( e ){\n                  PopLog.warn( this.name, `setCollection`, e );\n                }\n              }\n\n              res = IsCallableFunction( resource.data_decorator ) ? res.map( x => resource.data_decorator( core, x ) ) : res;\n\n              if( IsArray( resource.data_when, true ) ){\n                // EvaluateModelConditionals();\n                try{\n                  res = res.filter( ( item ) => {\n                    return EvaluateWhenConditions( item, resource.data_when, core );\n                  } );\n                }catch( e ){\n                  PopLog.warn( this.name, `setCollection`, e );\n                }\n              }\n\n              if( IsCallableFunction( resource.data_setter ) ) res = <any[]>resource.data_setter( core, res );\n              resource[ dataTarget ] = res;\n            }else{\n              dataTarget = resource.data_storage ? resource.data_storage : 'data';\n              resource[ dataTarget ] = IsCallableFunction( resource.data_decorator ) ? resource.data_decorator( core, res ) : res;\n              if( IsCallableFunction( resource.data_setter ) ) resource[ dataTarget ] = <any[]>resource.data_setter( core, resource[ dataTarget ] );\n            }\n          } );\n          resolve( true );\n        }, err => {\n          resolve( false );\n        } );\n      }else{\n        resolve( true );\n      }\n    } );\n  }\n\n\n\n  /**\n   * This fx will extract the data from a resource collection\n   * @param collection\n   * @param core\n   */\n  getCollection( collection: Dictionary<ResourceConfig>, ){\n    const store = {};\n    if( IsObject( collection, true ) ){\n      Object.keys( collection ).map( ( resourceKey ) => {\n        const resource = collection[ resourceKey ];\n        store[ resource.name ] = CleanObject( new ResourceConfig( resource ) );\n      } );\n    }\n    return store;\n  }\n\n\n  /**\n   * This fx will reload a single existing resource\n   * @param collection\n   */\n  reloadResource( core: CoreConfig, resource: ResourceConfig ): Promise<ResourceConfig>{\n    return new Promise<ResourceConfig>( ( resolve ) => {\n      if( IsObject( resource, [ 'api_path' ] && resource.api_path && IsString( resource.api_path, true ) ) ){\n        let path = resource.api_path;\n        if(resource.can_read && !PopEntity.checkAccess(resource.can_read, 'can_read')) {\n          PopLog.debug( this.name, `reloadResource: Cannot read resource:${resource.can_read}` );\n          return resolve( resource );\n        }\n        if( IsArray( resource.api_when, true ) && IsObject( core, true ) ){\n          const when = EvaluateWhenConditions( core, resource.api_when );\n          if( !when ){\n            PopLog.debug( this.name, 'reloadResource: condition not met' );\n            return resolve( resource );\n          }\n        }\n        if( IsObject( resource.api_path_vars, true ) && core ){\n          Object.keys( resource.api_path_vars ).map( ( varKey ) => {\n            let value = '';\n            if( String( resource.api_path_vars[ varKey ] ).includes( '.' ) ){\n              value = <any>StorageGetter( core, String( resource.api_path_vars[ varKey ] ).split( '.' ) );\n            }\n            if( !value ) value = ParseModelValue( String( resource.api_path_vars[ varKey ] ) );\n            if( value ){\n              path = StringReplaceAll( path, `:${varKey}`, value );\n            }\n          } );\n        }\n        const body = IsObject( resource.api_params, true ) ? resource.api_params : {};\n        if( IsObject( body ) ){\n          Object.keys( body ).map( ( key: string ) => {\n            body[ key ] = ParseModelValue( body[ key ], core );\n          } );\n        }\n\n        PopRequest.doGet( path, body, resource.api_version ).subscribe( ( res ) => {\n          res = GetHttpResult( res );\n          let dataTarget;\n          PopLog.debug( this.name, 'reloadResource: pass 4' );\n          if( IsArray( res, false ) ){\n            dataTarget = resource.data_storage ? resource.data_storage : 'data_values';\n            if( IsObject( resource.data_filter, true ) ){\n              try{\n                Object.keys( resource.data_filter ).map( ( filterKey: string ) => {\n                  res = res.filter( ( item ) => {\n                    let filterKeyValue = resource.data_filter[ filterKey ];\n                    if( String( filterKeyValue ).includes( '.' ) ){\n                      filterKeyValue = <any>StorageGetter( core, String( filterKeyValue ).split( '.' ) );\n                    }\n                    if( !filterKeyValue ) filterKeyValue = ParseModelValue( String( resource.data_filter[ filterKey ] ) );\n                    return item[ filterKey ] == filterKeyValue;\n                  } );\n                } );\n              }catch( e ){\n                PopLog.warn( this.name, `setCollection`, e );\n              }\n            }\n\n            if( IsArray( resource.data_when, true ) ){\n              // EvaluateModelConditionals();\n              try{\n                res = res.filter( ( item ) => {\n                  return EvaluateWhenConditions( item, resource.data_when, core );\n                } );\n              }catch( e ){\n                PopLog.warn( this.name, `setCollection`, e );\n              }\n            }\n            resource[ dataTarget ] = IsCallableFunction( resource.data_decorator ) ? res.map( x => resource.data_decorator( core, x ) ) : res;\n            if( IsCallableFunction( resource.data_setter ) ) resource[ dataTarget ] = <any[]>resource.data_setter( core, resource[ dataTarget ] );\n          }else{\n            dataTarget = resource.data_storage ? resource.data_storage : 'data';\n            resource[ dataTarget ] = IsCallableFunction( resource.data_decorator ) ? resource.data_decorator( core, res ) : res;\n          }\n          return resolve( resource );\n        }, () => {\n          return resolve( resource );\n        } );\n      }else{\n        return resolve( resource );\n      }\n    } );\n  }\n\n\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n}\n","import {Injectable} from '@angular/core';\nimport {ToYesNoPipe} from '../pipes/toYesNo.pipe';\nimport {PhonePipe} from '../pipes/phone.pipe';\nimport {TruncatePipe} from '../pipes/truncate.pipe';\nimport {ToActiveOrArchivedPipe} from '../pipes/toActiveOrArchived.pipe';\nimport {CoreConfig, Entity, KeyMap, PopApp, PopBusiness, PopDate} from '../pop-common.model';\nimport {\n  GetSessionSiteVar,\n  IsArray,\n  IsDefined,\n  IsNumber,\n  IsObject,\n  IsString,\n  PopTransform,\n  SetSessionSiteVar,\n  StorageGetter,\n  TitleCase\n} from '../pop-common-utility';\nimport {PopResourceService} from './pop-resource.service';\nimport {LabelPipe} from '../pipes/label.pipe';\nimport {Business} from '../pop-common-token.model';\nimport {GetSingularName, IsAliasable} from '../modules/entity/pop-entity-utility';\n\n\n@Injectable({providedIn: 'root'})\nexport class PopPipeService {\n\n  private name = 'PopPipeService';\n\n  loaded = false;\n\n\n  constructor(private resource: PopResourceService) {\n  }\n\n\n  private resources: any = {\n    timezone: {\n      name: 'timezone',\n      defaultValue: null,\n      data_type: 'api_records',\n      api_path: 'records/timezone-values',\n      api_cache: 1,\n    },\n    country: {\n      name: 'country',\n      defaultValue: null,\n      data_type: 'api_records',\n      api_path: 'records/countries',\n      api_cache: 1,\n    },\n    state: {\n      name: 'state',\n      defaultValue: null,\n      data_type: 'api_records',\n      api_path: 'records/u-s-states',\n      api_cache: 1,\n    },\n    entity: {\n      name: 'entity',\n      defaultValue: null,\n      data_type: 'api_records',\n      api_path: `entities?select=id,name,internal_name,alias&with=alias`,\n      api_cache: 1,\n    }\n  };\n\n\n  private asset = {\n    business: <KeyMap<Business>>{},\n    country: <KeyMap<Entity>>{},\n    timezone: <KeyMap<Entity>>{},\n    state: <KeyMap<Entity>>{},\n    client: <KeyMap<Entity>>{},\n    campaign: <KeyMap<Entity>>{},\n    account: <KeyMap<Entity>>{},\n    entity: <KeyMap<Entity>>{},\n  };\n\n  private assetMap = {\n    entity: {}\n  };\n\n\n  active = new ToActiveOrArchivedPipe();\n  yesno = new ToYesNoPipe();\n  truncate = new TruncatePipe();\n  phone = new PhonePipe();\n  label = new LabelPipe();\n\n\n  /**\n   * Mutate a value with a specified transformation\n   * @param value\n   * @param transformation\n   * @param core\n   */\n  transform(value: string | number | boolean, transformation: any, core: CoreConfig = null): any {\n    if (IsObject(transformation, true)) {\n      switch (transformation.type) {\n        case 'toRelationName':\n          if (IsObject(value)) {\n            if (transformation.arg1) { // core storage path\n              const location = IsString(transformation.arg1, true) ? transformation.arg1 : 'name';\n              const steps = <any[]>String(location).split('.');\n              // steps.push(value);\n              const name = <string>StorageGetter(value, steps);\n              if (name) value = name;\n              if (IsString(transformation.arg2, true)) { // alias\n                if (IsAliasable(GetSingularName(String(value)))) {\n                  value = StorageGetter(PopApp.entities[TitleCase(String(value))], ['alias', String(transformation.arg2).toLowerCase()], value);\n                }\n              }\n            }\n          } else {\n            value = transformation.arg2 ? transformation.arg2 : value; // transformations[ field ].arg2 is default value\n          }\n          break;\n        case 'toResourceName':\n          if (IsNumber(value)) {\n            let resource;\n            let key = 'name';\n            let resourceName;\n            let id;\n            if (IsString(transformation.arg1, true)) { // resource name\n              resourceName = String(transformation.arg1).trim();\n              if (IsObject(core, ['resource']) && resourceName in core.resource) {\n                resource = core.resource[resourceName];\n                if (IsArray(core.resource[resourceName].data_values, true)) {\n                  if (IsString(transformation.arg2, true)) key = transformation.arg2;\n                  const item = core.resource[resourceName].data_values.find((i) => +i.id === value);\n                  if (IsObject(item, [key]) && IsDefined(item[key])) {\n                    value = item[key];\n                  }\n                }\n                if (IsString(transformation.arg2, true)) { // alias\n                  if (IsAliasable(GetSingularName(String(value)))) {\n                    value = StorageGetter(PopApp.entities[TitleCase(String(value))], ['alias', String(transformation.arg2).toLowerCase()], value);\n                  }\n                }\n              } else if (resourceName in this.asset) {\n                id = +value;\n                resourceName = String(transformation.arg1).trim();\n                if (IsString(transformation.arg1, true)) { // alternate value\n                  key = transformation.arg1;\n                }\n                if (resourceName in this.asset && id in this.asset[resourceName] && IsDefined(this.asset[resourceName][id][key])) {\n                  value = this.asset[transformation.type][id][key];\n                }\n              }\n            }\n          } else {\n            value = transformation.arg3 ? transformation.arg3 : value; // transformations[ field ].arg2 is default value\n          }\n          break;\n        case 'entity':\n          if (value) {\n            let key;\n            if (IsString(value, true) && transformation.arg1 === 'alias') {\n              const id = this.assetMap.entity[value + ''];\n              const alias = transformation.arg2 ? (transformation.arg2 !== 'plural' ? 'name' : 'plural') : 'name';\n              if (id in this.asset.entity && this.asset.entity[id]) {\n                const entity = this.asset.entity[id];\n                if (IsObject(entity.alias) && alias in entity.alias) {\n                  value = TitleCase(entity.alias[alias]);\n                } else {\n                  if (alias === 'plural') {\n                    value = entity.name;\n                  } else {\n                    value = TitleCase(value + '');\n                  }\n                }\n              } else {\n                value = TitleCase(value + '');\n              }\n            } else if (IsString(value, true)) {\n              const id = this.assetMap.entity[value + ''];\n              key = 'name';\n              if (IsString(transformation.arg1, true)) {\n                key = transformation.arg1;\n              }\n              if (id in this.asset.entity && this.asset.entity[id] && IsDefined(this.asset.entity[id][key])) {\n                value = this.asset.entity[id][key];\n              } else {\n                value = TitleCase(value + '');\n              }\n            } else if (IsNumber(value, true)) {\n              const id = +value;\n              key = 'name';\n              if (IsString(transformation.arg1, true)) { // alternate value\n                key = transformation.arg1;\n              }\n              if (id in this.asset.entity && IsString(this.asset.entity[id][key])) {\n                value = this.asset[transformation.type][id][key];\n              }\n\n            }\n          }\n          break;\n        case 'client':\n        case 'account':\n        case 'campaign':\n        case 'state':\n        case 'country':\n        case 'timezone':\n          if (value) {\n            const id = +value;\n            let key = 'name';\n            if (IsString(transformation.arg1, true)) { // alternate value\n              key = transformation.arg1;\n            }\n\n            if (transformation.type in this.asset && id in this.asset[transformation.type] && IsDefined(this.asset[transformation.type][id][key])) {\n              value = this.asset[transformation.type][id][key];\n            }\n          }\n          break;\n        case 'toDigits':\n          value = String(value).match(/\\d+/g).map(Number).join('');\n          break;\n        case 'toYesNoPipe':\n          value = this.yesno.transform(+value > 0);\n          break;\n        case 'toPhonePipe':\n          value = this.phone.transform(value);\n          break;\n        case 'toActiveOrArchived':\n          value = this.active.transform(value);\n          break;\n        case 'toTitleCase':\n          value = TitleCase(value + '');\n          break;\n        case 'toUpperCase':\n          value = String(value).toUpperCase();\n          break;\n        case 'toLowerCase':\n          value = String(value).toLowerCase();\n          break;\n        case 'date':\n          value = PopDate.transform(value, transformation.arg1);\n          break;\n        case 'toCurrency':\n          value = new Intl.NumberFormat('en-US', {\n            style: 'currency',\n            currency: 'USD',\n            minimumFractionDigits: 2\n          }).format(Number(value));\n          break;\n        default:\n          break;\n      }\n    } else if (IsString(transformation, true)) {\n      return PopTransform(value, transformation);\n    }\n    return value;\n  }\n\n\n  loadResources(allowCache = true) {\n    return new Promise(async (resolve) => {\n      if (this.loaded) return resolve(true);\n      let resources;\n      if (allowCache && IsObject(PopBusiness, ['id'])) {\n        try {\n          resources = GetSessionSiteVar(`App.${PopBusiness.id}.Resource`);\n          resources = JSON.parse(atob(resources));\n        } catch (e) {\n        }\n      }\n      if (IsObject(resources, Object.keys(this.resources))) {\n        Object.keys(resources).map((key: string) => {\n          const values = resources[key].data_values;\n          this.asset[key] = {};\n          values.map((item) => {\n            this.asset[key][item.id] = item;\n          });\n        });\n        this._setAssetMap();\n        return resolve(true);\n      } else {\n        this.resource.setCollection(this.resources).then(() => {\n          resources = this.resource.getCollection(this.resources);\n          if (IsObject(resources, true)) {\n            try {\n              SetSessionSiteVar(`App.${PopBusiness.id}.Resource`, btoa(JSON.stringify(resources)));\n            } catch (e) {\n            }\n            Object.keys(resources).map((key: string) => {\n              const values = resources[key].data_values;\n              this.asset[key] = {};\n              values.map((item) => {\n                this.asset[key][item.id] = item;\n              });\n            });\n            this._setAssetMap();\n            this.loaded = true;\n            return resolve(true);\n          } else {\n            this.loaded = true;\n            return resolve(true);\n          }\n        }, () => {\n          return resolve(false);\n        });\n      }\n\n    });\n  }\n\n\n  setAsset(assetName: string, data: KeyMap<Entity>) {\n    if (assetName in this.asset && IsObject(data, true)) {\n      this.asset[assetName] = data;\n    }\n  }\n\n\n  updateEntityAlias(entityId: string, alias: any) {\n    if (entityId in this.asset.entity && IsObject(this.asset.entity[entityId])) {\n      this.asset.entity[entityId].alias = alias;\n    }\n  }\n\n\n  /**\n   * A helper method to prepareTableData\n   * @param row\n   * @param transformations\n   */\n  transformObjectValues(obj: Object, transformations: {}, core: CoreConfig = null) {\n    for (const field in transformations) {\n      if (!transformations.hasOwnProperty(field)) continue;\n      obj[field] = this.transform(obj[field], transformations[field], core);\n    }\n    return obj;\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  private _setAssetMap() {\n    if (IsObject(this.asset.entity, true)) {\n      Object.keys(this.asset.entity).map(entityId => {\n        const entity = this.asset.entity[entityId];\n        this.assetMap.entity[entity.internal_name] = entityId;\n      });\n    }\n  }\n}\n","import { ElementRef, Inject, Injectable, OnDestroy } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport {\n  Entity,\n  OptionItem,\n  PopBaseEventInterface,\n  PopBusiness,\n  PopPipe,\n  PopLog,\n  PopUser,\n  SetPopFilter, CoreConfig, PopRequest, AppGlobalInterface, PopEntity,\n} from '../../../pop-common.model';\nimport { GetSessionSiteVar, IsArray, IsNumber, IsObject, IsString, SetSessionSiteVar, StorageGetter } from '../../../pop-common-utility';\nimport { PopExtendService } from '../../../services/pop-extend.service';\nimport { CacFilterBarConfig, CacFilterBarEntityConfig } from './pop-cac-filter.model';\nimport { PopEntityEventService } from '../../entity/services/pop-entity-event.service';\nimport { IsValidFieldPatchEvent } from '../../entity/pop-entity-utility';\nimport { PopPipeService } from '../../../services/pop-pipe.service';\n\n\n@Injectable( {\n  providedIn: 'root'\n} )\nexport class PopCacFilterBarService extends PopExtendService implements OnDestroy {\n  loading = false;\n\n  public name = 'PopClientFilterBarService';\n\n  private config: CacFilterBarConfig = new CacFilterBarConfig(\n    {\n      active: false\n    }\n  );\n\n  protected asset = {\n    lookup: {},\n    el: <ElementRef<any>>undefined,\n    client: < Map<number, Entity> >new Map<number, Entity>(),\n    account: < Map<number, Entity> >new Map<number, Entity>(),\n    campaign: < Map<number, Entity> >new Map<number, Entity>(),\n    triggerFields: [ 'name', 'archived', 'deleted_at', 'client_id', 'account_id', 'campaign_id' ],\n    views: [ 'client', 'account', 'campaign' ]\n  };\n\n  event = {\n    data: new Subject<string>(),\n    config: new Subject<CacFilterBarEntityConfig[]>(),\n    bubble: new Subject<PopBaseEventInterface>()\n  };\n\n  private filter: { client?: number[], account?: number[], campaign?: number[] } = {};\n\n  private readonly entities = <CacFilterBarEntityConfig[]>[\n    new CacFilterBarEntityConfig( {\n      sort_order: 0,\n      internal_name: 'client',\n      name: 'Client(s)',\n      options: [],\n      parent_link: null,\n      child_link: 'client_id',\n      single: false,\n      visible: true\n    } ),\n    new CacFilterBarEntityConfig( {\n      sort_order: 1,\n      internal_name: 'account',\n      name: 'Account(s)',\n      options: [],\n      parent_link: 'client_id',\n      child_link: 'account_id',\n      single: false,\n      visible: true,\n    } ),\n    new CacFilterBarEntityConfig( {\n      sort_order: 2,\n      internal_name: 'campaign',\n      name: 'Campaigns(s)',\n      options: [],\n      parent_link: 'account_id',\n      child_link: null,\n      single: false,\n      visible: true\n    } ),\n  ];\n\n\n  constructor(\n    private crud: PopEntityEventService,\n    private pipe: PopPipeService,\n    @Inject( 'APP_GLOBAL' ) private APP_GLOBAL: AppGlobalInterface,\n  ){\n    super();\n    this._init().then(()=>true);\n  }\n\n\n  private _init(){\n    return new Promise<boolean>( async( resolve ) => {\n      await this.APP_GLOBAL.isVerified();\n      if( IsObject( PopBusiness, [ 'id' ] ) && IsObject( PopUser, [ 'id' ] ) ){\n        this._getFilterStorage(); // retrieve any session data\n      }else{\n        this.config.active = false;\n        return resolve( false );\n      }\n      this.dom.setSubscriber( `crud-events`, this.crud.events.subscribe( ( event ) => {\n        if( IsValidFieldPatchEvent( <CoreConfig>{}, event ) ){\n          const internalName = StorageGetter( event.config, [ 'metadata', 'internal_name' ], null );\n          if( internalName && this.asset.views.includes( internalName ) && this.asset.triggerFields.includes( event.config.name ) ){\n            this._triggerDataRefresh( 'Patch' );\n          }\n        }else{\n          if( event.internal_name && event.type === 'entity' && this.asset.views.includes( event.internal_name ) ){\n            if( event.method === 'archive' ){\n              const entity = this.entities.find( ( e ) => e.internal_name );\n              const filter = this.filter[ entity.internal_name ];\n              const archive = event.data;\n              if( archive ){\n                let id;\n                if( IsString( event.id, true ) ){\n                  if( String(event.id).includes( ',' ) ){\n                    id = String( event.id ).split( ',' ).map( x => +x );\n                  }else{\n                    id = [ +event.id ];\n                  }\n                }else if( IsNumber( event.id ) ){\n                  id = [ +event.data.id ];\n                }\n\n\n                let setFilter = false;\n                id.map( ( x ) => {\n                  delete entity.hidden[ x ];\n                  delete entity.display[ x ];\n                  delete entity.selected[ x ];\n                  if( IsArray( filter, true ) ){\n                    const index = filter.indexOf( String( x ), 0 );\n                    if( index > -1 ){\n                      setFilter = true;\n                      filter.splice( index, 1 );\n                    }\n                  }\n                } );\n\n                if( setFilter ){\n                  this.setFilter( this.filter );\n                }\n              }\n              this._triggerDataRefresh( 'archive', 1 );\n            }\n            if( event.method === 'create' ){\n              const entity = this.entities.find( ( e ) => e.internal_name );\n              this._triggerDataRefresh( 'create', 1 );\n            }\n          }\n        }\n      } ) );\n\n      return resolve( false );\n    } );\n  }\n\n\n  public register( el: ElementRef<any> ){\n    this.asset.el = el;\n  }\n\n\n  getEntities(): CacFilterBarEntityConfig[]{\n    return this.entities;\n  }\n\n\n  getFilter(){\n    return this.filter;\n  }\n\n\n  /**\n   * Return the filter bar config\n   */\n  getConfig(): CacFilterBarConfig{\n    return this.config;\n  }\n\n\n  public setFilter( filter: { client?: number[], account?: number[], campaign?: number[] } ){\n    this.filter = {};\n    if( IsObject( PopBusiness, [ 'id' ] ) ){\n      if( IsArray( filter.client, true ) ) this.filter.client = filter.client;\n\n      if( this.config.view.includes( 'account' ) && IsArray( filter.account, true ) ){\n        this.filter.account = filter.account;\n      }else{\n        if( IsArray( filter.client, true ) ){\n          const clients = filter.client.map( c => +c );\n          filter.account = <any>this.entities[ 1 ].options.filter( ( account ) => {\n            return +account.client_id  && clients.includes( account.client_id );\n          } ).map( a => String( a.id ) );\n          this.filter.account = filter.account;\n        }\n      }\n      if( this.config.view.includes( 'campaign' ) && IsArray( filter.campaign, true ) ){\n        this.filter.campaign = filter.campaign;\n      }else{\n        if( IsArray( filter.account, true ) ){\n          const accounts = filter.account.map( c => +c );\n          filter.campaign = <any>this.entities[ 2 ].options.filter( ( campaign ) => {\n            return +campaign.account_id && accounts.includes( campaign.account_id );\n          } ).map( c => String( c.id ) );\n          console.log('filter.campaign', filter.campaign);\n          this.filter.campaign = filter.campaign;\n        }\n      }\n      SetSessionSiteVar( `Business.${PopBusiness.id}.Filter.Entities`, filter );\n      SetPopFilter( filter );\n    }\n  }\n\n\n  getElHeight(): number{\n    if( this.asset.el ){\n      return this.asset.el.nativeElement.lastChild.clientHeight;\n    }\n    return 0;\n  }\n\n\n  getHeight(): number{\n    if( IsObject( PopBusiness, [ 'id' ] ) ){\n      const open = GetSessionSiteVar( `Business.${PopBusiness.id}.Filter.open`, false );\n      if( +open ){\n        return 281;\n      }else{\n        return 101;\n      }\n    }\n    return 0;\n  }\n\n\n  /**\n   * Clear any existing filters\n   * @param app\n   */\n  public clearFilters(){\n    this.setFilter({});\n  }\n\n\n  /**\n   * Trigger update trigger\n   * @param type strings\n   * @returns void\n   */\n  onChange( event: PopBaseEventInterface ){\n    setTimeout( () => {\n      this.event.bubble.next( event );\n    }, 0 );\n  }\n\n\n  /**\n   * Ask whether the filter bar is active or not\n   */\n  isActive(): boolean{\n    return this.config.active;\n  }\n\n\n  refresh(){\n    this.event.bubble.next( {\n      source: 'PopFilterBarService',\n      type: 'filter',\n      name: 'refresh',\n    } );\n  }\n\n\n  /**\n   * Toggle whether to include archived records\n   * @param active\n   */\n  setArchived( archived: boolean ){\n    if( this.config ){\n      this.config.archived = archived;\n      this.event.bubble.next( {\n        source: 'PopFilterBarService',\n        type: 'filter',\n        name: 'archived',\n        data: archived\n      } );\n    }\n  }\n\n\n  /**\n   * Toggle the filer bar on and off\n   * @param active\n   */\n  setActive( active: boolean ){\n    if( this.config ){\n      this.config.active = active;\n      this.event.bubble.next( {\n        source: 'PopFilterBarService',\n        type: 'filter',\n        name: 'state',\n        model: 'active'\n      } );\n    }\n  }\n\n\n  /**\n   * Toggle the Loader\n   * @param loader\n   */\n  setLoader( loader: boolean ){\n    if( this.config ){\n      this.config.loader = loader;\n    }\n  }\n\n\n  /**\n   * Change the display state of the filter bar\n   * @param display\n   */\n  setDisplay( display: any ){\n    if( this.config ){\n      if( ![ 'default', 'static', 'float' ].includes( display ) ) display = 'default';\n      this.config.display = display;\n    }\n  }\n\n\n  /**\n   * Change the display state of the filter bar\n   * @param display\n   */\n  setView( view: string[] ){\n    if( IsArray( view ) ){\n      this.config.view = view;\n      this.entities.map( ( entity ) => {\n        entity.visible = this.config.view.includes( entity.internal_name );\n      } );\n    }\n  }\n\n\n  getAsset( internal_name: string, id: number ){\n    if( internal_name in this.asset ){\n      return this.asset[ internal_name ].get( +id );\n    }\n    return null;\n  }\n\n\n  setData( caller: string, allowCache = true ): Promise<boolean>{\n    PopLog.info( this.name, `setData`, caller );\n    return new Promise<boolean>( async( resolve ) => {\n      let cache;\n      if( allowCache && IsObject( PopBusiness, [ 'id' ] ) ){\n        try{\n          cache = GetSessionSiteVar( `Business.${PopBusiness.id}.Filter.Data` );\n          cache = JSON.parse( atob( cache ) );\n        }catch( e ){\n        }\n      }\n      if( IsArray( cache, true ) ){\n        this._transFormData( cache );\n        this._triggerDataRefresh( 'init' );\n        return resolve( true );\n      }else{\n        // this.config.loader = true;\n        const url = `clients?select=id,name,client_id,account_id,campaign_id,allaccounts,allcampaigns&archived=0&with=allaccounts.allcampaigns&limit=500`;\n        this.dom.setSubscriber( `data-fetch`, PopRequest.doGet( url, {}, 1, false ).subscribe( ( x ) => {\n          if( x.data ) x = x.data;\n          if( IsObject( PopBusiness, [ 'id' ] ) ){\n            try{\n              SetSessionSiteVar( `Business.${PopBusiness.id}.Filter.Data`, btoa( JSON.stringify( x ) ) );\n            }catch( e ){\n            }\n          }\n          this._transFormData( x );\n          // this.config.loader = false;\n          return resolve( true );\n        }, () => {\n          return resolve( false );\n        } ) );\n      }\n    } );\n\n  }\n\n\n  setConfigAliases(){\n    this.entities.map( ( entity ) => {\n      entity.name = PopPipe.transform( entity.internal_name, { type: 'entity', arg1: 'alias', arg2: 'singular' } ) + '(s)';\n    } );\n  }\n\n\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  private _triggerDataRefresh( caller: string, seconds = 10 ): void{\n    this.dom.setTimeout( 'lazy-load-filter-data', () => {\n      this.setData( `_triggerDataRefresh`, false ).then( () => {\n        this.event.data.next( caller );\n      } );\n    }, ( seconds * 1000 ) );\n  }\n\n\n  private _transFormData( x: any[] ): void{\n    const data = this._setDataStructure( x );\n\n    Object.keys( data ).map( key => {\n      this.pipe.setAsset( key, data[ key ] );\n      PopLog.init( this.name, `Transfer asset to PipeService: ${key}` );\n    } );\n\n    this.entities[ 0 ].options = <any>Object.values( data.client ).sort( ( a: OptionItem, b: OptionItem ) => {\n      if( a.name < b.name ) return -1;\n      if( a.name > b.name ) return 1;\n      return 0;\n    } );\n\n    this.entities[ 1 ].options = <any>Object.values( data.account ).sort( ( a: OptionItem, b: OptionItem ) => {\n      if( a.name < b.name ) return -1;\n      if( a.name > b.name ) return 1;\n      return 0;\n    } );\n\n    this.entities[ 2 ].options = <any>Object.values( data.campaign ).sort( ( a: OptionItem, b: OptionItem ) => {\n      if( a.name < b.name ) return -1;\n      if( a.name > b.name ) return 1;\n      return 0;\n    } );\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  /**\n   * Retrieves any filter settings from session storage\n   */\n  private _getFilterStorage(){\n    let filter = <{ client?: any[], account?: any[], campaign?: any[] }>{};\n    if( IsObject( PopBusiness, [ 'id' ] ) ){\n      filter = GetSessionSiteVar( `Business.${PopBusiness.id}.Filter.Entities`, {} );\n      if(IsArray(filter.client, true)){\n        const client = this.entities[0];\n        if(!IsObject(client.selected)) client.selected = {};\n        filter.client.map((c)=>{\n          client.selected[c.id] = true;\n        });\n      }\n      if(IsArray(filter.account, true)){\n        const account = this.entities[1];\n        if(!IsObject(account.selected)) account.selected = {};\n        filter.account.map((a)=>{\n          account.selected[a.id] = true;\n        });\n      }\n      if(IsArray(filter.campaign, true)){\n        const campaign = this.entities[2];\n        if(!IsObject(campaign.selected)) campaign.selected = {};\n        filter.campaign.map((c)=>{\n          campaign.selected[c.id] = true;\n        });\n      }\n      // this.asset.views.map((internal_name: string) => {\n      //   if( !IsArray(filter[ internal_name ], true) ) delete filter[ internal_name ];\n      // });\n\n      SetPopFilter( filter );\n    }\n\n\n    this.filter = filter;\n  }\n\n\n  private _setDataStructure( res ){\n    const data = {\n      client: {},\n      account: {},\n      campaign: {}\n    };\n\n    if( IsArray( res, true ) ){\n      res.map( ( client ) => {\n        data.client[ +client.id ] = {\n          id: +client.id,\n          name: client.name,\n          archived: client.archived,\n        };\n        // this.asset.client.set(+client.id, data.client[ +client.id ]);\n        if( IsArray( client.allaccounts, true ) ){\n          client.allaccounts.map( ( account: any ) => {\n            if( IsObject( account ) ){\n              data.account[ +account.id ] = {\n                id: +account.id,\n                name: account.name,\n                client_id: +account.client_id,\n                archived: +account.archived,\n              };\n              // this.asset.account.set(+account.id, data.account[ +account.id ]);\n              if( IsArray( account.allcampaigns, true ) ){\n                account.allcampaigns.map( ( campaign: any ) => {\n                  if( IsObject( campaign ) ){\n                    data.campaign[ +campaign.id ] = {\n                      id: +campaign.id,\n                      name: campaign.name,\n                      client_id: +client.id,\n                      account_id: +campaign.account_id,\n                      archived: +campaign.archived,\n                    };\n                    // this.asset.campaign.set(+campaign.id, data.campaign[ +campaign.id ]);\n                  }\n                } );\n              }\n            }\n          } );\n        }\n      } );\n    }\n    return data;\n  }\n\n\n}\n","import { ElementRef, Inject, Injectable, isDevMode } from '@angular/core';\nimport { MatSnackBar, MatSnackBarRef } from '@angular/material/snack-bar';\nimport { PopTemplateAjaxLoaderComponent } from './assets/ajax-loader.component';\nimport { PopTemplateGoodByeComponent } from './assets/goodbye.component';\nimport { PopTemplateWelcomeComponent } from './assets/welcome.component';\nimport { PopTemplateErrorComponent } from './assets/error.component';\nimport { IsObject } from '../../pop-common-utility';\nimport { PopTemplateBufferComponent } from './assets/buffer.component';\nimport { PopCacFilterBarService } from './pop-cac-filter/pop-cac-filter.service';\nimport { AppGlobalInterface } from '../../pop-common.model';\n\n\n@Injectable( {\n  providedIn: 'root'\n} )\nexport class PopTemplateService {\n\n  protected asset = {\n    notification: <MatSnackBarRef<any>>undefined,\n    contentEl: <ElementRef>undefined\n  };\n\n\n\n\n  constructor(\n    private filter: PopCacFilterBarService,\n    private snackbar: MatSnackBar,\n    @Inject( 'APP_GLOBAL' ) private APP_GLOBAL: AppGlobalInterface,\n    @Inject( 'env' ) private env?\n  ){\n  }\n\n\n  turnOffFilter(){\n    this.filter.setActive( false );\n  }\n\n\n  welcome(){\n    this.asset.notification = this.snackbar.openFromComponent( PopTemplateWelcomeComponent, {\n      panelClass: 'pop-template-center',\n      duration: 5 * 1000\n    } );\n  }\n\n\n  buffer( expression: string = null, duration: number = 4 ){\n    if( isDevMode() ){\n      this.asset.notification = this.snackbar.openFromComponent( PopTemplateBufferComponent, {\n        panelClass: 'pop-template-center',\n        duration: duration * 1000,\n        data: {\n          expression: expression,\n        }\n      } );\n    }\n  }\n\n\n  error( error: { message: string, code: number }, duration: number = 5 ){\n    if( isDevMode() ){\n      this.asset.notification = this.snackbar.openFromComponent( PopTemplateErrorComponent, {\n        panelClass: 'pop-template-center',\n        duration: duration * 1000\n      } );\n      this.asset.notification.instance.error = error;\n    }\n  }\n\n\n  goodbye(){\n    this.asset.notification = this.snackbar.openFromComponent( PopTemplateGoodByeComponent, {\n      panelClass: 'pop-template-center',\n      duration: 5 * 1000\n    } );\n  }\n\n\n  lookBusy( duration: number = 5 ){\n    if( isDevMode() ){\n      this.asset.notification = this.snackbar.openFromComponent( PopTemplateAjaxLoaderComponent, {\n        panelClass: 'pop-template-center',\n        duration: duration * 1000\n      } );\n    }\n  }\n\n\n  notify( message: string, action: string = null, duration: number = 3 ){\n    this.asset.notification = this.snackbar.open(\n      message, action, {\n        panelClass: 'pop-template-center',\n        duration: duration * 1000\n      }\n    );\n  }\n\n\n  clear(){\n    if( IsObject( this.asset.notification, [ 'dismiss' ] ) ){\n      this.asset.notification.dismiss();\n    }\n  }\n\n\n  setContentEl( el: ElementRef ): void{\n    if( el ) this.asset.contentEl = el;\n  }\n\n\n  verify(){\n    if( this.APP_GLOBAL.isVerified() ){\n      this.APP_GLOBAL.verification.next();\n    }\n  }\n\n\n  getContentHeight( modal = false, overhead = 60 ): number{\n    let height = window.innerHeight;\n    if( this.asset.contentEl && this.asset.contentEl.nativeElement.offsetTop) height = (height - this.asset.contentEl.nativeElement.offsetTop);\n    if( modal ) height -= 100;\n    if( overhead ) height -= overhead;\n    return height;\n  }\n}\n","import { Component, ElementRef, HostBinding, Inject, Input, OnDestroy, OnInit, Renderer2, ViewChild, ViewEncapsulation } from '@angular/core';\nimport { EntityMenu } from './pop-left-menu/entity-menu.model';\nimport { PopTemplateService } from './pop-template.service';\nimport {\n  AppGlobalInterface, AppThemeInterface,\n} from '../../pop-common.model';\nimport { PopExtendComponent } from '../../pop-extend.component';\nimport { Router } from '@angular/router';\nimport { fadeInOut } from '../../pop-common-animations.model';\n\n\n@Component( {\n  selector: 'lib-pop-template',\n  templateUrl: './pop-template.component.html',\n  styleUrls: [ './pop-template.component.scss' ],\n  encapsulation: ViewEncapsulation.None,\n} )\nexport class PopTemplateComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @ViewChild( 'header' ) header: ElementRef;\n  @ViewChild( 'content' ) content: ElementRef;\n  @HostBinding( 'class.pop-template-backdrop' ) @Input() backdrop = true;\n  @Input() menus: EntityMenu[] = [];\n  @Input() widgets: any[] = [];\n  @Input() filter = true;\n  @Input() left = true;\n  @Input() right = true;\n  @Input() displayMenu = true;\n\n\n  public name = 'PopTemplateComponent';\n\n\n  constructor(\n    public el: ElementRef,\n    private router: Router,\n    private template: PopTemplateService,\n    private renderer: Renderer2,\n    @Inject( 'APP_GLOBAL' ) private APP_GLOBAL: AppGlobalInterface,\n    @Inject( 'APP_THEME' ) private APP_THEME: AppThemeInterface,\n  ){\n    super();\n\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n        this.dom.setSubscriber( 'theme', this.APP_THEME.init.subscribe( ( val: boolean ) => {\n          this.dom.setTimeout(`remove-backdrop`, ()=>{\n            this.renderer.removeClass(document.body, 'site-backdrop-dark');\n          }, 0);\n          if( val ) this.backdrop = !val;\n        } ) );\n        this.dom.setSubscriber( 'init', this.APP_GLOBAL.init.subscribe( ( val: boolean ) => {\n          if( val ) this._initialize();\n        } ) );\n\n        window.onbeforeunload = () =>{\n          try {\n            this.APP_GLOBAL._unload.next(true);\n          } catch(e){\n            console.log(e);\n          }\n        };\n\n        return resolve( true );\n      } );\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n        this.template.setContentEl( this.content );\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  ngOnInit(): void{\n    super.ngOnInit();\n  }\n\n\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  private _initialize(){\n\n    return true;\n  }\n\n\n}\n","import { IsString } from '../../../pop-common-utility';\n\n\nexport class EntityMenu {\n  public id: number;\n  public description?: string;\n  public entity_id?:number;\n  public icon?: string;\n  public iconType?: string;\n  public name: string;\n  public path: string;\n  public short_description: string;\n  public internal_name: string;\n  public sort: number;\n  public character_icon: string;\n  hasAlias: boolean;\n  originalPath: string;\n  originalName: string;\n\n\n  constructor(\n    args: {\n      id?: number,\n      description?: string,\n      entity_id?:number,\n      icon?: string,\n      name: string,\n      path: string,\n      short_description: string,\n      internal_name?: string;\n      sort: number,\n      hasAlias?: boolean;\n      originalPath?: string;\n      originalName?: string;\n    }\n  ){\n    this.id = args.id || 0;\n    this.description = args.description || '';\n    this.name = args.name;\n    this.entity_id = args.entity_id || null;\n    this.path = args.path;\n    this.short_description = args.short_description || '';\n    this.sort = args.sort || 0;\n    this.internal_name = args.internal_name || null;\n    this.hasAlias =  args.hasAlias ? true: false;\n    this.originalPath =  args.originalPath;\n    this.originalName =  args.originalName;\n    if( IsString(args.icon, true) ){\n      this.icon = args.icon;\n      this._setIcon();\n    }\n    else{\n      this._setCharacters();\n    }\n  }\n\n\n  private _setPath(){\n    const pathSet = this.path.split(\"/\");\n    this.path = '/' + pathSet[ pathSet.length - 1 ];\n  }\n\n\n  private _setIcon(){\n    const iconSet = this.icon.split(\":\");\n    if( iconSet.length === 2 ){\n      [ this.iconType, this.icon ] = iconSet;\n    }\n  }\n\n\n  private _setCharacters(){\n    this.character_icon = \"\";\n    const nameArray = this.name.split(\" \");\n    if( nameArray.length >= 2 ){\n      this.character_icon += nameArray[ 0 ].charAt(0).toLocaleUpperCase();\n      this.character_icon += nameArray[ 1 ].charAt(0).toLocaleUpperCase();\n    }\n    else{\n      this.character_icon += this.name.charAt(0).toLocaleUpperCase();\n      this.character_icon += this.name.charAt(1).toLocaleLowerCase();\n    }\n  }\n}\n\n","import {Injectable} from '@angular/core';\nimport {EntityAccessInterface, EntityParams, EntityParamsInterface} from '../../../pop-common.model';\nimport {DeepMerge, IsNumber, IsObject, SpaceToHyphenLower} from '../../../pop-common-utility';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PopEntityUtilParamService {\n\n  private store = <Map<string, EntityParamsInterface>>new Map<string, EntityParamsInterface>();\n  private mapById = <Map<number, string>>new Map<number, string>();\n  private mapByRoute = <Map<string, string>>new Map<string, string>();\n\n\n  constructor() {\n    this.setEntityParams({\n      id: 0,\n      alias: null,\n      access: {\n        can_create: 1,\n        can_read: 1,\n        can_update: 1,\n        can_delete: 0,\n        can_destroy: 0,\n      },\n      can_extend: false,\n      path: '/auth/user',\n      param: '',\n      api: '/auth/user',\n      internal_name: 'prime_user',\n      name: 'Prime User',\n    });\n  }\n\n\n  public getEntityParamsWithPath(path: string, entityId: number = null,): EntityParams {\n    let entity;\n    let entityParams = <EntityParams>undefined;\n    const internal_name = this.mapByRoute.get(path);\n    if (internal_name && this.store.has(internal_name)) entity = this.store.get(internal_name);\n    if (entity) {\n      entityParams = <EntityParams>{\n        alias: entity.alias,\n        api: entity.api,\n        app: entity.app,\n        id: entity.id,\n        can_extend: entity.can_extend,\n        internal_name: entity.internal_name,\n        name: entity.name,\n        path: entity.path,\n        param: entity.param,\n      };\n      if (entityId) entityParams.entityId = entityId;\n    }\n\n    return entityParams;\n  }\n\n\n  public setEntityParams(params: EntityParamsInterface): void {\n    if (IsObject(params, true)) {\n      if (!(IsObject(params.access, true))) {\n        params.access = {can_create: 0, can_read: 0, can_update: 0, can_delete: 0, can_destroy: 0};\n      } else {\n        Object.keys(params.access).map((accessName) => {\n          params.access[accessName] = +params.access[accessName];\n        });\n      }\n      this.mapById.set(+params.id, params.internal_name);\n      this.mapByRoute.set(SpaceToHyphenLower(params.name), params.internal_name);\n      if (this.store.has(params.internal_name)) {\n        let existingParams = this.store.get(params.internal_name);\n        existingParams = DeepMerge(existingParams, params);\n        this.store.set(params.internal_name, existingParams);\n      } else {\n        this.store.set(params.internal_name, params);\n      }\n    }\n  }\n\n\n  public getEntityParams(internal_name: string | number, entityId: number = null,): EntityParamsInterface {\n    let entityParams = <EntityParams>undefined;\n    if (IsNumber(internal_name)) {\n      internal_name = this.mapById.get(+internal_name);\n    }\n    const entity = this.store.get(internal_name + '');\n    if (entity) {\n      entityParams = <EntityParams>{\n        alias: entity.alias,\n        api: entity.api,\n        app: entity.app,\n        id: entity.id,\n        can_extend: entity.can_extend,\n        internal_name: entity.internal_name,\n        name: entity.name,\n        path: entity.path,\n        param: entity.param,\n      };\n      if (entityId) entityParams.entityId = entityId;\n    }\n    return entityParams;\n  }\n\n\n  public getAccess(internal_name: string | number, accessType?: string): EntityAccessInterface | null {\n    let access = null;\n    if (IsNumber(internal_name)) internal_name = this.mapById.get(+internal_name);\n    if (this.store.has(internal_name + '')) {\n      const entity = this.store.get(internal_name + '');\n      if (accessType && accessType in entity.access) {\n        access = entity.access[accessType];\n      } else {\n        access = entity.access;\n      }\n    }\n    return access;\n  }\n\n  public getAlias(internal_name: string | number, accessType?: string): EntityAccessInterface | null {\n    let alias = null;\n    if (IsNumber(internal_name)) internal_name = this.mapById.get(+internal_name);\n    if (this.store.has(internal_name + '')) {\n      const entity = this.store.get(internal_name + '');\n      if (IsObject(entity.alias, true)) {\n        alias = entity.alias;\n      }\n    }\n    return alias;\n  }\n\n\n  /**\n   * Checks if the user has permissons to the specific type of an entity depending upon the local token details.\n   *\n   * @param appName - The name of the app to check. IE: admin, cis, etc...\n   * @param entityName - The name of the entity inside the app to check: IE: For the admin app, users.\n   * @param accessType - The type of permissons to check. Enum [can_create, can_read, can_update, can_delete]\n   */\n  public checkAccess(internal_name: string | number, accessType: string): boolean {\n    if (IsNumber(internal_name)) internal_name = this.mapById.get(+internal_name);\n    if (this.store.has(internal_name + '')) {\n      const entity = this.store.get(internal_name + '');\n      return !!entity.access[accessType];\n    }\n    return false;\n  }\n\n\n}\n","import {Component, HostBinding, Inject, Input, OnDestroy, OnInit} from '@angular/core';\nimport {EntityMenu} from './entity-menu.model';\nimport {\n  GetSiteVar,\n  IsArray, IsCallableFunction, IsDefined,\n  IsObject, IsString,\n  ObjectsMatch,\n  SetSiteVar,\n  SpaceToHyphenLower, TitleCase,\n} from '../../../pop-common-utility';\nimport {\n  AppGlobalInterface,\n  AppMenusInterface,\n  PopApp,\n  PopAuth,\n  PopHref,\n  PopLog,\n  ServiceInjector,\n  SetPopAliasRouteMap,\n} from '../../../pop-common.model';\nimport {Router} from '@angular/router';\nimport {PopExtendComponent} from '../../../pop-extend.component';\nimport {PopEntityUtilParamService} from '../../entity/services/pop-entity-util-param.service';\n\n\n@Component({\n  selector: 'lib-pop-left-menu',\n  templateUrl: './pop-left-menu.component.html',\n  styleUrls: ['./pop-left-menu.component.scss'],\n})\nexport class PopLeftMenuComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() entityMenus: EntityMenu[] = [];\n  @HostBinding('class.sw-hidden') @Input() hidden = false;\n  public name = 'PopLeftMenuComponent';\n\n  protected srv = {\n    param: <PopEntityUtilParamService>ServiceInjector.get(PopEntityUtilParamService)\n  };\n\n  protected asset = {\n    siteVar: 'App.LeftMenu.open',\n  };\n\n  public ui = {};\n\n\n  constructor(\n    private router: Router,\n    @Inject('APP_GLOBAL') private APP_GLOBAL: AppGlobalInterface,\n    @Inject('APP_MENUS') private APP_MENUS: AppMenusInterface,\n  ) {\n    super();\n\n    if (APP_GLOBAL.isOpen()) {\n      PopLog.init(this.name, `Public App`, this.entityMenus);\n      this.hidden = ((this.APP_GLOBAL.isEntities() && !(IsObject(PopAuth))) || !(this.entityMenus.length)) ? true : false;\n    } else {\n      this._initialize();\n      this.dom.setSubscriber('init', this.APP_GLOBAL.init.subscribe(async (val: boolean) => {\n        if (val) {\n          this.dom.state.verified = await this.APP_GLOBAL.isVerified();\n          this._initialize();\n        }\n      }));\n    }\n\n\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise(async (resolve) => {\n\n        return resolve(true);\n      });\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise(async (resolve) => {\n        this._setState();\n        return resolve(true);\n      });\n    };\n  }\n\n\n  ngOnInit() {\n    super.ngOnInit();\n  }\n\n  /**\n   * This fx will open/close the left side nav\n   */\n  public onToggleMenu(): void {\n    this.dom.state.open = !this.dom.state.open;\n    this.dom.state.closed = !this.dom.state.open;\n    SetSiteVar(this.asset.siteVar, this.dom.state.open);\n    window.dispatchEvent(new Event('onWindowResize'));\n  }\n\n  ngOnDestroy() {\n    super.ngOnDestroy();\n  }\n\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  /**\n   * This fx will build out the menus for this component\n   * @private\n   */\n  private _initialize() {\n    this.dom.setTimeout(`init`, async () => {\n      const menus = await this._setMenus();\n      PopLog.init(this.name, `Private App`, this.entityMenus);\n      if (IsArray(menus, true) && this._isVerifiedMenusDifferent(menus)) {\n        this.entityMenus = menus;\n      }\n      this.hidden = ((this.APP_GLOBAL.isEntities() && !(IsObject(PopAuth))) || !(this.entityMenus.length)) ? true : false;\n      if (this.dom.state.verified) {\n        await this._checkDefaultRoute();\n      }\n\n    }, 5);\n  }\n\n\n  /**\n   * Determine the state of this component\n   * The component should be open or closed base of the users latest session setting, or should default to open\n   * @private\n   */\n  private _setState() {\n    const open = GetSiteVar(this.asset.siteVar, true);\n    this.dom.state.open = typeof open === 'boolean' ? open : false;\n    this.dom.state.closed = !this.dom.state.open;\n  }\n\n\n  /**\n   * Create a list of the menus needed for the current app\n   * @private\n   */\n  private _setMenus(): Promise<EntityMenu[]> {\n    return new Promise<EntityMenu[]>(async (resolve) => {\n      let menus = [];\n      const routeAliasMap = {};\n      if (this.APP_GLOBAL.isEntities() && IsObject(PopApp, ['menu'])) {\n        for (const menuEntity in PopApp.menu) {\n          if (IsObject(PopApp.menu [menuEntity])) {\n            const menu = PopApp.menu[menuEntity];\n            menu.originalPath = menu.path;\n            menu.originalName = menu.name;\n\n            if (menu.entity_id) {\n              const params = this.srv.param.getEntityParams(menu.entity_id);\n              if (IsObject(params, ['id', 'internal_name']) && this.srv.param.checkAccess(params.internal_name, 'can_read')) {\n                menu.id = +menu.entity_id;\n                menu.internal_name = params.internal_name;\n                if (this.APP_GLOBAL.isAliases() && IsObject(params.alias, ['name', 'plural'])) {\n                  const alias = params.alias;\n                  menu.hasAlias = true;\n                  menu.name = TitleCase(alias.plural);\n                  menu.path = SpaceToHyphenLower(alias.plural);\n                  routeAliasMap[SpaceToHyphenLower(alias.plural)] = menu.originalPath;\n                } else {\n                  menu.hasAlias = false;\n                }\n                menus.push(new EntityMenu(menu));\n              } else {\n                PopLog.warn(this.name, `Cannot view menu:`, menu);\n              }\n            } else {\n              menus.push(new EntityMenu(menu));\n            }\n          }\n        }\n        if (IsCallableFunction(this.APP_MENUS.init)) {\n          menus = this.APP_MENUS.init(menus);\n        }\n        SetPopAliasRouteMap(routeAliasMap);\n        this.APP_MENUS.set(menus);\n        return resolve(menus);\n      } else {\n        return resolve(menus);\n      }\n    });\n  }\n\n\n  /**\n   * Set a default route for the project\n   * @param parent\n   * @param config\n   * @param routes\n   * @private\n   */\n  private _checkDefaultRoute(): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      if (this.router.config.length && IsArray(this.entityMenus, true)) {\n        const defaultRoute = this.router.config.find((route) => route.path === '**');\n        if (!defaultRoute && this._isValidRoute(this.entityMenus[0].path)) {\n          this.router.config.push({path: '**', 'redirectTo': this.entityMenus[0].path});\n          PopLog.init(this.name, `Default Route Wildcard **`, this.entityMenus[0].path);\n        }\n        // const activeRouteUrl = ( !this.router.url || this.router.url === '/' ) ? false : true;\n        // if( !activeRouteUrl ){\n        const currentPath = window.location.href.split(`${PopHref}`)[1];\n        if (this._isValidRoute(currentPath)) {\n          this._fallBackUrlRoute();\n        } else {\n          this._fallBackMenuRoute();\n        }\n        // }\n      } else {\n\n      }\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * This fx will try to use the first menu item as the default route\n   * @private\n   */\n  private _fallBackMenuRoute() {\n    PopLog.init(this.name, `Fallback Menu Route`, this.entityMenus[0].path);\n    if (IsArray(this.entityMenus, true) && this._isValidRoute(this.entityMenus[0].path)) {\n      this.log.info(`Fallback Menu Route`, this.entityMenus[0].path);\n      this.router.navigate([this.entityMenus[0].path]).catch((e) => {\n        this.log.info(`Could not find route`);\n        this._fallbackSystemRoute();\n      });\n    } else {\n      this._fallbackSystemRoute();\n    }\n  }\n\n\n  /**\n   * This fx will attempt to use the current url as the default route\n   * @private\n   */\n  private _fallBackUrlRoute() {\n    let currentPath = window.location.href.split(PopHref)[1];\n    currentPath = currentPath.split('?')[0];\n    if (this._isValidRoute(currentPath)) {\n      PopLog.init(this.name, `Current Route`, currentPath);\n      this.router.navigate([currentPath], {queryParams: this._getUrlParams()}).catch((e) => {\n        this._fallbackSystemRoute();\n      }).then(() => {\n        if (!(this.router.url.includes(currentPath))) {\n          this._fallbackSystemRoute();\n        }\n      });\n    } else {\n      this._fallbackSystemRoute();\n    }\n  }\n\n\n  /**\n   * This fx will temp redirect and try to find a valid route\n   * @private\n   */\n  private _fallbackSystemRoute() {\n    if (this.dom.state.verified) {\n      this.router.navigate(['/system/route'], {skipLocationChange: true});\n    } else {\n      this.router.navigate(['/']);\n    }\n  }\n\n\n  /**\n   * This fx determines if there is a difference between tow sets of menus(existing, new)\n   * @param menus\n   * @private\n   */\n  private _isVerifiedMenusDifferent(menus: EntityMenu[]) {\n    return !(ObjectsMatch(this.entityMenus, menus));\n  }\n\n\n  /**\n   * This fx determines if a path is a valid route\n   * @param path\n   * @private\n   */\n  private _isValidRoute(path: string) {\n    return IsDefined(path, false) && IsString(path, true) && path !== '/' && path !== 'null' && !(String(path).includes('/error/'));\n  }\n\n\n  private _getUrlParams() {\n    const params = {};\n    window.location.search.slice(1).split('&').forEach(elm => {\n      if (elm === '') return;\n      const spl = elm.split('=');\n      const d = decodeURIComponent;\n      params[d(spl[0])] = (spl.length >= 2 ? d(spl[1]) : true);\n    });\n\n    return params;\n  }\n}\n\n","import {NgModule} from '@angular/core';\nimport {MatButtonModule} from '@angular/material/button';\nimport {MatButtonToggleModule} from '@angular/material/button-toggle';\nimport {MatCheckboxModule} from '@angular/material/checkbox';\nimport {MatCardModule} from '@angular/material/card';\nimport {MatDatepickerModule} from '@angular/material/datepicker';\nimport {MatExpansionModule} from '@angular/material/expansion';\nimport {MatFormFieldModule} from '@angular/material/form-field';\nimport {MatGridListModule} from '@angular/material/grid-list';\nimport {MatInputModule} from '@angular/material/input';\nimport {MatIconModule} from '@angular/material/icon';\nimport {MatListModule} from '@angular/material/list';\nimport {MatMenuModule} from '@angular/material/menu';\nimport {MatPaginatorModule} from '@angular/material/paginator';\nimport {MatProgressBarModule} from '@angular/material/progress-bar';\nimport {MatProgressSpinnerModule} from '@angular/material/progress-spinner';\nimport {MatRadioModule} from '@angular/material/radio';\nimport {MatSelectModule} from '@angular/material/select';\nimport {MatSidenavModule} from '@angular/material/sidenav';\nimport {MatSlideToggleModule} from '@angular/material/slide-toggle';\nimport {MatSortModule} from '@angular/material/sort';\nimport {MatRippleModule} from '@angular/material/core';\nimport {MatDialog, MatDialogModule} from '@angular/material/dialog';\nimport {MatTableModule} from '@angular/material/table';\nimport {MatTabsModule} from '@angular/material/tabs';\nimport {MatToolbarModule} from '@angular/material/toolbar';\nimport {MatTooltipModule} from '@angular/material/tooltip';\nimport {MatAutocompleteModule} from '@angular/material/autocomplete';\nimport {MatSliderModule} from '@angular/material/slider';\nimport {Overlay} from \"@angular/cdk/overlay\";\n\n@NgModule({\n  imports: [\n    MatAutocompleteModule,\n    MatButtonModule,\n    MatButtonToggleModule,\n    MatCheckboxModule,\n    MatCardModule,\n    MatDatepickerModule,\n    MatDialogModule,\n    MatExpansionModule,\n    MatFormFieldModule,\n    MatGridListModule,\n    MatInputModule,\n    MatIconModule,\n    MatListModule,\n    MatMenuModule,\n    MatPaginatorModule,\n    MatProgressBarModule,\n    MatProgressSpinnerModule,\n    MatRadioModule,\n    MatRippleModule,\n    MatSelectModule,\n    MatSidenavModule,\n    MatSlideToggleModule,\n    MatSortModule,\n    MatTableModule,\n    MatTabsModule,\n    MatToolbarModule,\n    MatTooltipModule,\n    MatSliderModule\n  ],\n  exports: [\n    MatAutocompleteModule,\n    MatButtonModule,\n    MatButtonToggleModule,\n    MatCheckboxModule,\n    MatCardModule,\n    MatDatepickerModule,\n    MatDialogModule,\n    MatExpansionModule,\n    MatFormFieldModule,\n    MatGridListModule,\n    MatInputModule,\n    MatIconModule,\n    MatListModule,\n    MatMenuModule,\n    MatPaginatorModule,\n    MatProgressBarModule,\n    MatProgressSpinnerModule,\n    MatRadioModule,\n    MatRippleModule,\n    MatSelectModule,\n    MatSidenavModule,\n    MatSlideToggleModule,\n    MatSortModule,\n    MatTableModule,\n    MatTabsModule,\n    MatToolbarModule,\n    MatTooltipModule,\n    MatSliderModule,\n  ],\n  providers: [],\n})\nexport class MaterialModule {\n  static forRoot() {\n    return {\n      ngModule: MaterialModule,\n      providers: [MatDialog, Overlay]\n    };\n  }\n}\n","import { Component, Input, OnInit } from '@angular/core';\nimport { MainSpinner } from './pop-indicators.model';\n\n\n@Component({\n  selector: 'lib-main-spinner',\n  templateUrl: 'main-spinner.component.html',\n  styleUrls: ['main-spinner.component.scss']\n})\nexport class MainSpinnerComponent implements OnInit {\n  @Input() options: MainSpinner;\n  color: string;\n  mode: string;\n  diameter: number;\n  strokeWidth: number;\n\n\n  ngOnInit(){\n    if( !this.options ) this.options = {};\n    this.color = this.options.color ? this.options.color : 'primary';\n    this.mode = this.options.mode ? this.options.mode : 'indeterminate';\n    this.diameter = this.options.diameter ? this.options.diameter : 75;\n    this.strokeWidth = this.options.strokeWidth ? this.options.strokeWidth : 12;\n  }\n}\n","import { NgModule } from \"@angular/core\";\nimport {MaterialModule} from '../../material/material.module';\nimport {MainSpinnerComponent} from './main-spinner.component';\n\n@NgModule({\n  declarations: [MainSpinnerComponent],\n  imports: [MaterialModule],\n  exports: [MainSpinnerComponent],\n})\nexport class PopIndicatorsModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatRippleModule } from '@angular/material/core';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatListModule } from '@angular/material/list';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { PopLeftMenuComponent} from './pop-left-menu.component';\nimport { PopIndicatorsModule } from '../../base/pop-indicators/pop-indicators.module';\n\n@NgModule({\n    declarations: [\n        PopLeftMenuComponent,\n    ],\n    imports: [\n        CommonModule,\n        RouterModule,\n        MatRippleModule,\n        MatIconModule,\n        MatTooltipModule,\n        MatListModule,\n        MatButtonModule,\n        PopIndicatorsModule\n    ],\n    exports: [\n        PopLeftMenuComponent,\n    ],\n    providers: [\n    ],\n\n})\nexport class PopLeftMenuModule {\n}\n","import { Component, ComponentFactoryResolver, ComponentRef, OnDestroy, OnInit, ViewContainerRef } from '@angular/core';\nimport { ComponentTemplateInterface, DestroyComponentTemplate, GetComponentTemplateContainer } from './pop-common-dom.models';\nimport {DynamicComponentInterface, PopBaseEventInterface, PopComponentResolver} from './pop-common.model';\nimport { Subscription } from 'rxjs';\nimport { ServiceInjector } from './pop-common.model';\nimport { PopExtendComponent } from './pop-extend.component';\nimport { IsDefined, IsObject, IsString } from './pop-common-utility';\n\n\n@Component( {\n  selector: 'lib-pop-template-component',\n  template: `Template Component`,\n} )\nexport class PopExtendDynamicComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  protected template: ComponentTemplateInterface = GetComponentTemplateContainer();\n\n\n  constructor(){\n    super();\n\n    this.template = <ComponentTemplateInterface>{\n      ...this.template, ...{\n        attach: ( container: string | ViewContainerRef ) => {\n          if( IsString( container, true ) ){\n            if( this[ <string> container ] ){\n              this.template.container = this[ <string>container ];\n              delete this[ <string>container ];\n            }else{\n            }\n          }else{\n            this.template.container = <ViewContainerRef>container;\n          }\n        },\n\n        render: ( list: DynamicComponentInterface[], transfer = [ 'core', 'position' ], bypassTransfer = false ) => {\n          this.template.ref_events.map( ( subscription: Subscription ) => {\n            if( subscription && typeof subscription.unsubscribe === 'function' ){\n              subscription.unsubscribe();\n            }\n          } );\n\n          this.template.refs = this.template.refs.map( function( componentRef: ComponentRef<any> ){\n            if( componentRef && typeof componentRef.destroy === 'function' ){\n              componentRef.destroy();\n            }\n            componentRef = null;\n            return null;\n          } );\n          this.template.transfer = {};\n          if( !bypassTransfer ){\n            transfer.map( ( transferKey: string ) => {\n              if( typeof this[ transferKey ] !== 'undefined' ){\n                this.template.transfer[ transferKey ] = this[ transferKey ];\n              }\n            } );\n          }\n          if( this.template && this.template.container ){\n\n\n            this.template.container.clear();\n            if( Array.isArray( list ) ){\n              list.map( ( component: DynamicComponentInterface ) => {\n                if( IsObject( component, true ) && IsDefined( component.type ) ){\n                  const factory = PopComponentResolver.resolveComponentFactory( component.type );\n                  const componentRef = <any>this.template.container.createComponent( factory );\n\n                  if( componentRef.instance.events ){\n                    this.template.ref_events.push( componentRef.instance.events.subscribe( ( event: PopBaseEventInterface ) => {\n                      if( typeof this.dom.handler.bubble === 'function' ){\n                        this.dom.handler.bubble( this.core, event );\n                      }else{\n                        if( this.trait.bubble ) this.events.emit( event );\n                      }\n                    } ) );\n                  }\n\n                  if( typeof( component.inputs ) === 'object' ){\n                    Object.keys( component.inputs ).map( ( key ) => {\n                      if( typeof( key ) === 'string' && typeof( component.inputs[ key ] ) !== 'undefined' ){\n                        componentRef.instance[ key ] = component.inputs[ key ];\n                      }\n                    } );\n                  }\n                  Object.keys( this.template.transfer ).map( ( transferKey: string ) => {\n                    componentRef.instance[ transferKey ] = this.template.transfer[ transferKey ];\n                  } );\n                  componentRef.changeDetectorRef.detectChanges();\n                  this.template.refs.push( componentRef );\n                }\n              } );\n            }\n          }\n        },\n        clear: () => {\n          if( this.template.container ) this.template.container.clear();\n        },\n\n        destroy: () => {\n          if( this.template ) DestroyComponentTemplate( this.template );\n        },\n      }\n    };\n  }\n\n\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  ngOnDestroy(){\n    this.template.destroy();\n    super.ngOnDestroy();\n  }\n\n}\n","import { Component, HostBinding, Inject, Input, OnDestroy, OnInit } from '@angular/core';\nimport { AppGlobalInterface, AppWidgetsInterface, PopAuth } from '../../../pop-common.model';\nimport { PopExtendDynamicComponent } from '../../../pop-extend-dynamic.component';\nimport { EntityMenu } from '../pop-left-menu/entity-menu.model';\nimport { IsObject } from '../../../pop-common-utility';\n\n\n@Component({\n  selector: 'lib-pop-widget-bar',\n  templateUrl: './pop-widget-bar.component.html',\n  styleUrls: [ './pop-widget-bar.component.scss' ],\n})\nexport class PopWidgetBarComponent extends PopExtendDynamicComponent implements OnInit, OnDestroy {\n  @HostBinding('class.sw-hidden') @Input() hidden = false;\n  @Input() widgets: any[] = [];\n  public name =  'PopWidgetBarComponent';\n\n  public ui = {};\n\n  protected asset = {};\n\n  constructor(\n    @Inject( 'APP_GLOBAL' ) private APP_GLOBAL: AppGlobalInterface,\n    @Inject( 'APP_WIDGETS' ) private APP_WIDGETS: AppWidgetsInterface,\n  ){\n    super();\n\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n        this.dom.state.open = false;\n        this.dom.state.closed = true;\n\n        this.dom.setSubscriber( 'init', this.APP_GLOBAL.init.subscribe( ( val: boolean ) => {\n          if( val ) this._initialize();\n        } ) );\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  public onToggleMenu(): void{\n    this.dom.state.open = !this.dom.state.open;\n    this.dom.state.closed = !this.dom.state.open;\n    window.dispatchEvent(new Event('onWindowResize'));\n  }\n\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n  private _initialize(){\n    this.hidden = ( ( this.APP_GLOBAL.isEntities() && !( IsObject( PopAuth ) ) ) || !( this.widgets.length ) ) ? true : false;\n    return true;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { PopWidgetBarComponent } from './pop-widget-bar.component';\nimport { MatButtonModule } from '@angular/material/button';\n\n\n@NgModule( {\n  imports: [\n    CommonModule,\n    MatButtonModule\n  ],\n  declarations: [\n    PopWidgetBarComponent,\n  ],\n  exports: [\n    PopWidgetBarComponent,\n  ],\n  providers: [],\n} )\nexport class PopWidgetBarModule{\n}\n","import { ChangeDetectorRef, Component, ElementRef, HostBinding, Input, OnDestroy, OnInit } from '@angular/core';\nimport { PopExtendComponent } from '../../../pop-extend.component';\nimport { Dictionary, Entity, FieldItemPatchInterface, PopBaseEventInterface, PopRequest, ServiceInjector } from '../../../pop-common.model';\nimport { HttpErrorResponse } from '@angular/common/http';\nimport { FormControl } from '@angular/forms';\nimport { ValidationErrorMessages } from '../../../services/pop-validators';\nimport {GetHttpErrorMsg, IsArray, IsNumber, IsObject, IsString, PopTransform} from '../../../pop-common-utility';\nimport { SessionEntityFieldUpdate } from '../../entity/pop-entity-utility';\nimport { PopEntityEventService } from '../../entity/services/pop-entity-event.service';\n\n\n@Component( {\n  selector: 'lib-pop-field-item-component',\n  template: `Field Item Component`,\n} )\nexport class PopFieldItemComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() position = 1;\n  @Input() when: any[] = null;\n  @HostBinding( 'class.sw-hidden' ) @Input() hidden = false;\n  config: any;\n  el: ElementRef;\n  name: string;\n  protected cdr: ChangeDetectorRef;\n\n\n  constructor(){\n    super();\n\n    this.dom.state.helper = false;\n    this.dom.state.tooltip = false;\n    this.dom.state.hint = false;\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * On Link Click\n   */\n  onLinkClick(){\n    console.log( 'LINK STUB: Link to Entity', this.config );\n  }\n\n\n  /**\n   * On Blur Event\n   */\n  onBlur(){\n    if( IsObject( this.config, true ) ){\n      let value = this.config.control.value;\n      if( IsString( value ) ){\n        value = String( value ).trim();\n        this.config.control.setValue( value );\n      }else if( IsNumber( value ) ){\n        value = +String( value ).trim();\n        this.config.control.setValue( value );\n      }\n\n      this.onBubbleEvent( 'onBlur' );\n      if( this._isChangeValid() ){\n        if( this._isFieldPatchable() ){\n          this.onChange();\n        }else{\n          this._applyTransformation( value );\n        }\n      }\n    }\n  }\n\n\n  /**\n   * On Change event\n   * @param value\n   * @param force\n   */\n  onChange( value?: any, force = false ){\n    if( IsObject( this.config, [ 'control' ] ) ){\n      this.log.info( `onChange`, value );\n      const control = <FormControl>this.config.control;\n      if( typeof value !== 'undefined' ){\n        control.setValue( value );\n        control.markAsDirty();\n        control.updateValueAndValidity();\n      }\n      if( this._isChangeValid() ){\n        value = typeof value !== 'undefined' ? value : this.config.control.value;\n        value = this._applyTransformation( value );\n        if( this.config.patch && ( this.config.patch.path || this.config.facade ) ){\n          this._onPatch( value, force );\n        }else{\n          this.onBubbleEvent( 'onChange' );\n        }\n      }else{\n        // console.log( 'invalid change', this.config.control.value );\n        this.onBubbleEvent( 'onInvalidChange' );\n      }\n    }\n  }\n\n\n  /**\n   * On Focus event\n   */\n  onFocus(): void{\n    if( IsObject( this.config, [ 'control' ] ) ){\n      const control = <FormControl>this.config.control;\n      if( !control.dirty ) this.asset.storedValue = this.config.control.value;\n      this.config.message = '';\n      this.onBubbleEvent( 'onFocus' );\n    }\n  }\n\n\n  /**\n   * This will bubble an event up the pipeline\n   * @param eventName\n   * @param message\n   * @param extend\n   * @param force\n   */\n  onBubbleEvent( eventName: string, message: string = null, extend: Dictionary<any> = {}, force = false ): PopBaseEventInterface{\n    if( IsObject( this.config, true ) ){\n      const event = <PopBaseEventInterface>{\n        type: 'field',\n        name: eventName,\n        source: this.name\n      };\n      if( this.config ) event.config = this.config;\n      if( message ) event.message = message;\n      Object.keys( extend ).map( ( key ) => {\n        event[ key ] = extend[ key ];\n      } );\n      this.log.event( `onBubbleEvent`, event );\n      if( this.config.bubble || force ){\n        this.events.emit( event );\n      }\n\n      return event;\n    }\n  }\n\n\n  ngOnDestroy(){\n    this._clearState();\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Protected Method )                                      *\n   *               These are protected instead of private so that they can be overridden          *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  /**\n   * Hook that is called on destroy to reset the field\n   */\n  protected _clearState(): void{\n    const patch = <FieldItemPatchInterface>this.config.patch;\n    const control = <FormControl>this.config.control;\n    if( patch.running ){\n      control.enable();\n      patch.running = false;\n    }\n  }\n\n\n  /**\n   * Hook that is called right before a patch\n   */\n  protected _beforePatch(): Promise<boolean>{\n    return new Promise( ( resolve ) => {\n      const patch = <FieldItemPatchInterface>this.config.patch;\n      const control = <FormControl>this.config.control;\n\n      control.disable();\n      patch.running = true;\n\n      this._clearMessage();\n\n      return resolve( true );\n    } );\n  }\n\n\n  /**\n   * Hook that is called right after the api response returns\n   */\n  protected _afterPatch(): Promise<boolean>{\n    return new Promise( ( resolve ) => {\n      const patch = <FieldItemPatchInterface>this.config.patch;\n      const control = <FormControl>this.config.control;\n\n      control.enable();\n      patch.running = false;\n\n      return resolve( true );\n    } );\n  }\n\n\n  /**\n   * Prepare to make an api call to the server\n   * @param value\n   * @param force\n   */\n  protected _onPatch( value?: string | number | boolean | null | Object, force = false ){\n    const patch = <FieldItemPatchInterface>this.config.patch;\n    if( !force ){\n      if( !this.config.control.valid ) return false;\n      if( value === this.asset.storedValue ) return false;\n      if( patch.trigger === 'manual' ) return false;\n    }\n    this._beforePatch().then( () => {\n      if( this.config.facade && !force ){\n        this.dom.setTimeout( 'api-facade', () => {\n          this._onPatchSuccess( <Entity>{} ).then( () => this._afterPatch() );\n        }, ( this.config.patch.duration || 0 ) );\n      }else{\n        this.log.info( `onPatch` );\n        this._doPatch( this._getPatchBody( value ) );\n      }\n    } );\n  }\n\n\n  /**\n   * This fx will make the actual api call to the server\n   * @param body\n   * @private\n   */\n  protected _doPatch( body: Entity ){\n    const method = this.config.patch.method ? this.config.patch.method : 'PATCH';\n    const patch = <FieldItemPatchInterface>this.config.patch;\n    const ignore401 = ( patch.ignore401 ? true : null );\n    const version = ( patch.version ? patch.version : 1 );\n    if( IsString( this.config.patch.path, true ) ){\n      const request = method === 'PATCH' ? PopRequest.doPatch( this.config.patch.path, body, version, ignore401, this.config.patch.businessId ) : PopRequest.doPost( this.config.patch.path, body, version, ignore401, this.config.patch.businessId );\n      this.dom.setSubscriber( 'api-patch', request.subscribe(\n        res => {\n          this._onPatchSuccess( res ).then( () => this._afterPatch() );\n        },\n        err => {\n          this._onPatchFail( err ).then( () => this._afterPatch() );\n        }\n      ) );\n    }else{\n      this._onPatchSuccess( body ).then( () => this._afterPatch() );\n    }\n  }\n\n\n  /**\n   * Determine if a change is valid\n   */\n  protected _isChangeValid(){\n    const control = <FormControl>this.config.control;\n    if( control.invalid ){\n      if( this.config.displayErrors ) this._setMessage( ValidationErrorMessages( control.errors ) );\n      return false;\n    }\n    return this._checkPrevent();\n  }\n\n\n  /**\n   * Determine if a field should be patched\n   */\n  protected _isFieldPatchable(){\n    if( this.config.facade ){\n      return true;\n    }else if( this.config.patch && this.config.patch.path ){\n      return true;\n    }\n    return false;\n  }\n\n\n  /**\n   * Helper to determine if an event is related to a field update\n   * @param event\n   */\n  protected _isFieldChange( event: PopBaseEventInterface ){\n    return event.type === 'field' && ( event.name === 'onChange' || event.name === 'patch' );\n  }\n\n\n  /**\n   * Transformations can be applied to a value before it is sent to the api server\n   * @param value\n   */\n  protected _applyTransformation( value: any ){\n    if( IsString( this.config.transformation, true ) ){\n      value = PopTransform( value, this.config.transformation );\n      if( value !== this.config.control.value ) this.config.control.setValue( value );\n    }\n    return value;\n  }\n\n\n  /**\n   * Handle an api call success\n   * @param res\n   */\n  protected _onPatchSuccess( res: Entity ): Promise<boolean>{\n    return new Promise( ( resolve ) => {\n      this.log.info( `onPatchSuccess` );\n      const patch = <FieldItemPatchInterface>this.config.patch;\n      const control = <FormControl>this.config.control;\n      this.asset.storedValue = control.value;\n      patch.success = true;\n      patch.running = false;\n\n\n      const event = this.onBubbleEvent( `patch`, 'Patched.', {\n        success: true,\n        response: res.data ? res.data : res\n      }, true );\n\n\n      if( IsObject( this.core, [ 'channel' ] ) ){\n        if( this.config.session ){\n          if( SessionEntityFieldUpdate( this.core, event, this.config.sessionPath ) ){\n            if( !event.channel ){\n              event.channel = true;\n              this.core.channel.emit( event );\n            }\n            this.core.repo.clearCache( 'table', 'data' );\n          }else{\n            this.log.error( `SessionEntityFieldUpdate:${event.config.name}`, `Session failed` );\n          }\n\n        }\n        ServiceInjector.get( PopEntityEventService ).sendEvent( event );\n      }\n\n      if( typeof patch.callback === 'function' ){ // allows developer to attach a callback when this field is updated\n        patch.callback( this.core, event );\n\n        this._onPatchSuccessAdditional();\n      }\n      this.dom.setTimeout( 'patch-success', () => {\n        patch.success = false;\n      }, ( this.config.patch.duration || 0 ) );\n      return resolve( true );\n    } );\n  }\n\n\n  protected _onPatchSuccessAdditional(): boolean{\n    return true;\n  }\n\n\n  /**\n   * Handle an http failure\n   * @param err\n   */\n  protected _onPatchFail( err: HttpErrorResponse ): Promise<boolean>{\n    return new Promise( ( resolve ) => {\n      this.log.info( `onPatchFail` );\n      const patch = <FieldItemPatchInterface>this.config.patch;\n      const control = <FormControl>this.config.control;\n      patch.running = false;\n      control.markAsDirty();\n      control.setValue( this.asset.storedValue );\n      control.setErrors( { server: true } );\n      this.config.message = GetHttpErrorMsg(err);\n      this.onBubbleEvent( `patch`, this.config.message, {\n        success: false,\n        response: err\n      }, true );\n\n      this._onPatchFailAdditional();\n\n      return resolve( true );\n    } );\n  }\n\n\n  protected _onPatchFailAdditional(): boolean{\n    return true;\n  }\n\n\n  /**\n   * Set up the body of the api patch\n   * @param value\n   * @private\n   */\n  protected _getPatchBody( value?: number | string | boolean | null | Object ): Entity{\n    let body = <Entity>{};\n    const patch = <FieldItemPatchInterface>this.config.patch;\n\n    value = typeof value !== 'undefined' ? value : this.config.control.value;\n\n    if( IsObject( value ) ){\n      const val = <{}>value;\n      body = <Entity>{ ...body, ...val };\n    }else if( IsArray( value ) ){\n      body[ this.config.patch.field ] = value;\n    }else{\n      body[ this.config.patch.field ] = value;\n      if( this.config.empty && !body[ this.config.patch.field ] ){\n        body[ this.config.patch.field ] = PopTransform( String( value ), this.config.empty );\n      }\n    }\n    if( this.config.patch.json ) body[ this.config.patch.field ] = JSON.stringify( body[ this.config.patch.field ] );\n\n    if( patch && patch.metadata ){\n      for( const i in patch.metadata ){\n        if( !patch.metadata.hasOwnProperty( i ) ) continue;\n        body[ i ] = patch.metadata[ i ];\n      }\n    }\n    return body;\n  }\n\n\n  /**\n   * Helper to set error message\n   * @param message\n   */\n  protected _setMessage( message: string ): void{\n    this.config.message = message;\n  }\n\n\n  /**\n   * Helper to clear error message\n   */\n  protected _clearMessage(): void{\n    this.config.message = '';\n  }\n\n\n  protected _checkPrevent(){\n    if( IsArray( this.config.prevent, true ) ){\n      const control = <FormControl>this.config.control;\n      const value = control.value;\n      const conflicts = this.config.prevent.filter( ( str ) => str.toLowerCase() === String( value ).toLowerCase() );\n      if( conflicts.length ){\n        control.setErrors( { unique: true } );\n        this._setMessage( ValidationErrorMessages( control.errors ) );\n        return false;\n      }else{\n        this._clearMessage();\n        return true;\n      }\n    }\n    return true;\n  }\n\n}\n","import { animate, group, state, style, transition, trigger } from '@angular/animations';\n\nexport const slideInOut = trigger('slideInOut', [\n  state('in', style({ height: '*', opacity: 0 })),\n  transition(':leave', [\n    style({ height: '*', opacity: 1 }),\n\n    group([\n      animate(300, style({ height: 0 })),\n      animate('200ms ease-in-out', style({ 'opacity': '0' }))\n    ])\n\n  ]),\n  transition(':enter', [\n    style({ height: '0', opacity: 0 }),\n\n    group([\n      animate(300, style({ height: '*' })),\n      animate('400ms ease-in-out', style({ 'opacity': '1' }))\n    ])\n\n  ])\n]);\n\n\nexport const fadeInOut = trigger('fadeInOut', [\n\n  // the \"in\" style determines the \"resting\" state of the element when it is visible.\n  state('in', style({ opacity: 1 })),\n\n  // fade in when created. this could also be written as transition('void => *')\n  transition(':enter', [\n    style({ opacity: 0 }),\n    animate(600)\n  ]),\n\n  // fade out when destroyed. this could also be written as transition('void => *')\n  transition(':leave',\n    animate(600, style({ opacity: 0 })))\n]);\n","import { Component, Input, OnInit, ChangeDetectorRef, OnDestroy, ElementRef, ViewChild } from '@angular/core';\nimport { InputConfig } from './input-config.model';\nimport { PatternValidation, ValidationErrorMessages } from '../../../../services/pop-validators';\nimport { PopFieldItemComponent } from '../pop-field-item.component';\nimport { slideInOut } from '../../../../pop-common-animations.model';\nimport { IsArray, IsCallableFunction } from '../../../../pop-common-utility';\n\n\n@Component( {\n  selector: 'lib-pop-input',\n  templateUrl: './pop-input.component.html',\n  styleUrls: [ './pop-input.component.scss' ],\n  animations: [\n    slideInOut\n  ]\n} )\nexport class PopInputComponent extends PopFieldItemComponent implements OnInit, OnDestroy {\n  @Input() config: InputConfig = new InputConfig();\n  @ViewChild('inputField', {static: true}) inputField:any;\n  public name = 'PopInputComponent';\n\n\n  constructor(\n    public el: ElementRef,\n    // protected cdr: ChangeDetectorRef,\n  ){\n    super();\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n        if(this.config.autofocus) {\n         this.inputField.nativeElement.focus();\n        } else if (this.config.autoselect) {\n          this.inputField.nativeElement.focus();\n           this.inputField.nativeElement.select();\n        } \n       \n        this.config.triggerOnChange = ( value: string | number | null, forcePatch = false ) => {\n          this.dom.setTimeout( `config-trigger-change`, () => {\n            // this.cdr.detectChanges();\n            this.onChange( value, forcePatch );\n          }, 0 );\n\n        };\n\n        this.config.triggerDirectPatch = ( value: string | number | null ) => {\n          this.dom.setTimeout( `config-trigger-patch`, () => {\n            this._onPatch( value, true );\n          }, 0 );\n        };\n\n        this.config.clearMessage = () => {\n\n          this.dom.setTimeout( `config-clear-message`, () => {\n            this.config.message = '';\n            this.config.control.markAsPristine();\n            this.config.control.markAsUntouched();\n            // this.cdr.detectChanges();\n          }, 0 );\n        };\n\n        this.config.setType = ( type: 'text' | 'password' ) => {\n          this.dom.setTimeout( `config-set-type`, () => {\n            this.config.type = type;\n            // this.cdr.detectChanges();\n          }, 0 );\n        };\n\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  onKeyUp( event ): void{\n    if( event.code === 'Enter' ){\n      if( this.config.control.invalid ){\n        if( this.config.displayErrors ) this._setMessage( ValidationErrorMessages( this.config.control.errors ) );\n      }else{\n        this._clearMessage();\n        if( this.config.patch && ( this.config.patch.path || this.config.facade ) ){\n          if( this.config.control.value !== this.asset.storedValue ){\n            if( this._isFieldPatchable() ){\n              this.onChange();\n            }\n          }\n        }\n        if( this.config.tabOnEnter ){\n          this.dom.focusNextInput( this.el );\n\n        }else{\n          this.onBubbleEvent( 'onEnter' );\n        }\n\n        if( IsCallableFunction( this.config.onEnter ) ){\n          this.dom.setTimeout( `on-enter`, async() => {\n            await this.config.onEnter( this.core, event );\n          }, 250 );\n        }\n      }\n    }else if( !this.config.mask && this.config.pattern && this.config.pattern.length ){\n      const val = PatternValidation( this.config.pattern, 'value', this.config.control.value );\n      if( val !== this.config.control.value ) this.config.control.setValue( val );\n      if( this.config.control.touched && this._isChangeValid() ){\n        this._clearMessage();\n      }else if( IsArray( this.config.prevent, true ) ){\n        this._isChangeValid();\n      }\n\n      this.onBubbleEvent( 'onKeyUp' );\n    }else{\n      if( this.config.control.touched && this._isChangeValid() ){\n        this._clearMessage();\n      }else if( IsArray( this.config.prevent, true ) ){\n        this._isChangeValid();\n      }\n      this.onBubbleEvent( 'onKeyUp' );\n    }\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n}\n","import {Component, ElementRef, Input, OnDestroy, OnInit} from '@angular/core';\nimport {SelectConfig} from './select-config.model';\nimport {PopFieldItemComponent} from '../pop-field-item.component';\nimport {InputConfig} from '../pop-input/input-config.model';\nimport {IsCallableFunction, IsObject, IsObjectThrowError} from '../../../../pop-common-utility';\n\n\n@Component({\n  selector: 'lib-pop-select',\n  templateUrl: './pop-select.component.html',\n  styleUrls: ['./pop-select.component.scss']\n})\nexport class PopSelectComponent extends PopFieldItemComponent implements OnInit, OnDestroy {\n  @Input() config: SelectConfig = new SelectConfig();\n  name = 'PopSelectComponent';\n\n  optionsTopPos = '-5px';\n\n  ui = {selected: {config: undefined}};\n\n\n  constructor(\n    public el: ElementRef,\n  ) {\n    super();\n\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise(async (resolve) => {\n\n        await Promise.all([\n          this._setInitialConfig(),\n          this._setConfigHooks(),\n          this._initialFauxControl()\n        ]);\n\n        resolve(true);\n      });\n    };\n\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        this.dom.setTimeout('check-existing-value', () => {\n          if (!this.config.control.value && this.config.autoFill && this.config.required) {\n            if (this.config.options.values.length === 1) {\n              if (IsCallableFunction(this.config.triggerOnChange)) {\n                const existingValue = this.config.options.values[0].value;\n                this.config.triggerOnChange(existingValue);\n              }\n            }\n          }\n        }, 0);\n        resolve(true);\n      });\n    };\n\n  }\n\n\n  ngOnInit() {\n    super.ngOnInit();\n  }\n\n\n  /**\n   * SelectsOption\n   * @param optionValue: option value selected\n   */\n\n  onOptionSelected(optionValue: string | number): void {\n    this.config.control.setValue(optionValue);\n    this.dom.state.displayItems = false;\n    this.ui.selected.config.label = this.config.label;\n    this.onBlur();\n  }\n\n\n  /**\n   *  Select Box clicked\n   *  @returns void\n   */\n  onSelectionClick($event): void {\n    if (!this.config.readonly && this.config.control.status !== 'DISABLED') {\n\n      // determine display direction and top offset\n      const thirdHeight = window.innerHeight / 3;\n\n      if ($event.clientY < (thirdHeight * 2)) {\n        this.dom.state.displayBottom = true;\n        this.optionsTopPos = '-5px';\n        this.ui.selected.config.selectModeOptionsDirection = 'down';\n      } else {\n        this.dom.state.displayBottom = false;\n        let offset = (44 + (this.config.options.values.length * 48));\n\n        offset = offset > 284 ? 284 : offset;\n\n        this.optionsTopPos = `-${offset}px`;\n        this.ui.selected.config.label = ' ';\n        this.ui.selected.config.selectModeOptionsDirection = 'up';\n      }\n\n      if (this.dom.state.displayItems) {\n        this.dom.state.displayItems = false;\n        this.ui.selected.config.label = this.config.label;\n        this.onBlur();\n      } else {\n        this.dom.state.displayItems = true;\n        this.onFocus();\n      }\n    }\n  }\n\n\n  /**\n   * Closes the dropdown if it is active.\n   * This method is called from the ClickOutside directive.\n   * If the user clicks outside of the component, it will close\n   * @returns void\n   */\n  public onOutsideCLick(): void {\n    this.dom.state.displayItems = false;\n    this.ui.selected.config.label = this.config.label;\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy() {\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  /**\n   * Set the initial config for this component\n   * @private\n   */\n  private _setInitialConfig(): Promise<boolean> {\n    return new Promise<boolean>((resolve) => {\n      this.dom.state.displayItems = false;\n      this.dom.state.displayBottom = true;\n      this.config = IsObjectThrowError(this.config, true, `Config required`) ? this.config : null;\n      this.id = this.config.name;\n      return resolve(true);\n    });\n  }\n\n  /**\n   * Set the config hooks for this component\n   * @private\n   */\n  private _setConfigHooks(): Promise<boolean> {\n    return new Promise<boolean>((resolve) => {\n      this.config.triggerOnChange = (value: string | number | null) => {\n\n        this.dom.setTimeout(`config-trigger-change`, () => {\n          // this.cdr.detectChanges();\n          this._setStrVal(value);\n          this.onChange(value, true);\n        }, 0);\n      };\n\n      this.config.clearMessage = () => {\n        this.dom.setTimeout(`config-clear-message`, () => {\n          this.config.message = '';\n          this.config.control.markAsPristine();\n          this.config.control.markAsUntouched();\n          // this.cdr.detectChanges();\n        }, 0);\n      };\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * Initialize Faux control ( used to display string value of select ). Subscribes to actual control value changes to update value.\n   */\n\n  private _initialFauxControl(): Promise<boolean> {\n    return new Promise<boolean>((resolve) => {\n      this.ui.selected.config = new InputConfig({\n        value: '',\n        disabled: this.config.disabled ? this.config.disabled : null,\n        helpText: this.config.helpText,\n        displayErrors: false,\n        label: this.config.label,\n        readonly: true,\n        selectMode: true,\n        minimal: this.config.minimal,\n        maxlength: 65000\n      });\n\n      this._setStrVal((<any>this.config.value));\n\n\n      this.dom.setSubscriber(`value-changes`, this.config.control.valueChanges.subscribe((value) => {\n        this._setStrVal((<any>value));\n      }));\n\n      this.dom.setSubscriber(`status-changes`, this.config.control.statusChanges.subscribe((status) => {\n        this.ui.selected.config.control.status = status;\n      }));\n\n      return resolve(true);\n    });\n  }\n\n\n  private _setStrVal(value: number | string): void {\n    if (value || value == '') { // code change by chetu developer on 16-05-2021\n      const selected = this.config.options.values.find((o) => o.value === value);\n      if (IsObject(selected, ['name'])) {\n        this.ui.selected.config.control.setValue(selected.name);\n      } else {\n        this.ui.selected.config.control.setValue('');\n      }\n    } else {\n      this.ui.selected.config.control.setValue(null);\n    }\n  }\n}\n","import { ChangeDetectorRef, Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { SelectMultiConfig } from './select-mulit-config.model';\nimport { PopFieldItemComponent } from '../pop-field-item.component';\n\n\n@Component( {\n  selector: 'lib-pop-select-multi',\n  templateUrl: './pop-select-multi.component.html',\n  styleUrls: [ './pop-select-multi.component.scss' ]\n} )\n\nexport class PopSelectMultiComponent extends PopFieldItemComponent implements OnInit, OnDestroy {\n  @Input() config: SelectMultiConfig;\n  public name = 'PopSelectMultiComponent';\n\n\n  constructor(\n    public el: ElementRef,\n  ){\n    super();\n\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n\n        this.config.triggerOnChange = ( value: string | number | null ) => {\n          // this.cdr.detectChanges();\n          this.dom.setTimeout( `config-trigger-change`, () => {\n            this.onChange( value, true );\n          }, 0 );\n        };\n\n        this.config.clearMessage = () => {\n          this.dom.setTimeout( `config-clear-message`, () => {\n            this.config.message = '';\n            this.config.message = '';\n            this.config.control.markAsPristine();\n            this.config.control.markAsUntouched();\n            // this.cdr.detectChanges();\n          }, 0 );\n        };\n\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * On Blur Event\n   */\n  onBlur(){\n    this.onBubbleEvent( 'onBlur' );\n  }\n\n\n  onClose( open: boolean ){\n    if( !open ){\n      this.onChange();\n    }\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n}\n","import {\n  AfterViewInit, ChangeDetectorRef,\n  Component,\n  ElementRef,\n  Input, OnDestroy,\n  OnInit,\n  Renderer2,\n} from '@angular/core';\nimport { CheckboxConfig } from './checkbox-config.model';\nimport { PopFieldItemComponent } from '../pop-field-item.component';\nimport { FormControl } from '@angular/forms';\nimport { FieldItemPatchInterface } from '../../../../pop-common.model';\n\n\n@Component( {\n  selector: 'lib-pop-checkbox',\n  templateUrl: './pop-checkbox.component.html',\n  styleUrls: [ './pop-checkbox.component.scss' ],\n} )\nexport class PopCheckboxComponent extends PopFieldItemComponent implements OnInit, AfterViewInit, OnDestroy {\n  @Input() config: CheckboxConfig;\n  public name = 'PopCheckboxComponent';\n\n\n  constructor(\n    public el: ElementRef,\n    private renderer: Renderer2,\n    protected cdr: ChangeDetectorRef\n  ){\n    super();\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n        this.dom.state.indeterminate = false;\n        this.asset.storedValue = +this.config.control.value === 1 ? true : false;\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * This will position the feedback container in the right spot\n   */\n  ngAfterViewInit(){\n    this.asset.checkBoxBackground = this.el.nativeElement.querySelector( '.mat-checkbox-background' );\n    this.asset.checkBoxFrame = this.el.nativeElement.querySelector( '.mat-checkbox-frame' );\n\n    this.cdr.detectChanges();\n  }\n\n\n  onEnter( event ){\n    if( this.config.tabOnEnter ){\n      this.dom.focusNextInput( this.el );\n    }\n  }\n\n\n  _beforePatch(): Promise<boolean>{\n    return new Promise( ( resolve ) => {\n      const patch = <FieldItemPatchInterface>this.config.patch;\n      const control = <FormControl>this.config.control;\n\n      control.disable();\n      patch.running = true;\n      this._onHideCheckbox();\n\n      this._clearMessage();\n\n      return resolve( true );\n    } );\n  }\n\n\n  _afterPatch(): Promise<boolean>{\n    return new Promise( ( resolve ) => {\n      const patch = <FieldItemPatchInterface>this.config.patch;\n      const control = <FormControl>this.config.control;\n\n      control.enable();\n      control.markAsPristine();\n      patch.running = false;\n\n      return resolve( true );\n    } );\n  }\n\n\n  protected _onPatchSuccessAdditional(): boolean{\n    this._displayCheckbox();\n    return true;\n  }\n\n\n  protected _onPatchFailAdditional(): boolean{\n    this._displayCheckbox();\n    return true;\n  }\n\n\n  /**\n   * This will trigger when the user click the checkbox to subject its value\n   * This updates the config value since that is auto-handled with this input type\n   */\n  onToggleValue(){\n    const value = !this.asset.storedValue;\n    this.config.control.setValue( value, { emitEvent: true } );\n    this.onChange( value );\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  /**\n   * This will make the checkbox hidden in the view\n   */\n  private _onHideCheckbox(){\n    this.renderer.setStyle( this.asset.checkBoxFrame, 'border-color', '' );\n    this.renderer.setStyle( this.asset.checkBoxBackground, 'background-color', '' );\n    this.renderer.setStyle( this.asset.checkBoxBackground, 'border', '' );\n    this.renderer.setStyle( this.asset.checkBoxBackground, 'display', 'none' );\n  }\n\n\n  /**\n   * This will make the checkbox visible in the view\n   */\n  private _displayCheckbox(){\n    this.renderer.setStyle( this.asset.checkBoxBackground, 'display', 'block' );\n  }\n\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit, Renderer2 } from '@angular/core';\nimport { MatRadioChange } from '@angular/material/radio';\nimport { RadioConfig } from './radio-config.model';\nimport { PopFieldItemComponent } from '../pop-field-item.component';\n\n\n@Component({\n  selector: 'lib-pop-radio',\n  templateUrl: './pop-radio.component.html',\n  styleUrls: [ './pop-radio.component.scss' ],\n})\nexport class PopRadioComponent extends PopFieldItemComponent implements OnInit, OnDestroy {\n  @Input() config: RadioConfig;\n  public name = 'PopRadioComponent';\n\n\n  constructor(\n    public el: ElementRef,\n  ){\n    super();\n\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        this.asset.storedValue = this.config.control.value;\n        this.asset.spinnerRef = this.el.nativeElement.querySelector('.radio-ajax-spinner'); // would use a @viewChild but it returns a component model instead of an element.. weird\n\n        this.config.triggerOnChange = ( value: string | number | null ) => {\n          this.dom.setTimeout( `config-trigger-change`, () => {\n            this.onChange( value, true );\n          }, 0 );\n        };\n\n        this.config.clearMessage = () => {\n          this.dom.setTimeout( `config-clear-message`, () => {\n            this.config.message = '';\n            this.config.control.markAsPristine();\n            this.config.control.markAsUntouched();\n            // this.cdr.detectChanges();\n          }, 0 );\n        };\n\n        resolve(true);\n      });\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n  \n\n  onSelection(change: MatRadioChange){\n    this.asset.change = change;\n    this.onChange();\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n}\n","import { Component, ElementRef, EventEmitter, Input, OnDestroy, OnInit, Output, ViewChild } from '@angular/core';\nimport { MatSlideToggle } from '@angular/material/slide-toggle';\nimport { SwitchConfig } from './switch-config.model';\nimport { FieldItemPatchInterface, PopBaseEventInterface } from '../../../../pop-common.model';\nimport { PopFieldItemComponent } from '../pop-field-item.component';\nimport { FormControl } from '@angular/forms';\n\n\n@Component( {\n  selector: 'lib-pop-switch',\n  templateUrl: './pop-switch.component.html',\n  styleUrls: [ './pop-switch.component.scss' ],\n} )\nexport class PopSwitchComponent extends PopFieldItemComponent implements OnInit, OnDestroy {\n  @ViewChild( 'switch', { static: true } ) private switchRef: MatSlideToggle;\n  @ViewChild( 'feedback', { static: true } ) private feedbackRef: ElementRef;\n  @Input() config: SwitchConfig;\n  @Output() events: EventEmitter<PopBaseEventInterface> = new EventEmitter<PopBaseEventInterface>();\n  public name = 'PopSwitchComponent';\n\n\n  constructor(\n    public el: ElementRef,\n  ){\n    super();\n\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n\n        this.switchRef.checked = !!this.config.control.value;\n        this.config.switchRef = this.switchRef;\n        this.asset.storedValue = this.config.control.value;\n        this.config.triggerOnChange = ( value: boolean ) => {\n          this.dom.setTimeout( `trigger-change`, () => {\n            this.onSelection( { checked: value } );\n          }, 0 );\n        };\n\n        this.config.setValue = ( value: boolean ) => {\n          this.dom.setTimeout( `set-value`, () => {\n            this.asset.change = value;\n            this.config.control.setValue( value, { emitEvent: false } );\n            this.config.control.updateValueAndValidity();\n            this.config.control.markAsPristine();\n            this.switchRef.checked = value;\n          }, 0 );\n        };\n\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  onEnter( event ){\n    if( this.config.tabOnEnter ){\n      this.dom.focusNextInput( this.el );\n    }\n  }\n\n\n  onSelection( change: { checked: boolean } ){\n    this.asset.change = change;\n    this.onChange( change.checked );\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                    Base Class Overrides                                      *\n   *                                    ( Protected Method )                                      *\n   *               These are protected instead of private so that they can be overridden          *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  protected _beforePatch(): Promise<boolean>{\n    return new Promise( ( resolve ) => {\n      const patch = <FieldItemPatchInterface>this.config.patch;\n      const control = <FormControl>this.config.control;\n\n      control.disable();\n      patch.running = true;\n\n      return resolve( true );\n    } );\n  }\n\n\n  /**\n   * Called after a successful patch\n   */\n  protected _afterPatch(): Promise<boolean>{\n    return new Promise( ( resolve ) => {\n      const patch = <FieldItemPatchInterface>this.config.patch;\n      const control = <FormControl>this.config.control;\n\n      control.enable();\n      patch.running = false;\n\n      this.switchRef.checked = this.asset.storedValue;\n\n      return resolve( true );\n    } );\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n}\n","import {\n  Component,\n  ElementRef,\n  Input,\n  OnDestroy,\n  OnInit,\n  Renderer2,\n  ViewChild\n} from '@angular/core';\n\nimport { TextareaConfig } from './textarea-config.model';\nimport { PopFieldItemComponent } from '../pop-field-item.component';\nimport { Sleep } from '../../../../pop-common-utility';\n\n\n@Component({\n  selector: 'lib-pop-textarea',\n  templateUrl: './pop-textarea.component.html',\n  styleUrls: [ './pop-textarea.component.scss' ]\n})\nexport class PopTextareaComponent extends PopFieldItemComponent implements OnInit, OnDestroy {\n  @ViewChild('textArea', { static: true }) private textAreaRef: ElementRef;\n  @Input() config: TextareaConfig;\n  public name = 'PopTextareaComponent';\n\n\n  constructor(\n    public el: ElementRef,\n    private renderer: Renderer2,\n  ){\n    super();\n\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        if( this.config.autoSize ){\n          this.dom.setSubscriber('auto-size', this.config.control.valueChanges.subscribe(() => {\n            this.onAutoSize();\n          }));\n        } else{\n          if(+this.config.height){\n            this.renderer.setStyle(this.textAreaRef.nativeElement, 'height', this.config.height + 'px');\n          }\n        }\n        resolve(true);\n      });\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise(async(resolve) => {\n        if( this.config.autoSize && this.config.control.value){\n          await Sleep(5);\n          this.onAutoSize();\n        }\n        resolve(true);\n      });\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * Trigger on key up event\n   */\n  onKeyUp(): void{\n    this.onBubbleEvent(`onKeyUp`);\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  protected onAutoSize(){\n    this.dom.setTimeout('size-delay', () => {\n      this.renderer.setStyle(this.textAreaRef.nativeElement, 'height', '0');\n      let height = this.textAreaRef.nativeElement.scrollHeight;\n      if(+this.config.height && height < this.config.height) height = this.config.height;\n      if(+this.config.maxHeight && height > this.config.maxHeight) height = this.config.maxHeight;\n      this.renderer.setStyle(this.textAreaRef.nativeElement, 'height', height +'px');\n    }, 250);\n  }\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { LabelConfig } from './label-config.model';\nimport { TruncatePipe } from '../../../../pipes/truncate.pipe';\nimport { ButtonConfig } from '../pop-button/button-config.model';\nimport { Router } from '@angular/router';\nimport { PopFieldItemComponent } from '../pop-field-item.component';\nimport { GetVerbStateTheme, IsObjectThrowError, StringReplaceAll } from '../../../../pop-common-utility';\nimport { PopHref, ServiceInjector } from '../../../../pop-common.model';\n\n\n@Component({\n  selector: 'lib-pop-label',\n  templateUrl: './pop-label.component.html',\n  styleUrls: [ './pop-label.component.scss' ],\n})\nexport class PopLabelComponent extends PopFieldItemComponent implements OnInit, OnDestroy {\n  @Input() config: LabelConfig;\n  public name = 'PopLabelComponent';\n\n\n  constructor(\n    public el: ElementRef,\n  ){\n    super();\n\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        this.config = IsObjectThrowError(this.config, true, `${this.name}:configure: - this.config`) ? this.config : null;\n\n        this.ui.copyLabel = <ButtonConfig>undefined;\n        this.ui.copyValue = <ButtonConfig>undefined;\n        this.ui.valueButton = <ButtonConfig>undefined;\n        this.dom.state.valueButton_theme = 'default';\n\n        if( this.config.truncate ){\n          const truncatePipe = new TruncatePipe();\n          this.config.value = truncatePipe.transform(this.config.value, [ this.config.truncate ]);\n        }\n        if( this.config.copyLabel ) this.ui.copyLabel = new ButtonConfig({\n          // disabled: !this.config.copyLabelBody ? true : false,\n          disabled: false,\n          icon: this.config.copyLabelBody ? 'file_copy' : null,\n          value: this.config.copyLabelDisplay,\n          size: 25,\n          width: 100,\n          radius: 5,\n          text: 12,\n        });\n        if( this.config.copyValue ) this.ui.copyValue = new ButtonConfig({\n          // disabled: !this.config.copyValueBody ? true : false,\n          disabled: false,\n          icon: this.config.copyValueBody ? 'file_copy' : null,\n          value: this.config.copyValueDisplay,\n          size: 25,\n          radius: 5,\n          text: 12,\n        });\n\n        if( this.config.valueButton ) this.ui.valueButton = new ButtonConfig({\n          disabled: this.config.valueButtonDisabled ? true : false,\n          icon: this.config.icon,\n          value: this.config.valueButtonDisplay,\n          size: 25,\n          radius: 5,\n          text: 12,\n          bubble: true,\n          event: 'click'\n        });\n        this._setValueButtonTheme();\n\n        resolve(true);\n      });\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * The user can click on a link to route to another part of the app\n   */\n  onRouteLink(){\n    if( this.config.route ){\n      const routeApp = String(this.config.route).split('/');\n      if( routeApp[ 1 ] && routeApp[ 1 ] === PopHref ){\n        return ServiceInjector.get(Router).navigate([ routeApp.slice(2).join('/') ]).catch((e) => {\n          console.log(e);\n          return false;\n        });\n      }\n    }\n    return this.onBubbleEvent('link');\n  }\n\n\n  /**\n   * The user can click on a label button to copy a value into the clipboard\n   */\n  onLabelCopy(){\n    const nav = <any>navigator;\n    const strip = [ 'ID ' ];\n    let body = String(this.config.copyLabelBody).slice();\n    strip.map((tag) => {\n      if( body.includes(tag) ) body = StringReplaceAll(body, tag, '');\n    });\n    nav.clipboard.writeText(body);\n  }\n\n\n  /**\n   * The user can click on a button value and copy a value to the clipboard\n   */\n  onValueCopy(){\n    const nav = <any>navigator;\n    const strip = [ 'ID ' ];\n    let body = String(this.config.copyValueBody).slice();\n    strip.map((tag) => {\n      if( body.includes(tag) ) body = StringReplaceAll(body, tag, '');\n    });\n    nav.clipboard.writeText(body);\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  /**\n   * This fx basically checks the label value to sees if it can be associated with a color scheme aka warning, success, error\n   */\n  protected _setValueButtonTheme(){\n    if( this.config.valueButton ){\n      if( this.config.valueButtonDisplay ){\n        this.dom.state.valueButton_theme = GetVerbStateTheme(this.config.valueButtonDisplay);\n      }\n    }\n  }\n\n}\n","import { Component, OnInit, Input, Output, EventEmitter, ViewChild, ElementRef, ChangeDetectorRef, OnDestroy, HostListener } from '@angular/core';\nimport { SelectFilterConfig, SelectFilterGroupInterface } from './select-filter-config.model';\nimport { MatSelectionList, MatListOption } from '@angular/material/list';\nimport { Observable } from 'rxjs';\nimport { InputConfig } from '../pop-input/input-config.model';\nimport { SelectionModel } from '@angular/cdk/collections';\nimport { debounceTime } from 'rxjs/operators';\nimport { ValidationErrorMessages } from '../../../../services/pop-validators';\nimport { FieldItemOption } from '../../../../pop-common.model';\nimport { PopFieldItemComponent } from '../pop-field-item.component';\nimport { IsObject, IsObjectThrowError, JsonCopy, ObjectContainsTagSearch } from '../../../../pop-common-utility';\n\n\n@Component( {\n  selector: 'lib-pop-select-filter',\n  templateUrl: './pop-select-filter.component.html',\n  styleUrls: [ './pop-select-filter.component.scss' ]\n} )\nexport class PopSelectFilterComponent extends PopFieldItemComponent implements OnInit, OnDestroy {\n  @Input() config: SelectFilterConfig; // configuration for component\n  @ViewChild( 'list', { static: true } ) listRef: ElementRef; // Getting a reference to the selection list in the view so that I can know which options are selected\n  @ViewChild( 'selectionList', { static: true } ) selectionListRef: MatSelectionList; // Getting a reference to the selection list in the view so that I can know which options are selected\n  @ViewChild( 'search' ) searchRef: ElementRef;\n  name = 'PopSelectFilterComponent';\n\n\n\n  protected asset = {\n    filteredOptions: <Observable<FieldItemOption[]>>undefined,\n    groups: [],\n    onFocusValue: undefined\n  };\n\n  public ui = {\n    selected: {\n      config: undefined,\n      count: 0\n    },\n    search: {\n      config: undefined,\n      count: 0\n    }\n  };\n\n  @HostListener('document:keydown.escape', ['$event']) onEscapeHandler(event: KeyboardEvent) {\n    if(this.dom.state.filterActivated){\n      console.log('esc',event);\n      this._closeOptionList();\n    }\n  }\n\n\n\n  constructor(\n    public el: ElementRef,\n    protected cdr: ChangeDetectorRef\n  ){\n    super();\n\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n\n        this.config = IsObjectThrowError( this.config, true, `${this.name}:configure: - this.config` ) ? this.config : null;\n        this._setInitialDomState();\n        this._filterOptionsList( '' );\n        this._setUpFilterObservable();\n\n        return resolve( true );\n      } );\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n\n\n        return resolve( true );\n      } );\n    };\n\n\n\n  }\n\n\n\n  ngOnInit(): void{\n    super.ngOnInit();\n  }\n\n\n  /**\n   * Set the inital dom state of the component\n   * @private\n   */\n  private _setInitialDomState(){\n    this.dom.state.filter = <boolean> undefined;\n    this.dom.state.filterActivated = false;\n    this.dom.state.above = <number> undefined;\n    this.dom.state.below = <number> undefined;\n    this.dom.state.list = <any> undefined;\n    this.dom.state.position = <'below' | 'above'>'below';\n    this.dom.state.active = undefined;\n    this.dom.state.checkboxPosition = this.config.checkboxPosition === 'before' ? 'before' : 'after';\n\n    if( !this.config.multiple ){\n      this.selectionListRef.selectedOptions = new SelectionModel<MatListOption>( false );\n    }\n\n    this.ui.selected.config = new InputConfig( {\n      value: this.config.strVal,\n      helpText: this.config.helpText,\n      displayErrors: false,\n      label: this.config.label,\n      readonly: true,\n      selectMode: true,\n      maxlength: 65000\n    } );\n\n    this.ui.search.config = new InputConfig( {\n      value: this.config.strVal,\n      helpText: this.config.helpText,\n      displayErrors: false,\n      label: this.config.label,\n      readonly: true,\n      maxlength: 255\n    } );\n\n    if( !this.config.multiple && +this.config.value ){\n      const activeOption = IsObject(this.config.options, ['values']) ?  this.config.options.values.find( ( option ) => +option.value === +this.config.value ) : null;\n      if( IsObject( activeOption, [ 'value', 'name' ] ) ){\n        this.config.selectedOptions = [ +activeOption.value ];\n        this.asset.onFocusValue = JSON.stringify( this.config.selectedOptions );\n        this.dom.active.optionId = +activeOption.value;\n        this.ui.selected.config.control.setValue( activeOption.name, { emitEvent: false } );\n      }\n    }else{\n      this.asset.onFocusValue = JSON.stringify( this.config.selectedOptions );\n      this._updateSelectedOptions();\n    }\n    delete this.config.options;\n  }\n\n\n  /**************************************\n   * Public methods invoked by the view\n   * ************************************/\n\n  /**\n   * Turn the dropdown on or off. If it is turned off,\n   * it will emit the close event\n   * @returns void\n   */\n  public onToggleFilter( event, list: { clientHeight: number } ): boolean{\n    if( this.config.patch.running ) return false;\n    this.dom.state.filterActivated = !this.dom.state.filterActivated;\n    if(this.dom.state.filterActivated){\n      if(this.config.float){\n        if(this.config.offsetSession) {\n          this.config.offset = this.config.offsetSession;\n        } else if(this.config.height){\n          this.config.offset = this.config.height;\n        }\n      } else{\n        this.config.offset = null;\n      }\n\n    } else{\n      this.config.offset = null;\n    }\n\n    this.dom.setTimeout('open-close', () => {\n      if( !this.config.position ) this._setOptionListPosition( { above: event.pageY - 280, below: window.innerHeight - event.pageY - 20, height: list.clientHeight } );\n      if( !this.dom.state.filterActivated ){\n        this.onBubbleEvent( 'close' );\n      }else{\n        this.asset.onFocusValue = JSON.stringify( this.config.selectedOptions );\n        this.config.message = '';\n        this.onBubbleEvent( 'open' );\n      }\n      if(this.dom.state.filterActivated){\n        if(this.config.float){\n          const offsetHeight = this.listRef.nativeElement.offsetHeight;\n          if(offsetHeight){\n            this.config.offset = offsetHeight * (-1);\n            if(this.config.offset) this.config.offsetSession = this.config.offset;\n          }\n        }\n      }\n\n    }, 0 );\n    return true;\n  }\n\n\n  /**\n   * The client user can toggle a specific grouping to be open/close\n   * @param group\n   */\n  public onToggleGroup( group: SelectFilterGroupInterface ){\n    if( this.config.groups.length > 1 ){\n      group.open = !group.open;\n    }\n  }\n\n\n  /**\n   * Closes the dropdown if it is active.\n   * This method is called from the ClickOutside directive.\n   * If the user clicks outside of the component, it will close\n   * @param event\n   * @returns void\n   */\n  public onOutsideCLick(): void{\n    this._closeOptionList();\n  }\n\n\n  /**\n   * Checks/Unchecks all of the filtered options within a specific group\n   * @param  FieldOption option\n   * @returns boolean\n   */\n  public onAllChange( checked: boolean ): boolean{\n    if( !this.config.multiple ) return false;\n    this.config.groups.map( ( group ) => {\n      group.options.values.map( ( option: FieldItemOption ) => {\n        option.selected = checked;\n      } );\n      group.all = checked;\n      group.indeterminate = false;\n    } );\n    setTimeout( () => {\n      this._updateSelectedOptions();\n    }, 0 );\n    return false;\n  }\n\n\n  /**\n   * Checks/Unchecks all of the filtered options within a specific group\n   * @param  FieldOption option\n   * @returns boolean\n   */\n  public onGroupChange( checked: boolean, group ): boolean{\n    if( !this.config.multiple ) return false;\n    group.options.values.map( ( option: FieldItemOption ) => {\n      if( !option.hidden ){\n        option.selected = checked;\n      }\n    } );\n    setTimeout( () => {\n      this._checkGroupState( checked, group );\n      this._updateSelectedOptions();\n    }, 0 );\n    return false;\n  }\n\n\n  /**\n   * Update's the list of selected options inside of the config\n   * and emits a change event. This method will be called by the view\n   * whenever an option is selected\n   * @param MatSelectionListChange event\n   * @returns void\n   */\n  public onOptionChange( event, option, group ): void{\n    setTimeout( () => {\n      option.selected = event.target.className.search( 'mat-pseudo-checkbox-checked' ) > -1 ? true : false;\n      this._checkGroupState( option.selected, group );\n      this._updateSelectedOptions();\n    }, 0 );\n  }\n\n\n  public onLink(){\n    console.log( 'LINK STUB: Link to Entity', this.config.control.value );\n  }\n\n\n  /**\n   * Checks if the given option is in the list of selected options\n   * in the config. Used by the view to set the checkbox's on the initial state of the dropdown\n   * @param  FieldOption option\n   * @returns boolean\n   */\n  public isOptionSelected( option: FieldItemOption ): boolean{\n    return option.selected;\n  }\n\n\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  /**\n   * Observes the value changes to the search and triggers the filter of the options\n   * @returns void\n   */\n  private _setUpFilterObservable(): void{\n    this.ui.search.config.control.valueChanges\n      .pipe(\n        debounceTime( 200 )\n      ).subscribe( ( value: string ) => {\n      this._filterOptionsList( value );\n    } );\n  }\n\n\n  /**\n   * Close the option list\n   * @private\n   */\n  private _closeOptionList(){\n    if( this.dom.state.filterActivated ){\n      // this.config.control.setValue( '', { emitEvent: true } );\n      this.dom.state.filterActivated = false;\n      this.cdr.detectChanges();\n      this._checkSelectedValue( this.dom.state.filterActivated );\n      this._filterOptionsList('');\n      this.onBubbleEvent( 'close' );\n      this.config.offset = null;\n    }\n  }\n\n\n  /**\n   * Check the selected value to see if it needs to be stored\n   * @param open\n   * @private\n   */\n  private _checkSelectedValue( open: boolean ){\n    // if( !open ){\n    if( this.ui.selected.config.control.invalid ){\n      if( this.config.displayErrors ) this.config.message = ValidationErrorMessages( this.ui.selected.config.control.errors );\n    }else if( this.config.patch && ( this.config.patch.path || this.config.facade ) ){\n      if( JSON.stringify( this.config.selectedOptions ) !== this.asset.onFocusValue ){\n        this.onChange();\n      }\n    }\n  }\n\n\n\n  /**\n   * Detects if the list of options should appear above or below the select input\n   * @param height\n   */\n  private _setOptionListPosition( params: { above: number, below: number, height: number } ): void{\n    if( params.height > 0 ){\n      this.config.offset = null;\n      this.dom.state.above = params.above;\n      this.dom.state.below = params.below;\n      this.dom.state.list = params.height;\n      // if( this.config.allowAll ) this.dom.state.list += 60;\n      // if( this.config.filter ) this.dom.state.list += 58;\n      this.config.position = this.dom.state.below >= this.dom.state.above ? 'below' : 'above';\n      this.config.height = this.config.defaultHeight;\n      if( this.config.position === 'above' ){\n        if( this.config.height > this.dom.state.above ) this.config.height = this.dom.state.above;\n        this.config.minHeight = this.config.height;\n      }else{\n        if( this.config.height > this.dom.state.below ) this.config.height = this.dom.state.below;\n        // this.config.minHeight = this.config.defaultMinHeight;\n        this.config.minHeight = this.config.height;\n      }\n      this.dom.setTimeout( `search-focus`, () => {\n        if( this.searchRef ){\n          this.searchRef.nativeElement.focus();\n          // this.onBubbleEvent( 'focus' );\n        }\n      }, 200 );\n    }\n  }\n\n\n  /**\n   * Detects whether the check all  box for a group should be unchecked, checked, or indeterminate\n   * @param checked\n   * @param group\n   */\n  private _checkGroupState( checked: boolean, group ): void{\n    let indeterminate = false;\n    let all = true;\n    if( !checked ){\n      all = false;\n      group.options.values.some( ( option ) => {\n        if( !option.hidden && option.selected ){\n          indeterminate = true;\n          return true;\n        }\n      } );\n    }else{\n      group.options.values.some( option => {\n        if( !option.hidden && !option.selected ){\n          all = false;\n          indeterminate = true;\n          return true;\n        }\n      } );\n    }\n    group.all = all;\n    group.indeterminate = indeterminate;\n  }\n\n\n  /**\n   * Finds only the options from the config's options that match\n   * the string passed in, and returns those options.\n   * Used as the filter when setting up the filteredOptions observable\n   * @param string value\n   * @returns FieldItemOption\n   */\n  private _filterOptionsList( search: string ): void{\n    this.config.groups.map( ( group: SelectFilterGroupInterface ) => {\n      group.options.values.map( ( option ) => {\n        option.hidden = ObjectContainsTagSearch( option, search ) ? false : true;\n      } );\n      group.selected = group.options.values.filter( ( option ) => {\n        return !option.hidden && option.selected;\n      } ).length;\n\n      group.visible = group.options.values.filter( ( option ) => {\n        return !option.hidden;\n      } ).length;\n      const checked = group.visible === group.selected;\n      this._checkGroupState( checked, group );\n    } );\n    this.cdr.detectChanges();\n  }\n\n\n  /**\n   * Update's the selection options in config\n   * by looping through all of the currently selected items\n   * in the selectionListRef.\n   * @param number id\n   */\n  private _updateSelectedOptions(){\n    const selected = this.selectionListRef.selectedOptions.selected;\n    let str: string[] = [];\n    if( this.config.multiple ){\n      this.config.selectedOptions = [];\n      for( const option of selected ){\n        str.push( option._text.nativeElement.innerText );\n        this.config.selectedOptions.push( String( option.value ).trim() );\n      }\n      str = str.sort();\n      this.config.strVal = str.join( ', ' );\n      this.ui.selected.config.control.setValue( this.config.strVal, { emitEvent: false } );\n      const value = JsonCopy( this.config.selectedOptions );\n      this.config.control.setValue( value, { emitEvent: false } );\n    }else{\n      let value;\n      for( const option of selected ){\n        str.push( option._text.nativeElement.innerText );\n        value = option.value;\n      }\n      str = str.sort();\n      this.config.strVal = str.join( ', ' );\n      this.ui.selected.config.control.setValue( this.config.strVal, { emitEvent: false } );\n      this.dom.active.optionId = value;\n      this.config.control.setValue( value, { emitEvent: false } );\n      this.config.value = value;\n      this._closeOptionList();\n    }\n  }\n}\n","/**\n * This directive was taken from this github repository\n * https://github.com/christianliebel/angular2-click-outside\n * found on stack over flow post \n * https://stackoverflow.com/questions/35712379/how-can-i-close-a-dropdown-on-click-outside\n * \n * Credit goes to github user christianliebel\n */\n\nimport {Directive, ElementRef, Output, EventEmitter, HostListener} from '@angular/core';\n\n@Directive({\n    selector: '[libClickOutside]'\n})\nexport class ClickOutsideDirective {\n    constructor(private _elementRef: ElementRef) {\n    }\n\n    @Output()\n    public libClickOutside = new EventEmitter<MouseEvent>();\n\n    @HostListener('document:click', ['$event', '$event.target'])\n    public onClick(event: MouseEvent, targetElement: HTMLElement): void {\n        if (!targetElement) {\n            return;\n        }\n\n        const clickedInside = this._elementRef.nativeElement.contains(targetElement);\n        if (!clickedInside) {\n            this.libClickOutside.emit(event);\n        }\n    }\n}\n","import { Component, Inject } from '@angular/core';\nimport { MatCalendar } from '@angular/material/datepicker';\nimport { DateAdapter, MAT_DATE_FORMATS, MatDateFormats } from '@angular/material/core';\n\n@Component({\n  selector: 'lib-custom-header',\n  templateUrl: 'expansion-items.component.html',\n  styleUrls: ['expansion-items.component.scss']\n})\nexport class ExpansionItemsComponent<D>{\n\n  constructor(\n    private calendar: MatCalendar<D>,\n    private dateAdapter: DateAdapter<D>,\n    @Inject(MAT_DATE_FORMATS) private dateFormat: MatDateFormats,\n  ){\n  }\n\n\n  /**\n   * Toggle Calendar between Month and Multiple Year\n   */\n\n  toggleCalView(){\n    this.calendar.currentView = this.calendar.currentView === 'month' ? 'multi-year' : 'month';\n  }\n\n  /**\n   * Get the date month and year label. Example: May 2021.\n   */\n\n  get periodLabel(): string {\n    return this.dateAdapter.format(this.calendar.activeDate, this.dateFormat.display.monthYearLabel);\n  }\n\n\n  /**\n   * Change the month or year by -1\n   * @param mode month or year\n   */\n\n  previousClicked(mode: 'month' | 'year'): void{\n    this.changeDate(mode, -1);\n  }\n\n\n  /**\n   * Change the month or year 1\n   * @param mode\n   */\n\n  nextClicked(mode: 'month' | 'year'): void {\n    this.changeDate(mode, 1);\n  }\n\n\n  /**\n   * Change the month or year by -1 or 1\n   * @param mode : year or month\n   * @param amount -1 or 1\n   * @private\n   */\n\n  private changeDate(mode: 'month' | 'year', amount: -1 | 1): void {\n    this.calendar.activeDate = mode === 'month' ?  this.dateAdapter.addCalendarMonths(this.calendar.activeDate, amount)\n      : this.dateAdapter.addCalendarYears(this.calendar.activeDate, amount);\n  }\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit, ViewChild, AfterViewInit} from '@angular/core';\nimport { MatDatepicker } from \"@angular/material/datepicker\";\nimport { DateConfig } from './date-config.model';\nimport { PopFieldItemComponent } from '../pop-field-item.component';\nimport { FormControl } from '@angular/forms';\nimport { IsObject } from '../../../../pop-common-utility';\nimport { PopDate } from '../../../../pop-common.model';\nimport { ExpansionItemsComponent } from './datepicker-expansion-items/expansion-items.component';\nimport { OverlayContainer } from '@angular/cdk/overlay';\n\n@Component( {\n  selector: 'lib-pop-date',\n  templateUrl: './pop-date.component.html',\n  styleUrls: [ './pop-date.component.scss' ]\n} )\nexport class PopDateComponent extends PopFieldItemComponent implements OnInit, OnDestroy, AfterViewInit {\n  @Input() config: DateConfig = new DateConfig();\n  @ViewChild('datePicker') picker: MatDatepicker<any>;\n  public name = 'PopDateComponent';\n\n  ExpansionItems =  ExpansionItemsComponent;\n  private selfClose: () => void;\n\n  constructor(public el: ElementRef, private overlayContainer: OverlayContainer){\n    super();\n\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n\n        this.config.triggerOnChange = ( value: string | number | null, forcePatch = false ) => {\n          this.dom.setTimeout( `config-trigger-change`, () => {\n            // this.cdr.detectChanges();\n            this.onChange( value, forcePatch );\n          }, 0 );\n        };\n\n\n        this.config.clearMessage = () => {\n          this.dom.setTimeout( `config-clear-message`, () => {\n            this.config.message = '';\n            this.config.control.markAsPristine();\n            this.config.control.markAsUntouched();\n            // this.cdr.detectChanges();\n          }, 0 );\n        };\n\n        this._setFilter();\n\n        return resolve( true );\n      } );\n    };\n  }\n\n  /**\n   * On init hook\n   */\n  ngOnInit(){\n    super.ngOnInit();\n    if(this.config.type === 'Basic'){\n      this.ExpansionItems = null;\n    }\n  }\n\n\n  /**\n   * After view init hook\n   *  Backup picker close method\n   */\n\n  ngAfterViewInit() {\n    this.selfClose = this.picker.close;\n  }\n\n  /**\n   * on Open Event\n   * Overwrite picker close to prevent auto closing\n   */\n  public onOpen() {\n    const olcClasses =this.overlayContainer.getContainerElement().classList;\n\n\n    if(this.config.type === 'Expanded'){\n      this.picker.close = () => {};\n\n\n      olcClasses.add('expanded');\n\n\n    }else{\n      this.removeExpandedClass();\n    }\n  }\n\n\n  /**\n   * Removes Expanded Class from the Overlay Container if needed\n   */\n  removeExpandedClass(){\n    const olcClasses =this.overlayContainer.getContainerElement().classList;\n    if (olcClasses.contains('expanded')) {\n      setTimeout( () =>  olcClasses.remove('expanded'), 100);\n    }\n\n  }\n\n  /**\n   * On Change event\n   * @param value\n   * @param force\n   */\n  onChange( value?: any, force = false ){\n\n    if( value ){\n      value = PopDate.toIso( value );\n    }else{\n      value = null;\n    }\n\n    if( IsObject( this.config, [ 'control' ] ) ){\n      this.log.info( `onChange`, value );\n      const control = <FormControl>this.config.control;\n      if( typeof value !== 'undefined' ){\n        control.setValue( value );\n        control.markAsDirty();\n        control.updateValueAndValidity();\n      }\n      if( this._isChangeValid() ){\n        value = typeof value !== 'undefined' ? value : this.config.control.value;\n        value = this._applyTransformation( value );\n        if( this.config.patch && ( this.config.patch.path || this.config.facade ) ){\n          this._onPatch( value, force );\n        }else{\n          this.onBubbleEvent( 'onChange' );\n        }\n      }else{\n        this.onBubbleEvent( 'onInvalidChange' );\n      }\n    }\n  }\n\n  /**\n   * Reset the Form\n   */\n\n  onResetForm(): void{\n    this.dom.setTimeout( `reset-form`, () => {\n      this.config.control.setValue( null, { emitEvent: true } );\n      this.config.control.updateValueAndValidity();\n      this.onChange();\n    }, 0 );\n\n  }\n\n\n  /**\n   * Determine where the click happened. Return picker close to original state\n   * @param $click\n   */\n\n  onOutsideCLick($click){\n    let isDatepickerAreaClick = $click.path.some( path => {\n      if(path.className){\n        return path.className.includes('mat-datepicker');\n      }\n    });\n\n    if(isDatepickerAreaClick){\n      const r = $click.path.some( path => {\n        if(path.className){\n          return path.className.includes('mat-overlay');\n        }\n      });\n\n      if(r){\n        isDatepickerAreaClick = false;\n      }\n    }\n\n    const isDatepickerCancel = $click.path.some( ele =>{\n      if(ele.id){\n        return ele.id.includes('datepicker-cancel');\n      }\n    });\n\n    const isDatepickerApply = $click.path.some( ele =>{\n      if(ele.id){\n        return ele.id.includes('datepicker-apply');\n      }\n    });\n\n    if(!isDatepickerAreaClick || isDatepickerCancel || isDatepickerApply){\n\n\n\n      this.picker.close = this.selfClose;\n      this.picker.close();\n      this.removeExpandedClass();\n    }\n\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n    this.removeExpandedClass();\n  }\n\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  protected _setFilter(): void{\n    if( typeof this.config.filterPredicate === 'string' ){\n      switch( String( this.config.filterPredicate ).toLowerCase() ){\n        case 'weekday':\n          this.config.filterPredicate = ( d: Date ): boolean => {\n            const day = d.getDay();\n            // Prevent Saturday and Sunday from being selected.\n            return day !== 0 && day !== 6;\n          };\n          break;\n        case 'weekday':\n          this.config.filterPredicate = ( d: Date ): boolean => {\n            const day = d.getDay();\n            // Prevent Saturday and Sunday from being selected.\n            return day >= 1 && day <= 5;\n          };\n          break;\n        case 'monday':\n          this.config.filterPredicate = ( d: Date ): boolean => {\n            const day = d.getDay();\n            // monday\n            return day === 1;\n          };\n          break;\n        default:\n          this.config.filterPredicate = null;\n          break;\n      }\n    }\n  }\n\n}\n","import { Component, Inject } from '@angular/core';\nimport { MatCalendar, MatDatepicker, MatDateRangePicker } from '@angular/material/datepicker';\nimport { DateAdapter, MAT_DATE_FORMATS, MatDateFormats } from '@angular/material/core';\n\n@Component({\n  selector: 'lib-custom-header',\n  templateUrl: 'date-range-expansion-items.component.html',\n  styleUrls: ['date-range-expansion-items.component.scss']\n})\nexport class DateRangeExpansionItemsComponent<D>{\n\n  constructor(\n    private calendar: MatCalendar<D>,\n    private dateAdapter: DateAdapter<D>,\n    @Inject(MAT_DATE_FORMATS) private dateFormat: MatDateFormats,\n  ){\n  }\n\n  /**\n   * Toggle Calendar between Month and Multiple Year\n   */\n\n  toggleCalView(){\n    this.calendar.currentView = this.calendar.currentView === 'month' ? 'multi-year' : 'month';\n  }\n\n  /**\n   * Get the date month and year label. Example: May 2021.\n   */\n\n  get periodLabel(): string {\n    return this.dateAdapter.format(this.calendar.activeDate, this.dateFormat.display.monthYearA11yLabel);\n  }\n\n  /**\n   * Change the month or year by -1\n   * @param mode month or year\n   */\n\n  previousClicked(mode: 'month' | 'year'): void{\n    this.changeDate(mode, -1);\n  }\n\n  /**\n   * Change the month or year 1\n   * @param mode\n   */\n\n\n  nextClicked(mode: 'month' | 'year'): void {\n    this.changeDate(mode, 1);\n  }\n\n\n  /**\n   * Change the month or year by -1 or 1\n   * @param mode : year or month\n   * @param amount -1 or 1\n   * @private\n   */\n  private changeDate(mode: 'month' | 'year', amount: -1 | 1): void {\n    this.calendar.activeDate = mode === 'month' ?  this.dateAdapter.addCalendarMonths(this.calendar.activeDate, amount)\n      : this.dateAdapter.addCalendarYears(this.calendar.activeDate, amount);\n  }\n}\n","import { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { FieldItemPatchInterface } from '../../../../../pop-common.model';\nimport { SetControl } from '../../../../../pop-common-dom.models';\n\nexport type DateRangeFilterPredicate = ( d: Date ) => boolean;\n\nexport interface DateRangeConfigInterface {\n\n\n  type?: 'Basic' | 'Expanded';\n  bubble?: boolean;                                 // fire events\n  disabled?: boolean;                               // Mark as disabled.\n  displayErrors?: boolean;                          // If Error messages should be displayed.\n  name?: string;                                // the entityId field name\n  facade?: boolean;\n  filterPredicate?: string | DateRangeFilterPredicate;   // A function to remove certain dates\n  helpText?: string;                             // On hover helper text.\n  id?: string | number;                             // A number that will be included in the events so you know which field it came from.\n  label?: string;                                   // Date label.\n  min?: string | number | Date;                            // Field multiple_min date.\n  max?: string | number | Date;                            // Field multiple_max date.\n  metadata?: object;                                // Array of objects. To be passed back on the event emitter and included in a patch if desired.\n  noInitialValue?: boolean;                          // Set to true to always have an empty value on load\n  required?: boolean;\n  session?: boolean;                                // If field value change should be stored to core entity\n  sessionPath?: string;                            // If session path if not stored on root entity\n  patch?: FieldItemPatchInterface;                           // If field should be auto-patched.\n  tooltip?: string;                                 // Tooltip for information to show when input is focused\n  transformation?: string;                          // Transform the input to match a specific case of format\n  validators?: Array<Validators>;                   // Array of Validators.\n  valueStart?: string | number;                          // Initial value\n  valueEnd?: string | number;\n  options?: object;                                 //\n}\n\n\nexport class DateRangeConfig  implements SetControl{\n\n\n  // Defaults\n  type = 'Expanded';\n  bubble = false;\n  formGroup: FormGroup;\n  displayErrors = true;\n  disabled = false;\n  facade?: boolean;\n  filterPredicate = null;\n  helpText = '';\n  id = '';\n  label = '';\n  min = null;\n  max = null;\n  message = '';\n  metadata;\n  name = 'name';\n  noInitialValue = false;\n  patch: FieldItemPatchInterface;\n  required?: boolean;\n  session?: boolean;\n  sessionPath?: string;\n  showTooltip = false;\n  transformation;\n  tooltip = '';\n  valueStart;\n  valueEnd;\n  clearMessage;\n  triggerOnChange;\n\n  // No Defaults\n\n  validators;\n\n\n  constructor( params?: DateRangeConfigInterface ){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n    if( this.valueStart ) this.valueStart = new Date( this.valueStart );\n    if( this.valueEnd ) this.valueEnd = new Date( this.valueEnd );\n    if( typeof this.min === 'string'){\n      this.min = new Date( this.min );\n    }\n    if( typeof this.max === 'string'){\n      this.max = new Date( this.max );\n    }\n    // if( isNaN( this.max ) === false ){\n    //   const maxDate = new Date();\n    //   // maxDate.setDate(maxDate.getDate() - 1);\n    //   maxDate.setDate( maxDate.getDate() + parseInt( this.max, 10 ) );\n    //   this.max = new Date( maxDate );\n    // }\n    if( !this.patch ) this.patch = { field: '', duration: 750, path: '', disabled: false, businessId: 0 };\n    if( this.patch.displayIndicator !== false ) this.patch.displayIndicator = true;\n    if( this.noInitialValue ) this.valueStart = '';\n    if( this.noInitialValue ) this.valueEnd = '';\n    if( !this.formGroup ) this.setControl();\n\n  }\n\n\n  setControl(){\n    if(this.disabled){\n      this.formGroup =\n        <FormGroup> new FormGroup({\n          start: new FormControl({value: this.valueStart, disabled: true}),\n          end: new FormControl({value: this.valueEnd, disabled: true}),\n        });\n    }else{\n      this.formGroup =\n        <FormGroup> new FormGroup({\n          start: new FormControl( this.valueStart, ( this.validators ? this.validators : [] ) ) ,\n          end: new FormControl( this.valueEnd, ( this.validators ? this.validators : [] ) )\n        });\n\n\n    }\n\n  }\n}\n","import { Component, ElementRef, Input,Output, EventEmitter, OnDestroy, OnInit, ViewChild, AfterViewInit} from '@angular/core';\nimport { MatDateRangePicker } from \"@angular/material/datepicker\";\nimport { PopFieldItemComponent } from '../../pop-field-item.component';\nimport { PopDate } from '../../../../../pop-common.model';\nimport { IsObject } from '../../../../../pop-common-utility';\nimport { FormControl } from '@angular/forms';\nimport { DateRangeExpansionItemsComponent } from './expansion-items/date-range-expansion-items.component';\nimport { DateRangeConfig } from './date-range-config.models';\nimport { ValidationErrorMessages } from '../../../../../services/pop-validators';\nimport { OverlayContainer } from '@angular/cdk/overlay';\n\n@Component( {\n  selector: 'lib-pop-date-range',\n  templateUrl: 'pop-date-range.component.html',\n  styleUrls: [ 'pop-date-range.component.scss' ]\n} )\nexport class PopDateRangeComponent extends PopFieldItemComponent implements OnInit, OnDestroy, AfterViewInit {\n\n  @Input() config: DateRangeConfig = new DateRangeConfig();\n  @Output() apply = new EventEmitter();\n  ExpansionItems =  DateRangeExpansionItemsComponent;\n  @ViewChild('dateRangePicker') picker: MatDateRangePicker<any>;\n\n  public name = 'PopDateRangeComponent';\n  private selfClose: () => void;\n\n  constructor(public el: ElementRef,  private overlayContainer: OverlayContainer){\n    super();\n\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n\n        this.config.triggerOnChange = ( value: {start: string | number | null, end:  string | number | null}, forcePatch = false ) => {\n          this.dom.setTimeout( `config-trigger-change`, () => {\n            // this.cdr.detectChanges();\n            this.onChange( 'start',value.start, forcePatch );\n            this.onChange( 'end',value.end, forcePatch );\n          }, 0 );\n        };\n\n        this.config.clearMessage = () => {\n          this.dom.setTimeout( `config-clear-message`, () => {\n            this.config.message = '';\n            this.config.formGroup.get('start').markAsPristine();\n            this.config.formGroup.get('start').markAsPristine();\n            this.config.formGroup.get('end').markAsPristine();\n            this.config.formGroup.get('end').markAsPristine();\n            // this.cdr.detectChanges();\n          }, 0 );\n        };\n\n        this._setFilter();\n\n        return resolve( true );\n      } );\n    };\n  }\n\n  /**\n   * On init hook\n   */\n  ngOnInit(){\n    super.ngOnInit();\n    if(this.config.type === 'Basic'){\n      this.ExpansionItems = null;\n    }\n  }\n\n  /**\n   * After view init hook\n   *  Backup picker close method\n   */\n\n  ngAfterViewInit() {\n    this.selfClose = this.picker.close;\n  }\n\n\n  /**\n   * Get the date control name for start or end\n   * @param type: start or end\n   */\n\n  getDateControlName(type: 'start' | 'end'){\n    if(type === 'start') return Object.keys(this.config.formGroup.controls)[0];\n    else if(type === 'end') return Object.keys(this.config.formGroup.controls)[1];\n  }\n\n  /**\n   * on Open Event\n   * Overwrite picker close to prevent auto closing\n   */\n\n  public onOpen() {\n\n    const olcClasses =this.overlayContainer.getContainerElement().classList;\n\n    if(this.config.type === 'Expanded'){\n      this.picker.close = () => {};\n\n      olcClasses.add('expanded');\n\n\n    }else{\n      this.removeExpandedClass();\n    }\n  }\n\n  /**\n   * Removes Expanded Class from the Overlay Container if needed\n   */\n  removeExpandedClass(){\n    const olcClasses =this.overlayContainer.getContainerElement().classList;\n    if (olcClasses.contains('expanded')) {\n      setTimeout( () =>  olcClasses.remove('expanded'), 100);\n\n    }\n\n  }\n\n  /**\n   * Determine where the click happened. Return picker close to original state\n   * @param $click\n   */\n\n\n  onOutsideCLick($click){\n    let isDatepickerAreaClick = $click.path.some( path => {\n      if(path.className){\n        return path.className.includes('mat-datepicker');\n      }\n    });\n\n    if(isDatepickerAreaClick){\n      const r = $click.path.some( path => {\n        if(path.className){\n          return path.className.includes('mat-overlay');\n        }\n      });\n\n      if(r){\n        isDatepickerAreaClick = false;\n      }\n    }\n\n    const isDatepickerCancel = $click.path.some( ele =>{\n      if(ele.id){\n        return ele.id.includes('datepicker-cancel');\n      }\n    });\n\n    const isDatepickerApply = $click.path.some( ele =>{\n      if(ele.id){\n        return ele.id.includes('datepicker-apply');\n      }\n    });\n\n    if(isDatepickerCancel || isDatepickerApply){\n      this.onChange('start');\n      this.onChange('end');\n      this.picker.close = this.selfClose;\n      this.picker.close();\n      this.removeExpandedClass();\n\n      if(isDatepickerApply){\n        this.apply.emit({start: this.config.formGroup.get('start').value, end: this.config.formGroup.get('end').value});\n      }\n    }else if(!isDatepickerAreaClick){\n      this.picker.close = this.selfClose;\n      this.picker.close();\n      this.removeExpandedClass();\n    }\n\n\n  }\n\n  /**\n   * On Change event\n   * @param controlName\n   * @param value\n   * @param force\n   */\n  onChange(  controlName: 'start' | 'end',  value?: any,  force = false, ){\n\n   value = this.config.formGroup.get(this.getDateControlName(controlName)).value;\n\n    if( value ){\n      value = PopDate.toIso( value );\n    }else{\n      value = null;\n    }\n\n    if( IsObject( this.config, [ 'formGroup' ] ) ){\n      this.log.info( `onChange`, value );\n\n\n      const control = <FormControl>this.config.formGroup.get(controlName);\n      if( typeof value !== 'undefined' ){\n         control.setValue( value );\n         control.markAsDirty();\n         control.updateValueAndValidity();\n      }\n      if( this.isChangeValid(controlName) ){\n         value = typeof value !== 'undefined' ? value : this.config.formGroup.get(this.getDateControlName(controlName)).value;\n         value = this._applyTransformation( value );\n         if( this.config.patch && ( this.config.patch.path || this.config.facade ) ){\n           this._onPatch( value, force );\n         }else{\n           this.onBubbleEvent( 'onChange' );\n         }\n       }else{\n      }\n    }\n  }\n\n\n  /**\n   * Check to see if change is valid\n   * @param controlName: start or end\n   * @protected\n   */\n\n  protected isChangeValid(controlName: 'start' | 'end'){\n\n\n    const control = <FormControl> this.config.formGroup.get(this.getDateControlName(controlName)).value;\n    if(control){\n      if( control.invalid ){\n        if( this.config.displayErrors ) this._setMessage( ValidationErrorMessages( control.errors ) );\n        return false;\n      }\n    }\n\n    return this._checkPrevent();\n  }\n\n\n  /**\n   * Reset Form event\n   */\n\n  onResetForm(): void{\n    this.dom.setTimeout( `reset-form`, () => {\n      this.config.formGroup.get('start').setValue( null, { emitEvent: true } );\n      this.config.formGroup.get('start').updateValueAndValidity();\n      this.config.formGroup.get('end').setValue( null, { emitEvent: true } );\n      this.config.formGroup.get('end').updateValueAndValidity();\n      this.onChange('start');\n      this.apply.emit({start:null,end:null});\n    }, 0 );\n\n  }\n\n  ngOnDestroy(){\n    super.ngOnDestroy();\n    this.removeExpandedClass();\n  }\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  protected _setFilter(): void{\n    if( typeof this.config.filterPredicate === 'string' ){\n      switch( String( this.config.filterPredicate ).toLowerCase() ){\n        case 'weekday':\n          this.config.filterPredicate = ( d: Date ): boolean => {\n            const day = d.getDay();\n            // Prevent Saturday and Sunday from being selected.\n            return day !== 0 && day !== 6;\n          };\n          break;\n        case 'weekday':\n          this.config.filterPredicate = ( d: Date ): boolean => {\n            const day = d.getDay();\n            // Prevent Saturday and Sunday from being selected.\n            return day >= 1 && day <= 5;\n          };\n          break;\n        case 'monday':\n          this.config.filterPredicate = ( d: Date ): boolean => {\n            const day = d.getDay();\n            // monday\n            return day === 1;\n          };\n          break;\n        default:\n          this.config.filterPredicate = null;\n          break;\n      }\n    }\n  }\n}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { DateAdapter } from '@angular/material/core';\nimport { MatDatepicker,  MatCalendar } from '@angular/material/datepicker';\n\nconst datePresets = [\n  'Today',\n  'Last',\n  'Previous',\n  'Next',\n  'Last Month',\n  'Next Month',\n  'Last Year',\n  'Next Year',\n  'Custom'\n] as const;\n\ntype DatePreset = typeof  datePresets[number];\n\n@Component({\n  selector: 'lib-custom-panel',\n  templateUrl: 'custom-panel.component.html',\n  styleUrls: ['custom-panel.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CustomPanelComponent<D>{\n  readonly presets = datePresets;\n\n  selected: DatePreset = 'Today';\n  dayOfWeek: string;\n\n  constructor(\n    private dateAdapter: DateAdapter<D>,\n    private datePicker: MatDatepicker<D>,\n    private calendar: MatCalendar<D>,\n  ){\n\n    // Get the day of the week to add to preset. Example: Next Monday\n    switch (new Date().getDay()) {\n      case 0:\n        this.dayOfWeek = \"Sunday\";\n        break;\n      case 1:\n        this.dayOfWeek = \"Monday\";\n        break;\n      case 2:\n        this.dayOfWeek = \"Tuesday\";\n        break;\n      case 3:\n        this.dayOfWeek = \"Wednesday\";\n        break;\n      case 4:\n        this.dayOfWeek = \"Thursday\";\n        break;\n      case 5:\n        this.dayOfWeek = \"Friday\";\n        break;\n      case 6:\n        this.dayOfWeek = \"Saturday\";\n    }\n  }\n\n\n  /**\n   * Apply the preset to Datepicker and Calendar\n   * @param datePreset: Example: Today\n   */\n\n  selectDatePreset(datePreset: DatePreset): void{\n    this.selected = datePreset;\n    const date = this.calculateDate(datePreset);\n    this.datePicker.select(date);\n    this.calendar.activeDate = date;\n  }\n\n\n  /**\n   * Calculate date Preset\n   * @param datePreset: Example: Today.\n   */\n\n  calculateDate(datePreset: DatePreset): any{\n    const today = this.today;\n\n    switch(datePreset){\n      case 'Today':\n        return today;\n      case 'Last':\n        return this.dateAdapter.addCalendarDays(today, -7);\n      case 'Previous':\n        return this.dateAdapter.addCalendarDays(today, -14);\n      case 'Next':\n        return this.dateAdapter.addCalendarDays(today, 7);\n      case 'Last Month':\n        return this.dateAdapter.addCalendarMonths(today, -1);\n      case 'Next Month':\n        return this.dateAdapter.addCalendarMonths(today, 1);\n      case 'Last Year':\n        return this.dateAdapter.addCalendarYears(today, -1);\n      case 'Next Year':\n        return this.dateAdapter.addCalendarYears(today, 1);\n    }\n  }\n\n\n  /**\n   * Get Today\n   * @private\n   */\n\n  private get today(): D {\n    const today = this.dateAdapter.today();\n\n    if (today === null) {\n      throw new Error('date creation failed');\n    }\n    return today;\n  }\n\n}\n","import { ChangeDetectorRef, Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { TimeConfig } from './time-config.model';\nimport { PopFieldItemComponent } from '../pop-field-item.component';\n\n\n@Component({\n  selector: 'lib-pop-time',\n  templateUrl: './pop-time.component.html',\n  styleUrls: [ './pop-time.component.scss' ]\n})\nexport class PopTimeComponent extends PopFieldItemComponent implements OnInit, OnDestroy {\n  @Input() config: TimeConfig = new TimeConfig();\n  public name = 'PopTimeComponent';\n\n\n  constructor(\n    public el: ElementRef,\n    protected cdr: ChangeDetectorRef\n  ){\n    super();\n\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n\n        this.config.time = 12;\n        this.ui.time = {\n          12: {\n            hours: [],\n            minutes: [],\n            periods: [ 'AM', 'PM' ]\n\n          },\n          24: {\n            hours: [],\n            minutes: [],\n            periods: []\n          },\n          selectedHour: '12',\n          selectedMinute: '00',\n          selectedPeriod: 'AM',\n        };\n\n        this.setHoursAndMinutes();\n        this.setSelectedValues();\n        this.config.triggerOnChange = (value: string | number | null) => {\n          this.cdr.detectChanges();\n          this.onChange(value, true);\n        };\n\n        resolve(true);\n      });\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  protected setSelectedValues(): void{\n    const time = this.ui.time;\n    const timeValue = this.config.control.value;\n    const minuteValue = timeValue.slice(2, 5).replace(/[^a-zA-Z0-9]/g, '').padStart(2, '0');\n    let hourValue = timeValue.slice(0, 2).replace(/[^a-zA-Z0-9]/g, '').padStart(2, '0');\n    hourValue = ( ( hourValue % 12 ) || 12 ).toString(10).padStart(2, '0');\n    if( Number(hourValue) > 12 && this.config.time === 12 ) time.selectedPeriod = 'PM';\n    if( timeValue ) time.selectedHour = hourValue;\n    time.selectedMinute = minuteValue;\n  }\n\n\n  protected setHoursAndMinutes(): void{\n    let i;\n    const hourLimit = this.config.time === 12 ? 12 : 23;\n    for( i = 1; i <= hourLimit; i++ ){\n      this.ui.time[ this.config.time ].hours.push(i.toString().padStart(2, '0'));\n    }\n    for( i = 0; i < 60; i += this.config.interval ){\n      this.ui.time[ this.config.time ].minutes.push(i.toString().padStart(2, '0'));\n    }\n  }\n\n\n  protected setTimeValue(): void{\n    let selectedHour = this.ui.time.selectedHour;\n    if( this.ui.time.selectedPeriod === 'AM' && Number(selectedHour) === 12 ) selectedHour = '00';\n    if( this.ui.time.selectedPeriod === 'PM' && Number(selectedHour) > 12 ) selectedHour = ( 12 + Number(selectedHour) ).toString(10);\n    const selectedTime = selectedHour + ':' + this.ui.time.selectedMinute + ':00';\n    this.config.control.setValue(selectedTime, { emitEvent: false });\n  }\n}\n","import {\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  EventEmitter,\n  Input, OnDestroy,\n  OnInit,\n  Output,\n  ViewChild,\n} from '@angular/core';\nimport {SelectionModel} from '@angular/cdk/collections';\nimport {MatListOption, MatSelectionList} from '@angular/material/list';\nimport {Observable} from 'rxjs';\nimport {SelectListConfig, SelectListGroupInterface} from './select-list-config.model';\nimport {InputConfig} from '../pop-input/input-config.model';\n\nimport {debounceTime} from 'rxjs/operators';\nimport {SelectFilterGroupInterface} from '../pop-select-filter/select-filter-config.model';\nimport {\n  CoreConfig,\n  Entity,\n  FieldItemOption,\n  FieldItemPatchInterface,\n  KeyMap,\n  PopBaseEventInterface\n} from '../../../../pop-common.model';\nimport {PopFieldItemComponent} from '../pop-field-item.component';\nimport {\n  IsArray,\n  IsCallableFunction,\n  IsDefined,\n  IsNumber,\n  IsObject,\n  ObjectContainsTagSearch\n} from '../../../../pop-common-utility';\nimport {SwitchConfig} from '../pop-switch/switch-config.model';\n\n\n@Component({\n  selector: 'lib-pop-select-list',\n  templateUrl: './pop-select-list.component.html',\n  styleUrls: ['./pop-select-list.component.scss'],\n})\nexport class PopSelectListComponent extends PopFieldItemComponent implements OnInit, OnDestroy {\n  // configuration for component\n  @Input() config: SelectListConfig;\n\n  // emitted every time there is an option selection, search focus, or the filter options close\n  @Output() events: EventEmitter<PopBaseEventInterface> = new EventEmitter<PopBaseEventInterface>();\n\n  // Getting a reference to the selection list in the view so that I can know which options are selected\n  @ViewChild('selectionList', {static: true}) selectionListRef: MatSelectionList;\n  @ViewChild('search') searchRef: ElementRef;\n\n  public name = 'PopSelectListComponent';\n\n\n  protected asset = {\n    filteredOptions: <Observable<FieldItemOption[]>>undefined,\n    groups: [],\n    onFocusValue: undefined,\n    filterActivated: false,\n    disabled: <KeyMap<boolean>>{}\n  };\n\n  public ui = {\n    search: {\n      config: undefined,\n    },\n    all: {\n      overlay: undefined,\n    }\n  };\n\n\n  constructor(\n    public el: ElementRef,\n    protected cdr: ChangeDetectorRef) {\n    super();\n\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n\n        this._setInitialDomState();\n        this._setUpFilterObservable();\n        this._setListPosition();\n        this._filterOptionList('');\n        this._setConfigHooks();\n\n        return resolve(true);\n      });\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n\n        this._setInitialValue();\n\n        return resolve(true);\n      });\n    };\n\n  }\n\n\n  ngOnInit(): void {\n    super.ngOnInit();\n  }\n\n\n  triggerOnChange(wait = 1000) {\n    this.dom.setTimeout('api-fetch', () => {\n      this.onChange();\n    }, wait);\n  }\n\n\n  /**\n   * Checks/Unchecks all of the filtered options within a specific group\n   * @param  FieldOption option\n   * @returns boolean\n   */\n  onGroupChange(checked: boolean, group): boolean {\n    if (!this.config.multiple) return false;\n    if (!checked) this.config.all = false;\n    group.options.values.map((option: FieldItemOption) => {\n      if (!option.hidden) option.selected = checked;\n    });\n    setTimeout(() => {\n      this._checkGroupState(checked, group);\n      this._updateSelectedOptions();\n      this.onBubbleEvent('groupAllChange', 'Group Change', {data: group});\n      this.onBubbleEvent('groupChange', 'Group Change', {data: group});\n    }, 0);\n    return false;\n  }\n\n\n  /**\n   * Checks/Unchecks all of the filtered options within a specific group\n   * @param  FieldOption option\n   * @returns boolean\n   */\n  onAllChange(checked: boolean): boolean {\n    if (!this.config.multiple) return false;\n    this.config.groups.map((group) => {\n      group.options.values.map((option: FieldItemOption) => {\n        option.selected = checked;\n      });\n      group.all = checked;\n      group.indeterminate = false;\n    });\n    setTimeout(() => {\n      this._updateSelectedOptions();\n    }, 0);\n    return false;\n  }\n\n  /**\n   * Allow the user to clear the search text\n   */\n  onClearSearch(): void {\n    this.ui.search.config.control.setValue('');\n  }\n\n\n  /**\n   * Update's the list of selected options inside of the config\n   * and emits a change event. This method will be called by the view\n   * whenever an option is selected\n   * @param MatSelectionListChange event\n   * @returns void\n   */\n  onOptionChange(event, option, group): void {\n    if (this.config.multiple) {\n      // option.selected = event.target.className.search( 'mat-pseudo-checkbox-checked' ) > -1 ? true : false;\n      option.selected = !option.selected;\n      if (!option.selected) this.config.all = false;\n      this._checkGroupState(option.selected, group);\n      this._updateSelectedOptions();\n\n      this.onBubbleEvent('optionChange', 'Option Change', {data: option});\n      setTimeout(() => {\n        this.onBubbleEvent('groupChange', 'Group Change', {data: group});\n      }, 0);\n    } else {\n      this.dom.active.optionId = option.value;\n      this.config.control.setValue(option.value);\n      this.config.strVal = option.name;\n      this.triggerOnChange(0);\n    }\n  }\n\n  /**\n   * Add on to set toggle special custom property\n   * @param event\n   * @param option\n   */\n  onOptionModeChange(event, option): void {\n    if (this.config.multiple) {\n      setTimeout(() => {\n        this.onBubbleEvent('optionModeChange', 'Option Mode Change', {data: option});\n      }, 0);\n    }\n  }\n\n  /**\n   * On link click stub\n   */\n  onLinkClick() {\n    console.log('LINK STUB: Link to Entity', this.config.control.value);\n  }\n\n  /**\n   * Allow user to open close a group section\n   * @param group\n   */\n  onToggleGroup(group: SelectListGroupInterface) {\n    if (this.config.groups.length > 1) {\n      group.open = !group.open;\n    }\n  }\n\n\n  /**\n   * Checks if the given option is in the list of selected options\n   * in the config. Used by the view to set the checkboxe's on the\n   * initial state of the dropdown\n   * @param  FieldOption option\n   * @returns boolean\n   */\n  isOptionSelected(option: FieldItemOption): boolean {\n    return option.selected;\n  }\n\n\n  isSearchValue() {\n    if (IsObject(this.ui.search.config, ['control']) && this.ui.search.config.control.value) {\n      return true;\n    }\n    return false;\n  }\n\n\n  /**\n   * Template logic to determine if a option is hidden\n   * @param option\n   */\n  isOptionHidden(group: SelectListGroupInterface, option: FieldItemOption): boolean {\n    if (!group.open && !(this.isSearchValue())) {\n      return true;\n    }\n    if (option.hidden) {\n      return true;\n    }\n    return false;\n  }\n\n\n  /**\n   * Template logic to determine if a option is active\n   * @param option\n   */\n  isOptionActive(option: FieldItemOption): boolean {\n    return this.dom.active.optionId && option.value === this.dom.active.optionId;\n  }\n\n\n  /**\n   * Template logic to determine if a option is disabled\n   * @param option\n   */\n  isOptionDisabled(option: FieldItemOption): boolean {\n    return this.asset.disabled[option.value];\n  }\n\n\n  ngOnDestroy() {\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  private _setConfigHooks() {\n    this.config.triggerOnChange = (value: string | number | null) => {\n      this.config.control.setValue(value);\n      this.config.control.markAsPristine();\n      this.config.message = '';\n      this.config.control.updateValueAndValidity();\n      this.onChange();\n    };\n\n\n    this.config.disableOption = (optionId: number) => {\n      if (IsDefined(optionId)) {\n        this.asset.disabled[optionId] = true;\n      }\n    };\n\n    this.config.enableOption = (optionId: number) => {\n      if (IsDefined(optionId)) {\n        delete this.asset.disabled[optionId];\n      }\n    };\n\n    this.config.setDisabled = (optionsIds: number[] = null) => {\n      this.dom.setTimeout(`set-disabled`, () => {\n        this.config.disabledIds = optionsIds;\n        this._setDisabledIds();\n      }, 0);\n    };\n\n    this.config.focusSearch = () => {\n      this.dom.setTimeout(`search-focus`, () => {\n        if (this.searchRef) {\n          this.searchRef.nativeElement.focus();\n          // this.onBubbleEvent( 'focus' );\n        }\n      }, 200);\n    };\n\n    this.config.setActive = (optionId) => {\n      this.dom.setTimeout(`set-disabled`, () => {\n        if (+optionId) {\n          this.dom.active.optionId = optionId;\n          delete this.asset.disabled[optionId];\n        }\n      }, 5);\n    };\n\n    this.config.setHeight = (height: number) => {\n      this.dom.setTimeout(`set-height`, () => {\n        if (+height) {\n          this.config.minHeight = height;\n          this.config.height = height;\n        }\n      }, 5);\n    };\n\n    this.config.clearSelected = () => {\n      this.dom.setTimeout(`clear-selected`, () => {\n        this.onAllChange(false);\n      }, 0);\n    };\n  }\n\n  /**\n   * Set the inital dom state of the component\n   * @private\n   */\n  private _setInitialDomState() {\n    this.dom.state.helper = false;\n    this.dom.state.filter = <boolean>undefined;\n    this.dom.state.allOverlayEnabled = this.config.allOverlayEnabled ? true : false;\n    this.dom.state.filterActivated = false;\n    this.dom.state.above = <number>undefined;\n    this.dom.state.below = <number>undefined;\n    this.dom.state.list = <any>undefined;\n    this.asset.filterActivated = false;\n    this.dom.state.checkboxPosition = this.config.checkboxPosition === 'left' ? 'before' : 'after';\n\n\n    this.ui.search.config = new InputConfig({\n      value: '',\n      helpText: this.config.helpText,\n      displayErrors: false,\n      label: this.config.label,\n      readonly: true,\n      maxlength: 255\n    });\n\n\n    this.ui.all.overlay = this.config.allOverlay ? new SwitchConfig({\n      value: this.config.allOverlayEnabled,\n      displayErrors: false,\n      label: this.config.allOverlayLabel,\n      disabled:this.config.disabled,\n      facade: true,\n      labelPosition: this.config.checkboxPosition === 'after' ? 'before' : 'after',\n      patch: {\n        path: '',\n        field: '',\n        callback: (core: CoreConfig, event: PopBaseEventInterface) => {\n          this.dom.setTimeout(`overlay-callback`, async () => {\n            this.dom.state.allOverlayEnabled = event.config.control.value === true;\n            if (IsCallableFunction(this.config.allOverlayCallback)) {\n              await this.config.allOverlayCallback(core, event);\n            }\n          }, 0);\n\n        }\n      }\n    }) : null;\n\n\n    if (!this.config.multiple) {\n      this.selectionListRef.selectedOptions = new SelectionModel<MatListOption>(false);\n    }\n\n    this.asset.onFocusValue = JSON.stringify(this.config.selectedOptions);\n\n    this._setDisabledIds();\n  }\n\n\n  /**\n   * Set the lead mapping options that are disabled;\n   * @private\n   */\n  private _setDisabledIds() {\n    this.asset.disabled = {};\n    if (IsArray(this.config.disabledIds)) {\n      this.config.disabledIds.map((optionId: number) => {\n        if (IsNumber(optionId)) {\n          this.asset.disabled[optionId] = true;\n        }\n      });\n    }\n  }\n\n\n  private _setInitialValue() {\n    if (!this.config.multiple && !this.dom.active.optionId) {\n      if (IsDefined(this.config.value, false)) {\n        this.dom.active.optionId = this.config.value;\n        if (!(IsDefined(this.config.control.value, false))) {\n          this.config.control.setValue(this.config.value);\n        }\n      }\n    } else {\n      if (!(IsArray(this.config.control.value))) {\n        this.config.control.setValue([]);\n      }\n    }\n  }\n\n\n  /**\n   * Observes the value changes to the search and triggers the filter of the options\n   * @returns void\n   */\n  private _setUpFilterObservable(): void {\n    this.ui.search.config.control.valueChanges\n      .pipe(\n        debounceTime(200)\n      ).subscribe((value: string) => {\n      this._filterOptionList(value);\n    });\n  }\n\n\n  /**\n   * Detects if the list of options should appear above or below the select input\n   * @param height\n   */\n  private _setListPosition(): void {\n    // this.config.minHeight = this.config.minHeight;\n    // this.config.minHeight = 200;\n    // this.config.height = this.config.defaultHeight;\n  }\n\n\n  /**\n   * Detects where the check all  box for a group should be unchecked, checked, or indeterminate\n   * @param checked\n   * @param group\n   */\n  private _checkGroupState(checked: boolean, group): void {\n    let indeterminate = false;\n    let all = true;\n    if (!checked) {\n      all = false;\n      group.options.values.some((option) => {\n        if (!option.hidden && option.selected) {\n          indeterminate = true;\n          return true;\n        }\n      });\n    } else {\n      group.options.values.some(option => {\n        if (!option.hidden && !option.selected) {\n          all = false;\n          indeterminate = true;\n          return true;\n        }\n      });\n    }\n    group.all = all;\n    group.indeterminate = indeterminate;\n  }\n\n\n  /**\n   * Finds only the options from the config's options that match\n   * the string passed in, and returns those options.\n   * Used as the filter when setting up the filteredOptions observable\n   * @param string value\n   * @returns FieldItemOption\n   */\n  private _filterOptionList(search: string): void {\n    this.config.groups.map((group: SelectListGroupInterface) => {\n      group.options.values.map((option) => {\n        option.hidden = ObjectContainsTagSearch(option, search) ? false : true;\n      });\n      group.selected = group.options.values.filter((option) => {\n        return !option.hidden && option.selected;\n      }).length;\n\n      group.visible = group.options.values.filter((option) => {\n        return !option.hidden;\n      }).length;\n\n      const checked = group.visible === group.selected;\n      this._checkGroupState(checked, group);\n      try {\n        this.cdr.detectChanges();\n      } catch (e) {\n      }\n    });\n  }\n\n\n  /**\n   * Update's the selection options in config\n   * by looping through all of the currently selected items\n   * in the selectionListRef.\n   * @param number id\n   */\n  private _updateSelectedOptions() {\n    this.dom.setTimeout('update-selected-options', () => {\n      const selected = this.selectionListRef.selectedOptions.selected;\n      let str: string[] = [];\n\n      this.config.selectedOptions = [];\n      for (const option of selected) {\n        str.push(option._text.nativeElement.innerText);\n        this.config.selectedOptions.push(option.value);\n      }\n      this.config.control.setValue(this.config.selectedOptions.slice());\n      str = str.sort();\n      this.config.strVal = str.join(', ');\n      this.triggerOnChange();\n    }, 50);\n  }\n\n\n  /**\n   * Set up the body of the api patch\n   * @param value\n   * @private\n   */\n  protected _getPatchBody(value?: number | string | boolean | null | Object): Entity {\n    const patch = <FieldItemPatchInterface>this.config.patch;\n    const body = <Entity>{};\n    if (this.config.all) {\n      if (typeof this.config.allValue !== 'undefined') {\n        body[this.config.patch.field] = this.config.allValue;\n      } else if (this.config.patchGroupFk) {\n        body[this.config.patch.field] = [];\n        this.config.groups.map((group: SelectFilterGroupInterface) => {\n          body[this.config.patch.field].push(`0:${group.groupFk}`);\n        });\n      } else {\n        body[this.config.patch.field] = this.config.selectedOptions.length ? this.config.selectedOptions : [];\n      }\n    } else {\n      if (this.config.multiple) {\n        if (!this.config.control.value.length && typeof this.config.emptyValue !== 'undefined') {\n          body[this.config.patch.field] = this.config.emptyValue;\n        } else if (this.config.patchGroupFk) {\n          body[this.config.patch.field] = [];\n          this.config.groups.map((group: SelectFilterGroupInterface) => {\n            if (group.all) {\n              body[this.config.patch.field].push(`0:${group.groupFk}`);\n            } else {\n              group.options.values.filter((option) => {\n                return option.selected;\n              }).map((option) => {\n                body[this.config.patch.field].push(`${option.value}:${group.groupFk}`);\n              });\n            }\n          });\n        } else {\n          body[this.config.patch.field] = this.config.control.value.length ? this.config.control.value : [];\n        }\n      } else {\n        value = typeof value !== 'undefined' ? value : this.config.control.value;\n        body[this.config.patch.field] = value;\n      }\n\n      if (patch && patch.metadata) {\n        for (const i in patch.metadata) {\n          if (!patch.metadata.hasOwnProperty(i)) continue;\n          body[i] = patch.metadata[i];\n        }\n      }\n\n    }\n\n\n    if (IsArray(body[this.config.patch.field], true)) body[this.config.patch.field].sort(function (a, b) {\n      return a - b;\n    });\n    if (this.config.patch.metadata) {\n      for (const i in this.config.patch.metadata) {\n        if (!this.config.patch.metadata.hasOwnProperty(i)) continue;\n        body[i] = this.config.patch.metadata[i];\n      }\n    }\n    if (this.config.patch.json) body[this.config.patch.field] = JSON.stringify(body[this.config.patch.field]);\n    return body;\n  }\n}\n","import { Component, ElementRef, Inject, Input, OnDestroy, OnInit } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport { SelectModalConfig } from '../select-modal-config.model';\nimport { FormControl } from '@angular/forms';\nimport { ValidationErrorMessages } from '../../../../../services/pop-validators';\nimport { PopFieldItemComponent } from '../../pop-field-item.component';\nimport { Dictionary } from '../../../../../pop-common.model';\n\n\n@Component({\n  selector: 'lib-pop-select-modal-dialog',\n  templateUrl: './pop-select-modal-dialog.component.html',\n  styleUrls: [ './pop-select-modal-dialog.component.scss' ]\n})\nexport class PopSelectModalDialogComponent extends PopFieldItemComponent implements OnInit, OnDestroy {\n  @Input() config: SelectModalConfig;\n\n  public name ='PopSelectModalDialogComponent';\n\n\n  constructor(\n    public el: ElementRef,\n    public dialog: MatDialogRef<PopSelectModalDialogComponent>,\n    @Inject(MAT_DIALOG_DATA) public data: Dictionary<any>,\n  ){\n    super();\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n\n        this.dom.height.outer = 570;\n        this.dom.height.inner = 520;\n        this.config.list.minHeight = 400;\n\n        return resolve(true);\n      });\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  confirm(){\n    // this.config.list.control.setValue('', { emitEvent: false });\n    this.dom.setTimeout(`dialog-confirm`,() => {\n      this.dialog.close(this.config.list);\n    }, 0);\n\n  }\n\n\n  cancel(){\n    // this.config.list.control.setValue('', { emitEvent: false });\n    this.dom.setTimeout(`dialog-close`, () => {\n      this.dialog.close(null);\n    }, 0);\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Protected Method )                                      *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n}\n","import { Component, EventEmitter, Input, OnDestroy, OnInit, Output } from '@angular/core';\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\nimport { SelectModalConfig } from './select-modal-config.model';\nimport { PopSelectModalDialogComponent } from './pop-select-modal-dialog/pop-select-modal-dialog.component';\nimport { InputConfig } from '../pop-input/input-config.model';\nimport { SelectListConfig } from '../pop-select-list/select-list-config.model';\nimport { SelectFilterGroupInterface } from '../pop-select-filter/select-filter-config.model';\nimport { Dictionary, Entity, PopBaseEventInterface, ServiceInjector } from '../../../../pop-common.model';\nimport { PopFieldItemComponent } from '../pop-field-item.component';\nimport { ArrayOnlyUnique, IsArray, IsCallableFunction, JsonCopy } from '../../../../pop-common-utility';\nimport { FormControl } from '@angular/forms';\nimport { ValidationErrorMessages } from '../../../../services/pop-validators';\n\n\n@Component( {\n  selector: 'lib-pop-select-modal',\n  templateUrl: './pop-select-modal.component.html',\n  styleUrls: [ './pop-select-modal.component.scss' ]\n} )\nexport class PopSelectModalComponent extends PopFieldItemComponent implements OnInit, OnDestroy {\n  @Input() config: SelectModalConfig;\n  @Output() events: EventEmitter<PopBaseEventInterface> = new EventEmitter();\n\n  public name = 'PopSelectModalComponent';\n\n  protected srv = {\n    dialog: <MatDialog>ServiceInjector.get( MatDialog ),\n  };\n\n  protected asset = {\n    original: undefined,\n    dialogRef: <MatDialogRef<PopSelectModalDialogComponent>>undefined\n  };\n\n  public ui = {\n    anchorInput: <InputConfig>undefined,\n    dialogRef: <MatDialogRef<PopSelectModalDialogComponent>>undefined\n  };\n\n\n  constructor(){\n    super();\n\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n\n\n        this.config.triggerOpen = ()=>{\n          this.dom.setTimeout(``, ()=>{\n            this.onChangeOptions();\n          }, 0);\n        };\n\n        this.ui.anchorInput = new InputConfig( {\n          label: this.config.label,\n          value: this.config.list.strVal,\n          selectMode: true,\n          maxlength: 2048,\n        } );\n\n        return resolve( true );\n      } );\n    };\n\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  onChangeOptions(){\n    this.dom.active.storedValue = this.config.list.strVal;\n    this.asset.dialogRef = this.srv.dialog.open( PopSelectModalDialogComponent, {\n      width: `450px`,\n      height: `600px`,\n      panelClass: 'sw-relative',\n      data: <Dictionary<any>>{}\n    } );\n\n    this.asset.original = {\n      all: JsonCopy(this.config.list.all),\n      selectedOptions: this.config.list.multiple ? JsonCopy(this.config.control.value): [],\n      groups: JsonCopy(this.config.list.groups),\n      strVal: JsonCopy(this.config.list.strVal),\n    };\n\n    this.asset.dialogRef.componentInstance.config = this.config;\n\n    this.dom.setSubscriber( `select-dialog`, this.asset.dialogRef.beforeClosed().subscribe( ( list: SelectListConfig | null ) => {\n      if( list && list.strVal !== this.dom.active.storedValue ){\n        this.config.control.setValue(list.control.value);\n        if(!list.multiple) list.value = list.control.value;\n\n        // console.log('list', list);\n        this.ui.anchorInput.triggerOnChange( list.strVal );\n        this.ui.anchorInput.message = '';\n        this.onChange();\n      }else{\n        this.config.list.all = this.asset.original.all;\n        this.config.list.selectedOptions = this.asset.original.selectedOptions;\n        this.config.list.value = this.asset.original.selectedOptions;\n        this.config.list.groups = this.asset.original.groups;\n        this.config.list.strVal = this.asset.original.strVal;\n      }\n      this.asset.dialogRef = null;\n    } ) );\n\n    this.dom.setTimeout( `search-focus`, () => {\n        if(IsCallableFunction(this.asset.dialogRef.componentInstance.config.list.focusSearch)) this.asset.dialogRef.componentInstance.config.list.focusSearch();\n    }, 200 );\n  }\n\n\n  // displaySuccess(): void{\n  //   this.ui.anchorInput.message = '';\n  //   this.ui.anchorInput.patch.success = true;\n  //   setTimeout(() => {\n  //     this.ui.anchorInput.patch.success = false;\n  //   }, 1000);\n  // }\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Protected Method )                                      *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  /**\n   * Set up the body of the api patch\n   * @param value\n   * @private\n   */\n  protected _getPatchBody( value?: number | string | boolean | null | Object ): Entity{\n    const body = <Entity>{};\n    if( !value ) value = this.config.list.multiple ? ( this.config.list.control.value.length ? this.config.list.control.value : [] ) : this.config.list.control.value;\n\n    if( this.config.list.all ){\n      if( typeof this.config.list.allValue !== 'undefined' ){\n        body[ this.config.patch.field ] = this.config.list.allValue;\n      }else if( this.config.list.patchGroupFk ){\n        body[ this.config.patch.field ] = [];\n        this.config.list.groups.map( ( group: SelectFilterGroupInterface ) => {\n          body[ this.config.patch.field ].push( `0:${group.groupFk}` );\n        } );\n      }else{\n        body[ this.config.patch.field ] = value;\n      }\n    }else{\n      if( !this.config.list.selectedOptions.length && typeof this.config.list.emptyValue !== 'undefined' ){\n        body[ this.config.patch.field ] = this.config.list.emptyValue;\n      }else if( this.config.list.patchGroupFk ){\n        body[ this.config.patch.field ] = [];\n        this.config.list.groups.map( ( group: SelectFilterGroupInterface ) => {\n          if( group.all ){\n            body[ this.config.patch.field ].push( `0:${group.groupFk}` );\n          }else{\n            group.options.values.filter( ( option ) => {\n              return option.selected;\n            } ).map( ( option ) => {\n              body[ this.config.patch.field ].push( `${option.value}:${group.groupFk}` );\n            } );\n          }\n        } );\n      }else{\n        body[ this.config.patch.field ] = value;\n      }\n    }\n    if( IsArray( body[ this.config.patch.field ], true ) ){\n      body[ this.config.patch.field ] = ArrayOnlyUnique( body[ this.config.patch.field ] );\n      body[ this.config.patch.field ].sort( function( a, b ){\n        return a - b;\n      } );\n    }\n\n    if( this.config.patch.metadata ){\n      for( const i in this.config.patch.metadata ){\n        if( !this.config.patch.metadata.hasOwnProperty( i ) ) continue;\n        body[ i ] = this.config.patch.metadata[ i ];\n      }\n    }\n    if( this.config.patch.json ) body[ this.config.patch.field ] = JSON.stringify( body[ this.config.patch.field ] );\n\n    return body;\n  }\n\n\n\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n}\n","import { Component, EventEmitter, Input, OnDestroy, OnInit, Output } from '@angular/core';\nimport { ButtonConfig } from './button-config.model';\nimport { PopBaseEventInterface } from '../../../../pop-common.model';\n\n\n@Component({\n  selector: 'lib-pop-button',\n  templateUrl: './pop-button.component.html',\n  styleUrls: [ './pop-button.component.scss' ],\n})\nexport class PopButtonComponent implements OnInit, OnDestroy {\n  @Input() config: ButtonConfig = new ButtonConfig();\n  @Output() events: EventEmitter<PopBaseEventInterface> = new EventEmitter();\n\n  public name ='PopButtonComponent';\n\n\n  ngOnInit(){\n  }\n\n\n  onClick(event){\n    this.emitInputEvent(this.config.event);\n  }\n\n\n  emitInputEvent(name, message: string = null): void{\n    if( this.config.bubble ) this.events.emit({ source: this.name, type: 'field', name: name, config: this.config, message: message });\n  }\n\n\n  ngOnDestroy(){\n  }\n}\n","import { ChangeDetectorRef, Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { PopFieldItemComponent } from '../pop-field-item.component';\nimport { MinMaxConfig } from './min-max.models';\nimport { PopBaseEventInterface } from '../../../../pop-common.model';\nimport { IsObjectThrowError } from '../../../../pop-common-utility';\n\n\n@Component({\n  selector: 'lib-pop-min-max',\n  templateUrl: './pop-min-max.component.html',\n  styleUrls: [ './pop-min-max.component.scss' ]\n})\nexport class PopMinMaxComponent extends PopFieldItemComponent implements OnInit, OnDestroy {\n  @Input() config: MinMaxConfig;\n\n  public name = 'PopMinMaxComponent';\n\n\n  constructor(\n    public el: ElementRef,\n    protected cdr: ChangeDetectorRef\n  ){\n    super();\n\n    this.asset.delay = 250;\n\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        this.config = IsObjectThrowError(this.config, true, `${this.name}:configure: - this.config`) ? this.config : null;\n\n        this.config.triggerOnChange = (value: string | number | null) => {\n          this._setControlValue();\n          this.cdr.detectChanges();\n          this.onChange(value, true);\n        };\n\n        resolve(true);\n      });\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  onIsMaxEvent(event: PopBaseEventInterface){\n    if( this._isFieldChange(event) ){\n      this.config.maxConfig.control.setValue(( event.config.control.value ? ( +this.config.control.value[this.config.minColumn] ? +this.config.control.value[this.config.minColumn] : +this.config.maxDefaultValue ) : null ));\n      this._triggerMaxChange();\n    }\n  }\n\n\n  onIsMinEvent(event: PopBaseEventInterface){\n    if( this._isFieldChange(event) ){\n      console.log('onIsMinEvent', event.config.control.value);\n      this.config.minConfig.control.setValue(( event.config.control.value ? +this.config.minDefaultValue : null ));\n    }\n  }\n\n\n  onMinEvent(event: PopBaseEventInterface){\n    // console.log('onMinEvent', event);\n    if( this._isFieldChange(event) ){\n      this._triggerMinChange();\n    }\n  }\n\n\n  onMaxEvent(event: PopBaseEventInterface){\n    // console.log('onMaxEvent', event);\n    if( this._isFieldChange(event) ){\n      this._triggerMaxChange();\n    }\n  }\n\n\n  onDecrementMin(){\n    const control = this.config.minConfig.control;\n    const newVal = +this.config.minConfig.control.value - 1;\n    if( ( newVal ) >= 1 ){\n      control.setValue(newVal);\n      this._triggerMinChange();\n    }\n  }\n\n\n  onIncrementMin(){\n    const control = this.config.minConfig.control;\n    const newVal = +this.config.minConfig.control.value + 1;\n    const maxVal = +this.config.maxConfig.control.value;\n    if( ( newVal ) <= maxVal ){\n      control.setValue(newVal);\n      this.dom.setTimeout('on-change', () => {\n        this._clearMessage();\n        this._setControlValue();\n        this.onChange(undefined, true);\n      }, this.asset.delay);\n    }\n  }\n\n\n  onDecrementMax(){\n    const control = this.config.maxConfig.control;\n    const newVal = +this.config.maxConfig.control.value - 1;\n    if( ( newVal ) >= 1 ){\n      control.setValue(newVal);\n      this._triggerMaxChange();\n    }\n  }\n\n\n  onIncrementMax(){\n    const control = this.config.maxConfig.control;\n    const newVal = +this.config.maxConfig.control.value + 1;\n    if( ( newVal ) <= this.config.limit ){\n      control.setValue(newVal);\n      this._triggerMaxChange();\n    }\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  private _triggerMinChange(){\n    this.dom.setTimeout('on-change', () => {\n      this._clearMessage();\n      this._setControlValue();\n      this.onChange(undefined, true);\n    }, this.asset.delay);\n  }\n\n\n  private _triggerMaxChange(){\n    this.dom.setTimeout('on-change', () => {\n      this._clearMessage();\n      this._updateMinOptions();\n      this._setControlValue();\n      this.onChange(undefined, true);\n    }, this.asset.delay);\n  }\n\n\n  private _updateMinOptions(){\n    // let minLimit = this.config.maxConfig.control.value;\n    // const minOptions = [];\n    // while( minLimit ){\n    //   minOptions.push({ value: minLimit, name: minLimit, sort: minLimit });\n    //   minLimit--;\n    // }\n    // this.config.minConfig.options = minOptions;\n  }\n\n\n  private _setControlValue(){\n    const maxValue = this.config.maxConfig.control.value;\n    let minValue = this.config.minConfig.control.value;\n    if( !this.config.allowNegative && minValue < 0 ){\n      minValue = 0;\n      this.config.minConfig.control.setValue(minValue);\n    }\n    if( maxValue && +minValue > +maxValue ){\n      minValue = maxValue;\n      this.config.minConfig.control.setValue(minValue);\n    }\n\n    const value = {};\n    value[ this.config.minColumn ] = ( minValue ? +minValue : minValue );\n    value[ this.config.maxColumn ] = ( maxValue ? +maxValue : maxValue );\n    this.config.control.value = value;\n  }\n}\n","import { FormControl, Validators } from '@angular/forms';\nimport { FieldItemOption, FieldItemPatchInterface } from '../../../../pop-common.model';\nimport { SetControl } from '../../../../pop-common-dom.models';\n\n\nexport interface SliderConfigInterface {\n  autoTicks?: false;\n  bubble?: boolean;               // fire events\n  column?: string;              // the entityId field name\n  control?: FormControl;          // The form control. If not passed one will be created.\n  disabled?: boolean;             // Mark as readonly.\n  displayErrors?: boolean;        // If Error messages should be displayed.\n  facade: boolean;\n  helpText?: string;            // On hover helper text.\n  id?: number | string;           // A number that will be included in the events so you know which field it came from.\n  label?: string;                 // Input label.\n  max?: number;\n  min?: number;\n  metadata?: object;              // Array of objects. To be passed back on the event emitter and included in a patch if desired.\n  noInitialValue?:boolean;                                // Set to true to always have an empty value on load\n  patch?: FieldItemPatchInterface;         // If field should be auto-patched.\n  session?: boolean;                // If field value change should be stored to core entity\n  sessionPath?: string;                // If session path if not stored on root entity\n  showTicks?: true;\n  step?: number;                 //  Set to true if you want options to be sorted in priority of sort_order, name\n  thumbLabel?: true;\n  tickInterval?: number;\n  validators?: Array<Validators>; // Array of Validators.\n  value?: boolean | number | string;   // Initial value.\n}\n\n\nexport class SliderConfig implements SetControl {\n\n  autoTicks = false;\n  bubble = false;\n  column = 'column';\n  control: FormControl;\n  displayErrors = true;\n  disabled = false;\n  facade = false;\n  helpText = '';\n  id;\n  label = '';\n  message = '';\n  max = 100;\n  min = 1;\n  metadata;\n  noInitialValue = false;\n  options: FieldItemOption[] = [];\n  patch: FieldItemPatchInterface;\n  session?: boolean;\n  sessionPath?: string;\n  step = 1;\n  showTooltip = false;\n  showTicks = true;\n  thumbLabel = true;\n  tickInterval = 1;\n  tooltip = '';\n  validators;\n  value: boolean | number | string = null;\n\n\n  constructor(params?: SliderConfigInterface){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n    if( !this.patch ) this.patch = { field: '', duration: 750, path: '', disabled: false, businessId: 0 };\n    if( this.patch.displayIndicator !== false ) this.patch.displayIndicator = true;\n    if( this.min > this.max ){\n      this.min = this.max;\n    }\n    if( this.noInitialValue ) this.value = '';\n    if( !this.control ) this.setControl();\n  }\n\n\n  setControl(){\n    this.control = ( this.disabled ? new FormControl({\n      value: this.value,\n      disabled: true\n    }) : new FormControl(this.value, ( this.validators ? this.validators : [] )) );\n  }\n}\n","import { Component, EventEmitter, Input, OnDestroy, OnInit, Output } from '@angular/core';\nimport { PopFieldItemComponent } from '../pop-field-item.component';\nimport { FormControl } from '@angular/forms';\nimport { SliderConfig } from './pop-slider.model';\nimport { PopBaseEventInterface } from '../../../../pop-common.model';\n\n\n@Component({\n  selector: 'lib-pop-slider',\n  templateUrl: './pop-slider.component.html',\n  styleUrls: [ './pop-slider.component.scss' ]\n})\nexport class PopSliderComponent extends PopFieldItemComponent implements OnInit, OnDestroy {\n  @Input() config: SliderConfig = new SliderConfig();\n  @Output() events: EventEmitter<PopBaseEventInterface> = new EventEmitter<PopBaseEventInterface>();\n  public name = 'PopSliderComponent';\n\n\n  constructor(){\n    super();\n    this.dom.state.helper = false;\n    this.dom.state.tooltip = false;\n  }\n\n\n  ngOnInit(): void{\n    super.ngOnInit();\n  }\n\n\n  /**\n   * On Change event\n   * @param value\n   * @param force\n   */\n  onChange(value?: any, force = false){\n    const control = <FormControl>this.config.control;\n    if( typeof value !== 'undefined' ){\n      control.setValue(value);\n      control.markAsDirty();\n      control.updateValueAndValidity();\n    }\n    if( this._isChangeValid() ){\n      value = typeof value !== 'undefined' ? value : this.config.control.value;\n      value = this._applyTransformation(value);\n      if( this.config.patch && this.config.patch && ( this.config.patch.path || this.config.facade ) ){\n        this._onPatch(value, false);\n      }else{\n        this.onBubbleEvent('onChange');\n      }\n    }\n  }\n\n  getSliderTickInterval(): number | 'auto'{\n    if( this.config.showTicks ){\n      return this.config.autoTicks ? 'auto' : this.config.tickInterval;\n    }\n\n    return 0;\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n}\n","import { ChangeDetectorRef, Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { PatternValidation, ValidationErrorMessages } from '../../../../services/pop-validators';\nimport { PopFieldItemComponent } from '../pop-field-item.component';\nimport { NumberConfig } from './number-config.model';\nimport { FieldItemPatchInterface } from '../../../../pop-common.model';\nimport { FormControl } from '@angular/forms';\n\n\n@Component({\n  selector: 'lib-pop-number',\n  templateUrl: './pop-number.component.html',\n  styleUrls: [ './pop-number.component.scss' ]\n})\nexport class PopNumberComponent extends PopFieldItemComponent implements OnInit, OnDestroy {\n  @Input() config: NumberConfig = new NumberConfig();\n  public name = 'PopNumberComponent';\n\n\n  constructor(\n    public el: ElementRef,\n    protected cdr: ChangeDetectorRef,\n  ){\n    super();\n\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n\n        this.config.triggerOnChange = (value: string | number | null, forcePatch = false) => {\n          this.cdr.detectChanges();\n          this.onChange(value, forcePatch);\n        };\n\n        this.config.triggerDirectPatch = (value: string | number | null) => {\n          this._onPatch(value, true);\n        };\n\n        return resolve(true);\n      });\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * Test\n   * @param event\n   */\n  onKeyUp(event): void{\n    if( event.code === 'Enter' ){\n      if( this.config.control.invalid ){\n        if( this.config.displayErrors ) this._setMessage(ValidationErrorMessages(this.config.control.errors));\n      }else{\n        if( this.config.patch && ( this.config.patch.path || this.config.facade ) ){\n          if( this.config.control.value !== this.asset.storedValue ){\n            if( this._isFieldPatchable() ){\n              this.onChange();\n            }\n          }\n        }\n      }\n    }else{\n      this.onBubbleEvent('onKeyUp');\n    }\n  }\n\n\n  /**\n   * Hook that is called right before a patch\n   */\n  protected _beforePatch(): Promise<boolean>{\n    return new Promise((resolve) => {\n      const patch = <FieldItemPatchInterface>this.config.patch;\n      const control = <FormControl>this.config.control;\n\n      this._checkValue();\n\n\n      control.disable();\n      patch.running = true;\n\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  private _checkValue(){\n    const control = <FormControl>this.config.control;\n    if( control.value > this.config.max ){\n      control.setValue(this.config.max, { emitEvent: false });\n    }else if( control.value < this.config.min ){\n      control.setValue(this.config.min, { emitEvent: false });\n    }\n  }\n\n}\n","import { Component, Input, OnInit } from '@angular/core';\n\n\n@Component({\n  selector: 'lib-pop-field-item-loader',\n  template: `\n    <mat-progress-bar\n      class=\"pop-field-item-loader\"\n      *ngIf=\"show\"\n      [style.height.px]=\"1\"\n      [mode]=\"'query'\"\n    >\n    </mat-progress-bar>\n  `,\n  styles: [ ':host { position: absolute; bottom:0; left: 0; right: 0 }' ]\n})\nexport class PopFieldItemLoaderComponent implements OnInit {\n  @Input() show = false;\n\n\n  ngOnInit(){\n  }\n\n}\n","import { Component, HostBinding, Input, OnInit } from '@angular/core';\n\n\n@Component({\n  selector: 'lib-pop-field-item-helper',\n  template: `\n    <span class=\"pop-field-item-help-text material-icons sw-pointer\"\n          *ngIf=\"!hidden && helpText\"\n          (mouseenter)=\"helper = true\"\n          (mouseleave)=\"helper = false\"\n          matTooltip=\"{{helpText}}\"\n          matTooltipPosition=\"above\">help_outline\n    </span>\n  `,\n  styles: [ `\n    .pop-field-item-help-text {\n      position: relative;\n      font-size: 1.5em;\n      color: var(--text-disabled);\n      z-index: 2;\n    }` ]\n})\nexport class PopFieldItemHelperComponent implements OnInit {\n  @Input() helpText;\n  @HostBinding('class.sw-hidden') @Input() hidden = false;\n  helper;\n\n\n  constructor(){\n    if( !this.helpText ) this.helpText = '';\n  }\n\n\n  ngOnInit(){\n  }\n\n}\n","import { Component, HostBinding, Input, OnInit } from '@angular/core';\n\n\n@Component({\n  selector: 'lib-pop-field-item-error',\n  template: `\n    <div class=\"sw-pointer pop-field-item-error\"\n         *ngIf=\"!hidden && message\"\n         matTooltipPosition=\"left\"\n         [matTooltip]=message>\n      <mat-icon color=\"warn\">error</mat-icon>\n    </div>\n  `,\n  styles: [ `.pop-field-item-error {\n    width: 20px;\n    height: 20px;\n    font-size: 1.1em;\n    z-index: 2;\n  }` ]\n})\nexport class PopFieldItemErrorComponent implements OnInit {\n  @Input() message: string;\n  @HostBinding('class.sw-hidden') @Input() hidden = false;\n  helper;\n\n\n  constructor(){\n    if( !this.message ) this.message = '';\n  }\n\n\n  ngOnInit(){\n  }\n\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { PopExtendComponent } from '../../../../pop-extend.component';\nimport { TextConfig } from './text-config.model';\n\n@Component({\n  selector: 'lib-pop-text',\n  templateUrl: './pop-text.component.html',\n  styleUrls: ['./pop-text.component.scss']\n})\nexport class PopTextComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() config: TextConfig;\n  public name = 'PopTextComponent';\n\n\n  constructor(\n    public el: ElementRef,\n  ){\n    super();\n\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { DateAdapter } from '@angular/material/core';\nimport { MatDateRangePicker, MatCalendar } from '@angular/material/datepicker';\nimport { PopFieldItemComponent } from '../../../../pop-field-item.component';\n\nconst datePresets = [\n  'Today',\n  'So Far This Week',\n  'This Week',\n  'Last Week',\n  'Previous Week',\n  'Rest of This Week',\n  'Next Week',\n  'This Month',\n  'Last Month',\n  'Next Month'\n] as const;\n\ntype DatePreset = typeof  datePresets[number];\n\n@Component({\n  selector: 'lib-date-range-panel',\n  templateUrl: 'date-range-panel.component.html',\n  styleUrls: ['date-range-panel.component.scss'],\n  // changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class DateRangePanelComponent<D> {\n  readonly presets = datePresets;\n\n  selected: DatePreset | '' = '';\n\n  constructor(\n    private dateAdapter: DateAdapter<D>,\n    private datePicker: MatDateRangePicker<D>,\n    private calendar: MatCalendar<D>,\n  ){\n\n\n  }\n\n  /**\n   * Apply the preset to Datepicker and Calendar\n   * @param datePreset: Example: This week\n   */\n\n  selectDatePreset(datePreset: DatePreset): void{\n    this.selected = datePreset;\n    const [start, end] = this.calculateDateRange(datePreset);\n\n\n    // @ts-ignore\n    // if only start is selected we need to set end to clear out start and end.\n    if((this.selected.start !== undefined && !this.calendar.selected.end) || (this.calendar.selected.start &&  !this.calendar.selected.end)){\n      this.datePicker.select(start);\n    }\n\n    this.datePicker.select(start);\n    this.datePicker.select(end);\n\n    this.calendar.activeDate = end;\n  }\n\n\n  /**\n   * Fix calulations to make monday first day of week instead of sunday\n   * @param today\n   * @private\n   */\n\n  private adjDayOfWeekToStartOnMonday(today:D):number{\n    let dayOfWeek = this.dateAdapter.getDayOfWeek(today);\n    dayOfWeek = dayOfWeek === 0 ? 6 : (dayOfWeek -1);\n    return dayOfWeek;\n  }\n\n  /**\n   * Calculate date range preset\n   * @param datePreset: Example: This week.\n   */\n\n  private calculateDateRange(datePreset: DatePreset): any{\n    const today = this.today;\n\n    switch(datePreset){\n      case 'Today':\n        return [today,today];\n      case 'So Far This Week':{\n         const dayOfWeek = this.adjDayOfWeekToStartOnMonday(today);\n         const start = this.dateAdapter.addCalendarDays(today, -(dayOfWeek));\n         return [start, today];\n      }\n      case 'This Week': return this.calculateWeek(today);\n      case 'Last Week': return this.calculateWeek(this.dateAdapter.addCalendarDays(today, -7));\n      case 'Previous Week': return this.calculateWeek(this.dateAdapter.addCalendarDays(today, -14));\n      case 'Rest of This Week': {\n        const dayOfWeek = this.adjDayOfWeekToStartOnMonday(today);\n        const end = this.dateAdapter.addCalendarDays(today, (6 - dayOfWeek));\n        return [today, end];\n      }\n      case 'Next Week':{\n        const dayOfWeek = this.adjDayOfWeekToStartOnMonday(today);\n        const start = this.dateAdapter.addCalendarDays(today, (7 - dayOfWeek));\n        return this.calculateWeek(start);\n      }\n      case 'This Month': return this.calculateMonth(today);\n      case 'Last Month': {\n        const thisDayLastMonth = this.dateAdapter.addCalendarMonths(today, -1);\n        return this.calculateMonth(thisDayLastMonth);\n      }\n      case 'Next Month': {\n        const thisDayLastMonth = this.dateAdapter.addCalendarMonths(today, 1);\n        return this.calculateMonth(thisDayLastMonth);\n      }\n    }\n  }\n\n\n  /**\n   * calculate start and end for week\n   * @param forDay\n   * @private\n   */\n\n  private calculateWeek(forDay: D): any {\n    const deltaStart =\n      this.dateAdapter.getFirstDayOfWeek() -\n      this.dateAdapter.getDayOfWeek(forDay);\n    const start = this.dateAdapter.addCalendarDays(forDay, deltaStart);\n    const end = this.dateAdapter.addCalendarDays(start, 6);\n    return [start, end];\n  }\n\n\n  /**\n   * Calculate start and end for month\n   * @param forDay\n   * @private\n   */\n\n  private calculateMonth(forDay: D): any {\n    const year = this.dateAdapter.getYear(forDay);\n    const month = this.dateAdapter.getMonth(forDay);\n    const start = this.dateAdapter.createDate(year, month, 1);\n    const end = this.dateAdapter.addCalendarDays(\n      start,\n      this.dateAdapter.getNumDaysInMonth(forDay) - 1\n    );\n    return [start, end];\n  }\n\n  /**\n   * Get Today\n   * @private\n   */\n\n  private get today(): D {\n    const today = this.dateAdapter.today();\n\n    if (today === null) {\n      throw new Error('date creation failed');\n    }\n    return today;\n  }\n\n\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { DatePickerConfig } from './datepicker-config.model';\nimport { PopFieldItemComponent } from '../pop-field-item.component';\nimport { FormControl } from '@angular/forms';\nimport { IsObject, IsUndefined } from '../../../../pop-common-utility';\nimport { PopDate } from '../../../../pop-common.model';\n\n\n@Component( {\n  selector: 'lib-pop-datepicker',\n  templateUrl: './pop-datepicker.component.html',\n  styleUrls: [ './pop-datepicker.component.scss' ]\n} )\nexport class PopDatePickerComponent extends PopFieldItemComponent implements OnInit, OnDestroy {\n  @Input() config: DatePickerConfig = new DatePickerConfig();\n  public name = 'PopDateComponent';\n\n\n  constructor(\n    public el: ElementRef,\n  ){\n    super();\n\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n\n        this.config.max = null;\n\n        this.config.triggerOnChange = ( value: string | number | null, forcePatch = false ) => {\n          this.dom.setTimeout( `config-trigger-change`, () => {\n            // this.cdr.detectChanges();\n            this.onChange( value, forcePatch );\n          }, 0 );\n        };\n\n\n        this.config.clearMessage = () => {\n          this.dom.setTimeout( `config-clear-message`, () => {\n            this.config.message = '';\n            this.config.control.markAsPristine();\n            this.config.control.markAsUntouched();\n            // this.cdr.detectChanges();\n          }, 0 );\n        };\n\n        // this.config.helpText = 'sdfsdafsadf';\n\n        this._setFilter();\n\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * On Change event\n   * @param value\n   * @param force\n   */\n  onChange( value?: any, force = false ){\n    if( value ){\n      value = PopDate.toIso( value );\n    }else{\n      value = null;\n    }\n    if( IsObject( this.config, [ 'control' ] ) ){\n      this.log.info( `onChange`, value )\n      const control = <FormControl>this.config.control;\n      if( typeof value !== 'undefined' ){\n        control.setValue( value );\n        control.markAsDirty();\n        control.updateValueAndValidity();\n      }\n      if( this._isChangeValid() ){\n        value = typeof value !== 'undefined' ? value : this.config.control.value;\n        value = this._applyTransformation( value );\n        if( this.config.patch && ( this.config.patch.path || this.config.facade ) ){\n          this._onPatch( value, force );\n        }else{\n          this.onBubbleEvent( 'onChange' );\n        }\n      }else{\n        // console.log( 'invalid change', this.config.control.value );\n      }\n    }\n  }\n\n\n  onResetForm(): void{\n    this.dom.setTimeout( `reset-form`, () => {\n      this.config.control.setValue( null, { emitEvent: true } );\n      this.config.control.updateValueAndValidity();\n      this.onChange();\n    }, 0 );\n\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  protected _setFilter(): void{\n    if( typeof this.config.filterPredicate === 'string' ){\n      switch( String( this.config.filterPredicate ).toLowerCase() ){\n        case 'weekday':\n          this.config.filterPredicate = ( d: Date ): boolean => {\n            const day = d.getDay();\n            // Prevent Saturday and Sunday from being selected.\n            return day !== 0 && day !== 6;\n          };\n          break;\n        case 'weekday':\n          this.config.filterPredicate = ( d: Date ): boolean => {\n            const day = d.getDay();\n            // Prevent Saturday and Sunday from being selected.\n            return day >= 1 && day <= 5;\n          };\n          break;\n        case 'monday':\n          this.config.filterPredicate = ( d: Date ): boolean => {\n            const day = d.getDay();\n            // monday\n            return day === 1;\n          };\n          break;\n        default:\n          this.config.filterPredicate = null;\n          break;\n      }\n    }\n  }\n\n}\n","// Angular\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { IConfig, NgxMaskModule } from 'ngx-mask';\n\n\n// Pop Common\nimport { MaterialModule } from '../../material/material.module';\nimport { PopIndicatorsModule } from '../pop-indicators/pop-indicators.module';\nimport { PopInputComponent } from './pop-input/pop-input.component';\nimport { PopSelectComponent } from './pop-select/pop-select.component';\nimport { PopSelectMultiComponent } from './pop-select-multi/pop-select-multi.component';\nimport { PopCheckboxComponent } from './pop-checkbox/pop-checkbox.component';\nimport { PopRadioComponent } from './pop-radio/pop-radio.component';\nimport { PopSwitchComponent } from './pop-switch/pop-switch.component';\nimport { PopTextareaComponent } from './pop-textarea/pop-textarea.component';\nimport { PopLabelComponent } from './pop-label/pop-label.component';\nimport { PopSelectFilterComponent } from './pop-select-filter/pop-select-filter.component';\nimport { ClickOutsideDirective } from './click-outside-directive';\nimport { PopDateComponent } from './pop-date/pop-date.component';\nimport { PopDateRangeComponent } from './pop-date/pop-date-range/pop-date-range.component';\nimport { DateRangeExpansionItemsComponent } from './pop-date/pop-date-range/expansion-items/date-range-expansion-items.component';\nimport { ExpansionItemsComponent } from './pop-date/datepicker-expansion-items/expansion-items.component';\nimport { CustomPanelComponent } from './pop-date/datepicker-expansion-items/custom-panel/custom-panel.component';\nimport { PopTimeComponent } from './pop-time/pop-time.component';\nimport { PopSelectListComponent } from './pop-select-list/pop-select-list.component';\nimport { PopSelectModalComponent } from './pop-select-modal/pop-select-modal.component';\nimport { PopSelectModalDialogComponent } from './pop-select-modal/pop-select-modal-dialog/pop-select-modal-dialog.component';\nimport { PopButtonComponent } from './pop-button/pop-button.component';\nimport { PopFieldItemComponent } from './pop-field-item.component';\nimport { PopMinMaxComponent } from './pop-min-max/pop-min-max.component';\nimport { PopSliderComponent } from './pop-slider/pop-slider.component';\nimport { PopNumberComponent } from './pop-number/pop-number.component';\nimport { PopFieldItemLoaderComponent } from './asset/pop-field-item-loader.component';\nimport { PopFieldItemHelperComponent } from './asset/pop-field-item-helper.component';\nimport { PopFieldItemErrorComponent } from './asset/pop-field-item-error.component';\nimport { PopTextComponent } from './pop-text/pop-text.component';\nimport { DateRangePanelComponent } from './pop-date/pop-date-range/expansion-items/custom-panel/date-range-panel.component';\nimport { PopDatePickerComponent } from './pop-datepicker/pop-datepicker.component';\n\nconst options: Partial<IConfig> | ( () => Partial<IConfig> ) = undefined;\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    ReactiveFormsModule,\n    PopIndicatorsModule,\n    MaterialModule,\n    FormsModule,\n    NgxMaskModule.forRoot(options)\n  ],\n  declarations: [\n    PopFieldItemLoaderComponent,\n    PopFieldItemHelperComponent,\n    PopFieldItemErrorComponent,\n    PopFieldItemComponent,\n    PopButtonComponent,\n    PopInputComponent,\n    PopNumberComponent,\n    PopSelectComponent,\n    PopCheckboxComponent,\n    PopSelectMultiComponent,\n    PopSelectFilterComponent,\n    PopSelectListComponent,\n    PopSelectModalComponent,\n    PopSelectModalDialogComponent,\n    PopRadioComponent,\n    PopSwitchComponent,\n    PopTextareaComponent,\n    PopLabelComponent,\n    PopDateComponent,\n    PopDateRangeComponent,\n    DateRangeExpansionItemsComponent,\n    ExpansionItemsComponent,\n    CustomPanelComponent,\n    DateRangePanelComponent,\n    PopTimeComponent,\n    ClickOutsideDirective,\n    PopButtonComponent,\n    PopMinMaxComponent,\n    PopSliderComponent,\n    PopTextComponent,\n    PopDatePickerComponent\n  ],\n  exports: [\n    PopFieldItemLoaderComponent,\n    PopFieldItemHelperComponent,\n    PopFieldItemErrorComponent,\n    PopFieldItemComponent,\n    PopButtonComponent,\n    PopInputComponent,\n    PopNumberComponent,\n    PopSelectComponent,\n    PopSelectMultiComponent,\n    PopSelectFilterComponent,\n    PopSelectListComponent,\n    PopSelectModalComponent,\n    PopSelectModalDialogComponent,\n    PopCheckboxComponent,\n    PopRadioComponent,\n    PopSwitchComponent,\n    PopTextareaComponent,\n    PopDateComponent,\n    PopDateRangeComponent,\n    DateRangeExpansionItemsComponent,\n    ExpansionItemsComponent,\n    DateRangePanelComponent,\n    CustomPanelComponent,\n    PopTimeComponent,\n    PopLabelComponent,\n    PopButtonComponent,\n    PopMinMaxComponent,\n    PopSliderComponent,\n    PopTextComponent,\n    PopDatePickerComponent\n  ],\n  providers: [],\n\n})\nexport class PopFieldItemModule {\n}\n","import { Component, ElementRef, HostBinding, Inject, Input, OnDestroy, OnInit } from '@angular/core';\nimport { PopExtendComponent } from '../../../pop-extend.component';\nimport { AppGlobalInterface, EntityFilterInterface, PopBaseEventInterface, PopBusiness, ServiceInjector } from '../../../pop-common.model';\nimport { IsObject, SetSessionSiteVar } from '../../../pop-common-utility';\nimport { PopCacFilterBarService } from './pop-cac-filter.service';\nimport { CacFilterBarConfig } from './pop-cac-filter.model';\n\n\n@Component({\n  selector: 'lib-pop-cac-filter',\n  template: `\n    <div class=\"pop-client-filter-container\">\n      <lib-pop-cac-filter-view *ngIf=\"ui.config?.active\" (events)=\"onBubbleEvent($event)\"></lib-pop-cac-filter-view>\n    </div>\n  `,\n  styles: [ `\n    .pop-client-filter-container {\n      display: flex;\n      flex-direction: column;\n      width: 100%;\n      box-sizing: border-box;\n      /*align-items: center;*/\n      padding: 0;\n    }\n  ` ]\n})\nexport class PopCacFilterComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @HostBinding('class.sw-hidden') @Input() hidden = false;\n  @Input() config: CacFilterBarConfig;\n\n  public name = 'PopCacFilterComponent';\n  // this represents the data to be filtered and given to the filter bar view.\n\n  protected srv: {\n    filter: PopCacFilterBarService,\n  } = {\n    filter: ServiceInjector.get(PopCacFilterBarService),\n  };\n\n  protected asset = {\n    filter: undefined // the current filter applied to all columns, this is the (finished product) that we want to be stored in the base service\n  };\n\n  public ui = {\n    config: <CacFilterBarConfig>undefined,\n    entities: <EntityFilterInterface[]>[]\n  };\n\n\n  constructor(\n    public el: ElementRef,\n    @Inject( 'APP_GLOBAL' ) private APP_GLOBAL: AppGlobalInterface,\n  ){\n    super();\n\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        this.ui.config = this.srv.filter.getConfig();\n        if(!(IsObject(this.ui.config))) this.ui.config = <CacFilterBarConfig>{};\n        this.srv.filter.register(el);\n        if( IsObject(PopBusiness, [ 'id' ]) && this.APP_GLOBAL.isFilterBar() ){\n          if( this.ui.config.active ){\n            this.asset.filter = this.srv.filter.getFilter();\n            this.srv.filter.setActive(!this.hidden);\n          }\n        }else{\n          this.hidden = true;\n          this.ui.config.active = false;\n          // this.srv.filter.setFilter({});\n\n        }\n\n        return resolve(true);\n      });\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * Event Emitter\n   */\n  public onBubbleEvent(event: PopBaseEventInterface){\n    if( event.type === 'filter' ){\n      switch( event.name ){\n        case 'apply':\n          this.srv.filter.setFilter(event.data);\n          break;\n        case 'clear':\n          this.srv.filter.setFilter({});\n          break;\n        case 'state':\n          if( event.model === 'open' ){\n            SetSessionSiteVar(`Business.${PopBusiness.id}.Filter.open`, event.data);\n            this.dom.setTimeout(`set-filter-height`, () => {\n              const height = this.srv.filter.getElHeight();\n              if(height){\n                SetSessionSiteVar(`Business.${PopBusiness.id}.Filter.height`, height);\n              }\n\n            }, 0);\n          }\n          break;\n        default:\n          break;\n      }\n    }\n    this.srv.filter.onChange(event);\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { PopExtendComponent } from '../../../../pop-extend.component';\nimport { Subject } from 'rxjs';\nimport { PopPipeService } from '../../../../services/pop-pipe.service';\nimport { Dictionary, PopBusiness, ServiceInjector } from '../../../../pop-common.model';\nimport { ArrayMapSetter, GetSessionSiteVar, IsArray, IsObject, JsonCopy, ObjectContainsTagSearch } from '../../../../pop-common-utility';\nimport { fadeInOut, slideInOut } from '../../../../pop-common-animations.model';\nimport { PopCacFilterBarService } from '../pop-cac-filter.service';\nimport { CacFilterBarConfig, CacFilterBarEntityConfig } from '../pop-cac-filter.model';\n\n\n@Component({\n  selector: 'lib-pop-cac-filter-view',\n  templateUrl: './pop-cac-filter-view.component.html',\n  styleUrls: [ './pop-cac-filter-view.component.scss' ],\n  animations: [ slideInOut, fadeInOut ]\n})\nexport class PopCacFilterViewComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() channel: Subject<CacFilterBarEntityConfig[]>; // this is the channel of that the parent sends down the configuration\n\n  public name = 'PopCacFilterViewComponent';\n\n  public ui = {\n    config: <CacFilterBarConfig>undefined,\n    entities: <CacFilterBarEntityConfig[]>undefined,// the configuration used to build the configs for the selects, subject emit's it every time the filters need to be updated,\n    map: <Dictionary<any>>{}\n  };\n\n  protected asset = {\n\n    filter: undefined // the current filter applied to all columns, this is the (finished product) that we want to be stored in the base service\n  };\n\n  protected srv: {\n    filter: PopCacFilterBarService,\n    pipe: PopPipeService,\n  } = {\n    filter: ServiceInjector.get(PopCacFilterBarService),\n    pipe: ServiceInjector.get(PopPipeService),\n  };\n\n\n  constructor(\n    public el: ElementRef,\n  ){\n    super();\n\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        this.asset.filter = this.srv.filter.getFilter();\n        this.ui.entities = this.srv.filter.getEntities();\n        this.ui.map.entities = ArrayMapSetter(this.ui.entities, 'internal_name');\n\n        this.ui.config = this.srv.filter.getConfig();\n        this._setDefaultState();\n        this._setEntityConfig();\n        this.dom.setSubscriber(`data-reset`, this.srv.filter.event.data.subscribe((caller: string) => {\n          this.dom.setTimeout(`data-reset`, () => {\n            if( IsArray(this.ui.entities, true) ){\n              const first = this.ui.entities[ 0 ];\n              first.options.map((option) => {\n                first.display[ option.id ] = true;\n              });\n              this._checkVisibleForAll(first);\n              this._updateEntitySelectedText(first);\n              this._onEntityFeedUpdate(first);\n            }\n            this.ui.entities.map((entity, index) => {\n              entity.totalOptions = entity.options.length;\n              entity.filter = Object.keys(entity.selected).filter((id) => entity.selected[ id ]);\n              entity.totalSelected = entity.filter.length;\n            });\n            this.onUpdateOptionsDisplay(0);\n          }, 0);\n        }));\n        this.dom.setTimeout('init', () => {\n          this.events.emit({ source: this.name, type: 'filter', name: 'init', data: this.asset.filter });\n        });\n        return resolve(true);\n      });\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * Trigger an entity column to apply search\n   * @param entity\n   */\n  onApplySearch(entity: CacFilterBarEntityConfig){\n    if( this.dom.state.searchDelay ) clearTimeout(this.dom.state.searchDelay);\n    this.dom.setTimeout(`search-delay`, () => {\n      entity.options.map((option) => {\n        entity.hidden[ option.id ] = ObjectContainsTagSearch(option, entity.search) ? false : true;\n      });\n      this._onEntityFeedUpdate(entity);\n      this._checkVisibleForAll(entity);\n    }, 200);\n  }\n\n\n  /**\n   * Checks/Unchecks all the options within an entity column\n   * @param entity\n   */\n  onCheckAll(entity: CacFilterBarEntityConfig){\n    if( IsObject(entity, true) && !entity.single ){\n      entity.options.filter((option) => !entity.hidden[ option.id ]).map((option) => {\n        entity.selected[ option.id ] = +entity.display[ option.id ] ? entity.checkAll : false;\n      });\n      entity.filter = Object.keys(entity.selected).filter((id) => entity.selected[ id ]);\n      entity.totalSelected = entity.filter.length;\n      entity.allSelected = entity.totalSelected === entity.totalAvailable;\n      this._checkVisibleForAll(entity);\n      this._updateEntitySelectedText(entity);\n      this.onUpdateOptionsDisplay(this.ui.map.entities[ entity.internal_name ]);\n      this.dom.state.filterNeedsApplied = true;\n    }\n  }\n\n\n  /**\n   * Handle when an option selection has changed\n   * Detects progmatic changes\n   * @param entity\n   */\n  onCheckboxChange(event, entity, id: number){\n    event.preventDefault();\n    entity.selected[ id ] = !entity.selected[ id ];\n    this.dom.setTimeout(`update-${entity.internal_name}-column`, () => {\n      entity.filter = Object.keys(entity.selected).filter((key) => entity.selected[ key ]);\n      entity.totalSelected = entity.filter.length;\n      entity.allSelected = entity.totalSelected === entity.totalAvailable;\n      this._checkVisibleForAll(entity);\n      this._updateEntitySelectedText(entity);\n      this.onUpdateOptionsDisplay(this.ui.map.entities[ entity.internal_name ]);\n      this.dom.state.filterNeedsApplied = true;\n    }, 100);\n  }\n\n\n  /**\n   * Handle when an option selection has changed\n   * Detects manual changes\n   * @param entity\n   */\n  onRadioChange(event, entity, id){\n    event.preventDefault();\n    if( entity.single ){\n      entity.checkAll = false;\n\n      entity.allSelected = false;\n      entity.indeterminate = false;\n      entity.filter = [ String(id) ];\n      entity.totalSelected = entity.filter.length;\n      entity.options.map((option) => {\n        if( +option.id !== +id ){\n          entity.selected[ option.id ] = false;\n        }else{\n          entity.selected[ option.id ] = true;\n          entity.selectedText = option.name;\n        }\n      });\n      this.onUpdateOptionsDisplay(this.ui.map.entities[ entity.internal_name ]);\n      this.dom.state.filterNeedsApplied = true;\n    }\n  }\n\n\n  /**\n   * The menu bar has been opened or closed\n   * @param entity\n   */\n  onToggleOpen(entity: string = null){\n\n    this.dom.state.open = !this.dom.state.open;\n    if( this.dom.state.open && entity ){\n      setTimeout(() => {\n        this.el.nativeElement.querySelector(`#${entity}-search-input`).focus();\n      });\n    }\n    this.events.emit({ source: this.name, type: 'filter', name: 'state', model: 'open', data: this.dom.state.open });\n  }\n\n\n  /**\n   * Event handler for the click of the reset button\n   * @returns void\n   */\n  resetFilter(): void{\n    this.asset.filter = {};\n    this.ui.entities.map((entity, index) => {\n      if( entity.single ){\n        this._setSingleEntityConfig(entity, index);\n      }else{\n        this._setMultipleEntityConfig(entity, index);\n      }\n    });\n    this.asset.filter = this._getCurrentFilter();\n    this.dom.state.filterNeedsApplied = false;\n    this.dom.state.currentFilterRelevant = false;\n\n    this.events.emit({ source: this.name, type: 'filter', name: 'clear', data: this.asset.filter });\n  }\n\n\n  /**\n   * Emits the apply filter event, called\n   * when the apply filter button is clicked.\n   * @returns void\n   */\n  applyFilter(): void{\n    if( !this.ui.config.invalid ){\n      this.asset.filter = this._getCurrentFilter();\n      this.dom.state.currentFilterRelevant = this._isCurrentFilterRelevant();\n      this.dom.state.filterNeedsApplied = false;\n      this.events.emit({ source: this.name, type: 'filter', name: 'apply', data: this.asset.filter });\n      // close on apply ?\n      if( this.ui.config.display !== 'static' ){\n        this.dom.state.open = false;\n        this.events.emit({ source: this.name, type: 'filter', name: 'state', model: 'open', data: this.dom.state.open });\n      }\n\n    }\n  }\n\n\n  trackByFn(index, item){\n    if( !item ) return null;\n    return item.id;\n  }\n\n\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  /**\n   * Determne if all the visible options are either all checked or unchecked\n   * @param entity\n   * @private\n   */\n  private _checkForIndeterminate(entity: CacFilterBarEntityConfig): void{\n    const selectedVisible = entity.options.filter((option) => !entity.hidden[ option.id ] && entity.display[ option.id ] && entity.selected[ option.id ]).length;\n    entity.indeterminate = selectedVisible && selectedVisible < entity.totalVisible ? true : false;\n  }\n\n\n  /**\n   * Trigger the column list to update with filtered options\n   * @param entity\n   */\n  private _onEntityFeedUpdate(entity: CacFilterBarEntityConfig){\n    const list = entity.options.filter(option => entity.display[ option.id ] && !entity.hidden[ option.id ]);\n    if( !entity.allSelected ){\n      list.sort((a, b) => {\n        if( entity.selected[ a.id ] && !entity.selected[ b.id ] ) return -1;\n        if( !entity.selected[ a.id ] && entity.selected[ b.id ] ) return 1;\n      });\n    }\n\n    entity.feed.next(list);\n  }\n\n\n  /**\n   * Updates the select configurations based on the filter bar configurations\n   * @returns void\n   */\n  private _setEntityConfig(): void{\n    this.dom.state.loading = true;\n    this.ui.entities.map((entity, index) => {\n\n      if( entity.single ){\n        this._setSingleEntityConfig(entity, index);\n      }else{\n        this._setMultipleEntityConfig(entity, index);\n      }\n      entity.totalAvailable = entity.options.length;\n      entity.totalOptions = entity.options.length;\n      entity.totalVisible = Object.keys(entity.display).filter((id) => entity.display[ id ] && !entity.hidden[ id ]).length;\n    });\n    this.dom.state.filterNeedsApplied = false;\n    this.dom.state.currentFilterRelevant = this._isCurrentFilterRelevant();\n    if( !this.dom.state.currentFilterRelevant ){\n      this.srv.filter.clearFilters();\n    }\n  }\n\n\n  /**\n   * Configure a radio enity config\n   * @param entity\n   * @param index\n   * @private\n   */\n  private _setSingleEntityConfig(entity: CacFilterBarEntityConfig, index: number){\n    let first = <any>entity.options[ 0 ];\n    entity.checkAll = false;\n    entity.indeterminate = false;\n    if( IsArray(this.asset.filter[ entity.internal_name ], true) ){\n      const asset = this.srv.filter.getAsset(entity.internal_name, +this.asset.filter[ entity.internal_name ][ 0 ]);\n      first = { id: this.asset.filter[ entity.internal_name ][ 0 ], name: IsObject(asset, [ 'name' ]) ? asset.name : 'Name' };\n    }\n    entity.filter = [ first.id ];\n    entity.selectedText = first.name;\n    entity.totalSelected = 1;\n\n    entity.hidden = {};\n\n    if( index === 0 ){\n      entity.options.map((option) => {\n        entity.display[ option.id ] = true;\n        entity.hidden[ option.id ] = false;\n        entity.selected[ option.id ] = false;\n      });\n      entity.selected[ first.id ] = true;\n    }else{\n      const prevIndex = +index - 1;\n      const prevEntity = this.ui.entities[ prevIndex ];\n      entity.options.map((option) => {\n        entity.display[ option.id ] = prevEntity.selected[ option.id ];\n        entity.hidden[ option.id ] = false;\n        entity.selected[ option.id ] = false;\n      });\n      entity.selected[ first.id ] = true;\n    }\n    this._onEntityFeedUpdate(entity);\n  }\n\n\n  /**\n   * Configure a multiple checkbox entity config\n   * @param entity\n   * @param index\n   * @private\n   */\n  private _setMultipleEntityConfig(entity: CacFilterBarEntityConfig, index: number){\n\n\n    const existingFilter = IsArray(this.asset.filter[ entity.internal_name ], true);\n    entity.filter = existingFilter ? JsonCopy(this.asset.filter[ entity.internal_name ]) : [];\n    // console.log('_setMultipleEntityConfig', entity.name, index, entity.filter.length);\n    if( entity.filter.length ){\n      entity.checkAll = false;\n      entity.indeterminate = true;\n    }else{\n      entity.checkAll = true;\n      entity.indeterminate = false;\n    }\n    entity.totalSelected = entity.checkAll ? entity.options.length : entity.filter.length;\n    if( index === 0 ){\n      entity.options.map((option) => {\n        entity.selected[ option.id ] = entity.checkAll ? true : entity.filter.includes(String(option.id));\n        entity.display[ option.id ] = true;\n        entity.hidden[ option.id ] = false;\n      });\n      entity.totalAvailable = entity.options.length;\n      entity.totalSelected = existingFilter ? entity.filter.length : entity.options.length;\n      entity.allSelected = entity.totalSelected === entity.totalAvailable;\n      this._checkVisibleForAll(entity);\n      this._updateEntitySelectedText(entity);\n    }else{\n      const prevIndex = +index - 1;\n      const prevEntity = this.ui.entities[ prevIndex ];\n      entity.options.map((option) => {\n        entity.selected[ option.id ] = entity.checkAll ? true : prevEntity.filter.includes(String(option[prevEntity.child_link]));\n        entity.display[ option.id ] = prevEntity.selected[ option[prevEntity.child_link]];\n        entity.hidden[ option.id ] = false;\n      });\n      entity.totalAvailable = entity.options.length;\n      entity.totalSelected = existingFilter ? entity.filter.length : entity.options.length;\n      entity.allSelected = entity.totalSelected === entity.totalAvailable;\n      this._checkVisibleForAll(entity);\n      this._updateEntitySelectedText(entity);\n    }\n    this._onEntityFeedUpdate(entity);\n  }\n\n\n  /**\n   * Cascade changes to all columns of the right of the column that made changes\n   * @param entityName\n   */\n  onUpdateOptionsDisplay(changedIndex){\n    this.dom.setTimeout(`options-update-${changedIndex}`, () => {\n      let invalid = false;\n      this.ui.entities.map((entity, index) => {\n\n        const inView = this.ui.config.view.includes(entity.internal_name);\n        if( !entity.totalSelected && inView ) invalid = true;\n        if( index > changedIndex ){\n          const prevIndex = +index - 1;\n          const prevEntity = this.ui.entities[ prevIndex ];\n          entity.options.map((option) => {\n            entity.display[ option.id ] = prevEntity.allSelected ? true : prevEntity.filter.includes(String(option[prevEntity.child_link]));\n            if( !entity.display[ option.id ] ){\n              entity.selected[ option.id ] = false;\n            }\n          });\n          this._onEntityFeedUpdate(entity);\n\n          if(!(inView)){\n            entity.options.filter((option) => !entity.hidden[ option.id ]).map((option) => {\n              entity.selected[ option.id ] = +entity.display[ option.id ] ? true : false;\n            });\n          }\n\n          entity.filter = Object.keys(entity.selected).filter((id) => entity.selected[ id ]);\n          entity.totalSelected = entity.filter.length;\n          if( !entity.totalSelected && this.ui.config.view.includes(entity.internal_name) ) invalid = true;\n          this._checkVisibleForAll(entity);\n          this._updateEntitySelectedText(entity);\n        }\n      });\n      this.ui.config.invalid = invalid;\n    }, 50);\n  }\n\n\n  private _setDefaultState(){\n    if( this.ui.config.display === 'static' ) this.dom.state.open = true;\n    this.dom.state = {\n      ...this.dom.state,\n      ...{\n        differentEntities: false,\n        searchDelay: undefined, // debounce for search inputs\n        loading: false,\n        open: false,\n        loaded: false,\n        currentFilterRelevant: false, // flags whether an any entityId filter is defined\n        filterNeedsApplied: false, // flags when user needs to apply changes to the filter\n      }\n    };\n\n    this.dom.state.open = IsObject(PopBusiness, [ 'id' ]) ? GetSessionSiteVar(`Business.${PopBusiness.id}.Filter.open`, false) : false;\n  }\n\n\n  /**\n   * Update the text appears in the header of each entity column\n   * @param entity\n   */\n  private _updateEntitySelectedText(entity: CacFilterBarEntityConfig){\n    entity.totalText = `${entity.totalAvailable} ${entity.name} available.`;\n    if( this.ui.map.entities[ entity.internal_name ] > 0 ){\n      const index = this.ui.map.entities[ entity.internal_name ];\n      let prevIndex = index - 1;\n      while( prevIndex > 0 ){\n        if( this.ui.entities[ prevIndex ].indeterminate ){\n          break;\n        }else{\n          prevIndex--;\n        }\n      }\n\n      if( entity.totalAvailable < entity.totalOptions ){\n        entity.totalText += `  ${entity.totalOptions - entity.totalAvailable} filtered out by ${this.ui.entities[ prevIndex ].name}.`;\n      }\n    }\n    entity.allSelected = entity.totalSelected === entity.totalAvailable;\n    if( entity.allSelected || !entity.totalSelected ){\n      entity.selectedText = entity.allSelected ? 'All' : 'None';\n    }else{\n      const selectedOptions = entity.options.filter((option) => {\n        return entity.display[ option.id ] && entity.selected[ option.id ];\n      }).map((option) => {\n        return option.name;\n      });\n      entity.selectedText = selectedOptions.length > 4 ? selectedOptions.slice(0, 4).join(', ') + `, ... ${selectedOptions.length - 4} more` : selectedOptions.join(', ');\n    }\n  }\n\n\n  /**\n   * Determine if all the visible options in an entity column have been selected\n   * @param entity\n   */\n  private _checkVisibleForAll(entity: CacFilterBarEntityConfig){\n    if( IsObject(entity, true) && !entity.single ){\n      let all = true;\n      const visible = Object.keys(entity.display).filter((id) => entity.display[ id ] && !entity.hidden[ id ]);\n      entity.totalVisible = visible.length;\n      if( visible.length ){\n        visible.some(id => {\n          if( !entity.selected[ id ] ){\n            all = false;\n            return true;\n          }\n        });\n      }else{\n        all = false;\n      }\n      entity.checkAll = all;\n      this._checkForIndeterminate(entity);\n\n    }\n  }\n\n\n  /**\n   * Create a payload for what the filter has generated\n   */\n  private _getCurrentFilter(){\n    const currentFilter = {};\n    this.ui.entities.map((entity) => {\n      if( !entity.allSelected ){\n        if( entity.filter.length ){\n          currentFilter[ entity.internal_name ] = entity.filter.filter((id)=>+id>0);\n          console.log(entity.internal_name , entity.filter);\n          this._onEntityFeedUpdate(entity);\n        }\n      }\n    });\n\n    console.log('currentFilter', currentFilter);\n\n    return currentFilter;\n  }\n\n\n  /**\n   * Determine which entity columns are having a filtering effect\n   */\n  private _isCurrentFilterRelevant(){\n    let relevant = false;\n    Object.keys(this.asset.filter).some((internal_name: string) => {\n      if( Array.isArray(this.asset.filter[ internal_name ]) && this.asset.filter[ internal_name ].length ){\n        if( internal_name in this.ui.map.entities && this.ui.entities[ this.ui.map.entities[ internal_name ] ].totalAvailable ){\n          if( this.asset.filter[ internal_name ].length < this.ui.entities[ this.ui.map.entities[ internal_name ] ].totalAvailable ){\n            relevant = true;\n            return true;\n          }\n        }\n      }\n    });\n    return relevant;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { PopFieldItemModule } from '../../base/pop-field-item/pop-field-item.module';\nimport { ScrollingModule } from '@angular/cdk/scrolling';\nimport { FormsModule } from '@angular/forms';\nimport { MatCheckboxModule } from '@angular/material/checkbox';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatDividerModule } from '@angular/material/divider';\nimport { MatProgressBarModule } from '@angular/material/progress-bar';\nimport { PopCacFilterComponent } from './pop-cac-filter.component';\nimport { PopCacFilterViewComponent } from './pop-cac-filter-view/pop-cac-filter-view.component';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule,\n    FormsModule,\n    ScrollingModule,\n    MatFormFieldModule,\n    MatInputModule,\n    MatCheckboxModule,\n    MatIconModule,\n    MatTooltipModule,\n    PopFieldItemModule,\n    MatProgressBarModule,\n    MatDividerModule\n  ],\n  declarations: [\n    PopCacFilterComponent,\n    PopCacFilterViewComponent,\n  ],\n  exports: [\n    PopCacFilterComponent,\n    PopCacFilterViewComponent,\n  ],\n  providers: [],\n\n})\nexport class PopCacFilterModule {\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { PopMenuModule } from './pop-menu/pop-menu.module';\nimport { PopTemplateComponent } from './pop-template.component';\nimport { PopLeftMenuModule } from './pop-left-menu/pop-left-menu.module';\nimport { PopWidgetBarModule } from './pop-widget-bar/pop-widget-bar.module';\nimport { RouterModule } from '@angular/router';\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\nimport { PopIndicatorsModule } from '../base/pop-indicators/pop-indicators.module';\nimport { PopTemplateAjaxLoaderComponent } from './assets/ajax-loader.component';\nimport { PopTemplateWelcomeComponent } from './assets/welcome.component';\nimport { PopTemplateGoodByeComponent } from './assets/goodbye.component';\nimport { PopTemplateErrorComponent } from './assets/error.component';\nimport { MatProgressBarModule } from '@angular/material/progress-bar';\nimport { PopTemplateBufferComponent } from './assets/buffer.component';\nimport { PopCacFilterModule } from './pop-cac-filter/pop-cac-filter.module';\n\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule,\n    HttpClientModule,\n    PopMenuModule,\n    PopLeftMenuModule,\n    PopWidgetBarModule,\n    PopCacFilterModule,\n    MatSnackBarModule,\n    MatProgressBarModule,\n    PopIndicatorsModule\n\n  ],\n  declarations: [\n    PopTemplateComponent,\n    PopTemplateAjaxLoaderComponent,\n    PopTemplateWelcomeComponent,\n    PopTemplateGoodByeComponent,\n    PopTemplateErrorComponent,\n    PopTemplateBufferComponent\n  ],\n  entryComponents: [\n    PopTemplateAjaxLoaderComponent,\n    PopTemplateWelcomeComponent,\n    PopTemplateGoodByeComponent,\n    PopTemplateErrorComponent,\n    PopTemplateBufferComponent\n  ],\n  exports: [\n    PopMenuModule,\n    PopLeftMenuModule,\n    PopWidgetBarModule,\n    PopTemplateComponent,\n    PopCacFilterModule\n  ]\n})\nexport class PopTemplateModule {\n\n}\n","import { Injectable, ViewContainerRef } from '@angular/core';\n\n\n// https://medium.com/angular-in-depth/here-is-how-to-get-viewcontainerref-before-viewchild-query-is-evaluated-f649e51315fb\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PopContainerService {\n  createListeners: any[] = [];\n  destroyListeners: any[] = [];\n\n  onContainerCreated = (fn) => {\n    this.createListeners.push(fn);\n  }\n\n  onContainerDestroyed = (fn) => {\n    this.destroyListeners.push(fn);\n  }\n\n  registerContainer = (container: ViewContainerRef) => {\n    this.createListeners.forEach((fn) => {\n      fn(container);\n    });\n  };\n\n  destroyContainer = (container: ViewContainerRef) => {\n    this.destroyListeners.forEach((fn) => {\n      fn(container);\n    });\n  }\n}\n","import { Directive, ViewContainerRef } from '@angular/core';\nimport { ServiceInjector } from '../pop-common.model';\nimport { PopContainerService } from '../services/pop-container.service';\n\n\n@Directive({\n  selector: '[libContainer]',\n})\n\nexport class LibContainerDirective {\n  private templateContainerRepo: PopContainerService;\n  constructor(\n    vc: ViewContainerRef,\n  ){\n    this.templateContainerRepo = ServiceInjector.get(PopContainerService);\n    this.templateContainerRepo.registerContainer(vc);\n  }\n}\n","import { Directive, ElementRef, HostListener, Input, Output, EventEmitter } from '@angular/core';\n\n@Directive({\n  selector: '[libOutsideClick]'\n})\nexport class LibOutsideClickDirective {\n\n  constructor(private _elementRef: ElementRef) { }\n\n  @Output('clickOutside') clickOutside: EventEmitter<any> = new EventEmitter();\n\n  @HostListener('document:click', ['$event.target']) onMouseEnter(targetElement) {\n    const clickedInside = this._elementRef.nativeElement.contains(targetElement);\n    if (!clickedInside) {\n      this.clickOutside.emit(null);\n    }\n  }\n\n\n}\n","import { Directive, Output, EventEmitter, HostListener} from \"@angular/core\";\n\n@Directive({ selector: '[libTrackCapsLock]' })\nexport class LibTrackCapsLockDirective {\n  @Output('capsLock') capsLock = new EventEmitter<Boolean>();\n\n  @HostListener('window:keydown', ['$event'])\n  onKeyDown(event: KeyboardEvent): void {\n    const capsOn = event.getModifierState && event.getModifierState('CapsLock');\n    this.capsLock.emit(capsOn);\n  }\n  @HostListener('window:keyup', ['$event'])\n  onKeyUp(event: KeyboardEvent): void {\n    const capsOn = event.getModifierState && event.getModifierState('CapsLock');\n    this.capsLock.emit(capsOn);\n  }\n}\n","import { ModuleWithProviders, NgModule } from '@angular/core';\nimport { PhonePipe } from './pipes/phone.pipe';\nimport { ToYesNoPipe } from './pipes/toYesNo.pipe';\nimport { TruncatePipe } from './pipes/truncate.pipe';\nimport { ToActiveOrArchivedPipe } from './pipes/toActiveOrArchived.pipe';\nimport { PopTemplateModule } from './modules/app/pop-template.module';\nimport { LabelPipe } from './pipes/label.pipe';\nimport { LibContainerDirective } from './directives/lib-container.directive';\nimport { LibOutsideClickDirective } from './directives/lib-outside-click.directive';\nimport { LibTrackCapsLockDirective } from './directives/lib-track-caps-lock.directive';\n\n\n@NgModule({\n  imports: [\n    PopTemplateModule\n  ],\n  declarations: [\n    LabelPipe,\n    PhonePipe,\n    ToYesNoPipe,\n    ToActiveOrArchivedPipe,\n    TruncatePipe,\n    LibOutsideClickDirective,\n    LibContainerDirective,\n    LibTrackCapsLockDirective,\n  ],\n  exports: [\n    PopTemplateModule,\n    LabelPipe,\n    PhonePipe,\n    ToYesNoPipe,\n    ToActiveOrArchivedPipe,\n    TruncatePipe,\n    LibOutsideClickDirective,\n    LibContainerDirective,\n    LibTrackCapsLockDirective,\n  ],\n})\nexport class PopCommonModule {\n  static forRoot(environment?: any): ModuleWithProviders<PopCommonModule>{\n    return {\n      ngModule: PopCommonModule,\n      providers: [\n        {\n          provide: 'env',\n          useValue: environment\n        },\n      ]\n    };\n  }\n}\n","import {Injectable} from '@angular/core';\nimport {PopBusiness, PopLog, PopPipe, PopUser} from '../pop-common.model';\nimport * as spacetime from 'spacetime/builds/spacetime.min';\nimport {IsArray, IsNumber, IsObject, IsString} from '../pop-common-utility';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PopDatetimeService {\n\n  private timezone: string | number = 'America/Denver';\n  private hourFormat = 12;\n  private dateFormat = `dd/mm/yyyy`;\n\n  protected srv: {\n    spacetime: typeof spacetime\n  } = {\n    spacetime: spacetime\n  };\n\n\n  constructor() {\n  }\n\n\n  transform(value, format: string = 'date', seconds = true) {\n    return this._display({timestamp: value, format: format, seconds: seconds});\n  }\n\n\n  toIso(timestamp) {\n    const dt = this.srv.spacetime(timestamp, this.timezone);\n    return dt.format('iso');\n  }\n\n  toIsoShort(timestamp) {\n    const dt = this.srv.spacetime(timestamp, this.timezone);\n    return dt.format('iso-short');\n  }\n\n\n  getTommorow(date) {\n    return this.srv.spacetime(date).add(1, 'day').format('iso');\n  }\n\n\n  add(date: any, direction: number = 1, unit = 'day') {\n    return this.srv.spacetime(date).add(direction, unit).format('iso');\n  }\n\n\n  subtract(date: any, direction: number = 1, unit = 'day') {\n    return this.srv.spacetime(date).subtract(direction, unit).format('iso');\n  }\n\n\n  getYesterday(date) {\n\n    return this.srv.spacetime(date).subtract(1, 'day').format('iso');\n  }\n\n\n  getLatest(dates: any[]) {\n    let latest = null;\n    if (IsArray(dates, true)) {\n      latest = dates.reduce((a, b) => (this.toIso(a) > this.toIso(b) ? a : b));\n      return this.toIso(latest);\n    }\n  }\n\n\n  getEarliest(dates: any[]) {\n    let latest = null;\n    if (IsArray(dates, true)) {\n      latest = dates.reduce((a, b) => (this.toIso(a) < this.toIso(b) ? a : b));\n      return this.toIso(latest);\n    }\n  }\n\n\n  setCurrentBusinessUnitSettings() {\n    if (IsObject(PopBusiness, true)) {\n      if (IsNumber(PopBusiness.hour_format, true)) this.hourFormat = +PopBusiness.hour_format;\n      if (IsString(PopBusiness.date_format, true)) this.dateFormat = PopBusiness.date_format;\n      if (!(IsNumber(PopBusiness.timezone)) && IsString(PopBusiness.timezone, true)) this.timezone = PopBusiness.timezone;\n    }\n    if (IsObject(PopUser, ['setting'])) {\n      if (IsNumber(PopUser.setting.hour_format, true)) this.hourFormat = +PopUser.setting.hour_format;\n      if (IsString(PopUser.setting.date_format, true)) this.dateFormat = PopUser.setting.date_format;\n\n      if (IsNumber(PopUser.setting.timezone)) {\n        const transformToName = PopPipe.transform(PopUser.setting.timezone, {type: 'timezone'});\n        if (IsString(transformToName, true)) {\n          this.timezone = transformToName;\n        }\n      } else {\n        if (!(IsNumber(PopUser.setting.timezone)) && IsString(PopUser.setting.timezone, true)) this.timezone = PopUser.setting.timezone;\n      }\n\n    }\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  /**\n   * Formats a datetime string to the correct datetime according to the timezone and formats for the user.\n   *  - format enum: [date, time, datetime]\n   */\n  private _display(datetime: { timestamp: string, format?: string, seconds?: boolean }) {\n    const hourFormat = (this.hourFormat == 24 ? 'HH:mm' + (datetime.seconds ? ':ss' : '') : 'h:mm' + (datetime.seconds ? ':ss' : '') + ' a');\n    let dt = this.srv.spacetime(datetime.timestamp);\n    if (IsString(this.timezone, true) && String(this.timezone).length > 10) {\n      dt = dt.goto(this.timezone);\n    }\n\n\n    switch (datetime.format) {\n      case 'datetime':\n        return dt.format(this._displayFormat()) + (['full', 'full-short'].includes(this.dateFormat) ? ', ' : ' ') + dt.unixFmt(hourFormat);\n      case 'date':\n        return dt.format(this._displayFormat());\n      case 'time':\n        return dt.unixFmt(hourFormat);\n      default:\n        return dt.format(this._displayFormat() + ' ' + hourFormat);\n    }\n  }\n\n\n  private _displayFormat() {\n    switch (this.dateFormat) {\n      case 'yyyymmdd':\n        return '{year}{month-pad}{date-pad}';\n      case 'yyyy-mm-dd':\n        return 'iso-short';\n      case 'dd/mm/yyyy':\n        return 'numeric-uk';\n      case 'mm/dd/yyyy':\n        return 'numeric-us';\n      case 'yyyy/mm/dd':\n        return '{year}/{month-pad}/{date-pad}';\n      case 'dd-mm-yyyy':\n        return '{date-pad}-{month-pad}-{year}';\n      case 'yyyy/dd/mm':\n        return '{year}/{date-pad}/{month-pad}';\n      case 'yyyy-dd-mm':\n        return '{year}-{date-pad}-{month-pad}';\n      case 'mm-dd-yyyy':\n        return '{month-pad}-{date-pad}-{year}';\n      case 'full':\n        return '{month} {date-pad}, {year}';\n      case 'full-short':\n        return '{month-short} {date-pad}, {year}';\n      default:\n        return 'iso-short';\n    }\n  }\n\n}\n","export const environment = {\n    production: false,\n    // apiBaseUrl: ' http://127.0.0.1:8899',\n    apiBaseUrl: ' https://api.dev.popcx.com',\n    baseHref: '/lib/',\n    username: 'josh',\n    password: 'Secret@2020',\n    debug: true,\n    debugLevel: 1,\n    debugCache: 0,\n    debugComponents: 'PopEntityListComponent',\n    debugTypes: ['warn'],\n    entities:true\n}","import { Inject, Injectable } from '@angular/core';\nimport { PopBaseEventInterface } from '../pop-common.model';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PopLogService {\n\n  public name = 'PopLogService';\n\n\n  constructor(\n    @Inject('env') public env?\n  ){\n    if( this.enabled('init', this.name) ) console.log(this.message(`${this.name}:init`), this.color('init'));\n  }\n\n\n  message(message: string){\n    return `%c${message}`;\n  }\n\n\n  color(type: string){\n    let color = 'aqua';\n    switch( type ){\n      case 'warn':\n        color = 'orange';\n        break;\n      case 'force':\n      case 'error':\n      case 'destroy':\n        color = 'red';\n        break;\n      case 'info':\n        color = 'aqua';\n        break;\n      case 'event':\n        color = 'yellow';\n        break;\n      case 'onSession':\n      case 'event-trigger':\n        color = 'gold';\n        break;\n      case 'cache-in':\n        color = 'green';\n        break;\n      case 'cache-out':\n        color = 'darkgreen';\n        break;\n      case 'dom':\n        color = 'brown';\n        break;\n      case 'debug':\n        color = 'pink';\n        break;\n      case 'api':\n        color = 'darkgreen';\n        break;\n      case 'config':\n        color = 'pink';\n        break;\n      case 'theme':\n        color = 'purple';\n        break;\n      default:\n        color = 'aqua';\n        break;\n    }\n    return `color: ${color}`;\n  }\n\n\n  enabled(type: string = '', component: string = null){\n    if( this.env.debug ){\n      if( type && Array.isArray(this.env.debugTypes) ){\n        if( this.env.debugTypes.includes(type) ) return true;\n      }\n      if( typeof this.env.debugLevel === 'number' ){\n        if( [ 'error', 'onSession' ].includes(type) && this.env.debug >= 1 ){\n          return true;\n        }\n        if( [ 'warning', 'info' ].includes(type) && this.env.debug >= 2 ){\n          return true;\n        }\n        if( [ 'events' ].includes(type) && this.env.debug >= 2 ){\n          return true;\n        }\n      }\n      if( component && typeof this.env.debugComponents === 'string' ){\n        return this.env.debugComponents.search(component) > -1;\n      }\n    }\n    return false;\n  }\n\n\n  init(componentName: string, message: string, data: any = '', force = false){\n    const type = 'init';\n    if( this.enabled(type, componentName) || force ) console.log(this.message(`${componentName}:${message}`), this.color(( force ? 'force' : type )), data);\n  }\n\n  debug(componentName: string, message: string, data: any = '', force = false){\n    const type = 'debug';\n    if( this.enabled(type, componentName) || force ) console.log(this.message(`${componentName}:${message}`), this.color(( force ? 'force' : type )), data);\n  }\n\n\n  cache(componentName: string, message: string,  set = true, force = false){\n    let type = 'cache';\n    if( this.enabled(type, componentName) || force ){\n      type = set ? 'cache-in' : 'cache-out';\n      console.log(this.message(`${componentName}:${message}`), this.color(( force ? 'force' : type )));\n    }\n  }\n\n\n  warn(componentName: string, message: string, data: any = '', force = false){\n    const type = 'warn';\n    if( this.enabled(type, componentName) || force ) console.log(this.message(`${componentName}:${message}`), this.color(( force ? 'force' : type )), data);\n  }\n\n\n  info(componentName: string, message: string, data: any = '', force = false){\n    const type = 'info';\n    if( this.enabled(type, componentName) || force ) console.log(this.message(`${componentName}:${message}`), this.color(( force ? 'force' : type )), data);\n  }\n\n\n  theme(componentName: string, message: string, data: any = '', force = false){\n    const type = 'theme';\n    if( this.enabled(type, componentName) || force ) console.log(this.message(`${componentName}:${message}`), this.color(( force ? 'force' : type )), data);\n  }\n\n\n  event(componentName: string, message: string, event: PopBaseEventInterface, force = false){\n    const type = 'event';\n    if( this.enabled(type, componentName) || force ) console.log(this.message(`${componentName}:${message}`), this.color(( force ? 'force' : type )), event);\n  }\n\n\n  error(componentName: string, message: string, data: any = '', force = false){\n    const type = 'error';\n    if( this.enabled(type, componentName) || force ){\n      console.log(this.message(`${componentName}:${message}`), this.color(( force ? 'force' : type )), data);\n      // throw new Error('message');\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PopDisplayService {\n  private readonly aliases;\n\n\n  constructor(){\n    this.aliases = [];\n  }\n\n\n  /**\n   * Provides the actual name we want displayed to the user.\n   * field - The field name coming from the DB.\n   * displayInfo - Either a string or object. If object then will look for property display or label. Takes aliases into account. IE: account:ID\n   * set - If passed will look in the displayInfo object for this field before falling back to the display or label field.\n   * returns {string}\n   */\n  public set(text: string, displayInfo: any = '', displayField: string = ''){\n\n    let displayString = '';\n\n    if( displayInfo && typeof displayInfo === 'string' ){\n      displayString = displayInfo;\n    }else if( displayInfo && displayField && displayInfo[ displayField ] ){\n      displayString = displayInfo[ displayField ];\n    }else if( displayInfo && displayInfo.display ){\n      displayString = displayInfo.display;\n    }else if( displayInfo && displayInfo.label ){\n      displayString = displayInfo.label;\n    }\n\n    // Check for aliases.\n    if( displayString ){\n      if( displayString.includes('alias:') ){\n        const aliasArray = displayString.split(':');\n        aliasArray.shift();\n        const alias = this.alias(aliasArray.shift()).toLocaleLowerCase();\n        displayString = alias.charAt(0).toUpperCase() + alias.slice(1) + ' ';\n        let tempString = '';\n        while( tempString = aliasArray.shift() ) displayString += ' ' + tempString;\n      }\n    }else{\n      // Format the string base on the field name.\n      const words = text.split('_');\n      for( const word of words ){\n        if( word === 'id' || word === 'fk' ){\n          displayString += 'ID ';\n        }else{\n          displayString += word.charAt(0).toUpperCase() + word.slice(1) + ' ';\n        }\n      }\n    }\n\n    return displayString.trim();\n  }\n\n\n  public alias(entity){\n    return ( this.aliases[ entity ] ? this.aliases[ entity ] : entity );\n  }\n\n}\n\n","import { HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';\nimport { Inject, Injectable, isDevMode } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { ConvertObjectToUri, IsArray, IsObject, IsString } from '../pop-common-utility';\nimport { PopBusiness } from '../pop-common.model';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PopRequestService {\n\n  private readonly offsetLimit = 2000;\n  private baseUrl: string;\n\n\n  constructor(\n    private http: HttpClient,\n    @Inject('env') private env?,\n  ){\n    // if( +this.env.offsetLimit ) this.offsetLimit = this.env.offsetLimit;\n    if( !this.baseUrl ){\n      const envUrl = isDevMode() && this.env && this.env.apiBaseUrl ? this.env.apiBaseUrl : null;\n      this.baseUrl = ( envUrl ? envUrl : `${ window.location.protocol }//api.${ window.location.host }` );\n    }\n  }\n\n\n  public getHeaders(version, businessId = 0){\n    return {\n      'X-Popcx-Business': +businessId ? String(businessId): PopBusiness ? String(PopBusiness.id) : String(0),\n      'Content-Type': 'application/json',\n      'Api-Version': ( typeof version !== 'undefined' ? version : 1 ).toString()\n    };\n  }\n\n\n  public getBaseUrl(){\n    return this.baseUrl.slice();\n  }\n\n\n  public setBaseUrl(baseUrl: string): void{\n    if( IsString(baseUrl, true) ){\n      this.baseUrl = baseUrl;\n    }\n  }\n\n\n  public getOffsetLimit(){\n    return this.offsetLimit;\n  }\n\n\n  doGet(url: string, params: object = {}, version: number = 1, ignore401: boolean = false, businessId = 0): Observable<any>{\n    const options = {\n      headers: new HttpHeaders(this.getHeaders(version, businessId)),\n      params: this._setParams(params)\n    };\n    if( ignore401 ) options.headers.set('SkipResponse401Interceptor', '1');\n\n    if( url[ 0 ] !== '/' ) url = `/${url}`;\n\n    return this.http.get<any>(`${ this.getBaseUrl() }${ url }`, options);\n  }\n\n\n  doDelete(url: string, body: object = null, version: number = 1, ignore401: boolean = null, businessId = 0): Observable<any>{\n    const options = {\n      headers: new HttpHeaders(this.getHeaders(version, businessId)),\n      body: body,\n    };\n    if( ignore401 ) options.headers.set('SkipResponse401Interceptor', '1');\n    if( url[ 0 ] !== '/' ) url = `/${url}`;\n    // if( data ) options.params = new HttpParams(data);\n    return this.http.delete<any>(`${ this.getBaseUrl() }${ url }`, options);\n  }\n\n\n  doPatch(url: string, data: object, version: number = 1, ignore401: boolean = false, businessId = 0): Observable<any>{\n    const headers = new HttpHeaders(this.getHeaders(version, businessId));\n    if( ignore401 ) headers.set('SkipResponse401Interceptor', '1');\n    if( url[ 0 ] !== '/' ) url = `/${url}`;\n    return this.http.patch(this.getBaseUrl() + url, JSON.stringify(data), { headers: headers });\n  }\n\n\n  doPost(url: string, data: object, version: number = 1, ignore401: boolean = false, businessId = 0): Observable<any>{\n    const headers = new HttpHeaders(this.getHeaders(version, businessId));\n    if( ignore401 ) headers.set('SkipResponse401Interceptor', '1');\n    if( url[ 0 ] !== '/' ) url = `/${url}`;\n    return this.http.post<any>(`${ this.getBaseUrl() }${ url }`, JSON.stringify(data), { headers: headers });\n  }\n\n\n  transform(value: string | number, transformation: any){\n    if( IsArray(transformation, true) ){\n      transformation.map((transKey) => {\n        // value = this.commonRepo.transform(value, transKey);\n      });\n    }else if( IsString(transformation, true) ){\n      // value = this.commonRepo.transform(value, transformation);\n    }\n    return value;\n  }\n\n\n  private _setParams(body){\n    let params: HttpParams = new HttpParams();\n    for( const key of Object.keys(body) ){\n      if( body[ key ] ){\n        if( body[ key ] instanceof Array ){\n          body[ key ].forEach((item) => {\n            params = params.append(`${key.toString()}[]`, item);\n          });\n        }else{\n          params = params.append(key.toString(), body[ key ]);\n        }\n      }\n    }\n    return params;\n  }\n}\n\n","import { Subject } from 'rxjs';\nimport { EventEmitter } from '@angular/core';\nimport { PopBaseEventInterface, PopPipe } from '../../../pop-common.model';\nimport { TitleCase } from '../../../pop-common-utility';\n\n\nexport interface PopContextMenuConfigInterface {\n  // defaultOptions: string[];\n  options?: PopContextMenuOption[];\n  newTabUrl?: string;\n}\n\n\nexport class PopContextMenuConfig {\n  x: number;\n  y: number;\n  toggle: Subject<boolean>;\n  options: PopContextMenuOption[];\n  newTabUrl?: string;\n  emitter: EventEmitter<PopBaseEventInterface> = new EventEmitter<PopBaseEventInterface>();\n\n\n  constructor(config?: PopContextMenuConfigInterface){\n    this.toggle = new Subject<boolean>();\n    this.x = 0;\n    this.y = 0;\n    this.options = [];\n    this.newTabUrl = '';\n    if( config != undefined && config.newTabUrl ){\n      const newTabOption: PopContextMenuOption = {\n        label: 'Open Link in new tab',\n        type: 'new_tab',\n        url: config.newTabUrl,\n      };\n      this.options.push(newTabOption);\n    }\n    if( config != undefined && config.options !== undefined && config.options.length != 0 ){\n      for( const option of config.options ) this.options.push(option);\n    }\n  }\n\n\n  public addNewTabOption(url: string){\n    const newTabOption: PopContextMenuOption = {\n      label: 'Open Link in new tab',\n      type: 'new_tab',\n      url: url,\n    };\n    this.options.push(newTabOption);\n  }\n\n\n  public addPortalOption(internal_name: string = '', id: number){\n    const label = TitleCase(PopPipe.transform(internal_name, {type:'entity', arg1: 'alias', arg2: 'singular'})).replace(/_/g, ' ').trim();\n    const newTabOption: PopContextMenuOption = {\n      label: `View ${label}`,\n      type: 'portal',\n      metadata: {\n        internal_name: internal_name,\n        id: id\n      }\n    };\n    this.options.push(newTabOption);\n  }\n\n\n  public addOption(option: PopContextMenuOption){\n    this.options.push(option);\n  }\n\n\n  public resetOptions(){\n    this.options = [];\n  }\n}\n\n\nexport interface PopContextMenuOption {\n  label: string;\n  type: string;\n  url?: string;\n  subMenus?: PopContextMenuOption[];\n  metadata?: any;\n}\n\n\nexport interface PopContextMenuEvent {\n  option: PopContextMenuOption;\n}\n","export const EntityFieldSetting = {\n  show_name: {\n    name: 'show_name',\n    label: 'Show Name',\n    helpText: 'Show the name of the field as a Header',\n    type: 'boolean',\n    defaultValue: false,\n  },\n  edit_label: {\n    name: 'edit_label',\n    label: 'Allow Label Changes',\n    helpText: 'The User will be able to see the label, but should they be allowed to change it?',\n    type: 'boolean',\n    group: 'label',\n    defaultValue: true\n  },\n  custom_label: {\n    name: 'custom_label',\n    label: 'Allow Custom Label',\n    helpText: 'The user will be able to select \\'Custom\\' from the dropdown and enter their own label',\n    type: 'boolean',\n    group: 'label',\n    defaultValue: false,\n  },\n  unique_label: {\n    name: 'unique_label',\n    label: 'Require Unique Label',\n    helpText: 'Each Value entry will be required to use a select a different label',\n    type: 'boolean',\n    group: 'label',\n    defaultValue: false,\n  },\n};\n\n","import {Injectable} from '@angular/core';\nimport {PopRequestService} from '../../../services/pop-request.service';\nimport {\n  CoreConfig,\n  Dictionary,\n  FieldConfig,\n  FieldCustomSettingInterface,\n  FieldItemPatchInterface,\n  PopBaseEventInterface,\n  PopLog,\n  ServiceInjector\n} from '../../../pop-common.model';\nimport {PopExtendService} from '../../../services/pop-extend.service';\nimport {\n  ConvertObjectToUri,\n  GetHttpErrorMsg,\n  IsArray,\n  IsDefined,\n  IsObject,\n  JsonCopy, StorageGetter,\n  StringReplaceAll\n} from '../../../pop-common-utility';\nimport {EntityFieldSetting} from './pop-entity-field.setting';\nimport {FieldItemModelConfig, IsValidFieldPatchEvent, ParseUrlForParams} from '../pop-entity-utility';\nimport {FormControl} from \"@angular/forms\";\n\n\n@Injectable({providedIn: 'root'})\nexport class PopEntityFieldService extends PopExtendService {\n  protected name = 'PopEntityFieldService';\n\n  protected srv: {\n    request: PopRequestService,\n  } = {\n    request: ServiceInjector.get(PopRequestService)\n  };\n\n\n  constructor() {\n    super();\n    PopLog.init(this.name, 'init', this);\n  }\n\n\n  // /**\n  //  * Ensure that at least 1 label exists\n  //  * @param field\n  //  */\n  // setFieldEntries(field: FieldInterface): Promise<boolean>{\n  //   return new Promise<boolean>((resolve) => {\n  //     if( !( IsArray(field.entries, true) ) ){\n  //       const entry = {\n  //         name: TitleCase(`${field.fieldgroup.name} 1`),\n  //         type: 'provided'\n  //       };\n  //       this.srv.request.doPost(`fields/${field.id}/entries`, entry, 1, false).subscribe((res) => {\n  //         res = res.data ? res.data : res;\n  //         field.entries = [ res ];\n  //         return resolve(true);\n  //       }, (err) => {\n  //         PopLog.error(this.name, `_setFieldEntryValues`, GetHttpErrorMsg(err));\n  //         return resolve(false);\n  //       });\n  //     }else{\n  //       return resolve(true);\n  //     }\n  //   });\n  // }\n\n\n  // /**\n  //  * Ensure that the field has the correct amount of values\n  //  * @param field\n  //  */\n  // setFieldValues(field: FieldInterface): Promise<boolean>{\n  //   return new Promise<boolean>((resolve) => {\n  //\n  //     if( IsArray(field.entries, true) ){\n  //       const realDataKeys = Object.keys(field.data).filter((id) => +id > 0);\n  //       const api = [];\n  //       if( !realDataKeys.length ){\n  //         console.log('create default value for  ', realDataKeys, field);\n  //         api.push(1);\n  //       }\n  //       if(field.multiple){\n  //         let neededValues = field.multiple_min - realDataKeys.length;\n  //         console.log('needed', neededValues);\n  //         while(neededValues){\n  //           api.push(1);\n  //           neededValues--;\n  //         }\n  //\n  //       }\n  //       console.log('should have values', api)\n  //\n  //       return resolve(true);\n  //     }else{\n  //       return resolve(false);\n  //     }\n  //   });\n  // }\n\n  addEntryValue(core: CoreConfig, field: FieldConfig) {\n\n    const dataIndex = field.data_keys.length;\n    const entry = dataIndex in field.entries ? field.entries[dataIndex] : null;\n    if (IsObject(entry, ['id'])) {\n      console.log('entry', entry);\n      const item = {\n        data: {},\n        entry: entry,\n        config: {},\n        index: dataIndex\n      };\n      Object.keys(field.children).map((name) => {\n        const fieldItem = JsonCopy(field.children[name]);\n        fieldItem.model.value = null; // clear any value that might have been stored from previous entry\n        item.data[name] = null;\n        fieldItem.model.facade = true;\n        item.config[name] = FieldItemModelConfig(core, fieldItem.model);\n      });\n      return item;\n    } else {\n      console.log('fail', entry);\n      return null;\n    }\n  }\n\n\n  removeEntryValue(core: CoreConfig, field: FieldConfig, dataKey: number): Promise<boolean> {\n    return new Promise<boolean>((resolve) => {\n      console.log('removeEntryValue', core, field, dataKey);\n      const data = field.data[dataKey];\n      if (IsObject(data, ['id'])) {\n        const body = {};\n        const path = StringReplaceAll(ParseUrlForParams(`#path/#entityId`, core.params), '//', '/');\n        body[field.name] = {\n          field_entry_id: dataKey,\n          id: data.id\n        };\n        this.srv.request.doDelete(path, body, 1, false).subscribe((res) => {\n          if (res.data) res = res.data;\n          console.log('removeEntryValue', res);\n          return resolve(true);\n        }, () => {\n          return resolve(false);\n        });\n      } else {\n        return resolve(true);\n      }\n    });\n\n  }\n\n\n  /**\n   * Update a value for a single field item column of a field record\n   * @param core\n   * @param field\n   * @param event\n   */\n  updateFieldItem(core: CoreConfig, field: FieldConfig, event: PopBaseEventInterface): Promise<boolean> {\n    return new Promise((resolve) => {\n      if (IsValidFieldPatchEvent(core, event)) {\n        const patch = {};\n        const path = StringReplaceAll(ParseUrlForParams(`#path/#entityId`, core.params), '//', '/');\n        patch[field.name] = {\n          field_entry_id: +event.data_key,\n          field_id: +field.id,\n          id: field.data[event.data_key].id ? field.data[event.data_key].id : null\n        };\n        patch[field.name][event.column] = event.config.control.value;\n        this.srv.request.doPatch(path, patch, 1, false).subscribe((res) => {\n          if (res.data) res = res.data;\n          const value = res[field.name].record[event.column];\n          field.data[event.data_key].id = res[field.name].record.id;\n          field.data[event.data_key][event.column] = value;\n\n\n          // if( IsObject(core.entity[ field.name ], true) ){\n          //   core.entity[ field.name ][ event.column ] = value;\n          // }else if( IsArray(core.entity[ field.name ], true) ){\n          //   console.log('session the data', core.entity[ field.name ], value);\n          // }\n\n          return resolve(true);\n        }, (err) => {\n          const fieldPatch = <FieldItemPatchInterface>event.config.patch;\n          const control = <FormControl>event.config.control;\n          fieldPatch.running = false;\n          control.markAsDirty();\n          control.setValue(this.asset.storedValue);\n          control.setErrors({server: true});\n          event.config.message = GetHttpErrorMsg(err);\n          return resolve(false);\n        });\n      }\n    });\n\n  }\n\n\n  /**\n   * Set any field settings for this field & field items, and apply and stored values\n   * @param field\n   * @param settings\n   */\n  setFieldCustomSetting(field: FieldConfig, settings: Dictionary<FieldCustomSettingInterface>) {\n    const stored = field.configs;\n    if (IsObject(field, ['fieldgroup', 'configs']) && IsObject(settings)) {\n      settings = JSON.parse(JSON.stringify({...EntityFieldSetting, ...settings}));\n      Object.keys(settings).map((name: string) => {\n        const setting = settings[name];\n        if (IsObject(setting, true)) {\n          const value = IsDefined(setting.value, false) ? setting.value : setting.defaultValue;\n          setting.value = <any>value;\n          if (setting.item && IsObject(field.children, [setting.item])) {\n            field.children[setting.item].custom_setting[name] = setting;\n            field.children[setting.item].setting[name] = value;\n          } else {\n            field.custom_setting[name] = setting;\n            field.setting[name] = value;\n          }\n        }\n      });\n\n      const childrenIdLookup = {};\n      Object.keys(field.children).map((name) => {\n        childrenIdLookup[field.children[name].id] = name;\n      });\n\n      if (IsArray(stored.field_configs, true)) {\n        stored.field_configs.map((setting) => {\n          if (!field.custom_setting[setting.name]) {\n            // ToDo:: Do We want to allow the database to pass in configs that are not local?\n            PopLog.warn(this.name, `setFieldCustomSettingDefaults: setting no longer defined`, setting);\n            // field.custom_setting[ setting.name ] = setting;\n          } else {\n            field.custom_setting[setting.name].id = setting.id;\n            field.custom_setting[setting.name].value = setting.value;\n          }\n          field.setting[setting.name] = setting.value;\n        });\n      }\n\n\n      if (IsObject(stored.item_configs, true)) {\n        Object.keys(stored.item_configs).map((fieldItemId) => {\n          const fieldItemConfigs = stored.item_configs[fieldItemId];\n          if (IsArray(fieldItemConfigs, true)) {\n            fieldItemConfigs.map((setting) => {\n              if (setting.field_id in childrenIdLookup) {\n                const item = field.children[childrenIdLookup[setting.field_id]];\n\n                // if( !item.custom_setting ) item.custom_setting = {};\n                if (!item.custom_setting[setting.name]) {\n                  // ToDo:: Do We want to allow the database to pass in configs that are not local\n                  PopLog.warn(this.name, `setFieldCustomSettingDefaults: setting no longer defined`, setting);\n                  // item.custom_setting[ setting.name ] = setting;\n                } else {\n                  item.custom_setting[setting.name].id = setting.id;\n                  item.custom_setting[setting.name].value = setting.value;\n                }\n                // if( !item.setting ) item.setting = {};\n                item.setting[setting.name] = setting.value;\n                console.log('here', setting.name, {item: item, setting: setting});\n              }\n            });\n          }\n        });\n      }\n    }\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  private _my() {\n    return true;\n  }\n}\n","import {\n  Component, ElementRef, EventEmitter,\n  Input,\n  OnDestroy,\n  OnInit,\n  ViewChild,\n  ViewContainerRef, ViewEncapsulation\n} from '@angular/core';\nimport { Router } from '@angular/router';\nimport { PopExtendDynamicComponent } from '../../../pop-extend-dynamic.component';\nimport { EntityFieldComponentInterface } from './pop-entity-field.model';\nimport { CoreConfig, Dictionary, DynamicComponentInterface, FieldConfig, PopBaseEventInterface, ServiceInjector } from '../../../pop-common.model';\nimport { PopContextMenuConfig } from '../../base/pop-context-menu/pop-context-menu.model';\nimport { IsObjectThrowError, StorageGetter } from '../../../pop-common-utility';\nimport { PopEntityFieldService } from './pop-entity-field.service';\n\n\n@Component({\n  selector: 'lib-pop-entity-field',\n  styleUrls: [ './pop-entity-field.component.scss' ],\n  templateUrl: './pop-entity-field.component.html',\n  encapsulation: ViewEncapsulation.None,\n})\nexport class PopEntityFieldComponent extends PopExtendDynamicComponent implements EntityFieldComponentInterface, OnInit, OnDestroy {\n  @Input() field: FieldConfig;\n  @ViewChild('container', { read: ViewContainerRef, static: true }) private container;\n\n  public name = 'PopEntityFieldComponent';\n\n  protected srv: {\n    field: PopEntityFieldService,\n    router: Router,\n  } = {\n    field: ServiceInjector.get(PopEntityFieldService),\n    router: ServiceInjector.get(Router),\n  };\n\n\n  constructor(\n    public el: ElementRef,\n  ){\n    super();\n\n\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        // #1 Check Required Data:\n        this.field = IsObjectThrowError(this.field, [ 'id' ], `${this.name}:configure: - this.field`) ? this.field : null;\n        this.id = this.field.id;\n        // #2 Attach a context menu\n        this._attachContextMenu();\n        // #3 Handle Bubble events\n        this.dom.handler.bubble = (core: CoreConfig, event: PopBaseEventInterface) => this.onBubbleEvent('handler', null, event);\n        this.trait.bubble = true; // leave this on\n\n        // #5: Render the dynamic field\n        this.template.attach('container'); // 'container' references the @viewChild at top of file\n        this.template.render([ <DynamicComponentInterface>{\n          type: this.field.component,\n          inputs: {\n            core: this.core,\n            field: this.field,\n          }\n        } ]);\n\n        // set states\n        this._setFieldState();\n\n        resolve(true);\n      });\n    };\n  }\n\n\n  /**\n   * This component should have a purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * The user can call actions on this field\n   * @param event\n   */\n  onActionButtonClick(event: PopBaseEventInterface){\n    this.log.event(`onActionButtonClick`, event);\n    if( event.type === 'field' ){\n      if( event.name === 'add' ){\n        this.onAdd(event);\n      }else if( event.name === 'remove' ){\n        // this.onRemove(event);\n      }else if( event.name === 'close' ){\n        // this.onClose(event);\n      }\n    }\n    return true;\n  }\n\n\n  /**\n   * User wants to add a value entry into the field\n   * @param event\n   */\n  onAdd(event: PopBaseEventInterface){\n    this.log.event(`onAdd`, event);\n    if( this.field.facade ){\n      this.onBubbleEvent('onAdd', null, event);\n    }else{\n      const childEmitter = <EventEmitter<PopBaseEventInterface>>StorageGetter(this.template, [ 'refs', '0', 'instance', 'events' ]);\n      if( childEmitter ){\n        childEmitter.emit(event);\n        this._setFieldState();\n      }\n    }\n    return true;\n  }\n\n\n  /**\n   * User wants to make edits to the value entries\n   * @param event\n   */\n  onEdit(event?: PopBaseEventInterface, dataKey?: number){\n    this.log.event(`onEdit`, event);\n    return true;\n  }\n\n\n  /**\n   * User wants to remove a value entry\n   * @param event\n   */\n  onRemove(event: PopBaseEventInterface){\n    this.log.event(`onRemove`, event);\n    console.log('here');\n    if( this.field.facade ){\n      this.onBubbleEvent('onRemove', null, event);\n    }else{\n      console.log('real delete action');\n    }\n    this._setFieldState();\n    return true;\n  }\n\n\n  /**\n   * User closes the edit ability of the value entries\n   * @param event\n   */\n  onClose(event: PopBaseEventInterface){\n    this.log.event(`onClose`, event);\n    return true;\n  }\n\n\n  /**\n   * The user can click on a link to view the config setup of this field\n   */\n  onNavigateToField(): void{\n    this.srv.router.navigate([ 'entities', 'fields', this.field.id ]).catch((e) => true);\n  }\n\n\n  /**\n   * Handle the bubble events that come up\n   * @param event\n   */\n  onBubbleEvent(name?: string, extension?: Dictionary<any>, event?: PopBaseEventInterface){\n    this.log.event(`onBubbleEvent`, event);\n    this._setFieldState();\n    this.events.emit(event);\n    return true;\n  }\n\n\n  /**\n   * Clean up the dom of this component\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  /**\n   * Set internal state flags of a field\n   * @private\n   */\n  private _setFieldState(): void{\n\n    this.dom.setTimeout(`allow-template-changes`, () => {\n      // this.field.canAdd = this.field.multiple && this.field.data_keys.length < this.field.multiple_max;\n      this.field.canAdd = this.field.multiple && this.field.data_keys.length < this.field.entries.length;\n      this.field.canRemove = this.field.multiple && this.field.data_keys.length > this.field.multiple_min;\n    }, 100);\n\n  }\n\n\n  /**\n   * Interept the mouse right click to show a context menu for this field\n   * @param event\n   */\n  private _attachContextMenu(): void{\n\n    this.dom.contextMenu.config = new PopContextMenuConfig();\n    //\n    this.dom.contextMenu.configure = (event: MouseEvent) => {\n      const hasAccess = true; // TBD\n      if( hasAccess && this.dom.contextMenu.config ){\n        event.preventDefault(); // prevent the default behavior of the right click.\n        // reset the context menu, and configure it to load at the position clicked.\n        this.dom.contextMenu.config.resetOptions();\n        this.dom.contextMenu.config.addPortalOption('field', this.field.id);\n        this.dom.contextMenu.config.addNewTabOption(`entities/fields/${this.field.id}`);\n\n        this.dom.contextMenu.config.x = event.clientX;\n        this.dom.contextMenu.config.y = event.clientY;\n        this.dom.contextMenu.config.toggle.next(true);\n      }\n    };\n    this.dom.setSubscriber('context-menu', this.dom.contextMenu.config.emitter.subscribe((event: PopBaseEventInterface) => {\n      this.events.emit(event);\n    }));\n  }\n}\n","import {Injectable, OnDestroy} from '@angular/core';\nimport {PopLogService} from './pop-log.service';\nimport {IsObject, PopUid} from '../pop-common-utility';\nimport {\n  ComponentDomInterface,\n} from '../pop-common-dom.models';\nimport {Dictionary} from '../pop-common.model';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PopDomService implements OnDestroy {\n  private id: number | string = PopUid();\n\n  private name = 'PopDomService';\n\n  private asset: {\n    sessionKeys: Dictionary<number>\n    map: Dictionary<any>\n  } = {\n    sessionKeys: {height: 1, width: 1, state: 1, active: 1, session: 1},\n    map: {}\n  };\n\n  protected srv: {\n    log: PopLogService,\n  };\n\n  public ui: {\n    active: Dictionary<any>;\n    fields: Map<number | string, any>,\n    map: Dictionary<any>\n    [key: string]: any;\n  } = {\n    active: {},\n    fields: new Map(),\n    map: {}\n  };\n  public position = {};\n  public map = {};\n  public components: Dictionary<any> = {};\n\n\n  constructor() {\n  }\n\n\n  onRegister(component: any) {\n    if (component.name && typeof component.id !== 'undefined' && component.dom) {\n      if (this.components[component.name] && this.components[component.name][component.id]) {\n        this.applyDomKeys(component);\n      } else {\n        this.createDomSession(component);\n      }\n    }\n  }\n\n\n  onSession(dom: any, key: string = null) {\n    if (dom.name && dom.id) {\n      this.sessionDomKeys(dom, key);\n    }\n  }\n\n\n  getComponentHeight(component: string, componentId: number = 1) {\n    return this.components[component] && this.components[component][componentId] && IsObject(this.components[component][componentId].height, true) ? this.components[component][componentId].height : null;\n  }\n\n\n  getComponentWidth(component: string, componentId: number = 1) {\n    return this.components[component] && this.components[component][componentId] && IsObject(this.components[component][componentId].width, true) ? this.components[component][componentId].width : null;\n  }\n\n\n  getComponentSession(component: string, componentId: number = 1) {\n    return this.components[component] && this.components[component][componentId] && IsObject(this.components[component][componentId].onSession, true) ? this.components[component][componentId].onSession : null;\n  }\n\n\n  onDetach(name: string, id) {\n    if (name && id) {\n      if (this.components[name] && this.components[name][id]) {\n        delete this.components[name][id];\n      }\n    }\n  }\n\n\n  ngOnDestroy() {\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  private createDomSession(component: { id: string | number, name: 'string', dom: ComponentDomInterface }) {\n    if (component.name && typeof component.id !== 'undefined') {\n      if (!this.components[component.name]) this.components[component.name] = {};\n      if (!this.components[component.name][component.id]) this.components[component.name][component.id] = {};\n      // if( dom.emitter instanceof EventEmitter ) this.components[ dom.name ][ dom.entityId ].emitter = dom.emitter;\n      this.sessionDomKeys(component);\n    }\n  }\n\n\n  private applyDomKeys(component: { id: string | number, name: 'string', dom: ComponentDomInterface }) {\n    if (this.components[component.name] && this.components[component.name][component.id]) {\n      Object.keys(this.components[component.name][component.id]).map((key) => {\n        if (key && this.asset.sessionKeys[key]) {\n          component.dom[key] = this.components[component.name][component.id][key];\n        }\n      });\n    }\n  }\n\n\n  private sessionDomKeys(component: { id: string | number, name: 'string', dom: ComponentDomInterface }, key: string = null) {\n    if (this.components[component.name] && this.components[component.name][component.id]) {\n      if (key && key in this.asset.sessionKeys) {\n        if (IsObject(component.dom[key], true)) {\n          this.components[component.name][component.id][key] = component.dom[key];\n        }\n\n      } else {\n        Object.keys(this.asset.sessionKeys).map((sessionKey: string) => {\n          if (IsObject(component.dom[sessionKey], true)) {\n            this.components[component.name][component.id][sessionKey] = component.dom[sessionKey];\n          }\n        });\n      }\n    }\n  }\n}\n","import { Component, Inject, OnInit } from '@angular/core';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { TableConfig } from '../../pop-table/pop-table.model';\n\n\n@Component( {\n  selector: 'lib-pop-table-dialog',\n  templateUrl: './pop-table-dialog.component.html',\n  styleUrls: [ './pop-table-dialog.component.scss' ]\n} )\nexport class PopTableDialogComponent implements OnInit {\n\n  public ui = {\n    table: <TableConfig>undefined,\n  };\n\n\n  constructor(\n    public dialog: MatDialogRef<PopTableDialogComponent>,\n    @Inject( MAT_DIALOG_DATA ) public data\n  ){\n    this._buildTable();\n  }\n\n\n  ngOnInit(): void{\n  }\n\n\n  private _buildTable(){\n    const tableData = this.data.data\n    this.data.table.data = tableData\n    this.ui.table = this.data.table;\n  }\n\n\n  onClose(){\n    this.dialog.close( null );\n  }\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { SideBySideConfig, SideBySideOptionInterface } from './pop-side-by-side.model';\nimport { PopConfirmationDialogComponent } from '../pop-dialogs/pop-confirmation-dialog/pop-confirmation-dialog.component';\nimport { of } from 'rxjs';\nimport { PopContextMenuConfig } from '../pop-context-menu/pop-context-menu.model';\nimport { PopExtendComponent } from '../../../pop-extend.component';\nimport { Dictionary, PopBaseEventInterface, PopRequest, PopTemplate, ServiceInjector } from '../../../pop-common.model';\nimport { Router } from '@angular/router';\nimport { MatDialog } from '@angular/material/dialog';\nimport { PopDomService } from '../../../services/pop-dom.service';\nimport { ArrayMapSetter, GetHttpErrorMsg, InterpolateString, IsArray, IsCallableFunction, IsObject, ObjectContainsTagSearch, PopUid, Sleep } from '../../../pop-common-utility';\nimport { PopEntityUtilParamService } from '../../entity/services/pop-entity-util-param.service';\nimport { PopTableDialogComponent } from '../pop-dialogs/pop-table-dialog/pop-table-dialog.component';\n\n\n@Component( {\n  selector: 'lib-pop-side-by-side',\n  templateUrl: './pop-side-by-side.component.html',\n  styleUrls: [ './pop-side-by-side.component.scss' ],\n} )\nexport class PopSideBySideComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() config: SideBySideConfig;\n\n  public name = 'PopSideBySideComponent';\n\n  protected srv: {\n    dialog: MatDialog,\n    router: Router,\n    param: PopEntityUtilParamService,\n  } = {\n    dialog: ServiceInjector.get( MatDialog ),\n    param: ServiceInjector.get( PopEntityUtilParamService ),\n    router: ServiceInjector.get( Router ),\n  };\n\n  availableFilterValue = '';\n  assignedFilterValue = '';\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService,\n  ){\n    super();\n\n\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n        this.id = this.config.id ? this.config.id : PopUid();\n        this._trackAssignedOptions();\n        this._setHooks();\n        this._setContextMenu();\n        this._checkForAssignedOptions();\n        return resolve( true );\n      } );\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n        await this._setHeight();\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * This component should have a purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * Filter Utility\n   * @param type\n   * @param filter\n   */\n  onApplyFilter( type: string, filter: string ){\n    this.dom.setTimeout( 'apply-filter', () => {\n      if( this.config.filterBoth ){\n        this.onFilterBoth( filter );\n        this.assignedFilterValue = filter;\n        this.availableFilterValue = filter;\n      }else{\n        if( type === 'assigned' ){\n          this._filterAssignedOptions( filter );\n          this.assignedFilterValue = filter;\n        }else{\n          this._filterAvailableOptions( filter );\n          this.availableFilterValue = filter;\n        }\n      }\n      this.onBubbleEvent( 'apply-filter', null, { method: type, value: filter } );\n    }, 200 );\n  }\n\n\n  /**\n   * Filter both columns\n   */\n  onFilterBoth( filter: string ){\n    this.config.options.values.map( option => {\n      option.assignedFilter = option.optionFilter = !ObjectContainsTagSearch( option, filter );\n    } );\n  }\n\n\n  /**\n   * Assign a specific option\n   */\n  onOptionAssign( option: SideBySideOptionInterface, confirmed = false ): Promise<boolean>{\n    return new Promise<boolean>( async( resolve ) => {\n      if(!this.config.disabled){\n      if( IsObject( option, true ) && !this.ui.assigned[ option.value ] && !option.optionBlock && !option.optionFilter ){\n        if( this.config.facadeEvent ){\n          this.onBubbleEvent( 'facadeEvent', 'Facade Event has been triggered', {\n            method: 'remove',\n            options: [ option ],\n            ids: [ +option.value ]\n          }, true );\n          return resolve( true );\n        }else{\n          await this._assign( [ option ], confirmed );\n          return resolve( true );\n        }\n      }else{\n        return resolve( true );\n      }}\n    } );\n  }\n\n\n  /**\n   * Assign all options\n   */\n  onAssignAllOptions( confirmed = false ): Promise<boolean>{\n    return new Promise<boolean>( async( resolve ) => {\n      const options = this.config.options.values.filter( option => {\n        return !this.ui.assigned[ option.value ] && !option.optionBlock && !option.optionFilter;\n      } );\n      if( !options.length ){\n        return resolve( true );\n      }\n      if( this.config.facadeEvent ){\n        this.onBubbleEvent( 'facadeEvent', 'Facade Event has been triggered', {\n          method: 'assign',\n          options: options,\n          ids: options.map( o => +o.value )\n        }, true );\n        return resolve( true );\n      }else{\n        await this._assign( options, confirmed );\n        return resolve( true );\n      }\n    } );\n  }\n\n\n  /**\n   * Remove an option that is assigned\n   * @param option\n   * @param confirmed\n   */\n  onRemoveOption( option: SideBySideOptionInterface, confirmed = false ): Promise<boolean>{\n    return new Promise<boolean>( async( resolve ) => {\n      if(!this.config.disabled){\n      if( IsObject( option ) ){\n        if( this.config.facadeEvent ){\n          this.onBubbleEvent( 'facadeEvent', 'Facade Event has been triggered', {\n            method: 'remove',\n            options: [ option ],\n            ids: [ +option.value ]\n          }, true );\n          return resolve( true );\n        }else{\n          await this._remove( [ option ], confirmed );\n          return resolve( true );\n        }\n      }else{\n        return resolve( true );\n      }\n    }\n    } );\n  }\n\n\n  /**\n   * Remove all options that are assigned\n   */\n  onRemoveAllOptions( confirmed = false ): Promise<boolean>{\n    return new Promise<boolean>( async( resolve ) => {\n      this.config.patch.removeErrMessage = '';\n      const options = [];\n      this.config.options.values.map( option => {\n        if( this.ui.assigned[ option.value ] && !option.assignedFilter ){\n          option.patching = true;\n          options.push( option );\n        }\n      } );\n      if( !options.length ){\n        return resolve( true );\n      }\n      if( this.config.facadeEvent ){\n        this.onBubbleEvent( 'facadeEvent', 'Facade Event has been triggered', {\n          method: 'remove',\n          options: options,\n          ids: options.map( o => +o.value )\n        }, true );\n        return resolve( true );\n      }else{\n        await this._remove( options, confirmed );\n        return resolve( true );\n      }\n    } );\n  }\n\n\n  /**\n   * Go to linked route of option\n   * @param option\n   */\n  onNavigateToOptionRoute( option: SideBySideOptionInterface ){\n    if( this.config.route ){\n      let route = this.config.route.slice();\n      route = String( route ).replace( /:value/g, '' + option.value ).replace( /:name/g, option.name );\n\n      this.srv.router.navigateByUrl( route ).then( data => {\n      } )\n        .catch( e => {\n          // const errMessage = 'Route not found:' + route;\n          // console.log(e);\n          this.events.emit( { source: this.name, type: 'context_menu', name: 'portal', data: route, config: this.config } );\n          // option.errMessage = errMessage;\n          // setTimeout(() => {\n          //   if( option.errMessage === errMessage ) option.errMessage = '';\n          // }, 2000);\n        } );\n    }\n  }\n\n\n  /**\n   * Intercept the user right mouse click to show a context menu for this component\n   * @param option\n   * @param event\n   */\n  onMouseRightClick( option, event: MouseEvent ){\n    let route = this.config.route.slice();\n    route = String( route ).replace( /:value/g, '' + option.value ).replace( /:name/g, option.name );\n\n    if( !route ) return false;\n\n    // if we haven't returned, prevent the default behavior of the right click.\n    event.preventDefault();\n\n    const context = this.dom.contextMenu.config;\n\n    // reset the context menu, and configure it to load at the position clicked.\n    context.resetOptions();\n\n    // if(this.config.internal_name) this.dom.contextMenu.addPortalOption(this.config.internal_name, +row.entityId);\n    const api_path = route.split( '/' )[ 0 ];\n    const entityParams = this.srv.param.getEntityParamsWithPath( api_path, option.value );\n    if( entityParams ) context.addPortalOption( entityParams.internal_name, entityParams.entityId );\n\n    context.addNewTabOption( route );\n\n    context.x = event.clientX;\n    context.y = event.clientY;\n    context.toggle.next( true );\n  }\n\n\n  onBubbleEvent( eventName: string, message: string = null, extend: Dictionary<any> = {}, force = false ): PopBaseEventInterface{\n    const event = <PopBaseEventInterface>{\n      type: 'field',\n      name: eventName,\n      source: this.name\n    };\n    if( this.config ) event.config = this.config;\n    if( message ) event.message = message;\n    Object.keys( extend ).map( ( key ) => {\n      event[ key ] = extend[ key ];\n    } );\n    this.log.event( `onBubbleEvent`, event );\n    if( this.config.bubble || force ){\n      this.events.emit( event );\n    }\n\n    return event;\n  }\n\n\n  /**\n   * Clean up the dom of this component\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  private _assign( options: SideBySideOptionInterface[], confirmed = false ): Promise<any>{\n    return new Promise<boolean>( async( resolve ) => {\n      this._beforePatch( options );\n      if( this.config.facade ){\n        await Sleep( 500 );\n        this._onAssignSuccess( options );\n        return resolve( true );\n      }else if( this.config.patch.path && this.config.patch.field ){\n        const request = this._getRequest( 'assign', this._getRequestBody( 'assign', options, confirmed ) );\n        request.subscribe( async( res: any ) => {\n          if( res.data ) res = res.data;\n          if( res.confirmation ){\n            const isConfirmed = await this._confirmAction( res.confirmation );\n            if( isConfirmed ){\n              this._assign( options, true ).then( () => true );\n            }\n          }else{\n            this._onAssignSuccess( options );\n            this.onBubbleEvent( 'patch', 'Patched', {\n              success: true,\n              method: 'assign',\n              ids: options.map( o => o.value ),\n              value: this.config.assigned\n            }, true );\n          }\n          return resolve( res );\n        }, ( err ) => {\n          this._handleAssignError( err );\n          this._onAssignFail( options );\n          return resolve( false );\n        } );\n      }else{\n        this._onAssignSuccess( options );\n        return resolve( true );\n      }\n    } );\n  }\n\n\n  private _remove( options: SideBySideOptionInterface[] = [], confirmed = false ): Promise<any>{\n    return new Promise<boolean>( async( resolve ) => {\n      this._beforePatch( options );\n      if( this.config.facade ){\n        await Sleep( 500 );\n        this._onRemoveSuccess( options );\n        return resolve( true );\n      }else if( this.config.patch.path && this.config.patch.field ){\n        if(!confirmed && this.config.patch.conflictPath){\n\n\n          const value = options[0].value;\n          // const path = 'users/12/roles/1/conflicts';\n\n          const path = InterpolateString( this.config.patch.conflictPath,{value:value});\n          // users/{entityId}/roles/{value}/conflicts\n          PopRequest.doPost(path , {}).subscribe( async (res:any)=>{\n            if(res.data) res=res.data;\n            if(IsArray(res,true)){\n              options.map( ( option ) => {\n                option.patching = false;\n              } );\n              const isConfirmed = await this._confirmAction( res[0] );\n              if( isConfirmed ){\n                this._remove( options, true ).then( () => true );\n              }\n            } else {\n              this._remove( options, true ).then( () => true );\n            }\n\n          })\n\n        } else {\n          const request = this._getRequest( 'remove', this._getRequestBody( 'remove', options, confirmed ) );\n          request.subscribe( async( res: any ) => {\n            if( res.data ) res = res.data;\n\n              this._onRemoveSuccess( options );\n              this.onBubbleEvent( 'patch', 'Patched', {\n                success: true,\n                method: 'remove',\n                ids: options.map( o => o.value ),\n                value: this.config.assigned\n              }, true );\n\n\n            return resolve( res );\n          }, ( err ) => {\n            this._handleRemoveError( err );\n            this._onRemoveFail( options );\n          } );\n        }\n\n      }else{\n        this._onRemoveSuccess( options );\n        return resolve( true );\n      }\n    } );\n  }\n\n  private _getRequestBody( method: 'assign' | 'remove', options: SideBySideOptionInterface[], confirmed = false ){\n\n    if( this.config.patch.field ){\n\n    }\n    const body = {};\n    if( this.config.patch.metadata ){\n      for( const i in this.config.patch.metadata ){\n        if( !this.config.patch.metadata.hasOwnProperty( i ) ) continue;\n        body[ i ] = this.config.patch.metadata[ i ];\n      }\n    }\n    body[ this.config.patch.field ] = options.map( o => o.value );\n    body[ 'method' ] = method;\n    body[ 'confirmed' ] = confirmed;\n\n    return body;\n  }\n\n\n  private _getRequest( method: 'assign' | 'remove', body: object = {} ){\n    let path = this.config.patch.path;\n    const ignore401 = ( this.config.patch.ignore401 ? true : null );\n    const version = ( this.config.patch.version ? this.config.patch.version : 1 );\n    const post = {};\n    if( this.config.patch.metadata ){\n      for( const i in this.config.patch.metadata ){\n        if( !this.config.patch.metadata.hasOwnProperty( i ) ) continue;\n        post[ i ] = this.config.patch.metadata[ i ];\n      }\n    }\n    if(this.config.patch.addId){\n      const id =  body[ this.config.patch.field ][0] ;\n      path = InterpolateString( this.config.patch.path,{id:id});\n\n    }\n\n    if( method === 'assign' ){\n      switch( String( this.config.patch.assignMethod ).toLowerCase() ){\n        case 'patch':\n          return PopRequest.doPatch( `${ path}`, body, version, ignore401 );\n          break;\n        case 'post':\n          return PopRequest.doPost( `${ path }`, body, version, ignore401 );\n          break;\n        default:\n          return PopRequest.doPost( `${ path}`, body, version, ignore401 );\n          break;\n      }\n\n    }else{\n      switch( String( this.config.patch.removedMethod ).toLowerCase() ){\n        case 'patch':\n          return PopRequest.doPatch( `${ path}`, body, version, ignore401 );\n          break;\n        case 'post':\n          return PopRequest.doPost( `${ path}`, body, version, ignore401 );\n          break;\n        case 'delete':\n          return PopRequest.doDelete( `${ path}`, body, version, ignore401 );\n          break;\n        default:\n          return PopRequest.doDelete( `${ path}`, body, version, ignore401 );\n          break;\n      }\n      return PopRequest.doDelete( `${ path}`, body, version, ignore401 );\n    }\n  }\n\n\n  private _handleAssignError( err: any ){\n    this.config.patch.assignErrMessage = GetHttpErrorMsg( err );\n    this.config.patch.running = false;\n  }\n\n\n  private _handleRemoveError( err: any ){\n    this.config.patch.removeErrMessage = GetHttpErrorMsg( err );\n    this.config.patch.running = false;\n  }\n\n\n  private _onAssignSuccess( options: any[] = [] ){\n    this.config.patch.running = false;\n    options.map( option => {\n      this.ui.assigned[ option.value ] = 1;\n      option.patching = false;\n    } );\n    this._checkForAssignedOptions();\n    const event = this.onBubbleEvent( 'assign', 'Assigned', {\n      method: 'assign',\n      ids: options.map( o => o.value ),\n      value: this.config.assigned\n    } );\n    if( IsCallableFunction( this.config.patch.callback ) ){\n      this.config.patch.callback(this.core, event );\n    }\n  }\n\n\n  private _beforePatch( options: SideBySideOptionInterface[] = [] ){\n    this.config.patch.removeErrMessage = '';\n    this.config.patch.running = true;\n    options.map( ( option ) => {\n      option.patching = true;\n      option.errMessage = '';\n    } );\n  }\n\n  private _formatConflictData(conflictData:any[]){\n    const tableData = conflictData.map(pods=>{\n      return {  pod:pods.name, title:pods.pivot.is_leader?'Leader':'Member'}\n    });\n    return tableData;\n  }\n  private _confirmAction( conflictData:any[]): Promise<boolean>{\n    return new Promise<boolean>( ( resolve ) => {\n      const tableData = this._formatConflictData(conflictData);\n      this.srv.dialog.open( PopTableDialogComponent, {\n        width: '500px',\n        data: {\n          data: tableData,\n          type:'sideBySide',\n          table:this.config.patch.conflictTableConfig,\n          message: this.config.patch.conflictMessage,\n          header:this.config.patch.conflictHeader?this.config.patch.conflictHeader:''\n        }\n      } ).afterClosed().subscribe( res => {\n        return resolve( res ? true : false );\n      } );\n    } );\n  }\n\n\n  private _onAssignFail( options: SideBySideOptionInterface[] = [] ){\n    this.config.patch.running = false;\n    options.map( option => {\n      delete this.ui.assigned[ option.value ];\n      option.patching = false;\n    } );\n    this._checkForAssignedOptions();\n  }\n\n\n  private _onRemoveFail( options: SideBySideOptionInterface[] = [] ){\n    this.config.patch.running = false;\n    options.map( option => {\n      this.ui.assigned[ option.value ] = 1;\n      option.patching = false;\n    } );\n    this._checkForAssignedOptions();\n  }\n\n\n  private _onRemoveSuccess( options: SideBySideOptionInterface[] = [] ){\n    this.config.patch.running = false;\n    options.map( option => {\n      delete this.ui.assigned[ option.value ];\n      option.patching = false;\n    } );\n    this._checkForAssignedOptions();\n\n    const event = this.onBubbleEvent( 'remove', 'Removed',\n      {\n        method: 'remove',\n        ids: options.map( o => o.value ),\n        value: this.config.assigned\n      }\n    );\n    if( IsCallableFunction( this.config.patch.callback ) ){\n      this.config.patch.callback( this.core, event );\n    }\n  }\n\n\n  /**\n   * Helper function that naivgates the complexity of the setting the heights needed in this component\n   */\n  private _setHeight(){\n    return new Promise( ( resolve ) => {\n      this.dom.overhead = 2;\n      if( this.config.hasHeader ) this.dom.overhead += 38;\n      if( this.config.hasFilterRow ) this.dom.overhead += 49;\n      if( this.config.hasLabelRow ) this.dom.overhead += 45;\n\n      if( !this.config.height ) this.config.height = PopTemplate.getContentHeight( false, 270 );\n\n\n      let tabColumnHeight = this.dom.repo.getComponentHeight( 'PopEntityTabColumnComponent', this.position );\n      if( !tabColumnHeight ) tabColumnHeight = this.dom.repo.getComponentHeight( 'PopTabMenuComponent', 1 );\n      if( tabColumnHeight && tabColumnHeight.inner ){\n        this.dom.height.default = tabColumnHeight.inner - 20;\n      }else{\n        this.dom.height.default = PopTemplate.getContentHeight( false, this.dom.overhead );\n      }\n\n      if( this.config.parentClassName ){\n        this.dom.overhead = this.dom.overhead + ( Math.abs( this.el.nativeElement.offsetTop ) + 100 );\n        this.dom.setHeightWithParent( this.config.parentClassName, this.dom.overhead, this.dom.height.default ).then( ( res ) => {\n          this.log.info( `setHeight with ${ this.config.parentClassName }` );\n          return resolve( true );\n        } );\n      }else{\n        if( this.config.height ){\n          // if( this.config.height < ( this.dom.overhead * 2 ) ) this.config.height = this.dom.overhead * 2;\n          this.dom.setHeight( this.config.height, this.dom.overhead );\n          this.log.info( `setHeight with config.height:${ this.config.height } - overhead:${ this.dom.overhead }` );\n        }else if( this.config.bucketHeight ){\n          this.config.height = this.config.bucketHeight + this.dom.overhead;\n          this.dom.setHeight( +this.config.height, this.dom.overhead );\n          this.log.info( `setHeight with config.bucketHeight:${ this.config.bucketHeight } - overhead:${ this.dom.overhead }` );\n        }else if( this.config.bucketLimit ){\n          this.config.bucketLimit = this.config.bucketLimit > this.config.options.values.length ? this.config.options.values.length : this.config.bucketLimit;\n          this.config.bucketHeight = ( this.config.bucketLimit * 30.5 );\n          this.config.height = this.config.bucketHeight + this.dom.overhead;\n          this.dom.setHeight( +this.config.height, this.dom.overhead );\n          this.log.info( `setHeight with config.bucketLimit:${ this.config.bucketLimit } - overhead:${ this.dom.overhead }` );\n        }else{\n          this.log.info( `setHeight with defaultHeight:${ this.dom.height.default } - overhead:${ this.dom.overhead }` );\n          this.dom.setHeight( this.dom.height.default, this.dom.overhead );\n        }\n        return resolve( true );\n      }\n\n    } );\n  }\n\n\n  /**\n   * This will block certain options from being available\n   * @param bucket\n   * @param ids\n   */\n  private _blockBucketOptions( bucket: string, ids: any[] ){\n    if( [ 'assign', 'option', 'both' ].includes( bucket ) ){\n      const map = ArrayMapSetter( this.config.options.values, 'value' );\n      ids.map( ( id ) => {\n        if( id in map ){\n          if( bucket === 'assign' ){\n            this.config.options.values[ map[ id ] ].assignBlock = true;\n          }else if( bucket === 'option' ){\n            this.config.options.values[ map[ id ] ].optionBlock = true;\n          }else{\n            this.config.options.values[ map[ id ] ].assignBlock = true;\n            this.config.options.values[ map[ id ] ].optionBlock = true;\n          }\n        }\n      } );\n    }\n  }\n\n\n  /**\n   * This will un-block certain options from being available\n   * @param bucket\n   * @param ids\n   */\n  private _unblockBucketOptions( bucket: string, ids: any[] ){\n    if( [ 'assign', 'option', 'both' ].includes( bucket ) ){\n      const map = ArrayMapSetter( this.config.options.values, 'value' );\n      ids.map( ( id ) => {\n        if( id in map ){\n          if( bucket === 'assign' ){\n            this.config.options.values[ map[ id ] ].assignBlock = false;\n          }else if( bucket === 'option' ){\n            this.config.options.values[ map[ id ] ].optionBlock = false;\n          }else{\n            this.config.options.values[ map[ id ] ].assignBlock = false;\n            this.config.options.values[ map[ id ] ].optionBlock = false;\n          }\n        }\n      } );\n    }\n  }\n\n\n  /**\n   * Allow other modules to trigger certain functionality\n   * @param option\n   * @param event\n   */\n  private _setHooks(){\n    this.config.assign = ( options: SideBySideOptionInterface[], confirmed = false ) => {\n      return this._assign( options, confirmed );\n    };\n\n    this.config.remove = ( options: SideBySideOptionInterface[], confirmed = false ) => {\n      return this._remove( options, confirmed );\n    };\n    this.config.removeAllOptions = () => {\n      return of( this.onRemoveAllOptions() );\n    };\n    this.config.addAllOptions = () => {\n      return of( this.onAssignAllOptions() );\n    };\n    this.config.applyFilter = ( type, filter ) => {\n      this.onApplyFilter( type, filter );\n    };\n\n    this.config.getAssigned = () => {\n      return this.config.assigned.slice();\n    };\n\n    this.config.block = ( bucket: string, ids: any[] ) => {\n      this._blockBucketOptions( bucket, ids );\n    };\n    this.config.unblock = ( bucket: string, ids: any[] ) => {\n      this._unblockBucketOptions( bucket, ids );\n    };\n  }\n\n\n  /**\n   * Intercept the user right mouse click to show a context menu for this component\n   * @param option\n   * @param event\n   */\n  private _setContextMenu(){\n    this.dom.contextMenu.config = new PopContextMenuConfig();\n    this.dom.setSubscriber( 'context-menu', this.dom.contextMenu.config.emitter.subscribe( ( event: PopBaseEventInterface ) => {\n      this.log.event( `context-menu`, event );\n      this.events.emit( event );\n    } ) );\n  }\n\n\n  /**\n   * Get the count of assigned options\n   */\n  private _checkForAssignedOptions(){\n    this.config.assigned = Object.keys( this.ui.assigned );\n    this.ui.assignedCount = this.config.assigned.length;\n    this.ui.optionsCount = this.config.options.values.length;\n    if(this.ui.assignedCount == this.ui.optionsCount) this.ui.optionsCount = 0\n  }\n\n\n  /**\n   * Filter assigned options\n   * @param filter\n   */\n  private _filterAssignedOptions( filter: string ){\n\n    this.config.options.values.map( option => {\n      option.assignedFilter = !ObjectContainsTagSearch( option, filter );\n    } );\n\n\n  }\n\n\n  /**\n   * Filter un-assigned options\n   * @param filter\n   */\n  private _filterAvailableOptions( filter: string ){\n    this.config.options.values.map( option => {\n      option.optionFilter = !ObjectContainsTagSearch( option, filter );\n    } );\n  }\n\n\n  /**\n   * Set the intial state of the assigned options\n   */\n  private _trackAssignedOptions(){\n    this.ui.assigned = {};\n    this.config.assigned.map( optionID => {\n      this.ui.assigned[ optionID ] = 1;\n    } );\n  }\n\n\n}\n","import { Component, Inject, OnInit } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport { PopConfirmationDialogDataInterface } from '../pop-dialogs.model';\n\n\n@Component({\n  selector: 'lib-pop-confirmation-dialog',\n  templateUrl: './pop-confirmation-dialog.component.html',\n  styleUrls: [ './pop-confirmation-dialog.component.scss' ]\n})\nexport class PopConfirmationDialogComponent implements OnInit {\n  constructor(\n    @Inject(MAT_DIALOG_DATA) public config: PopConfirmationDialogDataInterface,\n    public dialog: MatDialogRef<PopConfirmationDialogComponent>\n  ){\n  }\n\n\n  ngOnInit(){\n    if( !this.config.display ) this.config.display = 'Confirmation';\n    if( !this.config.option ) this.config.option = { confirmed: 1 };\n    if( !this.config.align ) this.config.align = 'center';\n  }\n\n\n  onConfirm(){\n    this.dialog.close(this.config.option);\n  }\n\n\n  onCancel(){\n    this.dialog.close(null);\n  }\n}\n","import { Component, Inject, OnDestroy, OnInit } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport { PopExtendDynamicComponent } from '../../../../pop-extend-dynamic.component';\nimport { slideInOut } from '../../../../pop-common-animations.model';\n\n@Component({\n  selector: 'lib-pop-entity-field-modal',\n  templateUrl: './pop-entity-field-modal.component.html',\n  styleUrls: ['./pop-entity-field-modal.component.scss'],\n  animations: [\n    slideInOut\n  ]\n})\nexport class PopEntityFieldModalComponent extends PopExtendDynamicComponent implements OnInit, OnDestroy {\n  public name = 'PopEntityFieldModalComponent';\n\n\n  constructor(\n    public dialog: MatDialogRef<PopEntityFieldModalComponent>,\n    @Inject(MAT_DIALOG_DATA) public data: any) {\n    super();\n  }\n\n  ngOnInit(): void {\n    super.ngOnInit();\n  }\n\n\n\n  onFormSubmit(){\n    if( this.dom.state.validated ){\n\n    }\n  }\n\n\n  onFormCancel(){\n    this.dom.state.loaded = false;\n    this.dom.setTimeout(`close-modal`, () => {\n      this.dialog.close(-1);\n    }, 500);\n\n  }\n\n  ngOnDestroy():void{\n    super.ngOnDestroy();\n  }\n\n}\n","import {Component, ElementRef, Inject, Input, OnDestroy, OnInit} from '@angular/core';\nimport {EntityFieldComponentInterface} from './pop-entity-field.model';\nimport {\n  CoreConfig,\n  Dictionary,\n  FIELD_CUSTOM_SETTING,\n  FieldConfig,\n  FieldCustomSettingInterface,\n  FieldEntry,\n  KeyMap,\n  PopBaseEventInterface,\n  ServiceInjector\n} from '../../../pop-common.model';\nimport {PopExtendComponent} from '../../../pop-extend.component';\nimport {\n  ArrayMapSetter,\n  ConvertArrayToOptionList,\n  DeepCopy,\n  IsArray,\n  IsDefined,\n  IsNumber,\n  IsObject,\n  IsObjectThrowError,\n} from '../../../pop-common-utility';\nimport {SelectConfig} from '../../base/pop-field-item/pop-select/select-config.model';\nimport {InputConfig} from '../../base/pop-field-item/pop-input/input-config.model';\nimport {PopDomService} from '../../../services/pop-dom.service';\nimport {IsValidFieldPatchEvent} from '../pop-entity-utility';\nimport {PopEntityFieldService} from './pop-entity-field.service';\nimport {Validators} from '@angular/forms';\nimport {ButtonConfig} from '../../base/pop-field-item/pop-button/button-config.model';\nimport {PopConfirmationDialogComponent} from '../../base/pop-dialogs/pop-confirmation-dialog/pop-confirmation-dialog.component';\nimport {MatDialog} from '@angular/material/dialog';\nimport {PopEntityFieldModalComponent} from './pop-entity-field-modal/pop-entity-field-modal.component';\n\n\n@Component({\n  template: '<div>Boiler</div>',\n})\nexport class PopEntityFieldBoilerComponent extends PopExtendComponent implements EntityFieldComponentInterface, OnInit, OnDestroy {\n  @Input() field: FieldConfig;\n  public name = 'PopEntityFieldBoilerComponent';\n\n  protected srv: {\n    dialog: MatDialog,\n    field: PopEntityFieldService,\n  } = {\n    dialog: ServiceInjector.get(MatDialog),\n    field: ServiceInjector.get(PopEntityFieldService),\n  };\n\n  public ui = {\n    actionBtnWidth: 0,\n    asset: <KeyMap<{\n      display: InputConfig,\n      entry: SelectConfig,\n      customLabel: InputConfig,\n      actionBtnWidth?: number,\n      canCallBtn?: ButtonConfig,\n      canTextBtn?: ButtonConfig,\n    }>>undefined,\n  };\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService,\n    @Inject(FIELD_CUSTOM_SETTING) public custom_setting: Dictionary<FieldCustomSettingInterface> = {}\n  ) {\n    super();\n\n\n    /**\n     * This should transformValue and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        // #1: Enforce a CoreConfig\n        this.field = IsObjectThrowError(this.field, ['id', 'data_keys'], `${this.name}:configureDom: - this.field`) ? this.field : null;\n        this.id = this.field.id;\n        this.ui.asset = {};\n        this._setInitialConfig();\n        this._transformChildren();\n\n\n        this.field.data_keys.map((dataKey: number, index) => {\n          this.dom.session[dataKey] = {};\n          this.dom.session[dataKey].display = {};\n          this.dom.state[dataKey] = {\n            open: false,\n            template: this.field.state,\n            footer_adjust: this.field.state,\n            customLabel: false\n          };\n        });\n\n        this.dom.setSubscriber(`parent-event-handler`, this.events.subscribe((event: PopBaseEventInterface) => {\n          if (IsObject(event, true)) {\n            if (event.name === 'add') {\n              this.onAdd(event);\n            }\n          }\n        }));\n\n        // this.srv.field.setFieldEntries(this.field).then(() => {\n        //   this.srv.field.setFieldValues(this.field).then(() => {\n        //     return resolve(true);\n        //   });\n        // });\n\n        return resolve(true);\n      });\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        this._restoreDomSession();\n        this._setAssetConfigs();\n        this._setFieldAttributes();\n        return resolve(true);\n      });\n    };\n  }\n\n\n  ngOnInit() {\n    super.ngOnInit();\n  }\n\n\n  /**\n   * Handle click of action button\n   * @param event\n   * @param dataKey\n   */\n  onActionEvent(event: PopBaseEventInterface, dataKey?: number) {\n    if (event.type === 'field') {\n      switch (String(event.name).toLowerCase()) {\n        // case 'add':\n        //   this.onAdd(event);\n        //   break;\n        case 'remove':\n          this.onRemove(event, dataKey);\n          break;\n        case 'edit':\n          this.onEdit(event, dataKey);\n          break;\n        case 'close':\n          this.onClose(event, dataKey);\n          break;\n        default:\n          break;\n      }\n    }\n    return true;\n  }\n\n\n  /**\n   * handle Input Changes from the field items\n   * @param event\n   * @param dataKey\n   * @param name\n   */\n  onFieldItemEvent(event: PopBaseEventInterface, dataKey: number = null, name: string = null) {\n    if (IsValidFieldPatchEvent(this.core, event)) {\n      this.onPatch(event, dataKey, name);\n    } else if (event.type === 'field') {\n      if (event.name === 'close') {\n        this.onClose(event, dataKey);\n      }\n    }\n    return true;\n  }\n\n\n  /**\n   * User wants to add a value entry  into the field\n   * @param event\n   */\n  onAdd(event: PopBaseEventInterface) {\n    // console.log('add lower', this.field.data_keys.length < this.field.entries.length, this.field.entries);\n    this.log.event(`onAdd`, event,);\n    if (this.field.data_keys.length < this.field.entries.length) {\n      const index = this.field.entries.length - 1;\n      const item = this.srv.field.addEntryValue(this.core, this.field);\n      const data = item.data;\n      delete item.data;\n\n      this.field.data[item.entry.id] = data;\n      this.field.items[item.entry.id] = item;\n\n\n      this.field.data_keys.push(item.entry.id + '');\n\n      this._setFieldItemAttribute(item.entry.id, index);\n      this._setAssetConfig(item.entry.id, index);\n      this.dom.setTimeout('open-new', () => {\n        this._updateState(item.entry.id, 'open', true);\n      }, 0);\n\n\n      // this.dom.session[ value.entry.id ] = {};\n      // this.dom.session[ value.entry.id ].display = {};\n      // this.dom.state[ value.entry.id ] = {\n      //   open: true,\n      //   template: this.field.state,\n      //   footer_adjust: this.field.state,\n      //   customLabel: false\n      // };\n\n    }\n    return true;\n  }\n\n\n  /**\n   * User wants to open the value entry and make edits\n   * @param event\n   */\n\n  onEdit(event?: PopBaseEventInterface, dataKey?: number) {\n\n    this.log.event(`onEdit`, event);\n    if (this.field.modal) {\n      console.log('has modal');\n\n      const dialogRef = this.srv.dialog.open(PopEntityFieldModalComponent, {\n        width: `${window.innerWidth * .50}px`,\n        height: `${window.innerHeight * .50}px`,\n        panelClass: 'sw-relative',\n        data: {\n          core: this.core,\n          field: this.field\n        }\n      });\n\n\n      this.dom.subscriber.dialog = dialogRef.beforeClosed().subscribe((changed) => {\n        if (changed || this.dom.state.refresh) {\n          // this._configureTable();up\n        }\n        this.dom.state.blockModal = false;\n      });\n    } else {\n      this.dom.state.template = 'template_edit';\n      this.dom.state.open = true;\n      if (IsDefined(dataKey) && this.dom.state[dataKey]) {\n        this.dom.state[dataKey].template = 'template_edit';\n        this.dom.state[dataKey].open = true;\n      } else {\n        Object.keys(this.dom.state).map((key) => {\n          if (IsNumber(key)) {\n            this.dom.state[key].template = 'template_edit';\n            this.dom.state[key].open = true;\n          }\n        });\n      }\n      this.dom.store('state');\n      return true;\n    }\n  }\n\n\n  /**\n   * User wants to remove a value entry\n   * @param event\n   */\n  onRemove(event: PopBaseEventInterface, dataKey: number) {\n    this.log.event(`onRemove`, event);\n    if (this.field.facade) {\n      this.onBubbleEvent('remove', {dataKey: dataKey});\n    } else {\n      this.srv.dialog.open(PopConfirmationDialogComponent, {\n        width: '350px',\n        data: {\n          option: null,\n          body: `Delete this field value?`\n        }\n      }).afterClosed().subscribe(option => {\n        if (option && option.confirmed) {\n          this.srv.field.removeEntryValue(this.core, this.field, dataKey).then((res) => {\n            delete this.field.data[dataKey];\n            delete this.field.items[dataKey];\n            this.field.data_keys.pop();\n            delete this.dom.state[dataKey];\n            delete this.ui.asset[dataKey];\n            delete this.dom.session[dataKey];\n            this.dom.store('session');\n            this.onBubbleEvent('remove', {dataKey: dataKey});\n          });\n\n        }\n      });\n    }\n\n\n    return true;\n  }\n\n\n  /**\n   * User closes the edit ability of the value entries\n   * @param event\n   */\n\n  onClose(event: PopBaseEventInterface, dataKey?: number) {\n    this.log.event(`onClose`, event);\n    this.dom.state.open = false;\n    this.dom.state.template = 'template_readonly';\n    if (dataKey) {\n      this.dom.state[dataKey].template = 'template_readonly';\n      this.dom.state[dataKey].open = false;\n    } else {\n      Object.keys(this.dom.state).map((key) => {\n        if (IsNumber(key)) {\n          this.dom.state[key].template = 'template_readonly';\n          this.dom.state[key].open = false;\n        }\n      });\n    }\n    this.onBubbleEvent('close');\n    return true;\n  }\n\n\n  /**\n   * A method to remove an additional values from this field\n   * @param id\n   * @param archive\n   */\n  onPatch(event: PopBaseEventInterface, dataKey: number = null, name: string = null): Promise<boolean> {\n    return new Promise(async (resolve) => {\n      event.data_key = dataKey;\n      event.column = name;\n      if (this.field.facade) {\n        this.onBubbleEvent('onPatch', null, event);\n      } else {\n        if (true) {\n          await this.srv.field.updateFieldItem(this.core, this.field, event);\n          this.field.data[dataKey][name] = event.config.control.value;\n          this._triggerUpdateAssetDisplay(dataKey);\n        }\n      }\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * Handle the bubble events that come up\n   * @param event\n   */\n  onBubbleEvent(name: string, extension?: Dictionary<any>, event?: PopBaseEventInterface): boolean {\n    if (!event) event = {source: this.name, type: 'field', name: name};\n    if (extension) event = {...event, ...extension};\n    this.log.event(`bubbleEvent`, event);\n    this.events.emit(event);\n    return true;\n  }\n\n\n  /**\n   * Clean up dom subscribers, interval, timeouts, ..etc\n   */\n  ngOnDestroy() {\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                   Base Protected Methods                                     *\n   *                                    ( Protected Method )                                      *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  /**\n   * Set the initial config\n   * Intended to be overridden per field\n   */\n  protected _setInitialConfig(): void {\n  }\n\n\n  /**\n   * Pass in any session changes\n   * The user may change tabs and the state should be restored\n   */\n  protected _restoreDomSession() {\n    this.field.data_keys.map((dataKey: number, index) => {\n      if (IsObject(this.dom.session[dataKey], true)) {\n        const item = this.field.items[dataKey];\n        const session = this.dom.session[dataKey];\n        if (IsObject(session.entry, ['id'])) {\n          item.entry = session.entry;\n        }\n      }\n    });\n  }\n\n\n  /**\n   * Build the default configs that are across all the fieelds\n   */\n  protected _setAssetConfigs() {\n    this.srv.field.setFieldCustomSetting(this.field, this.custom_setting);\n    delete this.custom_setting;\n    this.field.data_keys.map((dataKey: number, index) => {\n      this._setAssetConfig(+dataKey, index);\n    });\n  }\n\n\n  /**\n   * Labels are a built in method that all fields should need\n   * @param dataKey\n   * @param index\n   * @private\n   */\n  protected _setAssetConfig(dataKey: number, index: number) {\n\n    const customEntries = DeepCopy(this.field.entries).filter((entry) => {\n      return entry.type === 'custom';\n    });\n    const providedEntries = DeepCopy(this.field.entries).filter((entry) => {\n      return entry.type !== 'custom';\n    });\n    const entries = [...providedEntries];\n\n    const item = this.field.items[dataKey];\n\n    if (!item.entry) {\n      item.entry = this.field.entries[0];\n    }\n\n    this._updateDisplayField(dataKey, 'label', item.entry.name);\n\n    const customLabel = this.field.setting.edit_label && this.field.setting.custom_label && item.entry.type === 'custom' ? true : false;\n\n    this._updateState(dataKey, 'custom_label', customLabel);\n\n    if (this.field.setting.custom_label && IsArray(customEntries, true)) entries.push(customEntries[customEntries.length - 1]);\n    // ToDo:: Add api calls to store values for these configs\n    if (!IsObject(this.ui.asset[dataKey], true)) {\n      this.ui.asset[dataKey] = {\n        display: new InputConfig({\n          readonly: true,\n          label: item.entry.name,\n          value: this._getAssetDisplayStr(dataKey),\n          // minimal: true,\n        }),\n\n        entry: new SelectConfig({\n          label: 'Label',\n          value: item.entry ? item.entry.id : null,\n          options: {values: ConvertArrayToOptionList(entries)},\n          minimal: true,\n          facade: true,\n          patch: {\n            field: ``,\n            path: ``,\n            callback: (core: CoreConfig, event: PopBaseEventInterface) => {\n              if (IsValidFieldPatchEvent(core, event)) {\n                this._updateFieldEntry(dataKey, +event.config.control.value);\n              }\n            }\n          }\n        }),\n        customLabel: new InputConfig({\n          label: 'Custom Label',\n          value: this.dom.session[dataKey].customLabel ? this.dom.session[dataKey].customLabel : '',\n          required: true,\n          validators: [Validators.required],\n          maxlength: 24,\n          // minimal: true,\n          facade: true,\n          patch: {\n            field: ``,\n            path: ``,\n            callback: (core: CoreConfig, event: PopBaseEventInterface) => {\n              if (IsValidFieldPatchEvent(core, event)) {\n                this._updateCustomEntryLabel(dataKey, event.config.control.value);\n              }\n            }\n          }\n        })\n      };\n    }\n\n    this._updateCustomLabelState(dataKey, item.entry);\n  }\n\n\n  /**\n   * Updates when a values changes it label/entry\n   * @param dataKey\n   * @param entryId\n   */\n  protected _updateFieldEntry(dataKey: number, entryId: number) {\n    const item = this.field.items[dataKey];\n    if (IsObject(item, true)) {\n      const entryLookup = ArrayMapSetter(this.field.entries, 'id');\n      const entry = this.field.entries[entryLookup[entryId]];\n      item.entry = entry;\n      this.dom.session[dataKey].entry = entry;\n      this.dom.store('session');\n      this._updateCustomLabelState(dataKey, entry);\n    }\n  }\n\n\n  /**\n   * Updates the custom label if the user chooses to make a custom entry label\n   * @param dataKey\n   * @param value\n   */\n  protected _updateCustomEntryLabel(dataKey: number, value: string) {\n    const item = this.field.items[dataKey];\n    if (IsObject(item, true)) {\n      this._updateDisplayField(dataKey, 'label', value);\n      if (IsObject(this.dom.session[dataKey], true)) {\n        this.dom.session[dataKey].customLabel = value;\n        this.dom.store('session');\n\n      }\n\n      this._updateDisplayLabel(dataKey, value);\n      // ToDo:: Figure where to save this\n    }\n  }\n\n\n  /**\n   * Ensure the state of the view matches up according to the stored entry/label\n   * Custom Labels need special handling\n   * @param dataKey\n   * @param entry\n   */\n  protected _updateCustomLabelState(dataKey: number, entry: FieldEntry) {\n    if (dataKey && IsObject(entry, ['id', 'type', 'name'])) {\n      const isCustom = entry.type === 'custom';\n      if (isCustom) {\n        this._updateState(dataKey, 'customLabel', (this.field.setting.edit_label && isCustom ? true : false));\n        if (!this.ui.asset[dataKey].customLabel.control.value) {\n          this.ui.asset[dataKey].customLabel.control.setValue('Custom', {emitEvent: true});\n          this._updateDisplayField(dataKey, 'label', 'Custom');\n        } else {\n          const previousCustomLabel = this.ui.asset[dataKey].customLabel.control.value;\n          this._updateDisplayField(dataKey, 'label', previousCustomLabel);\n          if (this.dom.session.entry) {\n            this.dom.session.entry.name = previousCustomLabel;\n          }\n        }\n        this._updateDisplayLabel(dataKey, this.ui.asset[dataKey].customLabel.control.value);\n      } else {\n        this._updateState(dataKey, 'customLabel', false);\n        this._updateDisplayField(dataKey, 'label', entry.name);\n        this._updateDisplayLabel(dataKey, entry.name);\n      }\n    }\n  }\n\n\n  /**\n   * Update the display label of the value config\n   * Some fields only use a single field item that is defaulted to the value column\n   * @param dataKey\n   * @param value\n   */\n  protected _updateDisplayLabel(dataKey: number, value: string) {\n    const item = this.field.items[dataKey];\n    if (IsObject(item, true)) {\n      const configs = <any>item.config;\n      const valueConfig = IsObject(item.config, ['value']) ? <InputConfig>configs.value : null;\n      if (IsObject(valueConfig, true)) { // this means that it a a simple field,\n        valueConfig.label = value;\n      }\n      this.ui.asset[dataKey].display.label = value;\n    }\n  }\n\n\n  /**\n   * Set the Display of a specific value entry\n   * Sometime a display input is used to combine all the values into one, it appears in the readonly state\n   * @param dataKey\n   */\n  protected _updateAssetDisplay(dataKey: number) {\n    if (this.ui.asset && this.ui.asset[dataKey]) {\n      const display = <InputConfig>this.ui.asset[dataKey].display;\n      display.value = this._getAssetDisplayStr(dataKey);\n      this.dom.setTimeout(`display-update-${dataKey}`, () => {\n        display.control.value = display.value;\n      }, 0);\n    }\n  }\n\n\n  /**\n   * Debounce requests for set phone display\n   * @param dataKey\n   */\n  protected _triggerUpdateAssetDisplay(dataKey: number) {\n    this.dom.setTimeout(`field-display-${dataKey}`, () => {\n      this._updateAssetDisplay(dataKey);\n    }, 100);\n  }\n\n\n  /**\n   * Session the display value for a field item change\n   * In some cases the value that is selected is not necessarily what should be presented, so we track it separately just in case\n   * Ie ... when an id is selected when need to show the appropriate label that should go with it not the id itself\n   * @param dataKey\n   * @param field\n   * @param value\n   */\n  protected _updateDisplayField(dataKey: number, field: string, value: string) {\n    if (IsDefined(dataKey) && IsObject(this.dom.session)) {\n      if (!IsObject(this.dom.session[dataKey])) this.dom.session[dataKey] = {};\n      if (!IsObject(this.dom.session[dataKey].display)) this.dom.session[dataKey].display = {};\n      this.dom.session[dataKey].display[field] = value;\n      // this.dom.store('session');\n    }\n  }\n\n\n  /**\n   * Get the actual data object for a specific key\n   * Pass in a field key if you want a only a certain field value\n   * @param dataKey\n   * @param fieldKey\n   */\n  protected _getDataKey(dataKey: number, fieldKey?: string) {\n    let data = IsObjectThrowError(this.field.data, true, `${this.name}:getDataKey`) ? this.field.data[dataKey] : null;\n    if (data && fieldKey) {\n      data = fieldKey in data ? data[fieldKey] : null;\n    }\n    return data;\n  }\n\n\n  /**\n   * Builds the display string\n   * Override in each field component as necessary\n   * @param dataKey\n   */\n  protected _getAssetDisplayStr(dataKey: number): string {\n    let str = '';\n    const configs = this._getDataKeyItemConfig(dataKey);\n    Object.keys(configs).map((name) => {\n      const config = configs[name];\n      if (config.control && config.control.value) {\n        str += (' ' + config.control.value);\n      }\n    });\n    return String(str).trim();\n  }\n\n\n  /**\n   * This will be different for each type of field group\n   * Intended to be overridden in each class, gives the mutate/transform resources if needed\n   */\n  protected _transformChildren() {\n\n  }\n\n\n  /**\n   * This will be different for each type of field group\n   * Intended to be overridden in each class\n   */\n  protected _setFieldAttributes(): boolean {\n\n    return true;\n  }\n\n\n  /**\n   * This will be different for each type of field group\n   * Intended to be overridden in each class\n   */\n  protected _setFieldItemAttribute(dataKey: number, index: number): boolean {\n\n    return true;\n  }\n\n\n  /**\n   * Get the item configs for a of a dataKey\n   * Pass in a fieldKey if you only want the item config of a certain field\n   * @param dataKey\n   * @param fieldKey\n   */\n  protected _getDataKeyItemConfig(dataKey: number, fieldKey?: string) {\n    const data = IsObjectThrowError(this.field.items[dataKey], true, `${this.name}:_getDataKeyItem`) ? this.field.items[dataKey] : null;\n    if (fieldKey) {\n      const config = IsObjectThrowError(data.config[fieldKey], true, `${this.name}:_getDataKeyItem:${fieldKey}`) ? data.config[fieldKey] : null;\n      return config;\n    }\n    return data.config;\n  }\n\n\n  /**\n   * Resolve a value to the name that goes with it from the option list\n   * @param value\n   * @param index\n   */\n  protected _getTypeOptionName(value: string, index: number): string {\n    const typeConfig = <SelectConfig>this._getDataKeyItemConfig(this.field.data_keys[index], 'type');\n    if (typeConfig.options) {\n      const optionsMap = ArrayMapSetter(typeConfig.options.values, 'value');\n      const option = value in optionsMap ? typeConfig.options.values[optionsMap[value]] : null;\n      if (option) {\n        return option.name;\n      }\n      return value;\n    }\n    return '';\n  }\n\n\n  /**\n   * Resolve a value to the name that goes with it from the option list\n   * @param value\n   * @param index\n   */\n  protected _getEntryOptionName(value: string, index: number): string {\n    const titleConfig = <SelectConfig>this._getDataKeyItemConfig(this.field.data_keys[index], 'title');\n    if (titleConfig.options) {\n      const optionsMap = ArrayMapSetter(titleConfig.options.values, 'value');\n      const option = value in optionsMap ? titleConfig.options.values[optionsMap[value]] : null;\n      if (option) {\n        return option.name;\n      }\n      return value;\n    }\n    return '';\n  }\n\n\n  /**\n   * Get the value entry of a specific index\n   * @param index\n   */\n  protected _getValueEntry(index: number): FieldEntry {\n    if (IsArray(this.field.entries, true)) {\n      return IsObject(this.field.entries[index], true) ? this.field.entries[index] : this.field.entries[0];\n    }\n    return null;\n  }\n\n\n  /**\n   * Helper method to update a state variable, and make sure that a state object exits for each data key\n   * @param dataKey\n   * @param field\n   * @param value\n   */\n  protected _updateState(dataKey: number, field: string, value: string | boolean | number) {\n    if (IsDefined(dataKey) && IsObject(this.dom.state)) {\n      if (!IsObject(this.dom.state[dataKey])) {\n        this.dom.state[dataKey] = {\n          open: false,\n          template: this.field.state,\n          footer_adjust: this.field.state,\n          customLabel: false\n        };\n      }\n      this.dom.state[dataKey][field] = value;\n    }\n  }\n\n}\n\n","import { Component, ElementRef, Input, OnDestroy, OnInit, } from '@angular/core';\nimport { EntityFieldComponentInterface } from '../pop-entity-field.model';\nimport { FieldConfig } from '../../../../pop-common.model';\nimport { PopEntityFieldBoilerComponent as FieldTemplate } from '../pop-entity-field-boiler.component';\nimport { PopDomService } from '../../../../services/pop-dom.service';\nimport { NameFieldSetting } from './name.setting';\n\n\n@Component({\n  selector: 'lib-pop-entity-name',\n  templateUrl: './pop-entity-name.component.html',\n  styleUrls: [ './pop-entity-name.component.scss' ],\n})\nexport class PopEntityNameComponent extends FieldTemplate implements EntityFieldComponentInterface, OnInit, OnDestroy  {\n  @Input() field: FieldConfig;\n\n  public name = 'PopEntityNameComponent';\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService\n  ){\n    super(el, _domRepo, NameFieldSetting);\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { PopExtendComponent } from '../../../../pop-extend.component';\nimport { FieldConfig, PopBaseEventInterface } from '../../../../pop-common.model';\nimport { TimeConfig } from '../../../base/pop-field-item/pop-time/time-config.model';\nimport { DateConfig } from '../../../base/pop-field-item/pop-date/date-config.model';\nimport { ConvertDateFormat, ConvertDateToTimeFormat } from '../../../../pop-common-utility';\n\n\n@Component({\n  selector: 'lib-pop-entity-datetime',\n  templateUrl: './pop-entity-datetime.component.html',\n  styleUrls: [ './pop-entity-datetime.component.scss' ]\n})\nexport class PopEntityDatetimeComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() field: FieldConfig;\n\n  public name ='PopEntityDatetimeComponent';\n\n\n  constructor(\n    public el: ElementRef,\n  ){\n    super();\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        this.id = this.field.id;\n        this.trait.bubble = true;\n        this.dom.state.open = false;\n        this.dom.state.footer_adjust = false;\n        this.dom.state.row1 = {\n          first: true,\n          visible: true,\n        };\n        this.setDateItem();\n        this.setTimeItem();\n        resolve(true);\n      });\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  setDateItem(): void{\n    let dateValue = this.field.items[ 'datetime' ].value ? ConvertDateFormat(this.field.items[ 'datetime' ].value, 'mm/dd/yyyy') : null;\n    dateValue = dateValue === '12/31/1969' ? null : dateValue;\n    // console.log(dateValue, 'dateValue');\n    this.field.items[ 'date' ] = new DateConfig({\n      label: 'Date',\n      value: dateValue,\n    });\n  }\n\n\n  setTimeItem(): void{\n    const timeValue = this.field.items[ 'datetime' ].value ? ConvertDateToTimeFormat(this.field.items[ 'datetime' ].value) : null;\n    this.field.items[ 'time' ] = new TimeConfig({\n      label: 'Time',\n      time: 12,\n      interval: 1,\n      value: timeValue,\n    });\n  }\n\n\n  emitInputEvent(name, config: any, message: string = null, success: boolean = null): void{\n    if( this.field.options.bubble ) this.events.emit({ source: this.name, type: 'field', name: name, config: config, success: success, message: message });\n  }\n\n\n  handleDateEvent(event): void{\n    const items = this.field.items;\n    if( items[ 'datetime' ] && items[ 'time' ] && items[ 'time' ].value ){\n      const datetimeValue = ConvertDateFormat(items[ 'date' ].control.value, 'yyyy-mm-dd') + ' ' + items[ 'time' ].control.value;\n      // console.log(datetimeValue, 'datetimeValue');\n      items[ 'datetime' ].triggerOnChange(datetimeValue);\n    }\n    if( this.field.options.bubble ){\n      this.emitInputEvent(event.name, this.field.items[ 'date' ]);\n    }\n    // this.events.emit(event);\n  }\n\n\n  handleEvent(event: PopBaseEventInterface): void{\n    // console.log(event, 'handleEventEmail');\n\n    this.events.emit(event);\n  }\n\n\n  handleTimeEvent(event){\n    if( event.type === 'field' && event.name === 'onChange' ){\n      const items = this.field.items;\n      if( items[ 'datetime' ] && items[ 'date' ] && items[ 'date' ].value ){\n        const datetimeValue = ConvertDateFormat(items[ 'date' ].control.value, 'yyyy-mm-dd') + ' ' + items[ 'time' ].control.value;\n        console.log(datetimeValue, 'datetimeValue');\n        items[ 'datetime' ].triggerOnChange(datetimeValue);\n      }\n    }\n\n    if( this.field.options.bubble ){\n      this.emitInputEvent(event.name, this.field.items[ 'time' ]);\n    }\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { EntityFieldComponentInterface } from '../pop-entity-field.model';\nimport { FieldConfig } from '../../../../pop-common.model';\nimport { PopEntityFieldBoilerComponent as FieldTemplate } from '../pop-entity-field-boiler.component';\nimport { PopDomService } from '../../../../services/pop-dom.service';\nimport { EmailFieldSetting } from './email.setting';\nimport { ButtonConfig } from '../../../base/pop-field-item/pop-button/button-config.model';\nimport { SelectConfig } from '../../../base/pop-field-item/pop-select/select-config.model';\nimport { InputConfig } from '../../../base/pop-field-item/pop-input/input-config.model';\nimport { Validators } from '@angular/forms';\n\n\n@Component({\n  selector: 'lib-pop-entity-email',\n  templateUrl: './pop-entity-email.component.html',\n  styleUrls: [ './pop-entity-email.component.scss' ],\n})\nexport class PopEntityEmailComponent extends FieldTemplate implements EntityFieldComponentInterface, OnInit, OnDestroy {\n  @Input() field: FieldConfig;\n\n\n  public name = 'PopEntityEmailComponent';\n\n  protected asset = {\n    extensionKeys: [ 'action' ],\n  };\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService\n  ){\n    super(el, _domRepo, EmailFieldSetting);\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /**\n   * This will setup this field to handle changes and transformations\n   */\n  protected _setFieldAttributes(): boolean{\n\n    if( this.field && this.field.items ){\n      Object.keys(this.field.items).map((dataKey, index) => {\n        this._setFieldItemAttribute(+dataKey, index);\n      });\n    }\n    return true;\n  }\n\n\n  /**\n   * This will be different for each type of field group\n   * Intended to be overridden in each class\n   */\n  protected _setFieldItemAttribute(dataKey: number, index: number): boolean{\n\n    const item = this.field.items[ dataKey ];\n    const configKeys = Object.keys(item.config);\n\n    this.dom.state.has_extension = configKeys.some(r => this.asset.extensionKeys.includes(r));\n\n    if( 'action' in item.config ){\n      this.ui.actionBtnWidth = 50;\n      item.config[ 'action' ] = new ButtonConfig({\n        icon: 'email',\n        size: 42,\n        value: null,\n        // disabled: true\n      });\n    }\n\n\n    if( 'address' in item.config ){\n      const child = this.field.children[ 'address' ];\n      const addressConfig = <InputConfig>item.config[ 'address' ];\n      addressConfig.pattern = 'Email';\n      addressConfig.type = 'email';\n      const validators = [];\n      validators.push(Validators.email);\n      if( +child.rule.required ) validators.push(Validators.required);\n      if( +child.rule.maxlength ) validators.push(Validators.maxLength(+child.rule.maxlength));\n      addressConfig.validators = validators;\n      if( this.field.multiple ) addressConfig.label = this.field.entries[ index ].name;\n      addressConfig.patch.callback = () => {\n        this._updateAddress(+dataKey, index);\n      };\n      this._updateAddress(+dataKey, index);\n    }\n\n    return true;\n  }\n\n\n  private _updateAddress(dataKey: number, index: number){\n    const addressConfig = <SelectConfig>this._getDataKeyItemConfig(dataKey, 'address');\n    if( addressConfig.metadata.source ){\n      const value = addressConfig.control.value;\n      addressConfig.value = value;\n\n      this._triggerUpdateAssetDisplay(dataKey);\n    }\n  }\n\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { EntityFieldComponentInterface } from '../pop-entity-field.model';\nimport { InputConfig } from '../../../base/pop-field-item/pop-input/input-config.model';\nimport { FieldConfig, FieldEntry } from '../../../../pop-common.model';\nimport { ArrayMapSetter, IsArray, IsObject, SnakeToPascal, TitleCase } from '../../../../pop-common-utility';\nimport { SelectConfig } from '../../../base/pop-field-item/pop-select/select-config.model';\nimport { PopDomService } from '../../../../services/pop-dom.service';\nimport { ButtonConfig } from '../../../base/pop-field-item/pop-button/button-config.model';\nimport { PopEntityFieldBoilerComponent as FieldTemplate } from '../pop-entity-field-boiler.component';\nimport { PhoneFieldSetting } from './phone.setting';\n\n\n@Component({\n  selector: 'lib-pop-entity-phone',\n  templateUrl: './pop-entity-phone.component.html',\n  styleUrls: [ './pop-entity-phone.component.scss' ]\n})\nexport class PopEntityPhoneComponent extends FieldTemplate implements EntityFieldComponentInterface, OnInit, OnDestroy {\n  @Input() field: FieldConfig;\n  public name = 'PopEntityPhoneComponent';\n\n  protected asset = {\n    extensionKeys: [ 'type', 'voice_button', 'sms_button', 'do_not_call', 'do_not_sms', 'country_id' ],\n  };\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService\n  ){\n    super(el, _domRepo, PhoneFieldSetting);\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                  Override Inherited Methods                                  *\n   *                                    ( Protected Methods )                                     *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  /**\n   * Builds the display string\n   * @param dataKey\n   */\n  protected _getAssetDisplayStr(dataKey: number): string{\n    let str = '';\n    const display = this.dom.session[ dataKey ].display;\n    const items = this._getDataKeyItemConfig(dataKey);\n    if( 'country_id' in items && display[ 'country_id' ] ){\n      str += `+${display[ 'country_id' ]} `;\n    }\n    if( display[ 'number' ] ){\n      str += `${display[ 'number' ]}`;\n    }\n    if( 'extension' in items && display[ 'extension' ] ){\n      str += ` Ext. ${display[ 'extension' ]} `;\n    }\n    return str;\n  }\n\n\n  /**\n   * This will setup this field to handle changes and transformations\n   */\n  protected _setFieldAttributes(): boolean{\n\n\n    if( this.field && this.field.items ){\n      Object.keys(this.field.items).map((dataKey, index) => {\n        this._setFieldItemAttribute(+dataKey, index);\n      });\n\n    }\n    return true;\n  }\n\n\n  protected _setFieldItemAttribute(dataKey: number, index: number): boolean{\n    this.ui.actionBtnWidth = 50;\n\n    let hasCallBtn = false;\n    let hasTextBtn = false;\n\n    const item = this.field.items[ dataKey ];\n    const configKeys = Object.keys(item.config);\n\n    this.dom.state.has_extension = configKeys.some(r => this.asset.extensionKeys.includes(r));\n\n    this.ui.asset[ dataKey ].canCallBtn = new ButtonConfig({\n      icon: 'local_phone',\n      value: null,\n      // disabled: true\n    });\n    this.ui.asset[ dataKey ].canTextBtn = new ButtonConfig({\n      icon: 'textsms',\n      value: null,\n      // disabled: true\n    });\n\n\n    if( 'type' in item.config ){\n      // If type is set, use as the label of the phone number\n      const typeConfig = <SelectConfig>item.config[ 'type' ];\n      this._updateNumberLabel(+dataKey, index);\n      typeConfig.patch.callback = () => {\n        this._updateNumberLabel(+dataKey, index);\n      };\n      // If value entry exists, disable type\n      // if( this.field.multiple && index in this.field.entries ){\n      //   typeConfig.control.disable();\n      // }else{\n      //   typeConfig.control.enable();\n      // }\n    }\n\n\n    if( 'stop_call_at' in item.config ){\n      // ToDo:: Figure out what this button will actually do\n      hasCallBtn = true;\n    }\n    if( 'stop_text_at' in item.config ){\n      // ToDo:: Figure out what this button will actually do\n      hasTextBtn = true;\n    }\n\n    if( 'country_id' in item.config ){\n      const countryConfig = <SelectConfig>item.config[ 'country_id' ];\n      countryConfig.patch.callback = () => {\n        this._updateCountry(+dataKey, index);\n      };\n      this._updateCountry(+dataKey, index);\n    }\n\n\n    if( 'number' in item.config ){\n      const numberConfig = <InputConfig>item.config[ 'number' ];\n      numberConfig.mask = '(000) 000-0000';\n      numberConfig.dropSpecial = false;\n      numberConfig.patch.callback = () => {\n        this._updateNumber(+dataKey, index);\n      };\n      this._updateNumber(+dataKey, index);\n    }\n\n    if( 'extension' in item.config ){\n      const extConfig = <InputConfig>item.config[ 'extension' ];\n      extConfig.mask = '0*00000';\n      extConfig.patch.callback = () => {\n        this._updateExtension(+dataKey, index);\n      };\n      this._updateExtension(+dataKey, index);\n    }\n\n    // if( itemKeys.includes('number') ){\n    // if( itemKeys.includes('country_code') || itemKeys.includes('ext') ){\n    //   this.dom.state.merged = true;\n    //   const items = [ this.field.items[ dataId ][ 'number' ] ];\n    //   if( itemKeys.includes('country_code') ) items.unshift(this.field.items[ dataId ][ 'country_code' ]);\n    //   if( itemKeys.includes('ext') ) items.push(this.field.items[ dataId ][ 'ext' ]);\n    //   this.field.items[ dataId ][ 'number' ] = this._getMergedPhone(items);\n    //\n    //   this.dom.setSubscriber('phone', this.field.items[ dataId ][ 'number' ].control.valueChanges\n    //     .pipe(\n    //       distinctUntilChanged(),\n    //       debounceTime(500),\n    //     )\n    //     .subscribe((value: string) => {\n    //       if( value ) this._validatePhone(dataId, value);\n    //     }));\n    // }\n    // }\n\n    if( hasCallBtn ) this.ui.actionBtnWidth += 50;\n    if( hasTextBtn ) this.ui.actionBtnWidth += 50;\n\n    return true;\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n\n\n  private _updateCountry(dataKey: number, index: number){\n    const countryConfig = <SelectConfig>this._getDataKeyItemConfig(dataKey, 'country_id');\n    if( countryConfig.metadata.source ){\n      const source = countryConfig.metadata.source;\n      const sourceMap = countryConfig.metadata.map.source;\n      const value = countryConfig.control.value;\n      const option = value in sourceMap ? source[ sourceMap[ value ] ] : null;\n      countryConfig.value = value;\n      console.log('_updateCountry option', option);\n      if( IsObject(option, [ 'phone_country_code' ]) ){\n        this._updateDisplayField(dataKey, 'country_id', option.phone_country_code);\n      }\n      this._triggerUpdateAssetDisplay(dataKey);\n    }\n\n  }\n\n\n  private _updateNumber(dataKey: number, index: number){\n    const numberConfig = <SelectConfig>this._getDataKeyItemConfig(dataKey, 'number');\n    const value = numberConfig.control.value;\n    this._updateDisplayField(dataKey, 'number', value);\n    numberConfig.value = value;\n\n    this._triggerUpdateAssetDisplay(dataKey);\n  }\n\n\n  private _updateExtension(dataKey: number, index: number){\n    const extConfig = <SelectConfig>this._getDataKeyItemConfig(dataKey, 'extension');\n    const value = extConfig.control.value;\n    this._updateDisplayField(dataKey, 'extension', value);\n\n    this._triggerUpdateAssetDisplay(dataKey);\n  }\n\n\n  private _updateNumberLabel(dataKey: number, index: number){\n    if( this.field.multiple && IsArray(this.field.entries, true) ){\n      this._updateNumberLabelToMatchEntry(index);\n    }else{\n      this._updateNumberLabelToMatchType(+dataKey);\n    }\n    this._triggerUpdateAssetDisplay(dataKey);\n  }\n\n\n  private _updateNumberLabelToMatchEntry(index: number){\n    const entry = <FieldEntry>this._getValueEntry(index);\n    const typeConfig = <SelectConfig>this._getDataKeyItemConfig(this.field.data_keys[ index ], 'type');\n    const numberConfig = <InputConfig>this._getDataKeyItemConfig(this.field.data_keys[ index ], 'number');\n    const stored = this._getDataKey(this.field.data_keys[ index ], 'type');\n    const display = this.ui.asset[ this.field.data_keys[ index ] ].display;\n\n    if( entry && entry.type && !stored ){\n      typeConfig.control.setValue(entry.type);\n    }\n    const value = entry ? ( entry.name ? entry.name : this._getTypeOptionName(entry.type, index) ) : ( numberConfig.label ? numberConfig.label : '' );\n    if( value ){\n      numberConfig.label = value;\n      display.label = value;\n    }\n  }\n\n\n  /**\n   * The label of value entry should match the type\n   * @param dataKey\n   */\n  private _updateNumberLabelToMatchType(dataKey: number){\n    const typeConfig = <SelectConfig>this._getDataKeyItemConfig(dataKey, 'type');\n    const numberConfig = <InputConfig>this._getDataKeyItemConfig(dataKey, 'number');\n    const optionsMap = ArrayMapSetter(typeConfig.options.values, 'value');\n    const value = typeConfig.control.value;\n    const display = this.ui.asset[ dataKey ].display;\n    const option = value in optionsMap ? typeConfig.options.values[ optionsMap[ value ] ] : null;\n    numberConfig.label = option ? option.name : TitleCase(SnakeToPascal(value));\n    display.label = numberConfig.label;\n  }\n\n\n  // private _validatePhone(dataId, value){\n  //   if( this.field.items[ dataId ][ 'number' ].control.valid ){\n  //     let values = String(value).split(' Ext. ');\n  //     let ext = String(values.pop()).match(/\\d+/g).map(Number).join('');\n  //     if( values.length ){\n  //       values = <any>values.pop();\n  //     }else{\n  //       values = <any>'';\n  //     }\n  //     const countryCode = String(values).substr(0, String(values).indexOf(' ')).match(/\\d+/g).map(Number).join('');\n  //     const number = String(values).substr(String(values).indexOf(' ') + 1).match(/\\d+/g).map(Number).join('');\n  //     if( this.log.repo.enabled('info', this.name) ) console.log(this.log.repo.message(`${this.name}:info`), this.log.repo.color('info'), [ countryCode, number, ext ]);\n  //\n  //     if( number ){\n  //       if( !ext ) ext = null;\n  //       const numberConfig = <InputConfig> this.field.items[ dataId ][ 'number' ];\n  //       if( typeof numberConfig.triggerDirectPatch === 'function' ) numberConfig.triggerDirectPatch(number);\n  //       const countryConfig = <InputConfig> this.field.items[ dataId ][ 'country_code' ];\n  //       if( typeof countryConfig.triggerOnChange === 'function' ) countryConfig.triggerOnChange(countryCode);\n  //       if( typeof countryConfig.triggerDirectPatch === 'function' ) countryConfig.triggerDirectPatch(countryCode);\n  //       const extConfig = <InputConfig> this.field.items[ dataId ][ 'ext' ];\n  //       if( typeof extConfig.triggerOnChange === 'function' ) extConfig.triggerOnChange(ext);\n  //       if( typeof extConfig.triggerDirectPatch === 'function' ) extConfig.triggerDirectPatch(ext);\n  //     }\n  //   }\n  // }\n\n\n  // private _getMergedPhone(items: InputConfig[]){\n  //   const indexItems = [];\n  //   items.forEach((item) => {\n  //     this._setItemMask(item);\n  //     this._disablePhoneItem(item);\n  //     indexItems[ item.column ] = item;\n  //   });\n  //   this._mergePhoneValues(indexItems);\n  //   if( indexItems[ 'number' ] && indexItems[ 'number' ].control.value ){\n  //     if( indexItems[ 'country_code' ] && indexItems[ 'country_code' ].control.value ){\n  //       indexItems[ 'number' ].control.value = ( indexItems[ 'country_code' ].control.value + ' ' + indexItems[ 'number' ].control.value );\n  //     }\n  //     if( indexItems[ 'ext' ] && indexItems[ 'ext' ].control.value ) indexItems[ 'number' ].control.value += ' Ext. ' + indexItems[ 'ext' ].control.value;\n  //   }\n  //   this.dom.store('state');\n  //   return indexItems[ 'number' ];\n  // }\n\n\n  // private _setItemMask(item: InputConfig): void{\n  //   switch( item.column ){\n  //     case 'country_code':\n  //       item.mask = '+0';\n  //       if( !item.mask ) item.mask = '+0';\n  //       break;\n  //     case 'ext':\n  //       item.mask = '09999999';\n  //       if( !item.mask ) item.mask = '09999999';\n  //       if( !item[ 'required' ] ) item.mask = '9' + item.mask;\n  //       break;\n  //     default:\n  //       break;\n  //   }\n  // }\n  //\n  //\n  // private _mergePhoneValues(indexItems: InputConfig[]): void{\n  //   if( indexItems[ 'country_code' ] ){\n  //     indexItems[ 'number' ].mask = indexItems[ 'country_code' ].mask + ' ' + indexItems[ 'number' ].mask;\n  //   }\n  //   if( indexItems[ 'ext' ] ){\n  //     indexItems[ 'number' ].mask += ' Ext. ' + indexItems[ 'ext' ].mask;\n  //     indexItems[ 'number' ].specialChars.push(...[ 'E', 'x', 't' ]);\n  //   }\n  // }\n  //\n  //\n  // private _disablePhoneItem(item: InputConfig): void{\n  //   item.dropSpecial = false;\n  //   item.maxlength = null;\n  //   item.patch.disabled = true;\n  //   item.control.setValidators([]);\n  // }\n\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit, ViewEncapsulation } from '@angular/core';\nimport { EntityFieldComponentInterface } from '../pop-entity-field.model';\nimport { FieldConfig, PopExternalApi, PopRequest } from '../../../../pop-common.model';\nimport { InputConfig } from '../../../base/pop-field-item/pop-input/input-config.model';\nimport { PopDomService } from '../../../../services/pop-dom.service';\nimport { AddressFieldSetting } from './address.setting';\nimport { PopEntityFieldBoilerComponent as FieldTemplate } from '../pop-entity-field-boiler.component';\nimport { SelectConfig } from '../../../base/pop-field-item/pop-select/select-config.model';\nimport { GetHttpArrayResult, IsArray, IsObject, JsonCopy } from '../../../../pop-common-utility';\nimport { Validators } from '@angular/forms';\nimport { ValidateZip } from \"../../../../services/pop-validators\";\n\n@Component({\n  selector: 'lib-pop-entity-address',\n  templateUrl: './pop-entity-address.component.html',\n  styleUrls: ['./pop-entity-address.component.scss'],\n  encapsulation: ViewEncapsulation.None,\n})\nexport class PopEntityAddressComponent extends FieldTemplate implements EntityFieldComponentInterface, OnInit, OnDestroy {\n  @Input() field: FieldConfig;\n\n  public name = 'PopEntityAddressComponent';\n\n  protected asset = {\n    extensionKeys: [],\n    states: []\n  };\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService,\n  ) {\n    super(el, _domRepo, AddressFieldSetting);\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit() {\n    super.ngOnInit();\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy() {\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                  Override Inherited Methods                                  *\n   *                                    ( Protected Methods )                                     *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  /**\n   * Set the initial config\n   * Intended to be overridden per field\n   */\n  protected _setInitialConfig(): void {\n\n    // this.field.modal = PopEntityAddressEditComponent;\n    this.field.modal = null;\n  }\n\n  /**\n   * This will be different for each type of field group\n   * Intended to be overridden in each class, gives the chance to mutate/transform resources if needed\n   */\n  protected _transformChildren() {\n    // const states = IsArray(this.field.children[ 'region_id' ].source, true) ? this.field.children[ 'region_id' ].source : null;\n    // if( states ){\n    //   this.asset.states = JsonCopy(this.field.children[ 'region_id' ].source).map((state: any) => {\n    //     state.long_name = state.name;\n    //     state.name = state.abbr;\n    //   });\n    // }\n  }\n\n\n  /**\n   * This will be different for each type of field group\n   * Intended to be overridden in each class\n   * This will setup this field to handle changes and transformations\n   */\n\n  protected _setFieldAttributes(): boolean {\n\n\n    if (this.field && this.field.items) {\n      Object.keys(this.field.items).map((dataKey, index) => {\n        this._setFieldItemAttribute(+dataKey, index);\n      });\n\n    }\n    return true;\n  }\n\n\n  protected _setFieldItemAttribute(dataKey: number, index: number): boolean {\n    const item = this.field.items[dataKey];\n    const configKeys = Object.keys(item.config);\n\n    this.dom.state.has_extension = configKeys.some(r => this.asset.extensionKeys.includes(r));\n\n    if ('line_1' in item.config) {\n      const line1Config = <SelectConfig>item.config['line_1'];\n      line1Config.patch.callback = (_core, event) => {\n      };\n    }\n\n    if ('line_2' in item.config) {\n      const line2Config = <SelectConfig>item.config['line_2'];\n      line2Config.patch.callback = (core, event) => {\n      };\n    }\n\n    if ('line_3' in item.config) {\n      const line3Config = <SelectConfig>item.config['line_3'];\n      line3Config.patch.callback = (core, event) => {\n      };\n    }\n\n    if ('region_id' in item.config) {\n      const regionConfig = <SelectConfig>item.config['region_id'];\n      const child = this.field.children['zip'];\n      const countryConfig = <SelectConfig>item.config['country_id'];\n      regionConfig.height = 250;\n      if (!child.setting?.allow_canada) {\n        const newOptions =  regionConfig.options.values.filter(region=>region['country_id'] == 1);\n        regionConfig.options.values = newOptions;\n        this._triggerUpdateAssetDisplay(dataKey);\n      }\n      // regionConfig.minimal = true;\n      regionConfig.patch.callback = () => {\n        this._updateRegionId(+dataKey, index);\n      };\n      this._updateRegionId(+dataKey, index);\n    }\n\n    if ('country_id' in item.config) {\n      const countryConfig = <SelectConfig>item.config['country_id'];\n      // countryConfig.minimal = true;\n      countryConfig.patch.callback = () => {\n        this._updateCountry(+dataKey, index);\n      };\n      this._updateCountry(+dataKey, index);\n    }\n    if ('zip' in item.config) {\n      const zipConfig = <InputConfig>item.config['zip'];\n      const countryConfig = <SelectConfig>item.config['country_id'];\n      const child = this.field.children['zip'];\n      zipConfig.validators = [Validators.required, ValidateZip];\n      zipConfig.setControl();\n      zipConfig.facade = true;\n      zipConfig.patch.callback = () => {\n        this._updateZip(+dataKey, index, child.setting);\n      };\n      // this._updateZip(+dataKey, index);\n    }\n    if ('zip_4' in item.config) {\n      const zip4Config = <InputConfig>item.config['zip_4'];\n      const zipConfig = <InputConfig>item.config['zip'];\n      const countryConfig = <SelectConfig>item.config['country_id'];\n      zip4Config.mask = '0000';\n\n      if (this._isUSA(countryConfig)) {\n        zip4Config.readonly = zipConfig.value == '' ? true : false;\n      } else zip4Config.readonly = true;\n\n      // zip4Config.minimal = true;\n      zip4Config.patch.callback = () => {\n        // this._updateZip(+dataKey, index);\n      };\n      // this._updateZip(+dataKey, index);\n    }\n    if ('county' in item.config) {\n      const countyConfig = <InputConfig>item.config['county'];\n      const countryConfig = <SelectConfig>item.config['country_id'];\n      if (!this._isUSA(countryConfig)) countyConfig.readonly = true;\n    }\n\n    return true;\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  private _updateCountry(dataKey: number, index: number) {\n    const countryConfig = <SelectConfig>this._getDataKeyItemConfig(dataKey, 'country_id');\n    const child = this.field.children['country_id'];\n    if (IsArray(child.source, true)) {\n      const value = countryConfig.control.value;\n      const option = value in child.sourceMap ? child.source[child.sourceMap[value]] : null;\n      countryConfig.value = value;\n      if (IsObject(option, ['name'])) {\n        this._updateDisplayField(dataKey, 'country_id', option.name);\n      }\n      this._triggerUpdateAssetDisplay(dataKey);\n    }\n  }\n\n\n  private _updateRegionId(dataKey: number, index: number) {\n    const stateConfig = <SelectConfig>this._getDataKeyItemConfig(dataKey, 'region_id');\n    const child = this.field.children['region_id'];\n    if (IsArray(child.source, true)) {\n      const value = stateConfig.control.value;\n      if (value) {\n        const option = value in child.sourceMap ? child.source[child.sourceMap[value]] : null;\n        stateConfig.value = value;\n\n        if (IsObject(option, ['name'])) {\n          this._updateDisplayField(dataKey, 'region_id', option.name);\n        }\n        this._triggerUpdateAssetDisplay(dataKey);\n      }\n    }\n  }\n\n  private async _updateZip(dataKey: number, index: number, customSettings) {\n    const zipConfig = <InputConfig>this._getDataKeyItemConfig(dataKey, 'zip');\n    const zip4Config = <InputConfig>this._getDataKeyItemConfig(dataKey, 'zip_4');\n    const countyConfig = <InputConfig>this._getDataKeyItemConfig(dataKey, 'county');\n    // check for +4\n    // this._validateZip(dataKey , zipConfig.control.value);\n    // Get location details from zipcode\n    if (zipConfig && zipConfig.control.value && (customSettings.allow_canada?String(zipConfig.control.value).length <= 6:String(zipConfig.control.value).length == 5) ) {\n      zip4Config.readonly = false;\n      if (customSettings?.auto_fill) {\n        this.dom.state[dataKey].loading = true;\n        const details = await this._getAddressFromZip(zipConfig.control.value);\n\n        if (IsObject(details, true)) {\n          let newCountry, newRegion;\n\n          const dataKeyConfig = this.field.items[dataKey]['config'];\n          if ('region_id' in dataKeyConfig) newRegion = this.field.children['region_id'].source.find(state => String(state['abbr']).toLowerCase() == String(details['state_prefix']).toLowerCase());\n          if ('country_id' in dataKeyConfig) newCountry = this.field.children['country_id'].source.find(country => String(country['abbrv']).toLowerCase() == String(details['country']).toLowerCase());\n          // updating location from\n          // this.field.items[dataKey]['config']['zip'].triggerOnChange(zipConfig.control.value);\n          // newCountry.abbrv='CAN'\n          if (newCountry.abbrv == \"CAN\") {\n            zip4Config.triggerOnChange(null);\n            zip4Config.readonly = true;\n\n            countyConfig.readonly = true;\n            countyConfig.triggerOnChange(null);\n          } else {\n            zip4Config.readonly = false;\n            countyConfig.readonly = false;\n          }\n          if ('city' in dataKeyConfig) {\n\n            this.field.items[dataKey]['config']['city'].triggerOnChange(details['city']);\n            this._updateDisplayField(dataKey, 'city', details['city']);\n          }\n          if ('county' in dataKeyConfig && newCountry.abbrv == \"USA\") {\n            this.field.items[dataKey]['config']['county'].triggerOnChange(details['county']);\n            this._updateDisplayField(dataKey, 'county', details['county']);\n          }\n          if ('country_id' in dataKeyConfig) {\n            this.field.items[dataKey]['config']['country_id'].triggerOnChange(newCountry['id']);\n            this._updateDisplayField(dataKey, 'county', newCountry['name']);\n          }\n          if ('region_id' in dataKeyConfig) {\n            if (IsObject(newRegion, true)) {\n              this.field.items[dataKey]['config']['region_id'].triggerOnChange(newRegion['id']);\n            } else {\n              this.field.items[dataKey]['config']['region_id'].triggerOnChange(null);\n            }\n          }\n\n          this.dom.state[dataKey].loading = false;\n          this.dom.state[dataKey].zipError = null;\n        } else {\n          this.dom.state[dataKey].zipError = 'Invalid ZipCode';\n          this.dom.state[dataKey].loading = false;\n        }\n      }\n\n    } else {\n      this.dom.state[dataKey].zipError = 'Invalid ZipCode';\n      if (zip4Config.control.value) {\n        zip4Config.triggerOnChange(null);\n      }\n      zip4Config.readonly = true;\n      zipConfig.triggerOnChange(null);\n    }\n\n    const child = this.field.children['zip'];\n    if (IsArray(child.source, true)) {\n      const value = zipConfig.control.value;\n      // console.log(value);\n      if (value) {\n        const option = value in child.sourceMap ? child.source[child.sourceMap[value]] : null;\n        zipConfig.value = value;\n        if (IsObject(option, ['name'])) {\n          this._updateDisplayField(dataKey, 'zip', option.name);\n        }\n        this._triggerUpdateAssetDisplay(dataKey);\n      }\n    }\n  }\n  /**\n   *\n   * @param countryConfig\n   * @returns\n   */\n  private _isUSA(countryConfig) {\n    if (countryConfig.value && IsArray(countryConfig?.options?.values, true)) {\n      const country = countryConfig.options.values.find(country => country.value == countryConfig.value);\n      if (country.name.toLowerCase().split(' ').join('') != 'unitedstates') return false\n      else return true;\n    } else return true;\n  }\n  private _getAddressFromZip(zipcode: string) {\n    return new Promise((resolve, reject) => {\n      PopRequest.doGet(`legacy/data/zip-codes?zip_code=${zipcode}`).subscribe(res => {\n        res = GetHttpArrayResult(res).pop() || [];\n        return resolve(res);\n\n      });\n    });\n\n  }\n\n  // private _validateZip(dataId, value) {\n  //   console.log(this.field.items, dataId);\n  //\n  //   if (this.field.items[dataId]['config']['zip'].control.valid) {\n  //     const [newZip, newZip_4] = String(value).split('-');\n  //     const zip = newZip;\n  //     let zip_4 = newZip_4;\n  //     if (zip) {\n  //       if (!zip_4) zip_4 = null;\n  //       if (zip_4 && String(+zip_4).length !== 4) {\n  //\n  //         this.field.items[dataId]['config']['zip'].control.setErrors({zip_4: 'The +4 is invalid'});\n  //         this.field.items[dataId]['config']['zip'].message = 'The +4 is invalid';\n  //       } else {\n  //         this.field.items[dataId]['config']['zip'].control.setErrors();\n  //         this.field.items[dataId]['config']['zip'].message = '';\n  //       }\n  //       // const zipConfig = <InputConfig> this.field.items[ dataId ][ 'zip' ];\n  //       // if( typeof zipConfig.triggerDirectPatch === 'function' ) zipConfig.triggerDirectPatch(zip);\n  //       // const zip_4Config = <InputConfig> this.field.items[ dataId ][ 'zip_4' ];\n  //       // if( typeof zip_4Config.triggerOnChange === 'function' ) zip_4Config.triggerOnChange(zip_4);\n  //       // if( typeof zip_4Config.triggerDirectPatch === 'function' ) zip_4Config.triggerDirectPatch(zip_4);\n  //     }\n  //   }\n  // }\n\n  // private _getMergedZip(zip: InputConfig, zip_4: InputConfig) {\n  //   if (!zip_4.mask) zip_4.mask = '90000';\n  //   if (!zip_4['required']) zip_4.mask = '9' + zip_4.mask;\n  //   zip.mask = '00009';\n  //   zip.mask = zip.mask + '-' + zip_4.mask;\n  //   zip.maxlength = null;\n  //   zip.dropSpecial = false;\n  //   zip.patch.disabled = true;\n  //\n  //   zip_4.patch.disabled = true;\n  //   zip.control.setValidators([]);\n  //   zip_4.control.setValidators([]);\n  //   if (zip_4.control.value && zip_4.control.value) {\n  //     zip.control.value = (zip.control.value + '-' + zip_4.control.value);\n  //   }\n  //   this.dom.state.merged = true;\n  //   this.dom.store('state');\n  //   return zip;\n  // }\n\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { EntityFieldComponentInterface } from '../pop-entity-field.model';\nimport { FieldConfig } from '../../../../pop-common.model';\nimport { PopEntityFieldBoilerComponent as FieldTemplate } from '../pop-entity-field-boiler.component';\nimport { PopDomService } from '../../../../services/pop-dom.service';\nimport { StorageGetter } from '../../../../pop-common-utility';\nimport { InputFieldSetting } from './input.settings';\n\n\n@Component( {\n  selector: 'lib-pop-entity-input',\n  templateUrl: './pop-entity-input.component.html',\n  styleUrls: [ './pop-entity-input.component.scss' ]\n} )\nexport class PopEntityInputComponent extends FieldTemplate implements EntityFieldComponentInterface, OnInit, OnDestroy {\n  @Input() field: FieldConfig;\n\n  public name = 'PopEntityInputComponent';\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService\n  ){\n    super( el, _domRepo, InputFieldSetting );\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                  Override Inherited Methods                                  *\n   *                                    ( Protected Methods )                                     *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  /**\n   * This will setup this field to handle changes and transformations\n   */\n  protected _setFieldAttributes(): boolean{\n    const defaultLabel = StorageGetter( this.field, [ 'children', 'value', 'model', 'label' ] );\n    if( this.field && this.field.items ){\n      Object.keys( this.field.items ).map( ( dataKey, index ) => {\n        const item = this.field.items[ dataKey ];\n        item.config.value.label = item.entry ? item.entry.name : defaultLabel;\n      } );\n    }\n    return true;\n  }\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { FieldConfig } from '../../../../pop-common.model';\nimport { EntityFieldComponentInterface } from '../pop-entity-field.model';\nimport { PopEntityFieldBoilerComponent as FieldTemplate } from '../pop-entity-field-boiler.component';\nimport { PopDomService } from '../../../../services/pop-dom.service';\nimport { SelectFieldSetting } from './select.setting';\nimport { StorageGetter } from '../../../../pop-common-utility';\n\n\n@Component({\n  selector: 'lib-pop-entity-select',\n  templateUrl: './pop-entity-select.component.html',\n  styleUrls: [ './pop-entity-select.component.scss' ]\n})\nexport class PopEntitySelectComponent extends FieldTemplate implements EntityFieldComponentInterface, OnInit, OnDestroy {\n  @Input() field: FieldConfig;\n\n  public name = 'PopEntitySelectComponent';\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService\n  ){\n    super(el, _domRepo, SelectFieldSetting);\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n  /**\n   * This will setup this field to handle changes and transformations\n   */\n  protected _setFieldAttributes(): boolean{\n    const defaultLabel = StorageGetter(this.field, [ 'children', 'value', 'model', 'label' ]);\n    const entryLabel = this.field.entries[ 0 ].name;\n    if( this.field && this.field.items ){\n      Object.keys(this.field.items).map((dataKey, index) => {\n        const item = this.field.items[ dataKey ];\n        if( this.field.multiple ){\n          item.config.value.label = this.dom.session[ dataKey ].display.label;\n        }else{\n          item.config.value.label = entryLabel ? entryLabel : defaultLabel;\n        }\n      });\n    }\n    return true;\n  }\n\n\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { FieldConfig } from '../../../../pop-common.model';\nimport { PopEntityFieldBoilerComponent as FieldTemplate } from '../pop-entity-field-boiler.component';\nimport { EntityFieldComponentInterface } from '../pop-entity-field.model';\nimport { PopDomService } from '../../../../services/pop-dom.service';\nimport { StorageGetter } from '../../../../pop-common-utility';\nimport { RadioFieldSetting } from './radio.setting';\n\n\n@Component( {\n  selector: 'lib-pop-entity-radio',\n  templateUrl: './pop-entity-radio.component.html',\n  styleUrls: [ './pop-entity-radio.component.scss' ]\n} )\nexport class PopEntityRadioComponent extends FieldTemplate implements EntityFieldComponentInterface, OnInit, OnDestroy {\n  @Input() field: FieldConfig;\n\n  public name = 'PopEntityRadioComponent';\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService\n  ){\n    super( el, _domRepo, RadioFieldSetting );\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                  Override Inherited Methods                                  *\n   *                                    ( Protected Methods )                                     *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  /**\n   * This will setup this field to handle changes and transformations\n   */\n  protected _setFieldAttributes(): boolean{\n    const defaultLabel = StorageGetter( this.field, [ 'children', 'value', 'model', 'label' ], '' );\n    if( this.field && this.field.items ){\n      Object.keys( this.field.items ).map( ( dataKey, index ) => {\n        const item = this.field.items[ dataKey ];\n        item.config.value.label = item.entry ? item.entry.name : defaultLabel;\n      } );\n    }\n    return true;\n  }\n\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { EntityFieldComponentInterface } from '../pop-entity-field.model';\nimport { FieldConfig } from '../../../../pop-common.model';\nimport { PopEntityFieldBoilerComponent as FieldTemplate } from '../pop-entity-field-boiler.component';\nimport { PopDomService } from '../../../../services/pop-dom.service';\nimport { StorageGetter } from '../../../../pop-common-utility';\nimport { CheckboxFieldSetting } from './checkbox.setting';\n\n\n@Component({\n  selector: 'lib-pop-entity-checkbox',\n  templateUrl: './pop-entity-checkbox.component.html',\n  styleUrls: [ './pop-entity-checkbox.component.scss' ]\n})\nexport class PopEntityCheckboxComponent extends FieldTemplate implements EntityFieldComponentInterface, OnInit, OnDestroy {\n  @Input() field: FieldConfig;\n\n  public name = 'PopEntityCheckboxComponent';\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService\n  ){\n    super(el, _domRepo, CheckboxFieldSetting);\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                  Override Inherited Methods                                  *\n   *                                    ( Protected Methods )                                     *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  /**\n   * This will setup this field to handle changes and transformations\n   */\n  protected _setFieldAttributes(): boolean{\n    const defaultLabel = StorageGetter(this.field, [ 'children', 'value', 'model', 'label' ], '');\n    console.log('defaultLabel', defaultLabel);\n    const entryLabel = this.field.entries[ 0 ].name;\n    console.log('entryLabel', entryLabel);\n    if( this.field && this.field.items ){\n      Object.keys(this.field.items).map((dataKey, index) => {\n        const item = this.field.items[ dataKey ];\n        if( this.field.multiple ){\n          item.config.value.label = this.dom.session[ dataKey ].display.label;\n        }else{\n          item.config.value.label = entryLabel ? entryLabel : defaultLabel;\n        }\n      });\n    }\n    return true;\n  }\n\n\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { FieldConfig } from '../../../../pop-common.model';\nimport { PopDomService } from '../../../../services/pop-dom.service';\nimport { StorageGetter } from '../../../../pop-common-utility';\nimport { PopEntityFieldBoilerComponent as FieldTemplate } from '../pop-entity-field-boiler.component';\nimport { EntityFieldComponentInterface } from '../pop-entity-field.model';\nimport { SwitchFieldSetting } from './switch.setting';\n\n@Component({\n  selector: 'lib-pop-entity-switch',\n  templateUrl: './pop-entity-switch.component.html',\n  styleUrls: ['./pop-entity-switch.component.scss']\n})\nexport class PopEntitySwitchComponent extends FieldTemplate implements EntityFieldComponentInterface, OnInit, OnDestroy {\n\n  @Input() field: FieldConfig;\n\n  public name = 'PopEntitySwitchComponent';\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService\n  ){\n    super(el, _domRepo, SwitchFieldSetting);\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n  /**\n   * This will setup this field to handle changes and transformations\n   */\n  protected _setFieldAttributes(): boolean{\n    const defaultLabel = StorageGetter(this.field, [ 'children', 'value', 'model', 'label' ], '');\n    const entryLabel = this.field.entries[ 0 ].name;\n    if( this.field && this.field.items ){\n      Object.keys(this.field.items).map((dataKey, index) => {\n        const item = this.field.items[ dataKey ];\n        if( this.field.multiple ){\n          item.config.value.label = this.dom.session[ dataKey ].display.label;\n        }else{\n          item.config.value.label = entryLabel ? entryLabel : defaultLabel;\n        }\n      });\n    }\n    return true;\n  }\n\n}\n","import { Dictionary, FieldCustomSettingInterface } from '../../../../pop-common.model';\n\nexport const SelectMultiFieldSetting = <Dictionary<FieldCustomSettingInterface>>{\n  unique_label: {\n    name: 'unique_label',\n    type: 'boolean',\n    defaultValue: true,\n  },\n};\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { FieldConfig } from '../../../../pop-common.model';\nimport { PopDomService } from '../../../../services/pop-dom.service';\nimport { StorageGetter } from '../../../../pop-common-utility';\nimport { PopEntityFieldBoilerComponent as FieldTemplate } from '../pop-entity-field-boiler.component';\nimport { EntityFieldComponentInterface } from '../pop-entity-field.model';\nimport { SelectMultiFieldSetting } from './select-mulit.setting';\n\n@Component({\n  selector: 'lib-pop-entity-select-multi',\n  templateUrl: './pop-entity-select-multi.component.html',\n  styleUrls: ['./pop-entity-select-multi.component.scss']\n})\nexport class PopEntitySelectMultiComponent extends FieldTemplate implements EntityFieldComponentInterface, OnInit, OnDestroy  {\n\n  @Input() field: FieldConfig;\n\n  public name = 'PopEntitySelectMultiComponent';\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService\n  ){\n    super(el, _domRepo, SelectMultiFieldSetting);\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n  /**\n   * This will setup this field to handle changes and transformations\n   */\n  protected _setFieldAttributes(): boolean{\n    const defaultLabel = StorageGetter(this.field, [ 'children', 'value', 'model', 'label' ]);\n    const entryLabel = this.field.entries[ 0 ].name;\n    if( this.field && this.field.items ){\n      Object.keys(this.field.items).map((dataKey, index) => {\n        const item = this.field.items[ dataKey ];\n        if( this.field.multiple ){\n          item.config.value.label = this.dom.session[ dataKey ].display.label;\n        }else{\n          item.config.value.label = entryLabel ? entryLabel : defaultLabel;\n        }\n      });\n    }\n    return true;\n  }\n\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { FieldConfig } from '../../../../pop-common.model';\nimport { PopDomService } from '../../../../services/pop-dom.service';\nimport { StorageGetter } from '../../../../pop-common-utility';\nimport { PopEntityFieldBoilerComponent as FieldTemplate } from '../pop-entity-field-boiler.component';\nimport { EntityFieldComponentInterface } from '../pop-entity-field.model';\nimport { TextareaFieldSetting } from './textarea.setting';\n\n@Component({\n  selector: 'lib-pop-entity-textarea',\n  templateUrl: './pop-entity-textarea.component.html',\n  styleUrls: ['./pop-entity-textarea.component.scss']\n})\nexport class PopEntityTextareaComponent extends FieldTemplate implements EntityFieldComponentInterface, OnInit, OnDestroy{\n\n  @Input() field: FieldConfig;\n\n  public name = 'PopEntityTextareaComponent';\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService\n  ){\n    super( el, _domRepo, TextareaFieldSetting );\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                  Override Inherited Methods                                  *\n   *                                    ( Protected Methods )                                     *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  /**\n   * This will setup this field to handle changes and transformations\n   */\n  protected _setFieldAttributes(): boolean{\n    const defaultLabel = StorageGetter( this.field, [ 'children', 'value', 'model', 'label' ] );\n    if( this.field && this.field.items ){\n      Object.keys( this.field.items ).map( ( dataKey, index ) => {\n        const item = this.field.items[ dataKey ];\n        item.config.content.label = item.entry ? item.entry.name : defaultLabel;\n      } );\n    }\n    return true;\n  }\n\n}\n","import {Injectable, OnDestroy} from '@angular/core';\nimport {PopExtendService} from '../../../services/pop-extend.service';\nimport {\n  CoreConfig, Dictionary,\n  DynamicComponentInterface,\n  FieldConfig,\n  FieldCustomSettingInterface,\n  FieldInterface, FieldItemInterface,\n  PopBaseEventInterface, PopLog, PopRequest,\n} from '../../../pop-common.model';\nimport {\n  ArrayMapSetter,\n  CleanObject, ConvertArrayToOptionList, DynamicSort,\n  GetHttpErrorMsg, GetHttpObjectResult, GetHttpResult,\n  IsArray, IsDefined,\n  IsObject,\n  IsObjectThrowError, IsString, RandomInt,\n  SnakeToPascal, StorageSetter,\n  TitleCase\n} from '../../../pop-common-utility';\nimport {PopDomService} from '../../../services/pop-dom.service';\nimport {EntityFieldSetting} from '../pop-entity-field/pop-entity-field.setting';\nimport {from, Observable} from 'rxjs';\nimport {PopSwitchComponent} from '../../base/pop-field-item/pop-switch/pop-switch.component';\nimport {SwitchConfig} from '../../base/pop-field-item/pop-switch/switch-config.model';\nimport {FieldItemRules, GetCustomFieldSettings, IsValidFieldPatchEvent} from '../pop-entity-utility';\nimport {PopSelectComponent} from '../../base/pop-field-item/pop-select/pop-select.component';\nimport {SelectConfig} from '../../base/pop-field-item/pop-select/select-config.model';\nimport {EntitySchemeSectionInterface} from '../pop-entity-scheme/pop-entity-scheme.model';\nimport {AddressFieldSetting} from '../pop-entity-field/pop-entity-address/address.setting';\nimport {EmailFieldSetting} from '../pop-entity-field/pop-entity-email/email.setting';\nimport {NameFieldSetting} from '../pop-entity-field/pop-entity-name/name.setting';\nimport {PhoneFieldSetting} from '../pop-entity-field/pop-entity-phone/phone.setting';\nimport {SelectMultiFieldSetting} from '../pop-entity-field/pop-entity-select-multi/select-mulit.setting';\nimport * as data from './MOCK_DATA.json';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PopFieldEditorService extends PopExtendService implements OnDestroy {\n  public name = 'PopFieldEditorService';\n\n  protected asset = {\n    data: <any> (data as any).default,\n    core: <CoreConfig>undefined,\n    field: <FieldConfig>undefined,\n    viewParams: { // These are the represent the params that we want to display for a specific form\n      select: {\n        disabled: 1,\n        display: 1,\n        required: 1,\n        // required: 1\n      },\n      select_multi: {\n        disabled: 1,\n        display: 1,\n        helpText: 1,\n        // required: 1\n      },\n      input: {\n        display: 1,\n        readonly: 1,\n        required: 1,\n        pattern: 1,\n        validation: 1,\n        transformation: 1,\n        maxlength: 1,\n        minlength: 1,\n        mask: 1,\n        disabled: 1,\n        allow_canada: 1,\n        auto_fill: 1\n      },\n      phone: {\n        display: 1,\n        readonly: 1,\n        required: 1,\n        mask: 1\n      },\n      checkbox: {\n        display: 1,\n        readonly: 1,\n      },\n      button: {\n        display: 1,\n        disabled: 1,\n      },\n      radio: {\n        display: 1,\n        disabled: 1,\n        layout: 1\n      },\n      switch: {\n        display: 1,\n        disabled: 1,\n        allow_canada: 1,\n        auto_fill: 1\n      }\n    },\n\n    viewLabels: {\n      address: {\n        defaultValue: 'Address',\n      },\n      phone: {\n        defaultValue: 'Phone',\n      },\n    },\n\n    viewMultiple: {\n      address: 1,\n      phone: 1,\n      email: 1,\n      switch: 1\n      // input: 1,\n      // select: 1,\n      // name: 1\n    },\n\n    viewOptions: {\n      select: {\n        enum: false,\n        defaultValue: 1,\n        values: [\n          {value: 1, name: 'Option 1'},\n          {value: 2, name: 'Option 2'},\n          {value: 3, name: 'Option 3'},\n        ]\n      },\n      select_multi: {\n        enum: false,\n        defaultValue: [],\n        values: [\n          {value: 1, name: 'Option 1'},\n          {value: 2, name: 'Option 2'},\n          {value: 3, name: 'Option 3'},\n        ]\n      },\n      radio: {\n        enum: false,\n        defaultValue: 'yes',\n        values: [\n          {value: 'yes', name: 'Yes'},\n          {value: 'no', name: 'No'},\n        ]\n      },\n    },\n\n    viewRequired: { // This represents field items that we want to force to to be always active\n      address: {\n        label: 1,\n        zip: 1\n      },\n      input: {\n        value: 1\n      },\n      select: {\n        value: 1\n      },\n      select_multi: {\n        value: 1\n      },\n      multi_selection: {\n        value: 1\n      },\n      switch: {\n        value: 1\n      },\n      phone: {\n        label: 1,\n        number: 1\n      },\n      email: {\n        address: 1\n      },\n      name: {\n        first: 1,\n        last: 1\n      }\n    },\n\n    viewIgnored: { // This represents field items that we want to force to to be always active\n      address: {\n        street: 1,\n        u_s_state_id: 1\n      },\n    },\n\n    viewTemplate: { // gives user the ability to see data with a different html format\n      selection: 1,\n    },\n\n    labelTypes: {\n      defaultValue: 'provided',\n      options: [{value: 'provided', name: 'Provided'}, {value: 'custom', name: 'Custom'}],\n    },\n  };\n\n\n  constructor() {\n    super();\n  }\n\n\n  /**\n   * Register the field to make sure that any needed attributes are added\n   * @param core\n   * @param dom\n   */\n  register(core: CoreConfig, dom: PopDomService, scheme?: EntitySchemeSectionInterface): Promise<boolean> {\n    return new Promise((resolve) => {\n      if (IsObjectThrowError(core, ['entity'], `Invalid Core`) && IsObjectThrowError(core.entity, true, `Invalid Core`)) {\n        this.asset.core = core;\n        // console.log('field is ', core.entity);\n        this.asset.core.entity.items.map((item) => {\n          FieldItemRules(item);\n        });\n        this._setFieldCustomSettings(core.entity);\n        if (IsObject(core.entity.custom_setting, true)) {\n          if (!dom.ui.customSetting) dom.ui.customSetting = {};\n          Object.keys(core.entity.custom_setting).map((settingName) => {\n            const setting = core.entity.custom_setting[settingName];\n            const component = this.getCustomSettingComponent(core, core.entity, setting, scheme);\n            dom.ui.customSetting[setting.name] = component;\n          });\n        }\n\n        this.asset.core.entity.trait = this.getFieldTraits(this.asset.core.entity.fieldgroup.name);\n        this._setFieldEntryValues(core, scheme).then(() => {\n          return resolve(true);\n        });\n      }\n    });\n  }\n\n\n  // /**\n  //  * When we pull field up in the editor to make changes, clear out the cache of that field so when the field is viewed it will pull in any changes\n  //  * @param internal_name\n  //  * @param fieldId\n  //  */\n  // clearCustomFieldCache( internal_name: string, fieldId: number ){\n  //   this.srv.field.clearCustomFieldCache( fieldId );\n  // }\n\n\n  /**\n   * Get a set of mock data for a given field\n   * @param internal_name\n   */\n  getDefaultValues(internal_name: string) {\n    let defaultValues = <any>{};\n    switch (internal_name) {\n      case 'address':\n        defaultValues = this.getAddressValues();\n        break;\n      case 'phone':\n        defaultValues = this.getPhoneValues();\n        break;\n      case 'name':\n        defaultValues = this.getNameValues();\n        break;\n      default:\n        defaultValues = {value: null};\n        break;\n    }\n    return defaultValues;\n  }\n\n\n  isSchemePrimaryField(scheme: EntitySchemeSectionInterface, field: FieldInterface,) {\n    if (IsObject(scheme, ['id', 'mapping']) && IsObject(field, ['id', 'fieldgroup'])) {\n      const primary = this.getSchemePrimary(scheme);\n      const groupName = field.fieldgroup.name;\n      if (groupName in primary && +primary[groupName] === +field.id) {\n\n      }\n    }\n    return false;\n  }\n\n\n  isSchemeFieldItemDisabled(scheme: EntitySchemeSectionInterface, fieldId: number, itemId: number): boolean {\n    if (IsObject(scheme, ['id', 'mapping']) && +fieldId && +itemId) {\n      const setting = this.getSchemeFieldItemMapping(scheme, fieldId, itemId);\n      if (IsDefined(setting.active, false)) {\n        return +setting.active === 1 ? false : true;\n      }\n    }\n    return false;\n  }\n\n\n  isSchemeFieldEntryDisabled(scheme: EntitySchemeSectionInterface, fieldId: number, entryId: number): boolean {\n    if (IsObject(scheme, ['id', 'mapping']) && +fieldId && +entryId) {\n      const setting = this.getSchemeFieldSetting(scheme, fieldId);\n      return IsArray(setting.disabled_entries, true) && setting.disabled_entries.includes(entryId);\n    }\n    return false;\n  }\n\n\n  getSchemeFieldSetting(scheme: EntitySchemeSectionInterface, fieldId: number): Dictionary<any> {\n    if (IsObject(scheme, true) && +fieldId) {\n      this.ensureSchemeFieldMapping(scheme, fieldId);\n      let storage = this.getSchemeFieldMapping(scheme);\n      if (IsObject(storage, true)) {\n        storage = (<Dictionary<any>>StorageSetter(storage, [`field_${fieldId}`]));\n        return storage;\n      }\n    }\n    return null;\n  }\n\n\n  getSchemeFieldSection(scheme: EntitySchemeSectionInterface, fieldId: number, sectionName: string) {\n    if (IsObject(scheme, true) && +fieldId) {\n\n      const storage = this.getSchemeFieldSetting(scheme, fieldId);\n      if (IsObject(storage)) {\n        return (<FieldItemInterface>StorageSetter(storage, [sectionName]));\n      }\n    }\n    return null;\n  }\n\n\n  ensureSchemeFieldMapping(scheme: EntitySchemeSectionInterface, fieldId: number): void {\n    if (!(IsObject(scheme.mapping))) {\n      scheme.mapping = {};\n    }\n    if (!(IsObject(scheme.mapping.field))) {\n      scheme.mapping.field = {};\n    }\n    if (!(IsObject(scheme.mapping.field[`field_${fieldId}`]))) {\n      scheme.mapping.field[`field_${fieldId}`] = {};\n    }\n    if (!(IsObject(scheme.mapping.field[`field_${fieldId}`].trait_entry))) {\n      scheme.mapping.field[`field_${fieldId}`].trait_entry = {};\n    }\n    if (!(IsArray(scheme.mapping.field[`field_${fieldId}`].disabled_entries))) {\n      scheme.mapping.field[`field_${fieldId}`].disabled_entries = [];\n    }\n  }\n\n\n  getSchemeFieldItemMapping(scheme: EntitySchemeSectionInterface, fieldId: number, itemId: number): Dictionary<any> {\n    if (IsObject(scheme, true) && +fieldId && +itemId) {\n      let storage = <Dictionary<any>>this.getSchemeFieldSetting(scheme, fieldId);\n      if (IsObject(storage, true)) {\n        if (!(IsObject(storage.item))) {\n          storage.item = {};\n        }\n        if (!(IsObject(storage.item[`item_${itemId}`]))) {\n          storage.item[`item_${itemId}`] = {};\n        }\n        storage = <FieldItemInterface>StorageSetter(storage, ['item', `item_${itemId}`]);\n\n        return <Dictionary<any>>storage;\n      }\n    }\n    return null;\n  }\n\n\n  getSchemeFieldItemSection(scheme: EntitySchemeSectionInterface, fieldId: number, itemId: number, sectionName: string) {\n    if (IsObject(scheme, true) && +fieldId && +itemId && IsString(sectionName, true)) {\n      const storage = this.getSchemeFieldItemMapping(scheme, fieldId, itemId);\n      if (storage && IsString(sectionName, true)) {\n        return StorageSetter(storage, [sectionName]);\n      }\n    }\n    return null;\n  }\n\n\n  getFieldTraits(fieldGroupName: string): FieldCustomSettingInterface[] {\n    const traits = [];\n    let setting = {};\n    switch (String(fieldGroupName).toLowerCase()) {\n      case 'address':\n        setting = AddressFieldSetting;\n        break;\n      case 'email':\n        setting = EmailFieldSetting;\n        break;\n      case 'name':\n        setting = NameFieldSetting;\n        break;\n      case 'phone':\n        setting = PhoneFieldSetting;\n        break;\n      case 'select-multi':\n        setting = SelectMultiFieldSetting;\n        break;\n      case 'radio':\n        break;\n    }\n    if (IsObject(setting, true)) {\n      Object.keys(setting).map((settingName: string) => {\n        const tmp = setting[settingName];\n        if (IsObject(tmp, ['type'])) {\n          if (tmp.type === 'trait') {\n            traits.push(tmp);\n          }\n        }\n      });\n    }\n    return traits;\n  }\n\n\n  getSchemePrimary(scheme: EntitySchemeSectionInterface) {\n    return StorageSetter(scheme, ['mapping', 'primary']);\n  }\n\n\n  getSchemeRequired(scheme: EntitySchemeSectionInterface) {\n    return StorageSetter(scheme, ['mapping', 'required']);\n  }\n\n\n  getSchemeFieldMapping(scheme: EntitySchemeSectionInterface) {\n    return StorageSetter(scheme, ['mapping', 'field']);\n  }\n\n\n  updateSchemeFieldMapping(scheme: EntitySchemeSectionInterface) {\n    return new Promise<boolean>(async (resolve) => {\n      if (IsObject(scheme, ['id'])) {\n        const res = await this._updateSchemeFieldMapping(scheme, 'field');\n        return resolve(res);\n      }\n    });\n  }\n\n\n  updateSchemePrimaryMapping(scheme: EntitySchemeSectionInterface) {\n    return new Promise<boolean>(async (resolve) => {\n      if (IsObject(scheme, ['id'])) {\n        const res = await this._updateSchemeFieldMapping(scheme, 'primary');\n        return resolve(res);\n      }\n    });\n  }\n\n\n  updateSchemeRequiredMapping(scheme: EntitySchemeSectionInterface) {\n    if (IsObject(scheme, ['id'])) {\n      this._updateSchemeFieldMapping(scheme, 'required');\n    }\n  }\n\n\n  /**\n   * When a entry is added , we need to set a default type\n   */\n  getDefaultLabelTypeOptions() {\n    return JSON.parse(JSON.stringify(this.asset.labelTypes));\n  }\n\n\n  /**\n   * Check what param options apply to a specific field\n   * @param key\n   */\n  getViewParams(key: string = null) {\n    if (key && key in this.asset.viewParams) {\n      return JSON.parse(JSON.stringify(this.asset.viewParams[key]));\n    }\n    return JSON.parse(JSON.stringify(this.asset.viewParams));\n  }\n\n\n  /**\n   * Check what param options apply to a specific field\n   * @param key\n   */\n  getViewMultiple(key: string = null) {\n    if (key) {\n      if (key in this.asset.viewMultiple) {\n        return this.asset.viewMultiple[key];\n      } else {\n        return null;\n      }\n    }\n    return JSON.parse(JSON.stringify(this.asset.viewMultiple));\n  }\n\n\n  /**\n   * Check what fields items are required under a fieldgroup type\n   * @param fieldGroupName\n   * @param fieldItemName\n   */\n  getViewRequired(fieldGroupName: string, fieldItemName: string) {\n    return fieldGroupName in this.asset.viewRequired && fieldItemName in this.asset.viewRequired[fieldGroupName];\n  }\n\n\n  /**\n   * Check what fields items are ingnored under a fieldgroup type\n   * @param fieldGroupName\n   * @param fieldItemName\n   */\n  getViewIgnored(fieldGroupName: string, fieldItemName: string, scheme?: EntitySchemeSectionInterface) {\n    if (fieldGroupName in this.asset.viewIgnored && fieldItemName in this.asset.viewIgnored[fieldGroupName]) {\n      return true;\n    }\n    return false;\n  }\n\n\n  /**\n   * Get a set of default options to for a specific view , ie.. a radio, select need options\n   * @param key\n   */\n  getViewOptions(key: string = null) {\n    if (key && key in this.asset.viewOptions) {\n      return JSON.parse(JSON.stringify(this.asset.viewOptions[key]));\n    }\n    return JSON.parse(JSON.stringify(this.asset.viewOptions));\n  }\n\n\n  /**\n   * Address Data Factory\n   */\n  getAddressValues() {\n\n    const random = Math.floor(Math.random() * 50);\n    return {\n      // business: company.companyName(),\n      line_1: this.asset.data[random].line_1,\n      line_2: this.asset.data[random].line_2,\n      line_3: 'Attn: ' + this.asset.data[random].line_3,\n      city: this.asset.data[random].city,\n      region_id: this.asset.data[random].region_id,\n      county: 'Ohio',\n      country_id: 1,\n      zip: String(this.asset.data[random].zip).slice(0, 5),\n      zip_4: '0000',\n    };\n  }\n\n\n  /**\n   * Name Data Factory\n   */\n  getNameValues() {\n    const random = Math.floor(Math.random() * 50);\n\n    return {\n      prefix: this.asset.data[random].prefix,\n      first: this.asset.data[random].first,\n      middle: this.asset.data[random].middle,\n      last: this.asset.data[random].last,\n      suffix: this.asset.data[random].suffix,\n    };\n  }\n\n\n  /**\n   * Phone Data Factory\n   */\n  getPhoneValues() {\n    const random = Math.floor(Math.random() * 50);\n\n    return {\n      title: undefined,\n      country_id: 1,\n      number: this.asset.data[random].number,\n      extension: '123456',\n      voice_button: null,\n      sms_button: null,\n      can_call: 1,\n      can_text: 1,\n    };\n  }\n\n\n  /**\n   * This was built for rendering a dynamic list of custom settings, Probably not the right approach since settings so far have been sporadically placed so far\n   * @param core\n   * @param field\n   * @param setting\n   */\n  getCustomSettingComponent(core: CoreConfig, field: FieldInterface, setting: FieldCustomSettingInterface, scheme?: EntitySchemeSectionInterface) {\n    let component;\n    const hasAccess = core.access.can_update && !core.entity.system ? true : false;\n    switch (String(setting.type).toLowerCase()) {\n      case 'boolean':\n        component = <DynamicComponentInterface>{\n          type: PopSwitchComponent,\n          inputs: {\n            core: core,\n            config: new SwitchConfig({\n              name: setting.name,\n              label: setting.label ? setting.label : TitleCase(SnakeToPascal(setting.name)),\n              helpText: setting.helpText ? setting.helpText : null,\n              value: typeof setting.value !== 'undefined' ? <boolean>setting.value : <boolean>setting.defaultValue,\n              facade: true,\n              disabled: !hasAccess,\n              metadata: {\n                setting: setting\n              },\n              patch: {\n                field: ``,\n                path: ``,\n                callback: (ignore: CoreConfig, event: PopBaseEventInterface) => {\n                  if (IsValidFieldPatchEvent(core, event)) {\n                    if (IsObject(scheme, true)) {\n                      const session = this.getSchemeFieldSection(scheme, +field.id, 'setting');\n                      if (IsObject(session)) {\n                        session[setting.name] = event.config.control.value;\n                        this._updateSchemeFieldMapping(scheme, 'field');\n                      }\n\n                    } else {\n                      this.storeCustomSetting(core, event).then(() => {\n                        PopLog.event(this.name, `Custom Setting Saved:`, event);\n                      });\n                    }\n                  }\n                }\n              }\n            }),\n            hidden: 0,\n            when: setting.when ? setting.when : null,\n          },\n          position: field.position,\n          ancillary: true,\n          sort: field.sort,\n        };\n        break;\n      case 'transformation':\n        component = <DynamicComponentInterface>{\n          type: PopSelectComponent,\n          inputs: {\n            core: core,\n            config: new SelectConfig({\n              name: setting.name,\n              label: setting.label ? setting.label : TitleCase(SnakeToPascal(setting.name)),\n              helpText: setting.helpText ? setting.helpText : null,\n              value: setting.value ? <any>setting.value : setting.defaultValue,\n              disabled: !hasAccess,\n              facade: true,\n              options: {\n                values: ConvertArrayToOptionList(setting.options.values, {\n                  empty: setting.options.empty,\n                  sort: true,\n                })\n              },\n              metadata: {\n                setting: setting\n              },\n              patch: {\n                duration: 500,\n                field: ``,\n                path: ``,\n                callback: (core2: CoreConfig, event: PopBaseEventInterface) => {\n                  if (IsValidFieldPatchEvent(core, event)) {\n                    if (IsObject(scheme, true)) {\n                      const session = this.getSchemeFieldSection(scheme, +field.id, 'setting');\n                      if (IsObject(session)) {\n                        session[setting.name] = event.config.control.value;\n                        this._updateSchemeFieldMapping(scheme, 'field');\n                      }\n                    } else {\n                      this.storeCustomSetting(core, event).then(() => {\n                        PopLog.event(this.name, `Custom Setting Saved:`, event);\n                      });\n                    }\n\n                  }\n                }\n              }\n            }),\n            hidden: 0,\n            when: setting.when ? setting.when : null,\n          },\n          position: field.position,\n          ancillary: true,\n          sort: field.sort,\n        };\n        break;\n      case 'trait':\n        break;\n      case 'fixed':\n        break;\n      default:\n        component = <DynamicComponentInterface>{\n          type: PopSwitchComponent,\n          inputs: {\n            core: core,\n            config: new SwitchConfig({\n              name: setting.name,\n              label: setting.label ? setting.label : TitleCase(SnakeToPascal(setting.name)),\n              helpText: setting.helpText ? setting.helpText : null,\n              value: typeof setting.value !== 'undefined' ? <boolean>setting.value : <boolean>setting.defaultValue,\n              facade: true,\n              metadata: {\n                setting: setting\n              },\n            }),\n            hidden: 0,\n            when: setting.when ? setting.when : null,\n          },\n          position: field.position,\n          ancillary: true,\n          sort: field.sort,\n        };\n    }\n\n    return component;\n  }\n\n\n  /**\n   * Store a custom setting\n   * Determine whether the setting already exists in the database, post or patch accordingly\n   * @param core\n   * @param event\n   */\n  storeCustomSetting(core: CoreConfig, event: PopBaseEventInterface): Promise<boolean | string> {\n    return new Promise<boolean | string>((resolve) => {\n      // PopTemplate.buffer();\n      PopLog.event(this.name, `storeCustomSetting`, event);\n      const setting = event.config.metadata.setting;\n      const body = <any>{\n        value: event.config.control.value\n      };\n      if (+setting.field_id) body.field_id = +setting.field_id;\n      if (+setting.field_item_id) body.field_item_id = +setting.field_item_id;\n      const fieldId = +setting.field_id ? +setting.field_id : core.entity.id;\n      let request = <Observable<any>>undefined;\n      if (setting.id) {\n        request = PopRequest.doPatch(`apps/fields/${fieldId}/configs/${setting.id}`, body, 1, false);\n      } else {\n        body.name = setting.name;\n        body.type = setting.type;\n        request = PopRequest.doPost(`apps/fields/${fieldId}/configs`, body, 1, false);\n      }\n\n      request.subscribe((res) => {\n        if (res.data) res = res.data;\n        if (IsObject(res, ['id'])) {\n\n          event.config.metadata.setting = {...event.config.metadata.setting, ...CleanObject(res)};\n          if (setting.item) {\n            // ToDo:: Store a seting on to a field item\n            // console.log('save on item', core.entity);\n            // console.log('setting', res);\n\n          } else {\n            core.entity.custom_setting[setting.name].value = body.value;\n            core.entity.setting[setting.name] = body.value;\n            const nameLookup = ArrayMapSetter(core.entity.configs.field_configs, 'name');\n            if (setting.name in nameLookup) {\n              core.entity.configs.field_configs[nameLookup[setting.name]] = {...event.config.metadata.setting};\n            } else {\n              core.entity.configs.field_configs.push(event.config.metadata.setting);\n            }\n          }\n          this.triggerFieldPreviewUpdate();\n          return resolve(true);\n        }\n      }, (err) => {\n        return resolve(GetHttpErrorMsg(err));\n      });\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * Store a custom setting\n   * Determine whether the setting already exists in the database, post or patch accordingly\n   * @param core\n   * @param event\n   */\n  storeFieldItemRule(core: CoreConfig, fieldItem: FieldItemInterface, event: PopBaseEventInterface): Promise<boolean | string> {\n    return new Promise<boolean | string>((resolve) => {\n      let request = <Observable<any>>undefined;\n      const rule = event.config.metadata.rule;\n      const fieldItemId = fieldItem.id;\n      const value = event.config.control.value;\n\n      const body = <any>{\n        value: value,\n      };\n\n      if (IsObject(rule.validationMap, true)) {\n        rule.validation = rule.validationMap[String(value)];\n      }\n      if (rule.validation) {\n        body.field_validation_id = rule.validation.id;\n        if (rule.validation.fixed) {\n          rule.value = rule.validation.value;\n        }\n      } else {\n        rule.value = value;\n        // pass\n      }\n\n\n      if (rule.field_id) { // patch\n        request = PopRequest.doPatch(`fields/${fieldItemId}/rules/${rule.id}`, body, 1, false);\n      } else {\n        body.field_item_id = null;\n        body.name = rule.name;\n        request = PopRequest.doPost(`fields/${fieldItemId}/rules`, body, 1, false);\n      }\n\n      request.subscribe((res) => {\n        res = GetHttpObjectResult(res);\n        if (IsObject(res, ['value'])) {\n          // event.config.metadata.rule = res;\n          fieldItem.rule[rule.name] = value;\n          this.triggerFieldPreviewUpdate();\n          return resolve(true);\n        }\n        return resolve(true);\n      }, (err) => {\n        return resolve(GetHttpErrorMsg(err));\n      });\n    });\n  }\n\n\n  /**\n   * Trigger the field prview component to update\n   */\n  triggerFieldPreviewUpdate() {\n    if (IsObject(this.asset.core, ['channel'])) {\n      this.dom.setTimeout('trigger-preview', () => {\n        this.asset.core.channel.next({\n          source: this.name,\n          target: 'PopEntityFieldPreviewComponent',\n          type: 'component',\n          name: 'update'\n        });\n      }, 0);\n    }\n  }\n\n\n  /**\n   * Cleanup timeouts, intervals, subscriptions, etc\n   */\n  ngOnDestroy() {\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  // private _updateSchemeFieldMapping( scheme: EntitySchemeSectionInterface, key: string ){\n  //   if( IsObject( scheme, [ 'id', 'mapping' ] ) && IsString( key, true ) && key in scheme.mapping ){\n  //     this.dom.setTimeout( `update-scheme-field-${key}`, () => {\n  //       const body = { mapping: {} };\n  //       // body.mapping[ key ] = scheme.mapping[ key ];\n  //       body.mapping = scheme.mapping;\n  //       this.dom.setSubscriber( `update-scheme-field-${key}`, PopRequest.doPatch( `profile-schemes/${scheme.id}`, body, 1, false ).subscribe( ( res ) => {\n  //         res = GetHttpResult( res );\n  //         console.log( '_updateSchemeFieldMapping', res );\n  //       }, ( err ) => {\n  //         PopLog.error( this.name, `_setFieldEntryValues`, GetHttpErrorMsg( err ) );\n  //       } ) );\n  //     }, 0 );\n  //   }\n  // }\n\n\n  private _updateSchemeFieldMapping(scheme: EntitySchemeSectionInterface, key: string): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      if (IsObject(scheme, ['id', 'mapping']) && IsString(key, true) && key in scheme.mapping) {\n        this.dom.setTimeout(`update-scheme-field-${key}`, () => {\n          const body = {mapping: {}};\n          // body.mapping[ key ] = scheme.mapping[ key ];\n          body.mapping = scheme.mapping;\n          this.dom.setSubscriber(`update-scheme-field-${key}`, PopRequest.doPatch(`profile-schemes/${scheme.id}`, body, 1, false).subscribe((res) => {\n            res = GetHttpResult(res);\n//             console.log( '_updateSchemeFieldMapping', res );\n            return resolve(true);\n          }, (err) => {\n            PopLog.error(this.name, `_setFieldEntryValues`, GetHttpErrorMsg(err));\n            return resolve(false);\n          }));\n        }, 0);\n      } else {\n        return resolve(false);\n      }\n    });\n  }\n\n\n  /**\n   * Assign the custom setting values and config that exist for this field\n   * @param field\n   * @param stored\n   */\n  private _setFieldCustomSettings(field: FieldInterface, scheme?: EntitySchemeSectionInterface) {\n    if (IsObject(field, ['fieldgroup', 'configs'])) {\n      const stored = field.configs;\n      const fieldSettings = GetCustomFieldSettings(field);\n\n      const customSettings = JSON.parse(JSON.stringify({...EntityFieldSetting, ...fieldSettings}));\n\n      // console.log( 'customSettings', customSettings );\n      // console.log('stored', stored);\n\n      if (IsObject(customSettings, true)) {\n        const itemIdLookup = ArrayMapSetter(<any[]>field.items, 'id');\n        const itemNameLookup = ArrayMapSetter(<any[]>field.items, 'name');\n        // console.log('itemNameLookup', itemNameLookup);\n\n        Object.keys(customSettings).map((settingName: string) => {\n          const setting = customSettings[settingName];\n          if (IsObject(setting, true)) {\n            if (setting.item) {\n\n              if (setting.item in itemNameLookup) {\n                // console.log('setting', setting);\n                const item = field.items[itemNameLookup[setting.item]];\n\n                if (!item.custom_setting) item.custom_setting = {};\n                if (!item.setting) item.setting = {};\n                setting.field_item_id = item.field_item_id;\n                setting.field_id = item.id;\n                // console.log('item', item);\n                const value = setting.value ? setting.value : setting.defaultValue;\n                item.custom_setting[settingName] = setting;\n                item.setting[settingName] = value;\n              }\n\n            } else {\n              if (!field.custom_setting) field.custom_setting = {};\n              if (!field.setting) field.setting = {};\n              if (!field.trait) field.trait = {};\n              let value;\n              if (IsObject(scheme, true)) {\n                const storage = this.getSchemeFieldSection(scheme, +field.id, 'setting');\n                if (IsObject(storage, true) && setting.name in storage) {\n                  value = storage[setting.name];\n                } else {\n                  value = setting.value ? setting.value : setting.defaultValue;\n                }\n              } else {\n                value = setting.value ? setting.value : setting.defaultValue;\n              }\n\n              if (setting.type === 'trait') {\n                field.trait[settingName] = value;\n              } else {\n                field.custom_setting[settingName] = setting;\n                field.setting[settingName] = value;\n              }\n\n            }\n          }\n        });\n\n\n        if (IsArray(stored.field_configs, true)) {\n          stored.field_configs.map((setting) => {\n            if (!field.custom_setting[setting.name]) {\n              // ToDo:: Do We want to allow the database to pass in configs that are not local\n              // field.custom_setting[ setting.name ] = setting;\n            } else {\n              field.custom_setting[setting.name].id = setting.id;\n              field.custom_setting[setting.name].value = setting.value;\n            }\n            field.setting[setting.name] = setting.value;\n          });\n        }\n\n        if (IsObject(stored.item_configs, true)) {\n          Object.keys(stored.item_configs).map((fieldItemId) => {\n            const fieldItemConfigs = stored.item_configs[fieldItemId];\n            if (IsArray(fieldItemConfigs, true)) {\n              fieldItemConfigs.map((setting) => {\n                if (setting.field_id in itemIdLookup) {\n                  const item = field.items[itemIdLookup[setting.field_id]];\n\n                  if (!item.custom_setting) item.custom_setting = {};\n                  if (!item.custom_setting[setting.name]) {\n                    item.custom_setting[setting.name] = setting;\n                  } else {\n                    item.custom_setting[setting.name].id = setting.id;\n                    item.custom_setting[setting.name].value = setting.value;\n                  }\n                  if (!item.setting) item.setting = {};\n                  item.setting[setting.name] = setting.value;\n                }\n              });\n            }\n          });\n\n        }\n      }\n      // console.log('stored custom setings', field, stored);\n      // delete field.configs;\n    }\n  }\n\n\n  /**\n   * Ensure that at least 1 label exists\n   * @param field\n   */\n  private _setFieldEntryValues(core: CoreConfig, scheme?: EntitySchemeSectionInterface): Promise<boolean> {\n    return new Promise<boolean>((resolve) => {\n      const field = <FieldInterface>core.entity;\n      if (IsArray(field.entries, true)) {\n        field.entries.sort(DynamicSort('sort_order'));\n      }\n      if (!(IsArray(field.entries, true))) {\n        const entry = {\n          name: TitleCase(`${(field.name ? field.name : field.fieldgroup.name)}`),\n          type: 'provided',\n          sort_order: 0,\n        };\n        PopRequest.doPost(`fields/${field.id}/entries`, entry, 1, false).subscribe((res) => {\n          res = res.data ? res.data : res;\n          field.entries = [res];\n          return resolve(true);\n        }, (err) => {\n          PopLog.error(this.name, `_setFieldEntryValues`, GetHttpErrorMsg(err));\n          return resolve(false);\n        });\n      } else {\n        return resolve(true);\n      }\n    });\n  }\n}\n","import {Injectable} from '@angular/core';\nimport {\n  CoreConfig,\n  Dictionary, DynamicComponentInterface,\n  FieldConfig, FieldEntry,\n  FieldInterface,\n  FieldItemInterface,\n  FieldItemModelInterface,\n  PopEntity, PopLog, PopPipe, PopRequest, ServiceInjector,\n} from '../../../pop-common.model';\n\nimport {PopDomService} from '../../../services/pop-dom.service';\nimport {PopEntityFieldComponent} from '../pop-entity-field/pop-entity-field.component';\nimport {PopSideBySideComponent} from '../../base/pop-side-by-side/pop-side-by-side.component';\nimport {PopSelectComponent} from '../../base/pop-field-item/pop-select/pop-select.component';\nimport {PopSelectMultiComponent} from '../../base/pop-field-item/pop-select-multi/pop-select-multi.component';\nimport {PopInputComponent} from '../../base/pop-field-item/pop-input/pop-input.component';\nimport {PopDateComponent} from '../../base/pop-field-item/pop-date/pop-date.component';\nimport {PopTimeComponent} from '../../base/pop-field-item/pop-time/pop-time.component';\nimport {PopCheckboxComponent} from '../../base/pop-field-item/pop-checkbox/pop-checkbox.component';\nimport {PopSwitchComponent} from '../../base/pop-field-item/pop-switch/pop-switch.component';\nimport {PopRadioComponent} from '../../base/pop-field-item/pop-radio/pop-radio.component';\nimport {PopTextareaComponent} from '../../base/pop-field-item/pop-textarea/pop-textarea.component';\nimport {PopLabelComponent} from '../../base/pop-field-item/pop-label/pop-label.component';\nimport {PopButtonComponent} from '../../base/pop-field-item/pop-button/pop-button.component';\nimport {PopEntityNameComponent} from '../pop-entity-field/pop-entity-name/pop-entity-name.component';\nimport {PopEntityDatetimeComponent} from '../pop-entity-field/pop-entity-datetime/pop-entity-datetime.component';\nimport {PopEntityEmailComponent} from '../pop-entity-field/pop-entity-email/pop-entity-email.component';\nimport {PopEntityPhoneComponent} from '../pop-entity-field/pop-entity-phone/pop-entity-phone.component';\nimport {PopEntityAddressComponent} from '../pop-entity-field/pop-entity-address/pop-entity-address.component';\nimport {PopEntityInputComponent} from '../pop-entity-field/pop-entity-input/pop-entity-input.component';\nimport {PopEntitySelectComponent} from '../pop-entity-field/pop-entity-select/pop-entity-select.component';\nimport {PopEntityRadioComponent} from '../pop-entity-field/pop-entity-radio/pop-entity-radio.component';\nimport {PopEntityCheckboxComponent} from '../pop-entity-field/pop-entity-checkbox/pop-entity-checkbox.component';\nimport {\n  EvaluateWhenConditions, FieldItemModel,\n  FieldItemModelConfig, FieldItemView, GetCustomFieldSettings, ParseModelValue,\n} from '../pop-entity-utility';\n\nimport {\n  ArrayKeyBy,\n  ArrayMapSetter, CleanObject, ConvertArrayToOptionList, DeepCopy,\n  DynamicSort, GetHttpResult,\n  IsArray, IsDefined,\n  IsObject,\n  IsString, JsonCopy, SpaceToSnake, StorageGetter,\n  TitleCase\n} from '../../../pop-common-utility';\nimport {PopMinMaxComponent} from '../../base/pop-field-item/pop-min-max/pop-min-max.component';\nimport {PopNumberComponent} from '../../base/pop-field-item/pop-number/pop-number.component';\nimport {PopCacheService} from '../../../services/pop-cache.service';\nimport {forkJoin} from 'rxjs';\nimport {ComponentType} from '@angular/cdk/portal';\nimport {PopEntitySwitchComponent} from '../pop-entity-field/pop-entity-switch/pop-entity-switch.component';\nimport {PopEntitySelectMultiComponent} from '../pop-entity-field/pop-entity-select-multi/pop-entity-select-multi.component';\nimport {PopEntityTextareaComponent} from '../pop-entity-field/pop-entity-textarea/pop-entity-textarea.component';\nimport {PopSelectFilterComponent} from '../../base/pop-field-item/pop-select-filter/pop-select-filter.component';\nimport {PopTextComponent} from '../../base/pop-field-item/pop-text/pop-text.component';\nimport {EntitySchemeSectionInterface} from '../pop-entity-scheme/pop-entity-scheme.model';\nimport {PopFieldEditorService} from '../pop-entity-field-editor/pop-entity-field-editor.service';\nimport {PopSelectListComponent} from '../../base/pop-field-item/pop-select-list/pop-select-list.component';\nimport {PopDatePickerComponent} from '../../base/pop-field-item/pop-datepicker/pop-datepicker.component';\nimport {PopSelectModalComponent} from \"../../base/pop-field-item/pop-select-modal/pop-select-modal.component\";\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PopEntityUtilFieldService {\n\n  private name = 'PopEntityUtilFieldService';\n\n  private cache = new PopCacheService();\n\n\n  constructor(private field: PopFieldEditorService) {\n  }\n\n\n  /**\n   * Build out the necessary configs for a custom field group and all of this field items involved\n   * Fields may have multiple values , so a unique set of configs mut be created for each data entry\n   * @param core\n   * @param field\n   */\n  buildCustomField(core: CoreConfig, field: FieldInterface) {\n    let items;\n    if (!field.metadata) field.metadata = {};\n    if (!field.multiple_min) field.multiple_min = 1;\n    if (!field.multiple_max || field.multiple_max > 10) field.multiple_max = 10;\n    if (!field.multiple_max_limit) field.multiple_max_limit = 10;\n\n\n    const scheme = StorageGetter(core, ['entity', 'scheme']);\n    const useScheme = IsObject(scheme, ['id', 'mapping']) ? true : false;\n\n    field.primary = useScheme ? this.field.isSchemePrimaryField(scheme, field) : false;\n\n    const fieldCustomSettings = GetCustomFieldSettings(field);\n    const itemCustomModels = {};\n    if (IsObject(fieldCustomSettings, true)) {\n      Object.keys(fieldCustomSettings).map((key: string) => {\n        const setting = fieldCustomSettings[key];\n        if (IsObject(setting, ['item', 'model']) && setting.item && setting.type === 'model') {\n          if (!itemCustomModels[setting.item]) itemCustomModels[setting.item] = {};\n          itemCustomModels[setting.item][setting.model] = setting.value;\n        }\n      });\n    }\n\n    // console.log( itemCustomModels, 'itemCustomModels' );\n\n    field.children = {};\n    // make a copy of the field items to use as a pattern\n    let fieldItemSet = JsonCopy(field.items);\n    fieldItemSet = fieldItemSet.filter((fieldItem: FieldItemInterface) => {\n      return +fieldItem.active;\n    }).filter((fieldItem: FieldItemInterface) => {\n      return useScheme ? !(this.field.isSchemeFieldItemDisabled(scheme, +field.id, +fieldItem.id)) : true;\n    }).map((fieldItem: FieldItemInterface) => {\n      const itemCustomModel = IsObject(itemCustomModels[fieldItem.name]) ? itemCustomModels[fieldItem.name] : {};\n      fieldItem = JsonCopy({...fieldItem, ...itemCustomModel});\n      fieldItem = CleanObject(fieldItem, {\n        blacklist: ['children', 'entries', 'items', 'storage', 'webhook', 'object_name', 'depth_level']\n      });\n\n      // fieldItem.model.value = item.model.options.defaultValue || null;\n      // ToDo:: Inject scheme rule values\n      this.setFieldItemRules(+field.id, fieldItem, scheme);\n\n      // console.log('fieldItem', fieldItem);\n\n\n      const model = FieldItemModel(core, fieldItem);\n\n\n\n      if (IsArray(fieldItem.source, true) && !IsArray(model.options.values, true)) {\n        model.options.rawValues = fieldItem.source;\n        model.options.values = fieldItem.source;\n      }\n\n      // if (IsArray(fieldItem.source)) {\n      //   console.log('fielditem source', fieldItem);\n      //   console.log('options', model.options);\n      // }\n\n      const view = FieldItemView(fieldItem.view);\n      const item = CleanObject({\n        id: fieldItem.id,\n        custom_setting: {},\n        model: model,\n        table: fieldItem.table ? fieldItem.table : {sort: 99, visible: false},\n        view: view,\n        component: view.name,\n        setting: this._getFieldItemSetting(fieldItem),\n        rules: fieldItem.rules,\n        rule: fieldItem.rule,\n        source: IsArray(fieldItem.source, true) ? fieldItem.source : null,\n        sourceMap: IsArray(fieldItem.source, true) ? ArrayMapSetter(fieldItem.source, 'id') : null\n      });\n\n      field.children[fieldItem.name] = item;\n      return item;\n    });\n\n    const dataSort = {};\n    if (IsArray(field.entries, true)) {\n      field.entries.sort(DynamicSort('sort_order'));\n      field.entries.map((entry: FieldEntry, index) => {\n        dataSort[entry.id] = index;\n      });\n\n    }\n\n\n    field.items = <any>{};\n    items = {};\n    field.data = IsObject(field.data, true) ? field.data : {};\n    if (useScheme) {\n      Object.keys(field.data).map((dataKey) => {\n        if (this.field.isSchemeFieldEntryDisabled(scheme, +field.id, +dataKey)) {\n          delete field.data[dataKey];\n        }\n      });\n    }\n\n    // get id of keys from field entries\n    // console.log(field.entries);\n    if (field.multiple) {\n      const dataKeys = field.entries.map(i => i.id);\n      field.data_keys = dataKeys.sort(function (a, b) {\n        const varA = +dataSort[a];\n        const varB = +dataSort[b];\n        if (varA > varB) {\n          return 1;\n        } else if (varA < varB) {\n          return -1;\n        }\n        return 0;\n      });\n    } else {\n      field.data_keys = IsArray(field.entries, true) ? [field.entries[0].id]: [];\n    }\n\n\n    const entryLookup = ArrayMapSetter(field.entries, 'id');\n    field.data_keys.map((dataKey, index) => {\n      items[dataKey] = {\n        entry: dataKey in entryLookup ? field.entries[entryLookup[dataKey]] : this._getFieldItemEntry(field, dataKey, index),\n        config: {}\n      };\n      fieldItemSet.map((fieldItem) => {\n        // ToDo:: Determine whether patch should always be created; A.C.\n        if (IsObject(fieldItem.model, ['name'])) {\n          fieldItem.model.value = this._getModelValue(core, field, fieldItem.model, dataKey);\n          fieldItem.model.facade = 1;\n          const config = FieldItemModelConfig(core, fieldItem.model);\n          items[dataKey].config[fieldItem.model.name] = config;\n        } else {\n          // console.log('fail', fieldItem);\n        }\n      });\n    });\n    const coreField = <any>{\n      id: +field.id,\n      ancillary: field.ancillary ? 1 : 0,\n      canAdd: field.canAdd,\n      canRemove: field.canRemove,\n      configs: field.configs || {},\n      custom_setting: field.custom_setting || {},\n      metadata: field.metadata,\n      multiple: !!field.multiple,\n      multiple_min: field.multiple_min,\n      multiple_max: field.multiple_max,\n      multiple_max_limit: field.multiple_max_limit ? field.multiple_max_limit : 10,\n      data: field.data,\n      data_keys: field.data_keys,\n      facade: !!field.facade,\n      fieldgroup: field.fieldgroup,\n      entries: IsArray(field.entries) ? field.entries : [],\n      hidden: field.hidden ? true : false,\n      internal_name: field.fieldgroup.name,\n      name: String(SpaceToSnake(field.name)).toLowerCase(),\n      label: field.label,\n      position: field.position,\n      setting: field.setting || {},\n      show_name: !!field.show_name,\n      sort: field.sort,\n      state: field.state ? field.state : 'template_edit',\n      when: field.when ? field.when : null,\n      children: field.children,\n      items: items,\n    };\n\n    const formName = field.fieldgroup.name === 'selection' ? field.children.value.view.name : field.fieldgroup.name ? field.fieldgroup.name : 'select';\n\n    coreField.component = this._getEntityFieldComponent(formName);\n\n    return new FieldConfig(coreField);\n  }\n\n\n  private _setSchemeFieldSettings(scheme: EntitySchemeSectionInterface, field: FieldInterface) {\n    if (IsObject(scheme, ['id', 'mapping']) && IsObject(field, true)) {\n      // console.log( '_setSchemeFieldSettings', scheme, field );\n    }\n    return field;\n  }\n\n\n  /**\n   * Build out a config for a field item\n   * @param core\n   * @param model\n   */\n  buildCoreFieldItem(core: CoreConfig, model: FieldItemModelInterface): { model: FieldItemModelInterface, component: ComponentType<any>, config: any } {\n    return {\n      model: model,\n      component: this._getFormComponent(model.form),\n      config: FieldItemModelConfig(core, model)\n    };\n  }\n\n\n  /**\n   * Get the rules that should be applied on this field\n   * @param fieldItem\n   * @private\n   */\n  setFieldItemRules(fieldId: number, fieldItem: any, scheme?: EntitySchemeSectionInterface): void {\n    const RuleSet = {};\n    fieldItem.rule = {};\n    const itemRules = IsArray(fieldItem.itemrules, true) ? fieldItem.itemrules : []; // default rules inherited from the field_item_id\n    // const mapping = this.field.getSchemeFieldItemMapping(scheme, fieldId, +fieldItem.id);\n    // console.log('mapping', mapping);\n    const fieldRules = IsArray(fieldItem.fieldrules, true) ? fieldItem.fieldrules : []; // rules specific to this field item\n    const schemeRules = IsObject(scheme, ['id', 'mapping']) ? this.field.getSchemeFieldItemSection(scheme, fieldId, +fieldItem.id, 'rule') : {};\n    // we want field rules to override items rules when there is overlap ie.. the item might come with a default rule but the items rules should override it\n    itemRules.map((rule) => {\n      if (IsArray(rule.validations, true)) {\n        if (!(IsObject(rule.options))) rule.options = {};\n        rule.options.values = ConvertArrayToOptionList(rule.validations, {\n          nameKey: 'label',\n        });\n        rule.validationMap = ArrayKeyBy(rule.validations, 'id');\n        rule.value = +rule.validation.id;\n      } else {\n        rule.value = rule.raw_value;\n      }\n      if (!rule.value && rule.default_value) rule.value = rule.default_value;\n      RuleSet[rule.name] = rule;\n    });\n\n    fieldRules.map((rule) => {\n      if (IsObject(RuleSet[rule.name])) {\n        RuleSet[rule.name].id = rule.id;\n        RuleSet[rule.name].value = IsArray(RuleSet[rule.name].validations, true) ? rule.validation.id : rule.raw_value;\n        RuleSet[rule.name].field_id = rule.field_id;\n      }\n    });\n\n    fieldItem.rules = Object.values(RuleSet);\n    fieldItem.rules.map((rule: any) => {\n      if (!rule.validation.fixed) {\n        fieldItem.rule[rule.name] = ParseModelValue(rule.value);\n        if (IsObject(schemeRules, [rule.name])) {\n          fieldItem.rule[rule.name] = schemeRules[rule.name];\n        }\n      }\n    });\n\n    // delete fieldItem.fieldrules;\n    // delete fieldItem.itemrules;\n  }\n\n\n  /**\n   * A method that builds entity fieldset from the server models\n   * @param entityConfig\n   * @param fieldPosition\n   */\n  buildDomFields(core: CoreConfig, dom: PopDomService): Promise<boolean> { // a field is wrapper around field items\n    return new Promise(async (resolve) => {\n      let coreField, component;\n      // dom.ui.fields.clear();\n      const baseFields = core.repo.model.field;\n      const baseList = Object.values(baseFields).sort(DynamicSort('sort'));\n      const customFields = <Dictionary<FieldInterface>>await this._getEntityCustomFields(core);\n      PopLog.info(this.name, `buildDomFields`, {\n        base: baseFields,\n        custom: customFields\n      });\n      const customList = Object.values(customFields).sort((function (a, b) {\n        if (a.fieldgroup.id === b.fieldgroup.id) {\n          return b.label < a.label ? 1 : -1;\n        }\n        return a.fieldgroup.id > b.fieldgroup.id ? 1 : -1;\n      }));\n      // Place base field inf front of base fields, and then put custom fields (sorted by type,name)\n      const allFields = [...baseList, ...customList].map((field, index) => {\n        field.sort = index;\n        // return JSON.parse( JSON.stringify( field ) );\n        return DeepCopy(field);\n      });\n\n      if (IsArray(allFields, true)) {\n        allFields.map((field: any) => {\n\n          const name = field.model ? field.model.name : field.name;\n          // console.log(name, field.onLoad);\n          if (+core.entity.scheme_id && !(IsObject(core.entity.scheme_assets))) core.entity.scheme_assets = {};\n          const customFieldAssetLocation = +core.entity.scheme_id && IsObject(core.entity.scheme_assets, false) ? core.entity.scheme_assets : core.entity;\n          if (IsObject(field, true) && name) {\n            if (field.when) {\n              if (IsString(field.when)) field.when = [field.when];\n              field.hidden = !EvaluateWhenConditions(core, field.when, core);\n            }\n            if (IsObject(field, ['fieldgroup']) && name in customFieldAssetLocation) {\n              coreField = this.buildCustomField(core, field);\n              if (coreField) {\n                component = <DynamicComponentInterface>{\n                  type: PopEntityFieldComponent,\n                  inputs: <Dictionary<number | string | boolean | object | any[]>>CleanObject({\n                    core: core,\n                    field: new FieldConfig(coreField),\n                    hidden: field.hidden ? 1 : 0,\n                    when: field.when,\n                    onLoad: field.onLoad,\n                    onEvent: field.onEvent,\n                    onUnload: field.onUnload,\n                  }),\n                  custom: true,\n                  position: field.position ? field.position : 1,\n                  ancillary: field.ancillary,\n                  sort: field.sort,\n                };\n                dom.ui.fields.set(+field.id, component);\n              }\n              // }else if( IsObject( field, [ 'model' ] ) && name in core.entity ){\n            } else if (IsObject(field, ['model']) && ((name in core.entity) || field.preserve)) {\n              field.model.view = {name: field.model.form};\n              if (field.model.transformation) field.model.value = this._getModelValue(core, field, field.model);\n              const model = FieldItemModel(core, field.model);\n\n              const coreItem = {\n                model: model,\n                table: IsObject(field.table, true) ? field.table : {sort: 99, visible: false},\n                component: this._getFormComponent(field.model.view.name),\n                config: FieldItemModelConfig(core, model)\n              };\n\n              if (coreItem && coreItem.config) {\n                if (typeof coreItem.config.setControl === 'function') coreItem.config.setControl(); // build the control now so that the control can be the defacto session value\n                component = <DynamicComponentInterface>{\n                  type: coreItem.component,\n                  inputs: <Dictionary<number | string | boolean | object | any[]>>CleanObject({\n                    core: core,\n                    config: coreItem.config,\n                    hidden: field.hidden ? 1 : 0,\n                    when: field.when,\n                    onLoad: field.onLoad,\n                    onEvent: field.onEvent,\n                    onUnload: field.onUnload,\n                  }),\n                  custom: false,\n                  position: field.position ? field.position : 1,\n                  ancillary: field.ancillary ? true : false,\n                  when: IsArray(field.when, true) ? field.when : null,\n                  sort: field.sort ? field.sort : 99,\n                };\n                dom.ui.fields.set(coreItem.model.name, component);\n              }\n            }\n          }\n        });\n      }\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * A method that builds entity fieldset from the server models\n   * @param entityConfig\n   * @param fieldPosition\n   */\n  getDomFields(fieldPosition: number = 1, dom: PopDomService) { // a field is wrapper around field items\n    const componentList = [];\n    dom.ui.fields.forEach((component: DynamicComponentInterface, key: number | string) => {\n      if (!component.ancillary && component.position === fieldPosition) {\n        componentList.push(component);\n      }\n    });\n    return componentList;\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  /**\n   * Loop through the data for the entity and identify what refers to custom fields\n   * Retrieve the field data for each of the custom fields that exist\n   * @param core\n   * @private\n   */\n  private _getEntityCustomFields(core: CoreConfig): Promise<Dictionary<FieldInterface>> {\n    return new Promise<Dictionary<FieldInterface>>(async (resolve) => {\n      const tmp = {};\n      const customFields = <Dictionary<FieldInterface>>{};\n\n      if (core && core.params.can_extend) {\n\n        if (IsObject(core.entity)) {\n          Object.keys(core.entity).map((key: string) => {\n            if (IsObject(core.entity[key], ['@metadata'])) {\n              tmp[key] = core.entity[key];\n            } else if (IsArray(core.entity[key], true) && IsObject(core.entity[key][0], ['@metadata'])) {\n              tmp[key] = core.entity[key];\n            }\n          });\n        }\n        if (+core.entity.scheme_id && IsObject(core.entity.scheme_assets, true)) {\n          Object.keys(core.entity.scheme_assets).map((key: string) => {\n            if (IsObject(core.entity.scheme_assets[key], ['@metadata'])) {\n              tmp[key] = core.entity.scheme_assets[key];\n            } else if (IsArray(core.entity.scheme_assets[key], true) && IsObject(core.entity.scheme_assets[key][0], ['@metadata'])) {\n              tmp[key] = core.entity.scheme_assets[key];\n            }\n          });\n        }\n        const requests = [];\n        const names = [];\n        let fieldId;\n        const fieldRepo = await PopEntity.getEntityRepo('field');\n        Object.keys(tmp).map((name) => {\n          if (IsObject(tmp[name])) { // field only has a single value\n\n            if (IsObject(tmp[name]['@metadata'], ['@field_id'])) {\n              const record = tmp[name];\n              const metadata = record['@metadata'];\n              // delete record[ '@metadata' ];\n              fieldId = metadata['@field_id'];\n              tmp[name] = [record];\n            }\n          } else if (IsArray(tmp[name], true)) { // field has multiple values\n            const data = [];\n            const firstRecord = tmp[name][0];\n            fieldId = firstRecord['@metadata']['@field_id'];\n            // tmp[ name ].map((record, index) => {\n            //   // const dataKey = field_entry_id ? field_entry_id : ( metadata2[ '@record_id' ] ? +metadata2[ '@record_id' ] : index );\n            //   delete record[ '@metadata' ];\n            //   data.push(record);\n            // });\n            //\n            // tmp[ name ] = data;\n          }\n          if (+fieldId) {\n            names.push(name);\n            requests.push(this.cache.get('custom_field', String(fieldId), fieldRepo.getEntity(fieldId)));\n          }\n        });\n        if (requests.length) {\n          forkJoin(requests).subscribe((results) => {\n            results.map(async (result: any, index: number) => {\n              if (IsDefined(result, false)) {\n                result = GetHttpResult(result);\n                const fieldName = names[index];\n                result.name = fieldName;\n                result.data = fieldName in tmp ? tmp[fieldName] : {};\n                const customField = await this._setFieldEntries(result);\n                const field = await this._setEntityCustomFieldDataStructure(customField);\n                customFields[fieldName] = field;\n                if (index === (results.length - 1)) {\n                  return resolve(customFields);\n                }\n              } else {\n                if (index === (results.length - 1)) {\n                  return resolve(customFields);\n                }\n              }\n            });\n          }, (err) => {\n            return resolve(customFields);\n          });\n        } else {\n          return resolve(customFields);\n        }\n      } else {\n        return resolve(customFields);\n      }\n    });\n  }\n\n\n  clearCustomFieldCache(fieldId: number): void {\n    this.cache.clear('custom_field', String(fieldId));\n  }\n\n\n  /**\n   * Field Entries are a way to define the value structure of a field\n   * By default a field will have a single value, but a field can be configured to have multiple values\n   * Field entries provide a template of a specific amount of values a field should have\n   * @param field\n   * @private\n   */\n  private _setFieldEntries(field: FieldInterface): Promise<FieldInterface> {\n    return new Promise<FieldInterface>(async (resolve) => {\n      // if( IsObject( field, [ 'data' ] ) && IsArray( field.data ) ){\n      //   // console.log('field', field);\n      //   let values = field.data.length;\n      //   const entries = field.entries.filter( ( x ) => x.type !== 'custom' ).length;\n      //   let entriesNeeded = 0;\n      //   if( entries < values ){\n      //     entriesNeeded = +values - +entries;\n      //   }\n      //\n      //   const requests = [];\n      //   let limit = 100;\n      //   while( entriesNeeded > 0 && limit ){\n      //     limit--;\n      //     values++;\n      //     requests.push( PopRequest.doPost( `fields/${field.id}/entries`, {\n      //       name: TitleCase( `${field.fieldgroup.name} ${values}` ),\n      //       type: 'provided'\n      //     }, 1, false ) );\n      //     entriesNeeded--;\n      //   }\n      //   if( requests.length ){\n      //     forkJoin( requests ).subscribe( ( results ) => {\n      //       results.map( ( result: any, index: number ) => {\n      //         if( result.data ) result = result.data;\n      //         field.entries.push( result );\n      //       } );\n      //       return resolve( field );\n      //     }, () => {\n      //       return resolve( field );\n      //     } );\n      //\n      //   }else{\n      //     return resolve( field );\n      //   }\n      // }else{\n      //   return resolve( field );\n      // }\n\n      return resolve(field);\n\n    });\n  }\n\n\n  /**\n   * Field data should come in as an array of records\n   * Ensure that each each record has a unique entry id, and index data by field_entry_id;\n   * @param customField\n   */\n  private _setEntityCustomFieldDataStructure(customField: FieldInterface): Promise<FieldInterface> {\n    return new Promise<FieldInterface>((resolve) => {\n      const data = {};\n      // console.log('customField', customField);\n      if (IsArray(customField.data, true)) {\n        if (IsArray(customField.entries, true)) {\n          customField.data.map((record, index) => {\n            if (!record.field_entry_id) record.field_entry_id = customField.entries[index].id;\n            // console.log(\"is diff ? \", record.field_entry_id , ' - ', customField.entries[index].id);\n            // delete record[ '@metadata' ];\n            data[record.field_entry_id] = record;\n          });\n        }\n\n      } else {\n        if (IsArray(customField.entries)) {\n          customField.entries.map((entry: FieldEntry) => {\n            data[entry.id] = {};\n            const items = <any>customField.items;\n            if (IsArray(customField.items, true)) {\n              items.map((item) => {\n                data[entry.id][item.name] = null;\n              });\n            }\n          });\n        }\n      }\n      customField.data = data;\n\n      return resolve(customField);\n    });\n  }\n\n\n  /**\n   * Get the settings that should be applied on this field item\n   * @param fieldItem\n   * @private\n   */\n  private _getFieldItemSetting(fieldItem: any) {\n    return {};\n  }\n\n\n  /**\n   * A field entry is used to identity a specific value in a set of multiple values\n   * @param field\n   * @param dataKey\n   * @param index\n   * @private\n   */\n  private _getFieldItemEntry(field: FieldInterface, dataKey: number, index: number): FieldEntry {\n    let entry = <FieldEntry>{};\n    const data = field.data[dataKey];\n\n    if (IsArray(field.entries, true)) {\n      const customEntries = field.entries.filter((item) => {\n        return item.type !== 'custom';\n      });\n      const customIdLookup = ArrayMapSetter(customEntries, 'id');\n\n      const providedEntries = field.entries.filter((item) => {\n        return item.type !== 'custom';\n      });\n\n      const entryIndex = index % providedEntries.length;\n      const providedIdLookup = ArrayMapSetter(providedEntries, 'id');\n      if (data.field_entry_id && data.field_entry_id in providedIdLookup) {\n        entry = providedEntries[providedIdLookup[data.field_entry_id]];\n      } else if (data.field_entry_id && data.field_entry_id in customIdLookup) {\n        entry = customEntries[customIdLookup[data.field_entry_id]];\n        // ToDo:: Find the cutstom label that should be inserted here\n      } else if (entryIndex in field.entries) {\n        entry = providedEntries[entryIndex];\n      } else {\n        entry = providedEntries[0];\n      }\n    } else {\n      entry = null;\n    }\n    return entry;\n  }\n\n\n  /**\n   * Map the form in a field model to the angular component that will be used to render the field\n   * @param form\n   * @private\n   */\n  private _getFormComponent(form: string) {\n    let component = null;\n    if (IsString(form, true)) {\n      switch (String(form).toLowerCase()) {\n        case 'sidebyside':\n          component = PopSideBySideComponent;\n          break;\n        case 'select':\n          component = PopSelectComponent;\n          break;\n        case 'select-filter':\n          component = PopSelectFilterComponent;\n          break;\n        case 'select-list':\n          component = PopSelectListComponent;\n          break;\n        case 'select-multi':\n        case 'select_multi':\n          component = PopSelectMultiComponent;\n          break;\n        case 'select-modal':\n          component = PopSelectModalComponent;\n          break;\n        case 'text':\n        case 'input':\n          component = PopInputComponent;\n          break;\n        case 'textstring':\n          component = PopTextComponent;\n          break;\n        case 'number':\n          component = PopNumberComponent;\n          break;\n        case 'date':\n          component = PopDateComponent;\n          break;\n        case 'datepicker':\n          component = PopDatePickerComponent;\n          break;\n        case 'time':\n          component = PopTimeComponent;\n          break;\n        case 'checkbox':\n          component = PopCheckboxComponent;\n          break;\n        case 'switch':\n          component = PopSwitchComponent;\n          break;\n        case 'minmax':\n          component = PopMinMaxComponent;\n          break;\n        case 'radio':\n          component = PopRadioComponent;\n          break;\n        case 'textarea':\n          component = PopTextareaComponent;\n          break;\n        case 'label':\n          component = PopLabelComponent;\n          break;\n        case 'button':\n          component = PopButtonComponent;\n          break;\n        default:\n          PopLog.warn(this.name, `_getFormComponent: fail`, form);\n          break;\n      }\n    }\n    return component;\n  }\n\n\n  /**\n   * Resolve the value that lines up with the column/name of the field item from the data set\n   * The idea here is that a value may have already created for this field item and we need to make sure the field item initializes with the value\n   * @param core\n   * @param field\n   * @param model\n   * @param dataKey\n   * @private\n   */\n  private _getModelValue(core: CoreConfig, field: FieldInterface, model: FieldItemModelInterface, dataKey?: number) {\n    let value = null;\n    if (dataKey) {\n      if (IsObject(field.data, true) && IsObject(model, true)) {\n        if (dataKey in field.data && model.name in field.data[dataKey]) {\n          value = field.data[dataKey][model.name];\n          if (model.transformation) value = PopPipe.transform(value, model.transformation, core);\n        }\n      }\n    } else if (model.name in core.entity) {\n      value = core.entity[model.name];\n\n      if (model.transformation) value = PopPipe.transform(value, model.transformation, core);\n    }\n    return value;\n  }\n\n\n  /**\n   * Get the custom field template that is made for the field group\n   * @param name\n   * @private\n   */\n  private _getEntityFieldComponent(name: string) {\n    let component = null;\n    switch (String(name).toLowerCase()) {\n      case 'name':\n        component = PopEntityNameComponent;\n        break;\n      case 'email':\n        component = PopEntityEmailComponent;\n        break;\n      case 'phone':\n        component = PopEntityPhoneComponent;\n        break;\n      case 'address':\n        component = PopEntityAddressComponent;\n        break;\n      case 'date':\n      case 'datetime':\n        component = PopEntityDatetimeComponent;\n        break;\n      case 'textfield':\n      case 'input':\n        component = PopEntityInputComponent;\n        break;\n      case 'selection':\n      case 'select':\n        component = PopEntitySelectComponent;\n        break;\n      case 'select-multi':\n      case 'select_multi':\n      case 'multi_selection':\n        component = PopEntitySelectMultiComponent;\n        break;\n      case 'radio':\n        component = PopEntityRadioComponent;\n        break;\n      case 'checkbox':\n        component = PopEntityCheckboxComponent;\n        break;\n      case 'toggle':\n      case 'switch':\n        component = PopEntitySwitchComponent;\n        break;\n      case 'texteditor':\n      case 'textarea':\n        component = PopEntityTextareaComponent;\n        break;\n      default: {\n        PopLog.warn(this.name, `_getEntityFieldComponent: fail`, name);\n        break;\n      }\n    }\n    return component;\n  }\n\n}\n","import {forkJoin, Observable, of} from 'rxjs';\nimport {PopBaseService} from '../../../services/pop-base.service';\nimport {Inject} from '@angular/core';\nimport {\n  CoreConfig,\n  Dictionary, Entity, EntityModelInterface,\n  EntityParamsInterface, EntityPreference, PopBusiness, PopFilter, PopPipe,\n  QueryParamsInterface, ResourceConfig,\n  ServiceInjector, ServiceRoutesInterface\n} from '../../../pop-common.model';\nimport {environment} from '../../../../environments/environment';\nimport {Router} from '@angular/router';\nimport {PopLogService} from '../../../services/pop-log.service';\nimport {\n  ArrayGroupBy,\n  InterpolateString, IsArray, IsDefined, IsCallableFunction,\n  IsObject, IsString,\n  SpaceToHyphenLower, StringReplaceAll, TitleCase, DeepMerge, JsonCopy, DeepCopy,\n} from '../../../pop-common-utility';\nimport {PopDisplayService} from '../../../services/pop-display.service';\nimport {PopRequestService} from '../../../services/pop-request.service';\nimport {PopEntityUtilFieldService} from './pop-entity-util-field.service';\nimport {PopResourceService} from '../../../services/pop-resource.service';\nimport {map} from 'rxjs/operators';\nimport {InterpolateEntityRoute} from '../pop-entity-utility';\nimport {PopCacheService} from '../../../services/pop-cache.service';\n\n\nexport class PopEntityRepoService implements PopEntityServiceInterface {\n  private name = 'PopEntityRepoService';\n  private id: string;\n  protected params: EntityParamsInterface;\n  private activated = false;\n  protected apiVersion = 1;\n\n\n  public model: EntityModelInterface;\n\n  protected srv: {\n    base: PopBaseService,\n    cache: PopCacheService,\n    display: PopDisplayService,\n    field: PopEntityUtilFieldService,\n    log: PopLogService,\n    request: PopRequestService,\n    resource: PopResourceService,\n    router: Router,\n  };\n\n  protected routes: ServiceRoutesInterface;\n\n\n  protected setServiceContainer() {\n\n    this.srv = {\n      base: ServiceInjector.get(PopBaseService),\n      cache: new PopCacheService(),\n      display: ServiceInjector.get(PopDisplayService),\n      field: ServiceInjector.get(PopEntityUtilFieldService),\n      log: ServiceInjector.get(PopLogService),\n      request: ServiceInjector.get(PopRequestService),\n      resource: ServiceInjector.get(PopResourceService),\n      router: ServiceInjector.get(Router),\n    };\n  }\n\n\n  constructor(\n    @Inject('env') private readonly env?\n  ) {\n    if (!this.env) this.env = <any>environment;\n    this.setServiceContainer();\n  }\n\n\n  /**\n   * Pass in in the EntityParams to tie this to a specific type of entity\n   * (Moved out of constructor die to build issues)\n   * @param entityParams\n   */\n  register(entityParams: EntityParamsInterface) {\n    if (entityParams && entityParams.internal_name) {\n      this.id = entityParams.internal_name;\n      this.params = entityParams;\n      this.activated = true;\n      this.srv.log.init(this.name, `created:${this.id}`);\n    }\n  }\n\n\n  /**\n   * Pass in a route config for this entity\n   * @param routes\n   */\n  setRoutes(routes: ServiceRoutesInterface) {\n    this.routes = routes;\n  }\n\n\n  /**\n   * A http call to archive a single entity\n   * @param id\n   * @param archive\n   */\n  archiveEntity(id: number | string, archive: boolean): Observable<any> {\n    this.srv.cache.clearAll();\n    let path = InterpolateEntityRoute(this.routes.archive.entity.path, {id: id});\n    let body = {};\n    if (archive) {\n      if (IsObject(this.routes.archive.entity.params, true)) body = DeepMerge(JsonCopy(body), this.routes.archive.entity.params);\n      body = {...body, ...{business_id: PopBusiness.id, archived: -1}};\n      return this.srv.request.doDelete(path, body, this.apiVersion);\n    } else {\n      path = InterpolateEntityRoute(this.routes.restore.entity.path, {id: id});\n      if (IsObject(this.routes.restore.entity.params, true)) body = DeepMerge(JsonCopy(body), this.routes.restore.entity.params);\n      body = {...body, ...{business_id: PopBusiness.id, archived: -1}};\n      return this.srv.request.doPost(path, body, this.apiVersion);\n    }\n\n  }\n\n\n  /**\n   * A http call to archive  multiple entities that passes a  {xx: {archive: 1}, xx: {archive: 1}, } structure\n   * @param ids Primary Keys of the entities .[ 1 or 1,2,3,4,5 ]\n   * @param archive\n   */\n  archiveEntities(ids: string | number, archive: boolean): Observable<any> {\n    this.srv.cache.clearAll();\n    const requests = [];\n    if (archive) {\n      String(ids).split(',').map((id) => {\n        const path = InterpolateEntityRoute(this.routes.archive.entity.path, {id: id});\n        requests.push(this.srv.request.doDelete(path, null, this.apiVersion));\n      });\n    } else {\n      String(ids).split(',').map((id) => {\n        let path = InterpolateString(this.routes.restore.entity.path, {id: id});\n        path = StringReplaceAll(path, '\\\\?', '');\n        path = StringReplaceAll(path, '\\\\/\\\\/', '\\\\/');\n        requests.push(this.srv.request.doPost(path, {archived: -1}, this.apiVersion));\n      });\n    }\n    return forkJoin(requests);\n  }\n\n\n  /**\n   *  A method that returns the configured app\n   */\n  getAppName(): string {\n    return this.params.app;\n  }\n\n\n  /**\n   * A Http call that gets the entity configs\n   * @param id Primary Key of the entity\n   */\n  getConfig(): Observable<any> {\n    const path = `${this.routes.get.config.path}?entity_id=${this.params.id}`;\n    if (this.params.id) {\n      const body = IsObject(this.routes.get.config.params, true) ? this.routes.get.config.params : {};\n      return this.srv.request.doGet(path, body, this.apiVersion).pipe(\n        map((res: any) => {\n          res = res.data ? res.data : res;\n          res = ArrayGroupBy(res, 'type');\n          if (IsObject(res, true)) {\n            Object.keys(res).map((type: string) => {\n              if (IsArray(res[type], true)) {\n                const tmp = {};\n                res[type].map((setting) => {\n                  tmp[setting.name] = setting.config;\n                });\n                res[type] = tmp;\n              }\n            });\n          } else {\n            res = {};\n          }\n          return res;\n        })\n      );\n    } else {\n      return of({});\n    }\n  }\n\n\n  /**\n   *  A http call that gets a list of entities\n   * @param queryParams '?archived=1', '?archived=0'\n   */\n  getEntities(body: Object = {}, queryParams?: QueryParamsInterface): Promise<Entity[]> {\n    return new Promise<Entity[]>((resolve) => {\n      let data = <Entity[]>[];\n      if (!(IsObject(queryParams))) queryParams = {archived: 0};\n      if (!(IsObject(body))) body = {archived: IsDefined(queryParams.archived) ? queryParams.archived : 0};\n\n      if (this.model.table.filter && this.model.table.filter.active && IsObject(this.model.table.filter.query, true)) {\n        if (!queryParams.bypassFilters) {\n          Object.keys(this.model.table.filter.query).map((filterName: string) => {\n            if (filterName in PopFilter && IsArray(PopFilter[filterName], true)) body[this.model.table.filter.query[filterName]] = PopFilter[filterName];\n          });\n          // queryParams.limit = 100;\n        }\n      }\n      const path = `${this.routes.get.entities.path}`;\n      if (IsObject(this.routes.get.entities.params, true) && !queryParams.bypassParams) {\n        body = DeepMerge(JsonCopy(body), this.routes.get.entities.params);\n      }\n      let page = 1;\n      this.srv.request.doGet(`${path}`, body, this.apiVersion).subscribe(\n        (res: any) => {\n          data = <Entity[]>res.data;\n          if (IsObject(res.meta, true)) {\n            const requests = [];\n            const lastPage = res.meta.last_page;\n            while (page < lastPage) {\n              page++;\n              requests.push(this.srv.request.doGet(`${path}?page=${page}`, body, this.apiVersion));\n            }\n            if (requests.length) {\n              forkJoin(requests).subscribe((pages) => {\n                pages.map((nextPage: any) => {\n                  data.push(...nextPage.data);\n                });\n                return resolve(data);\n              });\n            } else {\n              return resolve(data);\n            }\n          } else {\n            return resolve(data);\n          }\n        });\n    });\n  }\n\n\n  /**\n   * A method that clears any cache for this entity type\n   */\n  clearAllCache(caller = ''): void {\n    this.srv.cache.clearAll();\n  }\n\n\n  /**\n   * A method that clears any cache for this entity type\n   */\n  clearCache(cacheType: string, cacheKey?: string, caller = ''): void {\n    this.srv.cache.clear(cacheType, cacheKey);\n  }\n\n\n  setCache(cacheType: string, cacheKey: string, data: any, minutes = 1) {\n    if (IsString(cacheType, true) && IsString(cacheKey) && IsDefined(data)) {\n      if (minutes > 60) minutes = 60;\n      this.srv.cache.set(cacheType, cacheKey, data, (minutes * 60 * 1000));\n    }\n  }\n\n\n  getCache(cacheType: string, cacheKey: string) {\n    return new Promise<Entity[]>((resolve) => {\n      if (IsString(cacheType, true) && IsString(cacheKey)) {\n        this.srv.cache.get(cacheType, cacheKey).subscribe((cacheData) => {\n          if (IsDefined(cacheData)) {\n            return resolve(cacheData);\n          } else {\n            resolve(null);\n          }\n        });\n      } else {\n        resolve(null);\n      }\n    });\n  }\n\n\n  /**\n   *\n   * @param id Primary Key of the entity\n   * @param params '?metadata=1', '?metadata=0', '?metadata=1&filter=id,name'\n   * @return Observable\n   */\n  getEntity(id: number | string, queryParams?: QueryParamsInterface): Observable<any> {\n    if (!queryParams || typeof (queryParams) !== 'object') queryParams = {};\n    let body = {archived: IsDefined(queryParams.archived) ? queryParams.archived : -1};\n    if (+id) {\n      const path = `${InterpolateString(this.routes.get.entity.path, {id: id})}`;\n      if (IsObject(this.routes.get.entity.params, true) && !queryParams.bypassParams) body = DeepMerge(JsonCopy(body), this.routes.get.entity.params);\n      this.srv.log.info(this.name, path, body);\n      const request = this.srv.request.doGet(path, body, this.apiVersion);\n      return queryParams.bypassCache ? request : this.srv.cache.get('entity', String(id), request);\n    }\n    return of(undefined);\n  }\n\n\n  /**\n   * A Http call that gets the entity history\n   * @param id Primary Key of the entity\n   */\n  getHistory(id: number): Observable<any> {\n    return of([]);\n    // const path = InterpolateString(this.routes.get.history, { id: id });\n    // return this.srv.request.doGet(path, {}, this.apiVersion);\n  }\n\n\n  /**\n   * A Http call that gets the entity metadata\n   * @param id Primary Key of the entity\n   */\n  getUiResource(core: CoreConfig): Promise<any> {\n    return new Promise(async (resolve) => {\n      let ui = {};\n      if (IsObject(this.model.resource, true)) {\n        const success = await this.srv.resource.setCollection(this.model.resource, core);\n        if (success) {\n          ui = this.srv.resource.getCollection(this.model.resource);\n          return resolve(ui);\n        } else {\n          resolve(false);\n        }\n      } else {\n        resolve(ui);\n      }\n    });\n  }\n\n\n  /**\n   * A Http call that gets the entity metadata\n   * @param id Primary Key of the entity\n   */\n  reloadResource(core: CoreConfig, resourceName: string): Promise<boolean> {\n    return new Promise(async (resolve) => {\n      if (resourceName && IsObject(this.model.resource, [resourceName])) {\n        if (!IsObject(core.resource)) core.resource = {};\n        core.resource[resourceName] = await this.srv.resource.reloadResource(core, this.model.resource[resourceName]);\n        return resolve(true);\n      } else {\n        return resolve(false);\n      }\n    });\n  }\n\n\n  /**\n   * A Http call that gets the entity metadata\n   * @param id Primary Key of the entity\n   */\n  injectResource(core: CoreConfig, resource: ResourceConfig, reload = false): Promise<boolean> {\n    return new Promise(async (resolve) => {\n      if (IsObject(resource, ['name'])) {\n        if (!(IsObject(this.model.resource[resource.name]))) {\n          if (!IsObject(this.model.resource)) this.model.resource = {};\n          if (!IsObject(core.resource)) core.resource = {};\n\n          this.model.resource[resource.name] = {...DeepCopy(resource)};\n          if (resource.api_path && IsString(resource.api_path, true)) {\n            core.resource[resource.name] = await this.srv.resource.reloadResource(core, resource);\n          } else {\n            core.resource[resource.name] = resource;\n          }\n          return resolve(true);\n        } else if (IsObject(this.model.resource[resource.name], true) && resource.api_path && reload) {\n          await this.reloadResource(core, resource.name);\n          return resolve(true);\n        } else {\n          return resolve(true);\n        }\n      } else {\n        return resolve(false);\n      }\n    });\n  }\n\n\n  /**\n   * A method that gets the entity singular name for entity\n   * @param field\n   */\n  getInternalName(): string {\n    return this.params.internal_name;\n  }\n\n\n  /**\n   * Get the alias display for this entity;\n   * @param alias 'singular | 'plural';\n   */\n  getDisplayName(alias: string = 'singular'): string {\n    return PopPipe.transform(this.params.internal_name, {type: 'entity', arg1: 'alias', arg2: alias});\n  }\n\n\n  /**\n   * A method that gets the base api path for the entity\n   * @param field\n   */\n  getApiPath(): string {\n\n    return this.params.path;\n  }\n\n\n  /**\n   * A http call that gets the preferences of a user\n   */\n  getPreferences(core: CoreConfig, cache = false): Promise<boolean> {\n    return new Promise<boolean>((resolve) => {\n      const buUserId = this.srv.base.getCurrentBusinessUserId();\n      if (buUserId) {\n        const path = `${this.routes.get.preference.path}`;\n        let body = {path: this.params.internal_name, bu_user_id: buUserId};\n        if (IsObject(this.routes.get.preference.params, true)) body = DeepMerge(JsonCopy(body), this.routes.get.preference.params);\n        const request = this.srv.request.doGet(path, body, this.apiVersion, true).pipe(\n          map((res: any) => {\n            const preferences = {};\n            const tmp = res.data ? <Entity>res.data : <Entity>res;\n            if (IsArray(tmp, true)) {\n              tmp.map((preference) => {\n                preferences[preference.type] = {...preference.settings, ...{id: preference.id}};\n              });\n            }\n            return preferences;\n          })\n        );\n        if (cache) {\n          this.srv.cache.get(this.params.internal_name, 'preference', request, 600000).subscribe((res: any) => {\n            if (!IsObject(core.preference)) core.preference = <EntityPreference>{};\n            core.preference = {...core.preference, ...res};\n            return resolve(true);\n          }, (err) => {\n            return resolve(false);\n          });\n        } else {\n          request.subscribe((res: any) => {\n\n            if (!IsObject(core.preference)) core.preference = <EntityPreference>{};\n            core.preference = {...core.preference, ...res};\n            return resolve(true);\n          }, () => {\n            return resolve(false);\n          });\n        }\n      } else {\n        return resolve(false);\n      }\n    });\n  }\n\n\n  /**\n   * A http call that gets the preferences of a user\n   */\n  deletePreference(id: number, type: string): Promise<any> {\n    return new Promise((resolve) => {\n      const path = `${this.routes.get.preference.path}/${id}`;\n      this.srv.request.doDelete(path, null, this.apiVersion, true).pipe(\n      ).subscribe(() => {\n        const defaultPreference = null;\n        return resolve(defaultPreference);\n        // this.srv.cache.clear([ `${this.params.internal_name}:preference` ]);\n        // this.getPreferences(true).subscribe(() => {\n        //   // ToDo:: Check inside entity models to see if a default table settings exist\n        //   const defaultPreference = null;\n        //   return resolve(defaultPreference);\n        // });\n      }, () => {\n        return resolve(false);\n      });\n    });\n  }\n\n\n  /**\n   * An Http call to save a preference\n   * @param id\n   * @param type\n   * @param body\n   */\n  savePreference(id: number = null, type: string, body: Dictionary<any>): Observable<any> {\n    let request;\n    if (+id) {\n      const path = `${this.routes.get.preference.path}/${id}`;\n      if (IsObject(this.routes.get.preference.params, true)) body = DeepMerge(JsonCopy(body), this.routes.get.preference.params);\n      request = this.srv.request.doPatch(path, body, this.apiVersion, true).pipe(\n        map((res: any) => {\n          let preference = {};\n          const tmp = res.data ? <Entity>res.data : <Entity>res;\n          if (IsObject(tmp, true)) {\n            preference = {...tmp.settings, ...{id: tmp.id}};\n          }\n          return preference;\n        })\n      );\n    } else {\n      const buUserId = this.srv.base.getCurrentBusinessUserId();\n      const path = `${this.routes.get.preference.path}`;\n      if (IsObject(this.routes.get.preference.params, true)) body = DeepMerge(JsonCopy(body), this.routes.get.preference.params);\n      body = {\n        ...body, ...{\n          path: this.params.internal_name,\n          type: type,\n          bu_user_id: buUserId,\n          name: `${TitleCase(this.params.name)} ${TitleCase(type)} Setting`\n        }\n      };\n      request = this.srv.request.doPost(path, body, this.apiVersion, true).pipe(\n        map((res: any) => {\n          let preference = {};\n          const tmp = res.data ? <Entity>res.data : <Entity>res;\n          if (IsObject(tmp, true)) {\n            preference = {...tmp.settings, ...{id: tmp.id}};\n          }\n          return preference;\n        })\n      );\n    }\n    return request;\n  }\n\n\n  /**\n   * A method that will navigate the user to the Tab View of an entity\n   * Method should take into consideration the aliases that the entity might have\n   * @param id Primary Key of the entity\n   * @param tab\n   */\n  navigateToEntity(id: number | string, tab?: string): Promise<any> {\n    return this.srv.router.navigateByUrl(`${this.srv.display.alias(SpaceToHyphenLower(this.params.name))}/${id}/${tab}`);\n  }\n\n\n  /**\n   * A method that will navigate the user to the List View of an entity\n   * Method should take into consideration the aliases that the entity might have\n   * @param id Primary Key of the entity\n   * @param tab\n   */\n  navigateToEntities(): Promise<any> {\n    return this.srv.router.navigateByUrl(this.srv.display.alias(SpaceToHyphenLower(this.params.name)));\n  }\n\n\n  /**\n   * A method that update an entity relation\n   * Method should take into consideration the aliases that the entity might have\n   * @param id Primary Key of the entity\n   * @param tab\n   */\n  updateEntity(id: number | string, entity: any, queryParams?: QueryParamsInterface) {\n    const path = InterpolateString(this.routes.patch.entity.path, {id: id});\n\n    return this.srv.request.doPatch(path, entity, this.apiVersion);\n  }\n\n}\n\n\nexport interface PopEntityServiceInterface {\n\n  /**\n   * A http call to archive a single entity\n   * @param id\n   * @param archive\n   */\n  archiveEntity(id: number | string, archive: boolean): Observable<any>;\n\n  /**\n   * A http call to archive  multiple entities that passes a  {xx: {archive: 1}, xx: {archive: 1}, } structure\n   * @param ids Primary Keys of the entities .[ 1 or 1,2,3,4,5 ]\n   * @param archive\n   */\n  archiveEntities(ids: string | number, archive: boolean): Observable<any>;\n\n\n  /**\n   *  A method that returns the configured app\n   */\n  getAppName(): string;\n\n  /**\n   *  A http call that gets a list of entities\n   * @param queryParams '?archived=1', '?archived=0'\n   */\n  getEntities(queryParams?: QueryParamsInterface): Promise<Entity[]>;\n\n  /**\n   *\n   * @param id Primary Key of the entity\n   * @param params '?metadata=1', '?metadata=0', '?metadata=1&filter=id,name'\n   * @return Observable\n   */\n  getEntity(id: number | string, queryParams?: QueryParamsInterface): Observable<any>;\n\n  /**\n   * A Http call that gets the entity history\n   * @param id Primary Key of the entity\n   */\n  getHistory(id: number): Observable<any>;\n\n\n  /**\n   * A Http call that gets the entity metadata\n   */\n  getUiResource(core: CoreConfig): Promise<any>;\n\n  /**\n   * A Http call that gets the entity configs\n   * @param id Primary Key of the entity\n   */\n  getConfig(): Observable<any>;\n\n\n  /**\n   * A method that gets the Intermal name for an entity\n   * @param field\n   */\n  getInternalName(): string;\n\n\n  /**\n   * A method that gets the Display name for a singular entity\n   * @param field\n   */\n  getDisplayName(): string;\n\n\n  /**\n   * A method that gets the base api path for the entity\n   * @param field\n   */\n  getApiPath(): string;\n\n  /**\n   * A http call that gets the user preferences of an Entity\n   */\n  getPreferences(core?: CoreConfig, cache?: boolean): Promise<any>;\n\n  /**\n   * A http call that reloads an existing resource\n   */\n  reloadResource(core: CoreConfig, resourceName: string): Promise<boolean>;\n\n  /**\n   * A method that will navigate the user to the Tab View of an entity\n   * Method should take into consideration the aliases that the entity might have\n   * @param id Primary Key of the entity\n   * @param tab\n   */\n  navigateToEntity(id: number | string, tab?: string): Promise<any>;\n\n  /**\n   * A method that will navigate the user to the List View of an entity\n   * Method should take into consideration the aliases that the entity might have\n   * @param id Primary Key of the entity\n   * @param tab\n   */\n  navigateToEntities(): Promise<any>;\n}\n\n","export const DefaultEntityAction = {\n  new: {\n    description: 'Add A New Record To #name',\n    config: {\n      fields: {\n        name: {\n          required: true,\n          pattern: 'Alpha'\n        },\n      },\n      http: 'POST',\n      label: 'New #internal_name',\n      postUrl: '#path',\n      goToUrl: '#path/:id/general',\n      submit: 'New',\n    },\n    active: 1\n  },\n  advanced_search: {\n    description: 'Advanced Search For #internal_name',\n    config: {\n      fields: {\n        name: {\n          required: true,\n          pattern: 'AlphaNumeric'\n        },\n      },\n      http: 'GET',\n      label: 'Advanced Search',\n      get_url: '#path',\n      goToUrl: null,\n      submit: 'Search',\n    },\n    active: 1\n  }\n};\n","import { EntityModelTableInterface } from '../../../pop-common.model';\n\nexport const DefaultEntityTable = <EntityModelTableInterface>{\n  setting: {\n    columns: {\n      id: {\n        checkbox: { sort_let: 0, visible: true },\n        display: 'ID',\n        sort: 4,\n        visible: true\n      },\n      name: {\n        display: 'Name',\n        sort: 1,\n        visible: true\n      },\n    },\n    options: {\n      display_header: true,\n      column_search: false,\n      column_sort: false,\n      sticky_header: true,\n    }\n  },\n  permission: {\n    allowColumnDisplayToggle: true,\n    allowColumnStickyToggle: true,\n    allowColumnSearchToggle: true,\n    allowColumnSortToggle: true,\n    allowHeaderStickyToggle: true,\n    allowHeaderDisplayToggle: true,\n    allowPaginatorToggle: true,\n  },\n  button: {\n    archived: true,\n    clone: true,\n    new: true,\n    advanced_search: false,\n    custom: []\n  },\n  filter: {\n    active: false,\n    display: 'default'\n  },\n};\n","export const DefaultEntityField = {\n  id: {\n    ancillary: 1,\n    position: 1,\n    table: {\n      checkbox: {\n        visible: true,\n        sort: 0\n      },\n      visible: true,\n      sort: 999\n    },\n    model: {\n      form: 'label',\n      name: 'id',\n      label: 'ID',\n      visible: true,\n      maxlength: 32,\n      copyLabel: true,\n      labelButton: true,\n      valueButton: true,\n      copyLabelBody: '#id',\n      copyLabelDisplay: 'ID #id',\n      valueButtonDisplay: ':archived',\n      valueButtonDisabled: true,\n      valueButtonDisplayTransformation: 'toActiveOrArchived',\n      subLabel: 'Created',\n      subValue: 'created_at'\n    },\n    sort: 0\n  },\n  name: {\n    ancillary: 0,\n    position: 1,\n    table: {\n      visible: true,\n      sort: 2\n    },\n    model: {\n      form: 'input',\n      name: 'name',\n      label: 'Name',\n      bubble: true,\n      pattern: 'Default',\n      visible: true,\n      required: 1,\n      maxlength: 64,\n      patch: {\n        field: 'name',\n        path: '#path/#entityId'\n      }\n    },\n    sort: 2\n  },\n  description: {\n    ancillary: 0,\n    position: 1,\n    table: {\n      visible: true,\n      sort: 3\n    },\n    model: {\n      form: 'textarea',\n      name: 'description',\n      label: 'Description',\n      autoSize: false,\n      height: 70,\n      maxHeight: 150,\n      maxlength: 255,\n      sort: 3,\n      patch: {\n        field: 'description',\n        path: '#path/#entityId'\n      }\n    },\n    sort: 3\n  },\n\n\n  added_by_user: {\n    ancillary: 1,\n    position: 1,\n    table: {\n      visible: false,\n      sort: 99\n    },\n    model: {\n      form: 'label',\n      name: 'added_by_user',\n      label: 'Added By',\n      truncate: 64,\n    },\n    sort: 99,\n  },\n  archived_by_user: {\n    ancillary: 1,\n    position: 1,\n    table: {\n      visible: false,\n      sort: 99\n    },\n    model: {\n      form: 'label',\n      name: 'archived_by_user',\n      label: 'Archived By',\n      truncate: 64,\n    },\n    sort: 99\n  },\n\n\n  created_at: {\n    ancillary: 1,\n    position: 1,\n    table: {\n      visible: false,\n      sort: 99,\n      transformation: {\n        arg1: 'date',\n        type: 'date'\n      },\n    },\n    model: {\n      form: 'label',\n      name: 'created_at',\n      label: 'Added Date',\n      truncate: 64,\n      transformation: {\n        arg1: 'date',\n        type: 'date'\n      },\n    },\n    sort: 99\n  },\n  created_by_user_id: {\n    ancillary: 1,\n    position: 1,\n    table: {\n      visible: false,\n      sort: 99\n    },\n    model: {\n      form: 'label',\n      name: 'created_by_user_id',\n      label: 'Added By ID',\n      truncate: 64,\n    },\n    sort: 99\n  },\n  deleted_at: {\n    ancillary: 1,\n    position: 1,\n    table: {\n      visible: false,\n      sort: 99,\n      transformation: {\n        arg1: 'date',\n        type: 'date'\n      },\n    },\n    model: {\n      form: 'label',\n      name: 'deleted_at',\n      label: 'Deleted At',\n      transformation: {\n        arg1: 'date',\n        type: 'date'\n      },\n      type: 'label',\n      action: 'general'\n    },\n    when: [\n      [\n        [\n          'entity.deleted_at'\n        ]\n      ]\n    ],\n    sort: 99\n  },\n\n  deleted_by_user_id: {\n    ancillary: 1,\n    position: 1,\n    table: {\n      visible: false,\n      sort: 99,\n    },\n\n    model: {\n      form: 'label',\n      name: 'deleted_by_user_id',\n      label: 'Archived',\n      visible: true,\n      maxlength: 32,\n      transformation: {\n        type: 'toYesNoPipe'\n      }\n    },\n    sort: 99\n  },\n  updated_at: {\n    ancillary: 1,\n    position: 1,\n    table: {\n      visible: false,\n      sort: 99,\n      transformation: {\n        arg1: 'date',\n        type: 'date'\n      },\n    },\n    model: {\n      form: 'label',\n      name: 'updated_at',\n      label: 'Last Update',\n      transformation: {\n        arg1: 'date',\n        type: 'date'\n      },\n      type: 'label',\n      action: 'general'\n    },\n    when: [\n      [\n        [\n          'entity.updated_at'\n        ]\n      ]\n    ],\n    sort: 99\n  },\n\n  archived: {\n    ancillary: 1,\n    position: 1,\n    table: {\n      visible: true,\n      sort: 99,\n      transformation: {\n        type: 'toYesNoPipe'\n      },\n    },\n    model: {\n      form: 'label',\n      name: 'archived',\n      label: 'Archived',\n      transformation: {\n        type: 'toYesNoPipe'\n      },\n      type: 'label',\n    },\n    when: [\n      [\n        [\n          'entity.archived'\n        ]\n      ]\n    ],\n    sort: 99\n  }\n};\n","import { Dictionary, ResourceInterface } from '../../../pop-common.model';\n\nexport const DefaultEntityResource = <Dictionary<ResourceInterface>>{\n  // entities: {\n  //   name: 'entities',\n  //   defaultValue: null,\n  //   data_type: 'api_records',\n  //   api_path: 'entities?select=id,name,internal_name&archived=-1',\n  //   api_cache: 1,\n  //   data_filter: {},\n  // },\n};\n","import { EntityModelMenuInterface } from '../../../pop-common.model';\n\nexport const DefaultEntityMenu = <EntityModelMenuInterface>{\n  button: {\n    archive: true,\n    clone: false,\n    custom: [],\n    delete: false,\n    goBack: true\n  },\n  archiveKey: 'archived'\n};\n","import { ServiceRoutesInterface } from '../../../pop-common.model';\n\nexport const DefaultEntityRoute = <ServiceRoutesInterface>{\n  get: {\n    entity: {\n      path: `#path/{id}`,\n      params: {},\n    },\n    entities: {\n      path: `#path`,\n      params: {},\n    },\n    config: {\n      path: `apps/configs`,\n      params: {},\n    },\n    history: {\n      path: `#path/{id}/history`,\n      params: {},\n    },\n    preference: {\n      path: `apps/preferences`,\n      params: {},\n    },\n  },\n  patch: {\n    entity: {\n      path: `#path/{id}`,\n      params: {},\n    },\n  },\n  archive: {\n    entity: {\n      path: `#path/{id}`,\n      params: {},\n    },\n  },\n  restore: {\n    entity: {\n      path: `#path/{id}`,\n      params: {},\n    },\n  }\n};\n","import {EventEmitter, Injectable, OnDestroy} from '@angular/core';\nimport {tap} from 'rxjs/operators';\nimport {forkJoin, Observable, of} from 'rxjs';\n\nimport {PopEntityRepoService} from './pop-entity-repo.service';\nimport {TabConfig} from '../../base/pop-tab-menu/tab-menu.model';\n\nimport {ActivatedRoute} from '@angular/router';\nimport {\n  CoreConfig, DataDecorator, DataFilter, DataSetter,\n  Dictionary,\n  Entity,\n  EntityAccessInterface,\n  EntityExtendInterface,\n  EntityModelInterface,\n  EntityModelMenuInterface,\n  EntityModelTableInterface,\n  EntityParams,\n  EntityParamsInterface,\n  EntityPreference,\n  PopBaseEventInterface, PopHistory, PopLog,\n  QueryParamsInterface,\n  ResourceInterface,\n  ServiceRoutesInterface\n} from '../../../pop-common.model';\nimport {PopEntityUtilFieldService} from './pop-entity-util-field.service';\nimport {\n  DeepMerge,\n  IsArray,\n  IsObject,\n  IsObjectThrowError,\n  IsString,\n  JsonCopy,\n  IsNumber,\n  IsCallableFunction,\n  StorageGetter,\n  GetHttpObjectResult\n} from '../../../pop-common-utility';\nimport {PopDomService} from '../../../services/pop-dom.service';\nimport {PopEntityUtilParamService} from './pop-entity-util-param.service';\nimport {DefaultEntityAction} from '../models/pop-entity-default.action';\nimport {DefaultEntityTable} from '../models/pop-entity-default.table';\nimport {DefaultEntityField} from '../models/pop-entity-default.field';\nimport {DefaultEntityResource} from '../models/pop-entity-default.resource';\nimport {DefaultEntityMenu} from '../models/pop-entity-default.menu';\nimport {DefaultEntityRoute} from '../models/pop-entity-default.route';\nimport {\n  EvaluateWhenConditions,\n  InterpolateEntityRoutes,\n  IsAliasable,\n  SessionEntityFieldUpdate\n} from '../pop-entity-utility';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PopEntityService implements OnDestroy {\n  private name = 'PopEntityService';\n  private id;\n\n  private asset = {\n    access: <Map<string, EntityAccessInterface>>new Map<string, EntityAccessInterface>(),\n    base: <Map<string, CoreConfig>>new Map<string, CoreConfig>(),\n    dataSetter: <Map<string, DataSetter>>new Map<string, DataSetter>(),\n    entryAccess: <Map<string, string[]>>new Map<string, string[]>(),\n    lastDataSetter: <Map<string, DataSetter>>new Map<string, DataSetter>(),\n    decorator: <Map<string, DataDecorator>>new Map<string, DataDecorator>(),\n    filter: <Map<string, DataFilter>>new Map<string, DataFilter>(),\n    params: <Map<string, EntityParams>>new Map<string, EntityParams>(),\n    repo: <Map<string, PopEntityRepoService>>new Map<string, PopEntityRepoService>(),\n    tabs: <Map<string, TabConfig[]>>new Map<string, TabConfig[]>(),\n    resources: <Map<string, Dictionary<ResourceInterface>>>new Map<string, Dictionary<ResourceInterface>>(),\n    actions: <Map<string, Dictionary<any>>>new Map<string, Dictionary<any>>(),\n    fields: <Map<string, Dictionary<any>>>new Map<string, Dictionary<any>>(),\n    tables: <Map<string, EntityModelTableInterface>>new Map<string, EntityModelTableInterface>(),\n    menus: <Map<string, EntityModelMenuInterface>>new Map<string, EntityModelMenuInterface>(),\n    routes: <Map<string, ServiceRoutesInterface>>new Map<string, ServiceRoutesInterface>(),\n  };\n\n\n  /**\n   * This srv is used in the\n   * @param env\n   */\n  constructor(\n    private fieldUtil: PopEntityUtilFieldService,\n    private paramUtil: PopEntityUtilParamService,\n  ) {\n    this.asset.tabs.set('default', []);\n  }\n\n\n  /**\n   * Check a specific crud access against an entity\n   * @param internal_name\n   * @param accessType\n   */\n  checkAccess(internal_name: string, accessType: string) {\n    return this.paramUtil.checkAccess(internal_name, accessType);\n  }\n\n\n  /**\n   * Configure/Extend the default behavior of an entity\n   * @param internal_name\n   * @param extend\n   */\n  configure(internal_name: string, extend: EntityModelInterface) {\n    if (IsArray(extend.tab, true)) this.setEntityTabs(internal_name, extend.tab);\n    if (IsObject(extend.action, true)) this.setEntityAction(internal_name, extend.action);\n    if (IsArray(extend.entryAccess, true)) this.setEntityEntryAccess(internal_name, extend.entryAccess);\n    if (IsObject(extend.resource, true)) this.setEntityResource(internal_name, extend.resource);\n    if (IsCallableFunction(extend.dataSetter)) this.setEntityDataSetter(internal_name, extend.dataSetter);\n    if (IsCallableFunction(extend.lastDataSetter)) this.setLastEntityDataSetter(internal_name, extend.lastDataSetter);\n    if (IsCallableFunction(extend.decorator)) this.setEntityDecorator(internal_name, extend.decorator);\n    if (IsCallableFunction(extend.filter)) this.setEntityFilter(internal_name, extend.filter);\n    if (IsObject(extend.table, true)) this.setEntityTable(internal_name, extend.table);\n    if (IsObject(extend.route, true)) this.setEntityRoute(internal_name, extend.route);\n    if (IsObject(extend.field, true)) this.setEntityField(internal_name, extend.field);\n    if (IsObject(extend.menu, true)) this.setEntityMenu(internal_name, extend.menu);\n  }\n\n\n  /**\n   * A method to get a Core Config for an entity\n   * Uses cache service to improve performance\n   * ALL ENTITY RELATED COMPONENTS RELY ON THIS !!!!\n   * @param entityParams\n   * @param metadata\n   */\n  getCoreConfig(internal_name: string, entityId: number = 0, dom?: PopDomService): Promise<CoreConfig> {\n    return new Promise<CoreConfig>((resolve) => {\n//       console.log('internal_name', entityId);\n      this._getBaseCoreConfig(internal_name).then((baseConfig: CoreConfig) => {\n        if (+entityId > 0) {\n          baseConfig.params.entityId = +entityId;\n\n          baseConfig.repo.getEntity(baseConfig.params.entityId, {}).subscribe(async (res: any) => {\n            baseConfig.entity = res.data ? <Entity>res.data : <Entity>res;\n\n            await this.setCoreDomAssets(baseConfig, dom);\n            // await this.setCoreDomAssets(baseConfig, dom);\n\n            return resolve(baseConfig);\n          }, () => {\n            if (PopHistory.isPreviousHistory()) PopHistory.goBack();\n            return resolve(null);\n          });\n        } else {\n          return resolve(baseConfig);\n        }\n      });\n    });\n  }\n\n\n  /**\n   * Preferences are something that might change in the base configs, keep them there for now since they will not change often\n   * Note: Moved preferences to base configs since they are not playing nice with cache and I want to update them directly\n   * @param internal_name\n   * @param key\n   * @param value\n   */\n  updateBaseCoreConfig(internal_name: string, key: string, value: any) {\n    const base = this.asset.base.get(internal_name);\n    let subKey;\n    if (base) {\n      if (key.includes(':')) {\n        const keys = key.split(':');\n        key = String(keys[0]).trim();\n        subKey = String(keys[1]).trim();\n      }\n      if (key in base) {\n        if (subKey) {\n          if (subKey in base[key]) {\n            base[key][subKey] = value;\n          }\n        } else {\n          base[key] = value;\n        }\n      }\n      this.asset.base.set(internal_name, base);\n    }\n\n    return true;\n  }\n\n\n  /**\n   * Get the base set of the entity definitions\n   * These is the starting point when it comes to entities\n   * @param internal_name\n   * @param entityId\n   */\n  getEntityParams(internal_name: string, entityId: number = null): EntityParams {\n    let entityParams;\n    if (this.asset.params.has(internal_name)) {\n      entityParams = {...this.asset.params.get(internal_name)};\n      entityParams.entity = entityId;\n    } else {\n      entityParams = this.paramUtil.getEntityParams(internal_name);\n      if (entityParams) {\n        this.asset.params.set(internal_name, <EntityParams>{...entityParams});\n      }\n    }\n    return entityParams;\n  }\n\n\n  /**\n   * Get the entity repo\n   * These is the starting point when it comes to entities\n   * @param internal_name\n   * @param entityId\n   */\n  getEntityRepo(internal_name: string): Promise<PopEntityRepoService> {\n    return new Promise<PopEntityRepoService>(async (resolve) => {\n      const baseConfig = await this._getBaseCoreConfig(internal_name);\n      if (IsObject(baseConfig), ['repo']) {\n        return resolve(baseConfig.repo);\n      } else {\n        return resolve(null);\n      }\n    });\n  }\n\n\n  /**\n   * Get the entity params that are associated with a angular route ie.. /admin/accounts should resolve to the account params\n   * @param api_path\n   * @param id\n   */\n  getEntityParamsWithPath(api_path: string, id = null): EntityParams {\n    return this.paramUtil.getEntityParamsWithPath(api_path, id);\n  }\n\n\n  /**\n   * A helper function that fetches an entity internal name from an Active Route\n   * This is a way to ask based of the current route what entity am I dealing with\n   * @param route\n   * @param extension\n   */\n  getRouteInternalName(route: ActivatedRoute, extension?: EntityExtendInterface) {\n    let internal_name = 'user';\n    if (route.snapshot.params && route.snapshot.params.internal_name) {\n      internal_name = route.snapshot.params.internal_name;\n    } else if (extension && IsString(extension.internal_name, true)) {\n      internal_name = extension.internal_name;\n    } else if (IsString(route.snapshot.data.internal_name, true)) {\n      internal_name = route.snapshot.data.internal_name;\n    } else if (IsString(route.snapshot.data.can_read, true)) {\n      internal_name = route.snapshot.data.can_read;\n    } else {\n      let pathEntityParams;\n      if (route.snapshot.routeConfig && route.snapshot.routeConfig.path) {\n        pathEntityParams = this.paramUtil.getEntityParamsWithPath(route.snapshot.routeConfig.path);\n      }\n      if (pathEntityParams) {\n        internal_name = pathEntityParams.internal_name;\n      } else {\n        let attempt;\n        const parts = window.location.pathname.split('/');\n        while (!internal_name || parts.length) {\n          attempt = parts.pop();\n          if (isNaN(attempt) && this.paramUtil.getEntityParams(attempt)) {\n            internal_name = attempt;\n            break;\n          }\n          if (!internal_name && isNaN(attempt) && this.paramUtil.getEntityParamsWithPath(attempt)) {\n            internal_name = attempt;\n            break;\n          }\n        }\n      }\n    }\n    return internal_name;\n  }\n\n\n  /**\n   * A helper function that fetches an entity Id from an Active Route\n   * This is a way to ask based of the current route what entity am I dealing with\n   * @param route\n   * @param extension\n   */\n  getRouteParentId(route: ActivatedRoute, extension?: EntityExtendInterface) {\n    let parentId = null;\n    if (route.snapshot.params && route.snapshot.params.id) {\n      parentId = route.snapshot.params.id;\n    } else {\n      let attempt;\n      const parts = window.location.pathname.split('/');\n      while (!parentId || parts.length) {\n        attempt = parts.pop();\n        if (IsNumber(attempt, true)) {\n          parentId = attempt;\n          break;\n        }\n      }\n    }\n    return parentId;\n  }\n\n\n  /**\n   * Get the set of tab configs that belong to an entity\n   */\n  getEntityTabs(core?: CoreConfig): TabConfig[] {\n    if (IsObject(core, ['params', 'entity']) && this.asset.tabs.has(core.params.internal_name)) {\n      const tabs = this.asset.tabs.get(core.params.internal_name).filter((tab) => {\n        return EvaluateWhenConditions(core, tab.when, core);\n      });\n      return [...tabs];\n    } else {\n      return [...this.asset.tabs.get('default')];\n    }\n  }\n\n\n  /**\n   * A method that refreshes just the entity on an CoreConfig\n   * Will automatically update the entity on the entity config\n   * @param config\n   * @param queryParams\n   */\n  refreshCoreEntity(core: CoreConfig, dom: PopDomService, queryParams: QueryParamsInterface): Promise<Entity> {\n    return new Promise<Entity>((resolve) => {\n      if (core.params.entityId) core.repo.clearCache('entity', String(core.params.entityId), 'PopEntityService:refreshEntity');\n      if (!IsObject(queryParams)) queryParams = {};\n      if (core && core.repo) {\n        queryParams.bypassCache = true;\n        core.repo.getEntity(core.params.entityId, queryParams).subscribe(async (res: any) => {\n          const entity = <Entity>GetHttpObjectResult(res);\n          Object.keys(entity).map((key: string) => {\n            core.entity[key] = entity[key];\n          });\n          await this.setCoreDomAssets(core, dom);\n          PopLog.info(this.name, `refreshCoreEntity`, core.entity);\n          return resolve(entity);\n        }, (err) => {\n          return resolve(null);\n        });\n      } else {\n        return resolve(null);\n      }\n    });\n  }\n\n\n  /**\n   * This function is responsible to make sure the CoreConfig has resources to do its job\n   * IE... If a field request a data set , this function should make sure that it is available\n   * @param core\n   * @param dom\n   * @private\n   */\n  setCoreDomAssets(core: CoreConfig, dom?: PopDomService): Promise<boolean> {\n    return new Promise(async (resolve) => {\n\n\n      core.resource = await core.repo.getUiResource(core);\n      if (IsObject(core.entity, true)) {\n        const dataSetter = StorageGetter(core.repo, ['model', 'dataSetter'], null);\n        if (IsCallableFunction(dataSetter)) {\n          core.entity = dataSetter(core, core.entity, dom);\n        }\n        if (IsObject(dom, true)) {\n          await this.fieldUtil.buildDomFields(core, dom);\n        }\n        const lastDataSetter = StorageGetter(core.repo, ['model', 'lastDataSetter'], null);\n        if (IsCallableFunction(lastDataSetter)) {\n          core.entity = lastDataSetter(core, core.entity, dom);\n        }\n      }\n\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * Set the base definitions for an entity\n   * Each entity needs to define these so we know how to talk to the api in regards to it\n   * The api should provide this details as part of the auth token\n   * @param internal_name\n   * @param entityId\n   */\n  setEntityParams(params: EntityParamsInterface) {\n    PopLog.info(this.name, `Entity Params set for ${params.internal_name}`, params);\n    this.paramUtil.setEntityParams(params);\n  }\n\n\n  /**\n   * Attach a set of tab configs to an entity\n   * @param internal_name\n   * @param tabs\n   */\n  setEntityTabs(internal_name: string, tabs: TabConfig[]) {\n    if (IsString(internal_name, true) && Array.isArray(tabs)) {\n      PopLog.info(this.name, `Entity Tabs set for ${internal_name}`, tabs);\n      this.asset.tabs.set(internal_name, tabs);\n    }\n  }\n\n\n  /**\n   * Attach a set of actions to an entity\n   * @param internal_name\n   * @param tabs\n   */\n  setEntityAction(internal_name: string, action: Dictionary<any>): void {\n    if (IsString(internal_name, true) && IsObject(action)) {\n      PopLog.info(this.name, `Entity Action set for ${internal_name}`, action);\n      this.asset.actions.set(internal_name, action);\n    }\n  }\n\n\n  /**\n   * Attach a set of actions to an entity\n   * @param internal_name\n   * @param tabs\n   */\n  setEntityEntryAccess(internal_name: string, entryAccess: string[]): void {\n    if (IsString(internal_name, true) && IsArray(entryAccess, true)) {\n      PopLog.info(this.name, `Entity entryAccess set for ${internal_name}`, entryAccess);\n      this.asset.entryAccess.set(internal_name, entryAccess);\n    }\n  }\n\n\n  /**\n   * Attach a set of table options for an entity\n   * @param internal_name\n   * @param tabs\n   */\n  setEntityTable(internal_name: string, table: EntityModelTableInterface): void {\n    if (IsString(internal_name, true) && IsObject(table)) {\n      PopLog.info(this.name, `Entity Action set for ${internal_name}`, table);\n      this.asset.tables.set(internal_name, table);\n    }\n  }\n\n\n  /**\n   * Attach a set of table options for an entity\n   * @param internal_name\n   * @param tabs\n   */\n  setEntityRoute(internal_name: string, route: ServiceRoutesInterface): void {\n    if (IsString(internal_name, true) && IsObject(route)) {\n      PopLog.info(this.name, `Entity Route set for ${internal_name}`, route);\n      this.asset.routes.set(internal_name, route);\n    }\n  }\n\n\n  /**\n   * Attach a set of tab menu configs to an entity\n   * @param internal_name\n   * @param tabs\n   */\n  setEntityMenu(internal_name: string, menu: EntityModelMenuInterface): void {\n    if (IsString(internal_name, true) && IsObject(menu, true)) {\n      PopLog.info(this.name, `Entity Menu set for ${internal_name}`, menu);\n      this.asset.menus.set(internal_name, menu);\n    }\n  }\n\n\n  /**\n   * Attach a set of resources to an entity\n   * @param internal_name\n   * @param tabs\n   */\n  setEntityResource(internal_name: string, resource: Dictionary<ResourceInterface>): void {\n    if (IsString(internal_name, true) && IsObject(resource)) {\n      PopLog.info(this.name, `Entity Resource set for ${internal_name}`, resource);\n      this.asset.resources.set(internal_name, resource);\n    }\n  }\n\n\n  /**\n   * Attach a data decorator that mutates entity data response\n   * @param internal_name\n   * @param tabs\n   */\n  setEntityDecorator(internal_name: string, decorator: DataDecorator): void {\n    if (IsString(internal_name, true) && IsCallableFunction(decorator)) {\n      PopLog.info(this.name, `Entity Decorator set for ${internal_name}`, decorator.toString());\n      this.asset.decorator.set(internal_name, decorator);\n    }\n  }\n\n\n  /**\n   * Attach a data decorator that mutates entity data response\n   * @param internal_name\n   * @param tabs\n   */\n  setEntityDataSetter(internal_name: string, dataSetter: DataSetter): void {\n    if (IsString(internal_name, true) && IsCallableFunction(dataSetter)) {\n      PopLog.info(this.name, `Entity Data Setter set for ${internal_name}`, dataSetter.toString());\n      this.asset.dataSetter.set(internal_name, dataSetter);\n    }\n  }\n\n\n  /**\n   * Attach a data decorator that mutates entity data response\n   * @param internal_name\n   * @param tabs\n   */\n  setLastEntityDataSetter(internal_name: string, dataSetter: DataSetter): void {\n    if (IsString(internal_name, true) && IsCallableFunction(dataSetter)) {\n      PopLog.info(this.name, `Entity Last Data Setter  set for ${internal_name}`, dataSetter.toString());\n      this.asset.lastDataSetter.set(internal_name, dataSetter);\n    }\n  }\n\n\n  /**\n   * Attach a data filter to limit the entity data response\n   * @param internal_name\n   * @param tabs\n   */\n  setEntityFilter(internal_name: string, filter: DataFilter): void {\n    if (IsString(internal_name, true) && IsCallableFunction(filter)) {\n      PopLog.info(this.name, `Entity Filter set for ${internal_name}`, filter.toString());\n      this.asset.filter.set(internal_name, filter);\n    }\n  }\n\n\n  /**\n   * Attach a set of fields to an entity\n   * @param internal_name\n   * @param tabs\n   */\n  setEntityField(internal_name: string, field: Dictionary<any>): void {\n    if (IsString(internal_name, true) && IsObject(field)) {\n      PopLog.info(this.name, `Entity Field set for ${internal_name}`, field);\n      this.asset.fields.set(internal_name, field);\n    }\n  }\n\n\n  /**\n   * Get extended fields attached to an entity\n   * @param internal_name\n   * @param tabs\n   */\n  getEntityField(internal_name: string): Dictionary<any> {\n    if (IsString(internal_name, true)) {\n      const field = this.asset.fields.get(internal_name);\n      return field ? field : {};\n    }\n  }\n\n  /**\n   * Get entry access for an entity\n   * @param internal_name\n   * @param tabs\n   */\n  getEntityEntryAccess(internal_name: string): Dictionary<any> {\n    if (IsString(internal_name, true)) {\n      const entryAccess = this.asset.entryAccess.get(internal_name);\n      return IsArray(entryAccess, true) ? entryAccess : [];\n    }\n  }\n\n\n  /**\n   * Get extended fields attached to an entity\n   * @param internal_name\n   * @param tabs\n   */\n  getEntityResource(internal_name: string): Dictionary<ResourceInterface> {\n    if (IsString(internal_name, true)) {\n      const resource = this.asset.resources.get(internal_name);\n      return resource ? resource : {};\n    }\n  }\n\n\n  /**\n   * Get entity data decorator\n   * @param internal_name\n   * @param tabs\n   */\n  getEntityDecorator(internal_name: string): DataDecorator {\n    if (IsString(internal_name, true)) {\n      const decorator = this.asset.decorator.get(internal_name);\n      return IsCallableFunction(decorator) ? decorator : null;\n    }\n  }\n\n\n  /**\n   * Get entity data decorator\n   * @param internal_name\n   * @param tabs\n   */\n  getEntityDataSetter(internal_name: string): DataSetter {\n    if (IsString(internal_name, true)) {\n      const dataSetter = this.asset.dataSetter.get(internal_name);\n      return IsCallableFunction(dataSetter) ? dataSetter : null;\n    }\n  }\n\n\n  /**\n   * Get entity data decorator\n   * @param internal_name\n   * @param tabs\n   */\n  getEntityLastDataSetter(internal_name: string): DataSetter {\n    if (IsString(internal_name, true)) {\n      const lastDataSetter = this.asset.lastDataSetter.get(internal_name);\n      return IsCallableFunction(lastDataSetter) ? lastDataSetter : null;\n    }\n  }\n\n\n  /**\n   * Get entity data decorator\n   * @param internal_name\n   * @param tabs\n   */\n  getEntityFilter(internal_name: string): DataFilter {\n    if (IsString(internal_name, true)) {\n      const filter = this.asset.filter.get(internal_name);\n      return IsCallableFunction(filter) ? filter : null;\n    }\n  }\n\n\n  /**\n   * Get extended actions attached to an entity\n   * @param internal_name\n   * @param tabs\n   */\n  getEntityAction(internal_name: string): Dictionary<any> {\n    if (IsString(internal_name, true)) {\n      const action = this.asset.actions.get(internal_name);\n      return action ? action : {};\n    }\n  }\n\n\n  /**\n   * Get extended table attached to an entity\n   * @param internal_name\n   * @param tabs\n   */\n  getEntityTable(internal_name: string): EntityModelTableInterface {\n    if (IsString(internal_name, true)) {\n      const table = this.asset.tables.get(internal_name);\n      return table ? table : {};\n    }\n  }\n\n\n  /**\n   * Get extended table attached to an entity\n   * @param internal_name\n   * @param tabs\n   */\n  getEntityRoute(internal_name: string): ServiceRoutesInterface {\n    if (IsString(internal_name, true)) {\n      const route = this.asset.routes.get(internal_name);\n      return route ? route : {};\n    }\n  }\n\n\n  /**\n   * Get extended table attached to an entity\n   * @param internal_name\n   * @param tabs\n   */\n  getEntityMenu(internal_name: string): EntityModelMenuInterface {\n    if (IsString(internal_name, true)) {\n      const action = this.asset.menus.get(internal_name);\n      return action ? action : {};\n    }\n  }\n\n\n  bustAllCache() {\n    this.asset.repo.forEach((repo: PopEntityRepoService, key: string) => {\n      PopLog.init(this.name, `Bust cache for ${repo.getInternalName()}`);\n      repo.clearAllCache('bustAllCache');\n    });\n  }\n\n\n  ngOnDestroy() {\n    console.log(this.name, `destroyed:${this.id}`);\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  /**\n   * This will do all of the work of building and storing the base config for each entity\n   * @param internal_name\n   * @param routes\n   * @private\n   */\n  private _getBaseCoreConfig(internal_name: string): Promise<CoreConfig> {\n    return new Promise(async (resolve) => {\n      if (!this.asset.base.has(internal_name)) {\n        const params = this.getEntityParams(internal_name);\n        const core = new CoreConfig({\n          params: IsObjectThrowError(params, true, `Could not resolve params for ${internal_name}`) ? params : null,\n        });\n        core.flag = {routeCheck: IsAliasable(internal_name), assetCheck: true, modalCheck: false, refreshCheck: false};\n        core.access = this._getEntityAccess(core.params);\n        core.channel = new EventEmitter<PopBaseEventInterface>();\n        core.repo = this._getEntityRepo(core.params);\n        core.repo.model = {\n          action: DeepMerge(JsonCopy(DefaultEntityAction), this.getEntityAction(core.params.internal_name)),\n          dataSetter: this.getEntityDataSetter(core.params.internal_name),\n          lastDataSetter: this.getEntityLastDataSetter(core.params.internal_name),\n          decorator: this.getEntityDecorator(core.params.internal_name),\n          filter: this.getEntityFilter(core.params.internal_name),\n          table: DeepMerge(JsonCopy(DefaultEntityTable), this.getEntityTable(core.params.internal_name)),\n          field: {...DeepMerge(DefaultEntityField), ...this.getEntityField(core.params.internal_name)},\n          resource: DeepMerge(JsonCopy(DefaultEntityResource), this.getEntityResource(core.params.internal_name)),\n          route: DeepMerge(JsonCopy(DefaultEntityRoute), this.getEntityRoute(core.params.internal_name)),\n          menu: DeepMerge(JsonCopy(DefaultEntityMenu), this.getEntityMenu(core.params.internal_name))\n        };\n        core.repo.setRoutes(InterpolateEntityRoutes(core.repo.model.route, core.params));\n\n        await forkJoin([this._getEntityConfig(core, internal_name), core.repo.getPreferences(core)]).subscribe(() => {\n          this.asset.base.set(internal_name, core);\n          return resolve({...this.asset.base.get(internal_name)});\n        }, () => {\n          return resolve({...this.asset.base.get(internal_name)});\n        });\n      } else {\n        return resolve({...this.asset.base.get(internal_name)});\n      }\n    });\n  }\n\n\n  /**\n   * Get the an entity repo class for a specific entity\n   * This is intended to be run when a CoreConfig is requested for an entity, once created it will be stored and reused\n   *\n   * @param entityParams\n   * @param routes\n   */\n  private _getEntityRepo(entityParams: EntityParams): PopEntityRepoService {\n    let repo = null;\n    if (IsObject(entityParams, true)) {\n      if (this.asset.repo.has(entityParams.internal_name)) {\n        repo = this.asset.repo.get(entityParams.internal_name);\n      } else {\n\n        repo = new PopEntityRepoService();\n        repo.register(entityParams);\n        this.asset.repo.set(entityParams.internal_name, repo);\n      }\n    }\n\n    return repo;\n  }\n\n\n  /**\n   * Get the crud access that is associated to a specific entity\n   * This is intended to be run when a CoreConfig is requested for an entity, once created it will be stored and reused\n   * @param entityParams\n   */\n\n  private _getEntityAccess(entityParams: EntityParams): EntityAccessInterface {\n    let entityAccess = null;\n    if (IsObject(entityParams, true)) {\n      entityAccess = this.paramUtil.getAccess(entityParams.internal_name);\n      if (this.asset.access.has(entityParams.internal_name)) {\n        entityAccess = {...this.asset.access.get(entityParams.internal_name)};\n      } else {\n        entityAccess = this.paramUtil.getAccess(entityParams.internal_name);\n        if (entityAccess) {\n          this.asset.access.set(entityParams.internal_name, <EntityAccessInterface>{...entityAccess});\n        }\n      }\n    }\n\n    return entityAccess;\n  }\n\n\n  private _getEntityConfig(core: CoreConfig, internal_name: string): Promise<boolean> {\n    return new Promise((resolve) => {\n      core.repo.getConfig().subscribe((res: any) => {\n        // this.getJsonModel(internal_name).then((res: any) => {\n        let ApiModels = res.data ? res.data : res;\n        ApiModels = ApiModels.model ? ApiModels.model : ApiModels;\n        if (!IsObject(ApiModels)) {\n          ApiModels = {};\n        }\n        core.repo.model = {\n          ...core.repo.model,\n          ...ApiModels //  Gives the api the ability to send over data, stub for future features\n        };\n        return resolve(true);\n      }, () => {\n        return resolve(false);\n      });\n    });\n  }\n\n}\n\n\n","import { Injectable } from '@angular/core';\nimport { Resolve, RouterStateSnapshot, ActivatedRouteSnapshot, Router, NavigationEnd } from '@angular/router';\nimport { filter } from 'rxjs/operators';\nimport { GetSessionSiteVar, IsArray, SetSessionSiteVar } from '../pop-common-utility';\n\n\nexport interface RouteHistoryInterface {\n  name: string;\n  base: string;\n  path: string;\n}\n\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class PopRouteHistoryResolver implements Resolve<any> {\n  sessionVar = 'Navigation.history';\n\n\n  constructor(\n    private router: Router,\n  ){\n    // ToDo: Grab enitty map dynamically\n    router.events.pipe(filter(event => event instanceof NavigationEnd)).subscribe((event) => {\n      const path = window.location.pathname.split('/');\n      path.shift();\n      path.pop();\n      SetSessionSiteVar('App.name', path[ 0 ]);\n      SetSessionSiteVar('App.entity', path[ path.length - 1 ]);\n    });\n  }\n\n\n  resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): boolean{\n    const path = window.location.pathname.split('/');\n    path.shift();\n    path.pop();\n    SetSessionSiteVar('App.name', path[ 0 ]);\n    SetSessionSiteVar('App.entity', path[ path[ path.length - 1 ] ]);\n    this.saveNavigationHistory({ name: '', base: path[ 0 ], path: state.url });\n    return true;\n  }\n\n\n  saveNavigationHistory(history: RouteHistoryInterface){\n\n    let historyArray = GetSessionSiteVar(this.sessionVar);\n    if( !historyArray ) historyArray = [];\n\n    // Because a non-existing siteVar returns an object and we need it to be an array.\n    if( typeof historyArray[ 0 ] === 'undefined' ) historyArray = [];\n\n    // Make sure that we don't have two entries in a row of the same thing.\n    if( typeof historyArray[ 0 ] !== 'undefined' && historyArray[ 0 ].path == history.path ) return;\n\n    // Add the new entry and keep the multiple_max to 20 for now.\n    historyArray.unshift(history);\n    if( historyArray.length > 20 ) historyArray.splice(-1, 1);\n\n    SetSessionSiteVar(this.sessionVar, historyArray);\n  }\n\n\n  isPreviousHistory(){\n    const historyArray = GetSessionSiteVar(this.sessionVar);\n    return IsArray(historyArray, true);\n  }\n\n\n  goBack(count: number = 1){\n\n    if( count < 1 ) count = 1;\n\n    const historyArray = GetSessionSiteVar(this.sessionVar);\n    const path = window.location.pathname.split('/');\n\n    // If they came from outside of pop then don't send them back there but instead send them to apps main page.\n    if( typeof historyArray.length === 'undefined' || typeof historyArray[ 1 ] === 'undefined' ){\n      this.router.navigate([ '/' ]);\n      return;\n    }\n\n    // The where they should go back to and also purge that route from the array.\n    const goBackTo = ( historyArray[ count ] !== 'undefined' ? historyArray[ count ] : historyArray.slice(-1)[ 0 ] );\n    if( historyArray.length ) historyArray.shift();\n    SetSessionSiteVar(this.sessionVar, historyArray);\n\n    // If where they are going back to is in the same app then use the router otherwise do reload to sthat route.\n    if( goBackTo.base === path[ 1 ] ){\n      this.router.navigate([ goBackTo.path ]).catch(() => true);\n    }else{\n      window.location.href = window.location.origin + '/' + goBackTo.base + goBackTo.path;\n    }\n  }\n\n}\n","import { TabButtonInterface, TabConfig, TabMenuConfig, TabMenuInterface, } from './tab-menu.model';\nimport { ElementRef, Injectable, OnDestroy } from '@angular/core';\nimport { Subject, Subscription } from 'rxjs';\nimport { PopEntityService } from '../../entity/services/pop-entity.service';\nimport { ActivatedRoute, NavigationEnd, NavigationStart, Router } from '@angular/router';\nimport { MatDialog } from '@angular/material/dialog';\nimport { CoreConfig, Dictionary, Entity, OutletReset, PopLog, QueryParamsInterface, ServiceInjector, SetPopCacheRedirectUrl } from '../../../pop-common.model';\nimport { PopLogService } from '../../../services/pop-log.service';\nimport { ArrayMapSetter, GetSessionSiteVar, IsObject, IsString, PopUid, SetSessionSiteVar, StorageGetter, TitleCase } from '../../../pop-common-utility';\nimport { DetermineEntityName } from '../../entity/pop-entity-utility';\nimport { PopDomService } from '../../../services/pop-dom.service';\nimport { PopExtendService } from '../../../services/pop-extend.service';\n\n\n@Injectable( {\n  providedIn: 'root'\n} )\nexport class PopTabMenuService extends PopExtendService implements OnDestroy {\n  protected id = PopUid();\n  public name = 'PopTabMenuService';\n\n  protected asset = {\n    core: <CoreConfig>undefined,\n    config: <TabMenuConfig>undefined,\n    dom: <PopDomService>undefined,\n    id: <string | number>undefined,\n    map: <Dictionary<any>>{},\n    outlet: <ElementRef>undefined,\n    resetOutlet: <OutletReset>undefined,\n    route: <ActivatedRoute>undefined,\n    path: <string>undefined,\n    clearCache: false\n  };\n\n  protected srv: {\n    dialog: MatDialog,\n    entity: PopEntityService,\n    log: PopLogService,\n    router: Router,\n  } = {\n    dialog: ServiceInjector.get( MatDialog ),\n    entity: ServiceInjector.get( PopEntityService ),\n    log: ServiceInjector.get( PopLogService ),\n    router: ServiceInjector.get( Router ),\n  };\n\n  public ui = {\n    entityParams: <Dictionary<any>>undefined\n  };\n\n  change = new Subject(); // event emitter\n\n  constructor(){\n    super();\n    this._setDomExtensions();\n    this._initSession();\n  }\n\n\n  private _initSession(){\n    this.dom.session = {\n      scroll: {},\n      path: '',\n      fields: {},\n      ...this.dom.session\n    };\n  }\n\n\n  /**\n   * Add Buttons to the Tab Menu\n   * @param buttons Array<TabButtonInterface>)\n   * @returns void\n   */\n  addButtons( buttons: Array<TabButtonInterface> ): void{\n    if( buttons && buttons.length ){\n      this.asset.config.buttons.push( ...buttons );\n      this.asset.map.buttons = ArrayMapSetter( this.asset.config.buttons, 'id' );\n      this._emitChange( 'buttons' );\n    }\n  }\n\n\n  /**\n   * Add Tabs to the Tab Menu\n   * @param tabs Array<TabInterface>\n   * @returns void\n   */\n  addTabs( tabs: Array<TabConfig> ):\n    void{\n    if( tabs && tabs.length\n    ){\n      this.asset.config.tabs.push( ...tabs );\n      this.asset.map.tabs = ArrayMapSetter( this.asset.config.tabs, 'id' );\n    }\n    this._emitChange( 'tabs' );\n  }\n\n\n  /**\n   * This fx will cause this srv to remove the cache when it is destroyed\n   */\n  clearCache(): void{\n    this.asset.clearCache = true;\n  }\n\n\n  /**\n   * Remove all Buttons from the Tab Menu\n   * @param buttons Array<TabButtonInterface>)\n   * @returns void\n   */\n  clearButtons( buttons: Array<TabButtonInterface> ): void{\n    this.asset.config.buttons = [];\n    this.asset.map.buttons = ArrayMapSetter( this.asset.config.buttons, 'id' );\n    this._emitChange( 'buttons' );\n  }\n\n\n  /**\n   * Get latest path\n   */\n  getPathSession(){\n    return GetSessionSiteVar( `Entity.${TitleCase( this.asset.core.params.internal_name )}.Menu.path` );\n  }\n\n\n  /**\n   * Clear the tab system session\n   * Auto called on go back button click\n   * @param name\n   * @returns void\n   */\n  clearSession(): void{\n    if( this.asset.core && this.asset.core.params && this.asset.core.params.internal_name ){\n      SetSessionSiteVar( `Entity.${TitleCase( this.asset.core.params.internal_name )}.Menu`, null );\n    }\n  }\n\n\n  /**\n   * Get Misc Data for each tab\n   * @param path\n   * @returns object\n   */\n  getTab( id ?: string | number ): any{\n    if( !this.asset.id ) id = this.asset.path;\n    if( this.asset.map.tabs && id in this.asset.map.tabs ){\n      return Object.assign( {}, this.asset.config.tabs[ this.asset.map.tabs[ id ] ] );\n    }\n    return null;\n  }\n\n\n  /**\n   * Get the global metadata stored for the Tab Menu\n   * If key is passed, return that specific data else entire object\n   * @param key string\n   * @returns boolean\n   */\n  getCore(){\n    return this.asset.core;\n  }\n\n\n  /**\n   * Set the TabMenuConfig of the Tab Menu\n   * The Tab Menu Component auto calls this on creation\n   * @param config TabMenuConfig\n   * @returns void\n   */\n  registerConfig( core: CoreConfig, config: TabMenuConfig | TabMenuInterface, dom?: PopDomService ): TabMenuConfig{\n    if( config ){\n      this.asset.core = IsObject( core, true ) ? core : null;\n      this.ui.entityParams = IsObject( this.asset.core, [ 'params' ] ) ? this.asset.core.params : null;\n\n      this.asset.config = new TabMenuConfig( <TabMenuInterface>config );\n      // get the users access\n      this.asset.map.tabs = ArrayMapSetter( this.asset.config.tabs, 'path' );\n      this.asset.map.buttons = ArrayMapSetter( this.asset.config.buttons, 'id' );\n      if( this.asset.core && this.asset.core.params ) this.dom.session.scroll = GetSessionSiteVar( `Entity.${TitleCase( this.asset.core.params.internal_name )}.Menu.scroll` );\n      if( !this.dom.session.scroll ) this.dom.session.scroll = {};\n\n\n      // Subscribe to the CRUD events\n      this.asset.path = window.location.pathname.split( '/' ).pop();\n      // bind to router to detect entity change detection .. effective for cloning, navigation changes\n      this.dom.setSubscriber( 'route-change', this.srv.router.events.subscribe( ( e ) => this._navigationHandler( e ) ) );\n      this.dom.state.loaded = true;\n\n      this._resetMenu();\n      this._emitChange( 'config' );\n      if( this.srv.log.enabled( 'config', this.name ) ) console.log( this.srv.log.message( `${this.name}:registerConfig` ), this.srv.log.color( 'config' ), this.asset.config );\n      return this.asset.config;\n    }\n  }\n\n\n  /**\n   * Register an outlet to enable scroll session\n   * @param outlet ElementRef\n   * @returns void\n   */\n  registerOutlet( outlet: ElementRef ): void{\n    this.asset.outlet = outlet;\n    this._emitChange( 'outlet' );\n  }\n\n\n  /**\n   * Register a route to enable entity change detection and enforce the id on the route\n   * @param outlet ElementRef\n   * @returns void\n   */\n  registerRoute( route: ActivatedRoute ){\n    if( !this.asset.route ){\n      this.asset.route = route;\n      this._emitChange( 'route' );\n      if( +this.asset.route.snapshot.params.id ){\n        if( !this.asset.core.entity || +this.asset.core.entity.id !== +this.asset.route.snapshot.params.id ){\n          this.resetTab( true );\n          // this.refreshEntity( this.asset.route.snapshot.params.id, this.asset.dom, null, `${this.name}:registerRoute:conflict` ).then( () => this.resetTab()  );\n        }\n      }\n    }\n  }\n\n\n  /**\n   * Register a outletReset function that you want called when on crud operations\n   * @param outlet ElementRef\n   * @returns void\n   */\n  registerOutletReset( resetOutlet: OutletReset ){\n    this.asset.resetOutlet = resetOutlet;\n    this._emitChange( 'outlet-reset' );\n  }\n\n\n  /**\n   * This fx will refresh the entity that exist on the this.asset.core\n   * @param entityId\n   * @param dom\n   * @param queryParams\n   * @param caller\n   */\n  refreshEntity( entityId: number = null, dom: PopDomService, queryParams: QueryParamsInterface, caller: string ): Promise<boolean>{\n    return new Promise( ( resolve ) => {\n      if( this.asset.core ){\n        this.showAsLoading( false );\n        this.srv.log.warn( this.name, `refreshEntity:${caller}` );\n        if( !this.asset.config ){\n          this.showAsLoading( false );\n          return resolve( false );\n        }\n        this.dom.setTimeout( 'refresh', () => {\n          if( !entityId && this.asset.core.entity && +this.asset.core.entity.id ) entityId = +this.asset.core.entity.id;\n          if( +entityId ){\n            this.asset.core.params.entityId = entityId;\n            this.srv.entity.refreshCoreEntity( this.asset.core, dom, queryParams ).then( ( entity: Entity ) => {\n              this._resetMenu();\n              this.asset.core.params.refresh = false;\n              if( typeof this.asset.resetOutlet === 'function' ){\n                setTimeout( () => {\n                  this.asset.resetOutlet();\n                  this.showAsLoading( false );\n                  return resolve( true );\n                }, 0 );\n              }else{\n                return resolve( true );\n              }\n            } );\n          }else{\n            this.showAsLoading( false );\n            return resolve( false );\n          }\n        }, 0 );\n      }else{\n        this.showAsLoading( false );\n        return resolve( false );\n      }\n    } );\n  }\n\n\n  /**\n   * This fx will reset the current tab\n   * @param clearCache\n   */\n  resetTab( clearCache = false ){\n    if( clearCache ){\n      SetPopCacheRedirectUrl( this.srv.router );\n    }else{\n      this._resetMenu();\n      // this.asset.core.params.refresh = false;\n      if( typeof this.asset.resetOutlet === 'function' ) this.asset.resetOutlet();\n    }\n  }\n\n\n  /**\n   * This fx will reset a specific position of the current tab\n   * @param position\n   */\n  reloadTabPosition( position: number = null ){\n    if( typeof this.asset.resetOutlet === 'function' ) this.asset.resetOutlet( position );\n  }\n\n\n  /**\n   * This will set a flag the the tab will need to refresh\n   */\n  setTabRefresh(){\n    if( this.asset.core && this.asset.core.params ){\n      this.asset.core.params.refresh = true;\n    }\n  }\n\n\n  /**\n   * This fx will set the scroll position of the current tab if was was previously visited\n   */\n  setTabScrollPosition(){\n    if( this.asset.path && this.dom.session.scroll[ this.asset.path ] ){\n      this._setTabScrollPosition( this.dom.session.scroll[ this.asset.path ] );\n    }\n  }\n\n\n  /**\n   * This fx will trigger a loading indicator in the current tab\n   * @param value\n   */\n  showAsLoading( value: boolean ){\n    if( IsObject( this.asset.config, true ) ){\n      this.asset.config.loading = value ? true : false;\n    }\n  }\n\n\n  /**\n   * Store the current tab into session memory\n   * @param name\n   * @returns void\n   */\n  setPathSession( tab: TabConfig ): void{\n    if( this.asset.core && this.asset.core.params ) SetSessionSiteVar( `Entity.${TitleCase( this.asset.core.params.internal_name )}.Menu.path`, tab.path );\n  }\n\n\n  /**\n   * Add Tabs to the Tab Menu\n   * @param path string\n   * @returns void\n   */\n  removeTab( path: string ):\n    void{\n    if( path in this.asset.map.tabs\n    ){\n      this.asset.config.tabs.splice( this.asset.map.tabs[ path ], 1 );\n      this.asset.map.tabs = ArrayMapSetter( this.asset.config.tabs, 'id' );\n    }\n    this._emitChange( 'tabs' );\n  }\n\n\n  /**\n   * Toggle whether a Button is hidden\n   * If value is set to true(show), false(hide), else toggle\n   * @param buttons Array<TabButtonInterface>)\n   * @returns boolean\n   */\n  toggleButton( id: string, value ?: boolean ): boolean{\n    if( id in this.asset.map.buttons ){\n      if( typeof value !== 'undefined' ){\n        this.asset.config.buttons[ this.asset.map.buttons[ id ] ].hidden = value;\n      }else{\n        this.asset.config.buttons[ this.asset.map.buttons[ id ] ].hidden = !this.asset.config.buttons[ this.asset.map.buttons[ id ] ].hidden;\n      }\n      this._emitChange( 'buttons' );\n      return true;\n    }\n    return false;\n  }\n\n\n  /**\n   * This fx will update main header of the current Tab Menu\n   * @param name\n   */\n  updateName( name: string ): void{\n    if( IsString( name, true ) && this.asset && this.asset.config ){\n      this.asset.config.name = name;\n    }\n  }\n\n\n  ngOnDestroy(){\n    if( this.asset.clearCache ){\n      if( IsObject( this.asset.core ) ){\n        this.asset.core.repo.clearAllCache();\n      }\n    }\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  /**\n   * If you do not extend of an extension service these have to be set manually\n   */\n  private _setDomExtensions(){\n    this.dom = {\n      ...this.dom, ...{\n        setSubscriber: ( subscriptionKey: string, subscription: Subscription = null ) => {\n          if( subscriptionKey && this.dom.subscriber && subscriptionKey in this.dom.subscriber && this.dom.subscriber[ subscriptionKey ] && typeof this.dom.subscriber[ subscriptionKey ].unsubscribe === 'function' ){\n            this.dom.subscriber[ subscriptionKey ].unsubscribe();\n          }\n          if( subscription ){\n            this.dom.subscriber[ subscriptionKey ] = subscription;\n          }\n        },\n\n        setTimeout: ( timeoutKey: string, callback = null, delay = 250 ) => {\n          if( timeoutKey && this.dom.delay && timeoutKey in this.dom.delay && this.dom.delay[ timeoutKey ] ){\n            clearTimeout( this.dom.delay[ timeoutKey ] );\n          }\n          if( typeof callback === 'function' ){\n            this.dom.delay[ timeoutKey ] = setTimeout( callback, delay );\n          }\n        },\n      }\n    };\n  }\n\n\n  /**\n   * Return to last active tab\n   * @returns void\n   */\n  private _isPathSession(): boolean{\n    this.dom.session.path = this.getPathSession();\n    if( this.dom.session.path && this.dom.session.path !== this.asset.path && this.dom.session.path in this.asset.map.tabs ){\n      return false;\n    }\n    return true;\n  }\n\n\n  /**\n   * Store current tab scroll position\n   * @returns void\n   */\n  private _storeTabScrollPosition(): void{\n    if( this.asset.core && this.asset.core.params && this.asset.path ){\n      this.dom.session[ this.asset.path ] = this._getTabScrollPosition();\n      SetSessionSiteVar( `Entity.${TitleCase( this.asset.core.params.internal_name )}.Menu.scroll`, this.dom.session.scroll );\n    }\n  }\n\n\n  /**\n   * Set current tab scroll position\n   * @returns void\n   */\n  private _setTabScrollPosition( scrollTop: number ): void{\n    if( this.asset.outlet && this.asset.outlet.nativeElement ) this.asset.outlet.nativeElement.scrollTop = scrollTop;\n  }\n\n\n  /**\n   * Get the current tab scroll position\n   * @returns number\n   */\n  private _getTabScrollPosition(): number{\n    if( this.asset.outlet && this.asset.outlet.nativeElement ) return this.asset.outlet.nativeElement.scrollTop;\n    return 0;\n  }\n\n\n  /**\n   * Verify the id on the route matches the id of the configuration entity\n   * @returns number\n   */\n  private _checkId(){\n    if( this.asset.route && +this.asset.route.snapshot.params.id ){\n      if( !this.asset.config && this.srv.log.enabled( 'error', this.name ) ) console.log( this.srv.log.message( `${this.name}:_checkId:error - Could not find config` ), this.srv.log.color( 'error' ) );\n      if( this.srv.log.enabled( 'info', this.name ) ) console.log( this.srv.log.message( `${this.name}:_checkId route id(${this.asset.route.snapshot.params.id } matches config(${this.asset.core.entity.id}):refresh is ${+this.asset.route.snapshot.params.id !== +this.asset.core.entity.id}` ), this.srv.log.color( 'info' ) );\n      if( !this.asset.core.entity || +this.asset.route.snapshot.params.id !== +this.asset.core.entity.id ){\n        this.resetTab( true );\n      }\n    }\n  }\n\n\n  /**\n   * This fx will track the current scroll position of the current tab when navigating away, and session it\n   * @param event\n   * @private\n   */\n  private _navigationHandler( event ): void | Promise<boolean>{\n    // On a NavigationStart event record the current scroll position of the current tab\n    // On a NavigationEnd check to see if a scroll position for the current tab has been stored and apply it\n    if( event instanceof NavigationStart && this.asset.path ) this._storeTabScrollPosition();\n    if( event instanceof NavigationEnd ){\n\n      this.asset.path = String( event.url ).split( '/' ).pop();\n      if( this.asset.route && this._isPathSession() || !this.asset.route ){\n        this._checkId();\n        if( this.dom.session.scroll[ this.asset.path ] ){\n          setTimeout( () => {\n            this._setTabScrollPosition( this.dom.session.scroll[ this.asset.path ] );\n          }, 0 );\n        }\n      }else{\n        if( this.asset.route ) return this.srv.router.navigate( [ this.dom.session.path ], { relativeTo: this.asset.route } );\n      }\n    }\n  }\n\n\n  /**\n   * This fx will reseet the current menu options\n   * @private\n   */\n  private _resetMenu(){\n    if( this.asset.core && this.asset.config ){\n      if( this.asset.core.entity && this.asset.core.entity.id ) this.asset.config.name = DetermineEntityName( this.asset.core.entity );\n      if( Array.isArray( this.asset.config.buttons ) && this.asset.config.buttons.length && this.asset.core.entity ){\n        const archiveKey = <string>StorageGetter( this.asset.core, [ 'repo', 'model', 'menu', 'archiveKey' ], 'archived' );\n        const btnMap = ArrayMapSetter( this.asset.config.buttons, 'id' );\n        if( 'archive' in btnMap ) this.asset.config.buttons[ btnMap[ 'archive' ] ].hidden = this.asset.core.entity[ archiveKey ] ? true : false;\n        if( 'activate' in btnMap ) this.asset.config.buttons[ btnMap[ 'activate' ] ].hidden = this.asset.core.entity[ archiveKey ] ? false : true;\n        if( 'close' in btnMap ) this.asset.config.buttons[ btnMap[ 'close' ] ].hidden = this.asset.config.portal ? false : true;\n\n      }\n    }\n  }\n\n\n  /**\n   * Change detection Emitter\n   * @param type strings\n   * @returns void\n   */\n  _emitChange( name: string, data: any = '' ){\n    PopLog.info( this.name, name, data );\n    this.change.next( { source: this.name, type: 'tab-menu', name: name, data: data } );\n  }\n}\n","import {\n  Component,\n  OnInit,\n  Input,\n  ViewChild,\n  ElementRef,\n  OnDestroy\n} from '@angular/core';\nimport { TabMenuConfig, TabButtonInterface, TabConfig, TabMenuInterface } from './tab-menu.model';\nimport {\n  ActivatedRoute, Router,\n} from '@angular/router';\nimport { PopTabMenuService } from './pop-tab-menu.service';\nimport { PopExtendComponent } from '../../../pop-extend.component';\nimport { PopBaseEventInterface, PopTemplate, ServiceInjector } from '../../../pop-common.model';\nimport { PopDomService } from '../../../services/pop-dom.service';\nimport { PopRouteHistoryResolver } from '../../../services/pop-route-history.resolver';\nimport { IsObjectThrowError } from '../../../pop-common-utility';\n\n\n@Component({\n  selector: 'lib-pop-tab-menu',\n  templateUrl: './pop-tab-menu.component.html',\n  styleUrls: [ './pop-tab-menu.component.scss' ],\n})\n\nexport class PopTabMenuComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() config: TabMenuConfig;\n  @ViewChild('header', { static: true }) header: ElementRef;\n  @ViewChild('outlet', { static: true }) outletRef: ElementRef;\n\n  public name = 'PopTabMenuComponent';\n\n  protected srv: {\n    history: PopRouteHistoryResolver,\n    router: Router,\n    tab: PopTabMenuService\n  } = {\n    history: ServiceInjector.get(PopRouteHistoryResolver),\n    router: ServiceInjector.get(Router),\n    tab: <PopTabMenuService>undefined\n  };\n\n\n\n  constructor(\n    public el: ElementRef,\n    private route: ActivatedRoute,\n    protected _domRepo: PopDomService,\n    protected _tabRepo: PopTabMenuService,\n  ){\n    super();\n\n    /**\n     * Configure the component tailored to its specific needs\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        PopTemplate.turnOffFilter();\n        this.config = IsObjectThrowError(this.config, true, `${this.name}:configure: - this.config`) ? this.config : null;\n        if( this.config.goBack ) this.config.goBack = this.srv.history.isPreviousHistory();\n        this.dom.setHeight(window.innerHeight - 55, 10);\n        this.log.info(`Determined height:${this.dom.height.inner}`);\n        return resolve(true);\n      });\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        this._registerConfig().then(() => {\n          setTimeout(() => {\n            this.srv.tab.setTabScrollPosition();\n            this.srv.tab.registerOutlet(this.outletRef);\n          });\n          return resolve(true);\n        });\n      });\n    };\n  }\n\n\n  /**\n   * This component should have a purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * Go back in history\n   * @returns void\n   */\n  onBackButtonClick(): void{\n    this.srv.tab.clearSession();\n    this.srv.history.goBack();\n  }\n\n\n  /**\n   * Trigger a menu click event\n   * @returns void\n   */\n  onMenuButtonClick(button: TabButtonInterface): void{\n    this.log.info(`${this.name}:button`, button);\n    this.dom.setTimeout(`stop-loader`, null, 0)\n    this.config.loading = true;\n    const eventData: PopBaseEventInterface = {\n      source: this.name,\n      type: 'button',\n      id: button.id,\n      name: button.name,\n      metadata: ( button.metadata ? button.metadata : false )\n    };\n    this.onBubbleEvent(eventData);\n    this.dom.setTimeout(`stop-loader`, () => {\n      this.config.loading = false;\n    }, 3000);\n  }\n\n\n  /**\n   * Trigger a tab click event\n   * @returns void\n   */\n  onTabMenuClick(tab: TabConfig): void{\n    this.log.info(`onTabMenuClick`, tab);\n    this.srv.tab.setPathSession(tab);\n    const eventData: PopBaseEventInterface = {\n      source: this.name,\n      type: 'tab',\n      id: tab.id,\n      name: tab.name,\n      metadata: ( tab.metadata ? tab.metadata : false )\n    };\n    this.onBubbleEvent(eventData);\n  }\n\n\n  /**\n   * Event Emitter\n   * @returns void\n   */\n  onBubbleEvent(eventData: PopBaseEventInterface): void{\n    this.events.emit(eventData);\n  }\n\n\n  /**\n   * Clean up the dom of this component\n   *\n   * Clear out data stored for this Tab Menu out of the global service\n   */\n  ngOnDestroy(){\n    if( this.core && this.core.params && this.core.params.entityId ) this.core.repo.clearCache('entity', String(this.core.params.entityId), `PopTabMenuComponent:ngOnDestroy`);\n    // this.srv.tab.reset();\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n\n\n  private _registerConfig(): Promise<boolean>{\n    return new Promise((resolve) => {\n      this.config = IsObjectThrowError(this.config, true, `${this.name}:registerConfig: - this.config`) ? this.srv.tab.registerConfig(this.core, <TabMenuInterface>this.config, this.dom.repo) : <TabMenuConfig>{};\n      resolve(true);\n    });\n  }\n\n\n}\n","import { Dictionary, FieldCustomSettingInterface, FieldInterface, FieldItemPatchInterface, KeyMap } from '../../../pop-common.model';\nimport { TitleCase, ToArray } from '../../../pop-common-utility';\n\n\nexport interface EntitySchemeSectionInterface {\n  id?: number;\n  name: string | null;\n  asset_id: number; // the\n  asset_type: string; // the\n  asset?: any;\n  compact?: boolean | number;\n  scheme_id?: number | null;\n  container?: boolean;\n  field_id?: number;\n  flex?: number;\n  menu?: boolean; // show menu\n  expanded?: boolean;\n  label?: string | null;\n  modified?: boolean;\n  position: number;   // Any metadata desired.\n  primary?: boolean;\n  required?: boolean;\n  traits?: FieldCustomSettingInterface[];\n  sort_order: number;\n  children?: EntitySchemeSectionConfig[];\n  startIndex?: number;\n  mapping?: Dictionary<any>;\n}\n\n\nexport interface ProfileSchemeFieldInterface extends EntitySchemeSectionInterface {\n  asset: FieldInterface;\n}\n\n\nexport interface ProfileSchemeAssetPoolInterface {\n  name: string;\n  asset_type: string;\n  display: string;\n  data: KeyMap<any>;\n  list: any[];\n}\n\n\nexport class EntitySchemeSectionConfig {\n  id: number;\n  name: string | null;\n  asset_id: number; // the\n  asset_type: string; // the\n  asset?: any;\n  compact? = true;\n  flex?: number;\n  scheme_id: number | null;\n  field_id?: number;\n  container?: boolean;\n  label?: string | null;\n  menu?: boolean; // show menu\n  expanded?: boolean;\n  position: number;   // Any metadata desired.\n  primary?: boolean;\n  required?: boolean;\n  sort_order: number;\n  children?: EntitySchemeSectionConfig[];\n  mapping?: Dictionary<any> = {};\n  modified = false;\n\n\n  constructor( params?: EntitySchemeSectionInterface ){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n  }\n}\n\n\nexport interface FieldSettingInterface {\n  label: string;\n  name: string;   // the base entityId definitions\n  value: any;\n  params: any;\n  default: any;\n  options?: any;\n  patch?: FieldItemPatchInterface;\n  readonly: boolean;\n}\n","import { Entity, EntityParams, EventPromiseCallback, FieldItemInterface } from '../../../pop-common.model';\n\n\nexport interface FieldItemGroupDialogInterface {\n  submit: string;           // The value that the submit button should display.\n  title?: string;           // The display of the popup pop-table-dialog box.\n  cancel?: boolean;         // If the cancel button should be displayed. Default is true.\n  postUrlVersion?: number;  // The version the form post should use. Default to 1.\n  goToUrl?: string;         // If set, the url to load after successful form post. IE: Add User = users/:entityId\n  postUrl?: string;         // If set, the url to call the api with when creating an entity\n  callback?: EventPromiseCallback;\n}\n\n\nexport interface FieldItemGroupInterface {\n  id: string | number;\n  params: EntityParams;\n  fieldItems: Array<FieldItemInterface>;\n  position?: string;\n  metadata?: object;   // Any metadata desired.\n  http?: 'POST' | 'PATCH';\n  inDialog?: FieldItemGroupDialogInterface;\n  layout?: 'row' | 'column';\n  debug?: boolean;\n}\n\n\nexport class FieldItemGroupConfig {\n  id: string | number;\n  params: EntityParams;\n  fieldItems = <FieldItemInterface[]>[];\n  layout = 'column';\n  metadata;\n  inDialog = <FieldItemGroupDialogInterface>undefined;\n  fieldItemMap;\n  position = 1;\n  getField;\n  resetFields;\n  entity: Entity = null;\n  http = 'POST';\n  debug = false;\n\n\n  constructor( config?: FieldItemGroupInterface ){\n    for( const i in config ) this[ i ] = config[ i ];\n    if( !config.inDialog ) this.inDialog = null;\n    if( config.inDialog && config.inDialog.cancel !== false ) config.inDialog.cancel = true;\n  }\n}\n","import {\n  Component,\n  ComponentRef,\n  ElementRef,\n  Inject,\n  Input,\n  OnDestroy,\n  OnInit,\n  ViewChild,\n  ViewContainerRef\n} from '@angular/core';\nimport {slideInOut} from '../../../../pop-common-animations.model';\nimport {PopExtendDynamicComponent} from '../../../../pop-extend-dynamic.component';\nimport {PopDomService} from '../../../../services/pop-dom.service';\nimport {\n  CoreConfig, Dictionary,\n  DynamicComponentInterface, Entity, EntityActionDataInterface,\n  EntityActionInterface,\n  EntityExtendInterface,\n  FieldInterface, FieldItemInterface,\n  FieldItemPatchInterface, PopBaseEventInterface,\n  PopLog,\n  PopTemplate,\n  ServiceInjector\n} from '../../../../pop-common.model';\nimport {\n  ConvertArrayToOptionList,\n  DeepMerge, GetHttpErrorMsg,\n  GetHttpResult,\n  IsArray, IsCallableFunction,\n  IsDefined,\n  IsObject,\n  IsString,\n  JsonCopy, Sleep, SnakeToPascal, StorageGetter, TitleCase,\n} from '../../../../pop-common-utility';\nimport {\n  EvaluateWhenCondition,\n  EvaluateWhenConditions,\n  FieldItemModel,\n  IsValidFieldPatchEvent,\n  ParseLinkUrl,\n  ParseModelValue\n} from '../../../entity/pop-entity-utility';\nimport {Router} from '@angular/router';\nimport {PopEntityUtilFieldService} from '../../../entity/services/pop-entity-util-field.service';\nimport {CdkPortalOutlet, ComponentPortal, ComponentType} from '@angular/cdk/portal';\nimport {MAT_DIALOG_DATA, MatDialog, MatDialogRef} from '@angular/material/dialog';\nimport {PopRequestService} from '../../../../services/pop-request.service';\nimport {FormGroup} from '@angular/forms';\nimport {PopEntityEventService} from '../../../entity/services/pop-entity-event.service';\nimport {PopSelectComponent} from \"../../pop-field-item/pop-select/pop-select.component\";\n\n\n@Component({\n  selector: 'lib-pop-action-dialog',\n  templateUrl: './pop-action-dialog.component.html',\n  styleUrls: ['./pop-action-dialog.component.scss'],\n  animations: [\n    slideInOut\n  ]\n})\nexport class PopActionDialogComponent extends PopExtendDynamicComponent implements OnInit, OnDestroy {\n  @ViewChild('container', {read: ViewContainerRef, static: true}) private container;\n  @ViewChild(CdkPortalOutlet, {static: true}) portal: CdkPortalOutlet;\n  @Input() action: EntityActionInterface;\n  @Input() actionName: string;\n  @Input() extension: EntityExtendInterface;\n\n  name = 'PopActionDialogComponent';\n\n  protected srv = {\n    dialog: <MatDialog>ServiceInjector.get(MatDialog),\n    events: <PopEntityEventService>ServiceInjector.get(PopEntityEventService),\n    field: <PopEntityUtilFieldService>ServiceInjector.get(PopEntityUtilFieldService),\n    request: <PopRequestService>ServiceInjector.get(PopRequestService),\n    router: <Router>ServiceInjector.get(Router),\n  };\n\n  protected asset = {\n    componentType: <ComponentType<any>>undefined,\n    entity: <Entity>{},\n    facadeDuration: 250,\n    fieldItems: <FieldItemInterface[]>[],\n    fieldItemMap: undefined,\n    submitText: 'Submit',\n    visible: 0,\n    http: <'PATCH' | 'POST' | 'DELETE' | 'GET'>'POST',\n    postUrl: <string>null,\n    goToUrl: <string>null,\n  };\n\n  public ui = {\n    form: new FormGroup({}),\n    submitText: 'Submit',\n    header: 'New'\n  };\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService,\n    public dialog: MatDialogRef<PopActionDialogComponent>,\n    @Inject(MAT_DIALOG_DATA) public data: EntityActionDataInterface,\n  ) {\n    super();\n\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise(async (resolve) => {\n\n        await this._setInitialConfig();\n        await this._setAction();\n        await this._setFieldItems();\n        await this._setAdditionalConfig();\n        await this._buildFormGroup();\n\n        return resolve(true);\n      });\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        this._renderFieldItems();\n        this._renderComponent();\n\n        const hasChild = this.asset.fieldItems.find((fieldItem: FieldItemInterface) => StorageGetter(fieldItem, ['model', 'options', 'child'], null));\n        this._resetComponentListHidden();\n        if (hasChild) {\n          this._triggerParentChildUpdates(hasChild.model.name);\n        } else {\n          this._triggerFormValidation();\n        }\n\n        return resolve(true);\n      });\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit() {\n    super.ngOnInit();\n  }\n\n\n  /**\n   * Intercept the enter press to check if the form can be submitted\n   * @param event\n   */\n  onEnterPress(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    if (this.dom.state.validated) {\n      this.dom.setTimeout(`submit-form`, () => {\n        return this.onFormSubmit();\n      }, 250);\n    }\n  }\n\n\n  /**\n   * The user can click a cancel btn to close the action dialog\n   */\n  onFormCancel() {\n    this.dom.state.loaded = false;\n    this.dom.state.loading = true;\n    this.dom.setTimeout(`close-modal`, () => {\n      this.dialog.close(-1);\n    }, 250);\n  }\n\n\n  /**\n   * The user will press enter or click a submit btn to submit the form\n   */\n  onFormSubmit() {\n    return new Promise<boolean>(async (resolve) => {\n      if (this.dom.state.validated && !this.dom.state.pending) {\n        this._onSubmissionStart();\n        const params = this.ui.form.value; // get form value before disabling form\n\n        // this.dom.asset.form_group.disable(); //bad idea disabled through css\n\n        if (!this.action.facade) {\n          const method = `do${TitleCase(this.asset.http)}`;\n          const request = this.srv.request[method](this.asset.postUrl, params, 1, false);\n          request.subscribe(async (result: any) => {\n              result = GetHttpResult(result);\n              const goToUrl = this.asset.goToUrl;\n              this.asset.entity = result;\n              await this._onSubmissionSuccess();\n              this.dialog.close(this.asset.entity);\n              if (IsString(goToUrl, true)) {\n                const newGoToUrl = ParseLinkUrl(String(goToUrl).slice(), this.asset.entity);\n                this.log.info(`onFormSubmit:goToUrl`, newGoToUrl);\n                this.log.info(`onFormSubmit:entity`, this.asset.entity);\n                this.srv.router.navigate([newGoToUrl]).catch((e) => {\n                  console.log(e);\n                });\n              }\n              return resolve(true);\n            },\n            err => {\n              this._onSubmissionFail();\n              this._setErrorMessage(GetHttpErrorMsg(err));\n              return resolve(false);\n            }\n          );\n        } else {\n          await Sleep(this.asset.facadeDuration);\n          await this._onSubmissionSuccess();\n          let response = IsObject(params) ? params : {};\n          if (this.action.responseType === 'boolean') {\n            response = true;\n          } else if (this.action.responseType === 'store') {\n            response = IsObject(this.action.store) ? this.action.store : {};\n          }\n          this.dialog.close(response);\n\n          return resolve(true);\n        }\n      }\n    });\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy() {\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Protected Method )                                      *\n   *               These are protected instead of private so that they can be overridden          *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  /**\n   * This fx will perform the intial config of this component\n   * @private\n   */\n  protected _setInitialConfig(): Promise<boolean> {\n    return new Promise<boolean>((resolve) => {\n      if (!this.dom.state.loaded) {\n        this.template.attach('container'); // container references the @viewChild('container')\n\n        if (IsObject(this.data.core, true)) this.core = this.data.core;\n        if (IsObject(this.data.action, true)) this.action = this.data.action;\n        if (IsString(this.data.actionName, true)) this.actionName = this.data.actionName;\n        if (IsObject(this.data.extension, true)) this.extension = this.data.extension;\n        if (!IsObject(this.extension, true)) this.extension = {};\n        // actionFieldItems.sort( DynamicSort( 'sort' ) );\n\n        if (!(IsString(this.ui.submitText, true))) this.ui.submitText = 'Submit';\n        this.dom.state.validated = false;\n        this.dom.state.template = 'collection';\n        delete this.data;\n\n        this.dom.handler.bubble = async (core: CoreConfig, event: PopBaseEventInterface) => {\n          this.log.event(`bubble:handler`, event);\n          if (this.action.responseType === 'store') this._handleStoreEvent(event);\n          if (IsCallableFunction(this.action.onEvent)) await this.action.onEvent(core, <PopBaseEventInterface>{\n            ...event, ...{\n              entity: this.asset.entity,\n              form: this.ui.form,\n              metadata: {\n                fieldItems: this.asset.fieldItems\n              }\n            }\n          });\n          // Todo:: Are we seeing this event here, on single input forms submit button is not be activated\n          if (event.name === 'onKeyUp' || event.name === 'onInvalidChange') {\n            this.dom.state.validated = false;\n            this.dom.setTimeout(`trigger-validation`, () => {\n              this._triggerFormValidation();\n            }, 250);\n\n          } else if (IsValidFieldPatchEvent(this.core, event)) {\n\n            if (event.config.name in this.asset.entity) {\n              const newValue = isNaN(event.config.control.value) ? event.config.control.value : +event.config.control.value;\n              this.asset.entity[event.config.name] = newValue;\n              if (this.asset.fieldItems.length > 1) {\n                this._resetComponentListHidden();\n                this.dom.setTimeout(`update-relations`, () => {\n                  this._triggerParentChildUpdates(event.config.name);\n                }, 0);\n              } else {\n                this._triggerFormValidation();\n              }\n            }\n          }\n\n\n          // if( event.config.bubble || [ 'patch' ].includes( event.name ) ){\n          this.events.emit(event);\n          // }\n        };\n      }\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * This fx will perform additional config of this component that has initial config dependencies\n   * @private\n   */\n  protected _setAdditionalConfig(): Promise<boolean> {\n    return new Promise<boolean>((resolve) => {\n      let goToUrl = IsString(this.extension.goToUrl, true) ? this.extension.goToUrl : (this.action.goToUrl ? this.action.goToUrl : null);\n      if (goToUrl) goToUrl = ParseModelValue(goToUrl, this.core, true);\n\n      const storage = IsObject(this.core.entity, ['id', 'name']) && !this.action.blockEntity ? this.core.entity : (IsObject(this.asset.entity, true) ? this.asset.entity : {});\n      let postUrl = IsString(this.extension.postUrl, true) ? this.extension.postUrl : (this.action.postUrl ? ParseLinkUrl(String(this.action.postUrl).slice(), storage) : this.core.params.path);\n      if (postUrl) postUrl = ParseModelValue(postUrl, this.core, true);\n\n      if (+this.action.facadeDuration) this.asset.facadeDuration = this.action.facadeDuration;\n      if (+this.action.facadeDuration > 2000) {\n        this.action.facadeDuration = 2000;\n      }\n      this.asset.goToUrl = goToUrl;\n      this.asset.postUrl = postUrl;\n\n      this.ui.submitText = IsString(this.action.submitText, true) ? this.action.submitText : 'Submit';\n      this.asset.submitText = this.action.submitText;\n\n      if (IsString(this.action.http)) this.asset.http = this.action.http;\n\n      this.ui.header = IsString(this.action.header, true) ? this.action.header : `${TitleCase(this.action.name)} ${SnakeToPascal(this.core.repo.getDisplayName())}`;\n\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * This fx will trigger the form validation\n   * @private\n   */\n  protected _buildFormGroup() {\n    return new Promise<boolean>((resolve) => {\n      if (IsArray(this.asset.fieldItems, true)) {\n        this.asset.fieldItems.map((field: FieldItemInterface) => {\n          if (field.config && field.config.control) {\n            this.ui.form.addControl(field.config.name, field.config.control);\n            this.asset.visible++;\n          }\n        });\n      }\n\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * This fx will take any patch event that occurs and store the key value pair\n   * @param event\n   * @private\n   */\n  protected _handleStoreEvent(event: PopBaseEventInterface) {\n    this.log.event(`_handleStoreEvent`, event);\n    if (IsValidFieldPatchEvent(this.core, event)) {\n      if (!(IsObject(this.action.store))) this.action.store = <Dictionary<any>>{};\n      this.action.store[event.config.name] = event.config.control.value;\n    }\n    this.log.info(`_handleStoreEvent: store`, this.action.store);\n  }\n\n\n  /**\n   * This fx will trigger the form validation\n   * @private\n   */\n  protected _triggerFormValidation() {\n    this.dom.setTimeout(`trigger-form-validation`, () => {\n      this._validateForm().then((valid: boolean) => {\n        this.dom.state.validated = valid;\n      });\n    }, 50);\n  }\n\n\n  /**\n   * The form needs to able to make api calls to verify info for certain fields\n   * ToDo:: Allow the config to be able to pass in api validation calls for certain fields\n   * @private\n   */\n  protected _validateForm(): Promise<boolean> {\n    return new Promise<boolean>((resolve) => {\n      this.dom.state.validated = false;\n      this.dom.setTimeout(`trigger-form-validation`, null);\n      this.dom.setTimeout(`validate-form`, () => {\n        this.ui.form.updateValueAndValidity();\n        setTimeout(() => {\n          this.dom.state.validated = true; // mock stub for now\n          return resolve(this.ui.form.valid);\n        }, 0);\n      }, 0);\n    });\n  }\n\n\n  /**\n   * This fx will handle the error messaging\n   * @param message\n   * @private\n   */\n  protected _setErrorMessage(message: string) {\n    this.dom.error.message = message;\n    // this.dom.setTimeout('message', () => {\n    //   this.dom.error.message = '';\n    //   this.dom.setTimeout('message', null, 0);\n    // }, 3000);\n  }\n\n\n  /**\n   * This hook is called when the form is submitting\n   * @private\n   */\n  protected _onSubmissionStart() {\n    this.dom.setTimeout('message', null, 0);\n    this.dom.error.message = '';\n    this.dom.state.pending = true;\n    this.ui.submitText = '';\n  }\n\n\n  /**\n   * This hook is called when the form submission has failed\n   * @private\n   */\n  protected _onSubmissionFail() {\n    // Re-Enable Form and show error\n    this.dom.state.pending = false;\n    this.dom.state.template = 'fail';\n    this.ui.submitText = IsString(this.action.submitText, true) ? this.action.submitText : 'Submit';\n  }\n\n\n  /**\n   * This hook is called when the form has submitted successfully\n   * @private\n   */\n  protected _onSubmissionSuccess() {\n    return new Promise<boolean>(async (resolve) => {\n      this.dom.state.template = 'success';\n      this.dom.state.pending = false;\n      this.core.repo.clearAllCache(this.name);\n      if (IsCallableFunction(this.action.callback)) {\n        this.dom.setTimeout(`action-callback`, async () => {\n          const actionEvent = <PopBaseEventInterface>{\n            type: 'entity',\n            source: this.name,\n            name: this.action.name,\n            entity: this.asset.entity,\n            action: this.action,\n            data: this.ui.form.value\n          };\n          await this.action.callback(this.core, actionEvent, this.dom);\n        }, 0);\n      }\n\n      const crudEvent = <PopBaseEventInterface>{\n        source: this.name,\n        method: 'create',\n        type: 'entity',\n        name: this.core.params.name,\n        internal_name: this.core.params.internal_name,\n        data: this.asset.entity\n      };\n\n      this.srv.events.sendEvent(crudEvent);\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * This fx will render all of the fields that were passed through in the action config\n   * @private\n   */\n  protected _renderFieldItems() {\n    const componentList = <DynamicComponentInterface[]>[];\n    this.asset.fieldItems.map((fieldItem, index) => {\n      if (fieldItem && IsObject(fieldItem.model, ['name']) && fieldItem.config && fieldItem.component) {\n        const existingValue = 'control' in fieldItem.config ? fieldItem.config.control.value : null;\n\n        this.asset.entity[fieldItem.model.name] = existingValue;\n        if (this.action.bubbleAll) fieldItem.config.bubble = true;\n        const component = <DynamicComponentInterface>{\n          type: fieldItem.component,\n          inputs: {\n            config: fieldItem.config,\n            position: fieldItem.config['metadata'].position ? fieldItem.config['metadata'].position : 1,\n            hidden: IsArray(fieldItem.model.when, true) ? !(EvaluateWhenCondition(this.core, fieldItem.model.when, this.core)) : false,\n            when: IsArray(fieldItem.model.when, true) ? fieldItem.model.when : null\n          }\n        };\n        componentList.push(component);\n      }\n    });\n\n    this.template.render(componentList, [], true);\n  }\n\n\n  /**\n   * This fx will render the a component that was passed in through the action config\n   * @private\n   */\n  protected _renderComponent() {\n    if (IsObject(this.action.component, ['type']) && this.portal) {\n      if (this.portal.attachedRef) this.portal.detach();\n      this.dom.setSubscriber('portal-events', null);\n      const componentRef = this.portal.attach(new ComponentPortal(this.action.component.type));\n      componentRef.instance['core'] = this.core;\n      if (IsObject(this.action.component, ['inputs'])) {\n        Object.keys(this.action.component.inputs).map((key: string) => {\n          componentRef.instance[key] = this.action.component.inputs[key];\n        });\n      }\n      componentRef.changeDetectorRef.detectChanges();\n\n      if (componentRef.instance['events']) {\n        this.dom.setSubscriber('portal-events', componentRef.instance['events'].subscribe(async (event: PopBaseEventInterface) => {\n          if (this.action.responseType === 'store') {\n            this._handleStoreEvent(event);\n          }\n          if (IsCallableFunction(this.action.onEvent)) await this.action.onEvent(this.core, <PopBaseEventInterface>{\n            ...event, ...{\n              entity: this.asset.entity,\n              form: this.ui.form,\n              metadata: {\n                fieldItems: this.asset.fieldItems\n              }\n            }\n          });\n        }));\n      }\n    }\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  /**\n   * This fx will resolve the config of action that pop is suppose to perform\n   * @private\n   */\n  private _setAction(): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      if (IsObject(this.action, true)) {\n        if (!(IsDefined(this.action.responseType))) this.action.responseType = 'form';\n        this.dom.state.hasComponent = IsObject(this.action.component, ['type']);\n        this.dom.state.hasFields = IsObject(this.action.fields, true);\n\n        return resolve(true);\n      } else if (IsString(this.actionName) && IsObject(this.core.repo.model.action, [this.actionName]) && IsObject(this.core.repo.model.action[this.actionName], true)) {\n        this.action = this.core.repo.model.action[this.actionName];\n        if (!(IsDefined(this.action.responseType))) this.action.responseType = 'form';\n        this.dom.state.hasComponent = IsObject(this.action.component, ['type']);\n\n        this.dom.state.hasFields = IsObject(this.action.fields, true);\n        return resolve(true);\n      } else {\n        this.dom.state.hasComponent = false;\n        this.dom.state.hasFields = false;\n\n        return resolve(false);\n      }\n    });\n  }\n\n\n  /**\n   * A helper method that sets build the field item definitions\n   * @param entityConfig\n   * @param goToUrl\n   */\n  private _setFieldItems(): Promise<boolean> {\n\n    return new Promise<boolean>(async (resolve) => {\n      if (IsObject(this.action, ['fields']) && IsObject(this.action.fields, true)) {\n\n        const actionFieldItems = {};\n        this.asset.fieldItems = [];\n        this.asset.fieldItemMap = {};\n        let needsResource = false;\n\n        Object.keys(this.action.fields).map((name) => {\n          let field = <FieldInterface>{};\n          if (!this.action.blockEntity && name in this.core.repo.model.field) {\n            field = <any>this.core.repo.model.field[name];\n          }\n          let model = <any>{};\n\n          if (field.when) model.when = JsonCopy(field.when);\n\n          if (IsObject(field.model, true)) {\n            model = {...model, ...field.model};\n          }\n          let actionTransformation;\n          if (IsObject(this.action.fields[name], true)) {\n            actionTransformation = IsString(this.action.fields[name].transformation, true) ? this.action.fields[name].transformation : null;\n            model = {...model, ...this.action.fields[name]};\n          }\n          // delete model.metadata;\n          delete model.transformation;\n          if (actionTransformation) model.transformation = actionTransformation; // only want to apply transformation if it was set directly on action\n\n          model.value = IsDefined(model.value) ? ParseModelValue(model.value, this.core) : null;\n          // model.value = IsDefined( model.value ) ? ParseModelValue(model.value, core) : null;\n          if (!model.value && IsObject(model.options, ['defaultValue'])) {\n            model.value = ParseModelValue(model.options.defaultValue, this.core);\n          }\n          model.hidden = !EvaluateWhenConditions(this.core, model.when, this.core);\n\n          if (IsObject(this.extension, true) && model.name in this.extension) {\n            model.value = ParseModelValue(this.extension[model.name]);\n            model.readonly = true;\n            this.asset.entity[model.name] = model.value;\n          }\n\n          model.tabOnEnter = true;\n          actionFieldItems[name] = model;\n          if (model.options && model.options.resource) {\n            needsResource = true;\n          }\n        });\n\n\n        // if needsMetadata go grab it before you try to build out the fields\n        if (needsResource) {\n          const resource = await this.core.repo.getUiResource(this.core);\n          if (IsObject(resource, true)) DeepMerge(this.core.resource, resource);\n          PopLog.init(this.name, `doAction:needed resource`, resource);\n          Object.keys(actionFieldItems).map((name) => {\n            const fieldItem = actionFieldItems[name];\n            const actionItemModel = FieldItemModel(this.core, JsonCopy(fieldItem), false);\n            const actionItem = this.srv.field.buildCoreFieldItem(this.core, actionItemModel);\n            if (IsObject(actionItem.config, true)) {\n              actionItem.config.facade = true;\n              if (IsObject(actionItem.config.patch)) {\n                const patch = <FieldItemPatchInterface>actionItem.config.patch;\n                patch.duration = 0;\n                patch.path = null;\n                patch.displayIndicator = false;\n              }\n            }\n            this.asset.fieldItemMap[name] = this.asset.fieldItems.length;\n            this.asset.fieldItems.push(actionItem);\n          });\n\n        } else {\n          // no metadata was needed for any of these fields\n          Object.keys(actionFieldItems).map((name) => {\n            const actionItemModel = FieldItemModel(this.core, actionFieldItems[name], false);\n            const actionItem = this.srv.field.buildCoreFieldItem(this.core, actionItemModel);\n            if (IsObject(actionItem.config, true)) {\n              actionItem.config.facade = true;\n              if (IsObject(actionItem.config.patch)) {\n                const patch = <FieldItemPatchInterface>actionItem.config.patch;\n                patch.duration = 0;\n                patch.path = null;\n                patch.displayIndicator = false;\n              }\n            }\n            this.asset.fieldItemMap[name] = this.asset.fieldItems.length;\n            this.asset.fieldItems.push(actionItem);\n          });\n          PopTemplate.clear();\n        }\n        // console.log('this.asset.fieldItems', this.asset.fieldItems);\n        this.asset.fieldItems.map((fieldItem) => {\n          if (IsArray(StorageGetter(fieldItem, ['config', 'options', 'values']), true)) {\n            // console.log('here', fieldItem);\n            (<any>fieldItem).config.height = 180;\n          }\n\n        });\n        return resolve(true);\n\n      } else {\n\n        return resolve(false);\n      }\n    });\n  }\n\n\n  /**\n   * Determine if field should be auto filled with the first item in the list\n   * @param name\n   */\n  private _fieldHasAutoFill(name: string) {\n    if (name in this.asset.fieldItemMap && this.asset.fieldItems[this.asset.fieldItemMap[name]].model && this.asset.fieldItems[this.asset.fieldItemMap[name]].model.options) {\n      if (this.asset.fieldItems[this.asset.fieldItemMap[name]].model.autoFill) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n\n  /**\n   * Determine if field has a child relation in the list\n   * @param name\n   */\n  private _fieldHasChild(name: string) {\n    if (name in this.asset.fieldItemMap && this.asset.fieldItems[this.asset.fieldItemMap[name]].model && this.asset.fieldItems[this.asset.fieldItemMap[name]].model.options) {\n      if (this.asset.fieldItems[this.asset.fieldItemMap[name]].model.options.child) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n\n  /**\n   * Get a linear list of the parent child relations from a given point\n   * @param self the name to start from (usually the field that has just been changed by user)\n   * @param list\n   */\n  private _getRelationList(name: string, list: any[] = []) { // recursive loop\n    let item;\n    if (name && name in this.asset.fieldItemMap) {\n      item = this.asset.fieldItems[this.asset.fieldItemMap[name]];\n      if (IsObject(item, ['config', 'model'])) {\n        list.push({\n          name: item.config.name,\n          autoFill: this._fieldHasAutoFill(name),\n        });\n        if (this._fieldHasChild(name)) {\n          this._getRelationList(this.asset.fieldItems[this.asset.fieldItemMap[name]].model.options.child, list);\n        }\n      }\n\n    }\n    return list;\n  }\n\n\n  /**\n   * Whenever a update to the entity happens the fields in the group should be re-evaluated if there are when conditionals set\n   * @private\n   */\n  private _resetComponentListHidden() {\n    let name;\n    this.template.refs.filter((componentRef: ComponentRef<any>) => {\n      return IsObject(componentRef.instance.config, true) && IsArray(componentRef.instance.when, true);\n    }).map((componentRef: ComponentRef<any>) => {\n      name = componentRef.instance.config.name;\n      if (name && name in this.asset.fieldItemMap) {\n        componentRef.instance.hidden = !EvaluateWhenCondition(this.asset, componentRef.instance.when);\n      }\n    });\n  }\n\n\n  /**\n   * This fx will manage if the form fields have parent child relations, ie if an account select needs to be filtered by a client select that exists in the form\n   * @param name\n   * @private\n   */\n  private _triggerParentChildUpdates(name: string) {\n    if (this._fieldHasChild(name)) {\n      let values;\n      let child_fk;\n      let childField;\n      let autoFill = false;\n      let set;\n      let resource;\n      const relations = this._getRelationList(name);\n      relations.some((relation) => {\n        if (relation.autoFill) {\n          autoFill = true;\n          return true;\n        }\n      });\n\n\n      if (name && name in this.asset.fieldItemMap) {\n        child_fk = this.asset.fieldItems[this.asset.fieldItemMap[name]].model.options.child;\n        if (child_fk && child_fk in this.asset.fieldItemMap) {\n          childField = this.asset.fieldItems[this.asset.fieldItemMap[child_fk]];\n          if (childField.model.form === 'select') {\n            if (childField.model.options.resource) {\n              if (IsObject(this.core.resource[childField.model.options.resource], ['data_values'])) {\n                resource = this.core.resource[childField.model.options.resource].data_values;\n              }\n            }\n            if (IsArray(resource, true)) {\n              values = ConvertArrayToOptionList(resource, {\n                // ensure that an option shows up in list in case other conditions remove it, aka it has been archived\n                prevent: [], // a list of ids that should not appear in the list for whatever reason\n                // parent means this options should all have a common field trait like client_fk, account_fk ....\n                parent: childField.model.options.parent ? {\n                  field: childField.model.options.parent,\n                  value: this.asset.entity[childField.model.options.parent]\n                } : null,\n                empty: childField.model.options.empty ? childField.model.options.empty : null,\n              });\n            } else {\n              values = [];\n            }\n\n            if (autoFill && values.length) {\n              set = values[values.length - 1].value;\n            } else {\n              set = null;\n            }\n            childField.config.options.values = values;\n            autoFill = autoFill && values.length ? values[0].value : null;\n            if (typeof childField.config.triggerOnChange === 'function') childField.config.triggerOnChange(set);\n\n            this.dom.setTimeout(`clear-message-${child_fk}`, () => {\n              if (typeof childField.config.clearMessage === 'function') {\n                childField.config.clearMessage();\n              }\n            }, 0);\n\n          }\n        }\n      }\n    }\n    this._triggerFormValidation();\n  }\n\n}\n","import { Injectable, OnDestroy } from '@angular/core';\nimport {\n  CoreConfig, Entity, EntityActionDataInterface, EntityActionInterface, EntityExtendInterface,\n  FieldInterface,\n  FieldItemPatchInterface, PopLog,\n  PopTemplate, ServiceInjector,\n} from '../../../pop-common.model';\nimport { EvaluateWhenConditions, FieldItemModel, ParseLinkUrl, ParseModelValue } from '../pop-entity-utility';\nimport { FieldItemGroupConfig, FieldItemGroupDialogInterface } from '../../base/pop-field-item-group/pop-field-item-group.model';\nimport {\n  DeepMerge,\n  DynamicSort,\n  GetHttpResult,\n  IsCallableFunction,\n  IsDefined,\n  IsNumber,\n  IsObject,\n  IsString,\n  JsonCopy,\n  SnakeToPascal,\n  TitleCase\n} from '../../../pop-common-utility';\nimport { PopEntityUtilFieldService } from './pop-entity-util-field.service';\nimport { PopExtendService } from '../../../services/pop-extend.service';\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\nimport { PopActionDialogComponent } from '../../base/pop-dialogs/pop-action-dialog/pop-action-dialog.component';\n\n\n@Injectable( {\n  providedIn: 'root'\n} )\nexport class PopEntityActionService extends PopExtendService implements OnDestroy {\n  name = 'PopEntityActionService';\n\n\n  protected srv = {\n    dialog: <MatDialog>ServiceInjector.get( MatDialog ),\n    field: <PopEntityUtilFieldService>ServiceInjector.get( PopEntityUtilFieldService )\n  };\n\n  protected asset = {\n    dialogRef: <MatDialogRef<PopActionDialogComponent>>undefined,\n    field: <PopEntityUtilFieldService>ServiceInjector.get( PopEntityUtilFieldService )\n  };\n\n\n  constructor(){\n    super();\n  }\n\n\n  do( core: CoreConfig, action: string | EntityActionInterface, extension?: EntityExtendInterface, blockEntity = false ): Promise<Entity>{\n    return new Promise<Entity>( async( resolve ) => {\n      if( !this.asset.dialogRef && this._checkArgs( core, action ) ){\n        this.asset.dialogRef = this.srv.dialog.open( PopActionDialogComponent, {\n          disableClose: true,\n          width: extension && extension.width ? ( IsNumber( extension.width ) ? `${extension.width}px` : `${extension.width}` ) : '400px',\n          data: <EntityActionDataInterface>{\n            core: core,\n            extension: extension,\n            actionName: IsString( action, true ) ? action : null,\n            action: IsObject( action, true ) ? action : null,\n          },\n          panelClass: 'sw-mat-dialog-flex'\n        } );\n\n        this.dom.setSubscriber( 'pop-action-dialog-close', this.asset.dialogRef.beforeClosed().subscribe( ( res: any ) => {\n          res = GetHttpResult( res );\n          this.asset.dialogRef = null;\n          return resolve( res );\n        } ) );\n      }else{\n        return resolve( null );\n      }\n    } );\n\n  }\n\n\n  private _checkArgs( core: CoreConfig, action: string | EntityActionInterface, extension?: EntityExtendInterface ){\n    if( IsObject( core, [ 'params', 'access' ] ) ){\n      if( IsString( action, true ) || IsObject( action, [ 'name' ] ) ){\n        return true;\n      }\n    }\n    return false;\n  }\n\n\n  /**\n   * A helper method that sets up a FieldGroupConfig for a create/new pop-table-dialog\n   * @param entityConfig\n   * @param goToUrl\n   */\n  doAction( core: CoreConfig, actionName: string, extension?: EntityExtendInterface ): Promise<FieldItemGroupConfig>{\n    return new Promise( async( resolve ) => {\n      PopTemplate.buffer();\n      if( IsObject( core.repo.model.action, [ actionName ] ) && IsObject( core.repo.model.action[ actionName ], true ) ){\n\n        const action = core.repo.model.action[ actionName ];\n        PopLog.info( this.name, `doAction`, { core: core, actionName: actionName, action: action, extension: extension } );\n        const actionItems = [];\n        let needsResource = false;\n        let model;\n\n        const actionFieldItems = {};\n\n        // start with getting fields labeled for new doAction\n        if( IsObject( action.fields, true ) ){\n          Object.keys( action.fields ).map( ( name ) => {\n            let field = <FieldInterface>{};\n            if( name in core.repo.model.field ){\n              field = <any>core.repo.model.field[ name ];\n            }\n            model = {};\n            if( field.when ) model.when = JsonCopy( field.when );\n\n            if( IsObject( field.model, true ) ){\n              model = Object.assign( model, field.model );\n            }\n            let actionTransformation;\n            if( IsObject( action.fields[ name ], true ) ){\n              actionTransformation = IsString( action.fields[ name ].transformation, true ) ? action.fields[ name ].transformation : null;\n              model = Object.assign( model, action.fields[ name ] );\n            }\n            // delete model.metadata;\n            delete model.transformation;\n            if( actionTransformation ) model.transformation = actionTransformation; // only want to apply transformation if it was set directly on action\n\n            model.value = IsDefined( model.value ) ? ParseModelValue( model.value, core ) : null;\n            // model.value = IsDefined( model.value ) ? ParseModelValue(model.value, core) : null;\n            if( !model.value && IsObject( model.options, [ 'defaultValue' ] ) ){\n              model.value = ParseModelValue( model.options.defaultValue, core );\n            }\n            model.hidden = !EvaluateWhenConditions( core, model.when, core );\n\n            if( IsObject( extension, true ) && model.name in extension ){\n              model.value = ParseModelValue( extension[ model.name ] );\n              model.readonly = true;\n            }\n\n            model.tabOnEnter = true;\n            actionFieldItems[ name ] = model;\n            if( model.options && model.options.resource ){\n              needsResource = true;\n            }\n          } );\n        }\n\n        // if needsMetadata go grab it before you try to build out the fields\n        if( needsResource ){\n          const resource = await core.repo.getUiResource( core );\n          if( IsObject( resource, true ) ) DeepMerge( core.resource, resource );\n          PopLog.init( this.name, `doAction:needed resource`, resource );\n          Object.keys( actionFieldItems ).map( ( name ) => {\n            const actionItemModel = FieldItemModel( core, actionFieldItems[ name ], false );\n            const actionItem = this.srv.field.buildCoreFieldItem( core, actionItemModel );\n            if( IsObject( actionItem.config, true ) ){\n              actionItem.config.facade = true;\n              if( IsObject( actionItem.config.patch ) ){\n                const patch = <FieldItemPatchInterface>actionItem.config.patch;\n                patch.duration = 0;\n                patch.path = null;\n                patch.displayIndicator = false;\n              }\n            }\n            actionItems.push( actionItem );\n          } );\n\n          PopTemplate.clear();\n          console.log('actionItems', actionItems);\n          return resolve( this.getActionDialogConfig( core, action, actionItems, core.resource, ) );\n\n        }else{\n          // no metadata was needed for any of these fields\n          Object.keys( actionFieldItems ).map( ( name ) => {\n            const actionItemModel = FieldItemModel( core, actionFieldItems[ name ], false );\n            const actionItem = this.srv.field.buildCoreFieldItem( core, actionItemModel );\n\n            if( IsObject( actionItem.config, true ) ){\n              actionItem.config.facade = true;\n              if( IsObject( actionItem.config.patch ) ){\n                const patch = <FieldItemPatchInterface>actionItem.config.patch;\n                patch.duration = 0;\n                patch.path = null;\n                patch.displayIndicator = false;\n              }\n            }\n            actionItems.push( actionItem );\n          } );\n          PopTemplate.clear();\n          console.log('actionItems', actionItems);\n          const actionConfig = this.getActionDialogConfig( core, action, actionItems, ( IsObject( core.entity, true ) ? core.entity.ui : {} ) )\n          PopLog.info( this.name, `doAction: config`, actionConfig );\n          return resolve( actionConfig );\n        }\n      }else{\n        PopTemplate.clear();\n        PopTemplate.error( { message: `${TitleCase( actionName )} not configured.`, code: 500 } );\n        return resolve( null );\n      }\n    } );\n  }\n\n\n  /**\n   * Callback helper to newEntity\n   * @param entityConfig\n   * @param fields\n   * @param metadata\n   * @param goToUrl\n   */\n  getActionDialogConfig( core: CoreConfig, action: EntityActionInterface, actionFieldItems, metadata, extension?: EntityExtendInterface ): FieldItemGroupConfig{\n    if( !IsObject( extension ) ) extension = {};\n    actionFieldItems.sort( DynamicSort( 'sort' ) );\n    let goToUrl = IsString( extension.goToUrl, true ) ? extension.goToUrl : ( action.goToUrl ? action.goToUrl : null );\n    if( goToUrl ) goToUrl = ParseModelValue( goToUrl, core, true );\n\n    let postUrl = IsString( extension.postUrl, true ) ? extension.postUrl : ( action.postUrl ? ParseLinkUrl( String( action.postUrl ).slice(), ( IsObject( core.entity, true ) ? core.entity : {} ) ) : core.params.path );\n    if( postUrl ) postUrl = ParseModelValue( postUrl, core, true );\n\n    const dialogConfig = new FieldItemGroupConfig( {\n      id: action.name,\n      params: core.params,\n      fieldItems: actionFieldItems,\n      metadata: metadata,\n      inDialog: <FieldItemGroupDialogInterface>{\n        postUrl: postUrl,\n        postUrlVersion: 1,\n        submit: TitleCase( action.submitText ),\n        title: action.header ? action.header : `${TitleCase( action.name )} ${ SnakeToPascal( core.repo.getDisplayName() ) }`,\n        goToUrl: goToUrl,\n        callback: IsCallableFunction( action.callback ) ? action.callback : null\n      }\n    } );\n\n    PopLog.init( this.name, `ActionDialog`, dialogConfig );\n\n    return dialogConfig;\n  }\n\n\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n}\n\n\n","import {Component, ElementRef, Input, OnDestroy, OnInit, ViewChild, ViewContainerRef} from '@angular/core';\nimport {EntitySchemeSectionInterface} from '../pop-entity-scheme.model';\nimport {PopExtendDynamicComponent} from \"../../../../pop-extend-dynamic.component\";\nimport {MatDialog, MatDialogRef} from \"@angular/material/dialog\";\nimport {\n  Dictionary,\n  DynamicComponentInterface,\n  EntityActionInterface, PopBaseEventInterface,\n  PopSchemeComponent,\n  SchemeComponentConfig,\n  SchemeComponentConfigInterface,\n  ServiceInjector\n} from \"../../../../pop-common.model\";\nimport {PopEntityActionService} from \"../../services/pop-entity-action.service\";\nimport {PopTabMenuService} from \"../../../base/pop-tab-menu/pop-tab-menu.service\";\nimport {PopDomService} from \"../../../../services/pop-dom.service\";\nimport {IsObject, IsString, JsonCopy, PopUid, StorageGetter} from \"../../../../pop-common-utility\";\n\n@Component({\n  selector: 'lib-entity-scheme-custom-component',\n  templateUrl: './pop-entity-scheme-custom.component.html',\n  styleUrls: ['./pop-entity-scheme-custom.component.scss']\n})\nexport class PopEntitySchemeCustomComponent extends PopExtendDynamicComponent implements OnInit, OnDestroy {\n  @ViewChild('container', {read: ViewContainerRef, static: true}) private container;\n  @Input() componentId: number;\n  @Input() config: SchemeComponentConfig;\n  @Input() section: EntitySchemeSectionInterface;\n\n  public name = 'PopEntitySchemeCustomComponent';\n\n  protected srv = {\n    dialog: <MatDialog>ServiceInjector.get(MatDialog),\n    action: <PopEntityActionService>ServiceInjector.get(PopEntityActionService),\n    tab: <PopTabMenuService>undefined,\n  };\n\n  protected asset = {\n    dialogRef: <MatDialogRef<any>>undefined\n  };\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService,\n    protected _tabRepo: PopTabMenuService\n  ) {\n    super();\n\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise(async (resolve) => {\n        this.template.attach('container');\n\n        await this._setInitialConfig();\n        await this._setInitialState();\n\n        return resolve(true);\n      });\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise(async (resolve) => {\n\n        if (IsObject(this.config, true)) {\n          await this._setInitialProceed();\n          await this._renderComponent();\n        }\n\n        return resolve(true);\n      });\n    };\n  }\n\n  /**\n   * INit\n   */\n  ngOnInit() {\n    super.ngOnInit();\n  }\n\n  /**\n   * This fx will present a pop up for the user to configure the options of this widget\n   */\n  onEditComponentOptions() {\n\n    // TODO implement like edit popup\n    this.dom.setTimeout(`edit-item`, async () => {\n      if (StorageGetter(this.config, ['option', 'component', 'type'], null)) {\n\n        const actionConfig: EntityActionInterface = {\n          name: 'widgets',\n          header: 'Edit Widget',\n          component: <DynamicComponentInterface>{\n            type: this.config.option.component.type,\n            inputs: {\n              config: JsonCopy(this.config)\n            }\n          },\n          // onEvent: (core: CoreConfig, event: PopBaseEventInterface): Promise<boolean> => {\n          //   return new Promise(async(resolve) => {\n          //     return resolve(true);\n          //   });\n          // },\n          submitText: 'SAVE',\n          facade: true,\n          postUrl: null,\n          blockEntity: true, // implies that fields should not be inherited from the original field.ts file\n          responseType: 'store', // track all the key-value pairs that are updated\n        };\n        const result = await this.srv.action.do(this.core, actionConfig);\n        console.log('result', result);\n        if (IsObject(result, true)) {\n          this.dom.setTimeout(`reset-component`, async () => {\n            await this._renderComponent();\n            this.log.info(`options-reset:complete`);\n          }, 0);\n\n        }\n      } else {\n        // ToDo:: handle this case\n      }\n    });\n  }\n\n  /**\n   * This user can click on a refresh icon to refresh the widget\n   */\n  onRefreshComponent() {\n    this.dom.state.loaded = false;\n    this.dom.state.loader = true;\n    this.template.clear();\n    this.dom.setTimeout(`refresh-component`, async () => {\n      await this._renderComponent();\n    }, 500);\n  }\n\n  /**\n   * Handle the bubble events that come up\n   * @param event\n   */\n  onBubbleEvent(name: string, extension?: Dictionary<any>, event?: PopBaseEventInterface): boolean {\n    if (!event) event = {source: this.name, type: 'field', name: name};\n    if (extension) event = {...event, ...extension};\n    this.log.event(`bubbleEvent`, event);\n    this.events.emit(event);\n    return true;\n  }\n\n  /**\n   * Clean up the dom of this component\n   */\n  ngOnDestroy() {\n    super.ngOnDestroy();\n  }\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                   Base Protected Methods                                     *\n   *                                    ( Protected Method )                                      *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  /**\n   * Set the initial config\n   * Intended to be overridden per field\n   */\n  protected _setInitialConfig(): Promise<boolean> {\n    return new Promise((resolve) => {\n      this.id = IsObject(this.config, ['id']) ? this.config.id : PopUid();\n      if (!IsString(this.internal_name)) this.internal_name = 'profile_specialist_1';\n      if (!IsObject(this.config, true)) {\n        const params = PopSchemeComponent.getParams(this.internal_name);\n        this.config = new SchemeComponentConfig(<SchemeComponentConfigInterface>{\n          name: params.name ? params.name : 'Custom Component',\n          internal_name: this.internal_name,\n          component_id: this.componentId,\n          component: PopSchemeComponent.getComponent(this.internal_name),\n          option: PopSchemeComponent.getOption(this.internal_name),\n          setting: PopSchemeComponent.getOption(this.internal_name),\n          resource: PopSchemeComponent.getResource(this.internal_name),\n          param: PopSchemeComponent.getResource(this.internal_name),\n        });\n      }\n\n      return resolve(true);\n    });\n  }\n\n  /**\n   * Set the initial config\n   * Intended to be overridden per field\n   */\n  protected _setInitialState(): Promise<boolean> {\n    return new Promise((resolve) => {\n\n      const isOptionComponent = StorageGetter(this.config, ['option', 'component']);\n      this.dom.state.hasOptions = this.config.setting.edit && isOptionComponent && isOptionComponent.type ? true : false;\n      this.dom.state.hasRefresh = this.config.setting.refresh;\n      this.dom.state.isEditable = this.config.setting.edit ? true : false;\n\n\n      // const userPreferences = StorageGetter( this.core, ['preference', this.config.id], {} );\n      // if( IsObject( userPreferences, true ) ){\n      //   this.config.option = { ...this.config.option, ...userPreferences.option };\n      // }\n\n\n      return resolve(true);\n    });\n  }\n\n  /**\n   * Set the initial config\n   * Intended to be overridden per field\n   */\n  protected _setInitialProceed(): Promise<boolean> {\n    return new Promise((resolve) => {\n\n\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * This fx will render the custom component for this widget\n   * @private\n   */\n  private _renderComponent(): Promise<boolean> {\n    return new Promise((resolve) => {\n      this.dom.setTimeout(`render-widget`, () => {\n        if (IsObject(this.config.component, ['type'])) {\n          this.template.render([this.config.component], ['core', 'position', 'config']);\n        }\n        this.dom.ready();\n      }, 0);\n      return resolve(true);\n    });\n  }\n\n\n}\n","import {\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  HostListener,\n  Input,\n  OnDestroy,\n  OnInit,\n  ViewEncapsulation\n} from '@angular/core';\nimport {ActivatedRoute, Router} from '@angular/router';\nimport {MatDialog} from '@angular/material/dialog';\nimport {Subject} from 'rxjs';\n\nimport {PopEntityEventService} from '../services/pop-entity-event.service';\nimport {PopEntityService} from '../services/pop-entity.service';\nimport {PopTabMenuService} from '../../base/pop-tab-menu/pop-tab-menu.service';\nimport {TabConfig} from '../../base/pop-tab-menu/tab-menu.model';\nimport {\n  CoreConfig, DynamicComponentInterface,\n  EntityExtendInterface,\n  FieldInterface,\n  PopBaseEventInterface,\n  PopPortal, PopSchemeComponent, SchemeComponentConfig,\n  ServiceInjector\n} from '../../../pop-common.model';\nimport {PopExtendComponent} from '../../../pop-extend.component';\nimport {PopDomService} from '../../../services/pop-dom.service';\nimport {IsValidFieldPatchEvent, ParseModelValue, SessionEntityFieldUpdate} from '../pop-entity-utility';\nimport {\n  CleanObject,\n  IsArray,\n  IsDefined,\n  IsObject,\n  IsObjectThrowError,\n  IsString, SpaceToHyphenLower, SpaceToSnake,\n  StorageGetter,\n  TitleCase\n} from '../../../pop-common-utility';\nimport {EntitySchemeSectionConfig, EntitySchemeSectionInterface} from '../pop-entity-scheme/pop-entity-scheme.model';\nimport {PopEntitySchemeCustomComponent} from '../pop-entity-scheme/pop-entity-scheme-custom-component/pop-entity-scheme-custom.component';\n\n\n@Component({\n  selector: 'lib-pop-entity-tab',\n  templateUrl: './pop-entity-tab.component.html',\n  styleUrls: ['./pop-entity-tab.component.scss'],\n\n})\nexport class PopEntityTabComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() tab: TabConfig;\n  @Input() extension: EntityExtendInterface; // allows the route to override certain settings\n\n  public name = 'PopEntityTabComponent';\n\n  protected srv = {\n    dialog: <MatDialog>ServiceInjector.get(MatDialog),\n    router: <Router>ServiceInjector.get(Router),\n    events: <PopEntityEventService>ServiceInjector.get(PopEntityEventService),\n    entity: <PopEntityService>ServiceInjector.get(PopEntityService),\n    tab: <PopTabMenuService>undefined,\n  };\n\n  protected asset = {\n    scheme: <EntitySchemeSectionInterface>undefined,\n  };\n\n\n  /**\n   * @param el\n   * @param cdr\n   * @param route\n   * @param _tabRepo - transfer\n   * @param _domRepo - transfer\n   */\n  constructor(\n    public el: ElementRef,\n    public cdr: ChangeDetectorRef,\n    public route: ActivatedRoute,\n    protected _tabRepo: PopTabMenuService,\n    protected _domRepo: PopDomService,\n  ) {\n    super();\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise(async (resolve) => {\n        // Require a CoreConfig\n        // Pull in the route extension settings\n        if (!this.extension) this.extension = {};\n        if (this.route.snapshot.data && Object.keys(this.route.snapshot.data).length) {\n          Object.keys(this.route.snapshot.data).map((key) => {\n            this.extension[key] = this.route.snapshot.data[key];\n          });\n        }\n        return resolve(true);\n      });\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise(async (resolve) => {\n        // Require a CoreConfig\n        this._setCore().then(() => {\n          if (!(IsObject(this.core.entity, ['id']))) this.srv.router.navigate(['/system/route'], {skipLocationChange: true});\n          // #1: Enforce a CoreConfig && TabConfig\n          // this.core = IsObjectThrowError(this.core, true, `${this.name}:configureDom: - this.core`) ? this.core : null;\n          this._setTab().then(() => {\n            // set the outer height boundary of this component\n            this.dom.overhead = this.tab.wrap ? 40 : 10;\n            this.dom.overhead = this.tab.overhead ? this.dom.overhead + this.tab.overhead : this.dom.overhead;\n            this.dom.height.default = window.innerHeight - 70;\n            this.dom.setHeight(this.dom.height.default, 150);\n\n            // #3: Set tab group container\n            this.tab.groups = {};\n            // #4: Transfer in the ui rescources\n            // if( IsObject(this.core.entity, true) && IsObject(this.core.entity.ui, true) ){\n            //   Object.keys(this.core.entity.ui).map((key: string) => {\n            //     this.ui.resource[ key ] = this.core.entity.ui[ key ]; // ? maybe this should make a copy\n            //   });\n            // }\n            // #5: Build a view with a scheme or a model\n            this.asset.scheme = IsObject(this.core.entity, true) && this.core.entity.scheme_id && IsObject(this.core.resource.scheme, ['data']) ? <EntitySchemeSectionInterface>CleanObject(this.core.resource.scheme.data) : null;\n            // console.log( 'this.asset.scheme', this.asset.scheme );\n            // #6: Bind Event handlers\n            this.dom.handler.core = (core: CoreConfig, event: PopBaseEventInterface) => this._coreEventHandler(event);\n            // #7: Build the view\n            this.tab.view = this._buildTabView();\n            // #8: Register the outlet so the tabRepo can reset the view if needed\n            if (true || this.tab.syncPositions) this.srv.tab.registerOutletReset((position: number = null) => this.onResetView(position));\n            this._callOnLoadEvent();\n\n            this.dom.setTimeout(`determine-layout`, () => {\n              this._determineLayout();\n            }, 0);\n\n            return resolve(true);\n          });\n        });\n      });\n    };\n\n    this.dom.unload = (): Promise<boolean> => {\n      return new Promise(async (resolve) => {\n        this.srv.tab.showAsLoading(false);\n        return resolve(true);\n      });\n    };\n  }\n\n\n  /**\n   * Setup this component\n   */\n  ngOnInit() {\n    super.ngOnInit();\n  }\n\n\n  /**\n   * Bubble event handler\n   * @param event\n   */\n  onBubbleEvent(event: PopBaseEventInterface) {\n    this.log.event(`onBubbleEvent`, event);\n    if (event.type === 'field_group' && event.name === 'init') {\n      this.tab.groups[event.id] = event.group;\n      this._callOnEvent(event, {reset: true});\n    } else if (event.type === 'sidebyside' && event.name === 'portal') {\n      const entityParams = this.srv.entity.getEntityParamsWithPath(String(event.data).split('/')[0], +String(event.data).split('/')[1]);\n      if (entityParams) {\n        this.onViewEntityPortal(entityParams.internal_name, entityParams.entityId);\n      }\n    } else if (IsValidFieldPatchEvent(this.core, event)) {\n      this.log.event(`IsValidFieldPatchEvent`, event);\n      if (event.config.name === 'name' || event.config.name === 'label') {\n        this.srv.tab.updateName(event.config.control.value);\n      }\n      const reset = this._needsPositionReset(event);\n      if (!reset) {\n        if (typeof this.tab.onEvent === 'function') {\n          this._callOnEvent(event);\n        }\n      } else {\n        if (typeof this.tab.onEvent === 'function') {\n          this._callOnEvent(event);\n        }\n        this.srv.events.sendEvent(event);\n      }\n    } else if (event.type === 'context_menu') {\n      if (event.name === 'portal' && event.internal_name && event.id) {\n        setTimeout(() => {\n          this.onViewEntityPortal(event.internal_name, +event.id);\n        }, 0);\n\n      }\n    } else if (event.type === 'dom') {\n      if (event.name === 'refresh') {\n        setTimeout(() => {\n          this.onResetView(+event.position);\n        }, 0);\n      }\n    }\n  }\n\n\n  /**\n   * Triggers when the window is resized\n   */\n  onWindowResize() {\n    this.dom.setTimeout('window-resize', () => {\n      this._determineLayout();\n      this.srv.tab.resetTab();\n\n    }, 500);\n  }\n\n\n  /**\n   * Triggers when a user clicks on an entityId link to see the details of that entityId in a modal\n   * @param internal_name\n   * @param id\n   */\n  onViewEntityPortal(internalName: string, entityId: number) {\n    // ToDo:: Due to circular injection errors, the portals are not working\n    this.tab.view.map((column) => {\n      column.reset.next('scrollTop');\n    });\n\n    // this.srv.router.navigateByUrl(`entities/fields/${entityId}`).catch(e => true);\n    PopPortal.view(internalName, entityId).then((changed: boolean) => {\n      if (changed) {\n        this.dom.refreshing();\n        this.srv.tab.refreshEntity(this.core.params.entityId, this.dom.repo, {}, 'PopEntityTabComponent:viewEntityPortal').then((res) => {\n          this.dom.ready();\n        });\n      }\n    });\n  }\n\n\n  /**\n   * Trigger to reset the view\n   * @param position\n   */\n  onResetView(position: number = null): void {\n    if (this.dom.state.loaded) {\n      if (position === null) {\n        this.tab.view.map((section) => {\n          section.reset.next(true);\n        });\n      } else {\n        this.tab.view[position].reset.next(true);\n      }\n      setTimeout(() => {\n        this.dom.ready();\n      }, 0);\n    }\n  }\n\n\n  /**\n   * Clean up the dom of this component\n   */\n  ngOnDestroy() {\n    this._callUnloadEvent();\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Protected Method )                                      *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  /**\n   * Tie in hook that is called when ever a event if fired\n   *\n   */\n  private _callOnEvent(event: PopBaseEventInterface, options: { reset?: boolean, entityConfig?: boolean } = {}) {\n    if (this.tab && typeof this.tab.onEvent === 'function') {\n      event.tab = this.tab;\n      // event.component = component;\n      // event.core = this.core;\n      if (options.reset) event.cdr = this.cdr;\n      this.tab.onEvent.bind(this)(this.core, event);\n    }\n  }\n\n\n  /**\n   * Tie in hook that is called when the tab is initialized\n   *\n   */\n  private _callOnLoadEvent() {\n    if (this.tab && typeof this.tab.onLoad === 'function') {\n      this.tab.onLoad.bind(this)(this.core, this.tab);\n    }\n  }\n\n\n  /**\n   * Tie in hook that is called when the tab is destroyed\n   *\n   */\n  private _callUnloadEvent() {\n    if (this.tab && typeof this.tab.onUnload === 'function') {\n      this.tab.onUnload.bind(this)(this.core, this.tab);\n    }\n  }\n\n\n  /**\n   * Helper funtion to determine the correct header to display\n   * @param header\n   */\n  private _getHeaderText(header: string) {\n    if (IsString(header, true)) {\n      return TitleCase(ParseModelValue(header, this.core).replace(/_/g, ' ')).trim();\n    }\n    return null;\n  }\n\n\n  /**\n   * Core Event Handler\n   * @param event\n   */\n  private _coreEventHandler(event: PopBaseEventInterface) {\n    this.log.event(`_coreEventHandler`, event);\n    if (this.tab.wrap && event.type === 'component') {\n      if (event.name === 'start-refresh') {\n        this.dom.state.refresh = 1;\n      } else if (event.name === 'stop-refresh') {\n        this.dom.state.refresh = 0;\n      } else if (event.name === 'reset-view') {\n        this.onResetView();\n      }\n    }\n  }\n\n\n  /**\n   * Detects if a mobile layout should be used based on the width of the screen\n   */\n  private _determineLayout() {\n\n    const client = this.el.nativeElement.getBoundingClientRect();\n    this.dom.width.inner = client.width;\n    this.dom.state.mobile = this.dom.width.inner <= 1340 ? true : false;\n    if (this.dom.state.mobile) {\n      this.tab.view.map((column) => {\n        column.maxHeight = null;\n        column.minHeight = null;\n      });\n    } else {\n      this.tab.view.map((column) => {\n        column.minHeight = column.header ? this.dom.height.inner - 50 : this.dom.height.inner;\n        column.maxHeight = column.header ? this.dom.height.inner - 50 : this.dom.height.inner;\n      });\n    }\n    // if( this.log.repo.enabled('dom', this.name) || this.extension.debug ) console.log(this.log.repo.message(`${this.name}:${this.tab.entityId}:_determineLayout:width:${this.dom.width.inner}: mobile: ${this.dom.state.mobile}`), this.log.repo.color('dom'));\n  }\n\n\n  /**\n   * Determines if an event should cause a view reset\n   * @param event\n   */\n  private _needsPositionReset(event: PopBaseEventInterface): boolean {\n    let position;\n    if (this.tab.syncPositions) {\n      // console.log('pass 1');\n      if (event.config && event.config.metadata && event.config.metadata.position) {\n        // console.log('pass 2');\n        position = event.config.metadata.position;\n        if (event.name === 'patch' && ['field', 'sidebyside', 'permissions'].includes(event.type)) {\n          // console.log('pass 3');\n          if (!this.tab.syncPositionFields || this.tab.syncPositionFields.includes(event.config.column)) {\n            // console.log('pass 4');\n            if (!IsObject(this.tab.syncPositionMap, true) || (position in this.tab.syncPositionMap && IsArray(this.tab.syncPositionMap[position]))) {\n              // console.log('pass 5');\n              if (IsObject(this.tab.syncPositionMap, true)) {\n                // console.log('pass 6');\n                if (IsArray(this.tab.syncPositionMap[position])) {\n                  // console.log('pass 7');\n                  this.tab.syncPositionMap[position].map((pos) => {\n                    this.onResetView(+pos);\n                  });\n                }\n                return true;\n              } else {\n                this.onResetView();\n              }\n              return true;\n            }\n          }\n        }\n      }\n    }\n\n    return false;\n  }\n\n\n  /**\n   * Allows for a pre built core to be passed in else it will build the core itself\n   */\n  _setCore(): Promise<boolean> {\n    return new Promise((resolve) => {\n      if (!(IsObject(this.core, true))) {\n\n        const tabCore = this.srv.tab.getCore();\n        if (IsObject(tabCore, ['entity'])) {\n          this.core = tabCore;\n          this.log.info(`_setCore: initial`);\n          return resolve(true);\n        }\n\n        if (this.route.snapshot.data.core) {\n          this.core = IsObjectThrowError(this.route.snapshot.data.core, true, `${this.name}:: - this.route.snapshot.data.core`) ? <CoreConfig>this.route.snapshot.data.core : <CoreConfig>{};\n          this.log.info(`_setCore: route`);\n          return resolve(true);\n        }\n\n        const coreParams = this.srv.tab && this.srv.tab.ui && this.srv.tab.ui.entityParams ? this.srv.tab.ui.entityParams : {};\n        if (IsObject(coreParams, true)) {\n          this.srv.entity.getCoreConfig(coreParams.internal_name, +coreParams.entity).then((core: CoreConfig) => {\n            this.core = IsObjectThrowError(core, true, `${this.name}:: - core`) ? core : <CoreConfig>{};\n            this.log.info(`_setCore: tab params`);\n            return resolve(true);\n          });\n        } else {\n          this.srv.entity.getCoreConfig(this.srv.entity.getRouteInternalName(this.route, this.extension), this.route.snapshot.params.entity).then((core: CoreConfig) => {\n            this.core = IsObjectThrowError(core, true, `${this.name}:: - core`) ? core : null;\n            this.log.info(`_setCore: route internal _name`);\n            return resolve(true);\n          });\n        }\n      } else {\n        return resolve(true);\n      }\n    });\n  }\n\n\n  /**\n   * Allows for a pre built tab to be passed in else it will find try to find one\n   */\n  _setTab(): Promise<boolean> {\n    return new Promise((resolve) => {\n      if (!(IsObject(this.tab, true))) {\n        const tab = this.srv.tab.getTab();\n        this.tab = IsObjectThrowError(tab, true, `${this.name}:_setTab: - tab`) ? tab : {};\n        return resolve(true);\n      } else {\n        return resolve(true);\n      }\n    });\n  }\n\n\n  /**\n   * Determine the structure of the tab view\n   *\n   */\n  _buildTabView(): any[] {\n    const view = [];\n//     console.log('this.tab.scheme', this.tab.scheme);\n    if (this.tab.scheme && IsObject(this.asset.scheme, ['children'])) {\n//       console.log('should use the scheme provided', this.asset.scheme);\n      const sections = this.asset.scheme.children;\n      const sectionKeys = Object.keys(sections);\n      const lastSectionKey = sectionKeys[sectionKeys.length - 1];\n      let section;\n      sectionKeys.map((sectionKey) => {\n        section = sections[sectionKey];\n        section.position = +sectionKey + 1;\n        if (typeof section.flex === 'undefined') {\n          section.flex = +lastSectionKey === +sectionKey ? 2 : 1;\n        }\n        let height = +this.dom.height.outer;\n        height = section.header ? (height - 50) : height;\n\n        this.dom.repo.position[sectionKey] = {\n          height: height,\n        };\n\n        view.push({\n          id: sectionKey,\n          position: section.position,\n          reset: new Subject(),\n          components: this._getSchemeSectionAssetComponents(this.core, this.asset.scheme, section),\n          header: this._getHeaderText(section.name),\n          flex: section.flex,\n          minWidth: +sectionKey < 3 ? 350 : null,\n          maxWidth: +sectionKey < 2 ? 450 : null,\n          maxHeight: height,\n          active: true,\n        });\n      });\n    } else {\n      const positions = IsObjectThrowError(this.tab.positions, true, `${this.name}:configureDom: - this.tab.positions`) ? this.tab.positions : {};\n      Object.keys(positions).map((position) => {\n        let height = +this.dom.height.outer;\n        height = this.tab.positions[position].header ? (height - 50) : height;\n\n        this.dom.repo.position[position] = {\n          height: height,\n        };\n\n        view.push({\n          id: position,\n          position: position,\n          reset: new Subject(),\n          components: this.tab.positions[position].components,\n          extension: this.extension,\n          header: this._getHeaderText(this.tab.positions[position].header),\n          flex: this.tab.positions[position].flex,\n          maxWidth: this.tab.positions[position].max,\n          minWidth: this.tab.positions[position].min,\n          maxHeight: height,\n          active: true,\n        });\n      });\n    }\n\n    return view;\n  }\n\n\n  /**\n   * Gather all the assets that should be rendered in a specific section\n   * @param core\n   * @param assets\n   */\n  private _getSchemeSectionAssetComponents(core: CoreConfig, scheme: EntitySchemeSectionInterface, section: EntitySchemeSectionInterface) {\n\n    const componentList = [];\n    const Field = this.dom.repo.ui.fields;\n    // console.log('Field', Field);\n    const tableFields = this._getSectionTableFieldsAssets(section);\n    section.children = [...tableFields, ...(IsArray(section.children) ? section.children : [])];\n    if(IsObject(section.mapping, ['sort_order'])){\n      section.children = section.children.sort(function (a, b) {\n        const a1 = section.mapping.sort_order.indexOf(a.id);\n        const a2 = section.mapping.sort_order.indexOf(b.id);\n        if (a1 < a2) return -1;\n        if (a1 > a2) return 1;\n        return 0;\n      });\n    }\n\n\n\n    section.children.map((child) => {\n      if (String(String(child.asset_type).toLowerCase()).includes('field')) {\n        child.asset_type = 'field';\n      } else if (String(String(child.asset_type).toLowerCase()).includes('component')) {\n        child.asset_type = 'component';\n      } else if (String(String(child.asset_type).toLowerCase()).includes('widget')) {\n        child.asset_type = 'widget';\n      }\n      if (child.asset_type && IsDefined(child.asset_id)) {\n        switch (child.asset_type) {\n          case 'table': {\n            // console.log( 'table', child );\n            // const fieldItem = child.name ? Field.get( child.name ) : null;\n            // if( fieldItem ){\n            //   componentList.push( fieldItem );\n            // }\n            break;\n          }\n          case 'field': {\n            const field = Field.get(+child.asset_id);\n\n            if (field) {\n              componentList.push(scheme, field);\n            }\n            break;\n          }\n          case 'component': {\n            // ToDo:: Figure how custom components are going to be managed\n\n            const internalName = StorageGetter(child, ['asset', 'internal_name'], String(SpaceToSnake(child.name)).toLowerCase() + '_1');\n            const component = <DynamicComponentInterface>{\n              type: PopEntitySchemeCustomComponent,\n              inputs: {\n                core: core,\n                config: <SchemeComponentConfig>undefined,\n                componentId: child.asset_id,\n                internal_name: internalName\n              }\n            };\n            componentList.push(component);\n            break;\n          }\n          default:\n            // if( this.srv.log.enabled('error', this.name) ) console.log(this.srv.log.message(`${this.name}:getSchemeSectionAssetComponents`), this.srv.log.color('error'), asset);\n            break;\n        }\n      }\n\n    });\n\n    return componentList;\n  }\n\n\n  /**\n   * Retrieve the default columns tht exist on an entity table\n   * @param section\n   */\n  private _getSectionTableFieldsAssets(section: EntitySchemeSectionInterface) {\n    const tableAssets = [];\n    if (this.core) {\n      const Field = StorageGetter(this.core, 'repo.model.field'.split('.'));\n      if (IsObject(Field, true)) {\n        Object.values(Field).map((field: FieldInterface) => {\n          if (!field.ancillary && field.position === section.position) {\n            tableAssets.push(new EntitySchemeSectionConfig({\n              id: 0,\n              name: field.model.name,\n              label: field.model.label,\n              asset_type: 'table',\n              asset_id: 0,\n              asset: field,\n              scheme_id: +section.id,\n              sort_order: field.sort,\n              position: section.position,\n            }));\n          }\n        });\n      }\n    }\n\n    section.startIndex = tableAssets.length;\n    return tableAssets.sort((a, b) => {\n      if (a.sort < b.sort) return -1;\n      if (a.sort > b.sort) return 1;\n      return 0;\n    });\n  }\n}\n","import {\n  Component, ElementRef,\n  Input,\n  OnDestroy,\n  OnInit,\n  ViewChild,\n} from '@angular/core';\nimport { CdkPortalOutlet, ComponentPortal } from '@angular/cdk/portal';\nimport { PopBaseEventInterface, PopEntity, ServiceInjector } from '../../../../pop-common.model';\nimport { TabButtonInterface, TabConfig, TabMenuConfig } from '../../../base/pop-tab-menu/tab-menu.model';\nimport { PopEntityTabComponent } from '../../pop-entity-tab/pop-entity-tab.component';\nimport { PopTabMenuService } from '../../../base/pop-tab-menu/pop-tab-menu.service';\nimport { PopDomService } from '../../../../services/pop-dom.service';\nimport { PopExtendComponent } from '../../../../pop-extend.component';\nimport { IsArray, IsObjectThrowError } from '../../../../pop-common-utility';\nimport { PopEntityEventService } from '../../services/pop-entity-event.service';\nimport { IsValidCoreSignature, IsValidFieldPatchEvent } from '../../pop-entity-utility';\n\n\n@Component( {\n  selector: 'lib-pop-entity-portal-menu',\n  templateUrl: './pop-entity-portal-menu.component.html',\n  styleUrls: [ './pop-entity-portal-menu.component.scss' ],\n  providers: [ PopTabMenuService, PopDomService ],\n} )\nexport class PopEntityPortalMenuComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() config: TabMenuConfig;\n  @ViewChild( 'outlet', { static: true } ) outlet: ElementRef;\n  @ViewChild( CdkPortalOutlet, { static: true } ) portal: CdkPortalOutlet;\n\n  public name = 'PopTabMenuComponent';\n\n\n  protected srv: {\n    crud: PopEntityEventService,\n    tab: PopTabMenuService,\n  } = {\n    crud: ServiceInjector.get( PopEntityEventService ),\n    tab: <PopTabMenuService>undefined\n  };\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService,\n    protected _tabRepo: PopTabMenuService\n  ){\n    super();\n\n    this.id = 2;\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n        // set the outer height boundary\n        await this.dom.setHeightWithParent( 'cdk-overlay-pane', 100, window.innerHeight - 180 );\n        // #1: Enforce a CoreConfig\n        this.core = IsObjectThrowError( this.core, true, `${this.name}:configureDom: - this.core` ) ? this.core : null;\n        // #2: Enforce a TabMenuConfig\n        this.config = IsObjectThrowError( this.config, true, `${this.name}:configureDom: - this.core` ) ? this.config : <TabMenuConfig>{};\n        await PopEntity.setCoreDomAssets( this.core, this.dom.repo );\n        // #3: Register the outlet with the tabRepo, gives the tabRepo the ability to reset the view if needed\n        this.srv.tab.registerOutlet( <ElementRef>this.outlet );\n        // #4: Preset a default tab so the view will have something to render\n        if( IsArray( this.config.tabs, true ) ) this.onSetPortal( this.config.tabs[ 0 ] );\n\n        this.dom.setSubscriber( 'events', this.srv.crud.events.subscribe( ( event: PopBaseEventInterface ) => {\n          if( IsValidCoreSignature( this.core, event ) ){\n            if(IsValidFieldPatchEvent(this.core, event)){\n              if( event.config.name === 'name' || event.config.name === 'label' ){\n                this.config.name = ( event.config.control.value );\n              }\n            }\n          }\n        } ) );\n\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * Setup this component\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * Trigger a portal tab click event\n   * @returns void\n   */\n  onMenuClick( tab: TabConfig ): void{\n    this.onSetPortal( tab );\n    this.onBubbleEvent( {\n      source: this.name,\n      type: 'menu',\n      id: tab.id,\n      name: tab.name,\n    } );\n  }\n\n\n  /**\n   * Whenever a user click on tab av button, the portal needs reset to that tab\n   * Has specific render so does not use the built-in render intentionally\n   * @param tab\n   */\n  onSetPortal( tab: TabConfig ){\n    if( this.log.repo.enabled( 'config', this.name ) ) console.log( this.log.repo.message( `${this.name}:setPortal:tab` ), this.log.repo.color( 'config' ), tab );\n    if( tab && tab.id ){\n      if( this.portal && this.portal.attachedRef ) this.portal.detach();\n      this.dom.state.tab = tab;\n      Object.keys( this.dom.subscriber ).map( ( name ) => {\n        if( this.dom.subscriber[ name ] ){\n          this.dom.subscriber[ name ].unsubscribe();\n        }\n      } );\n      const componentRef = this.portal.attach( new ComponentPortal( PopEntityTabComponent ) );\n      componentRef.instance[ 'core' ] = this.core;\n      componentRef.instance.tab = tab;\n      componentRef.changeDetectorRef.detectChanges();\n\n      if( componentRef.instance[ 'events' ] ){\n        this.dom.setSubscriber( 'portal', componentRef.instance[ 'events' ].subscribe( ( event: PopBaseEventInterface ) => {\n          this.onBubbleEvent( event );\n        } ) );\n      }\n    }\n  }\n\n\n  /**\n   * Trigger a button click event\n   * @returns void\n   */\n  onButtonClick( button: TabButtonInterface ): void{\n    this.onBubbleEvent( {\n      source: this.name,\n      type: 'button',\n      id: button.id,\n      name: button.name,\n    } );\n  }\n\n\n  /**\n   * This will bubble a event up to a parent component\n   * @param event\n   */\n  onBubbleEvent( event: PopBaseEventInterface ){\n    this.events.emit( event );\n  }\n\n\n  /**\n   * Clean up the dom of this component\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n    this.portal.detach();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  private _onCrudEvent(event: PopBaseEventInterface){\n\n  }\n}\n","import { ChangeDetectorRef, Component, ElementRef, HostListener, Inject, Input, OnDestroy, OnInit, Optional, ViewChild, ViewContainerRef } from '@angular/core';\nimport { TabMenuConfig, TabMenuPortalInterface } from '../../base/pop-tab-menu/tab-menu.model';\nimport { PopTabMenuService } from '../../base/pop-tab-menu/pop-tab-menu.service';\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\nimport { ActivatedRoute, Route } from '@angular/router';\nimport { AppGlobalInterface, CoreConfig, EntityExtendInterface, PopBaseEventInterface, PopEntity, PopTemplate, ServiceInjector } from '../../../pop-common.model';\nimport { PopEntityEventService } from '../services/pop-entity-event.service';\nimport { PopDomService } from '../../../services/pop-dom.service';\nimport { PopExtendDynamicComponent } from '../../../pop-extend-dynamic.component';\nimport { PopTabMenuComponent } from '../../base/pop-tab-menu/pop-tab-menu.component';\nimport { PopEntityPortalMenuComponent } from './pop-entity-portal-menu/pop-entity-portal-menu.component';\nimport { PopEntityActionService } from '../services/pop-entity-action.service';\nimport { GetRouteAlias, IsObject, IsObjectThrowError, IsString, TitleCase } from '../../../pop-common-utility';\nimport { PopCacFilterBarService } from '../../app/pop-cac-filter/pop-cac-filter.service';\nimport { GetSingularName, GetTabMenuConfig, IsAliasable, IsEntity, IsValidFieldPatchEvent } from '../pop-entity-utility';\n\n\n@Component( {\n  selector: 'lib-pop-entity-tab-menu',\n  templateUrl: './pop-entity-tab-menu.component.html',\n  styleUrls: [ './pop-entity-tab-menu.component.scss' ],\n  providers: [ PopTabMenuService, PopDomService ],\n} )\nexport class PopEntityTabMenuComponent extends PopExtendDynamicComponent implements OnInit, OnDestroy {\n  @Input() config: TabMenuConfig;\n  @Input() extension: EntityExtendInterface;\n  @Input() portal: TabMenuPortalInterface;\n  @ViewChild( 'container', { read: ViewContainerRef, static: true } ) private container;\n\n\n  public name = 'PopEntityTabMenuComponent';\n\n  protected srv = {\n    action: <PopEntityActionService>ServiceInjector.get( PopEntityActionService ),\n    dialog: <MatDialog>ServiceInjector.get( MatDialog ),\n    events: <PopEntityEventService>ServiceInjector.get( PopEntityEventService ),\n    tab: <PopTabMenuService>undefined\n  };\n\n\n  constructor(\n    public el: ElementRef,\n    public cdr: ChangeDetectorRef,\n    public route: ActivatedRoute,\n    protected _domRepo: PopDomService,\n    protected _tabRepo: PopTabMenuService,\n    @Inject( 'APP_GLOBAL' ) public APP_GLOBAL: AppGlobalInterface,\n    @Optional() public dialogRef: MatDialogRef<PopEntityTabMenuComponent>\n  ){\n    super();\n\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n        await this.APP_GLOBAL.isVerified();\n        if( !IsObject( this.extension, true ) ) this.extension = {};\n        if( !this.extension.goToUrl ) this.extension.goToUrl = null;\n        if( this.route.snapshot.data && Object.keys( this.route.snapshot.data ).length ){\n          Object.keys( this.route.snapshot.data ).map( ( key ) => {\n            this.extension[ key ] = this.route.snapshot.data[ key ];\n          } );\n        }\n        return resolve( true );\n      } );\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n        // Require a CoreConfig\n        await this._setCore();\n        this.core = IsObjectThrowError( this.core, true, `${this.name}:configureDom: - this.core` ) ? this.core : null;\n        if( this.core.flag.routeCheck ){ // check this child routes for any aliasing\n          this.route.routeConfig.children.map( ( childRoute: Route ) => {\n            const internal_name = GetSingularName( childRoute.path );\n            if( IsAliasable( childRoute.path ) && IsEntity( TitleCase( internal_name ) ) ){\n              childRoute.path = GetRouteAlias( internal_name );\n            }\n          } );\n          this.core.flag.routeCheck = false;\n        }\n\n        this.log.info( 'tab-menu config', this.config );\n        this.dom.height.default = window.innerHeight - 100;\n        this.dom.setHeight( this.dom.height.default, 100 );\n        // this component set the outer height boundary\n        this.log.info( `Determined height:${this.dom.height.inner}` );\n        // Bind events to handlers\n        this.dom.handler.bubble = ( core: CoreConfig, event: PopBaseEventInterface ) => this.onBubbleEvent( event );\n        // Require a TabMenuConfig, and pull in extension params from the route\n        await this._setTabMenuConfig();\n        if( this.config.portal ) this.dom.height.inner = this.dom.height.inner - 50;\n        //  Attach Template Container\n        this.template.attach( 'container' );\n        //  Render the dynamic list of components\n        this._templateRender();\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * Helper function that renders the list of dynamic components\n   *\n   */\n  private _templateRender(){\n    if( this.config.portal ){\n      this.asset.component = this.template.render( [ {\n        type: PopEntityPortalMenuComponent,\n        inputs: {\n          config: this.config\n        }\n      } ] );\n      // componentRef.instance.events.subscribe((event: PopBaseEventInterface) => {\n      //   if( typeof this.dom.handler.bubble === 'function' ){\n      //     this.dom.handler.bubble(event);\n      //   }else{\n      //     if( this.trait.bubble ) this.events.emit(event);\n      //   }\n      // })\n    }else{\n      this.template.render( [ {\n        type: PopTabMenuComponent,\n        inputs: {\n          config: this.config\n        }\n      } ] );\n    }\n  }\n\n\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * Tie in for a parent component to pass in a TabMenuConfig\n   * @param config\n   */\n  registerTabMenuConfig( config: TabMenuConfig ){ // use for programmatic/dynamic implementations\n    this.config = IsObjectThrowError( config, true, `${this.name}:registerTabMenuConfig: - config` ) ? config : <TabMenuConfig>{};\n    this.dom.setSubscriber( 'config-change', this.srv.tab.change.subscribe( ( event ) => {\n    } ) );\n    try{\n      this.cdr.detectChanges();\n    }catch( e ){\n    }\n    this._registerTabMenuConfig();\n  }\n\n\n  /**\n   * A TabMenu  will generate a slew of action and event triggers\n   * @param event\n   */\n  onBubbleEvent( event: PopBaseEventInterface ): void{\n    this.log.event( `onBubbleEvent`, event );\n    if( IsValidFieldPatchEvent( this.core, event ) ){\n      if( event.config.name === 'name' || event.config.name === 'label' ){\n        this.config.name = event.config.control.value;\n      }\n    }else{\n      switch( event.type ){\n        case 'button':\n          switch( event.id ){\n            case 'reset':\n              this.srv.tab.refreshEntity( null, this.dom.repo, {}, 'PopEntityTabMenuComponent:handleMenuEvent:reset' ).then( () => true );\n              break;\n            // case 'archive':\n            //   this.onArchiveButtonClicked(true);\n            //   break;\n            // case 'activate':\n            //   this.onArchiveButtonClicked(false);\n            //   break;\n            case 'clone':\n              this.onCloneButtonClicked();\n              break;\n            case 'close':\n              if( this.dialogRef ) this.dialogRef.close();\n              break;\n            default:\n              this.events.emit( event );\n              break;\n          }\n          break;\n        case 'portal':\n          break;\n        case 'default':\n          break;\n      }\n    }\n  }\n\n\n  /**\n   * A user can click on an archive/active button to change the status of this active entity\n   * @param archive\n   */\n  onArchiveButtonClicked( archive: boolean ){\n    if( this.dom.subscriber.entity ) this.dom.subscriber.entity.unsubscribe();\n    this.dom.subscriber.entityId = this.core.repo.archiveEntity( this.core.params.entityId, archive ).subscribe( () => {\n      PopEntity.bustAllCache();\n      this.srv.events.sendEvent( {\n        source: this.name,\n        method: 'archive',\n        type: 'entity',\n        name: this.core.params.name,\n        internal_name: this.core.params.internal_name,\n        id: this.core.params.entityId,\n        data: archive\n      } );\n      if( archive && !this.config.portal ){\n        if( false ){ // Disabled navigation back to the entity list for now\n          this.core.repo.navigateToEntities().catch( e => {\n            this.srv.tab.refreshEntity( null, this.dom.repo, {}, 'PopEntityTabMenuComponent:setArchived' ).then( () => PopTemplate.clear() );\n          } );\n        }else{\n          this.srv.tab.refreshEntity( null, this.dom.repo, {}, 'PopEntityTabMenuComponent:setArchived' ).then( () => PopTemplate.clear() );\n        }\n      }else{\n        this.srv.tab.refreshEntity( null, this.dom.repo, {}, 'PopEntityTabMenuComponent:setArchived' ).then( () => PopTemplate.clear() );\n      }\n    }, err => {\n      this.dom.error.code = err.error.code;\n      this.dom.error.message = err.error.message;\n    } );\n  }\n\n\n  /**\n   * A user can click a clone button to trigger this active entity to be cloned\n   */\n  onCloneButtonClicked(){\n    // this.dom.setTimeout( `clone-action`, async() => {\n    //   const actionConfig = await this.srv.action.doAction( <CoreConfig>this.core, 'clone', this.extension );\n    //   this.ui[ 'actionModal' ] = IsObject( actionConfig, true ) ? actionConfig : null;\n    // }, 0 );\n    this.dom.setTimeout(`do-action`, async()=>{\n      await this.srv.action.do(this.core, 'clone', this.extension);\n    }, 0);\n\n  }\n\n\n  /**\n   * When the modal to clone the active entity is closed the asset needs to be cleared\n   */\n  onActionModalClose(){\n    this.ui[ 'actionModal' ] = null;\n  }\n\n\n  /**\n   * Cleanup the do of this component\n   */\n  ngOnDestroy(){\n    if( this.core && this.core.params && this.core.params.entityId ) this.core.repo.clearCache( 'entity', String( this.core.params.entityId ), 'PopEntityTabMenuComponent:ngOnDestroy' );\n    // this.srv.tab.reset();\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  /**\n   * This allows a CoreConfig to be passed in else it will generate one\n   *\n   */\n  private _setCore(): Promise<boolean>{\n    return new Promise( async( resolve ) => {\n      if( !( IsObject( this.core, true ) ) ){\n        if( IsObject( this.portal, [ 'internal_name', 'entity_id' ] ) ){\n          this.core = await PopEntity.getCoreConfig( this.portal.internal_name, this.portal.entity_id );\n          return resolve( true );\n        }else if( IsObject( this.route.snapshot.data.core, true ) ){\n          this.core = this.route.snapshot.data.core;\n          await PopEntity.setCoreDomAssets( this.core, this.dom.repo );\n          return resolve( true );\n        }else{\n          this.core = await PopEntity.getCoreConfig( PopEntity.getRouteInternalName( this.route, this.extension ), this.route.snapshot.params.id, this.dom.repo );\n          return resolve( true );\n        }\n      }else{\n        return resolve( true );\n      }\n    } );\n  }\n\n\n  /**\n   * This allows a TabMenuConfig to be passed in else it will generate one\n   *\n   */\n  private _setTabMenuConfig(): Promise<boolean>{\n    return new Promise( async( resolve ) => {\n      if( !IsObject( this.config, true ) ){\n        this.config = GetTabMenuConfig( this.core, PopEntity.getEntityTabs( this.core ) );\n        this.config = IsObjectThrowError( this.config, true, `${this.name}:configureDom: - this.config` ) ? this.config : <TabMenuConfig>{};\n        this._registerTabMenuConfig();\n        return resolve( true );\n      }else{\n        this._registerTabMenuConfig();\n        return resolve( true );\n      }\n    } );\n  }\n\n\n  /**\n   * This will transfer the TabMenuConfig up to the tabRepo so other components can communicate with it\n   *\n   */\n  private _registerTabMenuConfig(){\n    if( this.core && this.config ){\n      // turn off the filter bar (unless a portal dialog) since it is wasted space\n      if( IsObject( this.portal, [ 'internal_name' ] ) ){\n        this.config.portal = true;\n      }\n      if( !this.config.portal ) ServiceInjector.get( PopCacFilterBarService ).setActive( false );\n\n      if( typeof this.extension === 'object' && Object.keys( this.extension ).length ){\n        Object.keys( this.extension ).map( ( key ) => {\n          if( key in this.config ){\n            this.config[ key ] = this.extension[ key ];\n          }\n        } );\n      }\n      // Register the config on the Tab Menu Service since it is the master control\n      // We store the config of the Tab Menu since other components(Tabs,...) interact with it\n      this.config = this.srv.tab.registerConfig( this.core, <TabMenuConfig>this.config, this.dom.repo );\n      this.srv.tab.registerRoute( this.route );\n      try{\n        this.cdr.detectChanges();\n      }catch( e ){\n      }\n    }\n  }\n\n}\n\n","import { Injectable } from '@angular/core';\nimport { PopEntityTabMenuComponent } from '../pop-entity-tab-menu/pop-entity-tab-menu.component';\nimport { MatDialog } from '@angular/material/dialog';\n\n\n@Injectable( { providedIn: 'root' } )\nexport class PopEntityUtilPortalService {\n\n\n  state = {\n    blockModal: false,\n  };\n\n\n  constructor(\n    private dialogRepo: MatDialog,\n  ){\n  }\n\n\n  view( internal_name: string, id: number ): Promise<boolean>{\n    return new Promise( async( resolve ) => {\n      if( !this.state.blockModal ){\n        this.state.blockModal = true;\n        if( internal_name && id ){\n          let dialogRef = this.dialogRepo.open( PopEntityTabMenuComponent, {\n            width: `${window.innerWidth - 20}px`,\n            height: `${window.innerHeight - 50}px`,\n            panelClass: 'sw-portal'\n          } );\n          let component = <PopEntityTabMenuComponent>dialogRef.componentInstance;\n          component.portal = { internal_name: internal_name, entity_id: id };\n          component.cdr.detectChanges();\n          dialogRef.afterClosed().subscribe( ( changed ) => {\n            this.state.blockModal = false;\n            component.core.repo.clearAllCache();\n            dialogRef = null;\n            component = null;\n            resolve( true );\n          } );\n        }else{\n          resolve( false );\n        }\n      }else{\n        console.log( 'blockModal' );\n        resolve( false );\n      }\n    } );\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n}\n","import { Component, ComponentRef, ElementRef, Input, OnDestroy, OnInit, ViewChild, ViewContainerRef } from '@angular/core';\nimport { PopExtendDynamicComponent } from '../../../pop-extend-dynamic.component';\nimport {\n  CoreConfig,\n  DynamicComponentInterface,\n  FieldGroupInterface,\n  FieldInterface,\n  PopBaseEventInterface,\n  ServiceInjector\n} from '../../../pop-common.model';\nimport { PopEntityUtilFieldService } from '../services/pop-entity-util-field.service';\nimport { EvaluateWhenCondition, IsValidFieldPatchEvent } from '../pop-entity-utility';\nimport { ConvertArrayToOptionList, IsArray, IsObject, IsObjectThrowError, StorageGetter } from '../../../pop-common-utility';\nimport { PopDomService } from '../../../services/pop-dom.service';\nimport { PopTabMenuService } from '../../base/pop-tab-menu/pop-tab-menu.service';\n\n\n@Component( {\n  selector: 'lib-pop-entity-field-group',\n  templateUrl: './pop-entity-field-group.component.html',\n  styleUrls: [ './pop-entity-field-group.component.scss' ]\n} )\nexport class PopEntityFieldGroupComponent extends PopExtendDynamicComponent implements OnInit, OnDestroy {\n  public name = 'PopEntityFieldGroupComponent';\n  @Input() position = 1;\n  @Input() fieldType: 'custom' | 'table' = null;\n  @Input() public interface: FieldGroupInterface; // relies on top level component to set\n  @ViewChild( 'container', { read: ViewContainerRef, static: true } ) private container;\n\n\n  protected srv = {\n    field: <PopEntityUtilFieldService>ServiceInjector.get( PopEntityUtilFieldService ),\n    tab: <PopTabMenuService>undefined\n  };\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService,\n    protected _tabRepo: PopTabMenuService,\n  ){\n    super();\n\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n        this.core = IsObjectThrowError( this.core, true, `${this.name}:configure: - this.core` ) ? this.core : null;\n        // handles events\n        this.trait.bubble = true;\n        this.dom.handler.bubble = ( core: CoreConfig, event: PopBaseEventInterface ) => this.onBubbleEvent( event );\n        // this.dom.handler.core = ( core: CoreConfig, event: PopBaseEventInterface ) => this._coreEventHandler( event );\n        this.id = this.position;\n        return resolve( true );\n      } );\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n        this.dom.overhead = this.interface && this.interface.header ? 60 : 0;\n        this.dom.setHeightWithParent( null, this.dom.overhead, 600 ).then( () => true );\n        // Get the list of fields and render them into the view\n\n        const fieldComponentList = await this._getFieldComponentList();\n        this.template.attach( 'container' );\n        this.template.render( fieldComponentList );\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * This component receives a list of fields to render\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n\n  /**\n   * Clean up the dom of this component\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n  /**\n   * This will retrieve any fields that have been marked for the position of this field group\n   */\n  private _getFieldComponentList(): Promise<DynamicComponentInterface[]>{\n    return new Promise( ( resolve ) => {\n      let fields = this.srv.field.getDomFields( this.position, this.dom.repo );\n      if( this.fieldType === 'custom' ){\n        fields = fields.filter( ( field ) => {\n          return field.custom;\n        } );\n      }else if( this.fieldType === 'table' ){\n        fields = fields.filter( ( field ) => {\n          return !( field.custom );\n        } );\n      }\n      this.asset.fields = {};\n      fields.map( ( field: FieldInterface ) => {\n        const config = StorageGetter( field, [ 'inputs', 'config' ], null );\n        if( config ){\n          this.asset.fields[ config.name ] = config;\n        }\n      } );\n      const componentList: DynamicComponentInterface[] = fields;\n\n      return resolve( componentList );\n    } );\n  }\n\n\n  /**\n   * The fields will trigger a slew of events\n   * @param event\n   */\n  onBubbleEvent( event: PopBaseEventInterface ){\n    this.log.event( `onBubbleEvent`, event );\n    if( IsValidFieldPatchEvent( this.core, event ) || event.type === 'context_menu' ){\n      this.log.info( `IsValidFieldPatchEvent`, event );\n\n      if( event.type === 'field' && event.config.name in this.core.entity ){\n        const newValue = isNaN( event.config.control.value ) ? event.config.control.value : +event.config.control.value;\n        this.core.entity[ event.config.name ] = newValue;\n        if( Object.keys( this.asset.fields ).length > 1 ){\n          this.dom.setTimeout( 'reset-hidden', () => {\n            this._triggerParentChildUpdates( event.config.name );\n            // this._resetComponentListHidden();\n\n          }, 0 );\n        }else{\n          this.dom.setTimeout( 'reset-hidden', () => {\n            // this._resetComponentListHidden();\n          }, 0 );\n        }\n      }\n\n      this.events.emit( event );\n      this.srv.tab.clearCache();\n    }\n  }\n\n  //\n  // /**\n  //  * This handler handles any events that come across the core cross channel\n  //  * @param event\n  //  * @private\n  //  */\n  // private _coreEventHandler( event: PopBaseEventInterface ){\n  //   this.log.event(`_coreEventHandler`, event);\n  //   if( IsValidFieldPatchEvent( this.core, event ) ){\n  //     // A values has been patched recheck the list of fields to see if any of them should be hidden\n  //\n  //   }\n  // }\n\n\n  /**\n   * Whenever a _update to the core entity happens the fields in the group should be re-evaluated if there are when conditionals set\n   * @private\n   */\n  private _resetComponentListHidden(){\n    let name, def;\n    const Fields = this.dom.repo.ui.fields;\n    this.template.refs.filter( ( componentRef: ComponentRef<any> ) => {\n      return IsObject( componentRef.instance.config, true ) && IsArray( componentRef.instance.when, true );\n    } ).map( ( componentRef: ComponentRef<any> ) => {\n      name = componentRef.instance.config.name;\n      if( name ){\n        def = Fields.get( name );\n        if( def ){\n          componentRef.instance.hidden = def.inputs.hidden = !EvaluateWhenCondition( this.core, componentRef.instance.when, this.core );\n          Fields.set( name, def );\n        }\n      }\n    } );\n  }\n\n\n  /**\n   * This will update the option values of related parent/child fields\n   * @param name\n   * @private\n   */\n  private _triggerParentChildUpdates( name: string ){\n    this.log.info(`_triggerParentChildUpdates`, name);\n    if( this._fieldHasChild( name ) ){\n      let values;\n      let child_fk;\n      let childField;\n      let autoFill = false;\n      let set;\n      const relations = this._getRelationList( name );\n      relations.some( ( relation ) => {\n        if( relation.autoFill ){\n          autoFill = true;\n          return true;\n        }\n      } );\n\n\n      if( name && name in this.asset.fields ){\n        child_fk = this.asset.fields[ name ].options.child;\n        if( child_fk && child_fk in this.asset.fields ){\n          childField = this.asset.fields[ child_fk ];\n          if( IsArray( childField.options.rawValues ) ){\n\n            values = ConvertArrayToOptionList( childField.options.rawValues, {\n              // ensure that an option shows up in list in case other conditions remove it, aka it has been archived\n              prevent: [], // a list of ids that should not appear in the list for whatever reason\n              // parent means this options should all have a common field trait like client_fk, account_fk ....\n              parent: childField.options.parent ? {\n                field: childField.options.parent,\n                value: this.core.entity[ childField.options.parent ]\n              } : null,\n              empty: childField.options.empty ? childField.options.empty : null,\n            } );\n\n            if( autoFill && values.length ){\n              set = values[ values.length - 1 ].value;\n            }else{\n              set = null;\n            }\n            childField.options.values = values;\n            autoFill = autoFill && values.length ? values[ 0 ].value : null;\n\n            this.dom.setTimeout( `clear-message-${child_fk}`, () => {\n              if( typeof childField.triggerOnChange === 'function' ) childField.triggerOnChange( set );\n              if( typeof childField.clearMessage === 'function' ){\n                childField.clearMessage();\n              }\n            }, 0 );\n          }\n        }\n      }\n    }\n  }\n\n\n  /**\n   * Get a linear list of the parent child relations from a given point\n   * @param self the name to start from (usually the field that has just been changed by user)\n   * @param list\n   */\n  private _getRelationList( name: string, list: any[] = [] ){ // recursive loop\n    let item;\n    if( name && name in this.asset.fields ){\n      item = this.asset.fields[ name ];\n      if( IsObject( item, true ) ){\n        list.push( {\n          name: item.name,\n          autoFill: this._fieldHasAutoFill( name ),\n        } );\n        if( this._fieldHasChild( name ) ){\n          this._getRelationList( item.options.child, list );\n        }\n      }\n\n    }\n    return list;\n  }\n\n\n  /**\n   * Determine if field has a child relation in the list\n   * @param name\n   */\n  private _fieldHasChild( name: string ){\n    if( name in this.asset.fields && this.asset.fields[ name ].options ){\n      if( this.asset.fields[ name ].options.child ){\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n\n  /**\n   * Determine if field should be auto filled with the first item in the list\n   * @param name\n   */\n  private _fieldHasAutoFill( name: string ){\n    if( name in this.asset.fields && this.asset.fields[ name ] ){\n      if( this.asset.fields[ name ].autoFill ){\n        return true;\n      }\n    }\n    return false;\n  }\n\n}\n","import { MatTableDataSource } from '@angular/material/table';\nimport { Subject } from 'rxjs';\nimport { PopBaseEventInterface } from '../../../pop-common.model';\n\nexport interface ColumnDefinitionInterface {\n  checkbox?: boolean | { order?: number, sticky?: boolean, visible?: boolean };\n  display?: string;  // The actual name display to be shown. If not passed then will map name through fieldMap.\n  helper?: string | { text?: string, position?: string }; // Any helper text (on hover) this name should have\n  icon?: { type: string, name: string }; // If this name should display an icon instead of the value.\n  link?: boolean | string;      // Highlight name text, and fire route event\n  order?: number;     // The order this name should be in.\n  route?: string;     // The path that will jump to if set. IE: /admin/users/:user_fk\n  internal_name?: string; // portal param\n  sticky?: boolean;   // If this name should be sticky on horizontal scrolling.\n  visible?: boolean;  // If this name should be visible.\n}\n\n\nexport interface TableButtonInterface {\n  id?: string | number;           // For setting the 'type' in table events. If not passed, name will be used.\n  name: string;                   // The name of the button.\n  accessType?: string;             // Requires user to have level of permissons to see button\n  requireSelected?: boolean;      // Makes button available when at least one item in table is selected.\n  requireOneSelected?: boolean;   // Makes button available when only one item is selected.\n  requireNoneSelected?: boolean;  // Makes button available when no items are selected.\n  hidden?: boolean;\n  disabled?: boolean;\n}\n\n\n\n\nexport interface TableOptionsInterface {\n  columns?: Array<string>; // Array of all name names.\n  currentOptions?: {\n    columnDefinitions: { [ key: string ]: ColumnDefinitionInterface };\n    headerDisplay: boolean,\n    headerSticky: boolean,\n    paginator: boolean,\n    search: boolean,\n    searchColumns: boolean,\n    sort: boolean,\n  };\n  defaultOptions: {\n    columnDefinitions: { [ key: string ]: ColumnDefinitionInterface };\n    headerDisplay?: boolean,\n    headerSticky?: boolean,\n    paginator?: number,\n    search?: boolean,\n    searchColumns?: boolean,\n    sort?: boolean,\n  };\n\n  allowColumnDisplayToggle?: boolean; // User is allowed to toggle which columns can be displayed.\n  allowColumnStickyToggle?: boolean;  // User is allowed to toggle which columns are sticky.\n  allowColumnSearchToggle?: boolean;  // User is allowed to toggle name search on/off.\n  allowColumnSortToggle?: boolean;    // User is allowed to toggle name sort on/off.\n  allowHeaderStickyToggle?: boolean;  // User is allowed to toggle sticky header.\n  allowHeaderDisplayToggle?: boolean; // User is allowed to toggle display of header.\n  allowPaginatorToggle?: boolean;     // User is allowed to toggle pagination sizes/on/off.\n}\n\n\nexport class TableOptionsConfig {\n\n  columns = [];\n  currentOptions;\n  defaultOptions;\n\n  allowColumnDisplayToggle = true;\n  allowColumnStickyToggle = true;\n  allowColumnSearchToggle = true;\n  allowColumnSortToggle = true;\n  allowHeaderStickyToggle = true;\n  allowHeaderDisplayToggle = true;\n  allowPaginatorToggle = true;\n\n\n  constructor(params: TableOptionsInterface){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n\n    if( this.defaultOptions.headerDisplay !== false ) this.defaultOptions.headerDisplay = true;\n    if( this.defaultOptions.headerSticky !== false ) this.defaultOptions.headerSticky = true;\n    if( !this.defaultOptions.paginator ) this.defaultOptions.paginator = 0;\n    if( this.defaultOptions.search !== false ) this.defaultOptions.search = true;\n    if( this.defaultOptions.searchColumns !== true ) this.defaultOptions.searchColumns = false;\n    if( this.defaultOptions.sort !== true ) this.defaultOptions.sort = false;\n  }\n}\n\n\n\nexport interface TableInterface {\n  id?: string | number;\n  columnDefinitions?: { [ key: string ]: ColumnDefinitionInterface }; // object of name names and their definitions.\n  buttons?: Array<TableButtonInterface>;  // Array of table buttons.\n  data?: Array<object>;                   // Data set - array of objects.\n  height?: number;                        // static height\n  parentHeight?: string;                  // the height that the table should match\n  headerDisplay?: boolean;                // If header should be displayed.\n  headerSticky?: boolean;                 // If header should be sticky. Can not be on if pagination is on.\n  internal_name?: string;\n  initialSort?: string;                   // Initial name to sort on any time the dataset is updated.\n  initialSortDirection?: 'asc' | 'desc';\n  linkBehavior?: string;                  // Set the default behavior of clicking on links, route, modal, custom\n  metadata?: object;                      // Any metadata object to be returned on all events.\n  advanced_search?: boolean;                  // Set true if you want to override default search functionality. Search event will be triggered instead;\n  options?: TableOptionsConfig;\n  paginator?: boolean;                     // Items per page in pagination. false = off. Can not be on with sticky header.\n  search?: boolean;                       // If main search should be turned on. If on, will over-ride name search.\n  searchValue?:string;                    // Init the search value\n  searchColumns?: boolean;                // Individual name search. Overridden by searchMain\n  sort?: boolean;                         // Column Sort option\n  route?: string;                          // general route to redirect on a name click if the route parameter on the name definition hasn't been set.\n}\n\n\nexport class TableConfig {\n  id;\n  matDataPaginator;\n  selection;\n  // General Params\n  buttons: TableButtonInterface[] = [];\n  columnDefinitions = {};\n  dealWithAngularChangeDetectionFailure = false;\n  data = [];\n  height = 500; // static height px\n  parentHeight?: string; // class name of the outer div that table should match\n  initialSort = null;\n  initialSortDirection:'asc' | 'desc' = 'asc';\n  internal_name?: string;\n  loading = false;\n  metadata = null;\n  options = null;\n  sort = false;\n  route = '';\n  linkBehavior = 'route';\n\n  // Optionable Params\n  //  - These can be toggled in options so if any default are changed here make sure to also subject them in TableOptionsConfig\n  headerDisplay = true;\n  headerSticky = false;\n  paginator = false;\n  search = true;\n  searchValue = '';\n  searchColumns = false;\n  advanced_search = false;\n\n  onEvent: Subject<PopBaseEventInterface>;\n\n  // Built through updates.\n  matData = new MatTableDataSource();\n  columnConfig = { visible: [], templates: {} };\n  updateColumnDefinitions;\n  updateData;\n  applyFilter;\n  clearSelected;\n  reset;\n  setLayout;\n  setHeight;\n\n\n  constructor(params?: TableInterface){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n    if( !( [ 'route', 'portal' ].includes(this.linkBehavior) ) ) this.linkBehavior = 'route';\n    // Run these in case params had conflicting info.\n    if( this.paginator ){\n      this.headerSticky = false;\n    }\n  }\n\n}\n","import { ChangeDetectorRef, Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { TableConfig, TableInterface } from '../../base/pop-table/pop-table.model';\nimport { PopEntityService } from '../services/pop-entity.service';\nimport { PopExtendComponent } from '../../../pop-extend.component';\nimport { CoreConfig, PopBaseEventInterface, PopPipe, PopTemplate, ServiceInjector } from '../../../pop-common.model';\nimport { PopPipeService } from '../../../services/pop-pipe.service';\nimport { IsArray, StorageGetter } from '../../../pop-common-utility';\nimport { GetObjectTransformations } from '../pop-entity-utility';\n\n\n@Component( {\n  selector: 'lib-pop-entity-history',\n  templateUrl: './pop-entity-history.component.html',\n  styleUrls: [ './pop-entity-history.component.scss' ]\n} )\nexport class PopEntityHistoryComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() config: TableConfig;\n\n\n  public name = 'PopEntityHistoryComponent';\n\n\n  constructor(\n    public el: ElementRef,\n    public cdr: ChangeDetectorRef,\n  ){\n    super();\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n        this.dom.setHeight( PopTemplate.getContentHeight(), 100 );\n        await this.buildTable();\n        this.dom.state.hasData = IsArray(StorageGetter(this.config, ['matData', 'data'], []), true);\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  buildTable(): Promise<boolean>{\n    return new Promise( ( resolve ) => {\n      this.dom.setSubscriber( 'history-api-call', this.core.repo.getHistory( +this.core.params.entityId ).subscribe(\n        history => {\n          // Build the config.\n          // Prepare and load the data.\n          history = this._prepareTableData( history, this.core.repo.model.field );\n          const tableConfig: TableInterface = {\n            height: this.dom.height.inner,\n            search: true,\n            columnDefinitions: {\n              user: { visible: true, order: 1, internal_name: 'user', route: '/admin/users/:user_fk' },\n              action: { visible: true, order: 2 },\n              message: { visible: true, order: 3 },\n              timestamp: { visible: true, order: 4 },\n            },\n            data: Array.isArray( history ) ? history : [],\n          };\n          this.config = new TableConfig( tableConfig );\n          try{\n            this.cdr.detectChanges();\n          }catch( e ){\n          }\n          return resolve( true );\n\n        },\n        err => {\n          this.dom.error = {\n            code: ( err.error ? err.error.code : err.status ),\n            message: ( err.error ? err.error.message : err.statusText )\n          };\n          try{\n            this.cdr.detectChanges();\n          }catch( e ){\n          }\n          return resolve( false );\n        }\n      ) );\n    } );\n  }\n\n\n  eventHandler( event: PopBaseEventInterface ){\n    if( event.type === 'table' ){\n    }\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  /**\n   * A method that preps entityId list data for tables\n   * @param dataSet\n   * @param fieldMap\n   */\n  private _prepareTableData( dataSet: Array<any>, fieldMap: {} = {}, entityConfig: CoreConfig = null ){\n    // Determine which fields should be acted upon.\n    const transformations = GetObjectTransformations( fieldMap );\n    return IsArray( dataSet, true ) ? dataSet.map( row => PopPipe.transformObjectValues( { ...row }, transformations, entityConfig ) ) : dataSet;\n  }\n}\n","import { Component, Inject, OnDestroy, OnInit } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialog, MatDialogRef } from '@angular/material/dialog';\nimport { PopBaseService } from '../../../../services/pop-base.service';\nimport { PopEntityService } from '../../services/pop-entity.service';\nimport { Subscription } from 'rxjs';\nimport { TableConfig } from '../../../base/pop-table/pop-table.model';\nimport { PopEntityEventService } from '../../services/pop-entity-event.service';\nimport { PopEntityUtilPortalService } from '../../services/pop-entity-util-portal.service';\nimport { CoreConfig, Entity, PopBaseEventInterface, ServiceInjector } from '../../../../pop-common.model';\n\n\nexport interface PopEntityProviderDialogInterface {\n  display?: string;\n  config: CoreConfig;\n  table: TableConfig;\n  resource: Entity;\n}\n\n\n@Component({\n  selector: 'lib-pop-entity-provider-dialog',\n  templateUrl: './pop-entity-provider-dialog.component.html',\n  styleUrls: [ './pop-entity-provider-dialog.component.scss' ]\n})\nexport class PopEntityProviderDialogComponent implements OnInit, OnDestroy {\n  display: string;\n  config: CoreConfig;\n  table: TableConfig;\n  resource: Entity;\n\n\n  constructor(\n    @Inject(MAT_DIALOG_DATA) data: PopEntityProviderDialogInterface,\n    private entityUtilRepo: PopEntityService,\n    private entityPortalRepo: PopEntityUtilPortalService,\n    private baseRepo: PopBaseService,\n    private dialogRepo: MatDialog,\n    public dialog: MatDialogRef<PopEntityProviderDialogComponent>){\n    this.display = data.display;\n    this.config = data.config;\n    this.table = data.table;\n    this.resource = data.resource;\n  }\n\n\n  state = {\n    blockModal: false,\n    assignmentChange: false,\n    changed: false\n  };\n\n  subscriber = {\n    crud: <Subscription>undefined,\n    dialog: <Subscription>undefined,\n  };\n\n\n  ngOnInit(){\n    if( !this.display ) this.display = this.getDisplay();\n    this.subscriber.crud = ServiceInjector.get(PopEntityEventService).events.subscribe((event) => this.crudEventHandler(event));\n    this.subscriber.dialog = this.dialog.beforeClosed().subscribe(_ => {\n      this.dialog.close(this.state.changed);\n    });\n  }\n\n\n  getDisplay(){\n    const entityName = this.config.entity.display_name ? this.config.entity.display_name : this.config.entity.name;\n    const resourceType = this.resource.entity ? this.resource.entity : 'Entity';\n    const resourceName = this.resource.name ? this.resource.name : 'Resource';\n    return `${entityName} - (${resourceName} - ${resourceType} ) - Provider List`;\n  }\n\n\n  crudEventHandler(event: PopBaseEventInterface){\n    console.log('crudEventHandler', event);\n    if( event.method === 'create' || event.method === 'delete' ){\n      this.state.changed = true;\n    }else{\n      if( event.type === 'entity' ){\n        if( event.name === 'archive' ){\n          this.state.changed = true;\n        }\n      }else if( event.type === 'field' && event.name === 'patch' ){\n        const patch = {};\n        patch[ event.config.column ] = event.config.control.value;\n        const signature = event.config.metadata;\n        const signatureMatches = this.table.matData.data.filter(function(row, i){\n          return ( ( row[ 'internal_name' ] === signature.internal_name && +row[ 'id' ] === +signature.id ) );\n        });\n        if( Array.isArray(signatureMatches) && signatureMatches.length ){\n          signatureMatches.map((row) => {\n            Object.keys(patch).map((column) => {\n              if( column in row ){\n                row[ column ] = patch[ column ];\n                this.state.changed = true;\n              }\n            });\n          });\n        }\n      }else if( event.type === 'sidebyside' && event.name === 'patch' ){\n        const signature = { ...event.config.metadata };\n        const signatureMatches = this.table.matData.data.filter(function(row, i){\n          return ( ( row[ 'internal_name' ] === signature.internal_name && +row[ 'id' ] === +signature.id ) );\n        });\n        if( Array.isArray(signatureMatches) && signatureMatches.length ){\n          this.state.changed = true;\n          this.state.assignmentChange = true;\n        }\n      }\n    }\n  }\n\n\n  eventHandler(event: PopBaseEventInterface){\n    if( event.type === 'table' ){\n      switch( event.data.link ){\n        case 'provider':\n          this.viewEntityPortal(event.data.row.internal_name, +event.data.row.id);\n          break;\n        default:\n          break;\n      }\n    }\n  }\n\n\n  viewEntityPortal(internal_name: string, id: number){\n    // placeholder\n    this.entityPortalRepo.view(internal_name, id);\n  }\n\n\n  cancel(){\n    this.dialog.close(this.state.changed);\n  }\n\n\n  ngOnDestroy(){\n    Object.keys(this.subscriber).map((name) => {\n      if( this.subscriber[ name ] ){\n        this.subscriber[ name ].unsubscribe();\n      }\n    });\n  }\n\n}\n","import { ChangeDetectorRef, Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { TableConfig } from '../../base/pop-table/pop-table.model';\nimport { PopBaseService } from '../../../services/pop-base.service';\nimport { PopEntityTabMenuComponent } from '../pop-entity-tab-menu/pop-entity-tab-menu.component';\nimport { PopEntityService } from '../services/pop-entity.service';\nimport { PopTabMenuService } from '../../base/pop-tab-menu/pop-tab-menu.service';\nimport { PopEntityProviderDialogComponent, PopEntityProviderDialogInterface } from './pop-entity-provider-dialog/pop-entity-provider-dialog.component';\nimport { CoreConfig, Dictionary, Entity, EntityParams, PopBaseEventInterface, PopPipe, PopTemplate, ServiceInjector } from '../../../pop-common.model';\nimport { PopEntityEventService } from '../services/pop-entity-event.service';\nimport { MatDialog } from '@angular/material/dialog';\nimport { PopExtendComponent } from '../../../pop-extend.component';\nimport { PopDomService } from '../../../services/pop-dom.service';\nimport {\n  ArrayOnlyUnique,\n  ArrayRemoveDupliates,\n  DeepCopy,\n  IsArray,\n  IsObject,\n  IsObjectThrowError,\n  IsString,\n  SnakeToPascal,\n  StorageGetter,\n  TitleCase\n} from '../../../pop-common-utility';\nimport { GetTabMenuConfig } from '../pop-entity-utility';\n\n\n@Component( {\n  selector: 'lib-pop-entity-assignments',\n  templateUrl: './pop-entity-assignments.component.html',\n  styleUrls: [ './pop-entity-assignments.component.scss' ],\n\n} )\nexport class PopEntityAssignmentsComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() private fieldType: string;\n  @Input() public header: string;\n\n  public name = 'PopEntityAssignmentsComponent';\n\n  protected srv = {\n    base: <PopBaseService>ServiceInjector.get( PopBaseService ),\n    dialog: <MatDialog>ServiceInjector.get( MatDialog ),\n    events: <PopEntityEventService>ServiceInjector.get( PopEntityEventService ),\n    entity: <PopEntityService>ServiceInjector.get( PopEntityService ),\n    tab: <PopTabMenuService>undefined,\n  };\n\n  protected asset = {\n    entityParamsMap: <Dictionary<EntityParams>>{},\n    assignedUserMap: undefined\n  };\n\n\n  constructor(\n    public el: ElementRef,\n    public  cdr: ChangeDetectorRef,\n    protected _domRepo: PopDomService,\n    protected _tabRepo: PopTabMenuService,\n  ){\n    super();\n    /**\n     * This should transformValue and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n\n\n        // #1: Enforce a CoreConfig\n        this.core = IsObjectThrowError( this.core, true, `${this.name}:configureDom: - this.core` ) ? this.core : null;\n        this.dom.state = {\n          ...this.dom.state, ...{\n            directBaseline: false,\n            dataHasDirect: false,\n            dataHasParent: false,\n            dataHasProviders: false,\n            dataHasType: false,\n            blockModal: false,\n            loaded: false,\n            loading: true,\n            error: { code: 0, message: '' },\n          }\n        };\n        this.ui.table = {\n          config: <TableConfig>undefined,\n        };\n        this.dom.setHeight( PopTemplate.getContentHeight(), 100 );\n        this.buildTable();\n        this.dom.state.hasData = IsArray(StorageGetter(this.ui.table.config, ['matData', 'data'], []), true);\n        return resolve( true );\n      } );\n    };\n\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  buildTable(){\n    let parentLabel;\n    const isDialogLimit = this.srv.dialog.openDialogs.length > 3;\n    if( this.core && this.core.params ) this.core.params.refresh = false;\n    const columnDefinitions = {};\n    // this.subscribers.entity = this.entityRepo.events.subscribe((e) => this.crudEventHandler(e));\n    if( this.fieldType && String( this.fieldType ).includes( 'assigned_' ) === false ) this.fieldType = `assigned_${this.fieldType}`;\n    // this.fieldType should reference a entity.metadata key <'assigned_XXXXXX'> if not this.fieldType grab anything with the 'assigned_' prefix in entity.metadata;\n    const data = this.getTableData();\n    if( this.fieldType && this.dom.state.dataHasParent ){\n      parentLabel = TitleCase( SnakeToPascal( PopPipe.transform( data[ 0 ].parent.internal_name, { type: 'entity', arg1: 'alias', arg2: 'singular' } ) ) ).trim();\n    }\n\n    this.ui.table.config = new TableConfig( {\n      height: this.dom.height.outer,\n      paginator: false,\n      search: data.length >= 10 ? true : false,\n      searchColumns: false,\n      columnDefinitions: {\n        name: {\n          visible: true,\n          helper: isDialogLimit ? null : { text: 'Jump To: <name>', position: 'right' },\n          link: isDialogLimit ? false : 'entity',\n          order: 0,\n        },\n        entity: {\n          visible: !this.fieldType ? true : false,\n          order: 1,\n        },\n\n        direct: {\n          visible: this.dom.state.dataHasDirect ? true : false,\n          order: 2,\n        },\n        type: {\n          visible: this.dom.state.dataHasType ? true : false,\n          order: 3,\n        },\n        parent_name: {\n          visible: this.fieldType && this.dom.state.dataHasParent && parentLabel ? true : false,\n          display: parentLabel,\n          link: 'parent',\n          order: 4,\n        },\n        has_providers: {\n          display: 'Provider',\n          visible: this.dom.state.dataHasProviders ? true : false,\n          link: 'providers',\n          // helper: { text: 'Jump To: <name>', position: 'right' },\n          order: 5,\n        },\n        // assigned: {\n        //   visible: true,\n        //   link: 'section_users',\n        //   // helper: { text: 'Jump To: <name>', position: 'right' },\n        //   order: 4,\n        // },\n        // id: {\n        //   visible: this.fieldType ? true : false,\n        //   order: 100,\n        // },\n      },\n      data: data,\n    } );\n    this.dom.state.loading = false;\n    this.dom.state.loaded = true;\n    try{\n      this.cdr.detectChanges();\n    }catch( e ){\n    }\n  }\n\n\n  crudEventHandler( event: PopBaseEventInterface ){\n    if( this.dom.subscriber.dialog ){\n      if( event.method === 'create' || event.method === 'delete' ){\n        if( this.core && this.core.params ) this.core.params.refresh = true;\n      }else if( event.method === 'update' ){\n        if( event.type === 'entity' ){\n          if( event.name === 'archive' ){\n            if( this.core && this.core.params ) this.core.params.refresh = true;\n          }\n        }else if( ( event.type === 'field' || event.type === 'sidebyside' ) && event.name === 'patch' ){\n          if( this.core && this.core.params ) this.core.params.refresh = true;\n        }\n      }\n    }\n  }\n\n\n  getKeyInternalName( key: string ){\n    return String( key ).replace( /(pt_leader|pt_member|_fk|assigned_)/g, '' );\n  }\n\n\n  getEntityParams( key: string, id: number = null ): EntityParams{\n    let entityParams;\n    key = this.getKeyInternalName( key );\n    if( key in this.asset.entityParamsMap ){\n      return this.asset.entityParamsMap[ key ];\n    }\n    if( key === 'user' ){\n      entityParams = <EntityParams>{\n        app: 'admin',\n        internal_name: 'user',\n        api: 'user',\n      };\n    }else{\n      entityParams = this.srv.entity.getEntityParams( key );\n    }\n    if( !entityParams ){\n      entityParams = this.srv.entity.getEntityParamsWithPath( key );\n    }\n    this.asset.entityParamsMap[ key ] = entityParams;\n\n    if( this.log.repo.enabled() ) console.log( this.log.repo.message( 'PopEntityAssignmentsComponent:entityParams' ), this.log.repo.color( 'info' ), DeepCopy( this.asset.entityParamsMap[ key ] ) );\n    return DeepCopy( this.asset.entityParamsMap[ key ] );\n  }\n\n\n  getTableData(){\n    this.asset.assignedUserMap = {};\n    const data = [];\n    let rows;\n    let userRows = [];\n    let user;\n    if( this.core && this.core.entity && IsObject( this.core.entity.metadata, true ) ){\n      if( IsString( this.fieldType, true ) ){\n        if( IsArray( this.core.entity.metadata[ this.fieldType ], true ) ){\n          rows = this.core.entity.metadata[ this.fieldType ].map( ( row ) => {\n            return this.transformRow( this.fieldType, row );\n          } );\n          if( this.fieldType.includes( 'user' ) === false ){ // users are handled special because they inherit assignments from multiple sources\n            data.push( ...rows );\n          }else{\n            userRows = rows;\n          }\n        }\n      }else{\n        Object.keys( this.core.entity.metadata ).map( ( key: string ) => {\n          if( key && String( key ).includes( 'assigned_' ) && this.getEntityParams( key ) && IsArray( this.core.entity.metadata[ key ], true ) ){\n            rows = this.core.entity.metadata[ key ].map( ( row ) => {\n              return this.transformRow( key, row );\n            } );\n            if( key.includes( 'user' ) === false ){ // users are handled special because they inherit assignments from multiple sources\n              data.push( ...rows );\n            }else{\n              userRows = rows;\n            }\n          }\n        } );\n      }\n    }\n    if( IsArray( userRows, true ) ){\n      userRows.map( ( row ) => {\n        if( row.id in this.asset.assignedUserMap ) this.asset.assignedUserMap[ row.id ].direct = true;\n      } );\n    }\n\n    if( IsObject( this.asset.assignedUserMap, true ) ){\n      rows = Object.keys( this.asset.assignedUserMap ).map( ( id ) => {\n        user = this.asset.assignedUserMap[ id ];\n        return {\n          id: +id,\n          internal_name: 'user',\n          name: user.name,\n          entity: 'User',\n          direct: user.direct,\n          providers: user.providers,\n\n        };\n      } );\n      data.push( ...rows );\n\n    }\n\n    data.sort( function( a, b ){\n      // Sort by Entity\n      if( a.entity > b.entity ) return 1;\n      if( a.entity < b.entity ) return -1;\n      // Sort by Title\n      if( a.name > b.name ) return 1;\n      if( a.name < b.name ) return -1;\n    } );\n    data.map( ( row ) => {\n      if( !this.dom.state.directBaseline ) this.dom.state.directBaseline = row.direct;\n      if( row.direct !== this.dom.state.directBaseline ) this.dom.state.dataHasDirect = true;\n      if( row.parent ){\n        row.parent_name = row.parent.name;\n        this.dom.state.dataHasParent = true;\n      }\n      row.has_providers = IsArray( row.providers, true ) ? 'Yes' : null;\n      if( row.has_providers ){\n        this.dom.state.dataHasProviders = true;\n        row.providers = ArrayRemoveDupliates( row.providers, 'uid' );\n        row.has_providers = this.getProvidersName( row.providers );\n        row.providers.map( ( provider ) => {\n          if( provider.internal_name ) provider.entityId = TitleCase( SnakeToPascal( PopPipe.transform( provider.internal_name, {\n            type: 'entity',\n            arg1: 'alias',\n            arg2: 'singular'\n          } ) ) ).trim();\n          if( provider.type ) provider.type = TitleCase( SnakeToPascal( provider.type ) ).trim();\n          if( provider.direct ) row.direct = true;\n        } );\n      }\n      row.direct = row.direct ? 'Yes' : 'No';\n      if( row.type ){\n        this.dom.state.dataHasType = true;\n        row.type = TitleCase( SnakeToPascal( row.type ) ).trim();\n      }\n    } );\n    if( this.log.repo.enabled() ) console.log( this.log.repo.message( 'PopEntityAssignmentsComponent:data' ), this.log.repo.color( 'data' ), data );\n    return data;\n  }\n\n\n  assignUsers( users: Entity[], provider: object ){\n    if( IsArray( users, true ) ){\n      users.map( ( user ) => {\n        if( +user.id && user.name ){\n          if( !this.asset.assignedUserMap[ user.id ] ) this.asset.assignedUserMap[ user.id ] = { id: user.id, name: user.name, direct: false, providers: [] };\n          this.asset.assignedUserMap[ user.id ].providers.push( provider );\n        }\n      } );\n    }\n  }\n\n\n  getProvidersName( providers: any[] ){\n    let types = [];\n    if( IsArray( providers, true ) ){\n      providers.map( ( provider ) => {\n        if( provider.internal_name ) types.push( TitleCase( SnakeToPascal( PopPipe.transform( provider.internal_name, {\n          type: 'entity',\n          arg1: 'alias',\n          arg2: 'singular'\n        } ) ) ).trim() );\n      } );\n      types = ArrayOnlyUnique( types );\n      types.sort();\n    }\n    if( this.log.repo.enabled() ) console.log( this.log.repo.message( 'PopEntityAssignmentsComponent:providersName' ), this.log.repo.color( 'info' ), IsArray( types, true ) ? types.join( ', ' ) : 'Yes' );\n    return IsArray( types, true ) ? types.join( ', ' ) : 'Yes';\n  }\n\n\n  transformRow( key: string, row: Entity ){\n    const entityParams = this.getEntityParams( key );\n    // entityParams.entity = row.id;\n    // console.log('entityParams', entityParams);\n    let direct = row.direct ? true : false;\n\n    let providers = IsArray( row.providers, true ) ? row.providers : [];\n    let provider;\n    const keyInternalName = this.getKeyInternalName( key );\n    row.internal_name = keyInternalName;\n    const entity = TitleCase( SnakeToPascal( PopPipe.transform( keyInternalName, { type: 'entity', arg1: 'alias', arg2: 'singular' } ) ) ).trim();\n    let type = row.type ? row.type : '';\n    if( entityParams.internal_name ){\n      const matches = Object.keys( row ).filter( ( field: string ) => {\n        if( field.includes( this.core.params.internal_name ) && +row[ field ] === +this.core.params.entityId ){\n          return true;\n        }\n      } );\n\n      switch( row.internal_name ){\n        case 'pod_type':\n          if( IsArray( matches, true ) ){\n            direct = true;\n          }\n          if( IsArray( row.pods ) ){\n            row.pods.map( ( pod ) => {\n              if( pod.assigned_leaders ) this.assignUsers( pod.assigned_leaders, {\n                id: +pod.id,\n                name: pod.name,\n                entity: entity,\n                type: 'Leader',\n                internal_name: 'pod',\n                uid: `pod_${pod.id}_leader`\n              } );\n              if( pod.assigned_members ) this.assignUsers( pod.assigned_members, {\n                id: +pod.id,\n                name: pod.name,\n                entity: entity,\n                type: 'Member',\n                internal_name: 'pod',\n                uid: `pod_${pod.id}_member`\n              } );\n            } );\n          }\n          break;\n        case 'pod':\n          matches.map( ( matchFieldName ) => {\n            if( IsArray( matches, true ) ){\n              if( this.core.params.internal_name === 'security_profile' ){\n                type = String( matchFieldName ).includes( 'leader' ) ? 'Leader' : 'Member';\n                if( String( matchFieldName ).includes( 'pt_' ) ){\n                  provider = { id: row.pod_type_fk, name: row.pod_type, internal_name: 'pod_type', type: type, uid: `pod_type_${row.pod_type_fk}_${type}` };\n                  providers = [ provider ];\n                }else{\n                  direct = true;\n                }\n              }\n            }\n\n            if( row.assigned_leaders ) this.assignUsers( row.assigned_leaders, {\n              id: row.id,\n              name: row.name,\n              entity: entity,\n              type: 'Leader',\n              internal_name: 'pod',\n              uid: `pod_${row.id}_leader`\n            } );\n            if( row.assigned_members ) this.assignUsers( row.assigned_members, {\n              id: row.id,\n              name: row.name,\n              entity: entity,\n              type: 'Member',\n              internal_name: 'pod',\n              uid: `pod_${row.id}_member`\n            } );\n          } );\n          break;\n        case 'role':\n          if( IsArray( matches, true ) ){\n            direct = true;\n            if( row.assigned_user ) this.assignUsers( row.assigned_user, {\n              id: +row.id,\n              name: row.name,\n              entity: entity,\n              internal_name: 'role',\n              uid: `role_${row.id}`\n            } );\n          }\n\n          break;\n        case 'user':\n          if( IsArray( matches, true ) ){\n            direct = true;\n            this.assignUsers( [ row ], { id: +row.id, name: row.name, entity: entity, internal_name: 'user', type: 'User', uid: `user_${row.id}_${type}` } );\n          }\n          break;\n        default:\n          break;\n      }\n    }\n\n    return {\n      id: row.id,\n      internal_name: row.internal_name,\n      name: row.display_name ? row.display_name : row.name,\n      parent: row.parent,\n      entity: TitleCase( SnakeToPascal( PopPipe.transform( keyInternalName, { type: 'entity', arg1: 'alias', arg2: 'singular' } ) ) ).trim(),\n      direct: direct,\n      type: type,\n      providers: providers,\n      uid: type ? `${keyInternalName}_${row.id}_${type}` : `${keyInternalName}_${row.id}`\n    };\n  }\n\n\n  eventHandler( event: PopBaseEventInterface ){\n    if( event.type === 'table' ){\n      if( this.log.repo.enabled() ) console.log( this.log.repo.message( 'PopEntityAssignmentsComponent:event' ), this.log.repo.color( 'event' ), event );\n      switch( event.data.link ){\n        case 'entity':\n          this.viewEntityPortal( event.data.row.internal_name, +event.data.row.id );\n          break;\n        case 'parent':\n          if( event.data.row && event.data.row.parent ){\n            this.viewEntityPortal( event.data.row.parent.internal_name, +event.data.row.parent.id );\n          }\n          break;\n        case 'providers':\n          this.viewRowProviders( event.data.row );\n          break;\n        default:\n          break;\n      }\n    }\n  }\n\n\n  viewEntityPortal( internal_name: string, id: number ){\n    // placeholder\n    if( !this.dom.state.blockModal ){\n      this.dom.state.blockModal = true;\n      if( internal_name && +id ){\n        this.srv.entity.getCoreConfig( internal_name, +id ).then( ( entityConfig: CoreConfig ) => {\n          let tabMenuConfig = this._buildTabMenuConfig( entityConfig );\n          tabMenuConfig.portal = true;\n          let dialogRef = this.srv.dialog.open( PopEntityTabMenuComponent, {\n            width: `${window.innerWidth - 20}px`,\n            height: `${window.innerHeight - 50}px`,\n            data: entityConfig,\n            panelClass: 'sw-relative'\n          } );\n          let component = <PopEntityTabMenuComponent>dialogRef.componentInstance;\n          component.registerTabMenuConfig( tabMenuConfig );\n          this.dom.subscriber.dialog = dialogRef.beforeClosed().subscribe( () => {\n            this.dom.state.blockModal = false;\n            this.srv.tab.refreshEntity( this.core.params.entityId, null, {}, 'PopEntityAssignmentsComponent:viewEntityPortal' ).then( () => {\n              dialogRef = null;\n              tabMenuConfig = null;\n              component = null;\n            } );\n          } );\n        } );\n      }\n    }\n  }\n\n\n  viewRowProviders( row: any ){\n    if( !this.dom.state.blockModal ){\n      this.dom.state.blockModal = true;\n      const data = [];\n      const tableConfig = new TableConfig( {\n        search: false,\n        searchColumns: false,\n        headerSticky: true,\n        // paginator: 5,\n        columnDefinitions: {\n          name: {\n            visible: true,\n            helper: { text: 'Jump To: <name>', position: 'right' },\n            link: 'provider',\n            order: 0,\n          },\n\n          entity: {\n            visible: true,\n            // link: 'assigned',\n            // helper: { text: 'Jump To: <name>', position: 'right' },\n            order: 1,\n          },\n\n          type: {\n            visible: true,\n            // link: 'assigned',\n            // helper: { text: 'Jump To: <name>', position: 'right' },\n            order: 2,\n          },\n          id: {\n            visible: true,\n            order: 100,\n          },\n        },\n        data: row.providers\n      } );\n\n\n      const dialogRef = this.srv.dialog.open( PopEntityProviderDialogComponent, {\n        data: <PopEntityProviderDialogInterface>{\n          table: tableConfig,\n          config: this.core,\n          resource: row,\n        }\n      } );\n\n      this.dom.setSubscriber( 'pop-table-dialog-close', dialogRef.beforeClosed().subscribe( ( changed ) => {\n        this.dom.state.blockModal = false;\n        if( true ){\n          this.srv.tab.refreshEntity( null, this.dom.repo, {}, 'PopEntityAssignmentsComponent:viewRowProviders' ).then( () => true );\n        }\n      } ) );\n    }\n  }\n\n\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  private _buildTabMenuConfig( core: CoreConfig ){\n    return GetTabMenuConfig( core, this.srv.entity.getEntityTabs( core ) );\n  }\n\n\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { PopExtendComponent } from '../../../../pop-extend.component';\nimport { PopDomService } from '../../../../services/pop-dom.service';\nimport { PopFieldEditorService } from '../pop-entity-field-editor.service';\nimport { IsObject, IsObjectThrowError, StorageGetter, StorageSetter } from '../../../../pop-common-utility';\nimport { Dictionary, FieldInterface, PopBaseEventInterface } from '../../../../pop-common.model';\nimport { EntitySchemeSectionInterface } from '../../pop-entity-scheme/pop-entity-scheme.model';\n\n\n@Component( {\n  selector: 'lib-pop-entity-field-settings',\n  templateUrl: './pop-entity-field-settings.component.html',\n  styleUrls: [ './pop-entity-field-settings.component.scss' ],\n} )\nexport class PopEntityFieldSettingsComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() field: FieldInterface;\n  @Input() scheme: EntitySchemeSectionInterface;\n  public name = 'PopEntityFieldSettingsComponent';\n\n\n  protected srv = {\n    field: <PopFieldEditorService>undefined,\n  };\n\n  protected asset = {\n    schemeFieldSetting: <Dictionary<any>>{},\n  };\n\n\n  /**\n   * @param el\n   * @param _domRepo - transfer\n   * @param _fieldRepo - transfer\n   */\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService,\n    protected _fieldRepo: PopFieldEditorService,\n  ){\n    super();\n\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n        this.core = IsObjectThrowError( this.core, true, `${this.name}:configure: - this.core` ) ? this.core : null;\n        this.field = <FieldInterface>this.core.entity;\n        if( StorageGetter( this.dom, [ 'repo', 'position', String( this.position ), 'height' ], false ) ){\n          this.dom.overhead = 60;\n          this.dom.height.outer = +this.dom.repo.position[ this.position ].height - 300;\n          this.dom.setHeight( this.dom.repo.asset[ this.dom.height.outer ], this.dom.overhead );\n        }\n        if( IsObject( this.scheme ) ){\n          this.asset.schemeFieldSetting = this.srv.field.getSchemeFieldSetting( this.scheme, +this.field.id );\n//           console.log( 'scheme field', this.asset.schemeFieldSetting );\n        }\n        this.dom.state.hasScheme = IsObject( this.scheme, true ) ? true : false;\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n}\n","import { Component, ElementRef, HostListener, Input, OnDestroy, OnInit, ViewChild, ViewContainerRef } from '@angular/core';\nimport { PopExtendDynamicComponent } from '../../../../pop-extend-dynamic.component';\nimport { PopDomService } from '../../../../services/pop-dom.service';\nimport { EntitySchemeSectionInterface } from '../pop-entity-scheme.model';\nimport { InputConfig } from '../../../base/pop-field-item/pop-input/input-config.model';\nimport { CoreConfig, Dictionary, FieldCustomSettingInterface, FieldInterface, PopBaseEventInterface, PopEntity, PopPipe } from '../../../../pop-common.model';\nimport { PopFieldEditorService } from '../../pop-entity-field-editor/pop-entity-field-editor.service';\nimport { SwitchConfig } from '../../../base/pop-field-item/pop-switch/switch-config.model';\nimport { IsArray, IsNumber, IsObject, IsString, StorageGetter, StorageSetter } from '../../../../pop-common-utility';\nimport { PopEntitySchemeService } from '../pop-entity-scheme.service';\nimport { MatDialogRef } from '@angular/material/dialog';\nimport { PopEntityFieldSettingsComponent } from '../../pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-settings.component';\nimport { PopEntityUtilFieldService } from '../../services/pop-entity-util-field.service';\n\n\n@Component( {\n  selector: 'lib-pop-entity-scheme-field-setting',\n  templateUrl: './pop-entity-scheme-field-setting.component.html',\n  styleUrls: [ './pop-entity-scheme-field-setting.component.scss' ],\n  providers: [ PopFieldEditorService, PopDomService ],\n} )\nexport class PopEntitySchemeFieldSettingComponent extends PopExtendDynamicComponent implements OnInit, OnDestroy {\n  @ViewChild( 'container', { read: ViewContainerRef, static: true } ) public container;\n  @Input() config: EntitySchemeSectionInterface = <EntitySchemeSectionInterface>{};\n\n  public name = 'PopEntitySchemeFieldSettingComponent';\n\n\n  protected srv = {\n    field: <PopFieldEditorService>undefined,\n    utilField: <PopEntityUtilFieldService>undefined,\n  };\n\n  protected asset = {\n    currentFieldTraitEntryMapping: <any>undefined,\n    currentPrimary: <any>undefined,\n    fieldTraitEntryMapping: <any>undefined,\n    fieldCore: <CoreConfig>undefined,\n    field: <FieldInterface>undefined,\n    scheme: <EntitySchemeSectionInterface>undefined,\n    storage: <any>undefined,\n  };\n\n  public ui = {\n    name: <InputConfig>undefined,\n\n    makePrimary: <SwitchConfig>undefined,\n\n    showName: <SwitchConfig>undefined,\n    showNameCore: <CoreConfig>undefined,\n    profileRequired: <SwitchConfig>undefined,\n  };\n\n\n  @HostListener( 'document:keydown.escape', [ '$event' ] ) onEscapeHandler( event: KeyboardEvent ){\n    console.log( 'esc', event );\n    this.onFormClose();\n  }\n\n\n  constructor(\n    public el: ElementRef,\n    public dialog: MatDialogRef<PopEntitySchemeFieldSettingComponent>,\n    protected _domRepo: PopDomService,\n    protected _fieldRepo: PopFieldEditorService,\n    protected _utilFieldRepo: PopEntityUtilFieldService,\n  ){\n    super();\n\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n\n        await this._setInitialConfig();\n        this.template.attach( 'container' );\n\n\n        this._templateRender();\n\n\n        return resolve( true );\n      } );\n    };\n\n\n  }\n\n\n  onFormClose(){\n    if( IsObject( this.dialog ) ){\n      this.dialog.close( this.core.entity );\n    }\n  }\n\n\n  onOutsideCLick(){\n    console.log( 'onOutsideCLick' );\n    // if( IsObject( this.dialog ) ){\n    //   this.dialog.close(this.config);\n    // }\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  private _setInitialConfig(): Promise<boolean>{\n    return new Promise( async( resolve ) => {\n\n      this.asset.fieldCore = await PopEntity.getCoreConfig( 'field', this.config.asset_id );\n      this.asset.field = <FieldInterface>this.asset.fieldCore.entity;\n      this.asset.scheme = <EntitySchemeSectionInterface>this.core.entity;\n      // this.asset.scheme.traits = this.srv.field.getFieldTraits( this.asset.field.fieldgroup.name );\n      this.dom.state.isMultipleValues = +this.asset.field.multiple === 1;\n      await this.srv.field.register( this.asset.fieldCore, this.dom.repo, this.asset.scheme );\n      this.ui.showName = StorageGetter( this.dom.repo, 'ui.customSetting.show_name.inputs.config'.split( '.' ), null );\n      this.ui.showNameCore = StorageGetter( this.dom.repo, 'ui.customSetting.show_name.inputs.core'.split( '.' ), null );\n\n      this.srv.utilField.clearCustomFieldCache( +this.core.entity.id );\n\n\n      this.ui.name = new InputConfig( {\n        name: 'label',\n        label: 'Name',\n        value: this.config.asset.label,\n        readonly: true,\n        facade: true,\n        patch: {\n          field: 'label',\n          path: ''\n        }\n      } );\n\n      if( 'make_primary' in this.asset.field.setting ){\n        const primary = this.srv.field.getSchemePrimary( this.asset.scheme );\n        const fieldGroupName = StorageGetter( this.asset.field, [ 'fieldgroup', 'name' ] );\n        const isPrimary = +primary[ fieldGroupName ] === +this.asset.field.id;\n        this.asset.currentPrimary = IsNumber( primary[ fieldGroupName ] ) ? +primary[ fieldGroupName ] : null;\n        this.asset.currentFieldTraitEntryMapping = this.srv.field.getSchemeFieldSection( this.asset.scheme, +this.asset.field.id, 'trait_entry' );\n        this.asset.storage = this.srv.field.getSchemeFieldSetting( this.asset.scheme, +this.asset.field.id );\n        // console.log( 'currentPrimary', this.asset.currentPrimary );\n        // console.log( 'currentFieldEntityMapping', this.asset.currentFieldTraitEntryMapping );\n\n\n        this.asset.fieldTraitEntryMapping = {};\n        if( IsArray( this.asset.field.trait, true ) ){\n          this.asset.field.trait.map( ( trait ) => {\n            this.asset.fieldTraitEntryMapping[ trait.name ] = this.asset.field.entries[ 0 ].id;\n          } );\n        }\n        // console.log( 'fieldTraitEntryMapping', this.asset.fieldTraitEntryMapping );\n        if( IsObject( primary ) && IsString( fieldGroupName, true ) ){\n          this.ui.makePrimary = new SwitchConfig( {\n            label: `Primary ${this.asset.field.fieldgroup.label}`,\n            value: isPrimary,\n            disabled: isPrimary,\n            facade: true,\n            patch: {\n              field: '',\n              path: '',\n              callback: async( core: CoreConfig, event: PopBaseEventInterface ) => {\n                this.dom.setTimeout( `update-primary`, async() => {\n                  if( event.config.control.value ){\n                    primary[ fieldGroupName ] = +this.asset.field.id;\n                    this.asset.storage.entity_trait = this.asset.fieldTraitEntryMapping;\n                  }else{\n                    primary[ fieldGroupName ] = this.asset.currentPrimary;\n                    this.asset.storage.entity_trait = this.asset.currentFieldTraitEntryMapping;\n                  }\n                  await this.srv.field.updateSchemePrimaryMapping( this.asset.scheme );\n                  this._templateRender();\n                } );\n\n              }\n            }\n          } );\n        }\n      }\n      const required = <number[]>this.srv.field.getSchemeRequired( this.asset.scheme );\n      const isRequired = required.includes( +this.asset.field.id );\n      this.ui.profileRequired = new SwitchConfig( {\n        label: `Required To Save ${PopPipe.transform( 'profile', { type: 'entity', arg1: 'alias', arg2: 'singular' } )}`,\n        value: isRequired,\n        facade: true,\n        patch: {\n          field: '',\n          path: '',\n          callback: ( core: CoreConfig, event: PopBaseEventInterface ) => {\n            if( event.config.control.value ){\n              required.push( +this.asset.field.id );\n            }else{\n              required.splice( required.indexOf( +this.asset.field.id ) );\n            }\n            this.srv.field.updateSchemeRequiredMapping( this.asset.scheme );\n          }\n        }\n      } );\n\n      return resolve( true );\n    } );\n\n  }\n\n\n  /**\n   * Helper function that renders the list of dynamic components\n   *\n   */\n  private _templateRender(){\n    this.template.render( [ {\n      type: PopEntityFieldSettingsComponent,\n      inputs: {\n        core: this.asset.fieldCore,\n        field: this.asset.field,\n        scheme: this.asset.scheme\n      }\n    } ], [], true );\n  }\n\n}\n","import {Injectable, OnDestroy} from '@angular/core';\nimport {CdkDrag, CdkDragDrop, moveItemInArray, transferArrayItem} from '@angular/cdk/drag-drop';\nimport {MatDialog} from '@angular/material/dialog';\n\nimport {PopDomService} from '../../../services/pop-dom.service';\nimport {PopTabMenuService} from '../../base/pop-tab-menu/pop-tab-menu.service';\nimport {TabConfig} from '../../base/pop-tab-menu/tab-menu.model';\nimport {CheckboxConfig} from '../../base/pop-field-item/pop-checkbox/checkbox-config.model';\n\nimport {PopExtendService} from '../../../services/pop-extend.service';\nimport {\n  CoreConfig,\n  Dictionary,\n  FieldInterface,\n  KeyMap,\n  PopBusiness,\n  PopLog,\n  PopRequest,\n  ServiceInjector\n} from '../../../pop-common.model';\nimport {\n  ArrayKeyBy, ArrayOnlyUnique,\n  CleanObject,\n  DeepCopy,\n  DynamicSort,\n  IsArray, IsArrayThrowError,\n  IsDefined,\n  IsObject,\n  IsObjectThrowError,\n  IsString, JsonCopy,\n  PopUid,\n  StorageGetter, StorageSetter\n} from '../../../pop-common-utility';\nimport {EntitySchemeSectionConfig, EntitySchemeSectionInterface} from './pop-entity-scheme.model';\nimport {forkJoin, Subject} from 'rxjs';\nimport {ParseModelValue} from '../pop-entity-utility';\nimport {PopEntitySchemeFieldSettingComponent} from './pop-entity-scheme-field-setting/pop-entity-scheme-field-setting.component';\nimport {PopEntityActionService} from '../services/pop-entity-action.service';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PopEntitySchemeService extends PopExtendService implements OnDestroy {\n  public name = 'PopEntitySchemeService';\n\n  protected srv: {\n    action: PopEntityActionService,\n    dialog: MatDialog,\n    tab: PopTabMenuService,\n  };\n\n  public ui = {\n    refresh: new Subject<string>(),\n    attachedMap: {}, // the map of assets that are already attached to a section of the scheme\n    assetPool: <Dictionary<any>>{},\n    assignableConfigs: {}, // a collection map of checkbox configs that are used to move an asset into the attaching state\n    primary: <Dictionary<number>>{},\n    primaryIds: <number[]>[],\n    sections_keys: [],\n    sections: <any[]>undefined\n  };\n\n  protected asset = {\n    attachingSet: {}, // the map of assets that are in a state of being attached\n    assetMap: {\n      field: <Map<number, FieldInterface>>new Map<number, FieldInterface>(),\n      component: <Map<number, any>>new Map<number, any>(),\n    },// the actually DataObject that an asset represents\n    core: <CoreConfig>undefined,\n    tab: <TabConfig>undefined,\n  };\n\n\n  private _setServiceContainer() {\n    this.srv = {\n      action: ServiceInjector.get(PopEntityActionService),\n      dialog: ServiceInjector.get(MatDialog),\n      tab: this.tabRepo\n    };\n    delete this.tabRepo;\n  }\n\n\n  constructor( // This service is unique to every component, provided in the PopEntityTabComponent\n    private tabRepo: PopTabMenuService,\n  ) {\n    super();\n    this._setServiceContainer();\n    PopLog.init(this.name, `created:${this.id}`);\n  }\n\n\n  /**\n   * This fx takes the initial data and configures it to the expected structure and sets up all the ancillary assets needed\n   * @param core\n   * @param tab\n   */\n  init(core: CoreConfig, tab: TabConfig): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      this.asset.core = IsObjectThrowError(core, true, `${this.name}:core`) ? <CoreConfig>core : null;\n      this.asset.tab = IsObjectThrowError(tab, true, `${this.name}:init: - tab`) ? <TabConfig>tab : <TabConfig>{};\n      // this.asset.attach = { fields: {}, components: {} };\n      // let value;\n\n      this.ui.sections_keys = [];\n\n      if (!(IsObject(core.entity.mapping))) {\n        core.entity.mapping = <Dictionary<any>>{};\n      }\n      if (!(IsObject(core.entity.mapping.field))) {\n        core.entity.mapping.field = <Dictionary<any>>{};\n      }\n      if (!(IsObject(core.entity.mapping.primary))) {\n        core.entity.mapping.primary = <Dictionary<boolean>>{};\n      }\n      if (!(IsArray(core.entity.mapping.required))) {\n        core.entity.mapping.required = [];\n      } else {\n        core.entity.mapping.required = ArrayOnlyUnique(core.entity.mapping.required);\n      }\n      // if( !( IsObject( core.entity.mapping.field ) ) ){\n      //   core.entity.mapping.field = <KeyMap<any>>{};\n      // }\n\n      // console.log('orig scheme', core.entity.name, core.entity.mapping);\n\n      this.ui.primary = StorageGetter(core, ['entity', 'mapping', 'primary'], {});\n      this.ui.primaryIds = Object.values(this.ui.primary).map((i => +i)).sort();\n\n\n      const fields = ArrayKeyBy(StorageGetter(this.asset.core, 'resource.custom_fields.data_values'.split('.'), []), 'id');\n      Object.keys(fields).map((fieldId) => {\n        const field = fields[fieldId];\n        field.primary = this.ui.primaryIds.includes(+fieldId);\n      });\n\n      const components = ArrayKeyBy(StorageGetter(this.asset.core, 'resource.custom_components.data_values'.split('.'), []), 'id');\n      Object.keys(components).map((componentId) => {\n        components[componentId].primary = false;\n      });\n\n      this.ui.assetPool = {\n        field: fields,\n        component: components\n      };\n\n      PopLog.init(this.name, `ui.assetPool`, this.ui.assetPool);\n\n      Object.keys(this.ui.assetPool).map((assetType) => {\n        this._ensureAssetTypeContainers(assetType);\n        Object.keys(this.ui.assetPool[assetType]).map((assetId) => {\n          this.asset.assetMap[assetType].set(+assetId, CleanObject(this.ui.assetPool[assetType][assetId]));\n          this.ui.assetPool[assetType][assetId].compact = typeof this.ui.assetPool[assetType][assetId].compact !== 'undefined' ? +this.ui.assetPool[assetType][assetId].compact : 1;\n        });\n      });\n\n      const defaultSections = [\n        {\n          id: 0,\n          name: ``,\n          business_id: PopBusiness.id,\n          scheme_id: +core.entity.id,\n          sort_order: 0,\n          container: true,\n          children: [],\n          mapping: {},\n          modified: true\n        },\n        {\n          id: 0,\n          name: ``,\n          business_id: PopBusiness.id,\n          scheme_id: +core.entity.id,\n          sort_order: 1,\n          container: true,\n          children: [],\n          mapping: {},\n          modified: true\n        },\n        {\n          id: 0,\n          name: ``,\n          business_id: PopBusiness.id,\n          scheme_id: +core.entity.id,\n          sort_order: 2,\n          container: true,\n          children: [],\n          mapping: {},\n          modified: true\n        }\n      ];\n\n\n      this.ui.sections = IsArrayThrowError(core.entity.children, false, `Entity did not contain children`) ? core.entity.children.slice(0, 3) : []; // turned off copy for now since other components are looking at the _server_sections for looping\n\n      if (!(IsArray(this.ui.sections, true))) this.ui.sections = defaultSections;\n\n\n      const remainingFlex = 4 - this.ui.sections.length;\n      this.ui.sections.map((section, index) => {\n        section = this._transformSection(section, index);\n        // const tableAssets = this._getSectionTableFieldsAssets( section );\n        // section.children = [ ...tableAssets, ...section.children ];\n        section.predicate = (item: CdkDrag<number>) => {\n          const data = <any>item.data;\n          return data.compact;\n        };\n        this.ui.sections_keys.push(section.position);\n      });\n      if (this.ui.sections && this.ui.sections.length > 1) {\n        const lastSection = this.ui.sections[this.ui.sections.length - 1];\n        lastSection.predicate = (item: CdkDrag<number>) => {\n          return true;\n        };\n        if (remainingFlex) lastSection.flex += remainingFlex;\n      }\n\n      Object.keys(this.ui.assetPool).map((assetType) => {\n        let value;\n        Object.keys(this.ui.assetPool[assetType]).map((assetId) => {\n          value = this.ui.attachedMap[assetType].has(+assetId);\n          this.ui.assignableConfigs[assetType][assetId] = new CheckboxConfig({\n            bubble: true,\n            value: value,\n            disabled: value,\n          });\n        });\n      });\n\n      const requests = [];\n      this.ui.sections.map((section) => {\n        requests.push(this._resolveSectionId(section).then((id: number) => {\n          section.id = id;\n        }));\n      });\n      await forkJoin(requests);\n      let primaryIds = JsonCopy(this.ui.primaryIds);\n      this.ui.sections.sort(DynamicSort('sort_order'));\n      primaryIds = this._checkForTraits(core, this.ui.sections, primaryIds);\n      if (IsArray(this.ui.sections, true) && primaryIds.length) {\n        primaryIds.map((fieldId: number) => {\n          this.onAssetAttaching('field', +fieldId, true);\n        });\n        this.ui.sections[0].children = await this.onAttachingAssetsToPosition(this.ui.sections[0]);\n      }\n      return resolve(true);\n    });\n\n  }\n\n\n  /**\n   * This fx is used to remove an asset/child from the scheme\n   * @param position\n   * @param asset\n   */\n  onRemoveChildFromLayout(position: number, child: EntitySchemeSectionInterface): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      const positionIndex = position - 1;\n      if (this.asset.core.entity.children[positionIndex]) {\n        const container = this.ui.sections[positionIndex];\n        if (child && typeof child.sort_order === 'number') {\n          this.srv.tab.showAsLoading(true);\n          await this._removeSection(child);\n          container.children = container.children.filter((section: EntitySchemeSectionInterface) => {\n            return section.id !== child.id;\n          });\n          // transferArrayItem( container.children, [], child.sort_order, 0 );\n          container.mapping.sort_order = [];\n          container.children.map((item, index) => {\n            if (item.id) container.mapping.sort_order.push(item.id);\n            item.sort_order = index;\n          });\n          this._setChildAsAttachable(child);\n          this.srv.tab.showAsLoading(false);\n          // this.onTriggerUpdate(1000);\n          return resolve(true);\n        }\n      } else {\n        return resolve(true);\n      }\n\n    });\n  }\n\n\n  /**\n   * A user can dragSort aassets from one column to another in the scheme layout\n   * @param event\n   */\n  onAssetSortDrop(event: CdkDragDrop<string[]>) {\n    // console.log( 'onAssetSortDrop', event );\n    let data;\n    let prev;\n    if (event.previousContainer === event.container) {\n      data = this._getEventContainerData(event.container);\n      if (+event.currentIndex < +data.startIndex) event.currentIndex = +data.startIndex;\n      moveItemInArray(event.container.data, event.previousIndex, event.currentIndex);\n      this._storePositionSortOrder(this._getSectionByPosition(data.position));\n    } else {\n      data = this._getEventContainerData(event.container);\n      prev = this._getEventContainerData(event.previousContainer);\n      if (+event.currentIndex < +data.startIndex) event.currentIndex = +data.startIndex;\n      transferArrayItem(event.previousContainer.data, event.container.data, event.previousIndex, event.currentIndex);\n      this._storePositionSortOrder(this._getSectionByPosition(prev.position));\n      this._storePositionSortOrder(this._getSectionByPosition(data.position));\n    }\n    const droppedItem = event.item.data;\n    let section = <any>event.container.data.find((i: any) => {\n      return +i.id === +droppedItem.id;\n    });\n    if (IsObject(section, ['id'])) {\n      section = <EntitySchemeSectionInterface>section;\n      if (+data.id !== +section.scheme_id) {\n        section.scheme_id = +data.id;\n        PopRequest.doPatch(`profile-schemes/${section.id}`, {scheme_id: +data.id}, 1, false).subscribe(() => true);\n      }\n    }\n  }\n\n\n  /**\n   * This fx used to register that a user has check an asset in the asset poll intending to attach it to a column in the scheme\n   * @param asset_type\n   * @param itemId\n   * @param value\n   */\n  onAssetAttaching(asset_type, itemId: number, value: boolean) {\n    if (this.asset.attachingSet[asset_type]) {\n      if (value) {\n        this.asset.attachingSet[asset_type].add(+itemId);\n      } else {\n        this.asset.attachingSet[asset_type].delete(+itemId);\n      }\n    }\n  }\n\n\n  /**\n   * This fx is used to attach assets to a column in the scheme\n   * The user will select which assets from a pool and then click a button representing the column where the assets should be pushed into\n   * @param section\n   */\n  onAttachingAssetsToPosition(section: EntitySchemeSectionInterface): Promise<EntitySchemeSectionConfig[]> {\n    return new Promise<EntitySchemeSectionConfig[]>(async (resolve) => {\n      section.id = await this._resolveSectionId(section);\n      if (section.id) {\n        const items = this._getAssetsToAttach();\n        let child, asset;\n        let children = [];\n        const requests = [];\n        if (IsObject(items, true)) {\n          Object.keys(items).map((assetType: string) => {\n            Object.keys(items[assetType]).map((itemId) => {\n              asset = this.asset.assetMap[assetType].get(+itemId);\n              child = <EntitySchemeSectionInterface>{\n                id: null,\n                name: asset.name,\n                scheme_id: +section.id,\n                asset_type: assetType,\n                asset_id: +itemId,\n                asset: asset,\n                compact: assetType === 'component' ? asset.compact ? 1 : 0 : 1,\n                position: section.position,\n              };\n              this._setChildAsAttached(child);\n              children.push(child);\n              requests.push(this._resolveSectionId(child).then((id) => {\n                child.id = id;\n              }));\n            });\n          });\n        }\n        forkJoin(requests).subscribe(() => {\n          const tmp = IsArray(section.children, true) ? section.children : [];\n          section.mapping.sort_order = [];\n          children = [...tmp, ...children];\n          children.map((x, i) => {\n            if (x.id) section.mapping.sort_order.push(x.id);\n            x.sort_order = i;\n          });\n          // this.onTriggerUpdate();\n          this._resetAssetAttachingData();\n          return resolve(children);\n        });\n\n      } else {\n        return resolve(null);\n      }\n    });\n  }\n\n\n  /**\n   * This fx will take an array of sections an update any of the modified sections\n   * @param sections\n   */\n  onUpdate(sections: EntitySchemeSectionInterface[]): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      if (IsArray(sections, true)) {\n        await this._update(sections, true);\n        return resolve(true);\n      } else {\n        return resolve(false);\n      }\n    });\n  }\n\n\n  /**\n   * This fx is used to trigger an api call to save the current state of the scheme\n   * @param delay\n   */\n  onTriggerUpdate(delay = 500) {\n    this.dom.setTimeout('update-api', () => {\n      // this._update();\n    }, delay);\n  }\n\n\n  /**   * A user can click on an edit button an edit the config settings of an asset\n\n   * @param asset\n   */\n  onEditAsset(asset): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      if (!this.dom.state.blockModal) {\n        this.dom.state.blockModal = true;\n        let componentType = null;\n        // console.log('asset', asset);\n        if (asset.asset_type === 'field') {\n          componentType = PopEntitySchemeFieldSettingComponent;\n        } else if (asset.asset_type === 'component') {\n          // console.log('here');\n        }\n\n\n        if (componentType) {\n          const dialogRef = this.srv.dialog.open(PopEntitySchemeFieldSettingComponent, {\n            width: `900px`,\n            height: `1080px`,\n            panelClass: 'sw-mar-sm',\n            disableClose: true\n          });\n          let component = <any>dialogRef.componentInstance;\n          component.core = this.asset.core;\n          component.config = asset;\n\n          this.dom.setSubscriber('asset-modal', dialogRef.beforeClosed().subscribe((scheme) => {\n            if (scheme) {\n              this.init(this.asset.core, this.asset.tab);\n              component = null;\n            } else {\n              component = null;\n            }\n            this.dom.state.blockModal = false;\n            return resolve(true);\n          }));\n        } else {\n          this.dom.state.blockModal = false;\n          return resolve(false);\n        }\n      } else {\n        this.dom.state.blockModal = false;\n        return resolve(false);\n      }\n    });\n  }\n\n\n  getFieldMapping(fieldId: number) {\n    const storage = this.asset.core.entity.mapping.field;\n    return StorageSetter(storage, [`field_${fieldId}`]);\n  }\n\n\n  ngOnDestroy() {\n    PopLog.warn(this.name, `destroyed:${this.id}`);\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  /**\n   * There a by default 3 columns, 1,2,3, this fx allows to find the section that represent one of those columns with\n   * @param position number 1,2,3\n   * @private\n   */\n  private _getSectionByPosition(position: number): EntitySchemeSectionInterface {\n    let section = <EntitySchemeSectionInterface>{};\n    // console.log( 'position', position );\n    if (+position) {\n      const sectionIndex = position - 1;\n      // console.log( 'sectionIndex', sectionIndex, this.ui.sections );\n      if (sectionIndex in this.ui.sections) {\n        section = this.ui.sections[sectionIndex];\n      }\n    }\n    return section;\n  }\n\n\n  /**\n   * This fx is used to map the the sort_order of all a section's children\n   * @param section\n   * @private\n   */\n  private _storePositionSortOrder(section: EntitySchemeSectionInterface) {\n    // console.log( '_storePositionSortOrder', section );\n    if (IsObject(section, ['id', 'children'])) {\n      section.mapping.sort_order = [];\n      if (IsArray(section.children)) {\n        section.children.map((item, index) => {\n          // console.log('item', item);\n          if (item.id) section.mapping.sort_order.push(item.id);\n          item.sort_order = index;\n        });\n        const patch = {\n          mapping: {\n            sort_order: section.mapping.sort_order\n          }\n        };\n        PopRequest.doPatch(`profile-schemes/${section.id}`, patch, 1, false).subscribe(() => true);\n      }\n    }\n\n  }\n\n\n  /**\n   * This fx will extract the data attributes stored on a html element\n   * @param container\n   * @private\n   */\n  private _getEventContainerData(container: any): Dictionary<any> {\n    const data = DeepCopy(StorageGetter(container, 'element.nativeElement.dataset'.split('.'), {}));\n    if (IsObject(data, true)) {\n      Object.keys(data).map((key) => {\n        data[key] = ParseModelValue(data[key]);\n      });\n    }\n    return data;\n  }\n\n\n  /**\n   * Ensure that a section has an id that is stored int the api database\n   * @param section\n   */\n  private _resolveSectionId(section: EntitySchemeSectionInterface): Promise<number> {\n    return new Promise<number>(async (resolve) => {\n      if (IsObject(section, true)) {\n        if (+section.id) {\n          return resolve(+section.id);\n        } else {\n          const data = this._extractSectionData(section);\n          this.dom.setSubscriber(PopUid(), PopRequest.doPost(`profile-schemes`, data, 1, false).subscribe((res: any) => {\n            if (res.data) res = res.data;\n            return resolve(+res.id);\n          }, () => {\n            return resolve(0);\n          }));\n        }\n      } else {\n        return resolve(0);\n      }\n    });\n\n  }\n\n\n  /**\n   * This fx will make the api call to remove a section in the api database\n   * @param section\n   */\n  private _removeSection(section: EntitySchemeSectionInterface): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      if (IsObject(section, ['id'])) {\n        this.dom.setSubscriber(PopUid(), PopRequest.doDelete(`profile-schemes/${section.id}`, {}, 1, false).subscribe((res: any) => {\n          if (res.data) res = res.data;\n          // console.log( '_removeSection', res );\n          return resolve(true);\n        }, () => {\n          return resolve(false);\n        }));\n      } else {\n        return resolve(true);\n      }\n    });\n  }\n\n\n  /**\n   * This fx is used to make api call to the backend to save the scheme\n   * @param store\n   * @private\n   */\n  private _update(sections: EntitySchemeSectionInterface[], store = true): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      if (this.asset.core) {\n        const modified = this._extractModifiedSections(sections, []);\n        if (store && IsArray(modified, true)) {\n          const request = [];\n          modified.map((section: EntitySchemeSectionInterface) => {\n            if (+section.id) {\n              request.push(PopRequest.doPatch(`profile-schemes/${section.id}`, section, 1, false));\n            } else {\n              request.push(PopRequest.doPost(`profile-schemes`, section, 1, false));\n            }\n          });\n          await forkJoin(request);\n          return resolve(true);\n        }\n      } else {\n        return resolve(true);\n      }\n\n    });\n\n  }\n\n\n  /**\n   * This fx is used to pull out all the scheme sections that need to be saved\n   * @param sections\n   * @private\n   */\n  private _extractModifiedSections(sections: EntitySchemeSectionInterface[], extracted = []): any[] {\n    if (IsArray(sections, true)) {\n      sections.map((section, index) => {\n        section.sort_order = index;\n        if (section.modified) {\n          extracted.push(this._extractSectionData(section));\n          section.modified = false;\n        }\n        if (IsArray(section.children, true)) {\n          section.children.map((child, childIndex) => {\n            child.sort_order = childIndex;\n            if (child.modified) {\n              extracted.push(this._extractSectionData(child));\n              child.modified = false;\n            }\n            if (IsArray(child.children, true)) {\n              extracted = this._extractModifiedSections(child.children, extracted);\n            }\n          });\n        }\n      });\n    }\n    return extracted;\n  }\n\n\n  /**\n   * This fx extracts the data off a section that should be store in the api database\n   * @param section\n   * @private\n   */\n  private _extractSectionData(section: EntitySchemeSectionInterface) {\n    return CleanObject({\n      id: section.id,\n      entity_id: 111,\n      name: section.name ? section.name : null,\n      asset_type: section.asset_type ? section.asset_type : null,\n      asset_id: section.asset_type ? section.asset_id : null,\n      scheme_id: section.scheme_id ? section.scheme_id : null,\n      mapping: IsObject(section.mapping) ? section.mapping : {children: {}},\n      sort_order: IsDefined(section.sort_order) ? section.sort_order : 99\n    });\n  }\n\n\n  /**\n   * Determine what assets have been set from the asset pool\n   * This fx is called when a user click on a <column button> intending to attach assets into a specific column of the scheme\n   */\n  _getAssetsToAttach(): Dictionary<KeyMap<any>> {\n    const attaching = {};\n    Object.keys(this.asset.attachingSet).map((assetTypeKey) => {\n      this.asset.attachingSet[assetTypeKey].forEach((assetId) => {\n        if (!attaching[assetTypeKey]) attaching[assetTypeKey] = {};\n        const assetable = this.asset.assetMap[assetTypeKey].get(assetId);\n        if (assetTypeKey === 'component') {\n          attaching[assetTypeKey][assetId] = {compact: assetable.compact ? 1 : 0};\n        } else {\n          attaching[assetTypeKey][assetId] = {compact: 1};\n        }\n      });\n    });\n    return attaching;\n  }\n\n\n  /**\n   * Retrieve the default columns tht exist on an entity table\n   * @param section\n   */\n  private _getSectionTableFieldsAssets(section) {\n    const tableAssets = [];\n    if (this.asset.core) {\n      const Field = StorageGetter(this.asset.core, 'repo.model.field'.split('.'));\n      if (IsObject(Field, true)) {\n        Object.values(Field).map((field: FieldInterface) => {\n          if (!field.ancillary && field.position === section.position) {\n            tableAssets.push(new EntitySchemeSectionConfig({\n              id: 0,\n              name: field.model.label,\n              asset_type: 'table',\n              asset_id: 0,\n              asset: field,\n              scheme_id: +section.id,\n              sort_order: field.sort,\n              position: section.position,\n            }));\n          }\n        });\n      }\n    }\n\n    section.startIndex = tableAssets.length;\n    return tableAssets.sort((a, b) => {\n      if (a.sort < b.sort) return -1;\n      if (a.sort > b.sort) return 1;\n      return 0;\n    });\n  }\n\n\n  /**\n   * Convert child sections to the expected structure\n   * @param child\n   * @private\n   */\n  private _transformSection(section: EntitySchemeSectionInterface, index: number): EntitySchemeSectionInterface {\n    section = <EntitySchemeSectionInterface>CleanObject(section, {blacklist: ['flattened']}); // first level are only containers\n    section.container = true;\n    section.position = index + 1;\n    section.flex = 1;\n    section.sort_order = index;\n    if (!(IsObject(section.mapping))) section.mapping = {};\n    if (!(IsArray(section.mapping.sort_order))) section.mapping.sort_order = [];\n    if (!(IsArray(section.children))) section.children = [];\n    section.children = section.children.filter((child: EntitySchemeSectionInterface) => { // sub level maybe an actual asset or a container\n      if (String(String(child.asset_type).toLowerCase()).includes('field')) {\n        child.asset_type = 'field';\n      }else if (String(String(child.asset_type).toLowerCase()).includes('component')) {\n        child.asset_type = 'component';\n      } else  if (String(String(child.asset_type).toLowerCase()).includes('widget')) {\n        child.asset_type = 'widget';\n      }\n      // console.log('type', child.asset_type);\n      if (child.asset_type && child.asset_type != 'table') {\n        if (+child.asset_id) {\n          return this.asset.assetMap[child.asset_type].has(child.asset_id);\n        } else {\n          return true;\n        }\n      }\n\n      return child.asset_type != 'table';\n    });\n\n    section.children.map((child: EntitySchemeSectionInterface) => {\n      child = this._transformChild(child);\n      child.sort_order = section.mapping.sort_order.includes(child.id) ? +section.mapping.sort_order.indexOf(child.id) : 99;\n      if (IsObject(child.asset, true)) {\n        if (IsString(child.asset_type, true)) {\n          child.compact = <boolean>(IsObject(child.asset, ['compact']) && IsDefined(child.asset.compact) ? child.asset.compact : false);\n          this._ensureAssetTypeContainers(child.asset_type);\n          this.ui.attachedMap[child.asset_type].set(+child.asset_id, section.position);\n        } else {\n          this._transformSection(child, index);\n        }\n      }\n    });\n\n    section.children.sort(DynamicSort('sort_order'));\n\n\n    return section;\n  }\n\n\n  /**\n   * Convert child of a section to the expected structure\n   * @param child\n   */\n\n  private _transformChild(child: EntitySchemeSectionInterface): EntitySchemeSectionInterface {\n    child = <EntitySchemeSectionInterface>CleanObject(child);\n    if (!(IsObject(child.mapping))) child.mapping = {};\n    if (IsDefined(child.asset_id) && +child.asset_id) {\n      delete child.children;\n      if (String(String(child.asset_type).toLowerCase()).includes('field')) child.asset_type = 'field';\n      if (child.asset_type === 'field' && this.asset.assetMap.field.has(child.asset_id)) {\n        child.asset = this.asset.assetMap.field.get(child.asset_id);\n        child.name = child.asset.name;\n        child.compact = true;\n      } else if (child.asset_type === 'component' && this.asset.assetMap.component.has(child.asset_id)) {\n        child.asset_type = 'component';\n        child.asset = this.asset.assetMap.component.get(child.asset_id);\n        child.name = child.asset.name;\n      }\n      child.container = false;\n    } else {\n      child.container = true;\n    }\n    return child;\n  }\n\n\n  /**\n   * This fx is used ensures that an asset type has the all ancillary assets needed\n   * @param assetType\n   */\n  private _ensureAssetTypeContainers(assetType: string) {\n    if (!this.asset.attachingSet[assetType]) this.asset.attachingSet[assetType] = new Set();\n    if (!this.asset.assetMap[assetType]) this.asset.assetMap[assetType] = new Map();\n    if (!this.ui.attachedMap[assetType]) this.ui.attachedMap[assetType] = new Map();\n    if (!this.ui.assignableConfigs[assetType]) this.ui.assignableConfigs[assetType] = {};\n  }\n\n\n  /**\n   * Clear out all the attaching set data\n   */\n  private _resetAssetAttachingData() {\n    Object.keys(this.asset.attachingSet).map((key) => {\n      this.asset.attachingSet[key].clear();\n    });\n  }\n\n\n  /**\n   * Refresh the core entity\n   * @param dom\n   */\n  private _refreshEntity(dom: PopDomService = null) {\n    this.asset.core.channel.emit({\n      source: this.name,\n      target: 'PopEntityTabComponent',\n      type: 'component',\n      name: 'start-refresh'\n    });\n    this.srv.tab.refreshEntity(null, dom, {}, `${this.name}:viewEntityPortal`).then((res) => {\n      this.init(this.asset.core, this.asset.tab);\n      this.dom.state.blockModal = false;\n      this.asset.core.channel.emit({\n        source: this.name,\n        target: 'PopEntityTabComponent',\n        type: 'component',\n        name: 'stop-refresh'\n      });\n    });\n  }\n\n\n  /**\n   * This fx is used to mark an asset in the asset pool as attachable\n   * @param asset\n   */\n  private _setChildAsAttachable(child: EntitySchemeSectionInterface) {\n    if (!child.container) {\n      this.ui.attachedMap[child.asset_type].delete(child.asset_id);\n      this.ui.assignableConfigs[child.asset_type][child.asset_id].control.setValue(0);\n      this.ui.assignableConfigs[child.asset_type][child.asset_id].control.enable();\n    }\n  }\n\n\n  /**\n   * This fx is used to mark an asset in as attached, setting it up to be transferred to a column in the scheme\n   * @param asset\n   */\n  private _setChildAsAttached(child: EntitySchemeSectionInterface, position: number = 1) {\n    if (!child.container) {\n      this.ui.attachedMap[child.asset_type].set(child.asset_id, position);\n      this.ui.assignableConfigs[child.asset_type][child.asset_id].control.setValue(1);\n      this.ui.assignableConfigs[child.asset_type][child.asset_id].control.disable();\n    }\n  }\n\n\n  /**\n   * This fx is used to pull out all the scheme sections that need to be saved\n   * @param sections\n   * @private\n   */\n  private _checkForTraits(core: CoreConfig, sections: EntitySchemeSectionInterface[], primaryIds = []): any[] {\n    if (IsArray(sections, true)) {\n      sections.map((section) => {\n        if (IsArray(section.children, true)) {\n          section.children.map((child) => {\n            if (child.asset_type === 'field') {\n              child.asset.required = IsArray(core.entity.mapping.required) ? core.entity.mapping.required.includes(child.asset_id) : false;\n              if (primaryIds.includes(child.asset_id)) {\n                primaryIds.splice(primaryIds.indexOf(child.asset_id), 1);\n                child.asset.primary = true;\n              } else {\n                child.asset.primary = false;\n              }\n            }\n            if (IsArray(child.children, true)) {\n              this._checkForTraits(core, child.children, primaryIds);\n            }\n          });\n        }\n      });\n    }\n    return primaryIds;\n  }\n}\n","import { Component, ElementRef, OnDestroy, OnInit } from '@angular/core';\nimport { PopEntitySchemeService } from '../pop-entity-scheme.service';\nimport { ButtonConfig } from '../../../base/pop-field-item/pop-button/button-config.model';\nimport { PopExtendComponent } from '../../../../pop-extend.component';\nimport { PopDomService } from '../../../../services/pop-dom.service';\nimport { IsArray, IsArrayThrowError, IsObject, IsObjectThrowError, ObjectContainsTagSearch, TitleCase, ToArray } from '../../../../pop-common-utility';\nimport { EntitySchemeSectionConfig, EntitySchemeSectionInterface, ProfileSchemeAssetPoolInterface } from '../pop-entity-scheme.model';\nimport { Dictionary, KeyMap, PopEntity, PopPortal, ServiceInjector } from '../../../../pop-common.model';\nimport { CheckboxConfig } from '../../../base/pop-field-item/pop-checkbox/checkbox-config.model';\nimport { PopTabMenuService } from '../../../base/pop-tab-menu/pop-tab-menu.service';\nimport { Router } from '@angular/router';\n\n\n@Component( {\n  selector: 'lib-entity-scheme-asset-pool',\n  templateUrl: './pop-entity-scheme-asset-pool.component.html',\n  styleUrls: [ './pop-entity-scheme-asset-pool.component.scss' ]\n} )\nexport class PopEntitySchemeAssetPoolComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  public name = 'PopEntitySchemeAssetPoolComponent';\n\n\n  public ui = {\n    sections: <EntitySchemeSectionInterface[]>undefined,\n    assignBtnConfigs: <ButtonConfig[]>undefined,\n    assignableConfigs: <Dictionary<KeyMap<CheckboxConfig>>>undefined,\n    assetPool: <ProfileSchemeAssetPoolInterface[]>undefined,\n    section_keys: <number[]>undefined\n  };\n\n  protected asset = {\n    primaryIds: <number[]>[]\n  };\n\n\n  protected srv = {\n    scheme: <PopEntitySchemeService>undefined,\n    tab: <PopTabMenuService>undefined,\n    router: <Router>ServiceInjector.get( Router )\n  };\n\n\n  /**\n   *\n   * @param el\n   * @param _domRepo - transfer\n   * @param _schemeRepo - transfer\n   * @param _tabRepo - transfer\n   */\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService,\n    protected _schemeRepo: PopEntitySchemeService,\n    protected _tabRepo: PopTabMenuService\n  ){\n    super();\n\n\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n        this.dom.session.searchValue = '';\n        // #1: Transfer in misc assets from the schemeRepo\n        this.dom.state.searching = false;\n\n        this.asset.primaryIds = this.srv.scheme.ui.primaryIds;\n\n        await this.dom.setWithComponentInnerHeight( 'PopEntityTabColumnComponent', this.position, 230, 600 );\n        this.dom.height.content = this.dom.height.inner - 95;\n        this._setUiAssets();\n        return resolve( true );\n      } );\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n        // #5: Reapply any onSession search that may have existed\n        this.onApplyUiSearch( this.dom.session.searchValue );\n\n        // #6: Disable the ui assign buttons for the initial view\n        this.onDisableUiAssignButtons();\n\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * The purpose of this component is to provide the user with lists of all available types that they can assign into a scheme layout\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  private _setUiAssets(){\n    this.ui.sections = this.srv.scheme.ui.sections;  // transfer sections from schemeRepo\n    this.ui.assignableConfigs = this.srv.scheme.ui.assignableConfigs;  // transfer assignableConfigs for attaching assets from pools\n    // #2: Build the config for the buttons that the user will push to assign items to a layout position\n    this.ui.assignBtnConfigs = []; // create a button for each section to assign assets from the pools with\n    this.ui.sections.map( ( section ) => {\n      this.ui.assignBtnConfigs[ section.position ] = new ButtonConfig( {\n        bubble: true,\n        event: 'assign',\n        value: 'Column ' + ( +section.position ),\n        size: 30,\n        text: 16,\n        icon: null,\n      } );\n    } );\n\n\n    // #4: Configure the asset ppol items that a user can choose from to position in the layout\n    let assetPool = IsObjectThrowError( this.srv.scheme.ui.assetPool, true, `${this.name}:configureDom: - this.srv.scheme.asset.asset_pool` ) ? JSON.parse( JSON.stringify( this.srv.scheme.ui.assetPool ) ) : {}; // transfer asset_pools from schemeRepo and mutate\n    assetPool = Object.keys( assetPool ).map( ( assetTypeKey ) => {\n      this.dom.state[ assetTypeKey ] = {\n        expanded: true,\n        visible: {}, // used with the search mechanism\n        attach: {}, // used with the search mechanism\n      };\n      return <ProfileSchemeAssetPoolInterface>{\n        name: assetTypeKey,\n        asset_type: assetTypeKey,\n        display: TitleCase( assetTypeKey ),\n        data: assetPool[ assetTypeKey ],\n        list: ToArray( assetPool[ assetTypeKey ] )\n      };\n    } );\n\n    this.ui.assetPool = IsArrayThrowError( assetPool, true, `${this.name}:configureDom: - pools` ) ? assetPool : [];\n  }\n\n\n  /**\n   * Cear the search input and reset the asset pool list\n   */\n  onUiSearchValueClear(){\n    this.dom.session.searchValue = '';\n    this.onApplyUiSearch( this.dom.session.searchValue );\n  }\n\n\n  /**\n   * Apply the search value the user entered to the asset pool list\n   * @param searchValue\n   * @param col\n   */\n  onApplyUiSearch( searchValue: string, col = '' ){\n    if( this.dom.delay.search ) clearTimeout( this.dom.delay.search );\n    this.dom.delay.search = setTimeout( () => {\n      if( searchValue.length ){\n        this.ui.assetPool.map( ( pool ) => {\n          if( IsObject( this.dom.state[ pool.name ] ) ){\n            pool.list.map( ( item ) => {\n              this.dom.state[ pool.name ].visible[ item.id ] = ObjectContainsTagSearch( {\n                id: item.id,\n                name: item.name,\n              }, searchValue ) === true;\n            } );\n          }\n        } );\n        setTimeout( () => {\n          this.dom.state.searching = true;\n        } );\n\n      }else{\n        this.ui.assetPool.map( ( pool ) => {\n\n          if( IsObject( this.dom.state[ pool.name ] ) ){\n            pool.list.map( ( item ) => {\n              this.dom.state[ pool.name ].visible[ item.id ] = 1;\n            } );\n          }\n        } );\n        this.dom.state.searching = false;\n      }\n    }, 200 );\n  }\n\n\n  /**\n   * The user can expand an asset pool type to be open or closed\n   * @param pool\n   */\n  onTogglePoolExpansion( pool ){\n    if( pool && pool.name in this.dom.state ){\n      this.dom.state[ pool.name ].expanded = !this.dom.state[ pool.name ].expanded;\n    }\n  }\n\n\n  /**\n   * This is triggered when a user selects a checkbox indicating that it will be assigned to a position of the layout\n   * @param asset_type\n   * @param itemId\n   * @param value\n   */\n  onAssetPoolItemAttaching( asset_type: string, itemId: number, value: boolean ){\n    this.srv.scheme.onAssetAttaching( asset_type, itemId, value );\n    this.onEnableUiAssignButtons();\n  }\n\n\n  /**\n   * This is triggered when a user selects a position button indicating they want the selected asset pool items moved to a position of the layout\n   * @param section\n   * @param $event\n   */\n  onSectionAttachingItems( section: EntitySchemeSectionInterface, $event ){\n    this.onDisableUiAssignButtons();\n    section.modified = true;\n    this.srv.tab.showAsLoading( true );\n    this.srv.scheme.onAttachingAssetsToPosition( section ).then( ( children: EntitySchemeSectionConfig[] ) => {\n      if( IsArray( children, true ) ){\n        section.children = children;\n        this.srv.scheme.onUpdate( [ section ] ).then( () => {\n          // console.log( 'done with add ', section );\n          this.srv.tab.showAsLoading( false );\n          this.onDisableUiAssignButtons();\n        } );\n      }else{\n        // console.log( 'update section failed', section );\n        this.srv.tab.showAsLoading( false );\n        this.onDisableUiAssignButtons();\n      }\n    } );\n  }\n\n\n  /**\n   * This is triggered every time the user selects a checkbox of an asset pool item\n   * This should determine which positions of the layout are eligible base on the set of the items selected\n   * Asset Pool items should be designated as compact or not, the last position of the layout is reserved for larger modules and compact items should not go in it\n   */\n  onEnableUiAssignButtons(){\n    if( !this.ui.section_keys ){\n      this.ui.section_keys = this.ui.sections.map( ( s, i ) => s.position );\n    }\n    if( this.dom.delay.configure_buttons ) clearTimeout( this.dom.delay.configure_buttons );\n    this.dom.delay.configure_buttons = setTimeout( () => {\n      const items = this.srv.scheme._getAssetsToAttach();\n      let notCompact;\n      const assetTypes = Object.keys( items );\n      assetTypes.some( ( assetType: string ) => {\n        notCompact = Object.keys( items[ assetType ] ).filter( ( assetID ) => {\n          if( assetType === 'component' ){\n            return !items[ assetType ][ assetID ].compact;\n          }\n          return false;\n        } ).length;\n        if( notCompact ) return true;\n      } );\n      const positionKeys = this.ui.section_keys.slice();\n      if( notCompact ){\n        let lastPositionKey;\n        if( positionKeys.length ){\n          lastPositionKey = positionKeys.pop();\n        }\n        positionKeys.map( ( positionKey ) => {\n          this.ui.assignBtnConfigs[ positionKey ].disabled = true;\n        } );\n        if( lastPositionKey ) this.ui.assignBtnConfigs[ lastPositionKey ].disabled = false;\n      }else{\n        positionKeys.map( ( positionKey ) => {\n          this.ui.assignBtnConfigs[ positionKey ].disabled = false;\n          this.ui.assignBtnConfigs[ positionKey ].color = 'accent';\n        } );\n      }\n    }, 100 );\n  }\n\n\n  /**\n   * This will disable or clear the position assign buttons\n   */\n  onDisableUiAssignButtons(){\n    this.core.entity.children.map( ( section ) => {\n      if( section.position ){\n        this.ui.assignBtnConfigs[ section.position ].disabled = true;\n        this.ui.assignBtnConfigs[ section.position ].color = 'default';\n      }\n    } );\n  }\n\n\n  onAssetLink( type: string, id: number ){\n    if( type === 'field' ){\n      this.srv.router.navigateByUrl( `/cis/fields/${id}` ).catch( ( e ) => {\n        console.log( 'e', e );\n      } );\n    }\n  }\n\n\n  /**\n   * A user can click on an item in the asset pool to view a modal of that specific entityId item\n   * @param internal_namea\n   * @param id\n   */\n  onViewEntityPortal( internal_name: string, id: number ){\n    if( internal_name === 'field' ){\n      this.core.channel.emit( { source: this.name, target: 'PopEntityTabColumnComponent', type: 'component', name: 'scrollTo' } );\n      PopPortal.view( internal_name, id ).then( () => {\n        this.srv.scheme.ui.refresh.next( 'reload' );\n      } );\n    }\n  }\n\n\n  /**\n   * Clean up the dom of this component\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n}\n","import { Component, ElementRef, OnDestroy, OnInit, ViewEncapsulation } from '@angular/core';\nimport { PopEntitySchemeService } from '../pop-entity-scheme.service';\nimport { PopExtendComponent } from '../../../../pop-extend.component';\nimport { PopDomService } from '../../../../services/pop-dom.service';\n\n\n// https://medium.com/codetobe/learn-how-to-drag-drop-items-in-angular-7-20395c262ab0\n\n@Component( {\n  selector: 'lib-entity-scheme-asset-layout',\n  templateUrl: './pop-entity-scheme-asset-layout.component.html',\n  styleUrls: [ './pop-entity-scheme-asset-layout.component.scss' ],\n  encapsulation: ViewEncapsulation.None\n} )\nexport class PopEntitySchemeAssetLayoutComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  public name = 'PopEntitySchemeAssetLayoutComponent';\n\n\n  protected srv = {\n    scheme: <PopEntitySchemeService>undefined\n  };\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService,\n    protected _schemeRepo: PopEntitySchemeService,\n  ){\n    super();\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n        await this.dom.setWithComponentInnerHeight( 'PopEntityTabColumnComponent', this.position, 210, 600 );\n        this.ui.sections = this.srv.scheme.ui.sections;\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * Setup this component\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * Clean up the dom of this component\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n}\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { PopExtendComponent } from '../../../../pop-extend.component';\nimport { PopDomService } from '../../../../services/pop-dom.service';\nimport { PopEntitySchemeService } from '../pop-entity-scheme.service';\nimport { ButtonConfig } from '../../../base/pop-field-item/pop-button/button-config.model';\nimport { PopTabMenuService } from '../../../base/pop-tab-menu/pop-tab-menu.service';\nimport { PopBaseEventInterface } from '../../../../pop-common.model';\nimport { IsValidFieldPatchEvent } from '../../pop-entity-utility';\n\n\n@Component( {\n  selector: 'lib-entity-scheme-details',\n  templateUrl: './pop-entity-scheme-details.component.html',\n  styleUrls: [ './pop-entity-scheme-details.component.scss' ]\n} )\nexport class PopEntitySchemeDetailsComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  public name = 'PopEntitySchemeDetailsComponent';\n\n\n  protected srv = {\n    scheme: <PopEntitySchemeService>undefined,\n    tab: <PopTabMenuService>undefined\n  };\n\n  public ui = {\n  };\n\n\n  constructor(\n    protected _domRepo: PopDomService,\n    protected _tabRepo: PopTabMenuService,\n    protected _schemeRepo: PopEntitySchemeService,\n  ){\n    super();\n  }\n\n\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  onBubbleEvent( event: PopBaseEventInterface ){\n    this.log.event( `onBubbleEvent`, event );\n    if( IsValidFieldPatchEvent( this.core, event ) || event.type === 'context_menu' ){\n      this.log.info( `IsValidFieldPatchEvent`, event );\n      this.events.emit( event );\n    }\n  }\n\n\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n}\n","import { Component, ElementRef, OnDestroy, OnInit } from '@angular/core';\nimport { TabConfig } from '../../base/pop-tab-menu/tab-menu.model';\nimport { PopEntitySchemeService } from './pop-entity-scheme.service';\nimport { CoreConfig, PopBaseEventInterface } from '../../../pop-common.model';\n\nimport { PopExtendComponent } from '../../../pop-extend.component';\nimport { PopDomService } from '../../../services/pop-dom.service';\nimport { PopEntitySchemeAssetPoolComponent } from './pop-entity-scheme-asset-pool/pop-entity-scheme-asset-pool.component';\nimport { PopEntitySchemeAssetLayoutComponent } from './pop-entity-scheme-asset-layout/pop-entity-scheme-asset-layout.component';\nimport { PopEntitySchemeDetailsComponent } from './pop-entity-scheme-details/pop-entity-scheme-details.component';\nimport { PopTabMenuService } from '../../base/pop-tab-menu/pop-tab-menu.service';\n\n@Component( {\n  selector: 'lib-customer-scheme',\n  template: `\n    <lib-main-spinner *ngIf=\"dom.state.loader\"></lib-main-spinner>\n    <lib-pop-entity-tab *ngIf=\"dom.state.loaded\" [tab]=ui.tab [core]=\"core\"></lib-pop-entity-tab>`,\n  providers: [ PopEntitySchemeService ],\n} )\nexport class PopEntitySchemeComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  public name = 'PopEntitySchemeComponent';\n\n  protected srv = {\n    scheme: <PopEntitySchemeService>undefined,\n    tab: <PopTabMenuService>undefined\n  };\n\n\n  /**\n   *\n   * @param el\n   * @param _domRepo - transfer\n   * @param _schemeRepo - transfer\n   * @param _tabRepo - transfer\n   */\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService,\n    protected _schemeRepo: PopEntitySchemeService,\n    protected _tabRepo: PopTabMenuService\n  ){\n    super();\n\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n        this.ui.tab = new TabConfig( {\n          id: 'general',\n          positions: {\n            1: {\n              header: 'Details',\n              flex: 1,\n              components: [\n                {\n                  type: PopEntitySchemeDetailsComponent,\n                  inputs: {\n                    id: 1\n                  },\n                },\n              ]\n            },\n            2: {\n              flex: 1,\n              header: 'Available Fields & Components',\n              components: [\n                {\n                  type: PopEntitySchemeAssetPoolComponent,\n                  inputs: {\n                    id: 2\n                  },\n                },\n              ]\n            },\n            3: {\n              flex: 2,\n              header: 'Profile Layout',\n              components: [\n                {\n                  type: PopEntitySchemeAssetLayoutComponent,\n                  inputs: {\n                    id: 3\n                  },\n                },\n              ]\n            },\n          },\n          wrap: false,\n          columnWrap: true,\n          overhead: 0,\n          onLoad: ( config: CoreConfig, tab: TabConfig ) => {\n            // console.log('config', config);\n            // console.log('tab', tab);\n          },\n\n          onEvent: ( core: CoreConfig, event: PopBaseEventInterface ) => {\n            // console.log('event', event);\n          },\n        } );\n\n        await this.srv.scheme.init( this.core, this.ui.tab );\n\n        return resolve( true );\n      } );\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n        this.dom.setSubscriber(`refresh`, this.srv.scheme.ui.refresh.subscribe((val: string)=>{\n          if(val === 'reload'){\n            this.srv.tab.resetTab(true);\n            // this.srv.tab.refreshEntity(this.core.params.entityId, this.dom.repo, { bypassCache: true }, this.name).then(async()=>{\n            //   await this.srv.scheme.init( this.core, this.ui.tab );\n            //   this.srv.tab.resetTab();\n            // });\n          }\n        }));\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { PopDomService } from '../../../../services/pop-dom.service';\nimport { PopExtendComponent } from '../../../../pop-extend.component';\nimport { PopFieldEditorService } from '../pop-entity-field-editor.service';\nimport { CoreConfig, Dictionary, FieldInterface, PopBaseEventInterface, ServiceInjector } from '../../../../pop-common.model';\nimport { FieldItemModel, FieldItemModelConfig, IsValidFieldPatchEvent, SessionEntityFieldUpdate } from '../../pop-entity-utility';\nimport { IsObject, IsObjectThrowError, JsonCopy, StorageGetter } from '../../../../pop-common-utility';\nimport { SwitchConfig } from '../../../base/pop-field-item/pop-switch/switch-config.model';\n\n\n@Component( {\n  selector: 'lib-pop-entity-field-details',\n  templateUrl: './pop-entity-field-details.component.html',\n  styleUrls: [ './pop-entity-field-details.component.scss' ]\n} )\nexport class PopEntityFieldDetailsComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() field: FieldInterface;\n\n  public name = 'PopEntityFieldDetailsComponent';\n\n\n  protected srv: {\n    field: PopFieldEditorService,\n  };\n\n  protected asset = {};\n\n  public ui = {\n    field: <FieldInterface>undefined,\n    customSetting: <Dictionary<any>>{},\n    multiple: <SwitchConfig>undefined,\n  };\n\n\n  protected extendServiceContainer(){\n    this.srv = {\n      field: this.fieldRepo,\n    };\n    delete this.fieldRepo;\n  }\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService,\n    private fieldRepo: PopFieldEditorService,\n  ){\n    super();\n\n    this.extendServiceContainer();\n\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n        this.core = IsObjectThrowError( this.core, true, `${this.name}:configureDom: - this.core` ) ? this.core : null;\n        if( !this.field ) this.field = IsObjectThrowError( this.core, [ 'entity' ], `Invalid Core` ) && IsObjectThrowError( this.core.entity, [ 'id', 'fieldgroup' ], `Invalid Field` ) ? <FieldInterface>this.core.entity : null;\n        this._buildCustomSettings();\n        return resolve( true );\n      } );\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n        return resolve( true );\n      } );\n    };\n\n\n  }\n\n\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * Event handler for the parent tab to tell this name to reset itself\n   * @param reset\n   */\n  onBubbleEvent( event: PopBaseEventInterface ){\n    this.log.event( `onBubbleEvent`, event );\n    if( IsValidFieldPatchEvent( this.core, event ) ){\n      this.events.emit( event );\n    }\n  }\n\n\n  // /**\n  //  * Catch changes on custom setting fields and update them\n  //  * @param event\n  //  */\n  // onCustomSettingEvent(event: PopBaseEventInterface){\n  //   if( IsValidFieldPatchEvent(this.core, event) ){\n  //     this.dom.setTimeout(event.config.name, () => {\n  //       this.srv.field.storeCustomSetting(this.core, event).then(() => true);\n  //     }, 250);\n  //   }\n  // }\n\n\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  private _buildCustomSettings(){\n    const allowMultiple = this.srv.field.getViewMultiple( this.field.fieldgroup.name );\n    if( allowMultiple ){\n      let multiple = StorageGetter( this.core.repo, [ 'model', 'field', 'multiple' ] );\n      if( IsObject( multiple, [ 'model' ] ) ){\n        multiple = JsonCopy( multiple );\n        this.ui.multiple = new SwitchConfig( FieldItemModelConfig( this.core, FieldItemModel( this.core, multiple.model ) ) );\n        this.ui.multiple.patch.callback = ( core: CoreConfig, event: PopBaseEventInterface ) => {\n          SessionEntityFieldUpdate( this.core, event );\n          this.srv.field.triggerFieldPreviewUpdate();\n        };\n      }\n    }\n\n    // if( IsObject(this.ui.field.custom_setting, true) ){\n    //   Object.keys(this.ui.field.custom_setting).map((settingName) => {\n    //     const setting = this.ui.field.custom_setting[ settingName ];\n    //     const component = this.srv.field.getCustomSettingComponent(this.core, this.ui.field, setting);\n    //     component.position = this.position;\n    //     this.ui.customSetting[ setting.name ] = component;\n    //   });\n    // }\n  }\n\n\n}\n","import {Component, ElementRef, Input, OnDestroy, OnInit, ViewChild, ViewContainerRef} from '@angular/core';\nimport {PopExtendDynamicComponent} from '../../../../pop-extend-dynamic.component';\nimport {PopEntityService} from '../../services/pop-entity.service';\nimport {PopFieldEditorService} from '../pop-entity-field-editor.service';\nimport {\n  CoreConfig,\n  DynamicComponentInterface,\n  Entity,\n  FieldConfig, FieldEntry,\n  FieldInterface,\n  FieldItemInterface,\n  PopBaseEventInterface, PopLog, PopTemplate,\n  ServiceInjector\n} from '../../../../pop-common.model';\nimport {PopEntityFieldComponent} from '../../pop-entity-field/pop-entity-field.component';\nimport {SelectConfig} from '../../../base/pop-field-item/pop-select/select-config.model';\nimport {PopDomService} from '../../../../services/pop-dom.service';\nimport {DynamicSort, IsArray, IsObject, IsObjectThrowError, SpaceToSnake} from '../../../../pop-common-utility';\nimport {IsValidFieldPatchEvent} from '../../pop-entity-utility';\nimport {PopEntityUtilFieldService} from '../../services/pop-entity-util-field.service';\n\n\n@Component({\n  selector: 'lib-field-editor-preview',\n  templateUrl: './pop-entity-field-preview.component.html',\n  styleUrls: ['./pop-entity-field-preview.component.scss']\n})\nexport class PopEntityFieldPreviewComponent extends PopExtendDynamicComponent implements OnInit, OnDestroy {\n  @Input() field: FieldInterface;\n  @ViewChild('container', {read: ViewContainerRef, static: true}) private container;\n  public name = 'PopEntityFieldPreviewComponent';\n\n  protected asset = {\n    field: <FieldInterface>undefined,\n    fieldgroup: <Entity>undefined,\n    columnKeys: <string[]>undefined,\n  };\n\n  public ui = {\n    stateSelector: new SelectConfig({\n      label: 'State',\n      value: 'template_edit',\n      options: {\n        values: [\n          {value: 'template_edit', name: 'Template Access'},\n          {value: 'template_readonly', name: 'Template Readonly'},\n          {value: 'text_single', name: 'Text Single'},\n          {value: 'text_format', name: 'Text Format'},\n        ]\n      }\n    }),\n    field: <FieldConfig>undefined\n  };\n\n  protected srv = {\n    entity: <PopEntityService>ServiceInjector.get(PopEntityService),\n    editor: <PopFieldEditorService>ServiceInjector.get(PopFieldEditorService),\n    field: <PopEntityUtilFieldService>ServiceInjector.get(PopEntityUtilFieldService),\n  };\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService\n  ) {\n    super();\n\n\n    this.dom.configure = (): Promise<boolean> => {\n\n      return new Promise((resolve) => {\n\n\n        this.dom.handler.bubble = (core: CoreConfig, event: PopBaseEventInterface) => this.onBubbleEvent(event);\n\n        //  Verify configs\n        this.core = IsObjectThrowError(this.core, ['entity'], `${this.name}:configureDom: - this.core`) ? this.core : null;\n        this.field = IsObjectThrowError(this.core.entity, ['fieldgroup', 'entries'], `${this.name}:configureDom: - this.core`) ? <FieldInterface>this.core.entity : null;\n        this.asset.fieldgroup = this.field.fieldgroup;\n        // Create form session container to persist use input values\n        this.dom.session.form = {};\n        // Attach the container for the preview html\n        this.template.attach('container');\n        // Get a default set of data to populate the preview field items with\n        this.asset.columnKeys = this.core.entity.items.map((item) => {\n          return String(SpaceToSnake(item.name)).toLowerCase();\n        });\n        // this.asset.defaultData = this.srv.field.getDefaultValues(String(this.core.entityId.corefield.internal_name).toLowerCase(), this.asset.columnKeys);\n\n        if (this.dom.session.stateSelector) this.ui.stateSelector.control.setValue(this.dom.session.stateSelector, {emitEvent: true});\n\n        // Handle events\n        this.dom.handler.core = (core: CoreConfig, event: PopBaseEventInterface) => {\n          this.log.event(`_coreEventHandler`, event);\n          if (IsValidFieldPatchEvent(this.core, event) || (event.type === 'component' && (event.name === 'active-item' || event.name === 'update'))) {\n            this._triggerFieldPreview();\n          } else {\n            PopLog.warn(this.name, `Preview did not recognize event`, event);\n          }\n        };\n\n\n        this._triggerFieldPreview(250);\n        return resolve(true);\n      });\n    };\n\n\n    /**\n     * This function will call after the dom registration\n     */\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        this._setDataSession();\n        return resolve(true);\n      });\n    };\n  }\n\n\n  /**\n   * We expect the core to represent a field\n   * This component represents what the view of the current field will look like\n   * The component relies upon the FieldBuilderItemsComponent && FieldBuilderItemSettingsComponent to communicate when settings are changed so that the view can render the changes\n   */\n  ngOnInit() {\n    super.ngOnInit();\n  }\n\n\n  /**\n   * This handler manages events that come up from the preview fields, mostly just to session any values that the user enters, and simulate adding removing value entries\n   * The field input is saved because the setFieldPreview destroys the component and is called often, and the user should not have to re-enter test data every time a setting is changed\n   * @param event\n   */\n  onBubbleEvent(event: PopBaseEventInterface) {\n    this.log.event(`onBubbleEvent`, event);\n    if (IsObject(event, ['type', 'name']) && event.type === 'field') {\n      if (event.name === 'onFocus') {\n        // stub\n      } else if (event.name === 'onBlur' || event.name === 'patch') { // whenever a user blurs out of field save the data that is in it\n        if (event.config && event.config.control && event.config.control.value) {\n          this.dom.session.form[event.config.name] = event.config.control.value;\n          this.dom.store('onSession'); // dom.store must be called to for the dom to transfer its data up to the domRepo\n        }\n      } else if (event.name === 'add') { // whenever a user blurs out of field save the data that is in it\n        this._addFieldValue();\n      } else if (event.name === 'remove') { // whenever a user blurs out of field save the data that is in it\n        this._removeFieldValue();\n      }\n    }\n  }\n\n\n  /**\n   * Clean up the dom of this component\n   */\n  ngOnDestroy() {\n    this.template.destroy();\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  /**\n   * Create a new field label\n   */\n  private _addFieldValue() {\n    if (IsObject(this.ui.field, true)) {\n      if (this.dom.session.records < this.ui.field.multiple_max_limit) {\n        this.dom.session.records++;\n        this._triggerFieldPreview(0);\n      }\n\n    }\n  }\n\n\n  /**\n   * Remove an existing label\n   */\n  private _removeFieldValue() {\n    if (IsObject(this.ui.field, true)) {\n      if (this.dom.session.records > this.ui.field.multiple_min) {\n        this.dom.session.records--;\n        this._triggerFieldPreview(0);\n      }\n    }\n  }\n\n\n  /**\n   * Create sets of mock data for the fields entries\n   */\n  private _setDataSession() {\n    if (!this.dom.session.records) this.dom.session.records = this.field.multiple_min;\n    let index = 0;\n    if (!this.dom.session.data) {\n      this.dom.session.data = new Map();\n      while (index < 10) {\n        const defaultValues = this.srv.editor.getDefaultValues(String(this.asset.fieldgroup.name).toLowerCase());\n        this.dom.session.data.set(index, defaultValues);\n        index++;\n      }\n      this.dom.store('session');\n    }\n  }\n\n\n  /**\n   * Debounce the requests to reset the preview\n   * @param delay\n   */\n  private _triggerFieldPreview(delay = 250) {\n    this.dom.setTimeout('field-preview', () => {\n      this._setFieldPreview();\n    }, delay);\n  }\n\n\n  /**\n   * This will create a facade field that will a dynamically try to replicate how the field will look when it is in use\n   */\n  private _setFieldPreview() {\n    if (this.dom.repo.ui.activeItems) {\n\n      PopTemplate.clear();\n\n      const items = <any[]>this.field.items;\n\n      const entries = IsArray(this.field.entries, true) ? this.field.entries.filter((entry: FieldEntry) => {\n        return !entry.orphaned_at;\n      }).sort(DynamicSort('sort_order')) : [];\n\n      const fieldInterface = {\n        id: 1,\n        facade: true, // set to trigger demo like actions\n        canAdd: false,\n        canRemove: false,\n        configs: this.field.configs,\n        name: this.field.name,\n        label: this.field.label,\n        entries: entries,\n        fieldgroup: this.asset.fieldgroup,\n        internal_name: String(this.asset.fieldgroup.name).toLowerCase(),\n        multiple: this.field.multiple,\n        // multiple_min: this.field.multiple_min,\n        multiple_min: entries.length,\n        // multiple_max: this.field.multiple_max,\n        multiple_max: entries.length,\n        multiple_max_limit: 4,\n\n        data: {},\n        show_name: !!this.core.entity.show_name,\n        sort: 0,\n        state: this.ui.stateSelector.control.value,\n        items: <FieldItemInterface[]>[]\n      };\n\n      if (fieldInterface.multiple) {\n        // if( !fieldInterface.multiple_min ) fieldInterface.multiple_min = 1;\n        if (!fieldInterface.multiple_min) fieldInterface.multiple_min = entries.length;\n        // let valueIndex = 0;\n        let records = this.dom.session.records;\n        if (records < +fieldInterface.multiple_min) records = +fieldInterface.multiple_min;\n        if (+fieldInterface.multiple_max && records > fieldInterface.multiple_max) records = fieldInterface.multiple_max;\n        // while( valueIndex < records ){\n        //   fieldInterface.data[ valueIndex ] = this.dom.session.data.get( valueIndex );\n        //   valueIndex++;\n        // }\n        entries.map((entry, index) => {\n          fieldInterface.data[entry.id] = this.dom.session.data.get(index);\n        });\n      } else {\n        const singleEntry = entries[0];\n        fieldInterface.data[singleEntry.id] = this.dom.session.data.get(0);\n      }\n\n\n      fieldInterface.items = items.filter((item) => {\n        return +this.dom.repo.ui.activeItems[item.id] === 1;\n      }).map((item) => {\n        item.facade = true;\n        item.showMask = true;\n        item.bubble = true;\n        delete item.api;\n        return item;\n      });\n\n      this.ui.field = this.srv.field.buildCustomField(this.core, fieldInterface);\n\n\n      if (this.ui.field) {\n        const previewComponentList: DynamicComponentInterface[] = [];\n        const component = <DynamicComponentInterface>{\n          type: PopEntityFieldComponent,\n          inputs: {\n            core: this.core,\n            field: this.ui.field,\n          }\n        };\n        previewComponentList.push(component);\n        this.template.render(previewComponentList, [], true);\n      }\n    }\n    this.dom.ready();\n  }\n\n\n}\n","import { Component, ElementRef, OnDestroy, OnInit, ViewEncapsulation } from '@angular/core';\nimport { PopExtendComponent } from '../../../pop-extend.component';\nimport { PopFieldEditorService } from './pop-entity-field-editor.service';\nimport { PopDomService } from '../../../services/pop-dom.service';\nimport { TabConfig } from '../../base/pop-tab-menu/tab-menu.model';\nimport { CoreConfig, PopBaseEventInterface, PopHref, ServiceInjector } from '../../../pop-common.model';\nimport { PopEntityFieldSettingsComponent } from './pop-entity-field-settings/pop-entity-field-settings.component';\nimport { PopEntityFieldDetailsComponent } from './pop-entity-field-details/pop-entity-field-details.component';\nimport { PopTabMenuService } from '../../base/pop-tab-menu/pop-tab-menu.service';\nimport { IsObject, StorageGetter } from '../../../pop-common-utility';\nimport { PopEntityFieldPreviewComponent } from './pop-entity-field-preview/pop-entity-field-preview.component';\nimport { PopRouteHistoryResolver } from '../../../services/pop-route-history.resolver';\nimport { PopEntityUtilFieldService } from '../services/pop-entity-util-field.service';\n\n\n@Component( {\n  selector: 'lib-field-editor',\n  template: `\n    <lib-pop-entity-tab *ngIf=\"dom.state.loaded\" [tab]=ui.tab [core]=\"core\"></lib-pop-entity-tab>`,\n  styleUrls: [ './pop-entity-field-editor.scss' ],\n  providers: [ PopFieldEditorService ],\n  encapsulation: ViewEncapsulation.None,\n} )\nexport class PopEntityFieldEditorComponent extends PopExtendComponent implements OnInit, OnDestroy {\n\n  public name = 'PopEntityFieldEditorComponent';\n\n\n  protected srv = {\n    field: <PopFieldEditorService>undefined,\n    utilField: <PopEntityUtilFieldService>undefined,\n    history: <PopRouteHistoryResolver>ServiceInjector.get( PopRouteHistoryResolver ),\n    tab: <PopTabMenuService>undefined,\n  };\n\n\n  /**\n   * @param el\n   * @param _domRepo\n   * @param _fieldRepo\n   * @param _tabRepo\n   */\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService,\n    protected _fieldRepo: PopFieldEditorService,\n    protected _utilFieldRepo: PopEntityUtilFieldService,\n    protected _tabRepo: PopTabMenuService,\n  ){\n    super();\n\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n        if( !( IsObject( this.core, true ) ) ) this.core = this.srv.tab.getCore();\n        const fieldgroup = StorageGetter( this.core, [ 'entity', 'fieldgroup', 'name' ] );\n        if( fieldgroup ){\n          this.ui.tab = new TabConfig( {\n            id: 'general',\n            positions: {\n              1: {\n                header: 'Details',\n                flex: 1,\n                components: [\n                  {\n                    type: PopEntityFieldDetailsComponent,\n                    inputs: {\n                      id: 1\n                    },\n                  },\n                ]\n              },\n              2: {\n                flex: 2,\n                components: [\n                  {\n                    type: PopEntityFieldSettingsComponent,\n                    inputs: {\n                      id: 2\n                    },\n                  },\n                ]\n              },\n              3: {\n                flex: 1,\n                components: [\n                  {\n                    type: PopEntityFieldPreviewComponent,\n                    inputs: {\n                      id: 3\n                    },\n                  },\n                ]\n              },\n            },\n            wrap: true,\n            columnWrap: true,\n            overhead: 0,\n            onLoad: ( config: CoreConfig, tab: TabConfig ) => {\n              // console.log('config', config);\n              // console.log('tab', tab);\n            },\n\n            onEvent: ( core: CoreConfig, event: PopBaseEventInterface ) => {\n              // console.log('event', event);\n            },\n          } );\n          this.srv.field.register( this.core, this.dom.repo ).then( () => {\n            this.srv.utilField.clearCustomFieldCache( +this.core.entity.id );\n            return resolve( true );\n          } );\n\n        }else{\n          window.location.href = window.location.origin + '/' + PopHref;\n        }\n      } );\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n}\n","import { PopDatetimeService } from './../../../services/pop-datetime.service';\nimport { Component, OnInit, OnDestroy } from '@angular/core';\nimport { PopExtendComponent } from '../../../pop-extend.component';\nimport { SwitchConfig } from '../../base/pop-field-item/pop-switch/switch-config.model';\nimport { PopBaseEventInterface, PopEntity, PopTemplate, ServiceInjector } from '../../../pop-common.model';\nimport { PopEntityEventService } from '../services/pop-entity-event.service';\nimport { PopTabMenuService } from '../../base/pop-tab-menu/pop-tab-menu.service';\nimport { PopDomService } from '../../../services/pop-dom.service';\nimport { ButtonConfig } from '../../base/pop-field-item/pop-button/button-config.model';\nimport { IsValidChangeEvent } from '../pop-entity-utility';\nimport { GetHttpErrorMsg } from '../../../pop-common-utility';\n\n@Component( {\n  selector: 'lib-pop-entity-status',\n  templateUrl: './pop-entity-status.component.html',\n  styleUrls: [ './pop-entity-status.component.scss' ],\n} )\nexport class PopEntityStatusComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  name = 'PopEntityStatusComponent';\n\n  public ui = {\n    archive: <SwitchConfig>undefined,\n    valueButton: <ButtonConfig>undefined,\n    createdDate: <string>undefined,\n    showCopied: false\n  };\n\n  protected srv: {\n    events: PopEntityEventService,\n    tab: PopTabMenuService,\n    date: PopDatetimeService,\n  } = {\n    events: ServiceInjector.get( PopEntityEventService ),\n    tab: <PopTabMenuService>undefined,\n    date: ServiceInjector.get( PopDatetimeService )\n  };\n\n\n  constructor(\n    protected _domRepo: PopDomService,\n    protected _tabRepo: PopTabMenuService,\n  ){\n    super();\n    this.dom.configure = (): Promise<boolean> => {\n\n      // this component set the outer height boundary of this view\n      return new Promise( async( resolve ) => {\n        // Ensure that a CoreConfig exists for this component\n        this.dom.state.archived = this.core.entity.archived ? true : false;\n        this._setDate( this.core.entity.created_at );\n        this._setArchiveSwitch();\n        this.srv.tab.showAsLoading( false );\n\n        this.id = this.core.params.internal_name;\n        return resolve( true );\n\n      } );\n    };\n  }\n\n\n  ngOnInit(): void{\n    super.ngOnInit();\n  }\n\n\n  onLabelCopy(): void{\n    const nav = <any>navigator;\n    const body = String( this.core.entity.id ).slice();\n    nav.clipboard.writeText( body );\n\n    this.ui.showCopied = true;\n\n    setTimeout(()=>{\n      this.ui.showCopied = false;\n    },3000);\n  }\n\n\n  onArchiveChange( event: PopBaseEventInterface ){\n    if( IsValidChangeEvent( this.core, event ) ){\n      this._handleArchive( !event.config.control.value );\n    }\n  }\n\n\n  ngOnDestroy(): void{\n    super.ngOnDestroy();\n  }\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  private _setDate( date ){\n    this.ui.createdDate = this.srv.date.transform( date, 'date' );\n  }\n\n\n  private _setArchiveSwitch(){\n    this.ui.valueButton = new ButtonConfig( {\n      icon: 'file_copy',\n      value: `ID ${ this.core.entity.id }`,\n      size: 20,\n      radius: 5,\n      text: 12,\n      bubble: true,\n      event: 'click',\n      type: 'mat-flat-button'\n    } );\n    this.ui.archive = new SwitchConfig( {\n      name: 'archived',\n      bubble: true,\n      label: this.core.entity.archived ? 'ACTIVE' : 'ACTIVE',\n      labelPosition: 'before',\n      value: !this.core.entity.archived ? true : false,\n      patch: {\n        duration: 0,\n        field: '',\n        path: '',\n      },\n    } );\n  }\n\n\n  private _handleArchive( archive: boolean ){\n    console.log('_handleArchive', archive);\n    this.dom.state.archived = archive;\n    this.ui.archive.label = archive ? 'ACTIVE' : 'ACTIVE';\n    this.core.entity.archived = archive;\n    this.ui.archive.control.disable();\n    this.srv.tab.showAsLoading( true );\n    this.dom.setSubscriber( 'archive-entity', this.core.repo.archiveEntity( this.core.params.entityId, archive ).subscribe( () => {\n      this.srv.events.sendEvent( {\n        source: this.name,\n        method: 'archive',\n        type: 'entity',\n        name: this.core.params.name,\n        internal_name: this.core.params.internal_name,\n        id: this.core.params.entityId,\n        data: archive\n      } );\n      this.srv.tab.showAsLoading( false );\n      this.ui.archive.control.enable();\n      this.srv.tab.resetTab(true);\n      // this.srv.tab.refreshEntity( null, this.dom.repo, {}, `${this.name}:setArchived` ).then( () => PopTemplate.clear() );\n\n    }, err => {\n      this.dom.error.code = err.error.code;\n      this.dom.error.message = GetHttpErrorMsg(err);\n      this.ui.archive.control.enable();\n      this.srv.tab.showAsLoading( false );\n    } ) );\n\n  }\n}\n","import { TabComponentInterface, TabConfig, TabInterface } from '../../base/pop-tab-menu/tab-menu.model';\nimport { PopEntityFieldGroupComponent } from '../pop-entity-field-group/pop-entity-field-group.component';\nimport { PopEntityHistoryComponent } from '../pop-entity-history/pop-entity-history.component';\nimport { PopEntityAssignmentsComponent } from '../pop-entity-assignments/pop-entity-assignments.component';\nimport { CoreConfig, PopBaseEventInterface } from '../../../pop-common.model';\nimport { PopEntitySchemeComponent } from '../pop-entity-scheme/pop-entity-scheme.component';\nimport { PopEntityFieldEditorComponent } from '../pop-entity-field-editor/pop-entity-field-editor.component';\nimport { PopEntityStatusComponent } from '../pop-entity-status/pop-entity-status.component';\n\n\nexport const EntityGeneralTab =\n  new TabConfig( <TabInterface>{\n    id: 'general',\n    positions: {\n      1: {\n        flex: 1,\n        components: [\n          {\n            type: PopEntityStatusComponent,\n            inputs: {\n              position: 1\n            },\n          },\n          {\n            type: PopEntityFieldGroupComponent,\n            inputs: {\n              position: 1\n            },\n          },\n        ]\n      },\n      2: {\n        flex: 1,\n        components: [\n          {\n            type: PopEntityFieldGroupComponent,\n            inputs: {\n              position: 2\n            },\n          },\n        ]\n      },\n      3: {\n        flex: 2,\n        components: [\n          {\n            type: PopEntityFieldGroupComponent,\n            inputs: {\n              position: 2\n            },\n          },\n        ]\n      }\n    },\n  } );\n\n\nexport const EntityAssignmentTab =\n  new TabConfig( <TabInterface>{\n    id: 'assignments',\n    positions: {\n      1: {\n        header: null,\n        flex: 1,\n        components: <TabComponentInterface[]>[\n          { type: PopEntityAssignmentsComponent, inputs: {} }\n        ]\n      },\n    },\n  } );\n\n\nexport const EntitySchemeTab =\n  new TabConfig( {\n    id: 'general',\n    positions: {\n      1: {\n        flex: 1,\n        components: [\n          {\n            type: PopEntitySchemeComponent,\n            inputs: {\n              id: '1',\n            },\n          },\n        ]\n      },\n    },\n    columnWrap: false,\n    // wrap: false, // turn wrapper off ie. margin,  since  PopProfileSchemeComponent is another tab instance\n    onLoad: ( config: CoreConfig, tab: TabConfig ) => {\n      // console.log('config', config);\n      // console.log('tab', tab);\n    },\n\n    onEvent: ( core: CoreConfig, event: PopBaseEventInterface ) => {\n      // console.log('event', event);\n    },\n  } );\n\n\nexport const EntityHistoryTab =\n  new TabConfig( <TabInterface>{\n    id: 'history',\n    positions: {\n      1: {\n        header: null,\n        flex: 1,\n        components: <TabComponentInterface[]>[\n          {\n            type: PopEntityHistoryComponent,\n            inputs: {},\n          }\n        ]\n      }\n    },\n  } );\n\n\nexport const FieldEditorTab =\n  new TabConfig( {\n    id: 'general',\n    syncPositions: false,\n    positions: {\n      1: {\n        flex: 1,\n        components: [\n          {\n            type: PopEntityFieldEditorComponent,\n            inputs: {}\n          },\n        ]\n      },\n    },\n    onLoad: ( config: CoreConfig, tab: TabConfig ) => {\n      //       console.log('config', this);\n      // console.log('tab', tab);\n    },\n\n    onEvent: ( core: CoreConfig, event: PopBaseEventInterface ) => {\n      // console.log('event', event);\n    },\n  } );\n\n\n","import {Injectable, isDevMode} from '@angular/core';\nimport {\n  HttpEvent,\n  HttpInterceptor,\n  HttpHandler,\n  HttpRequest,\n  HttpErrorResponse,\n  HttpHeaders\n} from '@angular/common/http';\nimport {PopBaseService} from './pop-base.service';\nimport {Observable} from 'rxjs';\nimport {tap, catchError} from 'rxjs/operators';\nimport {PopHref, PopTemplate, SetPopMessage} from '../pop-common.model';\nimport {GetHttpErrorMsg, IsObject, SetSiteVar} from '../pop-common-utility';\nimport {Router} from '@angular/router';\n\n\n@Injectable()\nexport class HeaderInterceptor implements HttpInterceptor {\n\n  constructor(private base: PopBaseService) {\n  }\n\n\n  intercept(request: HttpRequest<any>, next: HttpHandler) {\n\n    let headers;\n    // If SkipHeaderInterceptor has been set then skip this interceptor\n    if (request.headers.has('SkipAuthHeaderInterceptor')) {\n      headers = request.headers.delete('SkipAuthHeaderInterceptor');\n      return next.handle(request.clone({headers}));\n    }\n\n    headers = new HttpHeaders({\n      'Authorization': this.base.getBearerToken(),\n      'X-Popcx-Business': request.headers.get('x-popcx-business'),\n      'Content-Type': request.headers.get('content-type') || 'application/json',\n      'Api-Version': request.headers.get('api-version') || '1',\n    });\n    const newReq = request.clone({headers});\n\n    // send cloned request with header to the next handler.\n    return next.handle(newReq);\n  }\n}\n\n\n@Injectable()\nexport class Response401Interceptor implements HttpInterceptor {\n\n  constructor(\n    private baseService: PopBaseService,\n    private router: Router\n  ) {\n  }\n\n\n  intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n\n    // If SkipResponse401Interceptor has been set then skip this interceptor.\n    if (request && request.headers && request.headers.has('SkipResponse401Interceptor')) {\n      const headers = request.headers.delete('SkipResponse401Interceptor');\n      return next.handle(request.clone({headers}));\n    }\n\n    return next.handle(request).pipe(\n      tap(() => {\n        this.baseService.setAuthTime();\n      }),\n      catchError((err: HttpErrorResponse) => {\n        const currentPath = window.location.href.split(PopHref)[1];\n        if (err.status >= 500) {\n          const message = GetHttpErrorMsg(err);\n          if (currentPath && !currentPath.includes('error/500')) {\n            SetPopMessage((isDevMode() ? message : 'Something went wrong!'));\n            this.router.navigate(['system/error/500'], {skipLocationChange: true});\n          }\n        } else if (err.status === 403) {\n          const message = GetHttpErrorMsg(err);\n\n          if (message === 'Your email address is not verified.') {\n            if (currentPath && !currentPath.includes('/user/email/resend')) {\n              window.location.href = window.location.protocol + '//' + window.location.host + '/user/email/resend';\n            }\n          } else {\n            if (currentPath && !currentPath.includes('error/403')) {\n              SetPopMessage(isDevMode() ? message : 'Access Denied!');\n              this.router.navigate(['system/error/403'], {skipLocationChange: true});\n            }\n          }\n        } else if (err.status === 404) {\n          const message = GetHttpErrorMsg(err);\n          if (currentPath && !currentPath.includes('error/404')) {\n            SetPopMessage(isDevMode() ? message : 'Something went wrong!');\n            this.router.navigate(['system/error/404'], {skipLocationChange: true});\n          }\n        } else if (err.status === 401) {\n          if (isDevMode()) {\n            if (IsObject(PopTemplate)) {\n              PopTemplate.error({code: 401, message: 'UNAUTHENTICATED'});\n            }\n          } else {\n            SetSiteVar('redirectAfterLogin', window.location.href);\n            this.baseService.clearAuthTime();\n            this.baseService.clearLocalStorage();\n            window.location.href = window.location.protocol + '//' + window.location.host + '/user/legacy/auth/clear';\n          }\n        } else {\n          return next.handle(request);\n        }\n      })\n    );\n  }\n}\n\n","import { NativeDateAdapter } from '@angular/material/core';\nimport { Injectable } from \"@angular/core\";\n\n/** Adapts the native JS Date for use with cdk-based modules that work with dates. */\n\n@Injectable()\nexport class CustomDateAdapter extends NativeDateAdapter {\n\n  // parse the date from input component as it only expect dates in\n  // mm-dd-yyyy format\n  // parse(value: any): Date | null {\n  //   if ((typeof value === 'string') && (value.indexOf('/') > -1)) {\n  //     const str = value.split('/');\n  //\n  //     const year = Number(str[2]);\n  //     const month = Number(str[1]) - 1;\n  //     const date = Number(str[0]);\n  //\n  //     return new Date(year, month, date);\n  //   }\n  //   const timestamp = typeof value === 'number' ? value : Date.parse(value);\n  //   return isNaN(timestamp) ? null : new Date(timestamp);\n  // }\n\n  getFirstDayOfWeek(): number {\n    return 1;\n  }\n}\n","import { Component, ElementRef, isDevMode, OnDestroy, OnInit } from '@angular/core';\nimport { PopExtendComponent } from '../../../../pop-extend.component';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { PopMessage, PopTemplate, ServiceInjector, SetPopMessage } from '../../../../pop-common.model';\nimport { PopDomService } from '../../../../services/pop-dom.service';\n\n@Component({\n  selector: 'lib-pop-error-redirect',\n  templateUrl: './pop-error-redirect.component.html',\n  styleUrls: ['./pop-error-redirect.component.scss']\n})\nexport class PopErrorRedirectComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  public name = 'PopErrorRedirectComponent';\n\n  protected srv = {\n    router: <Router>ServiceInjector.get( Router ),\n  };\n\n  public ui = {\n    code: <number>undefined,\n    message: <string>undefined\n  };\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService,\n    private route: ActivatedRoute\n  ){\n    super();\n\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n        this.dom.state.isDevMode = isDevMode();\n        this.dom.setHeight(PopTemplate.getContentHeight(), 120);\n        this._setRoute();\n        resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n    \n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    SetPopMessage(null);\n    super.ngOnDestroy();\n  }\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  private _setRoute(){\n    this.ui.code = this.route.snapshot.params.code || 404;\n    this.ui.message = PopMessage;\n  }\n\n}\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { PopCacheRedirectUrl, PopTemplate, ServiceInjector, SetPopCacheRedirectUrl, SetPopMessage } from '../../../../pop-common.model';\nimport { PopEntityService } from '../../../entity/services/pop-entity.service';\nimport { PopExtendComponent } from '../../../../pop-extend.component';\nimport { Router } from '@angular/router';\nimport { IsString } from '../../../../pop-common-utility';\n\n\n@Component( {\n  selector: 'lib-pop-cache-redirect',\n  templateUrl: './pop-cache-redirect.component.html',\n  styleUrls: [ './pop-cache-redirect.component.scss' ]\n} )\nexport class PopCacheRedirectComponent extends PopExtendComponent implements OnInit, OnDestroy {\n\n  public name = 'PopCacheRedirectComponent';\n\n  protected srv = {\n    router: <Router>ServiceInjector.get( Router ),\n    entity: <PopEntityService>ServiceInjector.get( PopEntityService ),\n  };\n\n  public ui = {\n    code: <number>undefined,\n    message: <string>undefined\n  };\n\n\n  constructor(){\n    super();\n\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n        this.dom.setHeight( PopTemplate.getContentHeight(), 120 );\n        PopTemplate.clear();\n        this.srv.entity.bustAllCache();\n        return resolve( true );\n      } );\n    };\n\n    this.dom.proceed = () => {\n      return new Promise( async( resolve ) => {\n        this.dom.setTimeout( `cache-redirect`, () => {\n          if(IsString(PopCacheRedirectUrl, true)){\n            this.srv.router.navigate( [ PopCacheRedirectUrl ], {skipLocationChange: true} ).then(()=>{\n              // console.log('cache redirect success');\n              return true;\n            });\n          } else{\n            this.srv.router.navigate(['system/route']);\n          }\n\n        }, 250 );\n\n        return resolve( true );\n      } );\n    };\n\n  }\n\n\n  /**\n   * This component allows a redirect that will clear all cache and then return back to the url\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    SetPopCacheRedirectUrl( null );\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n}\n","import {Component, isDevMode, OnDestroy, OnInit} from '@angular/core';\nimport {IsObject, IsString, RandomArrayElement, Sleep} from '../../../../pop-common-utility';\nimport {PopExtendComponent} from '../../../../pop-extend.component';\nimport {PopBusiness, PopHref} from '../../../../pop-common.model';\nimport {Route, Router} from '@angular/router';\nimport {PopBaseService} from \"../../../../services/pop-base.service\";\nimport {MainSpinner} from \"../../pop-indicators/pop-indicators.model\";\n\n\n@Component({\n  selector: 'lib-pop-guard-redirect',\n  templateUrl: './pop-guard-redirect.component.html',\n  styleUrls: ['./pop-guard-redirect.component.scss']\n})\nexport class PopGuardRedirectComponent extends PopExtendComponent implements OnInit, OnDestroy {\n\n  protected srv = {\n    base: <PopBaseService>undefined,\n    router: <Router>undefined\n  };\n\n  protected asset = {\n    sentimentIndex: 0,\n    sentiments: [\n      'sentiment_very_dissatisfied',\n      'sentiment_dissatisfied',\n      'sentiment_satisfied',\n      'sentiment_satisfied_alt',\n      'sentiment_very_satisfied',\n    ],\n    exclamations: [\n      `DUH!`,\n      `THIS SUCKS!`,\n      `TRY AGAIN!`,\n      `WASN'T ME!`,\n      `SHOOT!`,\n      `GO HOME, I'M DRUNK!`,\n      `Y U NO FIND ROUTE!`,\n      `WHERE AM I!`,\n    ],\n    route: <Route>undefined\n  };\n\n  public ui = {\n    exclamation: <string>undefined,\n    sentiment: <string>undefined,\n    spinner: <MainSpinner>undefined,\n  };\n\n\n  constructor(\n    protected _baseRepo: PopBaseService,\n    protected _routerRepo: Router,\n  ) {\n    super();\n\n    this.dom.configure = () => {\n      return new Promise<boolean>(async (resolve) => {\n\n        await Promise.all([\n          this.setInitialConfig()\n        ]);\n\n        // this._improveSentiment();\n        // this._routeApp();\n\n        return resolve(true);\n      });\n    };\n\n  }\n\n\n  ngOnInit(): void {\n    super.ngOnInit();\n  }\n\n\n  ngOnDestroy(): void {\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  private setInitialConfig(): Promise<boolean> {\n    return new Promise<boolean>((resolve) => {\n      this.dom.state.isDevMode = isDevMode();\n      this.ui.sentiment = this.asset.sentiments[this.asset.sentimentIndex];\n      this.ui.exclamation = RandomArrayElement(this.asset.exclamations);\n      this.asset.route = this.srv.router.config.find((r: Route) => {\n        return IsString(r.path, true) && !r.canActivate && !r.redirectTo;\n      });\n\n      this.ui.spinner = <MainSpinner>{\n        color: 'accent'\n      };\n      return resolve(true);\n    });\n  }\n\n  private _improveSentiment() {\n    this.dom.setTimeout(`improve-sentiment`, () => {\n      if (this.asset.sentiments[this.asset.sentimentIndex + 1]) {\n        this.asset.sentimentIndex++;\n        this.ui.sentiment = this.asset.sentiments[this.asset.sentimentIndex];\n        this._improveSentiment();\n      } else {\n        this.dom.setTimeout(`improve-sentiment`, null);\n        this.ui.exclamation = 'ALL GOOD!';\n        this._routeApp();\n      }\n    }, 400);\n  }\n\n  /**\n   *\n   * @private\n   */\n  private _routeApp() {\n    this.dom.setTimeout(`re-route`, () => {\n      if (IsObject(PopBusiness, ['id'])) {\n        if (IsObject(this.asset.route, ['path'])) {\n          console.log('DIAGNOSE Redirect ISSUE: Redirect Path', this.asset.route.path);\n          if (this.srv.base.checkAppAccess(PopHref, true)) {\n            this.srv.router.navigateByUrl(this.asset.route.path).catch((e) => console.log('e', e));\n          }\n        } else {\n          if (!this.dom.state.isDevMode && IsString(PopHref, true) && PopHref !== 'home') window.location.href = window.location.protocol + '//' + window.location.host + '/home';\n        }\n      } else {\n        if (!this.dom.state.isDevMode && IsString(PopHref, true) && PopHref !== 'user') window.location.href = window.location.protocol + '//' + window.location.host + '/user/profile';\n      }\n    }, 400);\n  }\n\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MaterialModule } from '../../material/material.module';\nimport { PopErrorRedirectComponent } from './pop-error-redirect/pop-error-redirect.component';\nimport { PopCacheRedirectComponent } from './pop-cache-redirect/pop-cache-redirect.component';\nimport { PopIndicatorsModule } from '../pop-indicators/pop-indicators.module';\nimport { PopGuardRedirectComponent } from './pop-guard-redirect/pop-guard-redirect.component';\n\n\n@NgModule({\n  declarations: [\n    PopErrorRedirectComponent,\n    PopCacheRedirectComponent,\n    PopGuardRedirectComponent\n  ],\n  imports: [\n    CommonModule,\n    MaterialModule,\n    PopIndicatorsModule\n  ],\n  providers: [],\n  exports: [\n    PopErrorRedirectComponent,\n    PopCacheRedirectComponent,\n    PopGuardRedirectComponent\n  ]\n})\nexport class PopRedirectsModule {\n}\n","import { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, CanActivate, Router } from '@angular/router';\nimport { PopMessage } from '../../../pop-common.model';\nimport { IsString } from '../../../pop-common-utility';\n\n\n@Injectable( {\n  providedIn: 'root',\n} )\nexport class PopRedirectGuard implements CanActivate {\n  constructor(\n    private router: Router\n  ){\n  }\n\n\n  canActivate( route: ActivatedRouteSnapshot ): Promise<boolean>{\n    return new Promise<boolean>( async(resolve) => {\n      if( IsString( PopMessage, true ) ){\n        return resolve(true);\n      }else{\n        return this.router.navigateByUrl('system/route');\n      }\n    } );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, CanActivate, Router } from '@angular/router';\nimport { PopCacheRedirectUrl } from '../../../pop-common.model';\nimport { IsString } from '../../../pop-common-utility';\n\n\n@Injectable( {\n  providedIn: 'root',\n} )\nexport class PopCacheRedirectGuard implements CanActivate {\n  constructor( private router: Router ){\n\n  }\n\n\n  canActivate( route: ActivatedRouteSnapshot ): Promise<boolean>{\n    return new Promise<boolean>( async( resolve ) => {\n      if( IsString( PopCacheRedirectUrl, true ) ){\n        return resolve( true );\n      }else{\n        return this.router.navigateByUrl( 'system/route' );\n      }\n    } );\n  }\n}\n","import { HttpBackend, HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';\nimport { Inject, Injectable, isDevMode } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { ConvertObjectToUri, IsArray, IsObject, IsString } from '../pop-common-utility';\nimport { PopBusiness } from '../pop-common.model';\nimport { PopExtendService } from './pop-extend.service';\n\n\n@Injectable( {\n  providedIn: 'root'\n} )\nexport class PopRequestExternalService extends PopExtendService {\n  protected name = 'PopRequestExternalService';\n  private baseUrl: string;\n  private http: HttpClient;\n\n  private urlRegex = new RegExp( '^(https?:\\\\/\\\\/)?' + // protocol\n    '((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.)+[a-z]{2,}|' + // domain name\n    '((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))' + // OR ip (v4) address\n    '(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+]*)*' + // port and path\n    '(\\\\?[;&a-z\\\\d%_.~+=-]*)?' + // query string\n    '(\\\\#[-a-z\\\\d_]*)?$', 'i' );\n\n\n  constructor(\n    private httpBackend: HttpBackend\n  ){\n    super();\n    this.http = new HttpClient( this.httpBackend );\n  }\n\n\n  public getBaseUrl(){\n    return this.baseUrl.slice();\n  }\n\n\n  public setBaseUrl( baseUrl: string ): void{\n    if( IsString( baseUrl, true ) ){\n      this.baseUrl = baseUrl;\n    }\n  }\n\n\n  doGet( url: string, params: object = {}, headers: { [ name: string ]: string | string[] } = {} ): Observable<any>{\n    if( this._checkUrl( url ) ){\n      const options = {\n        headers: new HttpHeaders( headers ),\n        params: this._setParams( params )\n      };\n\n      return this.http.get<any>( `${ url }`, options );\n    }else{\n      return of( null );\n    }\n  }\n\n\n  doDelete( url: string, body: object = null, headers: { [ name: string ]: string | string[] } = {} ): Observable<any>{\n    if( this._checkUrl( url ) ){\n      const options = {\n        headers: new HttpHeaders( headers ),\n        body: body,\n      };\n      return this.http.delete<any>( url, options );\n    }else{\n      return of( null );\n    }\n  }\n\n\n  doPatch( url: string, data: object, headers: { [ name: string ]: string | string[] } = {} ): Observable<any>{\n    if( this._checkUrl( url ) ){\n      const options = {\n        headers: new HttpHeaders( headers ),\n      };\n      return this.http.patch( url, JSON.stringify( data ), options );\n    }else{\n      return of( null );\n    }\n  }\n\n\n  doPost( url: string, data: object, headers: { [ name: string ]: string | string[] } = {} ): Observable<any>{\n    if( this._checkUrl( url ) ){\n      const options = {\n        headers: new HttpHeaders( headers ),\n      };\n      return this.http.post<any>( url, JSON.stringify( data ), options );\n    }else{\n      return of( null );\n    }\n\n  }\n\n\n  private _setParams( body ){\n    let params: HttpParams = new HttpParams();\n    for( const key of Object.keys( body ) ){\n      if( body[ key ] ){\n        if( body[ key ] instanceof Array ){\n          body[ key ].forEach( ( item ) => {\n            params = params.append( `${key.toString()}[]`, item );\n          } );\n        }else{\n          params = params.append( key.toString(), body[ key ] );\n        }\n      }\n    }\n    return params;\n  }\n\n\n  private _checkUrl( url: string ): boolean{\n    const valid = !!this.urlRegex.test( url );\n    if( !valid ){\n      throw new Error( `Invalid Url: ${url}` );\n    }\n    return true;\n  }\n}\n\n","import {Inject, Injectable, OnDestroy} from '@angular/core';\n\nimport {PopExtendService} from \"../../../services/pop-extend.service\";\nimport {\n  AppGlobalInterface,\n  Dictionary,\n  DynamicComponentInterface,\n  PopLog,\n  ResourceInterface,\n  SchemeComponentConfig,\n  SchemeComponentModelInterface,\n  SchemeComponentOptionInterface,\n  SchemeComponentParamInterface,\n  SchemeComponentSettingInterface\n} from \"../../../pop-common.model\";\nimport {TabConfig} from \"../../base/pop-tab-menu/tab-menu.model\";\nimport {PopResourceService} from \"../../../services/pop-resource.service\";\nimport {DeepMerge, IsArray, IsObject, IsString, SnakeToPascal, TitleCase} from \"../../../pop-common-utility\";\nimport {EvaluateWhenConditions} from \"../pop-entity-utility\";\nimport {PopEntitySchemeCustomComponent} from \"../pop-entity-scheme/pop-entity-scheme-custom-component/pop-entity-scheme-custom.component\";\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PopEntitySchemeComponentService extends PopExtendService implements OnDestroy {\n\n  protected asset = {\n    action: <Map<string, Dictionary<any>>>new Map<string, Dictionary<any>>(),\n    base: <Map<string, SchemeComponentConfig>>new Map<string, SchemeComponentConfig>(),\n    setting: <Map<string, SchemeComponentSettingInterface>>new Map<string, SchemeComponentSettingInterface>(),\n    component: <Map<string, DynamicComponentInterface>>new Map<string, DynamicComponentInterface>(),\n    param: <Map<string, SchemeComponentParamInterface>>new Map<string, SchemeComponentParamInterface>(),\n    resource: <Map<string, Dictionary<ResourceInterface>>>new Map<string, Dictionary<ResourceInterface>>(),\n    option: <Map<string, SchemeComponentOptionInterface>>new Map<string, SchemeComponentOptionInterface>(),\n    tabs: <Map<string, TabConfig[]>>new Map<string, TabConfig[]>(),\n    baseImageUrl: '',\n  };\n\n\n  /**\n   * This srv is used in the\n   * @param env\n   */\n  constructor(\n    private resource: PopResourceService,\n    @Inject('APP_GLOBAL') private APP_GLOBAL: AppGlobalInterface,\n    @Inject('env') private env?\n  ) {\n    super();\n\n    setTimeout(async () => {\n      await APP_GLOBAL.isVerified();\n      this.asset.baseImageUrl = IsString(this.env.s3BucketUrl, true) ? this.env.s3BucketUrl : 'https://popcx-dev-public.s3-us-west-2.amazonaws.com';\n    }, 0);\n  }\n\n\n  /**\n   * Configure/Extend the default behavior of an entity\n   * @param internal_name\n   * @param extend\n   */\n  configure(internal_name: string, extend: SchemeComponentModelInterface) {\n    if (IsObject(extend.component, ['type'])) this.setComponent(internal_name, extend.component);\n    if (IsArray(extend.tab, true)) this.setTab(internal_name, extend.tab);\n    if (IsObject(extend.action, true)) this.setAction(internal_name, extend.action);\n    if (IsObject(extend.resource, true)) this.setResource(internal_name, extend.resource);\n    if (IsObject(extend.setting, true)) this.setSetting(internal_name, extend.setting);\n    if (IsObject(extend.option, true)) this.setOption(internal_name, extend.option);\n  }\n\n\n  /**\n   * A method to get a Core Config for an entity\n   * Uses cache service to improve performance\n   * ALL ENTITY RELATED COMPONENTS RELY ON THIS !!!!\n   * @param entityParams\n   * @param metadata\n   */\n  getConfig(internal_name: string, item: SchemeComponentParamInterface): Promise<SchemeComponentConfig> {\n    return new Promise<SchemeComponentConfig>(async (resolve) => {\n      let config = await this._getBaseConfig(internal_name);\n      if (item && item.id) {\n        config.id = item.id;\n        config.param.id = item.id;\n        config.preferences = await this._getPreferences(config.param);\n        const settingComponent = config.setting.component;\n        config = DeepMerge(config, item);\n        config.setting.component = settingComponent ? settingComponent : null;\n      }\n      await this.getResources(config);\n\n      return resolve(config);\n    });\n  }\n\n\n  /**\n   * This will do all of the work of building and storing the base config for each entity\n   * @param internal_name\n   * @param routes\n   * @private\n   */\n  private _getBaseConfig(internal_name: string): Promise<SchemeComponentConfig> {\n    return new Promise((resolve) => {\n      if (!this.asset.base.has(internal_name)) {\n        const param = this.getParams(internal_name);\n        const base = new SchemeComponentConfig({\n          param: param,\n          component: this.getComponent(internal_name),\n          setting: this.getSetting(internal_name),\n          option: this.getOption(internal_name),\n          resource: this.getResource(internal_name),\n        });\n        this.asset.base.set(internal_name, base);\n        return resolve(base);\n      } else {\n        return resolve({...this.asset.base.get(internal_name)});\n      }\n    });\n  }\n\n\n  /**\n   * Get the base set of the entity definitions\n   * These is the starting point when it comes to entities\n   * @param internal_name\n   * @param entityId\n   */\n  getParams(internal_name: string): SchemeComponentParamInterface {\n    let widgetParams = null;\n    if (this.asset.param.has(internal_name)) {\n      widgetParams = {...this.asset.param.get(internal_name)};\n    } else {\n      // temporary\n      widgetParams = {internal_name: internal_name, name: TitleCase(SnakeToPascal(internal_name))};\n    }\n    return widgetParams;\n  }\n\n\n  /**\n   * Get the set of tab configs that belong to an entity\n   */\n  getTabs(widget?: SchemeComponentConfig): TabConfig[] {\n    if (IsObject(widget, ['param']) && this.asset.tabs.has(widget.param.internal_name)) {\n      const tabs = this.asset.tabs.get(widget.param.internal_name).filter((tab) => {\n        return EvaluateWhenConditions(widget, tab.when);\n      });\n      return [...tabs];\n    } else {\n      return [];\n    }\n  }\n\n\n  /**\n   * A Http call that gets the entity metadata\n   * @param id Primary Key of the entity\n   */\n  getResources(widget: SchemeComponentConfig): Promise<boolean> {\n    return new Promise(async (resolve) => {\n      if (IsObject(widget.resource, true)) {\n        const success = await this.resource.setCollection(widget.resource);\n        if (success) {\n          this.resource.getCollection(widget.resource);\n          return resolve(true);\n        } else {\n          resolve(false);\n        }\n      } else {\n        resolve(false);\n      }\n    });\n  }\n\n\n  /**\n   * Set the base definitions for an entity\n   * Each entity needs to define these so we know how to talk to the api in regards to it\n   * The api should provide this details as part of the auth token\n   * @param internal_name\n   * @param entityId\n   */\n  setParam(param: SchemeComponentParamInterface) {\n    if (IsObject(param, ['internal_name', 'name'])) {\n      PopLog.info(this.name, `Params set for ${param.internal_name}`, param);\n      this.asset.param.set(param.internal_name, param);\n    }\n  }\n\n\n  /**\n   * Attach a set of tab configs to an entity\n   * @param internal_name\n   * @param tabs\n   */\n  setTab(internal_name: string, tabs: TabConfig[]) {\n    if (IsString(internal_name, true) && Array.isArray(tabs)) {\n      PopLog.info(this.name, `Entity Tabs set for ${internal_name}`, tabs);\n      this.asset.tabs.set(internal_name, tabs);\n    }\n  }\n\n\n  /**\n   * Attach a component to a widget\n   * @param internal_name\n   * @param tabs\n   */\n  setComponent(internal_name: string, component: DynamicComponentInterface) {\n    if (IsString(internal_name, true) && IsObject(component, ['type'])) {\n      PopLog.info(this.name, `Component set for ${internal_name}`, component);\n      this.asset.component.set(internal_name, component);\n    }\n  }\n\n\n  /**\n   * Attach a set of actions to an entity\n   * @param internal_name\n   * @param tabs\n   */\n  setAction(internal_name: string, action: Dictionary<any>): void {\n    if (IsString(internal_name, true) && IsObject(action)) {\n      PopLog.info(this.name, `Action set for ${internal_name}`, action);\n      this.asset.action.set(internal_name, action);\n    }\n  }\n\n\n  /**\n   * Attach a set of resources to an entity\n   * @param internal_name\n   * @param tabs\n   */\n  setResource(internal_name: string, resource: Dictionary<ResourceInterface>): void {\n    if (IsString(internal_name, true) && IsObject(resource)) {\n      PopLog.info(this.name, `Entity Resource set for ${internal_name}`, resource);\n      this.asset.resource.set(internal_name, resource);\n    }\n  }\n\n\n  /**\n   * Attach a set of options to widget\n   * @param internal_name\n   * @param tabs\n   */\n  setOption(internal_name: string, option: SchemeComponentOptionInterface): void {\n    if (IsString(internal_name, true) && IsObject(option)) {\n      PopLog.info(this.name, `Option set for ${internal_name}`, option);\n      this.asset.option.set(internal_name, option);\n    }\n  }\n\n\n  /**\n   * Attach a set of options to widget\n   * @param internal_name\n   * @param tabs\n   */\n  setSetting(internal_name: string, setting: SchemeComponentSettingInterface): void {\n    if (IsString(internal_name, true) && IsObject(setting)) {\n      PopLog.info(this.name, `Setting set for ${internal_name}`, setting);\n      this.asset.setting.set(internal_name, setting);\n    }\n  }\n\n\n  /**\n   * Get extended fields attached to an entity\n   * @param internal_name\n   * @param tabs\n   */\n  getResource(internal_name: string): Dictionary<ResourceInterface> {\n    if (IsString(internal_name, true)) {\n      const resource = this.asset.resource.get(internal_name);\n      return resource ? resource : {};\n    }\n  }\n\n\n  /**\n   * Get extended actions attached to an entity\n   * @param internal_name\n   * @param tabs\n   */\n  getAction(internal_name: string): Dictionary<any> {\n    if (IsString(internal_name, true)) {\n      const action = this.asset.action.get(internal_name);\n      return action ? action : {};\n    }\n  }\n\n\n  /**\n   * Get extended actions attached to an entity\n   * @param internal_name\n   * @param tabs\n   */\n  getSetting(internal_name: string): SchemeComponentSettingInterface {\n    if (IsString(internal_name, true)) {\n      const setting = this.asset.setting.get(internal_name);\n      return setting ? setting : {};\n    }\n  }\n\n\n  /**\n   * Get extended actions attached to an entity\n   * @param internal_name\n   * @param tabs\n   */\n  getOption(internal_name: string): SchemeComponentOptionInterface {\n    if (IsString(internal_name, true)) {\n      const option = this.asset.option.get(internal_name);\n      return option ? option : {};\n    }\n  }\n\n\n  /**\n   * Get extended actions attached to an entity\n   * @param internal_name\n   * @param tabs\n   */\n  getComponent(internal_name: string): DynamicComponentInterface {\n    if (IsString(internal_name, true)) {\n      const component = this.asset.component.get(internal_name);\n      return component ? component : null;\n    }\n  }\n\n\n  ngOnDestroy() {\n    console.log(this.name, `destroyed:${this.id}`);\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n\n\n\n  private _getPreferences(param: SchemeComponentParamInterface): Promise<Dictionary<any>> {\n    return new Promise<Dictionary<any>>((resolve) => {\n      return resolve(<Dictionary<any>>{});\n    });\n\n  }\n\n\n  getDefaultComponentSetting(internalName: string): SchemeComponentSettingInterface {\n    const setting = <SchemeComponentSettingInterface>{\n      client_id: [],\n      account_id: [],\n      campaign_id: [],\n      edit: true,\n      refresh: true\n    };\n\n    return setting;\n  }\n\n\n  getDefaultComponentOption(internalName: string): SchemeComponentOptionInterface {\n    const option = <SchemeComponentOptionInterface>{\n      client_id: [],\n      account_id: [],\n      campaign_id: [],\n      edit: true,\n      refresh: true\n    };\n\n    return option;\n  }\n\n\n}\n","import {\n  ComponentFactoryResolver,\n  Inject,\n  Injector,\n  isDevMode,\n  ModuleWithProviders,\n  NgModule,\n  OnDestroy,\n  Renderer2\n} from '@angular/core';\nimport {BehaviorSubject, forkJoin, Subject, Subscription} from 'rxjs';\nimport {PopBaseService} from '../services/pop-base.service';\nimport {PopCacFilterBarService} from './app/pop-cac-filter/pop-cac-filter.service';\nimport {PopDatetimeService} from '../services/pop-datetime.service';\nimport {PopEntityService} from './entity/services/pop-entity.service';\nimport {PopLogService} from '../services/pop-log.service';\nimport {PopRouteHistoryResolver} from '../services/pop-route-history.resolver';\nimport {PopPipeService} from '../services/pop-pipe.service';\nimport {PopEntityUtilPortalService} from './entity/services/pop-entity-util-portal.service';\nimport {PopRequestService} from '../services/pop-request.service';\nimport {PopTemplateService} from './app/pop-template.service';\nimport {PlatformLocation} from '@angular/common';\nimport {\n  SetServiceInjector,\n  SetPopApp,\n  SetPopAuth,\n  SetPopBusiness,\n  SetPopDate,\n  SetPopEntity,\n  SetPopHistory,\n  SetPopHref,\n  SetPopLogger,\n  SetPopPipe,\n  SetPopPortal,\n  SetPopRequest,\n  SetPopUser,\n  PopBusiness,\n  PopEntity,\n  PopHref,\n  PopLog,\n  PopTask,\n  AppMenusInterface,\n  SetPopRouteAliasMap,\n  Entity,\n  AppGlobalInterface,\n  AppWidgetsInterface,\n  PopUser,\n  AppGlobalParamInterface,\n  PopAuth,\n  PopPipe,\n  SetPopTemplate,\n  AppThemeInterface,\n  SetPopExternalApi,\n  SetPopSchemeComponent,\n  SetPopComponentResolver,\n  SetPopEnv, PopApp, PopTemplate,\n} from '../pop-common.model';\nimport {\n  GetSessionSiteVar,\n  GetSiteVar,\n  IsArray,\n  IsCallableFunction, IsDefined,\n  IsObject, IsString,\n  IsUndefined, SetSessionSiteVar, Sleep,\n  SpaceToHyphenLower, StorageGetter,\n  StringReplaceAll\n} from '../pop-common-utility';\nimport {App, AuthDetails} from '../pop-common-token.model';\n\nimport {EntityGeneralTab, EntityHistoryTab} from './entity/pop-entity-tab/pop-entity-tab.model';\nimport {Router} from '@angular/router';\nimport {HTTP_INTERCEPTORS} from '@angular/common/http';\nimport {HeaderInterceptor, Response401Interceptor} from '../services/pop-base.interceptors';\nimport {DateAdapter} from '@angular/material/core';\nimport {CustomDateAdapter} from './base/pop-field-item/custom-date-adapter';\nimport {MatIconRegistry} from '@angular/material/icon';\nimport {DomSanitizer} from '@angular/platform-browser';\nimport {PopCredentialService} from '../services/pop-credential.service';\nimport {EntityMenu} from './app/pop-left-menu/entity-menu.model';\nimport {ParseModuleRoutesForAliases} from './entity/pop-entity-utility';\nimport {PopErrorRedirectComponent} from './base/pop-redirects/pop-error-redirect/pop-error-redirect.component';\nimport {PopRedirectsModule} from './base/pop-redirects/pop-redirects-module';\nimport {PopRedirectGuard} from './base/pop-redirects/pop-redirect.guard';\nimport {PopCacheRedirectComponent} from './base/pop-redirects/pop-cache-redirect/pop-cache-redirect.component';\nimport {PopCacheRedirectGuard} from './base/pop-redirects/pop-cache-redirect.guard';\nimport {PopGuardRedirectComponent} from './base/pop-redirects/pop-guard-redirect/pop-guard-redirect.component';\nimport {PopRequestExternalService} from '../services/pop-request-external.service';\nimport {PopEntitySchemeComponentService} from \"./entity/services/pop-entity-scheme-component.service\";\n\n\nexport class AppMenus implements AppMenusInterface {\n  private _menus = [];\n\n\n  get(): EntityMenu[] {\n    return this._menus;\n  }\n\n\n  set(menus: EntityMenu[]) {\n    this._menus = menus;\n  }\n\n\n  init(menus: EntityMenu[]): EntityMenu[] {\n    return menus;\n  }\n}\n\n\nexport class AppWidgets implements AppWidgetsInterface {\n  private _widgets = [];\n\n\n  get(): any[] {\n    return this._widgets;\n  }\n\n\n  set(widgets: any[]) {\n    this._widgets = widgets;\n  }\n}\n\n\nexport class AppTheme implements AppThemeInterface {\n  private _theme = 'default';\n  private _contrast: 'light' | 'dark' = 'light';\n  private _name = 'default-light.css';\n  public init = new BehaviorSubject<boolean>(false);\n\n\n  get(): string {\n    return this._name;\n  }\n\n\n  set(theme: string = 'default', contrast: 'light' | 'dark' = 'light') {\n    this._theme = theme;\n    this._contrast = contrast;\n    this._name = `${this._theme}-${this._contrast}.css`;\n    const themeLink = (document.getElementById('themeFileEle') as HTMLLinkElement);\n    if (themeLink) {\n      const existingTheme = StringReplaceAll(themeLink.href.split(PopHref).pop(), '/', '');\n      if (this._name !== existingTheme) {\n        themeLink.href = this._name;\n      }\n    } else {\n      const themeFile = document.createElement('link');\n      themeFile.setAttribute('rel', 'stylesheet');\n      themeFile.setAttribute('type', 'text/css');\n      themeFile.setAttribute('href', this._name);\n      themeFile.setAttribute('id', 'themeFileEle');\n      themeFile.onload = () => {\n        this.init.next(true);\n      };\n      if (typeof themeFile != 'undefined') document.getElementsByTagName('head')[0].appendChild(themeFile);\n    }\n  }\n\n\n  isLoaded() {\n    return this.init.getValue();\n  }\n}\n\n\nexport class AppGlobal implements AppGlobalInterface {\n  private _verified = false;\n  private _modals = 0;\n  private _filter;\n  private _pipes;\n  private _aliases;\n  private _entities;\n  private _security;\n  private _permissions;\n  private _open = false;\n  public init = new BehaviorSubject<boolean>(false);\n  public verification = new Subject<boolean>();\n  public _unload = new Subject<boolean>();\n\n\n  isVerified(): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      const wait = setInterval(() => {\n        if (this._verified) {\n          clearInterval(wait);\n          return resolve(true);\n        }\n      }, 5, 5);\n    });\n  }\n\n\n  setVerified(): void {\n    this._verified = true;\n  }\n\n\n  setModal(): void {\n    this._modals++;\n  }\n\n\n  isModal(): number {\n    return this._modals;\n  }\n\n\n  removeModal(): void {\n    if (this._modals) {\n      this._modals--;\n    }\n  }\n\n\n  isFilterBar(): boolean {\n    return this._filter;\n  }\n\n\n  setFilterBar(value: boolean): void {\n    this._filter = value;\n  }\n\n\n  isPipes(): boolean {\n    return this._pipes;\n  }\n\n\n  setPipes(value: boolean): void {\n    this._pipes = value;\n  }\n\n\n  isAliases(): boolean {\n    return this._aliases;\n  }\n\n\n  setAliases(value: boolean): void {\n    this._aliases = value;\n  }\n\n\n  isEntities(): boolean {\n    return this._entities;\n  }\n\n\n  setEntities(value: boolean): void {\n    this._entities = value;\n  }\n\n\n  setSecurity(value: boolean): void {\n    this._security = value;\n  }\n\n\n  isSecurity(): boolean {\n    return this._security;\n  }\n\n  isPermissions(): boolean {\n    return this._permissions;\n  }\n\n  setPermissions(value: boolean): void {\n    this._permissions = value;\n  }\n\n\n  isOpen(): boolean {\n    return this._open;\n  }\n\n\n  setOpen(value: boolean): void {\n    this._open = value;\n  }\n}\n\n\n@NgModule({\n  imports: [\n    PopRedirectsModule\n  ],\n  declarations: [],\n  exports: [],\n  providers: [PopCredentialService]\n})\n\n\nexport class PopInitializerModule {\n\n  private name = `PopInitializerModule`;\n\n  private businessId;\n\n  private verification = {\n    pending: false,\n    subscription: <Subscription>undefined,\n    debouncer: undefined,\n    trigger: () => {\n      if (this.verification.debouncer) clearTimeout(this.verification.debouncer);\n      this.verification.debouncer = setTimeout(() => {\n        return this._verifyAuthStorage();\n      }, 5);\n    },\n    unload: () => {\n      if (this.verification.subscription) {\n        this.verification.subscription.unsubscribe();\n      }\n      if (this.verification.debouncer) {\n        clearTimeout(this.verification.debouncer);\n      }\n    }\n  };\n\n  private unload = {\n    pending: false,\n    subscription: <Subscription>undefined,\n    debouncer: undefined,\n    trigger: () => {\n      if (this.unload.debouncer) clearTimeout(this.unload.debouncer);\n      this.unload.debouncer = setTimeout(() => {\n        this.unload.run();\n      }, 0);\n    },\n    run: () => {\n      if (this.unload.subscription) {\n        this.unload.subscription.unsubscribe();\n      }\n      this.verification.unload();\n    }\n  };\n\n\n  static forRoot(tasks: PopTask[] = [], appGlobalsParams: AppGlobalParamInterface = {}): ModuleWithProviders<PopInitializerModule> {\n    return {\n      ngModule: PopInitializerModule,\n\n      providers: [\n        {\n          provide: 'APP_GLOBAL',\n          useClass: AppGlobal\n        },\n        {\n          provide: 'APP_GLOBAL_PARAMS',\n          useValue: appGlobalsParams\n        },\n        {provide: HTTP_INTERCEPTORS, useClass: HeaderInterceptor, multi: true},\n        {provide: HTTP_INTERCEPTORS, useClass: Response401Interceptor, multi: true},\n        {provide: DateAdapter, useClass: CustomDateAdapter},\n        {\n          provide: 'APP_INITIALIZER_TASKS',\n          useValue: tasks\n        },\n        {\n          provide: 'APP_MENUS',\n          useClass: AppMenus\n        },\n\n        {\n          provide: 'APP_WIDGETS',\n          useClass: AppWidgets\n        },\n\n        {\n          provide: 'APP_THEME',\n          useClass: AppTheme\n        },\n\n      ]\n    };\n  }\n\n\n  constructor(\n    private base: PopBaseService,\n    private cacFilter: PopCacFilterBarService,\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private credential: PopCredentialService,\n    private date: PopDatetimeService,\n    private entity: PopEntityService,\n    private externalApi: PopRequestExternalService,\n    private log: PopLogService,\n    private history: PopRouteHistoryResolver,\n    private iconRegistry: MatIconRegistry,\n    private pipe: PopPipeService,\n    private portal: PopEntityUtilPortalService,\n    private request: PopRequestService,\n    private router: Router,\n    private sanitizer: DomSanitizer,\n    private schemeComponent: PopEntitySchemeComponentService,\n    private template: PopTemplateService,\n    private platform: PlatformLocation,\n    @Inject(Injector) private injector,\n    @Inject('APP_INITIALIZER_TASKS') public tasks: PopTask[],\n    @Inject('APP_GLOBAL') public APP_GLOBAL: AppGlobalInterface,\n    @Inject('APP_GLOBAL_PARAMS') public APP_GLOBAL_PARAMS: AppGlobalParamInterface,\n    @Inject('APP_THEME') public APP_THEME: AppThemeInterface,\n    @Inject('env') private env?,\n  ) {\n    this.iconRegistry.addSvgIcon('admin', this.sanitizer.bypassSecurityTrustResourceUrl('assets/images/admin.svg'));\n\n    const setup = new Promise<boolean>(async (resolve) => {\n      const auth = this.base.getAuthDetails();\n      const login = GetSessionSiteVar('Login.time', 0);\n\n      try {\n        this._setBusinessId(auth);\n      } catch (e) {\n        console.log(e);\n      }\n\n      const publicFacingApp = this.APP_GLOBAL_PARAMS.open ? true : false;\n      if (!publicFacingApp && IsObject(auth, ['id', 'businesses', 'users', 'token', 'email_verified_at']) && !(this.base.isAuthExpired())) {\n        await this._loadAppTheme();\n        await this._init(auth);\n        PopLog.init(this.name, `:publicFacingApp`, publicFacingApp);\n        /** This is experimental testing if app can be speed up  **/\n        if (this.businessId && StorageGetter(auth, ['businesses', this.businessId, 'apps']) && !login) {\n          PopLog.init(this.name, `:fire app early?`);\n          this.APP_GLOBAL.setVerified();\n          this.APP_GLOBAL.init.next(true);\n        }\n        /** *********************** **/\n\n        const verified = await this._verifyAuthStorage();\n        if (!verified) {\n          if (!isDevMode()) {\n            if (false) {\n              this.base.clearAuthDetails(`PopInitializerModule:setup`);\n              window.location.href = window.location.protocol + '//' + window.location.host + '/user/legacy/auth/clear';\n            } else {\n              PopLog.init(this.name, `:verification failed`);\n              this.APP_GLOBAL.setVerified();\n              this.APP_GLOBAL.init.next(true);\n              return resolve(true);\n            }\n\n          } else {\n            PopLog.init(this.name, `:verification failed`);\n            this.APP_GLOBAL.init.next(true);\n            return resolve(true);\n          }\n        } else {\n          this._welcome();\n\n          return resolve(true);\n        }\n\n        // if(this.APP_GLOBAL.isSecurity() && IsString(PopHref, true)) {\n        //   this.base.checkAppAccess(PopHref, true);\n        // }\n      } else {\n        SetSessionSiteVar('App.theme', null);\n        SetSessionSiteVar('App.themeContrast', null);\n        await this._loadAppTheme();\n        await this._setDependencies(false, null);\n        if (this.APP_GLOBAL.isOpen()) {\n          this.APP_GLOBAL.setVerified();\n          this.APP_GLOBAL.init.next(true);\n          return resolve(true);\n        } else {\n          this.APP_GLOBAL.init.next(true);\n          return resolve(true);\n        }\n      }\n    });\n\n    setup.catch((e) => {\n      if (isDevMode()) console.log('e', e);\n      this.APP_GLOBAL.init.next(true);\n    });\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  /**\n   * Load the app dependencies\n   * @param business\n   */\n  private _setDependencies(authenticated: boolean, auth: AuthDetails): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      this.APP_GLOBAL.setAliases(IsDefined(this.env.aliases) ? this.env.aliases : (IsDefined(this.APP_GLOBAL_PARAMS.aliases) ? this.APP_GLOBAL_PARAMS.aliases : true));\n      this.APP_GLOBAL.setFilterBar(IsDefined(this.env.filter) ? this.env.filter : (IsDefined(this.APP_GLOBAL_PARAMS.filter) ? this.APP_GLOBAL_PARAMS.aliases : true));\n      this.APP_GLOBAL.setPipes(IsDefined(this.env.pipes) ? this.env.pipes : (IsDefined(this.APP_GLOBAL_PARAMS.pipes) ? this.APP_GLOBAL_PARAMS.pipes : true));\n      this.APP_GLOBAL.setEntities(IsDefined(this.env.entities) ? this.env.entities : (IsDefined(this.APP_GLOBAL_PARAMS.entities) ? this.APP_GLOBAL_PARAMS.entities : true));\n      this.APP_GLOBAL.setOpen(IsDefined(this.env.open) ? this.env.open : (IsDefined(this.APP_GLOBAL_PARAMS.open) ? this.APP_GLOBAL_PARAMS.open : false));\n      this.APP_GLOBAL.setSecurity(IsDefined(this.env.security) ? this.env.security : (IsDefined(this.APP_GLOBAL_PARAMS.security) ? this.APP_GLOBAL_PARAMS.security : false));\n      this.APP_GLOBAL.setPermissions(IsDefined(this.env.permissions) ? this.env.permissions : (IsDefined(this.APP_GLOBAL_PARAMS.permissions) ? this.APP_GLOBAL_PARAMS.permissions : false));\n\n      SetServiceInjector(this.injector);\n      SetPopEnv(this.env ? this.env : {});\n      SetPopExternalApi(this.externalApi);\n      SetPopHref(StringReplaceAll(this.platform.getBaseHrefFromDOM(), '/', ''));\n      SetPopLogger(this.log);\n      SetPopRequest(this.request);\n      SetPopTemplate(this.template);\n      SetPopComponentResolver(this.componentFactoryResolver);\n      if (authenticated) {\n        SetPopDate(this.date);\n        SetPopHistory(this.history);\n        SetPopEntity(this.entity);\n        SetPopPipe(this.pipe);\n        SetPopPortal(this.portal);\n        SetPopSchemeComponent(this.schemeComponent);\n        this._setAuthGlobal(auth);\n        this._setBusinessId(auth);\n        await Promise.all([\n          this._setRouteCacheClear(),\n          this._setRouteErrorHandling(),\n          this._setBusinessAssets(auth),\n          this._loadPipeResources(),\n        ]);\n        await this._loadFilterData();\n\n      }\n      return resolve(true);\n    });\n  }\n\n\n  private _init(auth: AuthDetails): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      await this._setDependencies(true, auth);\n      await this._setAncillary(auth);\n      await this._configure(auth);\n      this.APP_GLOBAL.init.next(true);\n      if (!this.unload.subscription) {\n        PopLog.init(this.name, `registering unload request subscription`);\n        this.unload.subscription = this.APP_GLOBAL._unload.subscribe(() => {\n          PopLog.init(this.name, `unload: requested`);\n          this.unload.trigger();\n        });\n      }\n      return resolve(true);\n    });\n  }\n\n\n  private _setAncillary(auth: AuthDetails): Promise<boolean> {\n    return new Promise(async (resolve) => {\n      await this._tasks();\n      return resolve(true);\n    });\n  }\n\n\n  private _configure(auth: AuthDetails) {\n    return new Promise<boolean>(async (resolve) => {\n      if (IsObject(auth, ['id', 'businesses', 'users', 'token']) && !(this.base.isAuthExpired()) && PopHref) {\n        if (IsObject(PopBusiness, ['id'])) {\n          await Promise.all([\n            this._setBusinessUserSettings(),\n            this._setFilterAliases(),\n            this._setRouteAliasMap(),\n            this._setDefaultTabs(),\n          ]);\n          return resolve(true);\n        } else {\n          PopLog.init(this.name, `No Business Found`);\n          return resolve(true);\n        }\n      } else {\n        return resolve(true);\n      }\n    });\n  }\n\n\n  private _tasks() {\n    return new Promise<boolean>(async (resolve) => {\n      if (IsObject(PopBusiness, true)) {\n        if (IsArray(this.tasks, true)) {\n          this.tasks.map((task) => {\n            if (IsCallableFunction(task)) {\n              task();\n            }\n          });\n        }\n      }\n      return resolve(true);\n    });\n  }\n\n\n  private _setAuthGlobal(auth: AuthDetails) {\n    SetPopAuth({\n      id: auth.id,\n      name: auth.name,\n      first_name: auth.first_name,\n      last_name: auth.last_name,\n      initials: auth.initials,\n      email: auth.email,\n      email_verified_at: auth.email_verified_at,\n      avatarLink: StorageGetter(auth, ['profile', 'avatar_link'], null),\n      username: auth.username,\n      created_at: auth.created_at\n    });\n  }\n\n\n  private _setBusinessId(auth: AuthDetails) {\n    if (IsUndefined(this.businessId)) this.businessId = 0;\n    if (IsObject(auth.businesses, true)) {\n      if (!this.businessId) this.businessId = String(GetSiteVar('Business.last', 0));\n      if (!(+this.businessId && this.businessId in auth.businesses)) {\n        this.businessId = this.base.getCurrentBusinessId();\n      }\n      if (+this.businessId && this.businessId in auth.businesses) {\n        this.businessId = +this.businessId;\n      } else if (+auth.business_fk && auth.business_fk in auth.businesses) {\n        this.businessId = +auth.business_fk;\n      } else {\n        this.businessId = IsObject(auth.businesses, true) ? +Object.keys(auth.businesses)[0] : 0;\n      }\n    }\n  }\n\n\n  /**\n   * Verify that the current auth storage is still relevant\n   * @private\n   */\n  private _verifyAuthStorage(): Promise<boolean> {\n    return new Promise(async (resolve) => {\n      if (IsObject(PopAuth, ['created_at']) && IsDefined(PopAuth.email_verified_at, false) && !this.verification.pending) {\n        PopLog.init(this.name, `Verification: In Progress`);\n        if (!this.businessId) {\n          PopLog.init(this.name, `Verification:Complete - no business`);\n          this.APP_GLOBAL.setVerified();\n          return resolve(true);\n        }\n        this.verification.pending = true;\n        const auth = await this.credential.verify(this.businessId);\n        if (auth) {\n          this._setAuthGlobal(auth);\n          this._setBusinessId(auth);\n          await Promise.all([\n            this._setBusinessAssets(auth),\n            this._loadAppTheme(),\n            this._setAncillary(auth),\n            this._configure(auth),\n            this._setRouteAliases()\n          ]);\n\n          this.APP_GLOBAL.setVerified();\n          PopLog.init(this.name, `Verification: Complete`);\n          this.verification.pending = false;\n          this.APP_GLOBAL.init.next(true);\n          if (!this.verification.subscription) {\n            PopLog.init(this.name, `registering verification request subscription`);\n            this.verification.subscription = this.APP_GLOBAL.verification.subscribe(() => {\n              PopLog.init(this.name, `_verifyAuthStorage: requested`);\n              this.verification.trigger();\n            });\n          }\n          return resolve(true);\n        } else {\n          return resolve(false);\n        }\n      } else {\n        return resolve(false);\n      }\n\n    });\n  }\n\n\n  /**\n   * This fx will set up all the necessary business assets that are needed\n   * @param auth\n   * @private\n   */\n  private _setBusinessAssets(auth: AuthDetails) {\n    return new Promise(async (resolve) => {\n      if (+this.businessId && IsObject(auth, ['id', 'businesses', 'users', 'token'])) {\n        this.base.setCurrentBusinessId(+this.businessId);\n        SetPopUser(IsObject(auth.users, true) && this.businessId in auth.users ? auth.users[this.businessId] : null);\n        SetPopBusiness(IsObject(auth.businesses, true) && this.businessId in auth.businesses ? auth.businesses[this.businessId] : null);\n        SetPopApp(IsObject(PopBusiness.apps, [PopHref]) ? PopBusiness.apps[PopHref] : null);\n        // if (!IsObject(PopApp, ['id', 'name'])) {\n        //   if (!isDevMode()) {\n        //     window.location.href = window.location.protocol + '//' + window.location.host + '/home';\n        //   }\n        // }\n        await this._setBusinessAppEntities();\n      }\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * This fx will loop through all the apps in the current business, and for each entity in that business register the details\n   */\n  private _setBusinessAppEntities() {\n    return new Promise(async (resolve) => {\n      const auth = this.base.getAuthDetails();\n      if (IsObject(PopBusiness, ['id', 'apps']) && IsObject(PopBusiness.apps, true)) {\n        const inaccessibleApps = [];\n        const permanentApps = ['library', 'home'];\n        // console.log('PopUser', PopUser);\n        Object.keys(PopBusiness.apps).map((appName) => {\n          const app = PopBusiness.apps[appName];\n          app.hasCreateAccess = false;\n          if (IsObject(app, true) && IsObject(app.entities, true)) {\n            Object.keys(app.entities).map((name: string) => {\n              if (IsObject(app.entities[name], ['id', 'name', 'internal_name'])) {\n                const entity = app.entities[name];\n                entity.access = {};\n\n                if (IsObject(PopUser, ['permissions']) && IsObject(PopUser.permissions, true) && entity.internal_name in PopUser.permissions) {\n                  entity.access = PopUser.permissions[entity.internal_name];\n                  // console.log(entity.internal_name, entity.access.can_read);\n                }\n                if (entity.access.can_create) app.hasCreateAccess = true;\n                PopEntity.setEntityParams(entity);\n                PopPipe.updateEntityAlias(entity.id, entity.alias);\n              }\n            });\n          }\n          if (this.APP_GLOBAL.isEntities() && !app.hasCreateAccess) {\n\n            if (!(permanentApps.includes((app.name)))) {\n              inaccessibleApps.push(app.name);\n            }\n\n          }\n        });\n        // console.log('inaccessibleApps', inaccessibleApps);\n        if (IsArray(inaccessibleApps, true)) {\n          inaccessibleApps.map((appName2: string) => {\n            delete PopBusiness.apps[appName2];\n            delete auth.businesses[PopBusiness.id].apps[appName2];\n          });\n        }\n        this.base.setAuthDetails(auth);\n      }\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * Load the client,account,campaign data required for the filter bar\n   * @param business\n   */\n  private _setBusinessUserSettings(): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      if (IsObject(PopBusiness, ['id'])) {\n        this.date.setCurrentBusinessUnitSettings();\n        PopLog.init(this.name, `:BusinessUserSettings`);\n        return resolve(true);\n      } else {\n        return resolve(true);\n      }\n    });\n  }\n\n\n  private _welcome() {\n    if (IsObject(PopAuth, ['created_at'])) {\n      const now = new Date().getTime() / 1000;\n      const loginTime = new Date(PopAuth.created_at).getTime() / 1000;\n      const secondsSinceLogin = (now - loginTime);\n      const welcome = +secondsSinceLogin && +secondsSinceLogin < 20;\n      if (welcome) {\n        this.template.welcome();\n      }\n    }\n  }\n\n\n  /**\n   * Load the client,account,campaign data required for the filter bar\n   * @param business\n   */\n  private _loadFilterData() {\n    return new Promise(async (resolve) => {\n\n      if (this.APP_GLOBAL.isFilterBar() && IsObject(PopBusiness, ['id'])) {\n        if (PopEntity.checkAccess('client', 'can_read')) {\n          await this.cacFilter.setData(this.name);\n          PopLog.init(this.name, `:Filter Data Set`);\n        } else {\n          PopTemplate.turnOffFilter();\n        }\n        return resolve(true);\n      } else {\n        return resolve(true);\n      }\n    });\n  }\n\n\n  /**\n   * Load the resources needed for the PopPipe service\n   * @param business\n   */\n  private _loadPipeResources() {\n    return new Promise(async (resolve) => {\n      if (this.APP_GLOBAL.isPipes() && IsObject(PopBusiness, ['id'])) {\n        this.pipe.loadResources().then(() => {\n          PopLog.init(this.name, `:Pipe Resources Set`);\n          return resolve(true);\n        });\n      } else {\n        return resolve(false);\n      }\n    });\n  }\n\n\n  /**\n   * Set any aliases on the filter columns\n   * @private\n   */\n  private _setFilterAliases(): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      if (this.APP_GLOBAL.isFilterBar() && this.APP_GLOBAL.isEntities() && this.APP_GLOBAL.isAliases()) this.cacFilter.setConfigAliases();\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * Create a map lookup for route aliases\n   * @private\n   */\n  private _setRouteAliasMap(): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      const aliasMap: { client?: string; account?: string, campaign?: string, profile?: string } = {};\n      if (this.APP_GLOBAL.isEntities() && this.APP_GLOBAL.isAliases()) {\n        const auth = <AuthDetails>GetSiteVar('Auth.details', {});\n        if (+this.businessId && IsObject(auth, ['businesses']) && IsObject(auth.businesses[this.businessId], ['apps'])) {\n          if (IsObject(auth.businesses[this.businessId].apps, true)) {\n            Object.keys(auth.businesses[this.businessId].apps).map((appName) => {\n              const app = <App>auth.businesses[this.businessId].apps[appName];\n              if (IsObject(app.entities, true)) {\n                Object.keys(app.entities).map((key) => {\n                  const entity = <Entity>app.entities[key];\n                  if (IsObject(app.entities[key], true) && IsObject(app.entities[key].alias, ['plural'])) {\n                    aliasMap[entity.internal_name] = {\n                      singular: SpaceToHyphenLower(app.entities[key].alias.name),\n                      plural: SpaceToHyphenLower(app.entities[key].alias.plural)\n                    };\n                  }\n                });\n              }\n            });\n          }\n        }\n      }\n      SetPopRouteAliasMap(aliasMap);\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * Get the router.config and load all lazy module using the configLoader\n   */\n  private _setRouteAliases() {\n    return new Promise<boolean>(async (resolve) => {\n      if (this.APP_GLOBAL.isEntities() && this.APP_GLOBAL.isAliases()) {\n        this.router.config = ParseModuleRoutesForAliases(this.router.config);\n        this.router.config.reduce(\n          (acc, route: any) => {\n            if (route.loadChildren && route.data && route.data.routeAliases) {\n              (<any>this.router).configLoader.load(this.injector, route).subscribe({\n                next: (moduleConf) => {\n                  route._loadedConfig = moduleConf;\n                  ParseModuleRoutesForAliases(moduleConf.routes);\n                  return route.path;\n                }\n              });\n            }\n            return acc;\n          }, []\n        );\n        await Sleep(5);\n        return resolve(true);\n      } else {\n        await Sleep(5);\n        return resolve(true);\n      }\n    });\n  }\n\n  /**\n   * Get the router.config and load all lazy module using the configLoader\n   */\n  private _setRouteCacheClear() {\n    return new Promise<boolean>(async (resolve) => {\n      if (true) {\n        const cacheRoute = this.router.config.find((route) => route.path === 'system/cache/clear');\n        if (!cacheRoute) {\n          this.router.config = [...this.router.config, ...[{\n            path: 'system/cache/clear',\n            pathMatch: 'full',\n            canActivate: [PopCacheRedirectGuard],\n            component: PopCacheRedirectComponent\n          }]];\n        }\n        return resolve(true);\n      } else {\n        return resolve(true);\n      }\n    });\n  }\n\n\n  /**\n   * Get the router.config and load all lazy module using the configLoader\n   */\n  private _setRouteErrorHandling() {\n    return new Promise<boolean>(async (resolve) => {\n      if (true) {\n        const guardBlockRoute = this.router.config.find((route) => route.path === 'system/route');\n        if (!guardBlockRoute) {\n          this.router.config = [...this.router.config, ...[{\n            path: 'system/route',\n            pathMatch: 'full',\n            component: PopGuardRedirectComponent\n          }]];\n        }\n\n        const errorRoute = this.router.config.find((route) => route.path === 'system/error/:code');\n        if (!errorRoute) {\n          this.router.config = [...this.router.config, ...[{\n            path: 'system/error/:code',\n            pathMatch: 'full',\n            canActivate: [PopRedirectGuard],\n            component: PopErrorRedirectComponent\n          }]];\n        }\n        return resolve(true);\n      } else {\n        return resolve(true);\n      }\n    });\n  }\n\n\n  /**\n   * Load the theme of the business and apply the theme contrast the user has specified\n   * @param business\n   */\n  private _loadAppTheme() {\n    return new Promise(async (resolve) => {\n\n      let businessTheme = IsObject(PopUser, ['id']) ? StorageGetter(PopUser, ['setting', 'theme'], null) : null;\n      if (!businessTheme) businessTheme = GetSessionSiteVar(`App.theme`, 'default');\n      let userThemeContrast = IsObject(PopUser, ['id']) ? StorageGetter(PopUser, ['setting', 'theme_contrast'], null) : null;\n      if (!userThemeContrast) userThemeContrast = GetSessionSiteVar(`App.themeContrast`, 'light');\n      SetSessionSiteVar('App.theme', businessTheme);\n      SetSessionSiteVar('App.themeContrast', userThemeContrast);\n\n      this.APP_THEME.set(businessTheme, userThemeContrast);\n\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * Set a default set of tabs that an entity should have, intended to be overridden\n   * @param business\n   */\n  private _setDefaultTabs() {\n    return new Promise(async (resolve) => {\n      if (this.APP_GLOBAL.isEntities()) PopEntity.setEntityTabs('default', [EntityGeneralTab, EntityHistoryTab]);\n      return resolve(true);\n    });\n  }\n}\n","import { Inject, Injectable } from '@angular/core';\nimport { PopBaseService } from '../../../../services/pop-base.service';\nimport { PopBusiness } from '../../../../pop-common.model';\nimport { GetSessionSiteVar, SetSessionSiteVar, TitleCase } from '../../../../pop-common-utility';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PopTabMenuSectionBarService {\n\n  constructor(\n    private baseRepo: PopBaseService,\n    @Inject('env') private readonly env?\n  ){\n  }\n\n  /**\n   * Store the current tab into onSession memory\n   * @param name\n   * @returns void\n   */\n  setSectionSession(internal_name: string, slug: string): void{\n    if( internal_name ) SetSessionSiteVar(`Business.${PopBusiness.id}.Entity.${TitleCase(internal_name)}.TabMenu.Main.section`, slug);\n  }\n\n\n  /**\n   * Get latest path\n   */\n  getPathSession(internal_name: string){\n    return GetSessionSiteVar(`Business.${PopBusiness.id}.Entity.${TitleCase(internal_name)}.TabMenu.Main.section`);\n  }\n\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit, ViewChild, ViewContainerRef } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Location } from '@angular/common';\nimport { Dictionary, DynamicComponentInterface, SectionConfig, SectionInterface, ServiceInjector } from '../../../../pop-common.model';\nimport { PopExtendDynamicComponent } from '../../../../pop-extend-dynamic.component';\nimport { TabConfig } from '../tab-menu.model';\nimport { PopDomService } from '../../../../services/pop-dom.service';\nimport { PopTabMenuService } from '../pop-tab-menu.service';\nimport { PopTabMenuSectionBarService } from './pop-tab-menu-section-bar.service';\nimport { ArrayMapSetter, IsArray } from '../../../../pop-common-utility';\n\n\n@Component( {\n  selector: 'lib-pop-tab-section-bar',\n  templateUrl: './pop-tab-menu-section-bar.component.html',\n  styleUrls: [ './pop-tab-menu-section-bar.component.scss' ],\n} )\nexport class PopTabMenuSectionBarComponent extends PopExtendDynamicComponent implements OnInit, OnDestroy {\n  @Input() sections: SectionConfig[];\n  @Input() overflow = false;\n  @ViewChild( 'container', { read: ViewContainerRef, static: true } ) public container;\n\n  public name = 'PopTabMenuSectionBarComponent';\n\n  protected srv = {\n    location: <Location>ServiceInjector.get( Location ),\n    router: <Router>ServiceInjector.get( Router ),\n    route: <ActivatedRoute>undefined,\n    section: <PopTabMenuSectionBarService>ServiceInjector.get( PopTabMenuSectionBarService ),\n    tab: <PopTabMenuService>undefined\n  };\n\n  public ui = {};\n\n  protected asset = {\n    tab: <TabConfig>undefined,\n    baseUrl: <string>undefined,\n    urlSection: <string>undefined,\n    map: <Dictionary<any>>{}\n  };\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService,\n    protected _routeRepo: ActivatedRoute,\n    protected _tabRepo: PopTabMenuService,\n  ){\n    super();\n\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n\n        await this._setCore();\n        await this._setRoute();\n        await this._setSections();\n        await this._setHeight();\n        await this._attachContainer();\n\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * Setup this component\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * This will load the comonent of the selected section into the view container\n   * @param section\n   */\n  onViewSection( section: SectionInterface ){\n\n    this.dom.active.section = section.id;\n    this.srv.section.setSectionSession( 'profile', section.id );\n    this.srv.location.go( this.asset.baseUrl + '?section=' + section.id );\n    this.dom.setTimeout( `view-section`, () => {\n      this.template.render( [ <DynamicComponentInterface>{\n        type: section.component,\n        inputs: section.inputs,\n        position: this.position,\n      } ] );\n    }, 0 );\n  }\n\n\n  /**\n   * Clean up the dom of this component\n   */\n  ngOnDestroy(): void{\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Protected Method )                                      *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  protected _setCore(): Promise<boolean>{\n    return new Promise( async( resolve ) => {\n      return resolve( true );\n    } );\n  }\n\n\n  protected _setRoute(): Promise<boolean>{\n    return new Promise( async( resolve ) => {\n      const url = String( this.srv.router.url ).split( '?' )[ 0 ];\n      const slugs = url.split( '/' );\n      this.asset.baseUrl = slugs.join( '/' );\n      if( this.srv.section.getPathSession( this.core.params.internal_name ) ) this.asset.urlSection = <string>this.srv.section.getPathSession( this.core.params.internal_name );\n      this.dom.setSubscriber( 'query-params', this.srv.route.queryParams.subscribe( params => {\n        if( params.section ) this.asset.urlSection = params.section;\n      } ) );\n      return resolve( true );\n    } );\n\n  }\n\n\n  protected _setSections(): Promise<boolean>{\n    return new Promise( async( resolve ) => {\n      this.asset.tab = <TabConfig>this.srv.tab.getTab();\n      this.dom.active.section = undefined;\n      if( !this.sections && this.asset.tab.sections ){\n        this.sections = <SectionConfig[]>this.asset.tab.sections;\n      }\n      this.asset.map.sections = ArrayMapSetter( this.sections, 'id' );\n      return resolve( true );\n    } );\n  }\n\n\n  protected _setHeight(): Promise<boolean>{\n    return new Promise( async( resolve ) => {\n\n      const defaultHeight = window.innerHeight - 230;\n      this.dom.setHeight( defaultHeight, 60 );\n\n      return resolve( true );\n    } );\n\n  }\n\n\n  protected _attachContainer(): Promise<boolean>{\n    return new Promise( async( resolve ) => {\n\n      this.template.attach( 'container' );\n      if( IsArray( this.sections, true ) ){\n        if( this.asset.urlSection in this.asset.map.sections ){\n          this.onViewSection( this.sections[ this.asset.map.sections [ this.asset.urlSection ] ] );\n        }else{\n          this.onViewSection( this.sections[ 0 ] );\n        }\n      }\n\n      return resolve( true );\n    } );\n\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport { HttpClientModule } from '@angular/common/http';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatTabsModule } from '@angular/material/tabs';\nimport { MatButtonModule } from '@angular/material/button';\nimport { PopTabMenuComponent } from './pop-tab-menu.component';\nimport { PopIndicatorsModule } from '../pop-indicators/pop-indicators.module';\nimport { MatProgressBarModule } from '@angular/material/progress-bar';\nimport { PopTabMenuSectionBarComponent } from './pop-tab-menu-section-bar/pop-tab-menu-section-bar.component';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    HttpClientModule,\n    RouterModule,\n    MatIconModule,\n    MatTabsModule,\n    MatButtonModule,\n    MatProgressBarModule,\n    PopIndicatorsModule,\n  ],\n  declarations: [\n    PopTabMenuComponent,\n    PopTabMenuSectionBarComponent\n  ],\n  exports: [\n    PopTabMenuComponent\n  ],\n  providers: [],\n\n})\nexport class PopTabMenuModule {\n}\n","import { Component, Inject } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport { PopRouteHistoryResolver } from '../../../../services/pop-route-history.resolver';\n\n\n@Component({\n  selector: 'lib-pop-error',\n  templateUrl: './error.component.html',\n  styles: []\n})\nexport class ErrorComponent{\n\n  constructor(\n    @Inject(MAT_DIALOG_DATA) public data,\n    private dialog: MatDialogRef<ErrorComponent>,\n    private history: PopRouteHistoryResolver\n  ){}\n\n  goBack(){\n    this.history.goBack();\n    this.dialog.close();\n  }\n}\n","import { AfterViewInit, Component, Input } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { ErrorComponent } from './error/error.component';\n\n@Component({\n  selector: 'lib-pop-errors',\n  templateUrl: './pop-errors.component.html',\n  styleUrls: ['./pop-errors.component.scss']\n})\nexport class PopErrorsComponent implements AfterViewInit{\n\n  @Input() error: { code:number, message:string };\n\n  constructor(public dialog: MatDialog){}\n\n  ngAfterViewInit(){\n    setTimeout(()=>{\n      this.loadErrorDialog();\n    }, 500);\n  }\n\n  loadErrorDialog(){\n    this.dialog.open(ErrorComponent, { data: { code: this.error.code, message: this.error.message } } );\n  }\n}\n","import { NgModule } from \"@angular/core\";\nimport { MaterialModule } from '../../material/material.module';\nimport { PopErrorsComponent } from './pop-errors.component';\nimport { ErrorComponent } from './error/error.component';\n\n\n@NgModule({\n    declarations: [\n        PopErrorsComponent,\n        ErrorComponent,\n    ],\n    imports: [MaterialModule],\n    exports: [\n        PopErrorsComponent,\n    ],\n})\nexport class PopErrorsModule {\n}\n","import { Component, ElementRef, EventEmitter, Inject, Input, OnDestroy, OnInit, Output } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialog, MatDialogRef } from '@angular/material/dialog';\nimport { FormGroup } from '@angular/forms';\nimport { PopBaseEventInterface, ServiceInjector } from '../../../../pop-common.model';\nimport { PopExtendComponent } from '../../../../pop-extend.component';\nimport { PopEntityEventService } from '../../../entity/services/pop-entity-event.service';\nimport { PopRequestService } from '../../../../services/pop-request.service';\nimport { Router } from '@angular/router';\nimport { slideInOut } from '../../../../pop-common-animations.model';\nimport { IsValidFieldPatchEvent, ParseLinkUrl } from '../../../entity/pop-entity-utility';\nimport { FieldItemGroupConfig } from '../pop-field-item-group.model';\nimport { GetHttpErrorMsg, IsCallableFunction, IsString } from '../../../../pop-common-utility';\n\n\n@Component( {\n  selector: 'lib-in-dialog',\n  templateUrl: './in-dialog.component.html',\n  styleUrls: [ './in-dialog.component.scss' ],\n  animations: [\n    slideInOut\n  ]\n} )\nexport class InDialogComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Output() events: EventEmitter<PopBaseEventInterface> = new EventEmitter<PopBaseEventInterface>();\n  @Input() http = 'POST';\n  public name = 'InDialogComponent';\n\n  protected srv: {\n    events: PopEntityEventService,\n    request: PopRequestService,\n    router: Router\n  } = {\n    events: ServiceInjector.get( PopEntityEventService ),\n    request: ServiceInjector.get( PopRequestService ),\n    router: ServiceInjector.get( Router ),\n  };\n\n  public asset = {\n    visible: 0\n  };\n\n  public ui = {\n    form: <FormGroup>undefined\n  };\n\n\n  constructor(\n    public el: ElementRef,\n    public dialog: MatDialogRef<InDialogComponent>,\n    @Inject( MAT_DIALOG_DATA ) public config: FieldItemGroupConfig,\n  ){\n    super();\n\n    /**\n     * This should transformValue and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n        const fieldItems = {};\n        this.dom.state.validated = false;\n        if( !this.config.inDialog.submit ) this.config.inDialog.submit = 'Submit';\n        this.config.fieldItems.map( ( field ) => {\n          if( field.config && field.config.control ){\n            fieldItems[ field.config.name ] = field.config.control;\n            this.asset.visible++;\n          }\n        } );\n        this.dom.setHeight( this.asset.visible * 40, 0 );\n        this.ui.form = new FormGroup( fieldItems );\n\n        resolve( true );\n      } );\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n\n        this._triggerFormValidation();\n\n        resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * Intercept the enter press to check if the form can be submitted\n   * @param event\n   */\n  onEnterPress( event ){\n    event.preventDefault();\n    event.stopPropagation();\n    if( this.dom.state.validated ){\n      this.dom.setTimeout( `submit-form`, () => {\n        return this.onFormSubmit();\n      }, 500 );\n\n    }\n  }\n\n\n  /**\n   * The user will press enter or click a submit btn to submit the form\n   */\n  onFormSubmit(){\n    return new Promise<boolean>( async( resolve ) => {\n      if( this.dom.state.validated && !this.dom.state.pending ){\n        this._onSubmissionStart();\n        const params = this.ui.form.value; // get form value before disabling form\n        // this.dom.asset.form_group.disable(); //bad idea disabled through css\n        const request = this.http === 'POST' ? this.srv.request.doPost( this.config.inDialog.postUrl, params, ( this.config.inDialog.postUrlVersion !== null ? this.config.inDialog.postUrlVersion : 1 ) ) : this.srv.request.doPatch( this.config.inDialog.postUrl, params, ( this.config.inDialog.postUrlVersion !== null ? this.config.inDialog.postUrlVersion : 1 ) );\n        request.subscribe( async( result: any ) => {\n            const goToUrl = this.config.inDialog.goToUrl;\n            result = result.data ? result.data : result;\n            this.config.entity = result;\n            await this._onSubmissionSuccess();\n            this.dialog.close( this.config.entity );\n            if( IsString( goToUrl, true ) ){\n              const newGoToUrl = ParseLinkUrl( String( goToUrl ).slice(), this.config.entity );\n              this.srv.router.navigate( [ newGoToUrl ] ).catch( ( e ) => {\n                console.log( e );\n              } );\n            }\n            return resolve( true );\n          },\n          err => {\n            this._onSubmissionFail();\n            this._setErrorMessage( err );\n            return resolve( false );\n          }\n        );\n      }\n    } );\n  }\n\n\n  /**\n   * The user can click a canel btn to close the form dialog\n   */\n  onFormCancel(){\n    this.dom.state.loaded = false;\n    this.dom.setTimeout( `close-modal`, () => {\n      this.config.entity = null;\n      this.dialog.close( -1 );\n    }, 500 );\n  }\n\n\n  /**\n   * Handle the form events to trigger the form validation\n   * @param event\n   */\n  onBubbleEvent( event ){\n    if( event.name === 'onKeyUp' ){\n      this.dom.state.validated = false;\n      this.dom.setTimeout( `trigger-validation`, () => {\n        this._triggerFormValidation();\n      }, 500 );\n\n    }\n    if( IsValidFieldPatchEvent( this.core, event ) || event.name === 'onBlur' ){\n      this.dom.setTimeout( `trigger-validation`, () => {\n        this._triggerFormValidation();\n      }, 500 );\n    }else{\n      // if a field is focused we want a chance to validate again\n      // this.dom.state.validated = false;\n    }\n    // if( event.type === 'field' && event.name === 'onChange' ) event.form = this.ui.form;\n    this.events.emit( event );\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  /**\n   * This fx will trigger the form validation\n   * @private\n   */\n  private _triggerFormValidation(){\n    this.dom.setTimeout( `trigger-form-validation`, () => {\n      this._validateForm().then( ( valid: boolean ) => {\n        this.dom.state.validated = valid;\n      } );\n    }, 50 );\n  }\n\n\n  /**\n   * The form needs to able to make api calls to verify info for certain fields\n   * ToDo:: Allow the config to be able to pass in api validation calls for certain fields\n   * @private\n   */\n  private _validateForm(): Promise<boolean>{\n    return new Promise<boolean>( ( resolve ) => {\n      this.dom.state.validated = false;\n      this.dom.setTimeout( `trigger-form-validation`, null );\n      this.dom.setTimeout( `validate-form`, () => {\n        this.ui.form.updateValueAndValidity();\n        setTimeout( () => {\n          this.dom.state.validated = true; // mock stub for now\n          return resolve( this.ui.form.valid );\n        }, 0 );\n      }, 0 );\n    } );\n  }\n\n\n  /**\n   * This hook is called when the form is submitting\n   * @private\n   */\n  private _onSubmissionStart(){\n    this.dom.state.pending = true;\n    this.dom.setTimeout( `submit-form`, null );\n    this.dom.setTimeout( `trigger-validation`, null );\n    this.dom.setTimeout( `trigger-form-validation`, null );\n    this.dom.setTimeout( `validate-form`, null );\n    this.dom.error.message = '';\n    this.dom.setTimeout( `set-error`, null );\n  }\n\n\n  /**\n   * This hook is called when the form submission has failed\n   * @private\n   */\n  private _onSubmissionFail(){\n    this.dom.state.pending = false;\n    // this.dom.state.validated = false;\n\n  }\n\n\n  /**\n   * This hook is called when the form has submitted successfully\n   * @private\n   */\n  private _onSubmissionSuccess(){\n    return new Promise<boolean>( async( resolve ) => {\n      this.dom.state.pending = false;\n      this.dom.state.validated = false;\n      this.dom.state.success = ( this.config.entity.message !== null ? this.config.entity.message : 'Created' );\n      const event = <PopBaseEventInterface>{\n        source: this.name,\n        method: 'create',\n        type: 'entity',\n        name: this.config.params.name,\n        internal_name: this.config.params.internal_name,\n        data: this.config.entity\n      };\n      if( IsCallableFunction( this.config.inDialog.callback ) ){\n        await this.config.inDialog.callback( this.core, event );\n      }\n      this.srv.events.sendEvent( event );\n\n      return resolve( true );\n    } );\n  }\n\n\n  /**\n   * This fx will handle errors\n   * @param message\n   * @private\n   */\n  private _setErrorMessage( err: any ){\n    this.dom.setTimeout( `set-err-msg`, () => {\n      this.dom.state.pending = false;\n      this.dom.error.message = GetHttpErrorMsg( err );\n      this.ui.form.markAsPristine();\n\n      // this.dom.setTimeout( `clear-err-msg`, () => {\n      //   this.dom.error.message = '';\n      // }, 5000 );\n    }, 500 );\n  }\n\n\n}\n","import { Component, ComponentFactory, ComponentFactoryResolver, ComponentRef, ElementRef, Input, OnDestroy, OnInit, ViewChild, ViewContainerRef } from '@angular/core';\nimport { FieldItemGroupConfig } from '../pop-field-item-group.model';\nimport { Subscription } from 'rxjs';\nimport { CoreConfig, DynamicComponentInterface, PopBaseEventInterface } from '../../../../pop-common.model';\nimport { ConvertArrayToOptionList, IsArray, IsObject } from '../../../../pop-common-utility';\nimport { EvaluateWhenCondition, IsValidFieldPatchEvent } from '../../../entity/pop-entity-utility';\nimport { PopExtendDynamicComponent } from '../../../../pop-extend-dynamic.component';\n\n\n@Component({\n  selector: 'lib-group',\n  templateUrl: './group.component.html',\n  styleUrls: [ './group.component.scss' ]\n})\nexport class GroupComponent extends PopExtendDynamicComponent implements OnInit, OnDestroy {\n  @ViewChild('container', { read: ViewContainerRef, static: true }) private container;\n  @Input() config: FieldItemGroupConfig;\n\n  subscribers: Subscription[] = [];\n\n  public name = 'GroupComponent';\n\n\n  constructor(\n    public el: ElementRef,\n  ){\n    super();\n\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n\n        // Attach the container for of the field item list element\n        this.template.attach('container'); // container references the @viewChild('container')\n\n        this.core.entity = {\n          id: 0,\n          name: null\n        };\n\n        this.config.fieldItemMap = {};\n        const fieldItemComponentList = <DynamicComponentInterface[]>[];\n        this.config.fieldItems.map((fieldItem) => {\n          const existingValue = 'control' in fieldItem.config ? fieldItem.config.control.value : null;\n          this.core.entity[ fieldItem.model.name ] = existingValue;\n        });\n\n        this.config.fieldItems.map((fieldItem, index) => {\n          if( fieldItem && IsObject(fieldItem.model, [ 'name' ]) && fieldItem.config && fieldItem.component ){\n            this.config.fieldItemMap[ fieldItem.model.name ] = index;\n\n            if(this.config.inDialog) fieldItem.config.bubble = true;\n\n\n            const component = <DynamicComponentInterface>{\n              type: fieldItem.component,\n              inputs: {\n                config: fieldItem.config,\n                position: fieldItem.config[ 'metadata' ].position ? fieldItem.config[ 'metadata' ].position : 1,\n                hidden: IsArray(fieldItem.model.when, true) ? !( EvaluateWhenCondition(this.core, fieldItem.model.when, this.core) ) : false,\n                when: IsArray(fieldItem.model.when, true) ? fieldItem.model.when : null\n              }\n            };\n            fieldItemComponentList.push(component);\n          }\n        });\n\n        this.template.render(fieldItemComponentList, [], true);\n\n\n        this.dom.handler.bubble = (core: CoreConfig, event: PopBaseEventInterface) => {\n          if( IsValidFieldPatchEvent(this.core, event) ){\n            if( event.config.name in this.core.entity ){\n              const newValue = isNaN(event.config.control.value) ? event.config.control.value : +event.config.control.value;\n              this.core.entity[ event.config.name ] = newValue;\n              if( this.config.fieldItems.length > 1 ){\n                this._resetComponentListHidden();\n                this.dom.setTimeout(`update-relations`, () => {\n                  this._triggerParentChildUpdates(event.config.name);\n                }, 0);\n              }\n            }\n          }\n          if( event.config.bubble || [ 'patch', 'portal' ].includes(event.name) ){\n            this.events.emit(event);\n          }\n        };\n\n\n        this.config.getField = (name: string) => {\n          if( name && name in this.config.fieldItemMap ){\n            return this.config.fieldItems[ this.config.fieldItemMap[ name ] ];\n          }\n          return null;\n        };\n\n        this.events.emit({ source: 'GroupComponent', type: 'field_group', name: 'init', id: this.config.id, group: this.config });\n        resolve(true);\n      });\n    };\n\n    this.dom.proceed = ()=> {\n      return new Promise( ( resolve ) => {\n        this.dom.setTimeout(`parent-child`, ()=>{\n          this._triggerParentChildUpdates('client_id');\n        })\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    this.subscribers.map(function(subscription: Subscription){\n      if( subscription ) subscription.unsubscribe();\n    });\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  /**\n   * Get a linear list of the parent child relations from a given point\n   * @param self the name to start from (usually the field that has just been changed by user)\n   * @param list\n   */\n  private _getRelationList(name: string, list: any[] = []){ // recursive loop\n    let item;\n    if( name && name in this.config.fieldItemMap ){\n      item = this.config.fieldItems[ this.config.fieldItemMap[ name ] ];\n      if( IsObject(item, [ 'config', 'model' ]) ){\n        list.push({\n          name: item.config.name,\n          autoFill: this._fieldHasAutoFill(name),\n        });\n        if( this._fieldHasChild(name) ){\n          this._getRelationList(this.config.fieldItems[ this.config.fieldItemMap[ name ] ].model.options.child, list);\n        }\n      }\n\n    }\n    return list;\n  }\n\n\n  /**\n   * Determine if field has a child relation in the list\n   * @param name\n   */\n  private _fieldHasChild(name: string){\n    if( name in this.config.fieldItemMap && this.config.fieldItems[ this.config.fieldItemMap[ name ] ].model && this.config.fieldItems[ this.config.fieldItemMap[ name ] ].model.options ){\n      if( this.config.fieldItems[ this.config.fieldItemMap[ name ] ].model.options.child ){\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n\n  /**\n   * Determine if field should be auto filled with the first item in the list\n   * @param name\n   */\n  private _fieldHasAutoFill(name: string){\n    if( name in this.config.fieldItemMap && this.config.fieldItems[ this.config.fieldItemMap[ name ] ].model && this.config.fieldItems[ this.config.fieldItemMap[ name ] ].model.options ){\n      if( this.config.fieldItems[ this.config.fieldItemMap[ name ] ].model.autoFill ){\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n\n  private _triggerParentChildUpdates(name: string){\n    console.log('triggerParentChildUpdates', name);\n\n    if( this._fieldHasChild(name) ){\n      let values;\n      let child_fk;\n      let childField;\n      let autoFill = false;\n      let set;\n      let resource;\n      const relations = this._getRelationList(name);\n      // console.log('relations', relations);\n      relations.some((relation) => {\n        if( relation.autoFill ){\n          autoFill = true;\n          return true;\n        }\n      });\n\n      if( name && name in this.config.fieldItemMap ){\n        child_fk = this.config.fieldItems[ this.config.fieldItemMap[ name ] ].model.options.child;\n        if( child_fk && child_fk in this.config.fieldItemMap ){\n          childField = this.config.fieldItems[ this.config.fieldItemMap[ child_fk ] ];\n          // console.log('child field', childField);\n          if( childField.model.form === 'select' ){\n            if( childField.model.options.resource ){\n              // console.log('has resource', childField.model.options.resource, this.config.metadata[ childField.model.options.resource ]);\n              if( IsObject(this.config.metadata[ childField.model.options.resource ], [ 'data_values' ]) ){\n                resource = this.config.metadata[ childField.model.options.resource ].data_values;\n              }\n            }\n            // console.log('resource', resource);\n            if( IsArray(resource, true) ){\n              values = ConvertArrayToOptionList(resource, {\n                // ensure that an option shows up in list in case other conditions remove it, aka it has been archived\n                prevent: [], // a list of ids that should not appear in the list for whatever reason\n                // parent means this options should all have a common field trait like client_fk, account_fk ....\n                parent: childField.model.options.parent ? {\n                  field: childField.model.options.parent,\n                  value: this.core.entity[ childField.model.options.parent ]\n                } : null,\n                empty: childField.model.options.empty ? childField.model.options.empty : null,\n              });\n            }else{\n              values = [];\n            }\n            // console.log('values', values);\n\n            if( autoFill && values.length ){\n              set = values[ values.length - 1 ].value;\n            }else{\n              set = null;\n            }\n            childField.config.options.values = values;\n            autoFill = autoFill && values.length ? values[ 0 ].value : null;\n            if( typeof childField.config.triggerOnChange === 'function' ) childField.config.triggerOnChange(set);\n\n            this.dom.setTimeout(`clear-message-${child_fk}`, () => {\n              if( typeof childField.config.clearMessage === 'function' ){\n                childField.config.clearMessage();\n              }\n            }, 0);\n\n          }\n        }\n      }\n    }\n\n  }\n\n\n  /**\n   * Whenever a update to the core entity happens the fields in the group should be re-evaluated if there are when conditionals set\n   * @private\n   */\n  private _resetComponentListHidden(){\n//     console.log('_resetComponentListHidden', this.template.refs);\n    let name;\n    this.template.refs.filter((componentRef: ComponentRef<any>) => {\n      return IsObject(componentRef.instance.config, true) && IsArray(componentRef.instance.when, true);\n    }).map((componentRef: ComponentRef<any>) => {\n      name = componentRef.instance.config.name;\n      if( name && name in this.config.fieldItemMap ){\n        componentRef.instance.hidden = !EvaluateWhenCondition(this.core, componentRef.instance.when, this.core);\n      }\n    });\n  }\n}\n","import { Component, OnInit, Input, ViewChild } from '@angular/core';\nimport { MatMenuTrigger } from '@angular/material/menu';\nimport { PopContextMenuConfig, PopContextMenuOption } from './pop-context-menu.model';\n\n\n@Component({\n  selector: 'lib-pop-context-menu',\n  templateUrl: './pop-context-menu.component.html',\n  styleUrls: [ './pop-context-menu.component.scss' ]\n})\nexport class PopContextMenuComponent implements OnInit {\n  @Input() config: PopContextMenuConfig;\n  @ViewChild(MatMenuTrigger, { static: true }) trigger: MatMenuTrigger;\n\n\n  constructor(){\n  }\n\n\n  ngOnInit(){\n    this.config.toggle.subscribe(active => {\n      if( active ) this.trigger.openMenu();\n      if( !active ) this.trigger.closeMenu();\n    });\n  }\n\n\n  public onMenuClick(option: PopContextMenuOption){\n    if( option.type === 'new_tab' ) window.open(option.url, '_blank');\n    if( option.type === 'portal' ) this.config.emitter.emit({\n      source: 'PopContextMenuComponent',\n      type: 'context_menu',\n      name: 'portal',\n      open: true,\n      internal_name: option.metadata.internal_name,\n      id: option.metadata.id,\n      option: option\n    });\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { MaterialModule } from '../../material/material.module';\nimport { CommonModule } from '@angular/common';\nimport { PopContextMenuComponent } from './pop-context-menu.component';\n\n\n@NgModule({\n  declarations: [\n      PopContextMenuComponent\n  ],\n  imports: [\n    MaterialModule,\n    CommonModule\n  ],\n  exports: [\n      PopContextMenuComponent\n  ],\n})\nexport class PopContextMenuModule {}\n\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({ name: 'characterIcon' , pure: true })\nexport class CharacterIconPipe implements PipeTransform {\n\n  \n  transform(name:string):string{\n    let character_icon = \"\";\n    const nameArray = name.split(\" \");\n    if( nameArray.length >= 2 ){\n      character_icon += nameArray[ 0 ].charAt(0).toLocaleUpperCase();\n      character_icon += nameArray[ 1 ].charAt(0).toLocaleUpperCase();\n    }\n    else{\n        character_icon += name.charAt(0).toLocaleUpperCase();\n        character_icon += name.charAt(1).toLocaleLowerCase();\n    } \n    return(character_icon)\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { PopSideBySideComponent } from './pop-side-by-side.component';\nimport { MaterialModule } from '../../material/material.module';\nimport { PopFieldItemModule } from '../pop-field-item/pop-field-item.module';\nimport { PopIndicatorsModule } from '../pop-indicators/pop-indicators.module';\nimport { RouterModule } from '@angular/router';\nimport { PopContextMenuModule } from '../pop-context-menu/pop-context-menu.module';\nimport { CharacterIconPipe } from '../../../pipes/characterIcon.pipe';\n\n@NgModule({\n  declarations: [\n    PopSideBySideComponent,\n    CharacterIconPipe\n  ],\n  imports: [\n    CommonModule,\n    MaterialModule,\n    RouterModule,\n    PopFieldItemModule,\n    PopIndicatorsModule,\n    PopContextMenuModule,\n\n  ],\n  exports: [\n    PopSideBySideComponent\n  ]\n})\nexport class PopSideBySideModule {\n}\n","import { AfterViewInit, Component, ElementRef, EventEmitter, Input, OnDestroy, OnInit, Output } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { InDialogComponent } from './in-dialog/in-dialog.component';\nimport { FieldItemGroupConfig } from './pop-field-item-group.model';\nimport { PopExtendComponent } from '../../../pop-extend.component';\nimport { Entity, PopBaseEventInterface, ServiceInjector } from '../../../pop-common.model';\n\n\n@Component( {\n  selector: 'lib-pop-field-item-group',\n  template: '<lib-group *ngIf=\"config && config.inDialog === null\"  (events)=\"onBubbleEvent($event);\" [config]=config></lib-group>',\n  styleUrls: []\n} )\nexport class PopFieldItemGroupComponent extends PopExtendComponent implements OnInit, OnDestroy, AfterViewInit {\n  @Input() config: FieldItemGroupConfig;\n  @Output() close = new EventEmitter<Entity>();\n\n  public name = 'PopFieldItemGroupComponent';\n\n\n  protected srv: {\n    dialog: MatDialog\n  } = {\n    dialog: ServiceInjector.get( MatDialog ),\n  };\n\n\n  constructor(\n    public el: ElementRef,\n  ){\n    super();\n\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n        resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * This component will take a list of field item configs and render them in a column list\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  ngAfterViewInit(){\n    if( this.config.inDialog ){\n      this.dom.setTimeout( `load-modal`, () => {\n        this._loadGroupInDialogBox();\n      }, 0 );\n    }\n  }\n\n\n  /**\n   * This fx will bubble events up the pipeline\n   * @param event\n   */\n  onBubbleEvent( event: PopBaseEventInterface ){\n    this.events.emit( event );\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n  /**\n   * This fx will load the field item list in a dialog modal, this is for typically for creating entities and such actions.\n   * This will allow all the fields items to be placed in an angular form so all the data can be validated collectively.\n   * @private\n   */\n  private _loadGroupInDialogBox(){\n    const dialogBox = this.srv.dialog.open(\n      InDialogComponent,\n      {\n        data: this.config,\n        disableClose: true\n      }\n    );\n    dialogBox.componentInstance[ 'http' ] = this.config.http;\n    dialogBox.componentInstance[ 'debug' ] = this.config.debug;\n    dialogBox.componentInstance.events.subscribe( ( event: PopBaseEventInterface ) => {\n      event.group = this.config;\n      this.events.emit( event );\n    } );\n    dialogBox.afterClosed().subscribe( ( result: any ) => {\n      this.close.emit( result );\n    } );\n  }\n\n\n}\n","import { NgModule } from \"@angular/core\";\nimport { MaterialModule } from '../../material/material.module';\nimport { InDialogComponent } from './in-dialog/in-dialog.component';\nimport { CommonModule } from '@angular/common';\nimport { PopIndicatorsModule } from '../pop-indicators/pop-indicators.module';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { PopFieldItemModule } from '../pop-field-item/pop-field-item.module';\nimport { GroupComponent } from './group/group.component';\nimport { PopSideBySideModule } from '../pop-side-by-side/pop-side-by-side.module';\nimport { PopFieldItemGroupComponent } from './pop-field-item-group.component';\n\n\n@NgModule({\n  declarations: [\n    PopFieldItemGroupComponent,\n    InDialogComponent,\n    GroupComponent\n  ],\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    MaterialModule,\n    PopIndicatorsModule,\n    PopFieldItemModule,\n    PopSideBySideModule,\n  ],\n  exports: [\n    PopFieldItemGroupComponent,\n  ],\n})\nexport class PopFieldItemGroupModule {\n}\n","import { Injectable } from '@angular/core';\nimport { HttpErrorResponse } from '@angular/common/http';\nimport {\n  ArrayContainsAll,\n  ArrayMapSetter,\n  ArrayOnlyUnique,\n  ArraysMatch,\n  ConvertDateFormat, ConvertDateToDateTimeFormat,\n  ConvertObjectToUri, DeepCopy,\n  DynamicSort, GetHttpErrorMsg, HyphenToPascal,\n  IsArray,\n  IsNumber,\n  IsObject,\n  IsString, ObjectContainsTagSearch,\n  PopUid, SnakeToPascal, SpaceToSnake, StorageGetter, StringReplaceAll, TitleCase,\n  ToArray, ToObject\n} from '../pop-common-utility';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PopCommonService {\n\n  public name = 'PopCommonService';\n\n\n  arrayContainsAll(needles: Array<string>, haystack: Array<string>, strict: boolean = false){\n    return ArrayContainsAll(needles, haystack, strict);\n  }\n\n\n  // function for dynamic sorting an array of objects.\n  // - Usage: someArray.sort(dynamicSort('key'));\n  // @param key: The name of the key in each object to sort on.\n  // @param order: asc (Ascending) or desc (Descending)\n  // @return: sorted array.\n  dynamicSort(key, order = 'asc'){\n    return DynamicSort(key, order);\n  }\n\n\n  /**\n   * Sorts on sort\n   * @param a\n   * @param b\n   * returns int\n   */\n  sortBySort(a, b){\n    if( a.sort < b.sort ) return -1;\n    if( a.sort > b.sort ) return 1;\n    return 0;\n  }\n\n\n  /**\n   * Sorts on name field\n   * @param a\n   * @param b\n   * returns int\n   */\n  sortByName(a, b){\n    if( a.name < b.name ) return -1;\n    if( a.name > b.name ) return 1;\n    return 0;\n  }\n\n\n  /**\n   * Sorts on position field\n   * @param a\n   * @param b\n   * returns int\n   */\n  sortByPosition(a, b){\n    if( +a.position < +b.position ) return -1;\n    if( +a.position > +b.position ) return 1;\n    return 0;\n  }\n\n\n  /**\n   * Sorts on entityId field\n   * @param a\n   * @param b\n   * returns int\n   */\n\n  sortById(a, b){\n    if( a.id < b.id ) return -1;\n    if( a.id > b.id ) return 1;\n    return 0;\n  }\n\n\n  /**\n   * Checks if two arrays match\n   *\n   * @param arr1\n   * @param arr2\n   * @param field -optional\n   *\n   * - if field is passed - check to see if the field is the same in both arrays\n   *\n   * @returns boolean\n   */\n  arraysMatch(arr1: any[], arr2: any[], field: string){\n    return ArraysMatch(arr1, arr2, field);\n  }\n\n\n  /**\n   * Convert an object into an array\n   * @param obj\n   * @returns array\n   */\n  toArray(obj: object){\n    return ToArray(obj);\n  }\n\n\n  /**\n   * A helper function to determine if a variable is numreric\n   * @param value\n   */\n  isNumber(value: any, requireTruthy?: boolean): boolean{\n    return IsNumber(value, requireTruthy);\n  }\n\n\n  isArray(arr: any, requireLength = false): boolean{\n    return IsArray(arr, requireLength);\n  }\n\n\n  /**\n   * A helper function to determine if a variable is a qualified object\n   *\n   * @param value\n   * @param requireKeys\n   * @param throwError\n   */\n  isObject(value: any, requireKeys = false): boolean{\n    return IsObject(value, requireKeys);\n  }\n\n\n  /**\n   *\n   * A helper function to determine if a variable is a qualified string\n   * @param value\n   * @param requireLength\n   * @param throwError\n   */\n  isString(value: any, requireLength = false): boolean{\n    return IsString(value, requireLength);\n  }\n\n\n  /**\n   * Helper method to remove duplicate items from a  flat array [1,2,3,1,1], [['a','b','c','a']\n   * @param arr\n   */\n  onlyArrayUnique(arr: any[]){\n    return ArrayOnlyUnique(arr);\n  }\n\n\n  /**\n   * Helper method to remove duplicate objects in an array that share a specific property [{entityId:1, ...},{entityId:2, ...},{entityId:3, ...},{entityId:1, ...}, ]\n   * @param arr\n   */\n  removeArrayDuplicates(array: object[], prop){\n    return array.filter((obj, pos, arr) => {\n      return arr.map(mapObj => mapObj[ prop ]).indexOf(obj[ prop ]) === pos;\n    });\n  }\n\n\n  /**\n   * Map an array by a array key field\n   * @param obj\n   * @returns array\n   */\n  mapArrayWithKey(array, array_key_field: string){\n    return ArrayMapSetter(array, array_key_field);\n  }\n\n\n  /**\n   * Convert an Array to Object\n   * @param arr\n   * @returns Object\n   */\n  toObject(arr: any[]){\n    return ToObject(arr);\n  }\n\n\n  /**\n   * Convert an Array of objects  to Dictionary(object)\n   * @param arr\n   * @returns Object\n   */\n  toDictionary(arr: any[], key: string){\n    const dictionary = {};\n    if( arr && Array.isArray(arr) && arr.length ){\n      arr.map((item) => {\n        if( typeof item[ key ] !== undefined ) dictionary[ item[ key ] ] = item;\n      });\n    }\n    return dictionary;\n  }\n\n\n  toUri(obj: object | any[]){\n    return ConvertObjectToUri(obj);\n  }\n\n\n  /**\n   * Capitalize the first Letter of every word in a string\n   * @param str\n   * @returns str\n   */\n  toTitleCase(str: string){\n    return TitleCase(str);\n  }\n\n\n  /**\n   * Convert a date to yyyy:mm:dd 00:00:00\n   * @param value date\n   */\n  dateTimeFormat(value){\n    return ConvertDateToDateTimeFormat(value);\n  }\n\n\n  /**\n   * Convert a date to yyyy:mm:dd\n   * @param value date\n   */\n  dateFormat(value, format = 'yyyy-mm-dd'){\n    return ConvertDateFormat(value, format);\n  }\n\n\n  today(format = 'yyyy-mm-dd'): string{\n    const today = new Date();\n    const dd = String(today.getDate()).padStart(2, '0');\n    const mm = String(today.getMonth() + 1).padStart(2, '0');\n    const yyyy = today.getFullYear();\n\n    return this.dateFormat(mm + '/' + dd + '/' + yyyy);\n  }\n\n\n  addDays(date, days){\n    const copy = new Date(Number(date));\n    copy.setDate(date.getDate() + days);\n    return copy;\n  }\n\n\n  /**\n   * Replace all occurrences of an sequence within a string\n   * @param str\n   * @param find\n   * @param replace\n   */\n  replaceAll(str: string, find: string, replace: string){\n    return StringReplaceAll(str, find, replace);\n  }\n\n\n  /**\n   * Convert a string from snake case to Pascal Case\n   * @param field\n   * @returns string\n   */\n  snakeToPascal(field: string): string{\n    return SnakeToPascal(field);\n\n  }\n\n\n  /**\n   * Convert a string with hyphens to Pascal Case\n   * @param field\n   * @returns string\n   */\n  hyphenToPascal(field: string): string{\n    return HyphenToPascal(field);\n  }\n\n\n  /**\n   * Convert a string with spaces to snake case .. 'this is snake case' to 'this_is_snake_case'\n   * @param field\n   * @returns string\n   */\n  spaceToSnake(pascal: string): string{\n    return SpaceToSnake(pascal);\n  }\n\n\n  /**\n   * A complex fuzzy search to determine if an object's values contains a series of filter \"tags\"\n   * @param object obj: The Object that you want to see if the fieldItems match the filter\n   * @param string tags: The filter string you want to match against obj.\n   *                       Uses (!)not, (&)and, (,)or syntax for complex chaining.\n   *                       example: 'john' returns true if a field value contains 'john'\n   *                       example: 'john,jane,doe' returns true if a field value contains any of the values\n   *                       example: 'john&doe' returns true only if obj contains 'john' and  contains 'doe'\n   *                       example: 'john,!doe' returns true only if obj contains 'john' and does not contain 'doe'\n   *\n   *\n   * @returns boolean\n   */\n  hasFilter(obj: object, tags: string){\n    return ObjectContainsTagSearch(obj, tags);\n  }\n\n\n  deepCopy(obj: object){\n    return DeepCopy(obj);\n  }\n\n\n  getHttpErrorMsg(err: HttpErrorResponse){\n    return GetHttpErrorMsg(err);\n\n  }\n\n\n  getStoragePath(storage: object, steps: string[], defaultValue = null): any{\n    return StorageGetter(storage, steps, defaultValue);\n  }\n\n\n  uid(){\n    return PopUid();\n  }\n\n\n}\n","import {Component, Inject, OnInit, OnDestroy} from '@angular/core';\n\nimport {CdkDragDrop, moveItemInArray} from '@angular/cdk/drag-drop';\n\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\nimport {PopCommonService} from '../../../../services/pop-common.service';\nimport {TableOptionsConfig} from '../pop-table.model';\nimport {SwitchConfig} from '../../pop-field-item/pop-switch/switch-config.model';\nimport {Dictionary, FieldItemOption} from '../../../../pop-common.model';\nimport {PopDisplayService} from '../../../../services/pop-display.service';\nimport {SelectConfig} from \"../../pop-field-item/pop-select/select-config.model\";\n\nexport interface Toggles {\n  allowColumnDisplayToggle?: SwitchConfig;\n  allowColumnStickyToggle?: SwitchConfig;\n  allowColumnSearchToggle?: SwitchConfig;\n  allowColumnSortToggle?: SwitchConfig;\n  allowHeaderStickyToggle?: SwitchConfig;\n  allowHeaderDisplayToggle?: SwitchConfig;\n  allowPaginatorToggle?: SwitchConfig;\n}\n\n@Component({\n  selector: 'lib-dialog',\n  templateUrl: 'pop-table-dialog.component.html',\n  styleUrls: ['pop-table-dialog.component.scss']\n})\nexport class PopTableDialogComponent implements OnInit, OnDestroy {\n\n  options: TableOptionsConfig;\n  toggles: Toggles;\n  columns;\n\n  lockedColumns: SelectConfig;\n\n\n  public dom = {\n    state: <Dictionary<string | number | boolean>>{},\n    asset: <Dictionary<string | number | boolean>>{},\n    height: <Dictionary<number>>{\n      outer: null,\n      inner: null,\n      default: null\n    }\n  };\n\n  constructor(\n    private tableDialogRef: MatDialogRef<PopTableDialogComponent>,\n    private cs: PopCommonService,\n    private ds: PopDisplayService,\n    @Inject(MAT_DIALOG_DATA) public data\n  ) {\n    this.options = data.options;\n  }\n\n  ngOnInit() {\n    this.dom.height.outer = window.innerHeight - 300;\n    this.dom.height.inner = this.dom.height.outer - 150;\n    this.buildToggles();\n    this.buildColumns();\n    this.buildLockedColumns();\n\n    this.lockedColumns.control.valueChanges.subscribe((value) => this.updateLockedColumns(value));\n\n  }\n\n  buildLockedColumns(){\n    let lockedColumns = 0;\n\n    this.columns.forEach( (col, index) =>{\n      if(col.sticky === true){\n        lockedColumns = ++index;\n      }\n    });\n\n    this.lockedColumns = new SelectConfig({\n      label: 'Locked columns',\n      options: {\n        values: [\n          {value: 0, name: 'No columns locked'},\n          {value: 1, name: 'Lock first column'},\n          {value: 2, name: 'Lock first 2 columns'},\n          {value: 3, name: 'Lock first 3 columns'},\n        ]\n      },\n      value: lockedColumns\n    });\n  }\n\n  updateLockedColumns(value) {\n    this.clearColSticky();\n    if (value > 0) {\n      this.updateStickyColumns(value);\n    }\n  }\n\n  clearColSticky() {\n    this.columns.forEach(col => col.sticky = false);\n  }\n\n  updateStickyColumns(value) {\n    this.columns.forEach((col, index) => {\n      if (index < value) {\n        col.sticky = true;\n      }\n    });\n  }\n\n  handleInputEvents(event) {\n    console.log('event', event);\n  }\n\n  buildToggles() {\n    this.toggles = {\n      allowColumnSearchToggle: new SwitchConfig({\n        bubble: true,\n        label: 'Column Search',\n        value: this.options.currentOptions.searchColumns,\n        metadata: {option: 'searchColumns'}\n      }),\n      allowColumnSortToggle: new SwitchConfig({\n        bubble: true,\n        label: 'Column Sort',\n        value: this.options.currentOptions.sort,\n        metadata: {option: 'sort'}\n      }),\n      allowHeaderStickyToggle: new SwitchConfig({\n        bubble: true,\n        label: 'Sticky Header',\n        value: this.options.currentOptions.headerSticky,\n        metadata: {option: 'headerSticky'}\n      }),\n      allowHeaderDisplayToggle: new SwitchConfig({\n        bubble: true,\n        label: 'Display Header',\n        value: this.options.currentOptions.headerDisplay,\n        metadata: {option: 'headerDisplay'}\n      }),\n      allowPaginatorToggle: new SwitchConfig({\n        bubble: true,\n        label: 'Pagination',\n        value: this.options.currentOptions.paginator,\n        metadata: {option: 'paginator'}\n      }),\n    };\n  }\n\n  setAllShow(checked) {\n    this.columns.map(c => c.visible = checked);\n  }\n\n  buildColumns() {\n    // Display column order: Current order of visible items then alphabetized list of non visible items.\n    const currentColumns = [];\n    const otherColumns = [];\n\n    // Account for current column def set.\n    for (const col in this.options.currentOptions.columnDefinitions) {\n\n      this.options.currentOptions.columnDefinitions[col].display = this.ds.set(col, this.options.currentOptions.columnDefinitions[col]);\n\n      if (!this.options.currentOptions.columnDefinitions[col].name) this.options.currentOptions.columnDefinitions[col].name = col;\n\n      if (this.options.currentOptions.columnDefinitions[col].visible) {\n        currentColumns.push(this.options.currentOptions.columnDefinitions[col]);\n      } else {\n        otherColumns.push(this.options.currentOptions.columnDefinitions[col]);\n      }\n\n      // If this column has a checkbox then account for it in the list.\n      if (this.options.currentOptions.columnDefinitions[col].checkbox) {\n        if (this.options.currentOptions.columnDefinitions[col].checkbox.visible) {\n          currentColumns.push({\n            ...{name: col + '_checkbox', ref: col, display: this.ds.set(col + '_checkbox')},\n            ...this.options.currentOptions.columnDefinitions[col].checkbox\n          });\n        } else {\n          otherColumns.push({\n            ...{name: col + '_checkbox', ref: col, display: this.ds.set(col + '_checkbox')},\n            ...this.options.currentOptions.columnDefinitions[col].checkbox\n          });\n        }\n      }\n\n      // Remove from columns so we don't have duplicates.\n      if (this.options.columns.indexOf(col) !== -1) this.options.columns.splice(this.options.columns.indexOf(col), 1);\n    }\n\n    // Account for other columns in the dataset.\n    if (!otherColumns.length) {\n      for (const col of this.options.columns) {\n        otherColumns.push({name: col, display: this.ds.set(col), visible: false, sticky: false, sort: 0});\n      }\n    }\n\n    // Sort current columns by their sort number and sort other columns by their name.\n    currentColumns.sort(this.cs.dynamicSort('sort'));\n    otherColumns.sort(this.cs.dynamicSort('name'));\n\n    // Update the sort to reflect the new order.\n    let order = 0;\n    for (const col of currentColumns) col.sort = ++order;\n    for (const col of otherColumns) col.sort = ++order;\n\n    this.columns = [...currentColumns, ...otherColumns];\n  }\n\n  handleToggleEvents(event) {\n    if (event.name === 'onChange') {\n      const option = event.config.metadata.option;\n      const value = event.config.control.value;\n\n      this.options.currentOptions[event.config.metadata.option] = event.config.control.value;\n      switch (option) {\n        case 'headerDisplay':\n          if (!value) {\n            this.options.currentOptions.sort = false;\n            this.toggles.allowColumnSortToggle.switchRef.checked = false;\n            this.toggles.allowColumnSortToggle.control.setValue(false);\n\n            this.toggles.allowHeaderStickyToggle.switchRef.checked = false;\n            this.toggles.allowHeaderStickyToggle.control.setValue(false);\n            this.options.currentOptions.headerSticky = false;\n\n            this.toggles.allowColumnSearchToggle.switchRef.checked = false;\n            this.toggles.allowColumnSearchToggle.control.setValue(false);\n            this.options.currentOptions.searchColumns = false;\n          }\n          break;\n        default:\n          break;\n      }\n    }\n  }\n\n  onSave(): void {\n\n    // Set our order to be the same as the index in the array.\n    let order = 0;\n    for (const col of this.columns) col.sort = ++order;\n\n    // Build the column definitions based on user selection.\n    const columnDefinitions = {};\n    for (const col of this.columns) {\n      if (col.ref) continue; // Ignore checkboxes for now as they belong under a specific field.\n      columnDefinitions[col.name] = {\n        display: col.display,\n        helper: (col.helper ? col.helper : null),\n        icon: (col.icon ? col.icon : null),\n        sort: col.sort,\n        route: (col.route ? col.route : null),\n        sticky: col.sticky,\n        visible: col.visible,\n      };\n    }\n\n    // Account for checkboxes\n    for (const col of this.columns) {\n      if (!col.ref) continue;\n      columnDefinitions[col.ref] = {\n        ...columnDefinitions[col.ref],\n        ...{checkbox: {sort: col.sort, sticky: col.sticky, visible: col.visible}}\n      };\n    }\n\n    this.options.currentOptions.columnDefinitions = columnDefinitions;\n\n    this.tableDialogRef.close({type: 'save', options: this.options});\n  }\n\n  onResetToDefault(): void {\n    this.tableDialogRef.close({type: 'reset', options: this.options});\n  }\n\n  onCancel(): void {\n    this.tableDialogRef.close({type: 'cancel', options: this.options});\n  }\n\n  drop(event: CdkDragDrop<string[]>) {\n    moveItemInArray(this.columns, event.previousIndex, event.currentIndex);\n  }\n\n  ngOnDestroy() {\n  }\n\n}\n","import {OnInit, Component, ViewChild, OnDestroy, ViewEncapsulation, ElementRef, ChangeDetectorRef} from '@angular/core';\nimport {Input} from '@angular/core';\nimport {ColumnDefinitionInterface, TableConfig, TableOptionsInterface} from './pop-table.model';\nimport {MatPaginator} from '@angular/material/paginator';\nimport {Subject} from 'rxjs';\nimport {Entity, PopBaseEventInterface, PopHref, PopPipe, PopTemplate, ServiceInjector} from '../../../pop-common.model';\nimport {PopBaseService} from '../../../services/pop-base.service';\nimport {MatDialog} from '@angular/material/dialog';\nimport {Router} from '@angular/router';\nimport {PopExtendComponent} from '../../../pop-extend.component';\nimport {PopDomService} from '../../../services/pop-dom.service';\nimport {ParseLinkUrl} from '../../entity/pop-entity-utility';\nimport {\n  DynamicSort,\n  IsArray,\n  IsDefined,\n  IsNumber,\n  IsObject,\n  IsObjectThrowError,\n  IsString,\n  IsUndefined,\n  ObjectContainsTagSearch,\n  SetSiteVar,\n  Sleep\n} from '../../../pop-common-utility';\nimport {PopTableDialogComponent} from './pop-table-dialog/pop-table-dialog.component';\nimport {PopPipeService} from \"../../../services/pop-pipe.service\";\n\n\n@Component({\n  selector: 'lib-pop-table',\n  templateUrl: './pop-table.component.html',\n  styleUrls: ['./pop-table.component.scss'],\n  encapsulation: ViewEncapsulation.Emulated,\n})\nexport class PopTableComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() config: TableConfig;\n  @ViewChild('wrapper', {static: true}) wrapper: ElementRef;\n  @ViewChild('footer') footer: ElementRef;\n  @ViewChild(MatPaginator, {static: true}) matPaginator: MatPaginator;\n  public name = 'PopTableComponent';\n\n  srv = {\n    base: <PopBaseService>undefined,\n    dialog: <MatDialog>undefined,\n    router: <Router>undefined,\n    pipe: <PopPipeService>undefined,\n  };\n\n\n  asset = {\n    data: undefined,\n    filter: {\n      column: {},\n      predicate: undefined,\n      search: undefined\n    }\n  };\n\n\n  /**\n   * @param el\n   * @param cdr\n   * @param _baseRepo\n   * @param _dialogRepo\n   * @param _domRepo\n   * @param _routerRepo\n   * @param _pipeRepo\n   */\n  constructor(\n    public el: ElementRef,\n    public cdr: ChangeDetectorRef,\n    protected _baseRepo: PopBaseService,\n    protected _dialogRepo: MatDialog,\n    protected _domRepo: PopDomService,\n    protected _routerRepo: Router,\n    protected _pipeRepo: PopPipeService,\n  ) {\n    super();\n    /**\n     * Configure the specifics of this component\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise(async (resolve) => {\n\n        await Promise.all([\n          this._setInitialConfig(), // set default configs\n          this._setHeight(), // Determine the height of the table\n          this._updateButtonControl(),\n          this._attachPaginator(), // Attach the paginator to the config\n          this._handleConfigEvents(), //  Manage Config Events\n          this._setConfigHooks(), // attach hooks on to the config that let other components tie in to this component\n          this._initSearchFilter(), // sets the search abilities\n          this._configureTable() // Prep the table for display.\n        ]);\n\n        return resolve(true);\n      });\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise(async (resolve) => {\n        this._setFilterPredicate(this.dom.session.searchValue); // Set up the filter predicates to use with this table\n        return resolve(true);\n      });\n    };\n  }\n\n\n  /**\n   * This component should have a purpose\n   */\n  ngOnInit() {\n    super.ngOnInit();\n  }\n\n\n  /**\n   * The table will generate a slew of action and event triggers that need passed up the chain\n   * @param name\n   * @param event\n   */\n  onBubbleEvent(name, event): void {\n    // All selections of table rows should come through here so _update the buttonControls.\n    const tableEvent: PopBaseEventInterface = {\n      source: this.name,\n      type: 'table',\n      name: name,\n      data: event,\n      metadata: this.config.metadata\n    };\n    this.log.event(`onBubbleEvent`, tableEvent);\n    // We want a copy being emitted not the actual objects.\n    this.events.emit(JSON.parse(JSON.stringify(tableEvent)));\n  }\n\n\n  /**\n   * This will apply the search value that the user enters behind a debouncer\n   * @param searchValue\n   * @param col\n   */\n  onApplySearchValue(searchValue: string, col: string) {\n    this.dom.setTimeout('apply-search', () => {\n      this.asset.filter.search(searchValue, col);\n      this.onBubbleEvent('search', searchValue);\n    }, 250);\n  }\n\n\n  /**\n   * The user can click on a button to edit their preferences for this table in a modal\n   */\n  onEditTablePreferencesClick(): void {\n\n    // Get a copy of the current options.\n    const searchColumns = this.config.searchColumns;\n    const options: TableOptionsInterface = JSON.parse(JSON.stringify(this.config.options));\n\n    // Defaults and allowables should be set by the coder but if not they will use the TableOptionsConfig defaults.\n    // But we still need to set the current options.\n    options.currentOptions = {\n      columnDefinitions: this.config.columnDefinitions,\n      headerDisplay: this.config.headerDisplay,\n      headerSticky: this.config.headerSticky,\n      paginator: this.config.paginator,\n      search: this.config.search,\n      searchColumns: this.config.searchColumns,\n      sort: this.config.sort,\n    };\n\n    // If the coder didn't pass into options the available columns then get a list of all possible columns from the data.\n    if (!options.columns.length && this.asset.data && this.asset.data[0]) {\n      for (const col in this.asset.data[0]) {\n        if (!this.asset.data[0].hasOwnProperty(col)) continue;\n        if (IsString(this.asset.data[0][col]) || IsNumber(this.asset.data[0][col])) {\n          options.columns.push(col);\n        }\n      }\n    }\n\n    this.onBubbleEvent('options_open', options);\n\n    const dialogRef = this.srv.dialog.open(PopTableDialogComponent, {\n      data: {options: options}\n    });\n\n    dialogRef.afterClosed().subscribe(dialog => {\n      if (dialog) {\n        console.log('here', dialog);\n        if (dialog.type === 'save') {\n          this.dom.refreshing();\n          try {\n            this.cdr.detectChanges();\n          } catch (e) {\n          }\n          const newOptions = JSON.parse(JSON.stringify(dialog.options));\n          this.onBubbleEvent('options_save', newOptions);\n          // Build a new config object instead of updating the old one so that Angular's change detection will auto _update the view.\n          // - Certain things (column sort / search) wont auto-_update otherwise.\n          // - Requires the updating of the column defs in the setTimeout.\n          // - Might be an Angular bug: https://github.com/angular/material2/issues/13030\n\n          this.config.headerDisplay = newOptions.currentOptions.headerDisplay;\n          this.config.headerSticky = newOptions.currentOptions.headerSticky;\n          this.config.paginator = newOptions.currentOptions.paginator;\n          this.config.searchColumns = newOptions.currentOptions.searchColumns;\n          this.config.sort = newOptions.currentOptions.sort;\n\n          this.config.updateColumnDefinitions(newOptions.currentOptions.columnDefinitions);\n          if (searchColumns !== this.config.searchColumns) this._setFilterPredicate();\n          try {\n            this.cdr.detectChanges();\n          } catch (e) {\n          }\n          this._resetTable();\n\n        } else if (dialog.type === 'reset') {\n          this.dom.refreshing();\n          try {\n            this.cdr.detectChanges();\n          } catch (e) {\n          }\n\n          // Build a new config object instead of updating the old one so that Angular's change detection will auto _update the view.\n          // - Certain things (column sort / search) wont auto-_update otherwise.\n          // - Requires the updating of the column defs in the setTimeout.\n          // - Might be an Angular bug: https://github.com/angular/material2/issues/13030\n\n\n          this.onBubbleEvent('options_reset', dialog.options);\n          this.config.headerDisplay = this.config.options.defaultOptions.headerDisplay;\n          this.config.headerSticky = this.config.options.defaultOptions.headerSticky;\n          // this.config.paginator = this.config.options.defaultOptions.paginator;\n          this.config.searchColumns = this.config.options.defaultOptions.searchColumns;\n          this.config.sort = this.config.options.defaultOptions.sort;\n          this.config.dealWithAngularChangeDetectionFailure = false;\n\n          const columnDefinitions = JSON.parse(JSON.stringify(dialog.options.defaultOptions.columnDefinitions));\n          this.config.updateColumnDefinitions(columnDefinitions);\n          if (searchColumns !== this.config.searchColumns) this._setFilterPredicate();\n          try {\n            this.cdr.detectChanges();\n          } catch (e) {\n          }\n          this._resetTable();\n\n        } else if (dialog.type === 'cancel') {\n          this.onBubbleEvent('options_cancel', {});\n        }\n      } else {\n        this.onBubbleEvent('options_cancel', {});\n      }\n    });\n  }\n\n\n  /**\n   * Clean up the dom of this component\n   */\n  ngOnDestroy() {\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Protected Method )                                      *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  /**\n   * Setup an intial config for this component here\n   * @private\n   */\n  protected _setInitialConfig(): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      // Ensure config\n      this.config = IsObjectThrowError(this.config, true, `${this.name}:configure: - this.config`) ? this.config : null;\n      // Set a data container to hold raw data\n      this.asset.data = <any[]>[];\n      if (IsDefined(this.config.id)) this.id = this.config.id;\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * Handle table events\n   * @param event\n   */\n  protected _onTableEvent(event: PopBaseEventInterface) {\n    let goToUrl;\n    let routeApp;\n    if (event.type === 'table') {\n      switch (event.name) {\n        case 'columnStandardClick':\n          // If global route was set then let the table handle the routing else emit the event.\n          if (this.config.route) {\n            goToUrl = this._parseGoToUrl(this.config.route, event.data.row);\n            routeApp = String(goToUrl).split('/');\n            if (routeApp[1] && routeApp[1] === PopHref) {\n              // Since we are in the same app then use Angular to route.\n              const route = routeApp.slice(2).join('/');\n              this.srv.router.navigate([route]).catch((e) => {\n                PopTemplate.error({message: `Invalid Client Route: ${route}`, code: 500});\n                console.log(e);\n              });\n            } else {\n              // do a hard reload if we aren't.\n              SetSiteVar('redirect', goToUrl);\n              this.srv.base.redirect();\n            }\n          } else {\n            this.onBubbleEvent('row_clicked', event.data.row);\n          }\n          break;\n\n        case 'columnRouteClick':\n          if (this.config.linkBehavior === 'route') {\n            goToUrl = this._parseGoToUrl(this.config.columnDefinitions[event.data.name].route, event.data.row);\n            if (!goToUrl) return false;\n            routeApp = String(goToUrl).split('/');\n            if (routeApp[1] && routeApp[1] === PopHref) {\n              const route = routeApp.slice(2).join('/');\n              this.srv.router.navigate([route]).catch((e) => {\n                console.log(e);\n                PopTemplate.error({message: `Invalid Client Route: ${route}`, code: 500});\n              });\n            } else {\n              SetSiteVar('redirect', goToUrl);\n              this.srv.base.redirect();\n            }\n          } else {\n            this.onBubbleEvent(event.name, event.data);\n          }\n          break;\n\n        case 'columnLinkClick':\n          this.onBubbleEvent('columnLinkClick', {\n            link: this.config.columnDefinitions[event.data.name].link,\n            row: event.data.row,\n            col: event.data.name\n          });\n          break;\n        case 'filter':\n          this.onApplySearchValue(event.data.filter, event.data.col);\n          break;\n        default:\n          this.onBubbleEvent(event.name, event.data);\n          break;\n      }\n    }\n    if (event.type === 'context_menu') {\n      this.events.emit(event);\n    }\n  }\n\n\n  /**\n   * This determine what the height of the table should be\n   * @param height\n   */\n  protected _setHeight(height: number = null): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      this.dom.overhead = 0;\n      if (this.config) {\n        if (height) this.config.height = height;\n        if (this.config.height) {\n          if (this.config.options || this.config.buttons.length || (this.config.search && !this.config.searchColumns)) this.dom.overhead = this.dom.overhead + 55;\n          if (this.config.paginator) this.dom.overhead = this.dom.overhead + 65;\n          this.dom.setHeight(this.config.height, this.dom.overhead);\n          return resolve(true);\n        }\n      } else {\n        this.dom.setHeight(0, 0);\n        this.dom.height.outer = null;\n        this.dom.height.inner = null;\n      }\n      return resolve(false);\n    });\n  }\n\n\n  /**\n   * The user can choose from a global search or a column search\n   */\n  private _setFilterPredicate(searchValue: string = null) {\n    if (this.config.searchColumns) {\n      this.config.matData.filter = '';\n      this.config.matData.filterPredicate = this.asset.filter.predicate.column;\n    } else {\n      this.config.matData.filterPredicate = this.asset.filter.predicate.tag;\n      this.onApplySearchValue((searchValue ? searchValue : ''), '');\n    }\n  }\n\n\n  protected _updateData(data: Array<object>) {\n    this.dom.refreshing();\n    if (!this.config.matData.paginator) this.config.matData.paginator = this.matPaginator;\n    if (IsObject(this.config.columnDefinitions, true)) {\n      if (IsArray(data)) {\n        this.asset.data = data;\n        this.config.matData.data = this.asset.data.slice();\n        if (!this.config.searchColumns && this.dom.session.searchValue) {\n          this.asset.filter.search(this.dom.session.searchValue, '');\n        }\n\n        this._setTableLayout();\n      }\n    } else if (IsArray(data, true)) {\n      this.config.data = data;\n      this.onBubbleEvent('column_definitions', data[0]);\n    }\n  }\n\n\n  protected _resetTable(data: Array<object> = null) {\n    this.log.info(`_resetTable`);\n    this.dom.setTimeout(`reset-table`, async () => {\n      this.dom.refreshing();\n      await this._configureTable();\n      await this._updateButtonControl();\n      if (Array.isArray(data)) {\n        this._updateData(data);\n      } else {\n        this.dom.setTimeout(`view-ready`, async () => {\n          this.dom.ready();\n        }, 200);\n      }\n    }, 0);\n  }\n\n\n  /**\n   * This will bring in the table config,user preferences,data set and tie it all together\n   * The structure of the data set is important to what the table will render\n   */\n  protected _configureTable(): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      this.log.info(`_configureTable`);\n      this.config.matData.data.length = 0;\n      const templates = {};\n      const visible = [];\n      let visibleOrdered = [];\n      let validDefinition = false;\n\n      if(!IsObject(this.config.columnDefinitions, true)){\n        this.dom.state.hasColumnDefinitions = true;\n        this.config.columnDefinitions = {\n          description: { name: \"description\", label: \"Description\", visible: true, sort: 3 },\n          id: { name: \"id\", label: \"ID\", checkbox: { visible: true, sort: 0 }, visible: true, sort: 999 },\n          name: { name: \"name\", label: \"Name\", visible: true, sort: 2 }\n        }\n      } else {\n\n        this.dom.state.hasColumnDefinitions = IsObject(this.config.columnDefinitions, true);\n      }\n\n      for (const col in this.config.columnDefinitions) {\n        if (!this.config.columnDefinitions.hasOwnProperty(col)) continue;\n\n        // Marking this as true so that the auto config does not run.\n        validDefinition = true;\n\n        // Figure out the template to use.\n        let template = 'Standard';\n        if (this.config.columnDefinitions[col].route) {\n          if (this.config.columnDefinitions[col].icon) {\n            template = this.config.columnDefinitions[col].helper ? 'RouteIconHelper' : 'RouteIcon';\n          } else {\n            template = this.config.columnDefinitions[col].helper ? 'RouteHelper' : 'Route';\n          }\n        } else if (this.config.columnDefinitions[col].link) {\n          if (this.config.columnDefinitions[col].icon) {\n            template = this.config.columnDefinitions[col].helper ? 'LinkIconHelper' : 'LinkIcon';\n          } else {\n            template = this.config.columnDefinitions[col].helper ? 'LinkHelper' : 'Link';\n          }\n        } else if (this.config.columnDefinitions[col].icon) {\n          template = this.config.columnDefinitions[col].helper ? 'IconHelper' : 'Icon';\n        } else if (this.config.columnDefinitions[col].helper) {\n          template = 'StandardHelper';\n        }\n\n        // Populate the template with anything it may need.\n        templates[col] = {\n          template: template,\n          name: col,\n          display: this.srv.pipe.label.transform(col, this.config.columnDefinitions[col]),\n          icon: this.config.columnDefinitions[col].icon,\n          helper: {\n            text: (!this.config.columnDefinitions[col].helper ? '' : (typeof this.config.columnDefinitions[col].helper === 'string' ? this.config.columnDefinitions[col].helper : this.config.columnDefinitions[col].helper.text)),\n            position: (!this.config.columnDefinitions[col].helper ? 'left' : (typeof this.config.columnDefinitions[col].helper === 'string' ? 'left' : this.config.columnDefinitions[col].helper.position)),\n          },\n          sticky: !this.config.columnDefinitions[col].sticky ? false : this.config.columnDefinitions[col].sticky\n        };\n\n        // If Visible\n        if (this.config.columnDefinitions[col].visible) visible.push({\n          name: col,\n          sort: this.config.columnDefinitions[col].sort\n        });\n\n        // Check if this column should also have a checkbox.\n        if (this.config.columnDefinitions[col].checkbox) {\n          const cbName = 'checkbox_' + col;\n          templates[cbName] = {\n            template: 'Checkbox',\n            name: col,\n            helper: {text: '', position: 'left'},\n            sticky: !this.config.columnDefinitions[col].checkbox.sticky ? false : this.config.columnDefinitions[col].checkbox.sticky\n          };\n          if (this.config.columnDefinitions[col].checkbox.visible) {\n            visible.push({\n              name: cbName,\n              sort: this.config.columnDefinitions[col].checkbox.sort ? this.config.columnDefinitions[col].checkbox.sort : 0\n            });\n          }\n        }\n      }\n\n      // Put the visible columns are in the correct order.\n      visible.sort(DynamicSort('sort'));\n      for (const i in visible) visibleOrdered.push(visible[i].name);\n\n      // If no column configs were passed in then use the data set and just display all the columns.\n      if (!validDefinition && this.asset.data && this.asset.data[0]) {\n        for (const col in this.asset.data[0]) {\n          if (!this.asset.data[0].hasOwnProperty(col)) continue;\n          visibleOrdered.push(col);\n          templates[col] = {\n            template: 'Standard',\n            name: col,\n            display: PopPipe.label.transform(col)\n          };\n        }\n      }\n\n      // Just in case, remove any columns in the visibleOrdered that do not exist in the data set.\n      if (Array.isArray(this.asset.data) && this.asset.data.length) {\n        const availableFields = Object.keys(this.asset.data[0]);\n        visibleOrdered = visibleOrdered.filter((col) => {\n          return (col.includes('checkbox_') ? true : availableFields.includes(col));\n        });\n      }\n\n      // Set the config.\n      this.config.columnConfig = {templates: templates, visible: visibleOrdered};\n\n\n      // Clear previous selections.\n      if (this.config.selection) this.config.selection.clear();\n\n\n      // Set the data.\n      if (IsArray(this.config.data, false)) {\n        this._updateData(this.config.data);\n      }\n      setTimeout(() => {\n        this.dom.ready();\n        this.onBubbleEvent('ready', 1);\n      });\n\n      return resolve(true);\n    });\n  }\n\n\n  protected _setTablePagination() {\n    if (this.config && this.config.height) {\n      let viewableRows;\n      if (this.config.paginator && this.matPaginator && IsArray(this.asset.data, false)) {\n        this.dom.state.hasPagination = this.asset.data.length > 50;\n        // viewableRows = this.asset.data ? this.asset.data.length : 0;\n        // if( this.dom.state.hasPagination ){\n        // viewableRows = parseInt(String(( ( this.dom.height.inner - 25 ) / 50 )), 10);\n        viewableRows = 50;\n        // if( this.config.headerSticky ) viewableRows--;\n        // }\n        setTimeout(() => {\n          this.config.matData.paginator.pageSize = 50;\n          this.config.matData.paginator.pageSizeOptions = [50];\n          this.config.matData.paginator.pageIndex = 0;\n          this.config.matData.paginator.page.next({pageIndex: 0, pageSize: 50, length: 50});\n        });\n      }\n    }\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  private _updateColumnDefinitions(definitions: { [key: string]: ColumnDefinitionInterface }) {\n    this.config.columnDefinitions = definitions;\n    this._configureTable().then(() => true);\n  }\n\n\n  /**\n   * This function will attach and configure a paginator if it is needed\n   */\n  private _attachPaginator(): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      if (this.matPaginator) {\n        this.matPaginator.hidePageSize = true;\n        if (this.config && this.config.matData) this.config.matData.paginator = this.matPaginator;\n      }\n      return resolve(false);\n    });\n  }\n\n\n  /**\n   * This will manage the button interface\n   * Buttons can have a dependency on what the user has currently selected(list items have a checkbox selection)\n   */\n  private _updateButtonControl(): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      // Initialize the ui button control\n      if (IsUndefined(this.ui.buttonControl)) {\n        this.ui.buttonControl = {\n          requireSelected: false,\n          requireOneSelected: false,\n          requireNoneSelected: true\n        };\n      }\n      if (this.config.selection) {\n        const selectCount = this.config.selection.selected.length;\n        this.ui.buttonControl.requireSelected = +selectCount > 0;\n        this.ui.buttonControl.requireOneSelected = +selectCount === 1;\n        this.ui.buttonControl.requireNoneSelected = +selectCount === 0;\n      } else {\n        this.ui.buttonControl.requireSelected = false;\n        this.ui.buttonControl.requireOneSelected = false;\n        this.ui.buttonControl.requireNoneSelected = true;\n      }\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * The table config has its own event emitter that need to be handled\n   */\n  private _handleConfigEvents(): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      if (!this.config.onEvent) this.config.onEvent = new Subject<PopBaseEventInterface>();\n      this.dom.setSubscriber('config-events', this.config.onEvent.subscribe((event: PopBaseEventInterface) => {\n        this._updateButtonControl().then(() => true);\n        this._onTableEvent(event);\n      }));\n      return resolve(false);\n    });\n  }\n\n\n  /**\n   * This will allow an outside component to trigger specific functionality through the config of this component\n   */\n  private _setConfigHooks(): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n\n      this.config.setHeight = (height: number) => {\n        this._setTableHeight(height);\n      };\n\n      this.config.clearSelected = (): Promise<boolean> => {\n        return new Promise<boolean>(async (clearResolver) => {\n          this.config.selection.clear();\n          await Sleep(250);\n          this._updateButtonControl().then(() => {\n            return clearResolver(true);\n          });\n        });\n      };\n\n      this.config.updateColumnDefinitions = (definitions) => {\n        this._updateColumnDefinitions(definitions);\n      };\n\n      this.config.updateData = (data) => {\n        this._updateData(data);\n      };\n\n      this.config.setLayout = (height: number) => {\n        this._setTableLayout(height);\n      };\n\n      this.config.reset = (data: Array<object> = null) => {\n        this._resetTable(data);\n      };\n\n      this.config.applyFilter = (searchValue: string, col: string) => {\n        if (!this.config.searchColumns) {\n          this.onApplySearchValue(searchValue, col);\n        }\n      };\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * Initialize and manage the filter predicates that this table will use\n   */\n  private _initSearchFilter(): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      this.dom.session.searchValue = this.dom.session.searchValue ? this.dom.session.searchValue : (this.config.searchValue ? this.config.searchValue : '');\n      this.asset.filter.predicate = {\n        default: this.config.matData.filterPredicate, // Store a copy of this for resetting when options toggle search/column search.\n        column: (data, filter: string): boolean => {\n          let exists = true;\n          for (const i in this.asset.filter.column) {\n            if (data[i] && data[i].toLowerCase) {\n              exists = data[i].toLowerCase().includes(this.asset.filter.column[i]);\n            } else {\n              // Cast numbers to strings.\n              exists = String(data[i]).includes(this.asset.filter.column[i]);\n            }\n            if (!exists) return false;\n          }\n          return true;\n        },\n        tag: (data: any, filter: string): boolean => {\n          return ObjectContainsTagSearch(data, filter);\n        }\n      };\n      this.asset.filter.search = (searchValue: string, col: string) => {\n        searchValue = searchValue.trim().toLocaleLowerCase();\n        if (!col) {\n          this.config.matData.filter = searchValue;\n        } else {\n          if (searchValue) {\n            // Make sure that this column is in the list.\n            this.asset.filter.column[col] = searchValue;\n          } else if (this.asset.filter.column[col]) {\n            // Since filter is empty this column shouldn't be considered.\n            delete (this.asset.filter.column[col]);\n          }\n          this.config.matData.filter = searchValue;\n        }\n\n        if (this.config.paginator && this.config.matData.paginator) this.config.matData.paginator.firstPage();\n      };\n      return resolve(true);\n    });\n  }\n\n\n  private _setTableLayout(height: number = null) {\n    this.dom.setTimeout('table-layout', () => {\n      this.dom.loading();\n      if (this.config && IsArray(this.asset.data, false)) {\n        this._setHeight(height).then(() => {\n\n        });\n        setTimeout(() => {\n          this.dom.ready();\n          this._setTablePagination();\n        }, 0);\n      }\n    }, 0);\n  }\n\n\n  private _setTableHeight(height: number = null) {\n    if (this.config && IsArray(this.asset.data, false)) {\n      this._setHeight(height);\n      setTimeout(() => {\n        this.dom.ready();\n        this._setTablePagination();\n      }, 0);\n    }\n  }\n\n\n  private _parseGoToUrl(goToUrl = '', row: Entity): string {\n    if (!goToUrl) return goToUrl;\n\n    // Check for alias\n    if (goToUrl.includes('alias:')) {\n      const start = goToUrl.indexOf('alias:');\n      const end = goToUrl.indexOf('/', start) !== -1 ? goToUrl.indexOf('/', start) : goToUrl.length;\n      const aliasString = goToUrl.substring(start, end);\n      const aliasArray = aliasString.split(':');\n      aliasArray.shift();\n      const alias = PopPipe.label.getAlias(aliasArray.shift());\n      goToUrl = goToUrl.replace(aliasString, alias);\n    }\n\n    // Check for other id.\n    if (goToUrl.includes(':') && row) {\n      goToUrl = ParseLinkUrl(goToUrl, row);\n    }\n\n    return goToUrl;\n  }\n\n}\n\n\n\n\n\n","import {Component, ElementRef, Input, OnDestroy, OnInit, ViewChild} from '@angular/core';\nimport {MatCheckbox} from '@angular/material/checkbox';\nimport {MatSort, SortDirection} from '@angular/material/sort';\nimport {SelectionModel} from '@angular/cdk/collections';\nimport {TableConfig} from '../pop-table.model';\nimport {PopContextMenuConfig} from '../../pop-context-menu/pop-context-menu.model';\nimport {PopBaseEventInterface} from '../../../../pop-common.model';\nimport {PopExtendComponent} from '../../../../pop-extend.component';\nimport {PopDomService} from '../../../../services/pop-dom.service';\nimport {fadeInOut} from '../../../../pop-common-animations.model';\nimport {ParseLinkUrl} from '../../../entity/pop-entity-utility';\nimport {PopDisplayService} from '../../../../services/pop-display.service';\n\n\n@Component({\n  selector: 'lib-pop-table-view',\n  templateUrl: './pop-table-view.component.html',\n  styleUrls: ['./pop-table-view.component.scss'],\n  animations: [\n    fadeInOut,\n  ]\n})\nexport class PopTableViewComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() config: TableConfig;\n  @ViewChild(MatSort, {static: true}) tableSort: MatSort;\n  @ViewChild('checkbox') checkbox: MatCheckbox;\n\n  public name = 'PopTableViewComponent';\n\n  srv = {\n    display: <PopDisplayService>undefined,\n  };\n\n  public ui = {\n    helperText:<any[]> []\n  };\n\n\n  /**\n   * @param el\n   * @param _displayRepo\n   * @param _domRepo\n   */\n  constructor(\n    public el: ElementRef,\n    protected _displayRepo: PopDisplayService,\n    protected _domRepo: PopDomService,\n  ) {\n    super();\n    /**\n     * Configure the specifics of this component\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        this._attachContextMenu();\n\n        // Assign this so it is available inside the filterBarConfig.\n        this.config.matData.sort = this.tableSort;\n        // Create a container for helper texts\n        this.ui.helperText = [];\n        // Add to the config so it's available to prepTable.\n        this.config.selection = new SelectionModel(true, []);\n        this.config.headerSticky = true;\n        setTimeout(() => {\n          this.config.matData.sort = this.tableSort;\n          if (this.config.initialSort) this.tableSort.sort({\n            id: this.config.initialSort,\n            start: this.config.initialSortDirection,\n            disableClear: true\n          });\n        }, 500);\n\n        resolve(true);\n      });\n    };\n  }\n\n\n  sortDisplay(col) {\n\n    const isActive = this.tableSort.active === col ? true : false;\n    let display = 'arrow_drop_down';\n\n    if (isActive) {\n      if (this.tableSort.direction === 'asc') {\n        display = 'arrow_drop_up';\n      }\n    }\n\n    return display;\n\n  }\n\n  // sort(column,direction){\n  //   // console.log(this.tableSort);\n  //   this.tableSort.direction = direction === 'asc' ? 'desc' : 'asc';\n  //   this.tableSort.sort({ id: column, start: direction, disableClear: true });\n  // }\n\n  sort(col) {\n    const isActive = this.tableSort.active === col ? true : false;\n    let direction: SortDirection = 'asc';\n    if (isActive) {\n      direction = this.tableSort.direction === 'asc' ? 'desc' : 'asc';\n    } else {\n      direction = 'asc';\n    }\n    this.tableSort.direction = direction === 'asc' ? 'desc' : 'asc';\n    this.tableSort.sort({id: col, start: direction, disableClear: true});\n  }\n\n  /**\n   * This component is a child component of pop table\n   * This component specifically handles the view that renders the data\n   */\n  ngOnInit() {\n    super.ngOnInit();\n  }\n\n\n  /**\n   * Trigger an event when the user click on a name\n   * @param name\n   * @param row\n   */\n  onColumnStandardClick(name, row) {\n    this.config.onEvent.next({\n      source: this.name,\n      type: 'table',\n      name: 'columnStandardClick',\n      data: {\n        name: name,\n        row: row\n      }\n    });\n  }\n\n\n  /**\n   * Trigger an event when the user click on a name that is linked to a route\n   * @param name\n   * @param row\n   */\n  onColumnRouteClick(name, row) {\n    this.config.onEvent.next({\n      source: this.name,\n      type: 'table',\n      name: 'columnRouteClick',\n      data: {\n        name: name,\n        row: row\n      }\n    });\n  }\n\n\n  /**\n   * Create a helper text for a name\n   * @param index\n   * @param col\n   * @param row\n   */\n  onHelperText(index, col, row) {\n    \n    if (!row[col]) return '';\n    let text = this.config.columnConfig.templates[col].helper.text;\n\n    // Check for alias\n    if (text.includes('alias:')) {\n      const start = text.indexOf('alias:');\n      const end = text.indexOf(' ', start) !== -1 ? text.indexOf(' ', start) : text.length;\n      const aliasString = text.substring(start, end);\n      const aliasArray = aliasString.split(':');\n      aliasArray.shift();\n      const alias = this.srv.display.alias(aliasArray.shift());\n      text = text.replace(aliasString, alias);\n    }\n\n    // If no text is wrapped in < > then this is the text we want.\n    if (text.indexOf('<') === -1) {\n      this.ui.helperText[index] = text;\n      return text;\n    }\n\n    // Replace any text between < > with the corresponding name data.\n    const textArray = text.split('<');\n    text = '';\n    for (let i = 0; i < textArray.length; i++) {\n      if (!textArray[i]) continue;\n      if (textArray[i].indexOf('>') === -1) {\n        text += textArray[i];\n      } else {\n        const fieldArray = textArray[i].split('>');\n        for (let ii = 0; ii < fieldArray.length; ii++) {\n          if (!fieldArray[ii]) continue;\n          if (ii === 0) {\n            text += (row[fieldArray[ii]] ? row[fieldArray[ii]] : '');\n          } else {\n            text += fieldArray[ii];\n          }\n        }\n      }\n    }\n    \n    this.ui.helperText[index] = text;\n\n    return text;\n    \n  }\n\n\n  /**\n   * Trigger an doAction when a name link is clicked\n   * @param name\n   * @param row\n   */\n  onColumnLinkClick(name, row) {\n    this.config.onEvent.next({\n      source: this.name,\n      type: 'table',\n      name: 'columnLinkClick',\n      data: {\n        name: name,\n        row: row\n      }\n    });\n  }\n\n\n  /**\n   * Selects all rows if they are not all selected; otherwise clear all row selections.\n   */\n  onMasterRowToggleClick() {\n    if (this.config.selection.hasValue() && !this.isAllRowsSelected()) {\n      this.config.selection.clear();\n      this.checkbox.checked = false;\n    } else {\n      this.isAllRowsSelected() ? this.config.selection.clear() : this.config.matData.filteredData.forEach(row => this.config.selection.select(row));\n      this.config.onEvent.next({\n        source: this.name,\n        type: 'table',\n        name: 'rows_selected',\n        data: this.config.selection.selected\n      });\n    }\n  }\n\n\n  /**\n   * This will pass up to the table component\n   * @param filter\n   * @param col\n   */\n  onApplySearchValue(filter: string, col: string) {\n    this.config.onEvent.next({\n      source: this.name,\n      type: 'table',\n      name: 'filter',\n      data: {\n        filter: filter,\n        col: col,\n      }\n    });\n  }\n\n\n  /**\n   * Asks whether the number of selected elements matches the total number of rows.\n   */\n  isAllRowsSelected() {\n    const numSelected = this.config.selection.selected.length;\n    const numRows = this.config.matData.filteredData.length;\n    return numSelected === numRows;\n  }\n\n\n  /**\n   * This will bubble events with the table signature\n   * @param name\n   * @param event\n   */\n  onBubbleEvent(name, event) {\n    this.config.onEvent.next({\n      source: this.name,\n      type: 'table',\n      name: name,\n      data: event\n    });\n  }\n\n\n  /**\n   * *ngFor track by for columns\n   * Prevents columns from re-rendering when the item is the same\n   * @param index\n   * @param item\n   */\n  trackColumnByItem(index, item) {\n    if (!item) return null;\n    return item;\n  }\n\n\n  /**\n   * *ngFor track by for rows\n   * Prevents rows from re-rendering when the item entityId is still the same\n   * @param index\n   * @param item\n   */\n  trackRowByItemId(index, item) {\n    if (!item) return null;\n    return item.id;\n  }\n\n\n  /**\n   * Clean up the dom of this component\n   */\n  ngOnDestroy() {\n    super.ngOnDestroy();\n  }\n\n\n  /**\n   * This will a build a context-menu that can used when user right clicks a certain element\n   */\n  private _attachContextMenu() {\n    this.dom.contextMenu.config = new PopContextMenuConfig();\n    //\n    this.dom.contextMenu.configure = (name, row, event: MouseEvent) => {\n      let goToUrl = '';\n      let internal_name;\n      // check if it is a route, get the url from the route given from name definition\n      if (this.config.columnDefinitions[name].route) {\n        goToUrl = ParseLinkUrl(this.config.columnDefinitions[name].route, row);\n      } else if (this.config.route) {\n        // else check if a global route exists on the table config. If it does, route to that\n        // this will most likely be used to route to an entityId by their entityId\n        goToUrl = ParseLinkUrl(this.config.route, row);\n      }\n\n      if (this.config.columnDefinitions[name].internal_name) {\n        internal_name = this.config.columnDefinitions[name].internal_name;\n      } else {\n        internal_name = row.internal_name ? row.internal_name : this.config.internal_name ? this.config.internal_name : null;\n      }\n      if (!goToUrl && !internal_name) return false;\n\n      // if we haven't returned, prevent the default behavior of the right click.\n      event.preventDefault();\n\n      // reset the context menu, and configure it to load at the position clicked.\n      this.dom.contextMenu.config.resetOptions();\n\n\n      if (internal_name) {\n        this.dom.contextMenu.config.addPortalOption(internal_name, row.id ? +row.id : +row[internal_name + '_fk']);\n      }\n      if (goToUrl) this.dom.contextMenu.config.addNewTabOption(goToUrl);\n\n      this.dom.contextMenu.config.x = event.clientX;\n      this.dom.contextMenu.config.y = event.clientY;\n      this.dom.contextMenu.config.toggle.next(true);\n    };\n    this.dom.setSubscriber('context-menu', this.dom.contextMenu.config.emitter.subscribe((event: PopBaseEventInterface) => {\n      this.config.onEvent.next(event);\n    }));\n  }\n}\n","import { NgModule } from '@angular/core';\n\nimport {DragDropModule} from '@angular/cdk/drag-drop';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { MaterialModule } from '../../material/material.module';\n\nimport { MatDialogModule } from '@angular/material/dialog';\nimport { MatPaginatorModule } from '@angular/material/paginator';\nimport { MatSortModule } from '@angular/material/sort';\nimport { MatTableModule } from '@angular/material/table';\nimport { PopTableComponent } from './pop-table.component';\nimport { PopFieldItemModule } from '../pop-field-item/pop-field-item.module';\nimport { PopContextMenuModule } from '../pop-context-menu/pop-context-menu.module';\nimport { PopTableViewComponent } from './pop-table-view/pop-table-view.component';\nimport { PopTableDialogComponent } from './pop-table-dialog/pop-table-dialog.component';\n\n\n@NgModule({\n  declarations: [\n    PopTableComponent,\n    PopTableDialogComponent,\n    PopTableViewComponent,\n  ],\n  imports: [\n    CommonModule,\n    FormsModule,\n    MaterialModule,\n    MatTableModule,\n    MatDialogModule,\n    MatSortModule,\n    MatPaginatorModule,\n    PopFieldItemModule,\n    PopContextMenuModule,\n    DragDropModule\n  ],\n  exports: [\n    PopTableComponent,\n    PopTableViewComponent,\n    DragDropModule\n  ],\n})\nexport class PopTableModule {\n}\n","import { Component, OnInit, Inject } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport { PopAjaxDialogComponent } from '../pop-ajax-dialog.component';\nimport { PopRouteHistoryResolver } from '../../../../services/pop-route-history.resolver';\nimport { PopAjaxDialogConfigInterface } from '../pop-ajax-dialog.model';\nimport { MainSpinner } from '../../pop-indicators/pop-indicators.model';\nimport { PopRequestService } from '../../../../services/pop-request.service';\n\n\n@Component({\n  selector: 'lib-dialog',\n  templateUrl: './dialog.component.html',\n  styleUrls: [ './dialog.component.scss' ]\n})\nexport class DialogComponent implements OnInit {\n  mainSpinner: MainSpinner;\n  loading: boolean;\n  httpError: { error: string, code: number };\n\n\n  constructor(\n    @Inject(MAT_DIALOG_DATA) public data: PopAjaxDialogConfigInterface,\n    private dialog: MatDialogRef<PopAjaxDialogComponent>,\n    private history: PopRouteHistoryResolver,\n    private requestService: PopRequestService,\n  ){\n  }\n\n\n  ngOnInit(){\n    this.setSpinnerOptions();\n    if( this.data.patch ) this.makeRequest();\n    else this.closeDialogAfterDelay();\n  }\n\n\n  private makeRequest(): void{\n    this.loading = true;\n    switch( this.data.patch.type ){\n      case 'delete':\n        this.doDelete();\n        break;\n      case 'get':\n        this.doGet();\n        break;\n      case 'patch':\n        this.doPatch();\n        break;\n      case 'post':\n        this.doPost();\n        break;\n    }\n  }\n\n\n  private doPatch(): void{\n    this.requestService.doPatch(this.data.patch.path, this.data.patch.body, this.data.patch.version, false).subscribe(res => {\n      this.data.response = res;\n      this.loading = false;\n      this.closeDialogAfterDelay();\n    }, err => {\n      this.loading = false;\n      this.httpError = {\n        error: typeof err.error !== 'undefined' ? err.error.message : err.statusText,\n        code: err.status\n      };\n    });\n  }\n\n\n  private doDelete(): void{\n    this.requestService.doDelete(this.data.patch.path, this.data.patch.body, this.data.patch.version, false).subscribe(res => {\n      this.data.response = res;\n      this.loading = false;\n      this.closeDialogAfterDelay();\n    }, err => {\n      this.loading = false;\n      this.httpError.error = typeof err.error !== 'undefined' ? err.error.message : err.statusText;\n      this.httpError.code = err.status;\n    });\n\n  }\n\n\n  private doPost(): void{\n    this.requestService.doPost(this.data.patch.path, this.data.patch.body, this.data.patch.version, false).subscribe(res => {\n      this.data.response = res;\n      this.loading = false;\n      this.closeDialogAfterDelay();\n    }, err => {\n      this.loading = false;\n      this.httpError.error = typeof err.error !== 'undefined' ? err.error.message : err.statusText;\n      this.httpError.code = err.status;\n    });\n\n  }\n\n\n  private doGet(): void{\n    this.requestService.doGet(this.data.patch.path, {},this.data.patch.version, false).subscribe(res => {\n      this.loading = false;\n      this.data.response = res;\n      this.closeDialogAfterDelay();\n    }, err => {\n      this.loading = false;\n      this.httpError.error = typeof err.error !== 'undefined' ? err.error.message : err.statusText;\n      this.httpError.code = err.status;\n    });\n\n  }\n\n\n  public close(): void{\n    this.dialog.close();\n  }\n\n\n  private closeDialogAfterDelay(): void{\n    setTimeout(() => {\n      this.dialog.close();\n    }, this.data.timeDelay ? this.data.timeDelay : 1000);\n  }\n\n\n  private setSpinnerOptions(): void{\n    this.mainSpinner = {\n      diameter: 100,\n      strokeWidth: 10,\n    };\n  }\n}\n","import { Component, Input, AfterViewInit, OnInit, Output, EventEmitter, } from '@angular/core';\nimport { PopAjaxDialogConfigInterface } from './pop-ajax-dialog.model';\nimport { MatDialog } from '@angular/material/dialog';\nimport { DialogComponent } from './dialog/dialog.component';\nimport { PopBaseService } from '../../../services/pop-base.service';\nimport { Router } from '@angular/router';\nimport { SetSiteVar } from '../../../pop-common-utility';\nimport { PopHref } from '../../../pop-common.model';\n\n\n@Component({\n  selector: 'lib-pop-ajax-dialog',\n  template: '',\n})\nexport class PopAjaxDialogComponent implements OnInit, AfterViewInit {\n  @Input() ajaxDialogConfig: PopAjaxDialogConfigInterface;\n  @Output() close: EventEmitter<any> = new EventEmitter<any>();\n\n\n  constructor(\n    public dialog: MatDialog,\n    private baseService: PopBaseService,\n    private router: Router,\n  ){\n  }\n\n\n  ngOnInit(){\n  }\n\n\n  ngAfterViewInit(){\n    setTimeout(() => {\n      this.loadDialog();\n    }, 250);\n  }\n\n\n  private loadDialog(): void{\n    const dialogBox = this.dialog.open(DialogComponent, {\n      width:'500px',\n      data: this.ajaxDialogConfig\n    });\n    dialogBox.afterClosed().subscribe(() => {\n      this.close.emit(this.ajaxDialogConfig.response);\n      if( this.ajaxDialogConfig.redirect ) this.redirect();\n    });\n  }\n\n\n  private redirect(): void{\n    if( this.ajaxDialogConfig.redirect.app == PopHref){\n      this.router.navigateByUrl(`${this.ajaxDialogConfig.redirect.path}`).catch(e => {\n      });\n    }\n    else{\n      SetSiteVar('redirect', `/${this.ajaxDialogConfig.redirect.app}/${this.ajaxDialogConfig.redirect.path}`);\n      this.baseService.redirect();\n    }\n  }\n\n\n}\n","import { NgModule } from \"@angular/core\";\nimport { MaterialModule } from '../../material/material.module';\nimport { PopAjaxDialogComponent } from \"./pop-ajax-dialog.component\";\nimport { DialogComponent } from \"./dialog/dialog.component\";\nimport { PopIndicatorsModule } from \"../pop-indicators/pop-indicators.module\";\nimport { CommonModule } from \"@angular/common\";\n\n\n@NgModule({\n  imports: [\n    MaterialModule,\n    PopIndicatorsModule,\n    CommonModule\n  ],\n    declarations: [\n        PopAjaxDialogComponent,\n        DialogComponent,\n    ],\n    exports: [\n        PopAjaxDialogComponent,\n    ],\n})\nexport class PopAjaxDialogModule {\n}\n","import { Component, Inject, OnInit } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport { PopNavigationDialogDataInterface, PopNavigationDialogItemInterface } from '../pop-dialogs.model';\nimport { Router } from '@angular/router';\n\n\n@Component({\n  selector: 'lib-pop-navigation-dialog',\n  templateUrl: './pop-navigation-dialog.component.html',\n  styleUrls: [ './pop-navigation-dialog.component.scss' ]\n})\nexport class PopNavigationDialogComponent implements OnInit {\n\n  constructor(\n    @Inject(MAT_DIALOG_DATA) public data: PopNavigationDialogDataInterface,\n    public dialog: MatDialogRef<PopNavigationDialogComponent>,\n    private router: Router\n  ){\n  }\n\n\n  ngOnInit(){\n    if( !this.data.display ) this.data.display = 'Navigation List';\n    if( !this.data.list || !Array.isArray(this.data.list) ) this.data.list = [];\n    if( !this.data.basePath || !( typeof this.data.basePath === 'string' ) ) this.data.basePath = null;\n  }\n\n\n  navigate(item: PopNavigationDialogItemInterface){\n    this.dialog.close();\n    if( item.path ){\n      this.router.navigateByUrl(item.path).catch(e => false);\n    }else if( this.data.basePath && item.id ){\n      this.router.navigateByUrl(`${this.data.basePath}/${item.id}/general`).catch(e => false);\n    }\n  }\n\n\n  cancel(){\n    this.dialog.close(null);\n  }\n}\n","import { Component, ElementRef, Inject, OnDestroy, OnInit } from '@angular/core';\nimport {\n  EntitySuccessDataInterface,\n  ServiceInjector\n} from '../../../../pop-common.model';\n\nimport { MAT_DIALOG_DATA, MatDialog, MatDialogRef } from '@angular/material/dialog';\n\nimport { PopExtendComponent } from '../../../../pop-extend.component';\n\n\n@Component( {\n  selector: 'lib-pop-success-dialog',\n  templateUrl: './pop-success-dialog.component.html',\n  styleUrls: [ './pop-success-dialog.component.scss' ]\n} )\nexport class PopSuccessDialogComponent extends PopExtendComponent implements OnInit, OnDestroy {\n\n\n  name = 'PopSuccessDialogComponent';\n\n  protected srv = {\n    dialog: <MatDialog>ServiceInjector.get( MatDialog ),\n  };\n\n  protected asset = {};\n\n  public ui = {\n    submitText: 'Ok',\n    header: 'Success',\n    message: 'Action was Successful'\n  };\n\n\n  constructor(\n    public el: ElementRef,\n    public dialog: MatDialogRef<PopSuccessDialogComponent>,\n    @Inject( MAT_DIALOG_DATA ) public data: EntitySuccessDataInterface,\n  ){\n    super();\n\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n\n        this.ui = { ...this.ui, ...this.data };\n\n        return resolve( true );\n      } );\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n\n\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * The user can click a cancel btn to close the action dialog\n   */\n  onFormClose(){\n    this.dom.setTimeout( `close-modal`, () => {\n      this.dialog.close( -1 );\n    }, 250 );\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Protected Method )                                      *\n   *               These are protected instead of private so that they can be overridden          *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n}\n","import { Component, Inject, OnInit } from '@angular/core';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { PopMessageDialogDataInterface } from '../pop-dialogs.model';\n\n@Component({\n  selector: 'lib-pop-message-dialog',\n  templateUrl: './pop-message-dialog.component.html',\n  styleUrls: ['./pop-message-dialog.component.scss']\n})\nexport class PopMessageDialogComponent implements OnInit {\n\n  constructor(\n    @Inject(MAT_DIALOG_DATA) public config:PopMessageDialogDataInterface ,\n    public dialog: MatDialogRef<PopMessageDialogComponent>\n  ) { }\n\n  ngOnInit(): void {\n  }\n\n  onCancel(){\n    this.dialog.close(null);\n  }\n  \n}\n","import { NgModule } from '@angular/core';\nimport { MaterialModule } from '../../material/material.module';\nimport { PopIndicatorsModule } from '../pop-indicators/pop-indicators.module';\nimport { CommonModule } from '@angular/common';\nimport { PopConfirmationDialogComponent } from './pop-confirmation-dialog/pop-confirmation-dialog.component';\nimport { PopNavigationDialogComponent } from './pop-navigation-dialog/pop-navigation-dialog.component';\nimport { PopTableModule } from '../pop-table/pop-table.module';\nimport { PopErrorsModule } from '../pop-errors/pop-errors.module';\nimport { PopFieldItemGroupModule } from '../pop-field-item-group/pop-field-item-group.module';\nimport { PopTableDialogComponent } from './pop-table-dialog/pop-table-dialog.component';\nimport { PopActionDialogComponent } from './pop-action-dialog/pop-action-dialog.component';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { PopSuccessDialogComponent } from './pop-success-dialog/pop-success-dialog.component';\nimport { PopMessageDialogComponent } from './pop-message-dialog/pop-message-dialog.component';\nimport { PortalModule } from '@angular/cdk/portal';\n\n\n@NgModule({\n  imports: [\n    MaterialModule,\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    PortalModule,\n    PopIndicatorsModule,\n    PopTableModule,\n    PopErrorsModule,\n    PopFieldItemGroupModule\n  ],\n  declarations: [\n    PopConfirmationDialogComponent,\n    PopNavigationDialogComponent,\n    PopTableDialogComponent,\n    PopActionDialogComponent,\n    PopSuccessDialogComponent,\n    PopMessageDialogComponent\n  ],\n  exports: [\n    PopConfirmationDialogComponent,\n    PopNavigationDialogComponent,\n    PopTableDialogComponent,\n    PopActionDialogComponent,\n    PopSuccessDialogComponent,\n    PopMessageDialogComponent\n  ],\n})\nexport class PopDialogsModule {}\n","import { NgModule } from '@angular/core';\nimport { PopExtendComponent } from '../../pop-extend.component';\nimport { PopExtendDynamicComponent } from '../../pop-extend-dynamic.component';\n\nimport { PopTabMenuModule } from './pop-tab-menu/pop-tab-menu.module';\nimport { PopFieldItemModule } from './pop-field-item/pop-field-item.module';\nimport { PopMenuModule } from '../app/pop-menu/pop-menu.module';\nimport { PopIndicatorsModule } from './pop-indicators/pop-indicators.module';\nimport { PopErrorsModule } from './pop-errors/pop-errors.module';\nimport { PopFieldItemGroupModule } from './pop-field-item-group/pop-field-item-group.module';\nimport { PopSideBySideModule } from './pop-side-by-side/pop-side-by-side.module';\nimport { PopTableModule } from './pop-table/pop-table.module';\nimport { PopAjaxDialogModule } from './pop-ajax-dialog/pop-ajax-dialog.module';\nimport { PopDialogsModule } from './pop-dialogs/pop-dialogs.module';\nimport { PopContextMenuModule } from './pop-context-menu/pop-context-menu.module';\nimport { DialogComponent } from './pop-ajax-dialog/dialog/dialog.component';\n\n@NgModule({\n  imports: [],\n  declarations: [\n    PopExtendComponent,\n    PopExtendDynamicComponent,\n  ],\n  exports: [\n    PopTabMenuModule,\n    PopFieldItemModule,\n    PopMenuModule,\n    PopTableModule,\n    PopIndicatorsModule,\n    PopErrorsModule,\n    PopFieldItemGroupModule,\n    PopSideBySideModule,\n    PopAjaxDialogModule,\n    PopDialogsModule,\n    PopContextMenuModule,\n  ],\n})\nexport class PopBaseModule {\n\n}\n","import { Component, ElementRef, Inject, Input, OnDestroy, OnInit } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport { ActivatedRoute } from '@angular/router';\nimport { PopExtendComponent } from '../../../../pop-extend.component';\nimport { Entity, PopEntity } from '../../../../pop-common.model';\nimport { IsObject } from '../../../../pop-common-utility';\n\n\n@Component({\n  selector: 'lib-pop-entity-advanced-search',\n  templateUrl: './pop-entity-advanced-search.component.html',\n  styleUrls: [ './pop-entity-advanced-search.component.scss' ]\n})\nexport class PopEntityAdvancedSearchComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  public name ='PopEntityAdvancedSearchComponent';\n  @Input() internal_name: string;\n\n\n  constructor(\n    public el: ElementRef,\n    private advancedSearchDialogRef: MatDialogRef<PopEntityAdvancedSearchComponent>,\n    private route: ActivatedRoute,\n    @Inject(MAT_DIALOG_DATA) public data,\n  ){\n    super();\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        this.internal_name = 'role';\n\n        this.ui.fields = [];\n        const searchFields = {};\n        let needsMetadata = false;\n        let model;\n        if( !this.internal_name ) this.internal_name = PopEntity.getRouteInternalName(this.route);\n\n        this.dom.setHeightWithParent(null, 145, 600).then((res) => true);\n\n        PopEntity.getCoreConfig(this.internal_name).then((entityConfig: any) => {\n          this.asset.entityId = entityConfig;\n          if(IsObject(this.asset.entity.repo.model.field, true)){\n            Object.keys(this.asset.entity.repo.model.field).map((column) => {\n              if( column in this.asset.entity.repo.model.field[ column ][ 'itemMap' ] ){\n                model = Object.assign({}, this.asset.entity.repo.model.field[ column ].items[ entityConfig.fields[ column ][ 'itemMap' ][ column ] ].model);\n                delete model.api; // doAction fields don't patch\n                delete model.metadata;\n                delete model.transformation;\n                searchFields[ column ] = model;\n                if( model.options && model.options.metadata ){\n                  needsMetadata = true;\n                }\n              }\n            });\n          }\n\n          // if needsMetadata go grab it before you try to build out the fields\n          if( needsMetadata ){\n            this.asset.entity.repo.getUiResources(this.core).subscribe((metadata) => {\n              if( !this.asset.entity.entity ) this.asset.entity.entityId = <Entity>{};\n              this.asset.entity.entity.metadata = metadata;\n              Object.keys(searchFields).map((field) => {\n                // this.ui.fields.push(this.config.getCoreFieldItem(this.asset.entity, field, searchFields[ field ]));\n              });\n              this.ui.fields.sort(function(a, b){\n                if( a.model.sort_top < b.model.sort_top ) return -1;\n                if( a.model.sort_top > b.model.sort_top ) return 1;\n                return 0;\n              });\n              console.log('fields', this.ui.fields);\n            });\n          }else{\n            // no metadata was needed for any of these fields\n            Object.keys(searchFields).map((field) => {\n              // this.ui.fields.push(this.config.getCoreFieldItem(this.asset.entity, field, searchFields[ field ]));\n            });\n            this.ui.fields.sort(function(a, b){\n              if( a.model.sort_top < b.model.sort_top ) return -1;\n              if( a.model.sort_top > b.model.sort_top ) return 1;\n              return 0;\n            });\n            console.log('fields', this.ui.fields);\n          }\n        });\n\n        resolve(true);\n      });\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  onSearch(): void{\n    this.advancedSearchDialogRef.close(this.data);\n  }\n\n\n  onCancel(): void{\n    this.advancedSearchDialogRef.close(null);\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n}\n","import {Component, ElementRef, Inject, Input, OnDestroy, OnInit, ViewChild} from '@angular/core';\nimport {ActivatedRoute, Router} from '@angular/router';\nimport {\n  TableButtonInterface,\n  TableConfig,\n  TableInterface,\n  TableOptionsConfig\n} from '../../base/pop-table/pop-table.model';\nimport {MainSpinner} from '../../base/pop-indicators/pop-indicators.model';\nimport {FieldItemGroupConfig} from '../../base/pop-field-item-group/pop-field-item-group.model';\nimport {PopTableComponent} from '../../base/pop-table/pop-table.component';\nimport {PopEntityAdvancedSearchComponent} from './pop-entity-advanced-search/pop-entity-advanced-search.component';\nimport {PopEntityUtilPortalService} from '../services/pop-entity-util-portal.service';\nimport {PopDomService} from '../../../services/pop-dom.service';\nimport {\n  AppGlobalInterface,\n  CoreConfig, DataFactory,\n  DataFilter,\n  Dictionary,\n  Entity,\n  EntityExtendInterface,\n  PopBaseEventInterface,\n  PopBusiness,\n  PopHref,\n  PopTemplate,\n  ServiceInjector,\n} from '../../../pop-common.model';\nimport {PopExtendComponent} from '../../../pop-extend.component';\nimport {MatDialog} from '@angular/material/dialog';\nimport {PopEntityEventService} from '../services/pop-entity-event.service';\nimport {ParseLinkUrl, ParseModelValue} from '../pop-entity-utility';\nimport {PopEntityActionService} from '../services/pop-entity-action.service';\nimport {PopPipeService} from '../../../services/pop-pipe.service';\nimport {PopEntityService} from '../services/pop-entity.service';\nimport {\n  CleanObject,\n  DynamicSort, GetRouteAlias, GetSessionSiteVar,\n  IsArray, IsCallableFunction,\n  IsObject,\n  IsObjectThrowError,\n  IsString,\n  SetSessionSiteVar, Sleep,\n  StorageGetter,\n  TitleCase\n} from '../../../pop-common-utility';\nimport {PopCacFilterBarService} from '../../app/pop-cac-filter/pop-cac-filter.service';\nimport {PopEntityUtilParamService} from '../services/pop-entity-util-param.service';\nimport {forkJoin} from 'rxjs';\n\n\n@Component({\n  selector: 'lib-pop-entity-list',\n  styleUrls: ['./pop-entity-list.component.scss'],\n  templateUrl: './pop-entity-list.component.html',\n  providers: [PopDomService]\n})\nexport class PopEntityListComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() internal_name: string;\n  @Input() extension: EntityExtendInterface;\n  @ViewChild('list') list: PopTableComponent;\n  @Input() dataFactory: DataFactory = null;\n\n  public name = 'PopEntityListComponent';\n\n\n  public readonly table = {\n    data: <Entity[]>[],\n    buttons: <TableButtonInterface[]>[\n      // { id: 'custom', name: 'Custom', accessType: 'can_read', requireSelected: true },\n      // { id: 'advanced_search', name: 'Advanced Search', accessType: 'can_read', requireSelected: false },\n      {id: 'archive', name: 'Archive', accessType: 'can_create', requireSelected: true},\n      {id: 'restore', name: 'Activate', accessType: 'can_create', requireSelected: true},\n      {id: 'show_archived', name: 'Show Archived', accessType: 'can_read', requireSelected: false},\n      {id: 'show_active', name: 'Show Active', accessType: 'can_read', requireSelected: false},\n      {id: 'new', name: 'New', accessType: 'can_create', requireSelected: false},\n    ],\n    interface: <TableInterface>undefined,\n    spinner: <MainSpinner>{diameter: 0, strokeWidth: 0},\n    config: <TableConfig>null,\n  };\n\n  protected srv = {\n    action: <PopEntityActionService>ServiceInjector.get(PopEntityActionService),\n    dialog: <MatDialog>ServiceInjector.get(MatDialog),\n    entity: <PopEntityService>ServiceInjector.get(PopEntityService),\n    events: <PopEntityEventService>ServiceInjector.get(PopEntityEventService),\n    filter: <PopCacFilterBarService>ServiceInjector.get(PopCacFilterBarService),\n    pipe: <PopPipeService>ServiceInjector.get(PopPipeService),\n    param: <PopEntityUtilParamService>ServiceInjector.get(PopEntityUtilParamService),\n    portal: <PopEntityUtilPortalService>ServiceInjector.get(PopEntityUtilPortalService),\n    router: <Router>ServiceInjector.get(Router),\n    tab: undefined\n  };\n\n  public ui = {\n    actionModal: <FieldItemGroupConfig>undefined,\n  };\n\n  protected asset = {\n    blueprintData: <Dictionary<string>>{},\n    fieldKeys: <Dictionary<1>>undefined,\n    blueprint: <Dictionary<any>>undefined,\n    transformations: <Dictionary<any>>undefined,\n    tableInterface: <TableInterface>undefined,\n    tabMenuSessionPath: '',\n    showArchivedSessionPath: '',\n    searchValueSessionPath: ''\n  };\n\n\n  constructor(\n    public el: ElementRef,\n    protected route: ActivatedRoute,\n    protected _domRepo: PopDomService,\n    @Inject('APP_GLOBAL') public APP_GLOBAL: AppGlobalInterface,\n  ) {\n    super();\n\n    this.dom.configure = (): Promise<boolean> => {\n      // this component set the outer height boundary of this view\n      return new Promise(async (resolve) => {\n        // Ensure that a CoreConfig exists for this component\n        await this.APP_GLOBAL.isVerified();\n        await this._setCoreConfig();\n\n        this.id = this.core.params.internal_name;\n        // #1: Enforce a CoreConfig\n        this.core = IsObjectThrowError(this.core, true, `${this.name}:configureDom: - this.core`) ? this.core : <CoreConfig>{};\n        await forkJoin([\n          this._transformRouteExtension(), // pull in settings passed in through the route\n          this._setConfig(), // validate the passed arguments\n          this._setSessionSettings(), // determine when and what settings should be sessionStorage\n          this._configureFilterBar(), // Enable/Disable the filter bar\n          this._setCrudHandler(), // Determine cache actions on crud operations\n          this._configureTable(), // Build out the table config for the view\n          this._setHeight(), // account for the filter bar , and determine the height of this table try to fill all vertical height\n        ]);\n\n        return resolve(true);\n      });\n    };\n\n    /**\n     * This function will call after the dom registration\n     */\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        this.dom.setTimeout(`height-adjustment-check`, () => {\n          this._setHeight().then(() => {\n            return resolve(true);\n          });\n        }, 250);\n      });\n    };\n  }\n\n\n  /**\n   * This component will display a list of entities that the user can interact with\n   */\n  ngOnInit() {\n    super.ngOnInit();\n  }\n\n\n  /**\n   * Trigger the table to reset itself\n   */\n  onResetTable() {\n    this.dom.setTimeout('reset', () => {\n      this.dom.state.loading = true;\n      const overhead = (+this.core.repo.model.table.filter.active ? this.srv.filter.getHeight() : 25);\n      this.dom.setHeightWithParent('sw-target-outlet', overhead, window.innerHeight - 65).then((res) => {\n        if (this.table.config && typeof this.table.config.setLayout === 'function') this.table.config.setLayout(this._getTableHeight());\n      });\n    }, 0);\n  }\n\n\n  /**\n   * Trigger the table to reset itself\n   */\n  onResetHeight() {\n    this._setHeight().then(() => {\n      if (this.table.config && typeof this.table.config.setHeight === 'function') this.table.config.setHeight(this._getTableHeight());\n    });\n  }\n\n\n  /**\n   * A table will generate a slew of event and action triggers\n   * @param event\n   */\n  onTableEvent(event: PopBaseEventInterface) {\n//     console.log( this.name, event );\n\n    if (event.type === 'table') {\n      let ids;\n      if (event && Array.isArray(event.data)) {\n        ids = event.data.map((row) => row.id).join();\n      }\n      switch (event.name) {\n        case 'search':\n          if (IsString(this.asset.searchValueSessionPath)) SetSessionSiteVar(this.asset.searchValueSessionPath, event.data);\n          // console.log('this.asset.searchValueSessionPath', this.asset.searchValueSessionPath);\n          break;\n        case 'row_clicked':\n          this.onTableRowClicked(event.data);\n          break;\n        case 'columnRouteClick':\n          this.onTableColumnClicked(event.data);\n          break;\n        case 'options_save':\n          this.onSaveOptions(event.data);\n          break;\n        case 'options_reset':\n          this.onOptionsReset();\n          break;\n        case 'new':\n          this.onActionButtonClicked('new');\n          break;\n        case 'show_archived':\n          this.onShowArchivedButtonClicked();\n          break;\n        case 'show_active':\n          this.onShowArchivedButtonClicked();\n          break;\n        case 'archive':\n          this.onArchiveButtonClicked(ids, true);\n          break;\n        case 'restore':\n          this.onArchiveButtonClicked(ids, false);\n          break;\n        case 'advanced_search':\n          this.onViewAdvancedSearch();\n          break;\n        case 'column_definitions':\n          if (IsObject(event.data, true)) {\n            this.dom.setTimeout('build-columns', async () => {\n              this._setFieldKeys(event.data);\n              const columns = await this._getDefaultColumns();\n              // this.table.config.columnDefinitions=columns;\n              this.table.config.updateColumnDefinitions(columns);\n            }, 0);\n          }\n          break;\n        case 'ready':\n          // if( this.table.config && this.table.config.matData && !this.table.config.matData.data.length ) this._configureTable();\n          break;\n        default:\n          break;\n      }\n      if (!['search', 'ready'].includes(event.name)) {\n        // console.log('kill trigger refresh');\n        this.dom.setTimeout(`lazy-load-fresh-data`, null);\n      }\n    }\n    if (event.type === 'context_menu') {\n      if (event.name === 'portal' && event.internal_name && event.id) {\n        this.onViewEntityPortal(event.internal_name, +event.id);\n      }\n    }\n  }\n\n\n  /**\n   * This is exploratory??? Idea is to pop a modal to make the user create an advanced search before we fetch the data for the table\n   */\n  onViewAdvancedSearch() {\n    if (!this.dom.state.blockModal && this.srv.dialog.openDialogs.length == 0) {\n      this.dom.state.blockModal = true;\n      if (true) {\n        const dialogRef = this.srv.dialog.open(PopEntityAdvancedSearchComponent, {\n          width: `${window.innerWidth * .50}px`,\n          height: `${window.innerHeight * .75}px`,\n          panelClass: 'sw-relative',\n          data: {test: 'yo yo'}\n        });\n\n\n        this.dom.subscriber.dialog = dialogRef.beforeClosed().subscribe((changed) => {\n          if (changed || this.dom.state.refresh) {\n            // this._configureTable();up\n          }\n          this.dom.state.blockModal = false;\n        });\n      }\n    }\n  }\n\n\n  /**\n   * A user can click on a row in a table to navigate the a view for that entity\n   * @param row\n   */\n  onTableRowClicked(row) {\n    if (!this.dom.state.blockModal && this.srv.dialog.openDialogs.length == 0) {\n      // custom function\n      this.onViewEntityPortal(this.core.params.internal_name, +row['id']);\n    }\n  }\n\n\n  /**\n   * A user can click on a specific column of a table and get a default action\n   * @param data\n   */\n  onTableColumnClicked(data) {\n    // placeholder\n    if (!this.dom.state.blockModal && this.srv.dialog.openDialogs.length == 0) {\n      this.dom.state.blockModal = true;\n      if (data && data.name && data.row[data.name] && +data.row[data.name + '_id']) {\n        this.onViewEntityPortal(data.row[data.name], +data.row[data.name + '_id']);\n      }\n    }\n  }\n\n\n  /**\n   * A user can click a link to view a specific entity details in a modal\n   * @param internal_name\n   * @param id\n   */\n  onViewEntityPortal(internal_name: string, id: number) {\n    if (!this.dom.state.blockModal && this.srv.dialog.openDialogs.length == 0) {\n      this.dom.state.blockModal = true;\n      if (internal_name && id) {\n        this.srv.portal.view(internal_name, id).then((changed: boolean) => {\n          this.core.repo.clearCache('entity', String(id), 'PopEntityListComponent:onViewEntityPortal');\n          if (changed || this.dom.state.refresh) {\n            this.core.repo.clearAllCache('PopEntityListComponent:onViewEntityPortal');\n            this._configureTable().then(() => true);\n          }\n          this.dom.state.blockModal = false;\n        });\n      }\n    }\n  }\n\n\n  /**\n   * A user can save custom settings for how they want to view this table\n   * @param options\n   */\n  onSaveOptions(options) {\n    // We only want to save the current column defs and options.\n    const preferences = {\n      settings: {\n        columns: options.currentOptions.columnDefinitions,\n        options: options.currentOptions\n      },\n\n    };\n    const existingID = StorageGetter(this.core.preference, ['table', 'id'], 0);\n    this.dom.setSubscriber('save-preferences', this.core.repo.savePreference(+existingID, 'table', preferences).subscribe((preference) => {\n        // console.log('saved-preferences', preference);\n        this.srv.entity.updateBaseCoreConfig(this.core.params.internal_name, 'preference:table', preference);\n        console.log('this.core', this.core);\n        if (StorageGetter(this.core, ['preference'])) {\n          this.core.preference.table = preference;\n        }\n        // console.log('this.core.preference.table', this.core.preference.table);\n      }\n    ));\n  }\n\n\n  /**\n   * A user can reset their preferences for this table to default\n   */\n  onOptionsReset() {\n    this.dom.setTimeout(`lazy-load-fresh-data`, null);\n    if (IsObject(this.core.preference, ['table']) && this.core.preference.table.id) {\n      this.core.repo.deletePreference(this.core.preference.table.id, 'table').then((defaultPreference) => {\n        if (defaultPreference) {\n          this.core.preference.table = defaultPreference;\n        } else {\n          this.core.preference.table = {};\n        }\n        this.srv.entity.updateBaseCoreConfig(this.core.params.internal_name, 'preference:table', this.core.preference.table);\n      });\n    }\n  }\n\n\n  /**\n   * A user can archive a list of entities\n   * @param ids\n   * @param archive\n   */\n  onArchiveButtonClicked(ids, archive: boolean) {\n    this.table.config.loading = true;\n    this.dom.setSubscriber('archive-entities', this.core.repo.archiveEntities(ids, archive).subscribe(() => {\n      this.table.config.loading = false;\n      this.core.repo.clearCache('table', 'data');\n      this._triggerDataFetch(1);\n      this.srv.events.sendEvent({\n        source: this.name,\n        method: 'archive',\n        type: 'entity',\n        name: this.core.params.name,\n        internal_name: this.core.params.internal_name,\n        id: ids,\n        data: archive\n      });\n    }, err => {\n      this.table.config.loading = false;\n      this.dom.error.code = err.error.code;\n      this.dom.error.message = err.error.message;\n      this.dom.setTimeout(`reset-selected-items`, () => {\n        if (typeof this.table.config.clearSelected === 'function') this.table.config.clearSelected();\n      }, 0);\n    }));\n  }\n\n\n  /**\n   * The user can click on a btn to show active, archived, or both?\n   */\n  onShowArchivedButtonClicked() {\n    this.dom.state.showArchived = !this.dom.state.showArchived;\n    this.core.repo.clearCache('table');\n    this._configureTable().then(() => true);\n    this.dom.setTimeout(`reset-selected-items`, () => {\n      if (typeof this.table.config.clearSelected === 'function') this.table.config.clearSelected();\n      this.table.config.buttons = this._buildTableButtons();\n      if (IsString(this.asset.showArchivedSessionPath)) SetSessionSiteVar(this.asset.showArchivedSessionPath, this.dom.state.showArchived);\n    }, 0);\n  }\n\n\n  /**\n   * This will open a modal to create a new entity when the user clicks on the new button\n   */\n  onActionButtonClicked(actionName: string) {\n    // if( IsString( actionName, true ) ){\n    //   this.srv.action.doAction( this.core, actionName, this.extension ).then( ( config: FieldItemGroupConfig ) => {\n    //     console.log( 'action config', config );\n    //     if( config ){\n    //       this.ui.actionModal = config;\n    //     }else{\n    //       this.ui.actionModal = null;\n    //     }\n    //\n    //     this.log.config( `onNewButtonClicked`, this.ui.actionModal );\n    //   } );\n    // }\n    if (IsString(actionName, true)) {\n      this.dom.setTimeout(`do-action`, async () => {\n        await this.srv.action.do(this.core, actionName, this.extension);\n      }, 0);\n    }\n\n  }\n\n\n  /**\n   * When the modal for creating a new entity is closed, the config needs to be cleared\n   */\n  onActionModalClose() {\n    this.ui.actionModal = null;\n  }\n\n\n  /**\n   * Clean up the dom of this component\n   */\n  ngOnDestroy() {\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Protected Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n  /**\n   * Allow for a CoreConfig to be passed in\n   * If a CoreConfig does not exits this component needs to be able to create it for itself, uses the internal_name that comes directly for the route\n   * or tries to extrapolate it from the current url of the app\n   *\n   */\n  protected _setCoreConfig(): Promise<boolean> {\n    return new Promise(async (resolve) => {\n      // #1: Grab Route Extension settings\n      this._setRouteExtension();\n      if (!this.internal_name) this.internal_name = this.srv.entity.getRouteInternalName(this.route, this.extension);\n\n      if (!IsObject(this.core, true)) {\n        this.srv.entity.getCoreConfig(this.internal_name, 0, this.dom.repo).then((core: CoreConfig) => {\n          this.core = core;\n          return resolve(true);\n        });\n      } else {\n        return resolve(true);\n      }\n    });\n  }\n\n\n  /**\n   * Setup basic config\n   * Intended to be overridden\n   * @private\n   */\n  protected _setConfig(): Promise<boolean> {\n    return new Promise(async (resolve) => {\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * Attach a handler to handle an crud events\n   * @private\n   */\n  protected _setCrudHandler(): Promise<boolean> {\n    return new Promise(async (resolve) => {\n      this.dom.setSubscriber('entity', this.srv.events.events.subscribe((event) => this._crudEventHandler(event)));\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * Determine the height of the table\n   * @private\n   */\n  protected _setHeight(): Promise<boolean> {\n    return new Promise(async (resolve) => {\n      // Determine height of the table - have to account if filter bar is enabled\n      const menu = 48;\n      const filterHeight = this.dom.state.filter ? this.srv.filter.getHeight() : 25;\n      const overhead = 25;\n      const defaultHeight = window.innerHeight - menu - filterHeight;\n      this.dom.setHeight(defaultHeight, overhead);\n\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * Manage the sessionStorage settings\n   * @private\n   */\n  protected _setSessionSettings(): Promise<boolean> {\n    return new Promise(async (resolve) => {\n      // Set session path for variables\n      this.asset.tabMenuSessionPath = `Entity.${TitleCase(this.core.params.internal_name)}.Menu`;\n      this.asset.showArchivedSessionPath = `Business.${PopBusiness.id}.Entity.${TitleCase(this.core.params.internal_name)}.Table.Main.showArchived`;\n      this.asset.searchValueSessionPath = `Business.${PopBusiness.id}.Entity.${TitleCase(this.core.params.internal_name)}.Table.Main.searchValue`;\n\n      // Set any session variables\n      SetSessionSiteVar(this.asset.tabMenuSessionPath, null); // remove any menu session data for this entity\n      this.dom.state.showArchived = GetSessionSiteVar(this.asset.showArchivedSessionPath, false);\n\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * Determine how to fetch the data for this table\n   * @param update\n   * @private\n   */\n  protected _fetchData(update = false): Promise<any> {\n    return new Promise(async (resolve, reject) => {\n      const params = {};\n      if (!update) this.dom.setTimeout(`lazy-load-fresh-data`, null);\n      if (IsObject(this.table, ['config']) && IsObject(this.table.config, ['clearSelected']) && typeof this.table.config.clearSelected === 'function') this.table.config.clearSelected();\n      if (this.dataFactory) {\n        this.dataFactory(null, this.dom.state.showArchived ? 1 : 0).then((data) => {\n          // console.log('data', data);\n          data = this._transformData(data);\n          if (update && this.table.config && typeof this.table.config.updateData === 'function') {\n            this.table.config.updateData(data);\n          }\n          PopTemplate.clear();\n          return resolve(data);\n        }, () => {\n          reject([]);\n        });\n      } else {\n        this.core.repo.getEntities({archived: (this.dom.state.showArchived ? 1 : 0), ...params}).then((data: Entity[]) => {\n          data = this._transformData(data);\n          this.core.repo.setCache('table', 'data', data, 5);\n          if (update && typeof this.table.config.updateData === 'function') {\n            this.table.config.updateData(data);\n          }\n          PopTemplate.clear();\n          return resolve(data);\n        }, err => {\n          reject(err);\n        });\n      }\n    });\n  }\n\n\n  protected _transformData(data: any[]) {\n    if (!(IsObject(this.asset.fieldKeys, true))) this._setFieldKeys(data[0]);\n    if (!(IsObject(this.asset.transformations, true))) this._setFieldTableTransformations();\n    data = this._prepareTableData(data);\n    this.core.repo.setCache('table', 'data', data, 5);\n\n    return data;\n  }\n\n\n  /**\n   * Cleans the row data to remove any unwanted fields\n   * @param row\n   * @private\n   */\n  protected _setFieldKeys(row: Dictionary<any>): void {\n    this.asset.fieldKeys = {};\n    const Decorator = StorageGetter(this.core, ['repo', 'model', 'decorator'], null);\n    if (IsCallableFunction(Decorator)) {\n      row = Decorator(this.core, row);\n    }\n    if (IsObject(row, true)) {\n      const allowedTypes = ['string', 'number', 'boolean'];\n      const blacklist = StorageGetter(this.core.repo, ['model', 'table', 'blacklist'], {});\n      const whitelist = StorageGetter(this.core.repo, ['model', 'table', 'whitelist'], {});\n      const appendlist = StorageGetter(this.core.repo, ['model', 'table', 'appendlist'], {});\n      Object.keys(row).map((key) => {\n        if (!(key in blacklist)) {\n          if (key in whitelist || allowedTypes.includes(typeof row[key])) {\n            this.asset.fieldKeys[key] = 1;\n          } else if (IsObject(row[key], ['id', 'name'])) {\n            this.asset.fieldKeys[key] = 1;\n          }\n        }\n      });\n      if (IsObject(appendlist, true)) {\n        Object.keys(appendlist).map((key) => {\n          this.asset.fieldKeys[key] = 1;\n        });\n      }\n    }\n  }\n\n\n  /**\n   * Apply the transformations to the dataset\n   * @private\n   */\n  protected _setFieldTableTransformations(): void {\n    this.asset.transformations = {};\n    const fields = this.core.repo.model.field;\n    Object.keys(this.asset.fieldKeys).map((key) => {\n      const field = fields[key];\n      if (IsObject(field, ['table', 'model'])) {\n        if (field.model.name && field.table.transformation) {\n          this.asset.transformations[field.model.name] = CleanObject({\n            type: field.table.transformation.type,\n            arg1: field.table.transformation.arg1 ? field.table.transformation.arg1 : null,\n            arg2: field.table.transformation.arg2 ? field.table.transformation.arg2 : null,\n            arg3: field.table.transformation.arg3 ? field.table.transformation.arg3 : null,\n          });\n        }\n      }\n\n    });\n  }\n\n\n  /**\n   * A method that preps entity list data for tables\n   * @param dataSet\n   * @param fieldMap\n   */\n  protected _prepareTableData(dataSet: Array<any>) {\n    this.log.info(`_prepareTableData: this.asset.fieldKeys`, this.asset.fieldKeys);\n    const Decorator = StorageGetter(this.core, ['repo', 'model', 'decorator'], null);\n    const Filter = <DataFilter>StorageGetter(this.core, ['repo', 'model', 'filter'], null);\n    const appendlist = StorageGetter(this.core.repo, ['model', 'table', 'appendlist'], {});\n    if (IsArray(dataSet, true)) {\n      if (Filter) dataSet = dataSet.filter(Filter);\n      dataSet.sort(DynamicSort('id', 'desc'));\n      return dataSet.map(row => {\n        row = Object.keys(row).reduce((obj, k) => {\n          if (k in this.asset.fieldKeys) obj[k] = row[k];\n          return obj;\n        }, {});\n        if (IsObject(appendlist, true)) {\n          Object.keys(appendlist).map((name: string) => {\n            const value = appendlist[name];\n            row[name] = ParseModelValue(value, row);\n          });\n        }\n        if (Decorator) row = Decorator(this.core, row);\n        return this.srv.pipe.transformObjectValues(row, this.asset.transformations, this.core);\n      });\n    } else {\n      return dataSet;\n    }\n  }\n\n\n  /**\n   * Retrieves the data set that this view will represent\n   * @param hardReset\n   *\n   */\n  protected _getTableData(hardReset = false) {\n    return new Promise((resolve, reject) => {\n      if (this.dom.delay.data) clearTimeout(this.dom.delay.data);\n      this.core.repo.getCache('table', 'data').then((cache) => {\n        if (IsArray(cache, true)) {\n          this._triggerDataFetch();\n          return resolve({data: cache});\n        } else {\n          this._fetchData(false).then((data) => {\n            return resolve({data: data});\n          });\n        }\n      });\n    });\n  }\n\n\n  /**\n   * Trigger the table to re-fetch the data\n   * @param seconds\n   * @private\n   */\n  protected _triggerDataFetch(seconds: number = 5) {\n    this.dom.setTimeout(`lazy-load-fresh-data`, () => {\n      // PopTemplate.buffer(`Loading Fresh Data`);\n      this._fetchData(true).catch(() => true);\n    }, (seconds * 1000)); // allows for cached data to be presented for x amount of seconds before refreshed data is triggered\n  }\n\n\n  /**\n   * The table need to know when new entities are created or update so that they can be updated in its view\n   * @param event\n   *\n   */\n  protected _crudEventHandler(event: PopBaseEventInterface) {\n    this.core.repo.clearCache('table', null, `PopEntityListComponent:crudEventHandler`);\n    this.core.repo.clearCache('entity', null, `PopEntityListComponent:crudEventHandler`);\n    if (event.method === 'create' || event.method === 'delete') {\n      this.dom.state.refresh = true;\n      this.core.params.refresh = true;\n    } else if (event.method === 'update') {\n      if (event.type === 'entity') {\n        if (event.name === 'archive') {\n          this._configureTable(true).then(() => true);\n        }\n      } else if (event.type === 'field' && event.name === 'patch') {\n        this.dom.state.refresh = true;\n        this.core.params.refresh = true;\n      }\n    } else if (event.method === 'read') {\n      if (event.type === 'dialog') {\n        if (event.name === 'close') {\n          this.core.repo.clearCache('table', 'data', `PopEntityListComponent:crudEventHandler`);\n          this._configureTable().then(() => true);\n        }\n      }\n    }\n  }\n\n\n  /**\n   * THe filter bar needs to be configured for this specific entity\n   *\n   */\n  protected _configureFilterBar(): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      // return this.srv.filter.setActive(false);\n      if (+this.core.repo.model.table.filter.active) {\n        this.dom.state.filter = true;\n\n        // this.srv.filter.setArchived(this.dom.state.showArchived);\n        this.srv.filter.setView(this.core.repo.model.table.filter.view);\n        this.srv.filter.setActive(true);\n\n        this.dom.setSubscriber('filters', this.srv.filter.event.bubble.subscribe((event: PopBaseEventInterface) => {\n          this._filterEventHandler(event);\n        }));\n        return resolve(true);\n      } else {\n        this.srv.filter.setActive(false);\n        this.dom.state.filter = false;\n        return resolve(true);\n      }\n    });\n\n  }\n\n\n  /**\n   * Generates a table config that will be used by the nested view component\n   * @param reset\n   *\n   */\n  protected _configureTable(reset = false): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      if (!this.table.config) {\n        const tableData = <any>await this._getTableData(reset);\n        if (IsArray(tableData.data, true)) {\n          this.asset.blueprintData = tableData.data[0];\n          this.asset.blueprint = tableData.data[0];\n        }\n        await this._getTableInterface();\n        this.table.config = new TableConfig({...this.asset.tableInterface, ...tableData});\n      } else {\n        this.table.config.loading = true;\n        this._getTableData().then(async (result: { data: Entity[] }) => {\n          if (IsArray(result.data, true)) {\n            this.asset.blueprintData = result.data[0];\n            this.asset.blueprint = result.data[0];\n          }\n          this.table.config.buttons = this._buildTableButtons();\n          await Sleep(10);\n          if (reset && typeof this.table.config.reset === 'function') {\n            this.table.config.reset(result.data);\n          } else {\n            if (typeof this.table.config.updateData === 'function') this.table.config.updateData(result.data);\n          }\n          this.table.config.loading = false;\n          this.dom.state.refresh = false;\n          this.core.params.refresh = false;\n\n        });\n      }\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * Allows route to have a resolvable syntax\n   *\n   */\n  protected _transformRouteExtension(): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      if (!IsObject(this.extension)) this.extension = {};\n      if (IsString(this.extension.goToUrl, true)) {\n        this.extension.goToUrl = ParseLinkUrl(this.extension.goToUrl, this.core.params, [':id']);\n      }\n      if (IsObject(this.extension.table, true)) {\n        if (this.extension.table.route) {\n          this.extension.table.route = ParseLinkUrl(this.extension.table.route, this.core.params, [':id']);\n        }\n      }\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * Generates a table config interface to produce a config\n   * @param row\n   *\n   */\n  protected _getTableInterface(): Promise<boolean> {\n    return new Promise(async (resolve, reject) => {\n      // this.loading = true;\n      // Clear any session for previous viewing history\n      if (IsObject(this.asset.tableInterface, true)) {\n        return resolve(true);\n      } else {\n        await this._getDefaultFieldKeys();\n        const defaultColumns = <Dictionary<any>>await this._getDefaultColumns();\n        let userColumns;\n        if (IsObject(this.core.preference, ['table']) && IsObject(this.core.preference.table.columns, true)) {\n          userColumns = this.core.preference.table.columns;\n        }\n\n        if (!userColumns) userColumns = defaultColumns;\n\n        // console.log('defaultColumns', defaultColumns);\n        // console.log('userColumns', userColumns);\n\n        // console.log('get', this.asset.searchValueSessionPath);\n\n        let baseApp = (this.core.params.app ? this.core.params.app : PopHref);\n        baseApp = baseApp ? `/${baseApp}/` : '/';\n\n        let tableInterface: TableInterface = {\n          id: this.core.params.internal_name,\n          internal_name: this.core.params.internal_name,\n          paginator: true,\n          height: this._getTableHeight(),\n          buttons: this._buildTableButtons(),\n          route: `${baseApp}${GetRouteAlias(this.core.params.internal_name)}/:id/general`,\n          data: [],\n          searchValue: GetSessionSiteVar(this.asset.searchValueSessionPath, ''),\n          options: new TableOptionsConfig({...{defaultOptions: {columnDefinitions: defaultColumns}}, ...this.core.repo.model.table.permission}),\n          columnDefinitions: userColumns\n        };\n\n        if (this.extension.goToUrl) this.extension.goToUrl = ParseModelValue(this.extension.goToUrl, this.core, true);\n        if (this.extension.table && this.extension.table.route) this.extension.table.route = ParseModelValue(this.extension.table.route, this.core, true);\n        if (this.extension.table && Object.keys(this.extension.table).length) tableInterface = {...tableInterface, ...this.extension.table};\n        if (IsObject(this.core.preference, ['table'])) {\n          // console.log('this.core.preference.table.options', this.core.preference.table.options);\n          if (this.core.preference.table.options) {\n            tableInterface = {...tableInterface, ...this.core.preference.table.options};\n          }\n        }\n        this.asset.tableInterface = tableInterface;\n        return resolve(true);\n      }\n    });\n  }\n\n\n  /**\n   * A table will have a set of actions that it will need a button set to achieve\n   *\n   */\n  protected _buildTableButtons() {\n    let buttons = [];\n    if (IsObject(this.core.repo.model.table.button, true)) {\n      buttons = this.table.buttons.filter((button) => {\n        // if( button.id === 'custom' && !this.core.repo.model.table.button.custom ) return false; // allow custom actions to be performed on a set of entities\n        // if( button.id === 'advanced_search' && !this.core.repo.model.table.button.advanced_search ) return false; // allow for a advanced search on the entity data set\n        if (button.id === 'archive' && (!this.core.repo.model.table.button.archived || this.dom.state.showArchived)) return false;\n        if (button.id === 'restore' && (!this.core.repo.model.table.button.archived || !this.dom.state.showArchived)) return false;\n        if (button.id === 'show_active' && (!this.core.repo.model.table.button.archived || !this.dom.state.showArchived)) return false;\n        if (button.id === 'show_archived' && (!this.core.repo.model.table.button.archived || this.dom.state.showArchived)) return false;\n        if (button.id === 'new' && !this.core.repo.model.table.button.new) return false;\n        if (!button.accessType) return true;\n        if (!this.srv.entity.checkAccess(this.core.params.internal_name, button.accessType)) return false;\n        return true;\n      });\n    }\n\n    return buttons;\n  }\n\n\n  /**\n   * The filter bar and the table view need to be in sync\n   * @param event\n   *\n   */\n  protected _filterEventHandler(event: PopBaseEventInterface) {\n    this.log.event(`_filterEventHandler`, event);\n    if (event.type === 'filter') {\n      switch (event.name) {\n        case 'clear':\n        case 'apply':\n          this.srv.entity.bustAllCache();\n          this.dom.setTimeout('reconfigure-table', () => {\n            this._configureTable().then(() => true);\n          }, 0);\n          break;\n        case 'init':\n        case 'state':\n          if (event.model === 'open') {\n            this.onResetHeight();\n          }\n          break;\n        default:\n          break;\n      }\n    }\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  /**\n   * Allows the route to set/override specific settings\n   *\n   */\n  private _setRouteExtension() {\n    if (!this.extension) this.extension = {};\n    if (!this.extension.table) this.extension.table = {};\n    if (!this.extension.goToUrl) this.extension.goToUrl = null;\n    if (this.route.snapshot.data && Object.keys(this.route.snapshot.data).length) {\n      Object.keys(this.route.snapshot.data).map((key) => {\n        this.extension[key] = this.route.snapshot.data[key];\n      });\n    }\n  }\n\n\n  private _getDefaultFieldKeys(): Promise<boolean> {\n    return new Promise<boolean>((resolve) => {\n      if (IsObject(this.asset.fieldKeys, true)) {\n        return resolve(true);\n      } else {\n        this.core.repo.getCache('table', 'fieldKeys').then((fieldKeys) => {\n          if (IsObject(fieldKeys, true)) {\n            this.asset.fieldKeys = <any>fieldKeys;\n          } else {\n            this._setFieldKeys(this.asset.blueprint);\n\n          }\n          return resolve(true);\n        }, () => {\n          this._setFieldKeys(this.asset.blueprint);\n          return resolve(true);\n        });\n      }\n    });\n  }\n\n\n  private _getDefaultColumns(): Promise<Dictionary<any>> {\n    return new Promise<Dictionary<any>>((resolve) => {\n      let defaultColumns = {};\n      this.core.repo.getCache('table', 'columns').then((columns) => {\n        if (IsObject(columns, true)) {\n          return resolve(columns);\n        } else {\n          defaultColumns = {};\n          const fields = IsObjectThrowError(this.core.repo.model.field, true, `Repo contained no field model`) ? this.core.repo.model.field : null;\n          if (IsObject(this.asset.fieldKeys, true)) {\n            Object.keys(this.asset.fieldKeys).map((fieldName) => {\n              if (fieldName in fields) {\n                const field = fields[fieldName];\n                if (IsObject(field.model, ['route'])) {\n                  field.model.route = ParseModelValue(field.model.route, this.core);\n                }\n                if (field.table.visible) defaultColumns[fieldName] = {\n                  ...{\n                    name: field.model.name,\n                    label: field.model.label,\n                  },\n                  ...field.table\n\n                };\n              }\n            });\n          } else {\n            // console.log('cache redirect');\n            // console.log(this.asset.blueprintData);\n\n            // SetPopCacheRedirectUrl(this.srv.router.url);\n            // this.srv.router.navigateByUrl('system/cache/clear',{skipLocationChange:true});\n\n          }\n          if (IsObject(defaultColumns, true)) {\n            this.core.repo.setCache('table', 'columns', defaultColumns, 60);\n          }\n\n          return resolve(defaultColumns);\n        }\n      });\n    });\n  }\n\n\n  /**\n   * Helper function that sets the height of the child view\n   *\n   */\n  private _getTableHeight() {\n    let height = this.dom.height.inner;\n    if (this.srv.filter.isActive()) {\n      height -= 20;\n    }\n    return height;\n  }\n}\n\n","import { Component, ElementRef, OnDestroy, OnInit } from '@angular/core';\nimport { PopExtendComponent } from '../../../pop-extend.component';\nimport { PopRequestService } from '../../../services/pop-request.service';\nimport { Entity, PopBaseEventInterface, ServiceInjector } from '../../../pop-common.model';\nimport { CheckboxConfig } from '../../base/pop-field-item/pop-checkbox/checkbox-config.model';\nimport { GetServiceContainer } from '../../../pop-common-dom.models';\nimport { ArrayMapSetter, DeepCopy, IsArray, IsArrayThrowError } from '../../../pop-common-utility';\n\n\n@Component({\n  selector: 'lib-pop-entity-access',\n  templateUrl: './pop-entity-access.component.html',\n  styleUrls: [ './pop-entity-access.component.scss' ]\n})\nexport class PopEntityAccessComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  protected srv = GetServiceContainer();\n  public name = 'PopEntityAccessComponent';\n\n\n  protected extendServiceContainer(){\n    this.srv.request = ServiceInjector.get(PopRequestService);\n  }\n\n\n  constructor(\n    public el: ElementRef,\n  ){\n    super();\n\n    this.extendServiceContainer();\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n\n      return new Promise((resolve) => {\n\n\n        this.dom.state.expansion = 'compact';\n        this.core.repo.getEntity(this.core.params.entityId, { select: 'permissions' }).subscribe((res: any) => {\n          const entity = res.data ? <Entity>res.data : <Entity>res.data;\n          let appDisabled;\n          let appHasEntitiesAccess, appEntitiesWithAccess;\n          this.ui.access = IsArrayThrowError(entity.permissions, true, `${this.name}:configure: - entity.permissions`) ? DeepCopy(entity.permissions) : [];\n\n          this.ui.access.forEach((app) => {\n            app.expanded = false;\n            appDisabled = this.core.entity.system || !this.core.access.can_update || app.entities.length === 0 ? true : false\n            app.can_read = { all: app.entities.length ? true : false, disabled: appDisabled, indeterminate: app.entities.length ? true : false };\n            app.can_create = { all: app.entities.length ? true : false, disabled: appDisabled, indeterminate: app.entities.length ? true : false };\n            app.can_update = { all: app.entities.length ? true : false, disabled: appDisabled, indeterminate: app.entities.length ? true : false };\n            app.can_delete = { all: app.entities.length ? true : false, disabled: appDisabled, indeterminate: app.entities.length ? true : false };\n            appHasEntitiesAccess = { can_read: 0, can_create: 0, can_update: 0, can_delete: 0 };\n            appEntitiesWithAccess = { can_read: 0, can_create: 0, can_update: 0, can_delete: 0 };\n            app.entities.forEach((entityToken) => {\n              entityToken.field = {};\n              Object.keys(entityToken.access).forEach((entityAccess) => {\n                entityToken.field[ entityAccess ] = new CheckboxConfig({\n                  align: 'left',\n                  // patch: { path: `admin/security-profiles/${this.tab.securityProfile.id}/entities/add`, field: access, metadata: { access: 1, entity_fk: entity.id } },\n                  bubble: true,\n                  value: +entityToken.access[ entityAccess ],\n                  disabled: this.core.entity.system || !entityToken[ entityAccess ] ? true : false,\n                  metadata: {\n                    app: app,\n                    entity: entityToken,\n                    access: entityAccess,\n                  },\n                });\n                if( entityToken[ entityAccess ] ) appHasEntitiesAccess[ entityAccess ]++;\n                if( entityToken.access[ entityAccess ] ) appEntitiesWithAccess[ entityAccess ]++;\n                if( +entityToken.access[ entityAccess ] === 0 ){\n                  if( entityAccess in app ){\n                    app[ entityAccess ].all = false;\n                  }\n                }\n              });\n            });\n            // if none of the entities are able to use an access just disable the all checkbox\n            Object.keys(appHasEntitiesAccess).forEach((entityAccess) => {\n              if( !appHasEntitiesAccess[ entityAccess ] && entityAccess in app ) app[ entityAccess ].disabled = true;\n              if( app[ entityAccess ].all ) app[ entityAccess ].indeterminate = false;\n              if( appEntitiesWithAccess[ entityAccess ] && !app[ entityAccess ].all ) app[ entityAccess ].indeterminate = true;\n              if( !appEntitiesWithAccess[ entityAccess ] && !app[ entityAccess ].all ) app[ entityAccess ].indeterminate = false;\n            });\n          });\n\n          this.setExpansionState(this.dom.state.expansion);\n\n          resolve(true);\n\n        }, err => {\n          this.dom.error = {\n            code: err.error ? err.error.code : err.status,\n            message: err.error ? err.error.message : err.statusText\n          };\n          resolve(false);\n        });\n      });\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  checkAll(app, access): void{\n    if( app && access in app ){\n      let all = true, indeterminate = false;\n      const entity_fks = [];\n      const value = +app[ access ].all;\n      if( app.entities.length ){\n        all = +value === 1;\n        app.entities.forEach((entity) => {\n          if( !this.core.entity.system && this.core.access.can_update && entity[ access ] ){\n            if( +entity.field[ access ].control.value !== value ){\n              // entity.field[ access ].patch.running = true;\n              entity.access[ access ] = value;\n              entity.field[ access ].control.setValue(value);\n              entity.field[ access ].message = '';\n              entity.field[ access ].startPatch();\n              entity_fks.push(entity.id);\n            }\n          }else{\n            if( +entity.field[ access ].control.value !== value ){\n              indeterminate = true;\n              all = !value;\n            }\n          }\n        });\n        if( entity_fks.length ){\n          const patch = { access: 1, entity_fk: entity_fks.join() };\n          patch[ access ] = value;\n          const method = patch[ access ] === 1 ? 'add' : 'remove';\n          this.srv.request.doPatch(`${this.core.params.path}/${this.core.params.entityId}/entities/${method}`, patch, 1).subscribe(res => {\n            app.entities.forEach((entity) => {\n              entity.field[ access ]._patchSuccess();\n            });\n            setTimeout(() => {\n              app[ access ].all = all;\n              app[ access ].indeterminate = indeterminate;\n            });\n            const sendEvent = {\n              source: this.name,\n              type: 'permissions',\n              model: 'entity',\n              name: 'patch',\n              method: 'update',\n              success: true,\n              config: this.core,\n              data: app,\n              ids: entity_fks,\n              access: access,\n              value: patch[ access ]\n            };\n            this.sessionChanges(sendEvent);\n            if( this.log.repo.enabled('event', this.name) ) console.log(this.log.repo.message(`${this.name}:event`), this.log.repo.color('event'), sendEvent);\n          }, err => {\n            app.entities.forEach((entity) => {\n              entity.patchFail(( err.error && err.error.message ) ? err.error.message : err.message);\n            });\n            setTimeout(() => {\n              app[ access ].all = all;\n              app[ access ].indeterminate = indeterminate;\n            });\n            this.dom.error = {\n              code: ( err.error ? err.error.code : err.status ),\n              message: ( err.error ? err.error.message : err.statusText )\n            };\n          });\n        }else{\n          setTimeout(() => {\n            // app[ access ].all = all;\n            app[ access ].indeterminate = true;\n          });\n        }\n      }else{\n        setTimeout(() => {\n          app[ access ].all = false;\n          app[ access ].indeterminate = false;\n        });\n      }\n    }\n  }\n\n\n  setExpansionState(state?: string){\n    if( state ){\n      this.dom.state.expansion = state;\n    }\n    switch( this.dom.state.expansion ){\n      case 'none':\n        this.ui.access.forEach(function(app){\n          app.expanded = false;\n        });\n        break;\n      case 'compact':\n        this.ui.access.forEach(function(app){\n          app.expanded = app.can_read.indeterminate || app.can_update.indeterminate || app.can_create.indeterminate || app.can_delete.indeterminate ? true : false;\n        });\n        break;\n      case 'full':\n        this.ui.access.forEach(function(app){\n          app.expanded = true;\n        });\n        break;\n      default:\n        break;\n\n    }\n  }\n\n\n  handleInputEvents(event){\n    if( event.type === 'field' ){\n      if( this.log.repo.enabled() ) console.log(this.log.repo.message('PopEntityAccessComponent:event'), this.log.repo.color('event'), event);\n      switch( event.name ){\n        case 'onChange':\n          const patch = { access: 1, entity_fk: event.config.metadata.entity.id };\n          patch[ event.config.metadata.access ] = +event.config.control.value;\n          const method = +event.config.control.value === 1 ? 'add' : 'remove';\n          event.config.startPatch();\n          this.srv.request.doPatch(`${this.core.params.path}/${this.core.params.entityId}/entities/${method}`, patch, 1).subscribe(() => {\n            event.config._patchSuccess();\n            this.checkAppAll(event.config.metadata.app, event.config.metadata.access, +event.config.control.value);\n            const sendEvent = {\n              source: this.name,\n              method: 'update',\n              model: 'entity',\n              type: 'permissions',\n              name: 'patch',\n              success: true,\n              config: this.core,\n              data: event.config.metadata.app,\n              ids: [ event.config.metadata.entity.id ],\n              access: event.config.metadata.access,\n              value: patch[ event.config.metadata.access ]\n            };\n            setTimeout(() => {\n              this.sessionChanges(sendEvent);\n            }, 0);\n          }, err => {\n            event.config.patchFail(( err.error && err.error.message ) ? err.error.message : err.message);\n          });\n          break;\n        case patch:\n          if( event.success ){\n            this.checkAppAll(event.config.metadata.app, event.config.metadata.access, event.config.control.value);\n          }\n          break;\n        default:\n          break;\n      }\n    }\n  }\n\n\n  checkAppAll(app, access, val){\n    val = +val;\n    let indeterminate = false;\n    let all = true;\n    if( !val ){\n      all = false;\n      app.entities.some(entity => {\n        if( entity.field[ access ].control.value ){\n          indeterminate = true;\n          return true;\n        }\n      });\n    }else{\n      app.entities.some(entity => {\n        if( !entity.field[ access ].control.value ){\n          all = false;\n          indeterminate = true;\n          return true;\n        }\n      });\n    }\n    setTimeout(() => {\n      app[ access ].all = all;\n      app[ access ].indeterminate = indeterminate;\n    });\n  }\n\n\n  sessionChanges(event: PopBaseEventInterface){\n    let appId;\n    let storedPermissions;\n    let storedApp;\n    let storedEntity;\n    if( event.type === 'permissions' && event.name === 'patch' && event.success && event.config && +event.config.params.id === +this.core.entity.id ){\n      if( this.log.repo.enabled('event', this.name) ) console.log(`${this.name} made an access permissions patch session`, this.log.repo.color('event'), event);\n      if( this.core.entity.metadata && this.core.entity.metadata.permissions ){\n        storedPermissions = this.core.entity.metadata.permissions;\n        appId = event.data.id;\n        const appMap = ArrayMapSetter(storedPermissions, 'id');\n        if( appId in appMap ){\n          if( IsArray(storedPermissions[ appMap[ appId ] ].entities, true) ){\n            storedApp = storedPermissions[ appMap[ appId ] ];\n            const entityMap = ArrayMapSetter(storedApp.entities, 'id');\n            if( IsArray(event.ids, true) ){\n              event.ids.map((entityID: number) => { // the ids that need to be updated in session\n                if( entityID in entityMap ){\n                  storedEntity = storedApp.entities[ entityMap[ entityID ] ];\n                  if( storedEntity.access && event.access in storedEntity.access ) storedEntity.access[ event.access ] = event.value;\n                }\n              });\n            }\n          }\n        }\n      }\n      return true;\n    }\n  }\n\n\n  toggleApp(app){\n    app.expanded = !app.expanded;\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n}\n","import {\n  Component, EventEmitter,\n  Inject,\n  Input,\n  OnDestroy,\n  OnInit, Output,\n} from '@angular/core';\nimport { FieldConfig, PopBaseEventInterface } from '../../../../pop-common.model';\nimport { TitleCase } from '../../../../pop-common-utility';\n\n\n@Component({\n  selector: 'lib-pop-field-btn',\n  template: `\n    <div class=\"field-action-btn\" *ngIf=\"field.multiple\">\n      <mat-icon class=\"sw-pointer\" matTooltip=\"{{tooltip}}\" matTooltipPosition=\"above\" (click)=\"callAction();\">{{action}}</mat-icon>\n    </div>\n  `,\n  styles: [ '.field-doAction-btn {background: var(--bg-1);border-radius: 50%;width: 14px;height: 14px; mar-top:2px; color: var(--accent);border-width: 1px;border-style: solid;border-color: var(--bg-3);box-shadow: 0 2px 5px 0 var(--darken18), 0 2px 10px 0 var(--darken12) !important; } .field-doAction-btn mat-icon {position:relative; top:-2px; left:1px; width: 12px;height: 12px;font-size: 12px;line-height: 16px;}' ]\n})\nexport class PopEntityFieldActionBtnComponent implements OnInit, OnDestroy {\n  @Input() field: FieldConfig;\n  @Input() action: 'add' | 'remove';\n  @Output() events: EventEmitter<PopBaseEventInterface> = new EventEmitter<PopBaseEventInterface>();\n\n  icon: string;\n  tooltip: string;\n\n\n  constructor(\n    @Inject('env') readonly env?\n  ){\n  }\n\n\n  ngOnInit(){\n    if( !this.action ) this.action = 'add';\n    this.tooltip = TitleCase(this.action);\n  }\n\n\n  callAction(){\n    this.events.emit({ source: 'PopEntityFieldActionBtnComponent', type: 'field', name: this.action, field: this.field });\n  }\n\n\n  ngOnDestroy(){\n  }\n}\n\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { FieldConfig, PopBaseEventInterface } from '../../../../../pop-common.model';\n\n\n@Component({\n  selector: 'lib-pop-entity-field-edit-icon',\n  templateUrl: './pop-entity-field-edit-icon.component.html',\n  styleUrls: [ './pop-entity-field-edit-icon.component.scss' ]\n})\nexport class PopEntityFieldEditIconComponent implements OnInit {\n  @Input() dom;\n  @Input() field: FieldConfig;\n  @Output() events: EventEmitter<PopBaseEventInterface> = new EventEmitter<PopBaseEventInterface>();\n\n\n  constructor(){\n  }\n\n\n  ngOnInit(){\n  }\n\n\n  onEdit(){\n    this.dom.state.open = true;\n    this.field.state = 'template_edit';\n    this.events.emit({ source: 'PopEntityFieldEditIconComponent', type: 'field', name: 'edit', field: this.field });\n  }\n\n}\n","import { Component } from '@angular/core';\n\n\n@Component({\n  selector: 'lib-pop-entity-field-dash',\n  template: `\n    <div class=\"entity-field-dash\">\n      <mat-icon>\n        remove\n      </mat-icon>\n    </div>\n  `,\n  styles: [ ':host ::ng-deep mat-icon {width: auto; height: auto; font-size: .9em;} .entityId-field-dash { display: flex;align-items: center; justify-content: center; box-sizing: border-box; height: 100%; }' ],\n})\nexport class PopEntityFieldDashComponent {\n}\n\n\n","import { Component, OnInit } from '@angular/core';\n\n\n@Component({\n  selector: 'lib-pop-entity-field-spacer',\n  template: '<div class=\"entityId-field-spacer sw-clear\"></div>',\n  styles: [ '.entityId-field-spacer { display: flex; height: 10px; clear:both; }' ]\n})\nexport class PopEntityFieldSpacerComponent implements OnInit {\n\n  constructor(){\n  }\n\n\n  ngOnInit(){\n  }\n\n}\n","import {\n  Component,\n  ElementRef,\n  Input,\n  OnDestroy,\n  OnInit,\n  ViewChild,\n  ViewContainerRef\n} from '@angular/core';\nimport { TabPositionInterface } from '../../base/pop-tab-menu/tab-menu.model';\nimport { CoreConfig, DynamicComponentInterface, EntityExtendInterface, PopBaseEventInterface } from '../../../pop-common.model';\nimport { PopTabMenuService } from '../../base/pop-tab-menu/pop-tab-menu.service';\nimport { PopExtendDynamicComponent } from '../../../pop-extend-dynamic.component';\nimport { PopDomService } from '../../../services/pop-dom.service';\nimport { IsArray, IsObject, IsObjectThrowError, StorageGetter } from '../../../pop-common-utility';\nimport { EvaluateWhenConditions, IsValidFieldPatchEvent } from '../pop-entity-utility';\n\n\n@Component( {\n  selector: 'lib-pop-entity-tab-column',\n  template: '<ng-template #container></ng-template>',\n} )\nexport class PopEntityTabColumnComponent extends PopExtendDynamicComponent implements OnInit, OnDestroy {\n  @Input() column: TabPositionInterface;\n  @ViewChild( 'container', { read: ViewContainerRef, static: true } ) public container;\n  @Input() extension: EntityExtendInterface; // allows the route to override certain settings\n\n  public name = 'PopEntityTabColumnComponent';\n  protected srv: {\n    tab: PopTabMenuService,\n  } = {\n    tab: <PopTabMenuService>undefined\n  };\n\n\n  public ui = {\n    tabId: <number>undefined,\n  };\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService,\n    protected _tabRepo: PopTabMenuService,\n  ){\n    super();\n\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n        //  Enforce CoreConfig\n        this.core = IsObjectThrowError( this.core, true, `${this.name}:: - this.core` ) ? this.core : null;\n        //  Set Attributes\n        this.position = +this.column.id;\n        this.id = this.column.id;\n        // Event Handlers\n        this.trait.bubble = true; // passes bubble events up to parent\n\n        this.dom.handler.bubble = ( core: CoreConfig, event: PopBaseEventInterface ) => {\n          this.onBubbleEvent( event );\n        };\n\n        const tab = this.srv.tab.getTab();\n        if( tab && tab.id ){\n          this.ui.tabId = tab.id;\n        }\n\n        return resolve( true );\n      } );\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n\n\n        this.dom.setSubscriber( 'name-reset', this.column.reset.subscribe( ( e: string | boolean ) => this._onColumnResetEvent( e ) ) );\n\n        this._determineHeight();\n        // Attach Template Container\n        this.template.attach( 'container' );\n        //  Render the dynamic list of components\n        this._templateRender();\n\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * The component should take a specific section/column of a defined tab, and dynamically render all of the components that belong in that section\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * Event handler for the parent tab to tell this column to reset itself\n   * @param reset\n   */\n  onBubbleEvent( event: PopBaseEventInterface ){\n    this.log.event( `onBubbleEvent`, event );\n    if( IsValidFieldPatchEvent( this.core, event ) || event.type === 'context_menu' ){\n      this.events.emit( event );\n    }\n  }\n\n\n  /**\n   * Clean up the dom of this component\n   */\n  ngOnDestroy(){\n    this._setScrollTop();\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  /**\n   * Event handler for the parent tab to tell this column to reset itself\n   * @param reset\n   */\n  private _onColumnResetEvent( reset: string | boolean ){\n    if( reset && typeof reset === 'boolean' ){\n      if( this.dom.delay.render ) clearTimeout( this.dom.delay.render );\n      this.dom.delay.render = setTimeout( () => {\n        this._templateRender();\n      }, 250 );\n    }else if( typeof reset === 'string' ){\n      if( reset === 'scrollTop' ){\n        this._setScrollTop();\n      }\n    }\n  }\n\n\n  /**\n   * Helper function that determines what the height of this component should be\n   *\n   */\n  private _determineHeight(){\n    this.dom.state.hasHeader = this.column.header ? true : false;\n    const columnHeight = StorageGetter( this.dom.repo, [ 'position', String( this.column.id ), 'height' ], 650 );\n    this.dom.height.outer = +columnHeight;\n    this.dom.height.inner = this.dom.height.outer - 30;\n  }\n\n\n  /**\n   * Helper function that renders the list of dynamic components\n   *\n   */\n  private _templateRender(){\n    const transfer = [ 'core', 'position' ];\n    if( IsObject( this.column.extension, true ) ){\n      this.extension = this.column.extension;\n      transfer.push( 'extension' );\n    }\n    const components = IsArray( this.column.components, true ) ? this.column.components : [];\n    this.template.render( components, transfer );\n    this._applyScrollTop();\n  }\n\n\n  /**\n   * Reaches up to the parent container and sets the current scroll position\n   * The parent container component uses an *ngIf that prevents using @viewChild to do this\n   */\n  private _applyScrollTop(){\n    setTimeout( () => {\n      if( this.dom.session.scroll && this.ui.tabId && this.dom.session.scroll[ this.ui.tabId ] ){\n        this.el.nativeElement.parentElement.scrollTop = this.dom.session.scroll[ this.ui.tabId ];\n      }\n    }, 0 );\n  }\n\n\n  /**\n   * Reaches up to the parent container and stores the current scroll position\n   * The parent container component uses an *ngIf that prevents using @viewChild to do this\n   */\n  private _setScrollTop(){\n    if( !this.dom.session.scroll ) this.dom.session.scroll = {};\n    if( this.ui.tabId ){\n      this.dom.session.scroll[ this.ui.tabId ] = this.el.nativeElement.parentElement.scrollTop;\n    }\n  }\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { InputConfig } from '../../../../base/pop-field-item/pop-input/input-config.model';\nimport { FieldParamInterface, PopBaseEventInterface } from '../../../../../pop-common.model';\nimport { PopExtendComponent } from '../../../../../pop-extend.component';\nimport { IsDefined } from '../../../../../pop-common-utility';\n\n\n@Component({\n  selector: 'lib-field-asset-param',\n  template: `\n    <lib-pop-input (events)=\"onBubbleEvent($event);\" [config]=ui.param></lib-pop-input><div class=\"sw-mar-vrt-sm sw-clear\"></div>`,\n})\nexport class FieldInputSettingComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() config: FieldParamInterface;\n\n  public name = 'FieldInputSettingComponent';\n\n\n  constructor(\n    public el: ElementRef,\n  ){\n    super();\n    /**\n     * Configure the specifics of this component\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        this.ui.param = new InputConfig({\n          label: this.config.label,\n          name: this.config.name,\n          value: IsDefined(this.config.value) ? this.config.value : this.config.defaultValue,\n          readonly: this.config.readonly,\n          patch: this.config.patch\n        });\n\n        return resolve(true);\n      });\n    };\n  }\n\n\n  /**\n   * This component will product an html field to capture a field item setting value\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * Handle events from the data capture\n   * @param event\n   */\n  onBubbleEvent(event: PopBaseEventInterface){\n    this.events.emit(event);\n  }\n\n\n  /**\n   * Clean up the dom of this component\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n}\n","import { ChangeDetectorRef, Component, Input, OnInit, Output } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { PopCommonService } from '../../../../../services/pop-common.service';\nimport { FieldSettingInterface } from '../../pop-entity-scheme.model';\n\n\n@Component({\n  selector: 'lib-field-asset-param',\n  template: `\n    <div class=\"field-builder-param-container\">\n      <div class=\"field-builder-param-title-container mat-h2\">\n        <div class=\"field-builder-param-title\">{{config.name}}</div>\n      </div>\n    </div>`,\n})\nexport class FieldLabelSettingComponent implements OnInit {\n\n  @Input() config: FieldSettingInterface;\n\n  state = {\n    selected: 0,\n    system: false,\n    loaded: false,\n    loading: false,\n    error: { code: 0, message: '' },\n  };\n\n  subscriber = {\n    data: <Subscription>undefined,\n  };\n\n  field = {\n    type: '',\n    items: undefined,\n    active: {},\n  };\n\n  active ={\n    item: undefined\n  };\n\n  models = {};\n\n  configs = {};\n\n\n  constructor(private commonRepo: PopCommonService,\n              private changeDetectorRef: ChangeDetectorRef){\n  }\n\n\n  ngOnInit(){\n\n  }\n}\n","import { ChangeDetectorRef, Component, EventEmitter, Input, OnDestroy, OnInit, Output } from '@angular/core';\nimport { RadioConfig } from '../../../../base/pop-field-item/pop-radio/radio-config.model';\nimport { PopCommonService } from '../../../../../services/pop-common.service';\nimport { FieldSettingInterface } from '../../pop-entity-scheme.model';\nimport { PopBaseEventInterface } from '../../../../../pop-common.model';\n\n\n@Component({\n  selector: 'lib-field-radio-param',\n  template: `<lib-pop-radio (events)=\"events.emit($event);\" [config]=param></lib-pop-radio><div class=\"sw-mar-vrt-sm sw-clear\"></div>`,\n})\nexport class FieldRadioSettingComponent implements OnInit, OnDestroy {\n  @Input() config: FieldSettingInterface;\n  @Output() events: EventEmitter<PopBaseEventInterface> = new EventEmitter<PopBaseEventInterface>();\n\n  param: RadioConfig;\n\n\n  constructor(private commonRepo: PopCommonService,\n              private changeDetectorRef: ChangeDetectorRef){\n  }\n\n\n  ngOnInit(){\n    this.param = new RadioConfig({\n      label: this.config.label,\n      name: this.config.name,\n      layout: 'row',\n      value: this.config.value,\n      patch: this.config.patch,\n      options: this.config.options\n    });\n  }\n\n\n  ngOnDestroy(){\n  }\n\n}\n","import { ChangeDetectorRef, Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { SelectConfig } from '../../../../base/pop-field-item/pop-select/select-config.model';\nimport { Subscription } from 'rxjs';\nimport { PopCommonService } from '../../../../../services/pop-common.service';\nimport { FieldSettingInterface } from '../../pop-entity-scheme.model';\nimport { PopBaseEventInterface } from '../../../../../pop-common.model';\nimport { ConvertArrayToOptionList } from '../../../../../pop-common-utility';\n\n\n@Component({\n  selector: 'lib-field-select-setting',\n  template: `\n    <lib-pop-select (events)=\"events.emit($event);\" [config]=param></lib-pop-select><div class=\"sw-mar-vrt-sm sw-clear\"></div>`,\n})\nexport class FieldSelectSettingComponent implements OnInit {\n\n  @Input() config: FieldSettingInterface;\n  @Output() events: EventEmitter<PopBaseEventInterface> = new EventEmitter<PopBaseEventInterface>();\n\n  param: SelectConfig;\n\n  state = {\n    selected: 0,\n    system: false,\n    loaded: false,\n    loading: false,\n    error: { code: 0, message: '' },\n  };\n\n  subscriber = {\n    data: <Subscription>undefined,\n  };\n\n  field = {\n    type: '',\n    items: undefined,\n    active: {},\n  };\n\n  active = {\n    item: undefined\n  };\n\n  models = {};\n\n  configs = {};\n\n\n  ngOnInit(){\n    this.param = new SelectConfig({\n      label: this.config.label,\n      name: this.config.name,\n      value: this.config.value ? this.config.value : this.config.default,\n      options: {values: ConvertArrayToOptionList(this.config.options.values)},\n      patch: this.config.patch\n    });\n  }\n}\n","import { ChangeDetectorRef, Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { SwitchConfig } from '../../../../base/pop-field-item/pop-switch/switch-config.model';\nimport { PopCommonService } from '../../../../../services/pop-common.service';\nimport { FieldSettingInterface } from '../../pop-entity-scheme.model';\nimport { PopBaseEventInterface } from '../../../../../pop-common.model';\n\n\n@Component({\n  selector: 'lib-field-switch-setting',\n  template: `<lib-pop-switch (events)=\"events.emit($event);\" [config]=param></lib-pop-switch>`,\n})\nexport class FieldSwitchSettingComponent implements OnInit {\n\n  @Input() config: FieldSettingInterface;\n  @Output() events: EventEmitter<PopBaseEventInterface> = new EventEmitter<PopBaseEventInterface>();\n\n  param: SwitchConfig;\n\n\n  constructor(private commonRepo: PopCommonService,\n              private changeDetectorRef: ChangeDetectorRef){\n  }\n\n\n  ngOnInit(){\n    this.param = new SwitchConfig({\n      label: this.config.label,\n      name: this.config.name,\n      value: this.config.value,\n      patch: this.config.patch\n    });\n  }\n\n\n}\n","import { ChangeDetectorRef, Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { TextareaConfig } from '../../../../base/pop-field-item/pop-textarea/textarea-config.model';\nimport { FieldSettingInterface } from '../../pop-entity-scheme.model';\nimport { PopBaseEventInterface } from '../../../../../pop-common.model';\n\n@Component({\n  selector: 'lib-field-textarea-setting',\n  template: `<lib-pop-textarea (events)=\"events.emit($event);\" [config]=param></lib-pop-textarea>`,\n})\nexport class FieldTextareaSettingComponent implements OnInit {\n\n  @Input() config: FieldSettingInterface;\n  @Output() events: EventEmitter<PopBaseEventInterface> = new EventEmitter<PopBaseEventInterface>();\n\n  param: TextareaConfig;\n\n\n  constructor(private changeDetectorRef: ChangeDetectorRef){\n  }\n\n\n  ngOnInit(){\n    this.param = new TextareaConfig({\n      label: this.config.label,\n      name: this.config.name,\n      value: this.config.value ? this.config.value : this.config.default,\n      height: 70,\n    });\n  }\n\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { EntitySchemeSectionInterface } from '../pop-entity-scheme.model';\nimport { PopExtendComponent } from '../../../../pop-extend.component';\n\n\n@Component({\n  selector: 'lib-pop-entity-asset-component-modal',\n  templateUrl: './pop-entity-asset-component-modal.component.html',\n  styleUrls: [ './pop-entity-asset-component-modal.component.scss' ]\n})\nexport class PopEntityAssetComponentModalComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() config: EntitySchemeSectionInterface = <EntitySchemeSectionInterface>{};\n\n  public name = 'PopEntityAssetComponentModalComponent';\n\n\n  constructor(\n    public el: ElementRef,\n  ){\n    super();\n    /**\n     * Configure the specifics of this component\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        resolve(true);\n      });\n    };\n  }\n\n\n  /**\n   * This component should have a purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * Clean up the dom of this component\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit, ViewContainerRef } from '@angular/core';\nimport {\n  Dictionary,\n  DynamicComponentInterface,\n  FieldInterface,\n  FieldItemInterface,\n  PopBaseEventInterface,\n  SectionInterface,\n  ServiceInjector\n} from '../../../../pop-common.model';\nimport { CheckboxConfig } from '../../../base/pop-field-item/pop-checkbox/checkbox-config.model';\nimport { InputConfig } from '../../../base/pop-field-item/pop-input/input-config.model';\nimport { MatDialogRef } from '@angular/material/dialog';\nimport { Validators } from '@angular/forms';\nimport { FieldInputSettingComponent } from './params/field-input-setting.component';\nimport { FieldLabelSettingComponent } from './params/field-label-setting.component';\nimport { FieldSelectSettingComponent } from './params/field-select-setting.component';\nimport { FieldSwitchSettingComponent } from './params/field-switch-setting.component';\nimport { FieldRadioSettingComponent } from './params/field-radio-setting.component';\nimport { FieldTextareaSettingComponent } from './params/field-textarea-setting.component';\nimport { CdkDragDrop, moveItemInArray } from '@angular/cdk/drag-drop';\nimport { PopContainerService } from '../../../../services/pop-container.service';\nimport { PopExtendDynamicComponent } from '../../../../pop-extend-dynamic.component';\nimport { PopFieldEditorService } from '../../pop-entity-field-editor/pop-entity-field-editor.service';\nimport { PopDomService } from '../../../../services/pop-dom.service';\nimport {\n  ArrayKeyBy,\n  ArrayMapSetter,\n  CleanObject,\n  IsArrayThrowError,\n  IsObject,\n  IsObjectThrowError,\n  IsStringError,\n  SnakeToPascal,\n  TitleCase\n} from '../../../../pop-common-utility';\nimport { EntitySchemeSectionInterface } from '../pop-entity-scheme.model';\n\n\n@Component({\n  selector: 'lib-pop-entity-asset-field-modal',\n  templateUrl: './pop-entity-asset-field-modal.component.html',\n  styleUrls: [ './pop-entity-asset-field-modal.component.scss' ],\n  providers: [ PopContainerService ]\n})\nexport class PopEntityAssetFieldModalComponent extends PopExtendDynamicComponent implements OnInit, OnDestroy {\n  @Input() config: EntitySchemeSectionInterface = <EntitySchemeSectionInterface>{};\n  public name = 'PopEntityAssetFieldModalComponent';\n\n  protected srv: {\n    container: PopContainerService,\n    field: PopFieldEditorService,\n  } = {\n    container: <PopContainerService>undefined,\n    field: ServiceInjector.get(PopFieldEditorService),\n  };\n\n  protected asset = {\n    defaultContentHeight: <number>undefined,\n    model: new Map(),\n    config: new Map(),\n    coreField: <FieldInterface>undefined,\n    coreFields: <Dictionary<FieldInterface>>undefined,\n    coreFieldItems: <Dictionary<FieldItemInterface>>undefined,\n    params: <Dictionary<any>>undefined,\n    map: <Dictionary<any>>{}\n  };\n\n  public ui = {\n    activeConfigs: <Dictionary<any>>{},\n    field: <FieldInterface>undefined,\n    name: <InputConfig>undefined,\n    items: <any[]>[],\n    sections: <SectionInterface[]>[],\n    map: {\n      items: <Dictionary<number>>{}\n    }\n  };\n\n\n  protected extendServiceContainer(){\n    this.srv.container = this._containerRepo;\n    delete this._containerRepo;\n  }\n\n\n  constructor(\n    public el: ElementRef,\n    public dialogRef: MatDialogRef<PopEntityAssetFieldModalComponent>,\n    protected _containerRepo: PopContainerService,\n    protected _domRepo: PopDomService,\n  ){\n    super();\n    this.extendServiceContainer();\n\n    this.srv.container.onContainerCreated((container: ViewContainerRef) => {\n      this.template.attach(container);\n      this._setActiveItemParamConfiguration();\n    });\n\n\n    /**\n     * Configure the specifics of this component\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        this.internal_name = IsStringError(this.config.asset.fieldgroup.name, true, `${this.name}:configureDom - internal_name`) ? this.config.asset.fieldgroup.name : '';\n        const defaultHeight = +(window.innerHeight * .75) - 60;\n        this.dom.setHeight(defaultHeight, 50);\n          this.dom.height.content = this.dom.height.inner - 200;\n          this.dom.active.items = {};\n          this.asset.defaultContentHeight = this.dom.height.content;\n          this.asset.coreFields = IsArrayThrowError(this.core.resource.fields.data_values, true, `${this.name}: - this.core.entity.resource.fields`) ? ArrayKeyBy(this.core.resource.fields.data_values, 'name') : {};\n          this.asset.params = this.srv.field.getViewParams();\n          this.asset.coreField = IsObjectThrowError(this.asset.coreFields[ this.internal_name ], true, `${this.name}: - this.asset.coreFields[ this.internal_name ]`) ? this.asset.coreFields[ this.internal_name ] : {};\n          this.asset.coreFieldItems = IsArrayThrowError(this.asset.coreField.items, true, `${this.name}: - this.asset.coreField.items`) ? ArrayKeyBy(<any>this.asset.coreField.items, 'name') : {};\n\n\n          this.ui.field = <FieldInterface>this.config.asset;\n          this.ui.sections = [];\n          this.ui.name = new InputConfig({\n            value: this.ui.field.name,\n            readonly: true\n          });\n\n          this.ui.map.items = {};\n          const items = IsArrayThrowError(this.config.asset.items, true, `${this.name}:configureDom: - this.config.asset.items`) ? JSON.parse(JSON.stringify(this.config.asset.items)) : [];\n          // const items = this.srv.common.isArray(this.config.asset.items, true, `${this.name}:configureDom - items`) ? JSON.parse(JSON.stringify(this.asset.coreField.items)) : {};\n          items.map((item, index) => {\n            item = CleanObject(item, {\n              blacklist: [ 'entries', 'object_name', 'depth_level', 'storage' ]\n            });\n            const coreFieldItem = <any>this.asset.coreFieldItems[ item.name ];\n            coreFieldItem.rules = ArrayKeyBy(coreFieldItem.itemrules, 'name');\n            // console.log('coreFieldItem', coreFieldItem);\n            item.required = this.srv.field.getViewRequired(this.asset.coreField.name, item.name);\n\n            if( item.required ) item.active = 1;\n            if( +item.active ){\n              item.name = SnakeToPascal(item.name);\n              item.model = {\n                id: item.id,\n                name: item.name,\n                label: item.label,\n              };\n              item.config = {\n                options: {\n                  values: item.options\n                }\n              };\n\n              if( IsObject(item.view, [ 'name' ]) ) item.model.form = item.view.name;\n              if( IsObject(item.rules, true) ) item.model = { ...item.model, ...item.rules };\n              if( IsObject(item.settings, true) ) item.model = { ...item.model, ...item.settings };\n              this.dom.active.items[ item.name ] = item.active;\n              this.asset.model.set(item.name, item.model);\n              this.asset.config.set(item.name, item.config);\n              this.ui.activeConfigs[ item.name ] = new CheckboxConfig({\n                id: item.id,\n                name: 'active',\n                disabled: item.required ? true : false,\n                value: +item.active,\n                // patch: column.required ? null : {\n                //   field: 'active',\n                //   path: `cis/fields/${this.config.id}/item/${column.id}`,\n                //   displayIndicator: false,\n                // }\n              });\n              this.ui.items.push(item);\n            }\n            this.ui.map.items[ item.name ] = index;\n          });\n\n          this.ui.sections = <SectionInterface[]>[\n            {\n              id: 'params',\n              name: 'Params',\n              inputs: {},\n              component: null,\n              metadata: {},\n              requireRefresh: false,        // require an api call to refresh the entity on every load\n              active: true,\n            },\n            {\n              id: 'options',\n              name: 'Options',\n              inputs: {},\n              component: null,\n              metadata: {},\n              requireRefresh: false,        // require an api call to refresh the entity on every load\n              active: true,\n            },\n            // {\n            //   id: 'defaultValues',\n            //   name: 'Default Values',\n            //   inputs: {},\n            //   component: DemoTwoComponent,\n            //   metadata: {},\n            //   requireRefresh: false,        // require an api call to refresh the entity on every load\n            // }\n          ];\n\n\n          if( this.ui.items[ 0 ] ){\n            // this.onSelection(this.ui.items[ 0 ]);\n            // if( this.dom.active.item ){\n            // setTimeout(() => {\n            this.onActiveItemSelection(this.ui.items[ 0 ]);\n            // });\n            // }\n          }\n          return resolve(true);\n        });\n    };\n  }\n\n\n  /**\n   * This component will allow a user to configure custom settings for each of items that it holds\n   * The CoreConfig of this component will be a specific scheme\n   * The config of this component is expected to be a scheme asset that is of type field\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * The user will be able to active/deactive a specific item in the list of items for this field\n   * @param item\n   */\n  onItemStatusChange(event: PopBaseEventInterface){\n    if( event.type === 'field' && event.name === 'patch' && event.success ){\n      this.log.event('onItemStatusChange', event);\n      this.dom.active.items[ event.config.id ] = +event.config.control.value;\n    }\n  }\n\n\n  /**\n   * The user will be able to select from a list of item an active item in which to configure settings\n   * @param item\n   */\n  onActiveItemSelection(item){\n    console.log('onActiveItemSelection', item);\n    this.dom.active.item = item;\n    if( this.dom.active.item.options ) this._setActiveItemOptionConfiguration();\n    this.dom.active.model = IsObjectThrowError(this.dom.active.item.model, true, `${this.name}:onSelection - model`) ? JSON.parse(JSON.stringify(this.dom.active.item.model)) : {};\n    // this.dom.active.params = IsObjectThrowError(this.dom.active.item.config, true, `${this.name}:onSelection - config`) ? JSON.parse(JSON.stringify(this.dom.active.item.config)) : {};\n    // this.dom.active.config = IsObjectThrowError(this.config.asset.items[ this.ui.map.items[ item.name ] ].config, true, `${this.name}:onSelection - config`) ? JSON.parse(JSON.stringify(this.config.asset.items[ this.ui.map.items[ item.name ] ].config)) : {};\n    if( this.dom.active.item.id && this.dom.session[ this.dom.active.item.id ] ){\n      this.onActiveItemSettingSectionSelection(this.dom.session[ this.dom.active.item.id ]);\n    }else{\n      this.onActiveItemSettingSectionSelection(this.ui.sections[ 0 ]); // params\n    }\n    this._setActiveItemParamConfiguration();\n  }\n\n\n  /**\n   * The user needs the changes it active item options to be saved to the database\n   * @param event\n   */\n  onSaveActiveItemOptions(event: PopBaseEventInterface){\n    console.log('triggerSaveFieldOptions:stub', event);\n  }\n\n\n  /**\n   * There might be multiple tab sections to the setting of this active item\n   * @param section\n   */\n  onActiveItemSettingSectionSelection(section: SectionInterface){\n    this.dom.active.section = section.id;\n    this.dom.session[ this.dom.active.item.id ] = section;\n  }\n\n\n  /**\n   * The user is able to sort the options that should be used to populate the field, if applicable\n   */\n  onActiveItemOptionSortDrop(event: CdkDragDrop<string[]>){\n    moveItemInArray(this.dom.active.options, event.previousIndex, event.currentIndex);\n    this.onSaveActiveItemOptions(<PopBaseEventInterface>{ name: 'onChange' });\n  }\n\n\n  /**\n   * The user should be able to click a button to close the modal\n   */\n  onModalClose(){\n    this.dialogRef.close(0);\n  }\n\n\n  /**\n   * Clean up the dom of this component\n   */\n  ngOnDestroy(){\n    this.template.destroy();\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  private _setActiveItemParamConfiguration(){\n    if( IsObject(this.dom.active.config, true) && IsObject(this.dom.active.params, true) ){\n      this._getParamConfigurationComponentList(this.dom.active.config, this.dom.active.params).then((paramComponentList: DynamicComponentInterface[]) => {\n        this.template.render(paramComponentList, [], true);\n      });\n    }\n  }\n\n\n  private _getParamConfigurationComponentList(fieldItem: Dictionary<any>, params: Dictionary<any>): Promise<DynamicComponentInterface[]>{\n    return new Promise((resolve) => {\n      const paramComponentList: DynamicComponentInterface[] = [];\n      let component;\n      let configInterface;\n      if( this.dom.active.model.form in this.asset.params ){\n        Object.keys(params).map((paramKey) => {\n          if( paramKey in this.asset.params[ this.dom.active.model.form ] ){\n            configInterface = {\n              ...{\n                name: TitleCase(SnakeToPascal(paramKey)),\n                value: fieldItem[ paramKey ],\n                column: paramKey,\n                readonly: [ 'api', 'column' ].includes(paramKey) ? true : false,\n                patch: { field: paramKey, path: `${fieldItem.api_path}/config` }\n              }, ...params[ paramKey ]\n            };\n            configInterface.patch.path = ''; // ToDo: need to be the correct path to save setting to profile_scheme setting storage????\n            // console.log('configInterface', configInterface);\n            component = <DynamicComponentInterface>{\n              type: this._determineParamSettingComponent(paramKey),\n              inputs: {\n                config: configInterface,\n              }\n            };\n            paramComponentList.push(component);\n          }\n        });\n      }\n\n      resolve(paramComponentList);\n    });\n  }\n\n\n  /**\n   * Determine the correct component for the form type\n   * @param form\n   */\n  private _determineParamSettingComponent(form){\n    switch( form ){\n      case 'label':\n        return FieldLabelSettingComponent;\n        break;\n      case 'display':\n      case 'api':\n      case 'column':\n      case 'sort_top':\n      case 'sort':\n      case 'helpText':\n        return FieldInputSettingComponent;\n        break;\n      case 'select':\n      case 'mask':\n      case 'pattern':\n      case 'maxlength':\n      case 'transformation':\n        return FieldSelectSettingComponent;\n        break;\n      case 'hidden':\n      case 'visible':\n      case 'disabled':\n      case 'readonly':\n      case 'required':\n        return FieldSwitchSettingComponent;\n        break;\n      case 'layout':\n        return FieldRadioSettingComponent;\n        break;\n      case 'metadata':\n        return FieldTextareaSettingComponent;\n        break;\n      default:\n        return FieldLabelSettingComponent;\n    }\n  }\n\n\n  private _setActiveItemOptionConfiguration(){\n    this.dom.active.options = [];\n    if( this.dom.active.item.options && Array.isArray(this.dom.active.item.options.values) ){\n      this.dom.active.item.options.values.map((option, index) => {\n        option.sort = index;\n        if( typeof option.active !== 'boolean' ) option.active = true;\n        if( typeof option.name !== 'string' ) option.name = '';\n        if( typeof option.value !== 'string' ) option.value = '';\n        this.dom.active.options.push({\n          active: new CheckboxConfig({\n            label: null,\n            value: +option.active,\n            bubble: true,\n          }),\n          name: new InputConfig({\n            label: null,\n            value: option.name,\n            validators: [ Validators.required ],\n            transformation: 'title',\n            bubble: true,\n            pattern: 'AlphaNoSpaceOnlyDash',\n            maxlength: 12,\n            readonly: true\n          }),\n          value: new InputConfig({\n            label: null,\n            value: option.value || 0,\n            bubble: true,\n            pattern: 'AlphaNumeric',\n            transformation: 'lower',\n            maxlength: 128,\n            readonly: true\n          }),\n          sort: new InputConfig({\n            label: null,\n            value: option.sort || 0,\n            bubble: true,\n          }),\n        });\n      });\n\n    }else{\n      this.onActiveItemSettingSectionSelection(this.ui.sections[ 0 ]); // params\n    }\n  }\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit, ViewEncapsulation } from '@angular/core';\nimport { PopEntitySchemeService } from '../../pop-entity-scheme.service';\nimport { CdkDragDrop, moveItemInArray, transferArrayItem } from '@angular/cdk/drag-drop';\nimport { PopExtendComponent } from '../../../../../pop-extend.component';\nimport { PopDomService } from '../../../../../services/pop-dom.service';\nimport { fadeInOut, slideInOut } from '../../../../../pop-common-animations.model';\nimport { IsObjectThrowError } from '../../../../../pop-common-utility';\nimport { EntitySchemeSectionInterface } from '../../pop-entity-scheme.model';\nimport { InputConfig } from '../../../../base/pop-field-item/pop-input/input-config.model';\n\n\n@Component( {\n  selector: 'lib-entity-scheme-layout-section',\n  templateUrl: './entity-scheme-layout-section.component.html',\n  styleUrls: [ './entity-scheme-layout-section.component.scss' ],\n  animations: [\n    fadeInOut,\n    slideInOut\n  ],\n} )\nexport class EntitySchemeLayoutSectionComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() section: any = <any>{};\n\n  public name = 'EntitySchemeLayoutSectionComponent';\n\n  protected srv: {\n    scheme: PopEntitySchemeService\n  } = {\n    scheme: <PopEntitySchemeService>undefined\n  };\n\n  public ui = {\n    header: <InputConfig>undefined,\n    primaryIds: <number[]>[]\n  };\n\n\n  /**\n   * @param el\n   * @param _domRepo - transfer\n   * @param _schemeRepo - transfer\n   */\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService,\n    protected _schemeRepo: PopEntitySchemeService\n  ){\n    super();\n\n    this.dom.session.expanded = {};\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n\n        // #1: Enforce a CoreConfig\n        this.core = IsObjectThrowError( this.core, true, `${this.name}:configureDom: - this.core` ) ? this.core : null;\n        this.id = this.section.position;\n\n        this.ui.primaryIds = this.srv.scheme.ui.primaryIds;\n\n        this._buildHeader();\n        await this.dom.setWithComponentInnerHeight( 'PopEntityTabColumnComponent', this.section.position, 75, 700 );\n\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * The purpose of this component is to manage a specific section of the scheme layout\n   * A user should be able to drag as sort assets, and apply custom settings to an asset\n   * An asset is basically refers to something that the user can position in the scheme layout, field, component, etc\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * A user can dragSort assets from one column to another in the scheme layout\n   * @param event\n   */\n  onAssetSortDrop( event: CdkDragDrop<string[]> ){\n    this.srv.scheme.onAssetSortDrop( event );\n  }\n\n\n  /**\n   * A user can click on an edit button an edit the config settings of an asset\n   * @param asset\n   */\n  onEditAsset( asset ){\n    this.dom.setTimeout( 'edit-asset', async() => {\n      await this.srv.scheme.onEditAsset( asset );\n      if( this.dom.session.expanded[ asset.id ] ){\n        this.onExpandAssetContent( asset );\n        this.dom.setTimeout( 'reset-asset', async() => {\n          this.onExpandAssetContent( asset );\n        }, 0 );\n      }\n    }, 0 );\n\n  }\n\n\n  /**z\n   * A user can click on a toggle to expand/close the content section of an asset\n   * @param asset\n   */\n  onExpandAssetContent( asset: EntitySchemeSectionInterface ){\n    if( asset.id ){\n      this.dom.session.expanded[ asset.id ] = !this.dom.session.expanded[ asset.id ];\n    }\n  }\n\n\n  /**\n   * Triggers when user mouseleaves an asset\n   * @param asset\n   */\n  onHideAssetMenu( asset: EntitySchemeSectionInterface ){\n    asset.menu = false;\n  }\n\n\n  /**\n   * Triggers when user mouseenters an asset\n   * @param asset\n   */\n  onShowAssetMenu( asset: EntitySchemeSectionInterface ){\n    if( asset.asset_type != 'table' ){\n      asset.menu = true;\n    }\n  }\n\n\n  /**\n   * A user can click a remove button to remove an asset/child from the scheme layout\n   * @param position\n   * @param asset\n   */\n  onRemoveChildFromLayout( position: number, child: EntitySchemeSectionInterface ){\n    // console.log( 'onRemoveChildFromLayout', position, child );\n    this.srv.scheme.onRemoveChildFromLayout( position, child ).then( () => {\n    } );\n  }\n\n\n  /**\n   * Clean up the dom of this component\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  private _buildHeader(){\n    this.ui.header = new InputConfig( {\n      value: this.section.name,\n      label: `Column ${this.section.position}`,\n      pattern: 'AlphaNumeric',\n      maxlength: 24,\n      // hint: true,\n      // transformation: 'toTitleCase',\n      // hintText: 'This text will appear as a Header',\n      patch: {\n        field: 'name',\n        path: `profile-schemes/${this.section.id}`\n      }\n    } );\n  }\n\n\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { EntitySchemeSectionInterface, ProfileSchemeFieldInterface } from '../../../pop-entity-scheme.model';\nimport { PopExtendComponent } from '../../../../../../pop-extend.component';\nimport { ArrayMapSetter, DynamicSort, IsArray, IsObject, SnakeToPascal, TitleCase } from '../../../../../../pop-common-utility';\nimport { PopEntitySchemeService } from '../../../pop-entity-scheme.service';\nimport { PopFieldEditorService } from '../../../../pop-entity-field-editor/pop-entity-field-editor.service';\nimport { Dictionary, FieldCustomSettingInterface, FieldEntry, FieldInterface, KeyMap } from '../../../../../../pop-common.model';\n\n\n@Component( {\n  selector: 'lib-entity-scheme-field-content',\n  templateUrl: './entity-scheme-field-content.component.html',\n  styleUrls: [ './entity-scheme-field-content.component.scss' ]\n} )\nexport class EntitySchemeFieldContentComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() config: ProfileSchemeFieldInterface = <ProfileSchemeFieldInterface>{};\n\n  public name = 'EntitySchemeFieldContentComponent';\n\n  protected srv = {\n    scheme: <PopEntitySchemeService>undefined,\n    field: <PopFieldEditorService>undefined,\n  };\n\n  protected asset = {\n    field: <FieldInterface>undefined,\n    groupName: <string>undefined,\n    mapping: <any>undefined,\n    primary: <any>undefined,\n    traits: <FieldCustomSettingInterface[]>undefined,\n    traitMap: <Dictionary<number>>{},\n    entryTraitMap: <KeyMap<string[]>>{},\n  };\n\n  public ui = {\n    entries: <FieldEntry[]>[],\n    traits: <FieldCustomSettingInterface[]>[],\n  };\n\n\n  /**\n   * @param el\n   * @param _schemeRepo - transfer\n   * @param _fieldRepo - transfer\n   */\n  constructor(\n    public el: ElementRef,\n    protected _schemeRepo: PopEntitySchemeService,\n    protected _fieldRepo: PopFieldEditorService\n  ){\n    super();\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n\n        await this._setInitialConfig();\n        await this._setEntryTraitMap();\n        await this._setEntries();\n\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * This component is responsible to render the inner contents of field asset\n   * A field asset is custom field that has been created on an entity in the business unit\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * Clean up the dom of this component\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  /**\n   * Set the initial config of this component\n   * @private\n   */\n  private _setInitialConfig(): Promise<boolean>{\n    return new Promise( ( resolve ) => {\n\n      this.asset.field = this.config.asset;\n      this.asset.groupName = this.config.asset.fieldgroup.name;\n      this.asset.mapping = this.srv.scheme.getFieldMapping( +this.config.asset_id );\n      this.asset.primary = this.srv.field.getSchemePrimary( <EntitySchemeSectionInterface>this.core.entity );\n      this.dom.state.isPrimary = +this.config.asset_id === this.asset.primary[ this.asset.groupName ];\n      this.asset.traits = this.srv.field.getFieldTraits( this.asset.field.fieldgroup.name ).sort( DynamicSort( 'name' ) );\n      this.asset.traitMap = ArrayMapSetter( this.asset.traits, 'name' );\n\n      return resolve( true );\n    } );\n  }\n\n\n  /**\n   * Organizes the trait that should be assigned on this field\n   * @private\n   */\n  private _setEntryTraitMap(): Promise<boolean>{\n    return new Promise( ( resolve ) => {\n      this.asset.entryTraitMap = {};\n      if( IsArray( this.asset.traits, true ) && IsObject( this.asset.mapping.trait_entry, true ) ){\n        Object.keys( this.asset.mapping.trait_entry ).map( ( traitName: string ) => {\n          const entryId = +this.asset.mapping.trait_entry[ traitName ];\n          if( +entryId ){\n            if( !( IsArray( this.asset.entryTraitMap[ entryId ] ) ) ){\n              this.asset.entryTraitMap[ entryId ] = [];\n            }\n            this.asset.entryTraitMap[ entryId ].push( traitName );\n          }\n        } );\n      }\n      return resolve( true );\n    } );\n  }\n\n\n  /**\n   * Set the entries of this field\n   * @private\n   */\n  private _setEntries(): Promise<boolean>{\n    return new Promise( ( resolve ) => {\n      this.ui.entries = [];\n      this.ui.entries.push( ...this.asset.field.entries );\n      if( IsObject( this.config, [ 'asset' ] ) ){\n        if( IsArray( this.ui.entries, true ) ){\n          this.ui.entries.map( ( entry:FieldEntry ) => {\n            entry.disabled = IsArray( this.asset.mapping.disabled_entries, true ) && this.asset.mapping.disabled_entries.includes( +entry.id );\n            entry.traits = this._getEntryTraits( entry );\n          } );\n          this.ui.entries.sort( DynamicSort( 'sort_order' ) );\n        }\n      }\n      return resolve( true );\n    } );\n  }\n\n\n  /**\n   * Set the traits that belong to a field entry\n   * @param entry\n   * @private\n   */\n  private _getEntryTraits( entry: FieldEntry ): FieldCustomSettingInterface[]{\n    const traits = [];\n    if( IsObject( entry, [ 'id' ] ) && IsArray( this.asset.traits, true ) && this.dom.state.isPrimary ){\n      if( entry.id in this.asset.entryTraitMap && IsArray( this.asset.entryTraitMap[ entry.id ], true ) ){\n        this.asset.entryTraitMap[ entry.id ].map( ( traitName: string ) => {\n          if( traitName in this.asset.traitMap ){\n            const trait = this.asset.traits[ this.asset.traitMap[ traitName ] ];\n            if( IsObject( trait, [ 'icon', 'name' ] ) ){\n              if( !trait.label ) trait.label = TitleCase( SnakeToPascal( trait.name ) );\n              traits.push( trait );\n            }\n          }\n        } );\n      }\n    }\n\n    return traits;\n  }\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { ProfileSchemeFieldInterface } from '../../../pop-entity-scheme.model';\nimport { PopExtendComponent } from '../../../../../../pop-extend.component';\n\n\n@Component({\n  selector: 'lib-entity-scheme-table-content',\n  templateUrl: './entity-scheme-table-content.component.html',\n  styleUrls: [ './entity-scheme-table-content.component.scss' ]\n})\nexport class EntitySchemeTableContentComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() config: ProfileSchemeFieldInterface = <ProfileSchemeFieldInterface>{};\n\n  public name ='EntitySchemeTableContentComponent';\n\n  constructor(\n    public el: ElementRef,\n  ){\n    super();\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        return resolve(true);\n      });\n    };\n  }\n\n\n  /**\n   * This component is responsible to render the inner contents of table asset\n   * A table asset is basically a column that exists on the base table of an entity, ..ie: id, name, description ...\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n\n  /**\n   * Clean up the dom of this component\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { PopExtendComponent } from '../../../../../../pop-extend.component';\n\n\n@Component({\n  selector: 'lib-entity-scheme-component-content',\n  templateUrl: './entity-scheme-component-content.component.html',\n  styleUrls: [ './entity-scheme-component-content.component.scss' ]\n})\nexport class EntitySchemeComponentContentComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() config: any = {};\n\n  public name ='EntitySchemeComponentContentComponent';\n\n\n  constructor(\n    public el: ElementRef,\n  ){\n    super();\n\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        resolve(true);\n      });\n    };\n  }\n\n\n  /**\n   * This component is responsible to render the inner contents of component asset\n   * A component asset is custom widget that has been created for the entityId\n   */\n  ngOnInit(){\n    super.ngOnInit();\n    this.dom.configure().then(() => {\n      this.dom.register();\n      this.dom.ready();\n    });\n  }\n\n\n  /**\n   * Clean up the dom of this component\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { PopExtendComponent } from '../../../../../pop-extend.component';\nimport { CoreConfig, Dictionary, Entity, FieldGroupInterface, FieldInterface, FieldItemInterface, PopBaseEventInterface, PopRequest } from '../../../../../pop-common.model';\n\nimport { CheckboxConfig } from '../../../../base/pop-field-item/pop-checkbox/checkbox-config.model';\nimport { PopDomService } from '../../../../../services/pop-dom.service';\nimport {\n  ArrayMapSetter,\n  CleanObject,\n  GetHttpResult,\n  IsArrayThrowError,\n  IsDefined,\n  IsObject,\n  IsObjectThrowError,\n  IsString,\n  StorageSetter\n} from '../../../../../pop-common-utility';\nimport { PopFieldEditorService } from '../../pop-entity-field-editor.service';\nimport { EntitySchemeSectionInterface } from '../../../pop-entity-scheme/pop-entity-scheme.model';\n\n\n@Component( {\n  selector: 'lib-field-builder-items',\n  templateUrl: './pop-entity-field-items.component.html',\n  styleUrls: [ './pop-entity-field-items.component.scss' ]\n} )\nexport class PopEntityFieldItemsComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() field: FieldInterface;\n  @Input() scheme: EntitySchemeSectionInterface = null;\n  public name = 'PopEntityFieldItemsComponent';\n\n  protected srv = {\n    field: <PopFieldEditorService>undefined\n  };\n\n  protected asset = {\n    fieldgroup: <Entity>undefined,\n  };\n\n  public ui = {\n    field: <FieldInterface>undefined,\n    coreItems: <any[]>undefined,\n    items: <any[]>undefined,\n    fieldItemHelper: '',\n    map: <Dictionary<any>>{},\n    customSetting: <Dictionary<any>>{}\n  };\n\n\n  /**\n   * @param el\n   * @param _domRepo - transfer\n   * @param _fieldRepo - transfer\n   */\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService,\n    protected _fieldRepo: PopFieldEditorService\n  ){\n    super();\n\n    /**\n     * This should transformValue and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n        // #1: Enforce a CoreConfig\n        this.core = IsObjectThrowError( this.core, [ 'entity' ], `${this.name}:configureDom: - this.core` ) ? this.core : null;\n        // Set the height boundary\n\n        if( !this.field ) this.field = this.core.entity;\n\n        this._setHeight();\n\n        // Set event Handlers\n        this.dom.handler.core = ( core: CoreConfig, event: PopBaseEventInterface ) => this._coreEventHandler( event );\n        // Create a container to track the active items\n        this.dom.active.items = {};\n\n\n        // Transfer any resources for the entityId data\n        this.asset.fieldgroup = IsObjectThrowError( this.core.entity, [ 'fieldgroup' ], `${this.name}:: - this.core.entity.fieldgroup` ) ? <Entity>CleanObject( this.core.entity.fieldgroup ) : null;\n        // this.asset.coreRules = {};  // the settings that can be changed\n        // this.asset.coreItemModels = {}; // where the settings that can be changed are stored\n        this.ui.coreItems = IsArrayThrowError( this.core.resource.items.data_values, true, `${this.name}:configureDom: - this.core.resource.items` ) ? this.core.resource.items.data_values.filter( ( item ) => {\n          return !( this.srv.field.getViewIgnored( this.asset.fieldgroup.name, item.name, this.scheme ) );\n        } ).map( ( value ) => CleanObject( value ) ) : [];\n\n        this.ui.map.coreItems = ArrayMapSetter( this.ui.coreItems, 'name' );\n\n\n        this.ui.fieldItemHelper = `Select which attributes will be part of this ${this.asset.fieldgroup.name} field. Click on a field to edit individual field item settings.`;\n        this.ui.items = IsArrayThrowError( this.core.entity.items, true, `${this.name}:: - this.core.entity.items` ) ? this.core.entity.items.map( ( item ) => CleanObject( item ) ) : null;\n        if( IsObject( this.scheme ) ){\n          this.ui.items = this.ui.items.filter( ( item: FieldItemInterface ) => {\n            return +item.active === 1;\n          } );\n\n        }\n        this.ui.map.items = ArrayMapSetter( this.ui.items, 'name' );\n\n        // Build the custom settings\n        this._buildCustomSettings();\n        // Build the Active Items for this field\n        this._buildActiveItems();\n        this._selectDefaultItem();\n        // Select the first field attribute item so that the view will have something to render\n\n\n        return resolve( true );\n      } );\n\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n        if( this.dom.active.labelSettings ){\n          this.onActiveLabelSelection();\n          setTimeout( () => {\n            this.onActiveLabelSelection();\n          } );\n        }else if( IsObject( this.dom.active.item, [ 'id' ] ) ){\n          this.onActiveItemSelection( this.dom.active.item );\n          setTimeout( () => {\n            this.onActiveItemSelection( this.dom.active.item );\n          } );\n        }else if( true ){\n          this.onActiveLabelSelection();\n          setTimeout( () => {\n            this.onActiveLabelSelection();\n          } );\n        }else{\n          this._selectDefaultItem();\n        }\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * We expect the core to represent a field\n   * This component lists out all of the field attributes that this field has, and allows for the user to active/deactivate specific items.\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * This handles when a user click on a checkbox to activate/deactivate a specific field attribute\n   * @param event\n   */\n  onItemActiveChange( event: PopBaseEventInterface ){\n    // #1: Make sure that change was stored in the database\n    if( event.type === 'field' && event.name === 'patch' && event.success ){\n      if( this.log.repo.enabled( 'event', this.name ) ) console.log( this.log.repo.message( `${this.name}:itemActiveHandler` ), this.log.repo.color( 'event' ), event );\n      // #2: Update the change on the domRepo so other components can now about the change\n      this.dom.repo.ui.activeItems[ event.config.id ] = +event.config.control.value;\n      // #3: Send an event to the FieldBuilderPreviewComponent to update that this field attribute was activated/deactivated\n      this.core.channel.next( { source: this.name, target: 'PopEntityFieldPreviewComponent', type: 'component', name: 'update' } );\n    }\n  }\n\n\n  /**\n   * This handles when a user click on a checkbox to activate/deactivate a specific field attribute\n   * @param event\n   */\n  onEditLabelChange( event: PopBaseEventInterface ){\n    console.log( 'onCustomSettingChange', event );\n  }\n\n\n  /**\n   * On selection is an event when a user click on a specific field attribute to manage its settings\n   * @param item\n   */\n  onActiveItemSelection( item ){\n    this.log.info( `onActiveItemSelection`, item );\n    if( !this.dom.state.saving && IsObject( item, [ 'id' ] ) ){\n      this.dom.active.labelSettings = false;\n      // #1. Build a data package to send to the FieldBuilderItemSettingsComponent component\n      this.dom.active.item = item;\n      // #2: Send an event with the data package to the FieldBuilderItemSettingsComponent component\n      const event = <PopBaseEventInterface>{\n        type: 'component',\n        name: 'active-item',\n        source: this.name,\n        target: 'PopEntityFieldItemParamsComponent', // target specifies that specific component that should act on this event\n        data: item\n        // data: { item: item, models: itemModels, config: itemConfig }\n      };\n      this.dom.store( 'active' );\n      this.core.channel.emit( event ); // core channel is the shared radio between all components on the core\n    }\n  }\n\n\n  /**\n   * On selection is an event when a user click on a specific field attribute to manage its settings\n   * @param item\n   */\n  onActiveLabelSelection(){\n    this.log.info( `onActiveLabelSelection` );\n    this.dom.active[ 'item' ] = null;\n    this.dom.active.labelSettings = true;\n    const event = <PopBaseEventInterface>{\n      type: 'component',\n      name: 'label-settings',\n      source: this.name,\n      target: 'PopEntityFieldItemParamsComponent', // target specifies that specific component that should act on this event\n      data: {}\n    };\n    this.core.channel.emit( event ); // core channel is the shared radio between all components on the core\n    this.dom.store( 'active' );\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  /**\n   * Select the the first field item available\n   */\n  private _selectDefaultItem(){\n    if( this.ui.coreItems[ 0 ] ){\n      const coreItem = this.ui.coreItems[ 0 ];\n      const realItem = this.ui.items[ this.ui.map.items[ coreItem.name ] ];\n      this.onActiveItemSelection( realItem );\n      if( this.dom.active.item ){ // seems to need a double tap  to be consistent\n        setTimeout( () => {\n          this.onActiveItemSelection( realItem );\n        } );\n      }\n    }\n  }\n\n\n  /**\n   * This handler is for managing an cross-communication between components on the core channel\n   * @param event\n   */\n  private _coreEventHandler( event: PopBaseEventInterface ){\n    this.log.event( `_coreEventHandler`, event );\n    // if( IsValidFieldPatchEvent(this.core, event) ){\n    //   if( event.config.name === 'multiple' && !event.config.control.value && this.dom.active.labelSettings ){\n    //     this._selectDefaultItem();\n    //     // this._setHeight();\n    //   }\n    // }\n  }\n\n\n  /**\n   * Build configs that control the active state for each field item\n   */\n  private _buildActiveItems(){\n    this.dom.repo.ui.activeItems = {}; // stored on domRepo so that other components can use it\n\n    const isScheme = IsObject( this.scheme, true );\n\n    this.ui.coreItems.map( ( coreItem, index ) => {\n      const realItem = this.ui.items[ this.ui.map.items[ coreItem.name ] ];\n\n      if( IsObject( realItem, [ 'id', 'name' ] ) ){\n        // item.required = typeof coreItem.required !== 'undefined' ? +coreItem.required : 1;\n        // console.log('item', item);\n        // console.log('coreItem', coreItem);\n        // ToDo:: coreFieldItem needs to have required attribute\n\n        // this.ui.map.items[ item.name ] = index;\n\n        // item.name = SnakeToPascal(item.name);\n        coreItem.required = this.srv.field.getViewRequired( this.asset.fieldgroup.name, realItem.name );\n        if( coreItem.required ) realItem.active = 1;\n\n        let itemActive = +realItem.active;\n        if( isScheme ){\n          const schemeFieldItemSession = this.srv.field.getSchemeFieldItemMapping( this.scheme, +this.field.id, realItem.id );\n          console.log( 'schemeFieldItemSession', realItem.id, schemeFieldItemSession );\n          if( IsDefined( schemeFieldItemSession.active ) ){\n            itemActive = +schemeFieldItemSession.active;\n          }\n        }\n        this.dom.active.items[ realItem.id ] = new CheckboxConfig( {\n          id: realItem.id,\n          name: 'active',\n          align: 'left',\n          disabled: coreItem.required || !this.core.access.can_update ? true : false,\n          value: itemActive,\n          facade: isScheme,\n          patch: coreItem.required ? null : {\n            field: 'active',\n            path: isScheme ? null : `fields/customs/${realItem.id}`,\n            displayIndicator: true,\n            callback: isScheme ? async( core: CoreConfig, event ) => {\n              const session = this.srv.field.getSchemeFieldItemMapping( this.scheme, +this.field.id, realItem.id );\n              if( IsObject( session ) ){\n                session.active = event.config.control.value;\n                await this.srv.field.updateSchemeFieldMapping( this.scheme );\n              }\n            } : null\n          },\n        } );\n\n        this.dom.repo.ui.activeItems[ realItem.id ] = +realItem.active;\n      }\n    } );\n  }\n\n\n  /**\n   * Build the configs for any relevant custom settings\n   * @private\n   */\n  private _buildCustomSettings(){\n    if( IsObject( this.field.custom_setting, [ 'edit_label' ] ) ){\n      const setting = this.field.custom_setting.edit_label;\n\n      this.ui.customSetting[ 'edit_label' ] = new CheckboxConfig( {\n        id: setting.id,\n        align: 'left',\n        name: 'edit_label',\n        disabled: true,\n        value: true,\n        metadata: { setting: setting },\n        facade: true,\n        patch: {\n          field: ``,\n          path: ``,\n          callback: ( core: CoreConfig, event: PopBaseEventInterface ) => {\n            this.dom.state.saving = true;\n            if( IsObject( this.scheme, true ) ){\n              console.log( 'save setting to a scheme' );\n              console.log( 'event', event );\n              console.log( 'setting', setting );\n            }else{\n              this.srv.field.storeCustomSetting( core, event ).then( ( res ) => {\n                if( IsString( res, true ) ){\n                  this.ui.customSetting[ 'edit_label' ].message = res;\n                }\n                this.dom.setTimeout( 'allow-save', () => {\n                  this.dom.state.saving = false;\n                }, 500 );\n              } );\n            }\n          }\n\n        }\n      } );\n    }\n  }\n\n\n  /**\n   * Determine the layout height to control overflow\n   *\n   */\n  private _setHeight(){\n    this.dom.overhead = 135;\n    // this.dom.height.outer = +this.dom.repo.position[ this.position ].height - 121;\n    // const field = <FieldInterface>this.core.entity;\n    //\n    // if( false && field.multiple ){\n    //   this.dom.height.outer -= 20;\n    //   this.dom.height.outer -= ( +field.multiple_min * 60 );\n    // }\n    // if( this.dom.height.outer < 400 ) this.dom.height.outer = 400;\n    this.dom.setHeight( 400, this.dom.overhead );\n  }\n\n}\n","import { Component, ElementRef, OnDestroy, OnInit } from '@angular/core';\nimport { PopExtendComponent } from '../../../../../pop-extend.component';\nimport { PopDomService } from '../../../../../services/pop-dom.service';\nimport { SelectConfig } from '../../../../base/pop-field-item/pop-select/select-config.model';\nimport { InputConfig } from '../../../../base/pop-field-item/pop-input/input-config.model';\nimport { GetHttpErrorMsg, IsArray, IsObject, IsObjectThrowError, StorageGetter } from '../../../../../pop-common-utility';\nimport { CoreConfig, Dictionary, FieldEntry, FieldInterface, FieldItemOption, PopBaseEventInterface, PopLog, ServiceInjector } from '../../../../../pop-common.model';\nimport { IsValidFieldPatchEvent } from '../../../pop-entity-utility';\nimport { PopRequestService } from '../../../../../services/pop-request.service';\nimport { forkJoin, Observable } from 'rxjs';\nimport { PopFieldEditorService } from '../../pop-entity-field-editor.service';\nimport {FieldEntrySession} from \"../pop-entity-field-entries/pop-entity-field-entries.component\";\n\n\n@Component({\n  selector: 'lib-pop-entity-field-values',\n  templateUrl: './pop-entity-field-values.component.html',\n  styleUrls: [ './pop-entity-field-values.component.scss' ]\n})\nexport class PopEntityFieldValuesComponent extends PopExtendComponent implements OnInit, OnDestroy {\n\n  public name = 'PopEntityFieldValuesComponent';\n\n  protected srv: {\n    field: PopFieldEditorService,\n    request: PopRequestService\n  } = {\n    field: <PopFieldEditorService>undefined,\n    request: ServiceInjector.get(PopRequestService),\n  };\n\n  protected asset = {\n    basePath: <string>undefined,\n    field: <FieldInterface>undefined,\n    type: <string>undefined,\n    typeOption: <Dictionary<{ defaultValue: string | number, options: FieldItemOption[] }>>undefined,\n  };\n\n\n  /**\n   * Nest all service related classes under srv\n   */\n  protected transformSrvContainer(){\n    this.srv.field = this.fieldRepo;\n    this.dom.repo = this.domRepo;\n    delete this.fieldRepo;\n    delete this.domRepo;\n  }\n\n\n  constructor(\n    public el: ElementRef,\n    private domRepo: PopDomService,\n    private fieldRepo: PopFieldEditorService\n  ){\n    super();\n\n    this.transformSrvContainer();\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n\n        this.dom.handler.core = (core: CoreConfig, event:PopBaseEventInterface) => this._coreEventHandler(event);\n\n        this.asset.field = IsObjectThrowError(this.core, true, `Invalid Core`) && IsObjectThrowError(this.core.entity, [ 'id', 'fieldgroup' ], `Invalid Field`) ? <FieldInterface>this.core.entity : null;\n        this.asset.type = this.asset.field.fieldgroup.name; // the field group name , ie.. address, phone\n        this.asset.typeOption = this.srv.field.getDefaultLabelTypeOptions(); // the select options that belong to the types\n\n        this.asset.basePath = `fields/${this.asset.field.id}/entries`; // api endpoint to hit for field entries\n\n        this.ui.asset = <{ entries: { type: SelectConfig, display: InputConfig, increment: number }[], map: Dictionary<any> }>{\n          entries: [], // list of configs for each entry record\n        };\n        this.dom.session.controls = new Map(); // store the entry configs so that changes are not lost when the tabs are changed\n\n        return resolve(true);\n      });\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        this.dom.setTimeout('show-entries', () => {\n          this._showEntries();\n        }, 0);\n\n        return resolve(true);\n      });\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * When the type of an entry is changed in the database, make sure the changes is updated locally\n   * @param index\n   * @param event\n   */\n  onEntryTypeChange(index: number, event: PopBaseEventInterface){\n    if( IsValidFieldPatchEvent(this.core, event) ){\n      const config = this.ui.entries[ index ];\n      const entry = this.asset.field.entries[ index ];\n      const session = this.dom.session.controls.get(index);\n      if( entry && session ){\n        entry.type = config.type.control.value;\n        this._updateEntryTypeSession(session.type, entry);\n        this.dom.session.controls.set(index, session);\n        this.setDomSession(index, session);\n      }\n      setTimeout(() => {\n        this._triggerFieldPreviewUpdate();\n      }, 0);\n    }\n  }\n\n\n  /**\n   * When the display/label of an entry is changed in the database, make sure the changes is updated locally\n   * @param index\n   * @param event\n   */\n  onEntryDisplayChange(index: number, event: PopBaseEventInterface){\n    if( IsValidFieldPatchEvent(this.core, event) ){\n      const config = this.ui.entries[ index ];\n      const entry = this.asset.field.entries[ index ];\n      const session = this.dom.session.controls.get(index);\n      if( entry && session ){\n        entry.name = config.display.control.value;\n        this._updateEntryDisplaySession(session.display, entry);\n        this.dom.session.controls.set(index, session);\n        this.setDomSession(index, session);\n      }\n    }\n    setTimeout(() => {\n      this._triggerFieldPreviewUpdate();\n    }, 0);\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  /**\n   * Listen for when the min_multiple && max_multiple values change\n   * @param event\n   * @private\n   */\n  private _coreEventHandler(event: PopBaseEventInterface){\n    this.log.info(`_coreEventHandler`, event);\n    if( IsValidFieldPatchEvent(this.core, event) ){\n      if( event.source === 'PopMinMaxComponent' ){\n        this.dom.setTimeout('show-entries', () => {\n          this._showEntries();\n        }, 250);\n      }\n    }\n  }\n\n\n  /**\n   * Produce a list of the entry values for this field\n   * @private\n   */\n  private _showEntries(){\n    this.dom.state.pending = true;\n    this._setValueEntries().then((entries: FieldEntry[]) => {\n      this._setEntrySessionControls(entries).then(() => {\n        this._setEntries().then(() => {\n          this.dom.state.pending = false;\n          setTimeout(() => {\n            this._triggerFieldPreviewUpdate();\n          }, 0);\n        });\n      });\n    });\n  }\n\n\n  /**\n   * Ensure that the database records match the min/max settings\n   * This will remove any excess records in the database that exceed the multiple_min\n   * This will create records for an entries that are needed in the database\n   * @param patch\n   * @private\n   */\n  private _setValueEntries(): Promise<FieldEntry[]>{\n    return new Promise<FieldEntry[]>((resolve) => {\n      const storedEntries = JSON.parse(JSON.stringify(this.asset.field.entries));\n      const excess = storedEntries.splice(this.asset.field.multiple_min);\n      let index = 0;\n\n      const needed = [];\n      while( index < this.asset.field.multiple_min ){\n        const existing = index in storedEntries ? storedEntries[ index ] : null;\n        if( !existing ) needed.push(index);\n        index++;\n      }\n      const requests = []; // contains all the create/remove api/requests\n      // delete any excess entries from database\n      excess.map((entry) => {\n        requests.push(this.srv.request.doDelete(`${this.asset.basePath}/${entry.id}`));\n      });\n      // create any needed entries in database\n      needed.map((sessionIndex: number) => {\n        const session = this.dom.session.controls.get(sessionIndex);\n        requests.push(this.srv.request.doPost(`${this.asset.basePath}`, {\n          name: session ? session.display.value : null,\n          type: session ? session.type.value : this.asset.type in this.asset.typeOption ? this.asset.typeOption[ this.asset.type ].defaultValue : 'n/a'\n        }, 1, false));\n      });\n\n      if( requests.length ){ // need to update the data base to match min/max settings\n        this._makeApiRequests(requests).then((serverEntries: FieldEntry[]) => {\n\n          return resolve(serverEntries);\n        });\n      }else{ // stored entries already match min/max settings\n        return resolve(storedEntries);\n      }\n    });\n  }\n\n\n  /**\n   * Will make all of the needed api requests\n   * @param requests\n   * @private\n   */\n  private _makeApiRequests(requests: Observable<any>[]): Promise<FieldEntry[]>{\n    return new Promise<FieldEntry[]>((resolve) => {\n      forkJoin(requests).subscribe(() => {\n        this.srv.request.doGet(this.asset.basePath).subscribe((res) => {\n          res = res.data ? res.data : res;\n          this.asset.field.entries = IsArray(res, true) ? <FieldEntry[]>res : [];\n          this.core.entity.entries = JSON.parse(JSON.stringify(this.asset.field.entries))\n          resolve(res);\n        });\n      }, (err) => {\n        PopLog.error(this.name, `_makeApiRequests`, GetHttpErrorMsg(err));\n        resolve([]);\n      });\n    });\n  }\n\n\n  /**\n   * Store a set of controls that can store values as the user changes the settings\n   * @private\n   */\n  private _setEntrySessionControls(entries: FieldEntry[]): Promise<boolean>{\n    return new Promise((resolve) => {\n      let index = 0;\n      while( index < this.asset.field.multiple_min ){\n        const entry = index in entries ? entries[ index ] : null;\n        const session = this.dom.session.controls.has(index) ? this.dom.session.controls.get(index) : {\n          id: entry ? entry.id : null,\n          type: this._getTypeConfig(),\n          display: this._getDisplayConfig(),\n          increment: index + 1,\n        };\n        this._updateSessionControl(index, session, entry);\n        index++;\n      }\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * Update the entry config to use the stored record, and update the sessions for it\n   * @param index\n   * @param session\n   * @param entry\n   * @private\n   */\n  private _updateSessionControl(index: number, session: FieldEntrySession, entry: FieldEntry = null){\n    session.increment = index + 1;\n    session.id = entry ? entry.id : null;\n    this._updateEntryTypeSession(session.type, entry);\n    this._updateEntryDisplaySession(session.display, entry);\n    this.dom.session.controls.set(index, session);\n    this.setDomSession(index, session);\n    return session;\n  }\n\n\n  /**\n   * Update the entry type config to use correct value and path\n   * @param config\n   * @param entry\n   * @private\n   */\n  private _updateEntryTypeSession(config: SelectConfig, entry: FieldEntry = null){\n    config.value = entry ? entry.type : this.asset.type in this.asset.typeOption ? this.asset.typeOption[ this.asset.type ].defaultValue : 'n/a';\n    config.control.setValue(config.value, { emitEvent: false });\n    config.patch.path = entry ? `${this.asset.basePath}/${entry.id}` : null;\n  }\n\n\n  /**\n   * Update the entry display config to use correct value and path\n   * @param config\n   * @param entry\n   * @private\n   */\n  private _updateEntryDisplaySession(config: InputConfig, entry: FieldEntry = null){\n    config.value = entry ? entry.name : '';\n    config.control.setValue(config.value, { emitEvent: false });\n    config.patch.path = entry ? `${this.asset.basePath}/${entry.id}` : null;\n  }\n\n\n  /**\n   * Store each entry config in a dom session so that it can be restored when the users is switching tabs\n   * @param index\n   * @param session\n   */\n  private setDomSession(index: number, session: FieldEntrySession){\n    const domStorage = <any>StorageGetter(this.dom.repo, [ 'components', this.name, this.id + '', 'session' ]);\n    if( IsObject(domStorage, [ 'controls' ]) ){\n      const controls = <Map<number, FieldEntrySession>>domStorage.controls;\n      controls.set(index, session);\n    }\n  }\n\n\n  /**\n   * Set entry config objects that will be used in the html template\n   * @private\n   */\n  private _setEntries(): Promise<boolean>{\n    return new Promise<boolean>((resolve) => {\n      this.ui.entries = [];\n      if( this.dom.session.controls ){\n        let index = 0;\n        while( index < this.asset.field.multiple_min ){\n          this.ui.entries.push(this.dom.session.controls.get(index));\n          index++;\n        }\n      }\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * Manage the type of each entry\n   * @param ind\n   * @private\n   */\n  private _getTypeConfig(){\n    let disabled = false;\n    let options = this.asset.type in this.asset.typeOption ? this.asset.typeOption[ this.asset.type ].options : [];\n    if( !IsArray(options, true) ){\n      options = [ { value: 'n/a', name: 'N/A' } ];\n      disabled = true;\n    }\n    return new SelectConfig({\n      label: 'Type',\n      options: { values: options },\n      disabled: disabled,\n      patch: {\n        field: 'type',\n        path: null,\n      }\n    });\n  }\n\n\n  /**\n   * Manage the display of each entry\n   * @param index\n   * @private\n   */\n  private _getDisplayConfig(){\n    return new InputConfig({\n      label: 'Display Name',\n      patch: {\n        field: 'name',\n        path: null\n      }\n    });\n  }\n\n\n  private _triggerFieldPreviewUpdate(){\n    this.core.channel.next({ source: this.name, target: 'PopEntityFieldPreviewComponent', type: 'component', name: 'update' });\n  }\n}\n\n\n// export interface FieldEntrySession {\n//   id: number;\n//   type: SelectConfig;\n//   display: InputConfig;\n//   increment: number;\n// }\n","import { Component, Input, OnInit } from '@angular/core';\nimport { FieldParamInterface } from '../../../../../../pop-common.model';\n\n@Component({\n  selector: 'lib-field-label-param',\n  template: `\n    <div class=\"field-builder-param-container\">\n      <div class=\"field-builder-param-title-container mat-h2\">\n        <div class=\"field-builder-param-title\">{{config.name}}</div>\n      </div>\n    </div>`,\n})\nexport class FieldLabelParamComponent implements OnInit {\n  @Input() config: FieldParamInterface;\n\n\n  /**\n   * This component expects config to be a Label config\n   */\n  ngOnInit(){\n\n  }\n}\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { FieldParamInterface, PopBaseEventInterface } from '../../../../../../pop-common.model';\nimport { TextareaConfig } from '../../../../../base/pop-field-item/pop-textarea/textarea-config.model';\nimport { IsDefined } from '../../../../../../pop-common-utility';\n\n\n@Component({\n  selector: 'lib-field-textarea-param',\n  template: `\n    <lib-pop-textarea (events)=\"events.emit($event);\" [config]=param></lib-pop-textarea>`,\n})\nexport class FieldTextareaParamComponent implements OnInit {\n  @Input() config: FieldParamInterface;\n  @Output() events: EventEmitter<PopBaseEventInterface> = new EventEmitter<PopBaseEventInterface>();\n\n  param: TextareaConfig;\n\n\n  ngOnInit(){\n    this.param = new TextareaConfig({\n      name: this.config.name,\n      label: this.config.label,\n      column: this.config.column,\n      value: IsDefined(this.config.value) ? this.config.value : this.config.defaultValue,\n      height: 70,\n      facade: this.config.facade,\n      patch: this.config.patch,\n      metadata: this.config.metadata ? this.config.metadata : {}\n    });\n  }\n}\n","import { ChangeDetectorRef, Component, EventEmitter, Input, OnDestroy, OnInit, Output } from '@angular/core';\nimport { PopCommonService } from '../../../../../../services/pop-common.service';\nimport { FieldParamInterface, PopBaseEventInterface } from '../../../../../../pop-common.model';\nimport { RadioConfig } from '../../../../../base/pop-field-item/pop-radio/radio-config.model';\n\n\n@Component({\n  selector: 'lib-field-radio-param',\n  template: `<lib-pop-radio (events)=\"events.emit($event);\" [config]=param></lib-pop-radio>`,\n})\nexport class FieldRadioParamComponent implements OnInit, OnDestroy {\n  @Input() config: FieldParamInterface;\n  @Output() events: EventEmitter<PopBaseEventInterface> = new EventEmitter<PopBaseEventInterface>();\n\n  param: RadioConfig;\n\n\n  constructor(private commonRepo: PopCommonService,\n              private changeDetectorRef: ChangeDetectorRef){\n  }\n\n\n  ngOnInit(){\n    this.param = new RadioConfig({\n      label: (this.config.label ? this.config.label: this.config.name),\n      name: this.config.name,\n      layout: 'row',\n      value: this.config.value ? this.config.value: this.config.defaultValue,\n      patch: this.config.patch,\n      options: this.config.options,\n      facade: this.config.facade,\n      metadata: this.config.metadata ? this.config.metadata : {}\n    });\n  }\n\n\n  ngOnDestroy(){\n  }\n\n}\n","import { Component, EventEmitter, HostBinding, Input, OnInit, Output } from '@angular/core';\nimport { FieldParamInterface, PopBaseEventInterface } from '../../../../../../pop-common.model';\nimport { SelectConfig } from '../../../../../base/pop-field-item/pop-select/select-config.model';\nimport { ConvertArrayToOptionList, IsObject } from '../../../../../../pop-common-utility';\n\n\n@Component( {\n  selector: 'lib-field-select-param',\n  template: `\n    <lib-pop-select *ngIf=\"param\" (events)=\"events.emit($event);\" [config]=param></lib-pop-select>`,\n} )\nexport class FieldSelectParamComponent implements OnInit {\n  @Input() config: FieldParamInterface;\n  @Output() events: EventEmitter<PopBaseEventInterface> = new EventEmitter<PopBaseEventInterface>();\n  @HostBinding( 'class.sw-hidden' ) @Input() hidden = false;\n\n  param: SelectConfig;\n\n\n  ngOnInit(){\n    if( IsObject( this.config, true ) ){\n      this.param = new SelectConfig( {\n        label: ( this.config.label ? this.config.label : this.config.name ),\n        name: this.config.name,\n        value: this.config.value ? this.config.value : this.config.defaultValue,\n        options: {\n          values: IsObject( this.config.options, [ 'values' ] ) ? ConvertArrayToOptionList( this.config.options.values ) : []\n        },\n        facade: this.config.facade,\n        patch: this.config.patch,\n        metadata: this.config.metadata ? this.config.metadata : {}\n      } );\n    }\n    this.hidden = this.param.options.values.length === 0 ? true : false;\n  }\n}\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { FieldParamInterface, PopBaseEventInterface } from '../../../../../../pop-common.model';\nimport { InputConfig } from '../../../../../base/pop-field-item/pop-input/input-config.model';\nimport { Validators } from '@angular/forms';\n\n\n@Component({\n  selector: 'lib-field-input-param',\n  template: `\n    <lib-pop-input (events)=\"events.emit($event);\" [config]=param></lib-pop-input>`,\n})\nexport class FieldInputParamComponent implements OnInit {\n  @Input() config: FieldParamInterface;\n  @Output() events: EventEmitter<PopBaseEventInterface> = new EventEmitter<PopBaseEventInterface>();\n\n  param: InputConfig;\n\n\n  constructor(){\n  }\n\n\n  ngOnInit(){\n    const validators = [];\n    if( this.config.required ) validators.push(Validators.required);\n    this.param = new InputConfig({\n      name: this.config.name,\n      label: this.config.label,\n      value: this.config.value ? this.config.value : this.config.defaultValue,\n      readonly: this.config.readonly,\n      validators: validators,\n      patch: this.config.patch,\n      facade: this.config.facade,\n      metadata: this.config.metadata ? this.config.metadata : {}\n    });\n  }\n}\n","import { Component, EventEmitter, Input, OnDestroy, OnInit, Output } from '@angular/core';\nimport { FieldParamInterface, PopBaseEventInterface } from '../../../../../../pop-common.model';\nimport { NumberConfig } from '../../../../../base/pop-field-item/pop-number/number-config.model';\nimport { IsDefined } from '../../../../../../pop-common-utility';\n\n\n@Component( {\n  selector: 'lib-field-number-param',\n  template: `\n    <lib-pop-number (events)=\"events.emit($event);\" [config]=param></lib-pop-number>`,\n} )\nexport class FieldNumberParamComponent implements OnInit, OnDestroy {\n  @Input() config: FieldParamInterface;\n  @Output() events: EventEmitter<PopBaseEventInterface> = new EventEmitter<PopBaseEventInterface>();\n\n  param: NumberConfig;\n\n\n  constructor(){\n  }\n\n\n  ngOnInit(){\n    const defaultValue = IsDefined( this.config.default_value ) ? +this.config.default_value : 255;\n    const configInterface = <FieldParamInterface>{\n      label: this.config.label,\n      name: this.config.name,\n      value: this.config.value ? this.config.value : this.config.default_value,\n      patch: this.config.patch,\n      facade: this.config.facade,\n      min: 1,\n      max: defaultValue,\n      metadata: this.config.metadata ? this.config.metadata : {}\n    };\n    if( this.config.name === 'maxlength' ){\n      configInterface.helpText = `Limit: ${defaultValue}`;\n    }\n\n    this.param = new NumberConfig( configInterface );\n  }\n\n\n  ngOnDestroy(){\n  }\n\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit, ViewChild, ViewContainerRef } from '@angular/core';\nimport { CdkDragDrop, moveItemInArray } from '@angular/cdk/drag-drop';\nimport { PopExtendDynamicComponent } from '../../../../../pop-extend-dynamic.component';\nimport { PopEntityService } from '../../../services/pop-entity.service';\nimport { PopFieldEditorService } from '../../pop-entity-field-editor.service';\nimport { PopRequestService } from '../../../../../services/pop-request.service';\nimport { FieldLabelParamComponent } from './params/field-label-param.component';\nimport { FieldTextareaParamComponent } from './params/field-textarea-param.component';\nimport { FieldRadioParamComponent } from './params/field-radio-param.component';\nimport { FieldSwitchParamComponent } from './params/field-switch-param.component';\nimport { FieldSelectParamComponent } from './params/field-select-param.component';\nimport { FieldInputParamComponent } from './params/field-input-param.component';\nimport {\n  CoreConfig,\n  Dictionary,\n  DynamicComponentInterface,\n  FieldConfig,\n  FieldInterface,\n  PopBaseEventInterface,\n  PopLog,\n  ServiceInjector\n} from '../../../../../pop-common.model';\nimport { InputConfig } from '../../../../base/pop-field-item/pop-input/input-config.model';\nimport { CheckboxConfig } from '../../../../base/pop-field-item/pop-checkbox/checkbox-config.model';\nimport { PopDomService } from '../../../../../services/pop-dom.service';\nimport {\n  CleanObject,\n  DynamicSort,\n  IsArray,\n  IsDefined,\n  IsObject,\n  IsObjectThrowError, IsString,\n  SnakeToPascal,\n  TitleCase\n} from '../../../../../pop-common-utility';\nimport { FieldItemView, IsValidFieldPatchEvent } from '../../../pop-entity-utility';\nimport { Validators } from '@angular/forms';\nimport { FieldNumberParamComponent } from './params/field-number-param.component';\nimport { EntitySchemeSectionInterface } from '../../../pop-entity-scheme/pop-entity-scheme.model';\n\n\n@Component( {\n  selector: 'lib-field-builder-items-params',\n  templateUrl: './pop-entity-field-item-params.component.html',\n  styleUrls: [ './pop-entity-field-item-params.component.scss' ],\n} )\nexport class PopEntityFieldItemParamsComponent extends PopExtendDynamicComponent implements OnInit, OnDestroy {\n  @Input() field: FieldInterface;\n  @Input() scheme: EntitySchemeSectionInterface = null;\n  @ViewChild( 'container', { read: ViewContainerRef, static: true } ) private container;\n  public name = 'PopEntityFieldItemParamsComponent';\n\n  protected asset = {\n    field: <FieldConfig>undefined,\n    viewParams: <Dictionary<any>>undefined,\n    viewOptions: <Dictionary<any>>undefined,\n    viewTemplate: <Dictionary<any>>undefined,\n  };\n\n  protected srv = {\n    entity: <PopEntityService>ServiceInjector.get( PopEntityService ),\n    field: <PopFieldEditorService>undefined,\n    request: <PopRequestService>ServiceInjector.get( PopRequestService ),\n  };\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService,\n    protected _fieldRepo: PopFieldEditorService,\n  ){\n    super();\n\n    /**\n     * This should transformValue and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n        // #1: Enforce a CoreConfig\n        this.core = IsObjectThrowError( this.core, true, `${this.name}:configureDom: - this.core` ) ? this.core : null;\n        this.field = IsObjectThrowError( this.core.entity, true, `` ) ? <FieldInterface>this.core.entity : null;\n        // Set the outer height boundary of the component\n        this._setHeight();\n\n\n        // Set the template container for the field item list\n        this.template.attach( 'container' );\n\n        // Set event Handlers\n        this.dom.handler.core = ( core: CoreConfig, event: PopBaseEventInterface ) => this.coreEventHandler( event );\n        this.dom.handler.bubble = ( core: CoreConfig, event: PopBaseEventInterface ) => this.onBubbleEvent( event );\n\n        this.dom.state.showOptions = false;\n\n        this.asset.viewParams = this.srv.field.getViewParams();\n        this.asset.viewOptions = this.srv.field.getViewOptions();\n\n\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * We expect the core to represent a field\n   * This component allows the user to configure the settings of the specific field attribute item\n   * The FieldBuilderItemsComponent is responsible to communicate which field attribute item is active\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * This handler handles any events that come up from the settings fields\n   * @param event\n   */\n  onBubbleEvent( event: PopBaseEventInterface ){\n    PopLog.event( this.name, `onBubbleEvent`, event );\n    if( event.type === 'field' && event.name === 'patch' && event.success ){\n      if( IsDefined( event.config.name ) ){\n        const field = this.dom.active.item;\n        const value = event.config.control.value;\n        if( event.config.name === 'active' ){\n          field.active = +value;\n        }else if( IsObject( event.config.metadata, [ 'session' ] ) ){\n          if( IsArray( event.config.metadata.session ) ){\n            event.config.metadata.session.map( ( storage ) => {\n              if( IsObject( storage ) ){\n                storage[ event.config.name ] = value;\n              }\n            } );\n          }else if( IsObject( event.config.metadata.session ) ){\n            event.config.metadata.session[ event.config.name ] = value;\n          }\n        }\n      }\n      this.dom.setTimeout( 'update-preview', () => {\n        this.core.channel.next( { source: this.name, type: 'component', name: 'update', target: 'PopEntityFieldPreviewComponent' } );\n      }, 250 );\n    }\n  }\n\n\n  /**\n   * This is action that initiates setting up the preview\n   */\n  setActiveFieldItem(): void{\n    if( this.dom.active.item ){\n      this._setFieldItemOptions();\n      this._setFieldItemParams();\n    }\n  }\n\n\n  /**\n   * This is action that initiates setting up the preview\n   */\n  setLabelSettings(): void{\n    this.dom.active.item = null;\n    this.dom.state.showOptions = false;\n    this._configureLabelList().then( ( paramComponentList: DynamicComponentInterface[] ) => {\n      this.template.render( paramComponentList, [], true );\n    } );\n  }\n\n\n  /**\n   * The user can add entries in to the options that this field should use\n   */\n  addFieldItemOption(): void{\n    this.dom.active.options.push( {\n      active: new CheckboxConfig( {\n        label: null,\n        value: 1,\n        bubble: true,\n      } ),\n      name: new InputConfig( {\n        label: null,\n        value: '',\n        pattern: 'AlphaNumeric',\n        bubble: true,\n        maxlength: 128,\n        minimal: true,\n      } ),\n      value: new InputConfig( {\n        label: null,\n        value: '',\n        pattern: 'AlphaNumericNoSpace',\n        bubble: true,\n        maxlength: 128,\n        minimal: true,\n      } ),\n      sort: new InputConfig( {\n        label: null,\n        minimal: true,\n        value: this.dom.active.options.length,\n        bubble: true,\n      } ),\n    } );\n  }\n\n\n  /**\n   * The user can remove an existing option that this field is using\n   * @param index\n   */\n  removeFieldItemOption( index: number ): void{\n    if( index in this.dom.active.options ){\n      this.dom.active.options.splice( index, 1 );\n      this.dom.active.options.map( ( option, i ) => {\n        option.sort.control.setValue( i );\n      } );\n    }\n    this.triggerSaveFieldOptions( <PopBaseEventInterface>{ name: 'onChange' } );\n  }\n\n\n  /**\n   * This will allow the user to make consecutive changes with minimal api calls\n   * @param event\n   */\n  triggerSaveFieldOptions( event: PopBaseEventInterface ): void{\n    if( event && ( event.name === 'onKeyUp' || event.name === 'onChange' ) ){\n      if( this.dom.delay.saveFieldOptions ){\n        clearTimeout( this.dom.delay.saveFieldOptions );\n      }\n      this.dom.delay.saveFieldOptions = setTimeout( () => {\n        this.saveFieldItemOptions();\n      }, 500 );\n    }\n  }\n\n\n  /**\n   * Reset the option values with the root source\n   * @param event\n   */\n  onOptionSourceReset( event: PopBaseEventInterface ): void{\n    const field = this.dom.active.item;\n    if( IsArray( field.source, true ) ){\n      field.options.values = [];\n      field.source.map( ( item, index ) => {\n        field.options.values.push( {\n          active: item.active ? +item.active : 1,\n          name: item.name ? item.name : item.label ? item.label : 'Item ' + ( index + 1 ),\n          value: item.id ? item.id : item.value ? item.value : ( index + 1 ),\n          sort: index\n        } );\n      } );\n      this._setFieldItemOptions();\n      this.triggerSaveFieldOptions( <PopBaseEventInterface>{ name: 'onChange' } );\n    }\n  }\n\n\n  /**\n   * This will store the option changes that the user makes\n   */\n  saveFieldItemOptions(): void{\n    // #1: Create the payload structure\n    this.dom.state.saving = true;\n    const field = this.dom.active.item;\n    const json = JSON.parse( JSON.stringify( field.options ) );\n    json.values = [];\n    let opt;\n    this.dom.active.options.map( ( option ) => {\n      opt = {};\n      Object.keys( option ).map( ( key ) => {\n        opt[ key ] = option[ key ].control.value;\n      } );\n      json.values.push( opt );\n    } );\n\n    const ignore401 = null;\n    const version = 1;\n    const patch = {\n      'options': json\n    };\n    // #2: Clear/Store the subscriber so that it can be ignored if needed\n    this.dom.setSubscriber( 'options-api-call', this.srv.request.doPatch( `/fields/customs/${field.id}`, patch, version, ignore401 ).subscribe(\n      res => {\n        this.dom.active.item.options.values = json.values;\n        this.dom.state.saving = false;\n        // #3: Inform the FieldBuilderPreviewComponent to update the new settings\n        this.core.channel.next( { source: this.name, type: 'component', name: 'update', target: 'PopEntityFieldPreviewComponent' } );\n        if( this.dom.subscriber.api ) this.dom.subscriber.api.unsubscribe();\n      },\n      err => {\n        this.dom.state.saving = false;\n      }\n    ) );\n  }\n\n\n  /**\n   * This allows the user to sort the list of options that this field uses\n   * @param event\n   */\n  onOptionSortDrop( event: CdkDragDrop<string[]> ){\n    moveItemInArray( this.dom.active.options, event.previousIndex, event.currentIndex );\n    this.triggerSaveFieldOptions( <PopBaseEventInterface>{ name: 'onChange' } );\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    this.template.destroy();\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  /**\n   * This handler is for managing any cross-communication between components on the core channel\n   * @param event\n   */\n  private coreEventHandler( event: PopBaseEventInterface ){\n    this.log.event( `coreEventHandler`, event );\n    if( event.type === 'component' ){\n      if( event.source === 'PopEntityFieldItemsComponent' ){\n        if( event.name === 'active-item' ){\n          // #1: An event has triggered that the view needs to change the active item,  debounce this trigger so that this action does not get called on top of itself\n          this.dom.setTimeout( 'reset-view', () => {\n            this.dom.loading();\n            // #2: Transfer in the data package from the event\n            this.dom.active.item = event.data;\n            // this.asset.viewParams = event.data.config;\n            // this.asset.model = event.data.model;\n            // #3: Render the Active Item settings that are available\n            this.setActiveFieldItem();\n            setTimeout( () => {\n              this.dom.ready();\n            }, 0 );\n          }, 100 );\n        }else if( event.name === 'label-settings' ){\n          // #1: An event has triggered that the view needs to change the active item,  debounce this trigger so that this action does not get called on top of itself\n          if( this.dom.delay.reset ) clearTimeout( this.dom.delay.reset );\n          this.dom.delay.reset = setTimeout( () => {\n            this.dom.loading();\n            this.setLabelSettings();\n            setTimeout( () => {\n              this.dom.ready();\n            }, 0 );\n          }, 100 );\n        }\n      }\n    }else if( IsValidFieldPatchEvent( this.core, event ) ){\n      this._setHeight();\n    }\n  }\n\n\n  /**\n   * This handles rendering the dynamic list of  param settings into the view\n   * @param form\n   * @param fieldItem\n   * @param params\n   */\n  private _setFieldItemParams(){\n    if( IsObject( this.dom.active.item, true ) ){\n      this._configureParamList().then( ( paramComponentList: DynamicComponentInterface[] ) => {\n        this.template.render( paramComponentList, [], true );\n      } );\n    }\n  }\n\n\n  /**\n   * This will return a list of all the inputs that the settings require\n   * @param fieldItem\n   * @param params\n   */\n  _configureParamList(): Promise<DynamicComponentInterface[]>{\n    return new Promise( ( resolve ) => {\n\n      const paramComponentList: DynamicComponentInterface[] = [];\n      let component;\n      let configInterface;\n      const fieldItem = this.dom.active.item;\n      const view = fieldItem.view;\n      const rules = fieldItem.rules.sort( DynamicSort( 'name' ) ).map( ( rule ) => CleanObject( rule ) );\n      const allowed = this.asset.viewParams[ view.name ];\n      const group = this.field.fieldgroup.name;\n      const itemCustomSettings = fieldItem.custom_setting;\n      // ToDo: Put the custom Settings into the paramList\n      // console.log('itemCustomSettings', itemCustomSettings);\n\n      const isScheme = IsObject( this.scheme, [ 'id' ] ) ? true : false;\n\n      this.log.config( `activeItem`, {\n        item: fieldItem,\n        rules: rules,\n        group: group,\n        allowed: allowed,\n        settings: itemCustomSettings,\n        view: view\n      } );\n\n      if( this.dom.active.item.name !== 'value' ){\n        let labelValue = fieldItem.label;\n        if( isScheme ){\n          const mapping = this.srv.field.getSchemeFieldItemMapping( this.scheme, +this.field.id, this.dom.active.item.id );\n          if( IsString( mapping.label, true ) ){\n            labelValue = mapping.label;\n          }\n        }\n        const display = <DynamicComponentInterface>{\n          type: this._getParamComponent( 'display' ),\n          inputs: {\n            config: configInterface = {\n              ...{\n                value: labelValue,\n                defaultValue: '',\n              },\n              ...{\n                label: 'Label',\n                name: 'label',\n                readonly: false,\n                required: true,\n                metadata: {\n                  session: fieldItem\n                },\n                facade: isScheme,\n                patch: {\n                  field: 'label',\n                  path: `fields/customs/${fieldItem.id}`,\n                  callback: isScheme ? async( core: CoreConfig, event: PopBaseEventInterface ) => {\n                    const session = this.srv.field.getSchemeFieldItemMapping( this.scheme, +this.field.id, this.dom.active.item.id );\n                    session.label = event.config.control.value;\n                    await this.srv.field.updateSchemeFieldMapping( this.scheme );\n                    // console.log( 'session', session );\n                    // console.log( 'facade', event.config.name, event.config.control.value );\n                  } : null,\n                }\n              }\n            }\n          }\n        };\n        paramComponentList.push( display );\n      }\n\n      if( group === 'selection' ){\n        const display = <DynamicComponentInterface>{\n          type: this._getParamComponent( 'view' ),\n          inputs: {\n            config: configInterface = {\n              ...{\n                value: view.id,\n                defaultValue: '',\n              },\n              ...{\n                label: 'Template View',\n                name: 'field_view_id',\n                readonly: false,\n                required: true,\n                options: {\n                  defaultValue: 2,\n                  values: [\n                    { value: 2, name: 'Select', sort_order: 0 },\n                    { value: 10, name: 'Radio', sort_order: 1 },\n                  ]\n                },\n                metadata: {\n                  session: fieldItem\n                },\n                patch: {\n                  field: 'field_view_id',\n                  path: `fields/${fieldItem.id}`,\n                  callback: ( core: CoreConfig, event: PopBaseEventInterface ) => {\n                    const session = event.config.metadata.session;\n                    session.view = FieldItemView( event.response.view );\n                  }\n                }\n              }\n            }\n          }\n        };\n        paramComponentList.push( display );\n      }\n\n\n      // if(!this.field.multiple){\n      //   const helpText = <DynamicComponentInterface>{\n      //     type: this._getParamComponent('helpText'),\n      //     inputs: {\n      //       config: configInterface = {\n      //         ...{\n      //           value: fieldItem.helpText ? fieldItem.helpText : null,\n      //           defaultValue: '',\n      //         },\n      //         ...{\n      //           label: 'Help Text',\n      //           name: 'helpText',\n      //           readonly: false,\n      //           metadata: {\n      //             session: fieldItem\n      //           },\n      //           patch: { field: 'helpText', path: `fields/customs/${fieldItem.id}` }\n      //         }\n      //       }\n      //     }\n      //   };\n      //   paramComponentList.push(helpText);\n      // }\n\n      if( view.name in this.asset.viewParams ){\n\n        const ruleSchemeSession = this.srv.field.getSchemeFieldItemSection( this.scheme, +this.field.id, this.dom.active.item.id, 'rule' );\n        rules.map( ( rule ) => {\n//           console.log('rule', rule);\n          let ruleValue = rule.value;\n          if( isScheme ){\n            if( IsDefined( ruleSchemeSession[ rule.name ] ) ){\n              ruleValue = ruleSchemeSession[ rule.name ];\n            }\n          }\n          if( rule.name in allowed ){\n            configInterface = {\n              ...rule,\n              ...{\n                value: ruleValue,\n                name: rule.name,\n                label: TitleCase( SnakeToPascal( rule.name ) ),\n                metadata: { rule: rule },\n                facade: true,\n                patch: {\n                  duration: 0,\n                  field: ``,\n                  path: ``,\n                  callback: async( core: CoreConfig, event: PopBaseEventInterface ) => {\n                    if( IsObject( this.scheme, true ) ){\n                      if( IsObject( ruleSchemeSession ) ){\n                        ruleSchemeSession[ rule.name ] = event.config.control.value;\n                        await this.srv.field.updateSchemeFieldMapping( this.scheme );\n                      }\n                    }else{\n                      this.srv.field.storeFieldItemRule( core, fieldItem, event ).then( () => true );\n                    }\n                  }\n                }\n              }\n            };\n\n            if( IsObject( rule.options, true ) ){\n              configInterface.options = rule.options;\n            }\n            component = <DynamicComponentInterface>{\n              type: this._getParamComponent( rule.name ),\n              inputs: {\n                config: configInterface,\n              }\n            };\n            paramComponentList.push( component );\n          }\n        } );\n      }\n\n\n      if( IsObject( itemCustomSettings, true ) ){\n\n        Object.keys( itemCustomSettings ).map( ( settingName ) => {\n\n            const setting = itemCustomSettings[ settingName ];\n            // console.log('setting', setting);\n            if( setting.type !== 'model' ){\n              paramComponentList.push( this.srv.field.getCustomSettingComponent( this.core, this.core.entity, setting, this.scheme ) );\n            }\n\n        } );\n      }\n\n      resolve( paramComponentList );\n    } );\n  }\n\n\n  /**\n   * This will return a list of all the inputs that the label settings require\n   * @param fieldItem\n   * @param params\n   */\n  _configureLabelList(): Promise<DynamicComponentInterface[]>{\n    return new Promise( ( resolve ) => {\n      // const paramComponentList: DynamicComponentInterface[] = [];\n      //\n      // const values = <DynamicComponentInterface>{\n      //   type: PopEntityFieldLabelComponent,\n      //   inputs: {\n      //     core: this.core\n      //   }\n      // };\n      // paramComponentList.push(values);\n      //\n      //\n      resolve( [] );\n    } );\n  }\n\n\n  private _setHeight(){\n    this.dom.overhead = 125;\n    // this.dom.height.outer = +this.dom.repo.position[ this.position ].height - 121;\n    // const field = <FieldInterface>this.core.entity;\n    // if( false && field.multiple ){\n    //   this.dom.height.outer -= 20;\n    //   this.dom.height.outer -= ( +field.multiple_min * 60 );\n    // } // values box\n    //\n    // if( this.dom.height.outer < 400 ) this.dom.height.outer = 400;\n    // this.dom.height.outer -= 2;\n    this.dom.setHeight( 399, this.dom.overhead );\n  }\n\n\n  /**\n   * Return the the field input component that should be used for the type of setting param;\n   * @param form\n   */\n  private _getParamComponent( form ){\n    switch( form ){\n      case 'label':\n        return FieldLabelParamComponent;\n        break;\n      case 'display':\n      case 'api':\n      case 'sort_top':\n      case 'regex':\n      case 'sort':\n      case 'helpText':\n        return FieldInputParamComponent;\n        break;\n      case 'select':\n      case 'mask':\n      case 'pattern':\n      case 'validation':\n      case 'transformation':\n        return FieldSelectParamComponent;\n        break;\n      case 'hidden':\n      case 'visible':\n      case 'disabled':\n      case 'readonly':\n      case 'required':\n        return FieldSwitchParamComponent;\n        break;\n      case 'layout':\n        return FieldRadioParamComponent;\n        break;\n      case 'minlength':\n      case 'maxlength':\n        return FieldNumberParamComponent;\n      case 'metadata':\n        return FieldTextareaParamComponent;\n        break;\n      case 'view':\n        return FieldRadioParamComponent;\n        break;\n      default:\n        return FieldLabelParamComponent;\n    }\n  }\n\n\n  /**\n   * This will make sure the options will get set up properly if the active items uses them\n   * @param form\n   * @param options\n   * @param params\n   */\n  private _setFieldItemOptions(){\n    this.dom.state.showOptions = false;\n    const field = this.dom.active.item;\n    const form = field.view ? field.view.name : null;\n    if( !form ) PopLog.warn( this.name, `_setFieldItemOptions: Invalid Form`, field );\n\n\n    this.dom.active.options = [];\n    if( form && form in this.asset.viewOptions ){\n\n      // if( field.options.fixed ){\n      //   field.options.enum = true;\n      // }\n\n      if( IsArray( field.source, true ) ){\n        field.options.enum = true;\n        this.dom.state.isOptionSource = true;\n      }\n\n      if( !( IsObject( field.options, [ 'values' ] ) ) && !( field.source ) ){\n        field.options = this.asset.viewOptions[ form ];\n      }\n\n      if( IsObject( field.options, [ 'values' ] ) && Array.isArray( field.options.values ) ){\n        field.options.values.map( ( option, index ) => {\n          option.name = option.name ? String( option.name ) : 'Item ' + ( index + 1 );\n          option.value = option.id ? String( option.id ) : option.value ? String( option.value ) : String( ( index + 1 ) );\n          option.sort = index;\n          if( typeof option.active !== 'boolean' ) option.active = true;\n          this.dom.active.options.push( {\n            active: new CheckboxConfig( {\n              label: null,\n              value: +option.active,\n              bubble: true,\n            } ),\n            name: new InputConfig( {\n              label: null,\n              value: option.name,\n              transformation: 'title',\n              bubble: this.dom.state.isOptionSource ? false : true,\n              pattern: 'AlphaNumeric',\n              validators: [ Validators.required ],\n              maxlength: 32,\n              readonly: this.dom.state.isOptionSource ? true : false,\n            } ),\n            value: new InputConfig( {\n              label: null,\n              value: option.value,\n              bubble: field.options.enum ? false : true,\n              validators: [ Validators.required ],\n              pattern: 'AlphaNumericNoSpace',\n              transformation: 'lower',\n              maxlength: 32,\n              readonly: field.options.enum ? true : false,\n            } ),\n            sort: new InputConfig( {\n              label: null,\n              value: option.sort || 0,\n              bubble: true,\n            } ),\n          } );\n        } );\n        this.dom.state.showOptions = true;\n      }\n    }\n  }\n}\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { FieldParamInterface, PopBaseEventInterface, PopLog } from '../../../../../../pop-common.model';\nimport { SliderConfig, SliderConfigInterface } from '../../../../../base/pop-field-item/pop-slider/pop-slider.model';\n\n\n@Component({\n  selector: 'lib-field-slider-param',\n  template: `\n    <lib-pop-slider (events)=\"events.emit($event);\" [config]=param></lib-pop-slider>\n  `,\n})\nexport class FieldSliderParamComponent implements OnInit {\n  @Input() config: FieldParamInterface;\n  @Output() events: EventEmitter<PopBaseEventInterface> = new EventEmitter<PopBaseEventInterface>();\n  public name = 'FieldSliderParamComponent';\n\n  param: SliderConfig;\n\n\n  /**\n   * This component expects config to be a Label config\n   */\n  ngOnInit(){\n    if( !this.config.value ) this.config.value = this.config.defaultValue;\n    this.param = new SliderConfig(<SliderConfigInterface>{\n      name: this.config.name,\n      label: this.config.label,\n      column: this.config.column,\n      value: this.config.value ? this.config.value : this.config.defaultValue,\n      min: this.config.min ? this.config.min : 1,\n      max: this.config.defaultValue,\n      facade: this.config.facade,\n      patch: this.config.patch,\n      metadata: this.config.metadata ? this.config.metadata : {}\n    });\n    PopLog.init(this.name, `init`, this);\n  }\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { PopFieldEditorService } from '../../pop-entity-field-editor.service';\nimport {\n  CoreConfig,\n  Dictionary, EntityActionInterface, FieldCustomSettingInterface,\n  FieldEntry,\n  FieldInterface,\n  FieldItemOption, KeyMap,\n  PopBaseEventInterface, PopDate,\n  PopLog, PopRequest,\n  ServiceInjector\n} from '../../../../../pop-common.model';\nimport { PopExtendComponent } from '../../../../../pop-extend.component';\nimport { PopDomService } from '../../../../../services/pop-dom.service';\nimport { MinMaxConfig } from '../../../../base/pop-field-item/pop-min-max/min-max.models';\nimport {\n  ArrayMapSetter,\n  DeepCopy,\n  GetHttpErrorMsg, GetHttpObjectResult,\n  IsArray, IsArrayThrowError, IsDefined,\n  IsObject,\n  IsObjectThrowError,\n  IsString, IsUndefined, SnakeToPascal,\n  StorageGetter,\n  TitleCase\n} from '../../../../../pop-common-utility';\nimport { forkJoin, Observable } from 'rxjs';\nimport { SelectConfig } from '../../../../base/pop-field-item/pop-select/select-config.model';\nimport { InputConfig } from '../../../../base/pop-field-item/pop-input/input-config.model';\nimport { PopRequestService } from '../../../../../services/pop-request.service';\nimport { CheckboxConfig } from '../../../../base/pop-field-item/pop-checkbox/checkbox-config.model';\nimport { SwitchConfig } from '../../../../base/pop-field-item/pop-switch/switch-config.model';\nimport { IsValidFieldPatchEvent } from '../../../pop-entity-utility';\nimport { PopConfirmationDialogComponent } from '../../../../base/pop-dialogs/pop-confirmation-dialog/pop-confirmation-dialog.component';\nimport { MatDialog } from '@angular/material/dialog';\nimport { PopEntityActionService } from '../../../services/pop-entity-action.service';\nimport { PopTabMenuService } from '../../../../base/pop-tab-menu/pop-tab-menu.service';\nimport { CdkDragDrop, moveItemInArray } from '@angular/cdk/drag-drop';\nimport { EntitySchemeSectionInterface } from '../../../pop-entity-scheme/pop-entity-scheme.model';\n\n\n@Component( {\n  selector: 'lib-pop-entity-field-entries',\n  templateUrl: './pop-entity-field-entries.component.html',\n  styleUrls: [ './pop-entity-field-entries.component.scss' ]\n} )\nexport class PopEntityFieldEntriesComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() field: FieldInterface;\n  @Input() scheme: EntitySchemeSectionInterface = null;\n  public name = 'PopEntityFieldEntriesComponent';\n\n  protected srv = {\n    action: <PopEntityActionService>ServiceInjector.get( PopEntityActionService ),\n    dialog: <MatDialog>ServiceInjector.get( MatDialog ),\n    field: <PopFieldEditorService>undefined,\n    request: <PopRequestService>ServiceInjector.get( PopRequestService ),\n    tab: <PopTabMenuService>ServiceInjector.get( PopTabMenuService ),\n  };\n\n  protected asset = {\n    basePath: <string>undefined,\n    entries: <FieldEntry[]>[],\n    entriesMap: <KeyMap<number>>{},\n    schemeFieldStorage: <any>undefined,\n    type: <string>undefined,\n    typeOption: <Dictionary<{ defaultValue: string | number, options: FieldItemOption[] }>>undefined,\n  };\n\n  public ui = {\n    label: <InputConfig>undefined,\n    minMax: <MinMaxConfig>undefined,\n    editLabel: <SwitchConfig>undefined,\n    uniqueLabel: <CheckboxConfig>undefined,\n    customLabel: <CheckboxConfig>undefined,\n    entries: <FieldEntrySession[]>[],\n    map: < Dictionary<any>>{},\n    entryLimit: 4\n  };\n\n\n  protected extendServiceContainer(){\n    this.srv.field = this._fieldRepo;\n    // delete this._fieldRepo;\n  }\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService,\n    protected _fieldRepo: PopFieldEditorService,\n    protected _tabRepo: PopTabMenuService\n  ){\n    super();\n\n    this.extendServiceContainer();\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n        this.core = IsObjectThrowError( this.core, true, `${this.name}:configureDom: - this.core` ) ? this.core : null;\n        if( !this.field ) this.field = IsObjectThrowError( this.core, [ 'entity' ], `Invalid Core` ) && IsObjectThrowError( this.core.entity, [ 'id', 'fieldgroup' ], `Invalid Field` ) ? <FieldInterface>this.core.entity : null;\n        this.asset.type = this.field.fieldgroup.name; // the field group name , ie.. address, phone\n        this.asset.typeOption = this.srv.field.getDefaultLabelTypeOptions(); // the select options that belong to the types\n        this.asset.basePath = `fields/${this.field.id}/entries`; // api endpoint to hit for field entries\n\n        this._setCustomTraits();\n\n        this.ui.entries = IsArrayThrowError( this.core.entity.entries, false, `Invalid Field Entries` ) ? this.core.entity.entries : null;\n\n\n        this.dom.session.controls = new Map(); // store the entry configs so that changes are not lost when the tabs are changed\n\n        this._buildCustomSettings();\n\n\n        return resolve( true );\n      } );\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n\n        if( IsObject( this.scheme, true ) ){\n          this.asset.schemeFieldStorage = this.srv.field.getSchemeFieldSetting( this.scheme, +this.field.id );\n          this.dom.state.hasScheme = IsObject( this.scheme, true ) ? true : false;\n          const primary = this.srv.field.getSchemePrimary( this.scheme );\n\n          this.dom.state.isPrimary = this.field.fieldgroup.name in primary && +primary[ this.field.fieldgroup.name ] == this.field.id ? true : false;\n        }else{\n          this.dom.state.hasScheme = false;\n          this.dom.state.isPrimary = false;\n        }\n        await this._showEntries();\n\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * This allows the user to sort the list of options that this field uses\n   * @param event\n   */\n  onOptionSortDrop( event: CdkDragDrop<string[]> ){\n    moveItemInArray( this.ui.entries, event.previousIndex, event.currentIndex );\n    this.dom.setTimeout( `update-sort-order`, async() => {\n      const requests = [];\n      this.ui.entries.map( ( entry: FieldEntrySession, index ) => {\n        requests.push( PopRequest.doPatch( `${this.asset.basePath}/${entry.id}`, { sort_order: index, orphaned: -1 }, 1, false ) );\n        const session = this.field.entries.find( ( e: FieldEntry ) => +e.id === +entry.id );\n        if( IsObject( session, true ) ){\n          session.sort_order = index;\n        }\n        entry.increment = index + 1;\n      } );\n      if( requests.length ){\n        this.srv.tab.showAsLoading( true );\n        this.dom.setSubscriber( `update-sort-order`, forkJoin( requests ).subscribe( ( res ) => {\n          this.srv.field.triggerFieldPreviewUpdate();\n          this.srv.tab.showAsLoading( false );\n        }, ( err ) => {\n          this.dom.setError( err, true );\n          this.srv.tab.showAsLoading( false );\n        } ) );\n      }\n    }, 0 );\n\n    // this.triggerSaveFieldOptions( <PopBaseEventInterface>{ name: 'onChange' } );\n  }\n\n\n  /**\n   * When the type of an entry is changed in the database, make sure the changes is updated locally\n   * This is will  be removed since we don't want to do types\n   * @param index\n   * @param event\n   */\n  onEntryTypeChange( index: number, event: PopBaseEventInterface ){\n    if( IsValidFieldPatchEvent( this.core, event ) ){\n      const config = this.ui.entries[ index ];\n      const entry = this.field.entries[ index ];\n      const session = this.dom.session.controls.get( index );\n      if( entry && session ){\n        entry.type = config.type.control.value;\n        this._updateEntryTypeSession( session.type, entry );\n        this.dom.session.controls.set( index, session );\n        this.setDomSession( index, session );\n      }\n      setTimeout( () => {\n        this.srv.field.triggerFieldPreviewUpdate();\n      }, 0 );\n    }\n  }\n\n\n  /**\n   * When the display/label of an entry is changed in the database, make sure the changes is updated locally\n   * @param index\n   * @param event\n   */\n  onEntryDisplayChange( index: number, event: PopBaseEventInterface ){\n    if( index === 0 ) this.ui.label.control.setValue( event.config.control.value, { emitEvent: false } );\n    if( IsValidFieldPatchEvent( this.core, event ) ){\n      // PopTemplate.buffer();\n      const entry = this.field.entries[ index ];\n      const session = this.dom.session.controls.get( index );\n      if( entry && session ){\n        entry.name = event.config.control.value;\n        this._updateEntryDisplaySession( session.display, entry );\n        this.dom.session.controls.set( index, session );\n        this.setDomSession( index, session );\n      }\n    }\n    setTimeout( () => {\n      this.srv.field.triggerFieldPreviewUpdate();\n    }, 0 );\n  }\n\n\n  /**\n   * When the display/label of an entry is changed in the database, make sure the changes is updated locally\n   * @param index\n   * @param event\n   */\n  onEntryActiveChange( index: number, event: PopBaseEventInterface ){\n    if( IsObject( this.scheme, [ 'id' ] ) ){\n      // here\n    }else{\n      const entry = this.field.entries[ index ];\n      if( entry ){\n        if( event.config.control.value ){\n          entry.orphaned = false;\n          entry.orphaned_at = null;\n        }else{\n          entry.orphaned = true;\n          entry.orphaned_at = PopDate.toIso( new Date() );\n        }\n      }\n      setTimeout( () => {\n        this._handleMultipleEntries();\n        this.srv.field.triggerFieldPreviewUpdate();\n      }, 0 );\n      this.log.info( `onEntryActiveChange`, event );\n    }\n  }\n\n\n  onEntryTraitChange( index: number, trait: { name: string, selected: boolean } ){\n    this.dom.setTimeout( `entry-trait-${index}`, async() => {\n      this.ui.entries.map( ( entry: FieldEntrySession, entryIndex: number ) => {\n        const entryTrait = entry.traits.find( ( t ) => t.name === trait.name );\n        if( IsObject( entryTrait, true ) ){\n          if( +entryIndex !== +index ){\n            entryTrait.selected = false;\n          }else{\n            entryTrait.selected = true;\n            if( IsObject( this.scheme, [ 'mapping' ] ) ){\n              if( IsObject( this.asset.schemeFieldStorage, [ 'trait_entry' ] ) ){\n                this.asset.schemeFieldStorage.trait_entry[ entryTrait.name ] = entry.id;\n              }\n            }\n          }\n        }\n      } );\n\n      await this.srv.field.updateSchemeFieldMapping( this.scheme );\n\n      this.log.info( `onEntryTraitChange` );\n    } );\n\n  }\n\n\n  private _handleMultipleEntries(){\n    this.log.info( `_handleMultipleEntries` );\n    this.dom.session.multipleActiveEntries = this._isMultipleActiveEntries();\n    if( !( this.dom.session.multipleActiveEntries ) ){\n      this._disableActiveEntries();\n    }else{\n      this._enableActiveEntries();\n    }\n  }\n\n\n  /**\n   * A User will be able to add as many labels as they like\n   */\n  onAddEntryValue(){\n    this.dom.setTimeout( `add-entry`, async() => {\n      const action = <EntityActionInterface>{\n        name: 'entry',\n        header: 'Add Entry',\n        facade: true,\n        // component: {\n        //   type: DemoOneComponent\n        // },\n        fields: {\n          name: {\n            form: 'input',\n            pattern: 'Default',\n            name: 'name',\n            hint: true,\n            label: 'Name',\n            required: true,\n            bubble: false,\n            noInitialValue: true,\n            transformation: 'toTitleCase',\n            maxlength: 32,\n            prevent: this.ui.entries.map( ( entry: FieldEntrySession ) => {\n              return StorageGetter( entry, [ 'display', 'control', 'value' ], 'Undefined' );\n            } )\n          }\n        },\n        // onEvent: (core: CoreConfig, event: PopBaseEventInterface):Promise<boolean>=>{\n        //   return new Promise<boolean>((onEventResolver)=>{\n        //     return onEventResolver(true);\n        //   });\n        // },\n        bubbleAll: true,\n        blockEntity: true\n      };\n      const res = await this.srv.action.do( this.core, action );\n      if( IsObject( res, [ 'name' ] ) ){\n        await this._addEntry( res.name );\n      }\n    }, 0 );\n\n  }\n\n\n  private _addEntry( name?: string ): Promise<boolean>{\n    return new Promise<boolean>( ( resolve ) => {\n      this.srv.tab.showAsLoading( true );\n      this.dom.state.pending = true;\n      const sessionIndex = this.field.entries.filter( ( x ) => x.type !== 'custom' ).length;\n      const increment = sessionIndex + 1;\n      const session = this.dom.session.controls.get( sessionIndex );\n      if( !name ){\n        name = session ? session.display.value : TitleCase( `${( this.field.name ? this.field.name : this.asset.type )} ${increment}` )\n      }\n      const entry = {\n        name: name,\n        type: this.asset.typeOption.defaultValue,\n        orphaned_at: null,\n        sort_order: sessionIndex\n      };\n      this._makeApiRequests( [\n        this.srv.request.doPost( `${this.asset.basePath}`, entry, 1, false ),\n        this.srv.request.doPatch( `fields/${this.field.id}`, { multiple_min: increment, multiple_max: increment }, 1, false ),\n      ] ).then( ( res ) => {\n        this._setEntrySessionControls( this.field.entries.filter( ( x ) => x.type !== 'custom' ) ).then( ( entries: FieldEntry[] ) => {\n          this._setEntries( entries ).then( () => {\n            this.dom.state.pending = false;\n            setTimeout( () => {\n              // For now I want the amount of field entries to dictate what min/max should be\n              this.field.multiple_min = increment;\n              this.field.multiple_max = increment;\n\n              this.ui.minMax.minConfig.max = this.field.entries.length;\n              this.ui.minMax.minConfig.min = this.field.entries.length;\n              this.ui.minMax.minConfig.control.setValue( this.field.entries.length );\n\n\n              this.ui.minMax.maxConfig.max = this.field.entries.length;\n              this.ui.minMax.maxConfig.min = this.field.entries.length;\n              this.ui.minMax.maxConfig.control.setValue( this.field.entries.length );\n\n              // this.ui.minMax.triggerOnChange();\n              this.srv.field.triggerFieldPreviewUpdate();\n              this.srv.tab.showAsLoading( false );\n              return resolve( true );\n            }, 0 );\n          } );\n        } );\n      }, ( err ) => {\n        this.dom.setError( err, true );\n        this.srv.tab.showAsLoading( false );\n        return resolve( false );\n      } );\n    } );\n  }\n\n\n  private _collectNewEntryName(){\n    const fields = {\n      client_id: {\n        form: 'select',\n        name: 'client_id',\n        label: 'Client',\n        bubble: true,\n        disabled: false,\n        required: true,\n        options: {\n          resource: 'clients',\n          child: 'account_id'\n        },\n      },\n    };\n\n    const actionConfig: EntityActionInterface = {\n      header: 'Add New Field Entry',\n      name: 'campaign',\n      fields: {\n        ...fields\n      },\n      submitText: 'Submit',\n      postUrl: null,\n      blockEntity: true, // implies that fields should not be inherited from the original field.ts file\n    };\n\n    this.dom.setTimeout( `collect-name`, async() => {\n      const setCampaign = await this.srv.action.do( this.core, actionConfig );\n      this.log.info( 'setCampaign', setCampaign );\n\n      this.srv.tab.showAsLoading( false );\n    }, 0 );\n  }\n\n\n  /**\n   * A User will be able to remove labels as they like\n   */\n  onRemoveEntryValue( entry: FieldEntrySession ){\n    if( entry && entry.id ){\n      this.srv.dialog.open( PopConfirmationDialogComponent, {\n        width: '500px',\n        data: {\n          option: null,\n          body: `Deleting ${entry.display.control.value} will result in any collected values on this entry being permanently removed.<br><br>Do you wish to continue?`,\n          align: 'left'\n        }\n      } ).afterClosed().subscribe( res => {\n        if( res && res.confirmed ){\n          // PopTemplate.buffer();\n          this.dom.state.pending = true;\n          const decrement = this.field.entries.length - 1;\n          this.srv.request.doDelete( `${this.asset.basePath}/${entry.id}` );\n          this._makeApiRequests( [\n            this.srv.request.doDelete( `${this.asset.basePath}/${entry.id}` ),\n            this.srv.request.doPatch( `fields/${this.field.id}`, { multiple_min: decrement, multiple_max: decrement }, 1, false ),\n          ] ).then( () => {\n            this._setEntrySessionControls( this.field.entries.filter( ( x ) => x.type !== 'custom' ) ).then( ( entries: FieldEntry[] ) => {\n              this._setEntries( entries ).then( () => {\n                this.dom.state.pending = false;\n                setTimeout( () => {\n                  // For now I want the amount of field entries to dictate what min/max should be\n                  this.field.multiple_min = decrement;\n                  this.field.multiple_max = decrement;\n\n                  this.ui.minMax.minConfig.max = this.field.entries.length;\n                  this.ui.minMax.minConfig.min = this.field.entries.length;\n                  this.ui.minMax.minConfig.control.setValue( this.field.entries.length );\n\n\n                  this.ui.minMax.maxConfig.max = this.field.entries.length;\n                  this.ui.minMax.maxConfig.min = this.field.entries.length;\n                  this.ui.minMax.maxConfig.control.setValue( this.field.entries.length );\n                  // Tmp Block ^\n\n                  this.srv.field.triggerFieldPreviewUpdate();\n                }, 0 );\n              } );\n            } );\n          } );\n        }\n      } );\n\n    }\n  }\n\n\n  onMinMaxSetting( event: PopBaseEventInterface ){\n    if( IsValidFieldPatchEvent( this.core, event ) ){\n      this.srv.field.triggerFieldPreviewUpdate();\n    }\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  private _setCustomTraits(){\n    this.field.trait.map( ( trait: FieldCustomSettingInterface ) => {\n      if( !trait.label ) trait.label = TitleCase( SnakeToPascal( trait.name ) );\n    } );\n  }\n\n\n  /**\n   * Build the configs for the set of custom settings that this component uses\n   * @private\n   */\n  private _buildCustomSettings(){\n\n    this.ui.minMax = new MinMaxConfig(\n      {\n        bubble: true,\n        helpText: 'Set the minimum values that this field should have, the maximum amount of values will be the total entries defined.',\n        label: 'Entry Values',\n        minRequired: true,\n        maxRequired: true,\n        minValue: this.field.entries.length,\n        maxValue: this.field.entries.length,\n        min: this.field.entries.length,\n        max: this.field.entries.length,\n        limit: 10,\n        minLabel: 'Minimum',\n        maxLabel: 'Maximum',\n        maxColumn: 'multiple_max',\n        minColumn: 'multiple_min',\n        maxReadonly: true,\n        patch: {\n          field: 'n/a',\n          path: `fields/${this.field.id}`,\n          callback: ( core: CoreConfig, event: PopBaseEventInterface ) => {\n            const newValue = event.config.control.value;\n            Object.keys( newValue ).map( ( key: string ) => {\n              this.field[ key ] = newValue[ key ];\n            } );\n\n          }\n        }\n      } );\n\n\n    this.ui.label = new InputConfig(// Piggy back off of the first entry label\n      {\n        label: 'Label',\n        value: this.field.entries[ 0 ].name,\n        facade: false,\n        maxlength: 24,\n        patch: {\n          field: `name`,\n          path: `fields/${this.field.id}/entries/${this.field.entries[ 0 ].id}`,\n          callback: ( core: CoreConfig, event: PopBaseEventInterface ) => {\n            this.onEntryDisplayChange( 0, event );\n          }\n        }\n      } );\n\n    // The edit label setting will determine if the end-user is able to change the the label\n    const editLabelSetting = IsObject( this.field.custom_setting.edit_label, true ) ? this.field.custom_setting.edit_label : null;\n    if( editLabelSetting ){\n      this.ui.editLabel = new SwitchConfig(\n        {\n          name: 'edit_label',\n          helpText: editLabelSetting.helpText,\n          label: editLabelSetting.label,\n          labelPosition: 'after',\n          value: <boolean>editLabelSetting.value,\n          metadata: {\n            setting: editLabelSetting,\n          },\n          facade: true,\n          patch: {\n            field: 'value',\n            path: ``,\n            callback: ( core: CoreConfig, event: PopBaseEventInterface ) => {\n              this.srv.field.storeCustomSetting( this.core, event ).then( ( res ) => {\n                if( IsString( res ) ){\n                  this.ui.editLabel.message = <string>res;\n                }else{\n                  this.srv.field.triggerFieldPreviewUpdate();\n                }\n              } );\n            }\n          }\n        } );\n    }\n\n    // The custom label setting will allow the user to add their own custom label to fit their needs, should only show if edit label setting is true\n    const customLabelSetting = IsObject( this.field.custom_setting.custom_label, true ) ? this.field.custom_setting.custom_label : null;\n    if( customLabelSetting ){\n      this.ui.customLabel = new CheckboxConfig(\n        {\n          name: 'custom_label',\n          facade: true,\n          helpText: customLabelSetting.helpText,\n          label: customLabelSetting.label,\n          labelPosition: 'after',\n          value: <boolean>customLabelSetting.value,\n          metadata: {\n            setting: customLabelSetting,\n          },\n          patch: {\n            field: 'value',\n            path: ``,\n            callback: ( core: CoreConfig, event: PopBaseEventInterface ) => {\n              this.srv.field.storeCustomSetting( this.core, event ).then( ( res ) => {\n                if( IsString( res ) ){\n                  this.ui.customLabel.message = <string>res;\n                }else{\n                  this._onCustomLabelChange( this.ui.customLabel.control.value ).then( () => {\n                    this.srv.field.triggerFieldPreviewUpdate();\n                  } );\n                }\n              } );\n            }\n          }\n        } );\n    }\n\n    // The unique label setting will force all of the field values to use a unique label, should only show if edit label setting is true\n    const uniqueLabelSetting = IsObject( this.field.custom_setting.unique_label, true ) ? this.field.custom_setting.unique_label : null;\n    if( uniqueLabelSetting ){\n\n      this.ui.uniqueLabel = new CheckboxConfig(\n        {\n          name: 'unique_label',\n          facade: true,\n          helpText: uniqueLabelSetting.helpText,\n          label: uniqueLabelSetting.label,\n          labelPosition: 'after',\n          value: <boolean>uniqueLabelSetting.value,\n          metadata: {\n            setting: uniqueLabelSetting,\n          },\n          patch: {\n            field: 'value',\n            path: ``,\n            callback: ( core: CoreConfig, event: PopBaseEventInterface ) => {\n              this.srv.field.storeCustomSetting( this.core, event ).then( ( res ) => {\n                if( IsString( res ) ){\n                  this.ui.uniqueLabel.message = <string>res;\n                }else{\n                  this.srv.field.triggerFieldPreviewUpdate();\n                }\n              } );\n            }\n          }\n        } );\n    }\n\n  }\n\n\n  /**\n   * A User will be able to add as many labels as they like\n   */\n  private _onCustomLabelChange( value: boolean ): Promise<boolean>{\n    return new Promise<boolean>( ( resolve ) => {\n      this.dom.state.pending = true;\n\n      if( value ){\n        let hasCustom = false;\n        this.field.entries.map( ( item: FieldEntry ) => {\n          if( item.type == 'custom' ) hasCustom = true;\n        } );\n        if( !hasCustom ){\n          const entry = {\n            name: 'Custom',\n            type: 'custom'\n          };\n          this._makeApiRequests( [ this.srv.request.doPost( `${this.asset.basePath}`, entry, 1, false ) ] ).then( ( res ) => {\n            this._setEntrySessionControls( this.field.entries.filter( ( x ) => x.type !== 'custom' ) ).then( ( entries: FieldEntry[] ) => {\n              this._setEntries( entries ).then( () => {\n                this.dom.state.pending = false;\n                setTimeout( () => {\n                  this.srv.field.triggerFieldPreviewUpdate();\n                  return resolve( true );\n                }, 0 );\n              } );\n            } );\n          } );\n        }else{\n          setTimeout( () => {\n            this.dom.state.pending = false;\n            this.srv.field.triggerFieldPreviewUpdate();\n            return resolve( true );\n          }, 0 );\n        }\n\n      }else{\n        const requests = [];\n        this.field.entries.filter( ( entry ) => {\n          if( entry.type === 'custom' ){\n            requests.push( this.srv.request.doDelete( `${this.asset.basePath}/${entry.id}`, null, 1, false ) );\n            return false;\n          }else{\n            return true;\n          }\n        } );\n        if( requests.length ){\n          this._makeApiRequests( requests ).then( ( res ) => {\n            this._setEntrySessionControls( this.field.entries.filter( ( x ) => x.type !== 'custom' ) ).then( ( entries: FieldEntry[] ) => {\n              this._setEntries( entries ).then( () => {\n                this.dom.state.pending = false;\n                setTimeout( () => {\n                  this.srv.field.triggerFieldPreviewUpdate();\n                }, 0 );\n              } );\n            } );\n          } );\n        }\n\n\n        return resolve( true );\n      }\n    } );\n  }\n\n\n  /**\n   * Produce a list of the entry values for this field\n   */\n  private _showEntries(): Promise<boolean>{\n    return new Promise<boolean>( async( resolve ) => {\n      this._setValueEntries().then( ( entries: FieldEntry[] ) => {\n        this._setEntrySessionControls( entries ).then( ( res: FieldEntry[] ) => {\n          this._setEntries( res ).then( () => {\n            this.dom.state.pending = false;\n            return resolve( true );\n          } );\n        } );\n      } );\n\n    } );\n\n  }\n\n\n  /**\n   * Ensure that the database records match the min/max settings\n   * This will remove any excess records in the database that exceed the multiple_min\n   * This will create records for an entries that are needed in the database\n   * @param patch\n   */\n  private _setValueEntries(): Promise<FieldEntry[]>{\n    return new Promise<FieldEntry[]>( ( resolve ) => {\n      const provided = DeepCopy( this.field.entries ).filter( ( entry ) => {\n        return entry.type !== 'custom';\n      } );\n      const entries = [ ...provided ];\n      return resolve( entries );\n    } );\n  }\n\n\n  /**\n   * Will make all of the needed api requests\n   * @param requests\n   * @private\n   */\n  private _makeApiRequests( requests: Observable<any>[] ): Promise<FieldEntry[]>{\n    return new Promise<FieldEntry[]>( ( resolve ) => {\n      // PopTemplate.buffer();\n      forkJoin( requests ).subscribe( () => {\n        this.srv.request.doGet( this.asset.basePath ).subscribe( ( res ) => {\n          res = res.data ? res.data : res;\n          this.field.entries = IsArray( res, true ) ? <FieldEntry[]>res : [];\n          this.core.entity.entries = JSON.parse( JSON.stringify( this.field.entries ) )\n          resolve( res );\n        } );\n      }, ( err ) => {\n        PopLog.error( this.name, `_makeApiRequests`, GetHttpErrorMsg( err ) );\n        resolve( [] );\n      } );\n    } );\n  }\n\n\n  /**\n   * Store a set of controls that can store values as the user changes the settings\n   * @private\n   */\n  private _setEntrySessionControls( entries: FieldEntry[] ): Promise<FieldEntry[]>{\n    return new Promise( ( resolve ) => {\n      let index = 0;\n      entries.map( ( entry: FieldEntry ) => {\n        if( entry.type !== 'custom' ){\n          if( !( IsDefined( entry.orphaned ) ) ) entry.orphaned = IsDefined( entry.orphaned_at, false );\n          const session = this.dom.session.controls.has( index ) ? this.dom.session.controls.get( index ) : {\n            id: entry ? entry.id : null,\n            type: this._getEntryTypeConfig( entry ),\n            display: this._getEntryDisplayConfig( entry ),\n            active: this._getEntryActiveConfig( entry ),\n            increment: index + 1,\n          };\n          this._updateSessionControl( index, session, entry );\n          index++;\n        }\n      } );\n\n\n      return resolve( entries );\n    } );\n  }\n\n\n  /**\n   * Update the entry config to use the stored record, and update the sessions for it\n   * @param index\n   * @param session\n   * @param entry\n   * @private\n   */\n  private _updateSessionControl( index: number, session: FieldEntrySession, entry: FieldEntry = null ){\n    session.increment = index + 1;\n    session.id = entry ? entry.id : null;\n    this._updateEntryTypeSession( session.type, entry );\n    this._updateEntryDisplaySession( session.display, entry );\n    this.dom.session.controls.set( index, session );\n    this.setDomSession( index, session );\n    return session;\n  }\n\n\n  /**\n   * Update the entry type config to use correct value and path\n   * @param config\n   * @param entry\n   * @private\n   */\n  private _updateEntryTypeSession( config: SelectConfig, entry: FieldEntry = null ){\n    // config.value = entry ? entry.type : this.asset.type in this.asset.typeOption ? this.asset.typeOption[ this.asset.type ].defaultValue : 'n/a';\n    // config.control.setValue( config.value, { emitEvent: false } );\n    // config.patch.path = entry ? `${this.asset.basePath}/${entry.id}` : null;\n  }\n\n\n  /**\n   * Update the entry display config to use correct value and path\n   * @param config\n   * @param entry\n   * @private\n   */\n  private _updateEntryDisplaySession( config: InputConfig, entry: FieldEntry = null ){\n    // config.value = entry ? entry.name : '';\n    // config.control.setValue( config.value, { emitEvent: false } );\n    // config.patch.path = entry ? `${this.asset.basePath}/${entry.id}` : null;\n  }\n\n\n  /**\n   * Update the entry active config to use correct value and path\n   * @param config\n   * @param entry\n   * @private\n   */\n  private _updateEntryActiveSession( config: InputConfig, entry: FieldEntry = null ){\n\n  }\n\n\n  /**\n   * Store each entry config in a dom session so that it can be restored when the users is switching tabs\n   * @param index\n   * @param session\n   */\n  private setDomSession( index: number, session: FieldEntrySession ){\n    const domStorage = <any>StorageGetter( this.dom.repo, [ 'components', this.name, this.id + '', 'session' ] );\n    if( IsObject( domStorage, [ 'controls' ] ) ){\n      const controls = <Map<number, FieldEntrySession>>domStorage.controls;\n      controls.set( index, session );\n    }\n  }\n\n\n  /**\n   * Set entry config objects that will be used in the html template\n   * @private\n   */\n  private _setEntries( entries: FieldEntry[] ): Promise<boolean>{\n    return new Promise<boolean>( async( resolve ) => {\n      this.ui.entries = [];\n      this.asset.entries = IsArray( entries, true ) ? entries.filter( ( e ) => e.type !== 'custom' ) : [];\n      this.asset.entriesMap = ArrayMapSetter( this.asset.entries, 'id' );\n      this.dom.state.hasMultipleEntries = this.asset.entries.length > 1;\n      await this._checkFieldEntryTraits();\n\n      return resolve( true );\n    } );\n\n  }\n\n\n  /**\n   * Manage the type of each entry\n   * @param ind\n   * @private\n   */\n  private _getEntryTypeConfig( entry: FieldEntry ){\n    let disabled = false;\n    let options = this.asset.type in this.asset.typeOption ? this.asset.typeOption[ this.asset.type ].options : [];\n    if( !IsArray( options, true ) ){\n      options = [ { value: 'n/a', name: 'N/A' } ];\n      disabled = true;\n    }\n    return new SelectConfig( {\n      label: 'Type',\n      options: { values: options },\n      disabled: disabled,\n      patch: {\n        field: 'type',\n        path: entry && entry.id ? `${this.asset.basePath}/${entry.id}` : null,\n      }\n    } );\n  }\n\n\n  /**\n   * Manage the type of each entry\n   * @param ind\n   * @private\n   */\n  private _getSessionEntryTraits( entry: FieldEntry ){\n    const traits = [];\n    if( IsObject( this.scheme, [ 'id', 'mapping' ] ) ){\n      const traitEntryMapping = this.asset.schemeFieldStorage.trait_entry;\n      const disabledEntries = this.asset.schemeFieldStorage.disabled_entries;\n      if( IsObject( this.field, true ) && IsArray( this.field.trait, true ) ){\n        this.field.trait.map( ( trait: FieldCustomSettingInterface ) => {\n          traits.push( {\n            name: trait.name,\n            disabled: disabledEntries.includes(entry.id),\n            selected: +traitEntryMapping[ trait.name ] === entry.id\n          } );\n        } );\n\n      }\n    }\n    return traits;\n  }\n\n\n  private _checkFieldEntryTraits(): Promise<boolean>{\n    return new Promise( async( resolve ) => {\n      if( this.dom.state.isPrimary && IsArray( this.field.trait, true ) ){\n        let updateNeeded = false;\n        const disabledEntries = this.asset.schemeFieldStorage.disabled_entries;\n        const activeEntry = IsArray( this.asset.entries, true ) ? this.asset.entries.find( entry => {\n          return !( disabledEntries.includes( entry.id ) ) && !entry.orphaned_at;\n        } ) : null;\n        if( IsObject( activeEntry, [ 'id' ] ) ){\n\n          const traitEntryMapping = this.asset.schemeFieldStorage.trait_entry;\n          this.field.trait.map( ( trait ) => {\n            if( IsUndefined( traitEntryMapping[ trait.name ] ) || !( traitEntryMapping[ trait.name ] in this.asset.entriesMap ) || disabledEntries.includes( +traitEntryMapping[ trait.name ] ) ){\n              traitEntryMapping[ trait.name ] = activeEntry.id;\n              updateNeeded = true;\n            }\n          } );\n          if( updateNeeded ){\n            await this.srv.field.updateSchemeFieldMapping( this.scheme );\n          }\n        }\n\n        if( this.dom.session.controls ){\n          this.ui.entries = [];\n          // this.dom.setTimeout( `reset-entries`, () => {\n          this.asset.entries.map( ( entry, index ) => {\n            const sessionEntry = this.dom.session.controls.get( index );\n            if( this.dom.state.isPrimary ) sessionEntry.traits = this._getSessionEntryTraits( entry );\n            if( !this.scheme || !entry.orphaned_at ) this.ui.entries.push( sessionEntry );\n          } );\n          this._handleMultipleEntries();\n          return resolve( true );\n          // }, 0 );\n\n        }\n      }else{\n        if( this.dom.session.controls ){\n          this.ui.entries = [];\n          this.asset.entries.map( ( entry, index ) => {\n            const sessionEntry = this.dom.session.controls.get( index );\n            if( !this.scheme || !entry.orphaned_at ) this.ui.entries.push( sessionEntry );\n          } );\n          this._handleMultipleEntries();\n        }\n        return resolve( true );\n      }\n\n    } );\n  }\n\n\n  /**\n   * Manage the type of each entry\n   * @param ind\n   * @private\n   */\n  private _getEntryActiveConfig( entry: FieldEntry ){\n    let value = !entry.orphaned;\n    if( IsObject( this.scheme, true ) ){\n      if( this.asset.schemeFieldStorage.disabled_entries.includes( entry.id ) ){\n        value = false;\n      }\n    }\n    return new SwitchConfig( {\n      label: '',\n      value: value,\n      empty: 'ConvertEmptyToNull',\n      tooltip: 'Toggle Visibility',\n      facade: true,\n      metadata: {\n        entry: entry\n      },\n      // disabled: this.dom.state.hasScheme ? true : false,\n      patch: {\n        field: 'orphaned_at',\n        path: '',\n        duration: 0,\n        displayIndicator: false,\n        callback: async( core: CoreConfig, event: PopBaseEventInterface ) => {\n          this.srv.tab.showAsLoading( true );\n          if( IsObject( this.scheme, [ 'id' ] ) ){\n            if( event.config.control.value ){ // remove from disabled\n              this.asset.schemeFieldStorage.disabled_entries.splice( ( <number[]>this.asset.schemeFieldStorage.disabled_entries ).indexOf( +entry.id ), 1 );\n\n            }else{ // add to disabled\n              this.asset.schemeFieldStorage.disabled_entries.push( +entry.id );\n            }\n            console.log( 'here', entry.id, this.asset.schemeFieldStorage.disabled_entries );\n            await this._checkFieldEntryTraits();\n            await this.srv.field.updateSchemeFieldMapping( this.scheme );\n            this.srv.tab.showAsLoading( false );\n\n          }else{\n            const orphaned = event.config.control.value ? null : true;\n            this.dom.setTimeout( `update-orphaned-at-${entry.id}`, PopRequest.doPatch( `${this.asset.basePath}/${entry.id}`, { orphaned: orphaned }, 1, false ).subscribe( ( res ) => {\n              res = GetHttpObjectResult( res );\n              this.log.info( `_getEntryActiveConfig`, res );\n              this.srv.tab.showAsLoading( false );\n            }, ( err ) => {\n              this.dom.setError( err, true );\n              this.srv.tab.showAsLoading( false );\n            } ) );\n          }\n\n        }\n      }\n    } );\n  }\n\n\n  /**\n   * Manage the display of each entry\n   * @param index\n   * @private\n   */\n  private _getEntryDisplayConfig( entry: FieldEntry ){\n//     console.log( '_getEntryDisplayConfig', entry );\n    return new InputConfig( {\n      label: 'Entry Name',\n      value: entry && entry.name ? entry.name : '',\n      transformation: 'toTitleCase',\n      disabled: this.dom.state.hasScheme ? true : false,\n      patch: {\n        field: 'name',\n        path: entry && entry.id ? `${this.asset.basePath}/${entry.id}` : null,\n        metadata: {\n          orphaned: -1\n        }\n      },\n      maxlength: 20,\n      // validators: [ Validators.required ],\n      // minimal: true\n    } );\n  }\n\n\n  private _isMultipleActiveEntries(): boolean{\n    let active = 0;\n    this.ui.entries.map( ( entry ) => {\n      if( StorageGetter( entry, [ 'active', 'control', 'value' ], false ) ){\n        active++;\n      }\n    } );\n    this.log.info( `_isMultipleActiveEntries`, active );\n    return active > 1;\n  }\n\n\n  private _disableActiveEntries(){\n    this.log.info( `_disableActiveEntries` );\n    this.ui.entries.map( ( entry: FieldEntrySession ) => {\n      if( StorageGetter( entry, [ 'active', 'control', 'value' ], false ) ){\n        entry.active.disabled = true;\n        entry.active.control.disable();\n      }\n    } );\n  }\n\n\n  private _enableActiveEntries(){\n    this.log.info( `_enableActiveEntries` );\n    this.ui.entries.map( ( entry: FieldEntrySession ) => {\n      if( StorageGetter( entry, [ 'active', 'control', 'value' ], false ) ){\n        entry.active.disabled = false;\n        entry.active.control.enable();\n      }\n    } );\n  }\n}\n\n\nexport interface FieldEntrySession {\n  id: number;\n  type: SelectConfig;\n  display: InputConfig;\n  active: SwitchConfig;\n  traits?: { name: string, selected: boolean }[];\n  increment: number;\n}\n","import { Component, ElementRef, Inject, Input, OnDestroy, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { TableConfig } from '../../base/pop-table/pop-table.model';\nimport { EntityTabListExtendInterface } from './pop-entity-tab-list.model';\nimport { PopDomService } from '../../../services/pop-dom.service';\nimport { AppGlobalInterface, CoreConfig, Entity, PopBusiness, PopEntity, PopPipe, PopTemplate } from '../../../pop-common.model';\nimport {\n  GetHttpObjectResult,\n  GetSessionSiteVar,\n  IsArray,\n  IsObject,\n  TitleCase\n} from '../../../pop-common-utility';\nimport { PopEntityListComponent } from '../pop-entity-list/pop-entity-list.component';\nimport { PopTabMenuService } from '../../base/pop-tab-menu/pop-tab-menu.service';\n\n\n@Component( {\n  selector: 'lib-pop-entity-tab-list',\n  styleUrls: [ './pop-entity-tab-list.component.scss' ],\n  templateUrl: './pop-entity-tab-list.component.html',\n} )\nexport class PopEntityTabListComponent extends PopEntityListComponent implements OnInit, OnDestroy {\n  @Input() internal_name: string;\n  @Input() parentId: number;\n  @Input() parent: string;\n  @Input() param: string;\n  @Input() extension: EntityTabListExtendInterface;\n\n  public name = 'PopEntityTabListComponent';\n\n\n  constructor(\n    public el: ElementRef,\n    protected route: ActivatedRoute,\n    protected _domRepo: PopDomService,\n    protected _tabRepo: PopTabMenuService,\n    @Inject( 'APP_GLOBAL' ) public APP_GLOBAL: AppGlobalInterface,\n  ){\n    super( el, route, _domRepo, APP_GLOBAL );\n  }\n\n\n  /**\n   * This component will display a list of entities that the user can interact with\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * Clean up the dom of this component\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Protected Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n  /**\n   * Allow for a CoreConfig to be passed in\n   * If a CoreConfig does not exits this component needs to be able to create it for itself, uses the internal_name that comes directly for the route\n   * or tries to extrapolate it from the current url of the app\n   *\n   */\n  protected _setCoreConfig(): Promise<boolean>{\n    // console.log(this.route);\n    return new Promise( async( resolve ) => {\n      this.srv.entity.getCoreConfig( this.internal_name, 0 ).then( ( core: CoreConfig ) => {\n        this.core = core;\n        this.id = `${this.parent}_${this.core.params.internal_name}`;\n        this.log.info( `_setCore: initial`, core );\n        return resolve( true );\n      }, () => {\n        return resolve( false );\n      } );\n    } );\n  }\n\n\n  /**\n   * Setup basic config\n   * Intended to be overridden\n   * @private\n   */\n  protected _setConfig(): Promise<boolean>{\n    return new Promise( async( resolve ) => {\n\n      if( !this.parentId ) this.parentId = this.srv.entity.getRouteParentId( this.route );\n      if( !this.internal_name ) this.internal_name = this.srv.entity.getRouteInternalName( this.route );\n\n      if( this.parent === 'client' ){\n        this.extension.client_id = +this.parentId;\n      }else if( this.parent === 'account' ){\n        const account = this.srv.tab.getCore().entity;\n        this.extension.client_id = +account.client_id;\n        this.extension.account_id = +account.id;\n      }\n      return resolve( true );\n    } );\n  }\n\n\n  /**\n   * Manage the sessionStorage settings\n   * @private\n   */\n  protected _setSessionSettings(): Promise<boolean>{\n    return new Promise( async( resolve ) => {\n      // Set session path for variables\n      this.asset.tabMenuSessionPath = `Entity.${TitleCase( this.core.params.internal_name )}.Menu`;\n      this.asset.showArchivedSessionPath = `Business.${PopBusiness.id}.Entity.${TitleCase( this.parent )}.Table.${TitleCase( this.internal_name )}.showArchived`;\n      this.asset.searchValueSessionPath = `Business.${PopBusiness.id}.Entity.${TitleCase( this.parent )}.Table.${TitleCase( this.internal_name )}.searchValue`;\n\n      // Set any session variables\n      // SetSessionSiteVar(this.asset.tabMenuSessionPath, null); // remove any menu session data for this entity\n      this.dom.state.showArchived = GetSessionSiteVar( this.asset.showArchivedSessionPath, false );\n\n      return resolve( true );\n    } );\n  }\n\n\n  /**z\n   * Determine the height of the table\n   * @private\n   */\n  protected _setHeight(): Promise<boolean>{\n    return new Promise( async( resolve ) => {\n      // Determine height of the table - have to account if filter bar is enabled\n      const overhead = 50; // trial and error , increase to make component shorter, lower to increase height\n      this.dom.setHeight( window.innerHeight - 200, overhead );\n      return resolve( true );\n    } );\n  }\n\n\n  protected _fetchData( update = false ){\n    if( !update ) this.dom.setTimeout( `lazy-load-fresh-data`, null );\n    return new Promise( async( resolve, reject ) => {\n      if( this.dataFactory ){\n        this.dataFactory( this.parentId, this.dom.state.showArchived ? 1 : 0 ).then( ( data ) => {\n          // console.log('data', data);\n          data = this._transformData( data );\n          if( update && this.table.config && typeof this.table.config.updateData === 'function' ){\n            this.table.config.updateData( data );\n          }\n          PopTemplate.clear();\n          resolve( data );\n        }, () => {\n          reject( [] );\n        } );\n      }else{\n        const params = {};\n        params[ `${this.parent}_id` ] = this.parentId;\n        // console.log(params);\n        this.core.repo.getEntities( { archived: ( this.dom.state.showArchived ? 1 : 0 ), ...params } ).then( ( list: Entity[] ) => {\n          list = this._transformData( list )\n          // this.core.repo.setCache('table', this.internal_name, data, 5);\n          if( update && this.table.config && typeof this.table.config.updateData === 'function' ){\n            this.table.config.updateData( list );\n          }\n          PopTemplate.clear();\n          resolve( list );\n        }, () => {\n          reject( [] );\n        } );\n      }\n\n    } );\n  }\n\n\n  protected _transformData( data: any[] ){\n    if( !( IsObject( this.asset.fieldKeys, true ) ) ) this._setFieldKeys( data[ 0 ] );\n    if( !( IsObject( this.asset.transformations, true ) ) ) this._setFieldTableTransformations();\n    data = this._prepareTableData( data );\n    this.core.repo.setCache( 'table', this.parent, data, 5 );\n\n    return data;\n  }\n\n\n  /**\n   * Retrieves the data set that this view will represent\n   * @param hardReset\n   *\n   */\n  protected _getTableData( hardReset = false ){\n    return new Promise( ( resolve, reject ) => {\n      if( this.dom.delay.data ) clearTimeout( this.dom.delay.data );\n      this.core.repo.getCache( 'table', this.parent ).then( ( cache ) => {\n        if( IsArray( cache, true ) ){\n          this._triggerDataFetch();\n          return resolve( { data: cache } );\n        }else{\n          this._fetchData( false ).then( ( data ) => {\n            return resolve( { data: data } );\n          } );\n        }\n      } );\n    } );\n  }\n\n\n  protected _configureFilterBar(): Promise<boolean>{\n    return new Promise( async( resolve ) => {\n      this.srv.filter.setActive( false );\n      return resolve( true );\n    } );\n  }\n\n\n  /**\n   * Generates a table config that will be used by the nested view component\n   * @param reset\n   *\n   */\n  protected _configureTable( reset = false ): Promise<boolean>{\n    return new Promise( async( resolve ) => {\n      if( !this.table.config ){\n        this._getTableData( reset ).then( ( tableData: any ) => {\n          if( IsArray( tableData.data, true ) ){\n            this.asset.blueprint = tableData.data[ 0 ];\n          }\n          this._getTableInterface().then( () => {\n            this.asset.tableInterface.paginator = false;\n            this.table.config = new TableConfig( { ...this.asset.tableInterface, ...tableData } );\n          } );\n        } );\n      }else{\n        this.table.config.loading = true;\n        this._getTableData().then( ( result: { data: Entity[] } ) => {\n          if( IsArray( result.data, true ) ) this.asset.blueprint = result.data[ 0 ];\n          this.table.config.buttons = this._buildTableButtons();\n          if( reset ){\n            this.table.config.reset( result.data );\n          }else{\n            this.table.config.updateData( result.data );\n          }\n          this.table.config.loading = false;\n          this.dom.state.refresh = false;\n          this.core.params.refresh = false;\n\n        } );\n      }\n      return resolve( true );\n    } );\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n}\n\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'lib-pop-entity-address-edit',\n  templateUrl: './pop-entity-address-edit.component.html',\n  styleUrls: ['./pop-entity-address-edit.component.scss']\n})\nexport class PopEntityAddressEditComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'lib-pop-entity-scheme-custom-setting',\n  templateUrl: './pop-entity-scheme-custom-setting.component.html',\n  styleUrls: ['./pop-entity-scheme-custom-setting.component.scss']\n})\nexport class PopEntitySchemeCustomSettingComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { PortalModule } from '@angular/cdk/portal';\nimport { RouterModule } from '@angular/router';\nimport { DragDropModule } from '@angular/cdk/drag-drop';\n\nimport { PopTableModule } from '../base/pop-table/pop-table.module';\n\nimport { PopFieldItemGroupModule } from '../base/pop-field-item-group/pop-field-item-group.module';\nimport { PopIndicatorsModule } from '../base/pop-indicators/pop-indicators.module';\nimport { PopEntityPortalMenuComponent } from './pop-entity-tab-menu/pop-entity-portal-menu/pop-entity-portal-menu.component';\nimport { PopErrorsModule } from '../base/pop-errors/pop-errors.module';\nimport { PopEntityListComponent } from './pop-entity-list/pop-entity-list.component';\nimport { PopEntityTabMenuComponent } from './pop-entity-tab-menu/pop-entity-tab-menu.component';\nimport { PopTabMenuModule } from '../base/pop-tab-menu/pop-tab-menu.module';\nimport { PopEntityHistoryComponent } from './pop-entity-history/pop-entity-history.component';\nimport { PopEntityAccessComponent } from './pop-entity-access/pop-entity-access.component';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { MaterialModule } from '../material/material.module';\nimport { PopFieldItemModule } from '../base/pop-field-item/pop-field-item.module';\nimport { PopEntityAssignmentsComponent } from './pop-entity-assignments/pop-entity-assignments.component';\nimport { PopEntityProviderDialogComponent } from './pop-entity-assignments/pop-entity-provider-dialog/pop-entity-provider-dialog.component';\nimport { MatNativeDateModule } from '@angular/material/core';\n\nimport { PopEntityAdvancedSearchComponent } from './pop-entity-list/pop-entity-advanced-search/pop-entity-advanced-search.component';\nimport { PopEntityFieldGroupComponent } from './pop-entity-field-group/pop-entity-field-group.component';\nimport { PopEntityTabComponent } from './pop-entity-tab/pop-entity-tab.component';\nimport { PopEntityEmailComponent } from './pop-entity-field/pop-entity-email/pop-entity-email.component';\nimport { PopEntityPhoneComponent } from './pop-entity-field/pop-entity-phone/pop-entity-phone.component';\nimport { PopEntityAddressComponent } from './pop-entity-field/pop-entity-address/pop-entity-address.component';\nimport { PopEntityDatetimeComponent } from './pop-entity-field/pop-entity-datetime/pop-entity-datetime.component';\nimport { PopEntityInputComponent } from './pop-entity-field/pop-entity-input/pop-entity-input.component';\nimport { PopEntityNameComponent } from './pop-entity-field/pop-entity-name/pop-entity-name.component';\nimport { PopEntityFieldComponent } from './pop-entity-field/pop-entity-field.component';\nimport { PopEntityFieldActionBtnComponent } from './pop-entity-field/assets/pop-entity-field-action-btn.component';\nimport { PopEntityFieldEditIconComponent } from './pop-entity-field/assets/pop-entity-field-edit-icon/pop-entity-field-edit-icon.component';\nimport { PopEntityFieldDashComponent } from './pop-entity-field/assets/pop-entity-field-dash.component';\nimport { PopEntityFieldSpacerComponent } from './pop-entity-field/assets/pop-entity-field-spacer.component';\nimport { PopEntitySelectComponent } from './pop-entity-field/pop-entity-select/pop-entity-select.component';\nimport { PopEntityTextareaComponent } from './pop-entity-field/pop-entity-textarea/pop-entity-textarea.component';\nimport { PopEntityCheckboxComponent } from './pop-entity-field/pop-entity-checkbox/pop-entity-checkbox.component';\nimport { PopEntityRadioComponent } from './pop-entity-field/pop-entity-radio/pop-entity-radio.component';\nimport { PopContextMenuModule } from '../base/pop-context-menu/pop-context-menu.module';\nimport { PopEntityTabColumnComponent } from './pop-entity-tab/pop-entity-tab-column.component';\nimport { PopEntitySchemeComponent } from './pop-entity-scheme/pop-entity-scheme.component';\n\nimport { PopEntitySchemeDetailsComponent } from './pop-entity-scheme/pop-entity-scheme-details/pop-entity-scheme-details.component';\nimport { PopEntitySchemeAssetPoolComponent } from './pop-entity-scheme/pop-entity-scheme-asset-pool/pop-entity-scheme-asset-pool.component';\nimport { PopEntitySchemeAssetLayoutComponent } from './pop-entity-scheme/pop-entity-scheme-asset-layout/pop-entity-scheme-asset-layout.component';\nimport { FieldInputSettingComponent } from './pop-entity-scheme/pop-entity-asset-field-modal/params/field-input-setting.component';\nimport { FieldLabelSettingComponent } from './pop-entity-scheme/pop-entity-asset-field-modal/params/field-label-setting.component';\nimport { FieldRadioSettingComponent } from './pop-entity-scheme/pop-entity-asset-field-modal/params/field-radio-setting.component';\nimport { FieldSelectSettingComponent } from './pop-entity-scheme/pop-entity-asset-field-modal/params/field-select-setting.component';\nimport { FieldSwitchSettingComponent } from './pop-entity-scheme/pop-entity-asset-field-modal/params/field-switch-setting.component';\nimport { FieldTextareaSettingComponent } from './pop-entity-scheme/pop-entity-asset-field-modal/params/field-textarea-setting.component';\nimport { PopEntityAssetComponentModalComponent } from './pop-entity-scheme/pop-entity-asset-component-modal/pop-entity-asset-component-modal.component';\nimport { PopEntityAssetFieldModalComponent } from './pop-entity-scheme/pop-entity-asset-field-modal/pop-entity-asset-field-modal.component';\nimport { EntitySchemeLayoutSectionComponent } from './pop-entity-scheme/pop-entity-scheme-asset-layout/entity-scheme-layout-section/entity-scheme-layout-section.component';\nimport { PopEntitySchemeCustomComponent } from './pop-entity-scheme/pop-entity-scheme-custom-component/pop-entity-scheme-custom.component';\nimport { EntitySchemeFieldContentComponent } from './pop-entity-scheme/pop-entity-scheme-asset-layout/entity-scheme-layout-section/entity-scheme-field-content/entity-scheme-field-content.component';\nimport { EntitySchemeTableContentComponent } from './pop-entity-scheme/pop-entity-scheme-asset-layout/entity-scheme-layout-section/entity-scheme-table-content/entity-scheme-table-content.component';\nimport { EntitySchemeComponentContentComponent } from './pop-entity-scheme/pop-entity-scheme-asset-layout/entity-scheme-layout-section/entity-scheme-component-content/entity-scheme-component-content.component';\n\nimport { PopEntityFieldPreviewComponent } from './pop-entity-field-editor/pop-entity-field-preview/pop-entity-field-preview.component';\nimport { PopEntityFieldSettingsComponent } from './pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-settings.component';\nimport { PopEntityFieldItemsComponent } from './pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-items/pop-entity-field-items.component';\nimport { PopEntityFieldValuesComponent } from './pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-values/pop-entity-field-values.component';\nimport { PopEntityFieldItemParamsComponent } from './pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/pop-entity-field-item-params.component';\nimport { FieldInputParamComponent } from './pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-input-param.component';\nimport { FieldLabelParamComponent } from './pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-label-param.component';\nimport { FieldSelectParamComponent } from './pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-select-param.component';\nimport { FieldTextareaParamComponent } from './pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-textarea-param.component';\nimport { FieldRadioParamComponent } from './pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-radio-param.component';\nimport { FieldSwitchParamComponent } from './pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-switch-param.component';\nimport { PopEntityFieldEditorComponent } from './pop-entity-field-editor/pop-entity-field-editor.component';\nimport { PopEntityFieldDetailsComponent } from './pop-entity-field-editor/pop-entity-field-details/pop-entity-field-details.component';\nimport { FieldSliderParamComponent } from './pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-slider-param.component';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { PopEntityFieldBoilerComponent } from './pop-entity-field/pop-entity-field-boiler.component';\nimport { PopEntityFieldEntriesComponent } from './pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-entries/pop-entity-field-entries.component';\nimport { PopDialogsModule } from '../base/pop-dialogs/pop-dialogs.module';\nimport { FieldNumberParamComponent } from './pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-number-param.component';\nimport { PopEntityTabListComponent } from './pop-entity-tab-list/pop-entity-tab-list.component';\nimport { PopEntityStatusComponent } from './pop-entity-status/pop-entity-status.component';\nimport { PopEntityFieldModalComponent } from './pop-entity-field/pop-entity-field-modal/pop-entity-field-modal.component';\nimport { PopEntityAddressEditComponent } from './pop-entity-field/pop-entity-address/pop-entity-address-edit/pop-entity-address-edit.component';\nimport { PopEntitySwitchComponent } from './pop-entity-field/pop-entity-switch/pop-entity-switch.component';\nimport { PopEntitySelectMultiComponent } from './pop-entity-field/pop-entity-select-multi/pop-entity-select-multi.component';\nimport { PopTabMenuComponent } from '../base/pop-tab-menu/pop-tab-menu.component';\nimport { PopTableComponent } from '../base/pop-table/pop-table.component';\nimport { PopTabMenuSectionBarComponent } from '../base/pop-tab-menu/pop-tab-menu-section-bar/pop-tab-menu-section-bar.component';\nimport { PopEntitySchemeFieldSettingComponent } from './pop-entity-scheme/pop-entity-scheme-field-setting/pop-entity-scheme-field-setting.component';\nimport { PopEntitySchemeCustomSettingComponent } from './pop-entity-scheme/pop-entity-scheme-custom-setting/pop-entity-scheme-custom-setting.component';\n\n\n\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    HttpClientModule,\n    MatFormFieldModule,\n    MatInputModule,\n    RouterModule,\n    PortalModule,\n    FormsModule,\n    ReactiveFormsModule,\n    MaterialModule,\n    DragDropModule,\n    PopErrorsModule,\n    PopFieldItemModule,\n    PopFieldItemGroupModule,\n    PopIndicatorsModule,\n    PopTableModule,\n    PopTabMenuModule,\n    MatNativeDateModule,\n    PopContextMenuModule,\n    PopDialogsModule\n\n  ],\n  declarations: [\n    PopEntityListComponent,\n    PopEntityTabListComponent,\n    PopEntityAdvancedSearchComponent,\n    PopEntityPortalMenuComponent,\n    PopEntityFieldGroupComponent,\n    PopEntityPortalMenuComponent,\n    PopEntityTabMenuComponent,\n    PopEntityTabComponent,\n    PopEntityTabColumnComponent,\n    PopEntityHistoryComponent,\n    PopEntityAssignmentsComponent,\n    PopEntityProviderDialogComponent,\n    PopEntityAccessComponent,\n    PopEntityFieldComponent,\n    PopEntityFieldActionBtnComponent,\n    PopEntityFieldEditIconComponent,\n    PopEntityFieldDashComponent,\n    PopEntityFieldSpacerComponent,\n    PopEntityFieldBoilerComponent,\n    PopEntityFieldModalComponent,\n    PopEntityEmailComponent,\n    PopEntityPhoneComponent,\n    PopEntityAddressComponent,\n    PopEntityAddressEditComponent,\n    PopEntityDatetimeComponent,\n    PopEntityInputComponent,\n    PopEntitySelectComponent,\n    PopEntitySelectMultiComponent,\n    PopEntityCheckboxComponent,\n    PopEntityRadioComponent,\n    PopEntitySwitchComponent,\n    PopEntityNameComponent,\n    PopEntityTextareaComponent,\n    PopEntityStatusComponent,\n\n    PopEntitySchemeComponent,\n    PopEntitySchemeDetailsComponent,\n    PopEntitySchemeAssetPoolComponent,\n    PopEntitySchemeAssetLayoutComponent,\n    EntitySchemeLayoutSectionComponent,\n    PopEntitySchemeFieldSettingComponent,\n    EntitySchemeFieldContentComponent,\n    EntitySchemeComponentContentComponent,\n    EntitySchemeTableContentComponent,\n    PopEntityAssetComponentModalComponent,\n    PopEntityAssetFieldModalComponent,\n    FieldInputSettingComponent,\n    FieldLabelSettingComponent,\n    FieldRadioSettingComponent,\n    FieldSelectSettingComponent,\n    FieldSwitchSettingComponent,\n    FieldTextareaSettingComponent,\n    PopEntitySchemeCustomComponent,\n\n    PopEntityFieldEditorComponent,\n    PopEntityFieldDetailsComponent,\n    PopEntityFieldSettingsComponent,\n    PopEntityFieldPreviewComponent,\n    PopEntityFieldItemsComponent,\n    PopEntityFieldValuesComponent,\n    PopEntityFieldEntriesComponent,\n    PopEntityFieldItemsComponent,\n    PopEntityFieldItemParamsComponent,\n    FieldInputParamComponent,\n    FieldSelectParamComponent,\n    FieldLabelParamComponent,\n    FieldSwitchParamComponent,\n    FieldTextareaParamComponent,\n    FieldRadioParamComponent,\n    FieldSliderParamComponent,\n    FieldNumberParamComponent,\n    PopEntitySchemeCustomSettingComponent,\n\n  ],\n  exports: [\n    PopEntityListComponent,\n    PopEntityTabListComponent,\n    PopEntityAdvancedSearchComponent,\n    PopEntityPortalMenuComponent,\n    PopEntityFieldGroupComponent,\n    PopEntityPortalMenuComponent,\n    PopEntityTabMenuComponent,\n    PopEntityTabComponent,\n    PopEntityTabColumnComponent,\n    PopEntityHistoryComponent,\n    PopEntityAssignmentsComponent,\n    PopEntityProviderDialogComponent,\n    PopEntityAccessComponent,\n    PopEntityFieldComponent,\n    PopEntityFieldActionBtnComponent,\n    PopEntityFieldEditIconComponent,\n    PopEntityFieldDashComponent,\n    PopEntityFieldSpacerComponent,\n    PopEntityEmailComponent,\n    PopEntityPhoneComponent,\n    PopEntityFieldModalComponent,\n    PopEntityAddressComponent,\n    PopEntityAddressEditComponent,\n    PopEntityDatetimeComponent,\n    PopEntityInputComponent,\n    PopEntitySelectComponent,\n    PopEntitySelectMultiComponent,\n    PopEntityCheckboxComponent,\n    PopEntityRadioComponent,\n    PopEntitySwitchComponent,\n    PopEntityNameComponent,\n    PopEntityTextareaComponent,\n    PopEntityStatusComponent,\n\n    PopEntitySchemeComponent,\n    PopEntitySchemeDetailsComponent,\n    PopEntitySchemeAssetPoolComponent,\n    PopEntitySchemeAssetLayoutComponent,\n    EntitySchemeLayoutSectionComponent,\n    PopEntitySchemeFieldSettingComponent,\n    EntitySchemeFieldContentComponent,\n    EntitySchemeComponentContentComponent,\n    EntitySchemeTableContentComponent,\n    PopEntityAssetComponentModalComponent,\n    PopEntityAssetFieldModalComponent,\n    FieldInputSettingComponent,\n    FieldLabelSettingComponent,\n    FieldRadioSettingComponent,\n    FieldSelectSettingComponent,\n    FieldSwitchSettingComponent,\n    FieldTextareaSettingComponent,\n    PopEntitySchemeCustomComponent,\n\n    PopEntityFieldEditorComponent,\n    PopEntityFieldDetailsComponent,\n    PopEntityFieldSettingsComponent,\n    PopEntityFieldPreviewComponent,\n    PopEntityFieldItemsComponent,\n    PopEntityFieldValuesComponent,\n    PopEntityFieldEntriesComponent,\n    PopEntityFieldItemsComponent,\n\n    PopEntityFieldItemParamsComponent,\n    PopEntityFieldItemParamsComponent,\n    FieldInputParamComponent,\n    FieldSelectParamComponent,\n    FieldLabelParamComponent,\n    FieldSwitchParamComponent,\n    FieldTextareaParamComponent,\n    FieldRadioParamComponent,\n    FieldSliderParamComponent,\n    FieldNumberParamComponent\n  ],\n})\nexport class PopEntityModule {\n}\n","export interface PopAjaxDialogConfigInterface {\n    message:string; // the message to display after successful request (request error will display otherwise)\n    timeDelay?: number; // the time (in milliseconds) that the pop-table-dialog will stay open after successful request (if made)\n    patch?: PopAjaxDialogRequest; // if given, outlines the details for making a request\n    redirect?: PopAjaxDialogRedirectInterface; // if given, outlines the details for redirecting after request\n    response?: any;\n    body?:string;\n}\n\nexport interface PopAjaxDialogRequestInterface {\n    path: string;\n    body?: any;\n    type: 'patch' | 'post' | 'get' | 'delete';\n    version?: number;\n\n}\n\nexport class PopAjaxDialogRequest {\n    path: string; // the path to make the request to\n    body: any; // the body to include in the request, defaults to empty object\n    type: 'patch' | 'post' | 'get' | 'delete'; // the type of request to make\n    version: number; // the version number of api, defaults to 1\n\n    constructor(data:PopAjaxDialogRequestInterface) {\n        const fields = Object.keys(data);\n        for (const value of fields) {\n            this[value] = data[value];\n        }\n        if (!data.body) this.body = {};\n        if (!data.version) this.version = 1;\n    }\n}\n\nexport interface PopAjaxDialogRedirectInterface {\n    path: string; // the path the redirect to. Make sure to not include the app in the first part of the path. \n    app: string; // the app to redirect (acts as the first part of the path)\n}\n","import { Injectable } from '@angular/core';\nimport { HttpHeaders, HttpClient } from '@angular/common/http';\nimport { PopBaseService } from './pop-base.service';\nimport { PopRequestService } from './pop-request.service';\nimport { Observable } from 'rxjs';\n\n\n@Injectable({ providedIn: 'root' })\nexport class PopPreferenceService {\n\n  constructor(\n    private http: HttpClient,\n    private request: PopRequestService\n  ){\n  }\n\n\n  /**\n   * Get preferences at specified level.\n   *  - IE: getPreferences('admin', 'users', 'table');\n   *\n   * @param level1\n   * @param level2\n   * @param level3\n   * @param level4\n   * @returns\n   */\n  public getPreferences(level1: string, level2 = '', level3 = '', level4 = ''): Observable<any>{\n    let path = '/preferences/' + level1;\n    if( level2 ) path += '/' + level2;\n    if( level3 ) path += '/' + level3;\n    if( level4 ) path += '/' + level4;\n    return this.request.doGet(path, {}, 1);\n  }\n\n\n  /**\n   * Saves a preferences at the specified level.\n   *  - IE: savePreferences('TablePreferences', {some:object}, 'admin', 'users', 'table');\n   *\n   * @param name\n   * @param data\n   * @param level1\n   * @param level2\n   * @param level3\n   * @param level4\n   * @returns\n   */\n  public savePreferences(name: string, data: any, level1: string, level2 = '', level3 = '', level4 = ''): Observable<any>{\n    let path = '/preferences/' + level1;\n    if( level2 ) path += '/' + level2;\n    if( level3 ) path += '/' + level3;\n    if( level4 ) path += '/' + level4;\n\n    return this.request.doPost(path, { name: name, data: data });\n  }\n\n\n  /**\n   * Deletes a specified preference. Typically used when resetting to default.\n   *  - IE: deletePreferences('TablePreferences', 'admin', 'users', 'table');\n   *\n   * @param name\n   * @param level1\n   * @param level2\n   * @param level3\n   * @param level4\n   * @returns\n   */\n  public deletePreferences(name: string, level1: string, level2 = '', level3 = '', level4 = ''): Observable<any>{\n    let path = '/preferences/' + level1;\n    if( level2 ) path += '/' + level2;\n    if( level3 ) path += '/' + level3;\n    if( level4 ) path += '/' + level4;\n    path += '/' + name;\n\n    return this.request.doDelete(path);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { CanActivate, Router } from '@angular/router';\nimport { PopBaseService } from './pop-base.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PopAuthGuardService implements CanActivate {\n\n  constructor(public base: PopBaseService, public router: Router) {\n  }\n\n  canActivate(): boolean {\n    if (this.base.isAuthExpired()) {\n      this.router.navigate(['login']).catch((e) => console.log(e));\n      return false;\n    }\n    return true;\n  }\n}\n","import { ActivatedRouteSnapshot, CanActivate } from '@angular/router';\nimport { Inject, Injectable } from '@angular/core';\nimport { AppGlobalInterface } from '../pop-common.model';\n\n\n@Injectable( {\n  providedIn: 'root',\n} )\nexport class PopRouteVerifiedGuard implements CanActivate {\n  constructor(\n    @Inject( 'APP_GLOBAL' ) private APP_GLOBAL: AppGlobalInterface\n  ){\n  }\n\n\n  canActivate( route: ActivatedRouteSnapshot ): Promise<boolean>{\n    return new Promise<boolean>( async( resolve ) => {\n      const verified = await this.APP_GLOBAL.isVerified();\n      return resolve( verified );\n    } );\n  }\n}\n","import {ActivatedRouteSnapshot, CanActivate, Router} from '@angular/router';\nimport {Injectable} from '@angular/core';\nimport {PopEntity, PopTemplate, SetPopMessage} from '../pop-common.model';\nimport {IsArray, IsObject, TitleCase} from '../pop-common-utility';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PopAccessGuardService implements CanActivate {\n  constructor(private router: Router) {\n\n  }\n\n  canActivate(route: ActivatedRouteSnapshot) {\n\n    if (IsObject(route, ['data']) && IsObject(PopEntity, true) && route.data.can_read && !(PopEntity.checkAccess(route.data.can_read, 'can_read'))) {\n      this._exit();\n    }\n    if (IsObject(route, ['data']) && IsObject(PopEntity, true) && route.data.can_update && !(PopEntity.checkAccess(route.data.can_update, 'can_update'))) {\n      this._exit();\n    }\n    // to check if the entity has entry access\n    if (IsObject(route, ['data'])) {\n      const internalName = route.data.internal_name ?? route.data.can_read;\n      const entityNames = PopEntity.getEntityEntryAccess(internalName);\n\n      if (IsArray(entityNames, true)) {\n        const inaccessible = [];\n        entityNames.map((entityName) => {\n          if (!PopEntity.checkAccess(entityName, 'can_read')) {\n            inaccessible.push(TitleCase(entityName.split('_').join(\" \")));\n          }\n        });\n        if (IsArray(inaccessible, true)) {\n          this._exitWithMessage(inaccessible.join(', '));\n          return false;\n        }\n      } else {\n        return true;\n      }\n    }\n    return true;\n  }\n\n\n  private _exit() {\n    SetPopMessage('Access Denied.');\n    this.router.navigateByUrl('system/error/403').then(() => true);\n  }\n\n  private _exitWithMessage(entityName: string) {\n    SetPopMessage(`Access Denied. You need permission for ${entityName}`);\n    this.router.navigateByUrl('system/error/403').then(() => true);\n  }\n}\n","import { Injectable, OnDestroy } from '@angular/core';\nimport { PopExtendService } from '../../../services/pop-extend.service';\n\n\n@Injectable({ providedIn: 'root' })\nexport class PopEntityExtendService extends PopExtendService implements OnDestroy {\n  constructor(){\n    super();\n  }\n\n\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n}\n","/*\n * Public API Surface of pop-common\n */\n\n// Modules\nimport { PopEntityFieldEditorComponent } from './lib/modules/entity/pop-entity-field-editor/pop-entity-field-editor.component';\n\nexport * from './lib/pop-common.module';\n\n\nexport * from './lib/modules/pop-initializer.module';\nexport * from './lib/modules/base/pop-base.module';\nexport * from './lib/modules/entity/pop-entity.module';\nexport * from './lib/modules/material/material.module';\nexport * from './lib/modules/app/pop-template.module';\nexport * from './lib/modules/app/pop-cac-filter/pop-cac-filter.module';\nexport * from './lib/modules/app/pop-left-menu/pop-left-menu.module';\nexport * from './lib/modules/app/pop-menu/pop-menu.module';\nexport * from './lib/modules/app/pop-widget-bar/pop-widget-bar.module';\nexport * from './lib/modules/base/pop-context-menu/pop-context-menu.module';\nexport * from './lib/modules/base/pop-dialogs/pop-dialogs.module';\nexport * from './lib/modules/base/pop-side-by-side/pop-side-by-side.module';\nexport * from './lib/modules/base/pop-field-item-group/pop-field-item-group.module';\nexport * from './lib/modules/base/pop-errors/pop-errors.module';\nexport * from './lib/modules/base/pop-indicators/pop-indicators.module';\nexport * from './lib/modules/base/pop-table/pop-table.module';\nexport * from './lib/modules/base/pop-field-item/pop-field-item.module';\nexport * from './lib/modules/base/pop-tab-menu/pop-tab-menu.module';\nexport * from './lib/modules/base/pop-ajax-dialog/pop-ajax-dialog.module';\n\n\n\n// Pipes\nexport * from './lib/pipes/phone.pipe';\nexport * from './lib/pipes/toYesNo.pipe';\nexport * from './lib/pipes/toActiveOrArchived.pipe';\nexport * from './lib/pipes/label.pipe';\nexport * from './lib/pipes/truncate.pipe';\n\n// Directives\nexport * from './lib/directives/lib-container.directive';\nexport * from './lib/directives/lib-track-caps-lock.directive';\nexport * from './lib/directives/lib-outside-click.directive';\n\n// Models\n\nexport * from './lib/pop-common-utility';\nexport * from './lib/pop-common-token.model';\nexport * from './lib/pop-common-dom.models';\nexport * from './lib/pop-common.model';\nexport * from './lib/pop-common-animations.model';\n\n\nexport * from './lib/modules/app/pop-left-menu/entity-menu.model';\nexport * from './lib/modules/base/pop-ajax-dialog/pop-ajax-dialog.model';\nexport * from './lib/modules/base/pop-context-menu/pop-context-menu.model';\nexport * from './lib/modules/base/pop-dialogs/pop-dialogs.model';\nexport * from './lib/modules/base/pop-field-item/pop-input/input-config.model';\nexport * from './lib/modules/base/pop-field-item/pop-number/number-config.model';\nexport * from './lib/modules/base/pop-field-item/pop-time/time-config.model';\nexport * from './lib/modules/base/pop-field-item/pop-date/pop-date-range/date-range-config.models';\nexport * from './lib/modules/base/pop-field-item/pop-date/date-config.model';\nexport * from './lib/modules/base/pop-field-item/pop-select/select-config.model';\nexport * from './lib/modules/base/pop-field-item/pop-select-list/select-list-config.model';\nexport * from './lib/modules/base/pop-field-item/pop-select-filter/select-filter-config.model';\nexport * from './lib/modules/base/pop-field-item/pop-radio/radio-config.model';\nexport * from './lib/modules/base/pop-field-item/pop-checkbox/checkbox-config.model';\nexport * from './lib/modules/base/pop-field-item/pop-textarea/textarea-config.model';\nexport * from './lib/modules/base/pop-field-item/pop-button/button-config.model';\nexport * from './lib/modules/base/pop-field-item/pop-switch/switch-config.model';\nexport * from './lib/modules/base/pop-field-item/pop-select-multi/select-mulit-config.model';\nexport * from './lib/modules/base/pop-field-item/pop-label/label-config.model';\nexport * from './lib/modules/base/pop-field-item/pop-text/text-config.model';\nexport * from './lib/modules/base/pop-field-item-group/pop-field-item-group.model';\nexport * from './lib/modules/base/pop-tab-menu/tab-menu.model';\nexport * from './lib/modules/base/pop-indicators/pop-indicators.model';\nexport * from './lib/modules/base/pop-side-by-side/pop-side-by-side.model';\nexport * from './lib/modules/base/pop-table/pop-table.model';\nexport * from './lib/modules/entity/pop-entity-utility';\nexport * from './lib/modules/entity/pop-entity-tab/pop-entity-tab.model';\nexport * from './lib/modules/entity/pop-entity-field/pop-entity-field.model';\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-scheme.model';\n\n// Base Components\n\nexport * from './lib/modules/app/pop-template.component';\n\nexport * from './lib/pop-extend.component';\nexport * from './lib/pop-extend-dynamic.component';\n\n\nexport * from './lib/modules/base/pop-dialogs/pop-navigation-dialog/pop-navigation-dialog.component';\nexport * from './lib/modules/base/pop-dialogs/pop-confirmation-dialog/pop-confirmation-dialog.component';\nexport * from './lib/modules/base/pop-ajax-dialog/pop-ajax-dialog.component';\nexport * from './lib/modules/base/pop-dialogs/pop-table-dialog/pop-table-dialog.component';\nexport * from './lib/modules/base/pop-indicators/main-spinner.component';\nexport * from './lib/modules/base/pop-context-menu/pop-context-menu.component';\nexport * from './lib/modules/base/pop-dialogs/pop-confirmation-dialog/pop-confirmation-dialog.component';\nexport * from './lib/modules/base/pop-dialogs/pop-navigation-dialog/pop-navigation-dialog.component';\nexport * from './lib/modules/base/pop-dialogs/pop-table-dialog/pop-table-dialog.component';\nexport * from './lib/modules/base/pop-dialogs/pop-action-dialog/pop-action-dialog.component';\nexport * from './lib/modules/base/pop-dialogs/pop-success-dialog/pop-success-dialog.component';\nexport * from './lib/modules/base/pop-dialogs/pop-message-dialog/pop-message-dialog.component';\nexport * from './lib/modules/base/pop-errors/pop-errors.component';\n\nexport * from './lib/modules/base/pop-field-item/pop-field-item.component';\nexport * from './lib/modules/base/pop-field-item/pop-date/pop-date.component';\nexport * from './lib/modules/base/pop-field-item/pop-datepicker/pop-datepicker.component'\nexport * from './lib/modules/base/pop-field-item/pop-time/pop-time.component';\nexport * from './lib/modules/base/pop-field-item/pop-checkbox/pop-checkbox.component';\nexport * from './lib/modules/base/pop-field-item/pop-input/pop-input.component';\nexport * from './lib/modules/base/pop-field-item/pop-button/pop-button.component';\nexport * from './lib/modules/base/pop-field-item/pop-label/pop-label.component';\nexport * from './lib/modules/base/pop-field-item/pop-text/pop-text.component';\nexport * from './lib/modules/base/pop-field-item/pop-radio/pop-radio.component';\nexport * from './lib/modules/base/pop-field-item/pop-select/pop-select.component';\nexport * from './lib/modules/base/pop-field-item/pop-select-filter/pop-select-filter.component';\nexport * from './lib/modules/base/pop-field-item/pop-select-list/pop-select-list.component';\n\nexport * from './lib/modules/base/pop-field-item/pop-select-modal/select-modal-config.model';\nexport * from './lib/modules/base/pop-field-item/pop-select-multi/pop-select-multi.component';\nexport * from './lib/modules/base/pop-field-item/pop-select-modal/pop-select-modal.component';\nexport * from './lib/modules/base/pop-field-item/pop-select-modal/pop-select-modal-dialog/pop-select-modal-dialog.component';\nexport * from './lib/modules/base/pop-field-item/pop-textarea/pop-textarea.component';\nexport * from './lib/modules/base/pop-field-item/pop-switch/pop-switch.component';\n\nexport * from './lib/modules/entity/pop-entity-list/pop-entity-advanced-search/pop-entity-advanced-search.component';\nexport * from './lib/modules/entity/pop-entity-field/assets/pop-entity-field-action-btn.component';\nexport * from './lib/modules/entity/pop-entity-field/assets/pop-entity-field-edit-icon/pop-entity-field-edit-icon.component';\nexport * from './lib/modules/entity/pop-entity-field/assets/pop-entity-field-dash.component';\nexport * from './lib/modules/entity/pop-entity-field/assets/pop-entity-field-spacer.component';\n\nexport * from './lib/modules/base/pop-table/pop-table.component';\nexport * from './lib/modules/base/pop-table/pop-table-view/pop-table-view.component';\nexport * from './lib/modules/app/pop-menu/pop-menu.component';\nexport * from './lib/modules/app/pop-left-menu/pop-left-menu.component';\nexport * from './lib/modules/app/pop-widget-bar/pop-widget-bar.component';\n\nexport * from './lib/modules/base/pop-tab-menu/pop-tab-menu.component';\nexport * from './lib/modules/base/pop-tab-menu/pop-tab-menu-section-bar/pop-tab-menu-section-bar.component';\n\n\n// Entity Components\nexport * from './lib/modules/entity/pop-entity-access/pop-entity-access.component';\nexport * from './lib/modules/entity/pop-entity-assignments/pop-entity-assignments.component';\nexport * from './lib/modules/entity/pop-entity-assignments/pop-entity-provider-dialog/pop-entity-provider-dialog.component';\nexport * from './lib/modules/entity/pop-entity-field/pop-entity-field.component';\nexport * from './lib/modules/entity/pop-entity-field/pop-entity-address/pop-entity-address.component';\nexport * from './lib/modules/entity/pop-entity-field/pop-entity-checkbox/pop-entity-checkbox.component';\nexport * from './lib/modules/entity/pop-entity-field/pop-entity-datetime/pop-entity-datetime.component';\nexport * from './lib/modules/entity/pop-entity-field/pop-entity-email/pop-entity-email.component';\nexport * from './lib/modules/entity/pop-entity-field/pop-entity-input/pop-entity-input.component';\nexport * from './lib/modules/entity/pop-entity-field/pop-entity-name/pop-entity-name.component';\nexport * from './lib/modules/entity/pop-entity-field/pop-entity-phone/pop-entity-phone.component';\nexport * from './lib/modules/entity/pop-entity-field/pop-entity-radio/pop-entity-radio.component';\nexport * from './lib/modules/entity/pop-entity-field/pop-entity-select/pop-entity-select.component';\nexport * from './lib/modules/entity/pop-entity-field/pop-entity-switch/pop-entity-switch.component';\nexport * from './lib/modules/entity/pop-entity-field/pop-entity-select-multi/pop-entity-select-multi.component';\nexport * from './lib/modules/entity/pop-entity-status/pop-entity-status.component';\n\nexport * from './lib/modules/base/pop-field-item-group/pop-field-item-group.component';\nexport * from './lib/modules/base/pop-side-by-side/pop-side-by-side.component';\n\nexport * from './lib/modules/entity/pop-entity-field-editor/pop-entity-field-editor.component';\nexport * from './lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-items/pop-entity-field-items.component';\nexport * from './lib/modules/entity/pop-entity-field-editor/pop-entity-field-preview/pop-entity-field-preview.component';\nexport * from './lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-settings.component';\n\n\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-asset-field-modal/pop-entity-asset-field-modal.component';\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-asset-field-modal/params/field-switch-setting.component';\n\n\nexport * from './lib/modules/entity/pop-entity-field-group/pop-entity-field-group.component';\n\nexport * from './lib/modules/entity/pop-entity-history/pop-entity-history.component';\nexport * from './lib/modules/entity/pop-entity-list/pop-entity-list.component';\nexport * from './lib/modules/entity/pop-entity-tab-list/pop-entity-tab-list.component';\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-scheme.component';\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-scheme-custom-component/pop-entity-scheme-custom.component';\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-scheme-details/pop-entity-scheme-details.component';\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-scheme-asset-pool/pop-entity-scheme-asset-pool.component';\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-scheme-asset-layout/pop-entity-scheme-asset-layout.component';\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-scheme-asset-layout/entity-scheme-layout-section/entity-scheme-layout-section.component';\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-scheme-asset-layout/entity-scheme-layout-section/entity-scheme-field-content/entity-scheme-field-content.component';\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-scheme-asset-layout/entity-scheme-layout-section/entity-scheme-component-content/entity-scheme-component-content.component';\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-scheme-asset-layout/entity-scheme-layout-section/entity-scheme-table-content/entity-scheme-table-content.component';\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-asset-component-modal/pop-entity-asset-component-modal.component';\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-asset-field-modal/params/field-input-setting.component';\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-asset-field-modal/params/field-label-setting.component';\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-asset-field-modal/params/field-radio-setting.component';\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-asset-field-modal/params/field-select-setting.component';\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-asset-field-modal/params/field-textarea-setting.component';\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-scheme-custom-component/pop-entity-scheme-custom.component';\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-asset-field-modal/pop-entity-asset-field-modal.component';\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-asset-field-modal/params/field-switch-setting.component';\n\nexport * from './lib/modules/entity/pop-entity-tab/pop-entity-tab.component';\nexport * from './lib/modules/entity/pop-entity-tab/pop-entity-tab-column.component';\nexport * from './lib/modules/entity/pop-entity-tab-menu/pop-entity-tab-menu.component';\nexport * from './lib/modules/entity/pop-entity-tab-menu/pop-entity-portal-menu/pop-entity-portal-menu.component';\n\nexport * from './lib/modules/app/pop-cac-filter/pop-cac-filter.component';\nexport * from './lib/modules/app/pop-cac-filter/pop-cac-filter-view/pop-cac-filter-view.component';\nexport * from './lib/modules/base/pop-field-item/asset/pop-field-item-loader.component';\nexport * from './lib/modules/base/pop-field-item/asset/pop-field-item-helper.component';\nexport * from './lib/modules/base/pop-field-item/asset/pop-field-item-error.component';\nexport * from './lib/modules/base/pop-field-item/pop-number/pop-number.component';\nexport * from './lib/modules/base/pop-field-item/pop-date/pop-date-range/pop-date-range.component';\nexport * from './lib/modules/base/pop-field-item/pop-date/pop-date-range/expansion-items/date-range-expansion-items.component';\nexport * from './lib/modules/base/pop-field-item/pop-date/datepicker-expansion-items/expansion-items.component';\nexport * from './lib/modules/base/pop-field-item/pop-date/pop-date-range/expansion-items/custom-panel/date-range-panel.component';\nexport * from './lib/modules/base/pop-field-item/pop-date/datepicker-expansion-items/custom-panel/custom-panel.component';\nexport * from './lib/modules/base/pop-field-item/pop-min-max/pop-min-max.component';\nexport * from './lib/modules/base/pop-field-item/pop-slider/pop-slider.component';\nexport * from './lib/modules/base/pop-ajax-dialog/pop-ajax-dialog.module';\nexport * from './lib/modules/entity/pop-entity-field/pop-entity-field-modal/pop-entity-field-modal.component';\nexport * from './lib/modules/entity/pop-entity-field/pop-entity-address/pop-entity-address-edit/pop-entity-address-edit.component';\nexport * from './lib/modules/entity/pop-entity-field/pop-entity-textarea/pop-entity-textarea.component';\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-scheme-field-setting/pop-entity-scheme-field-setting.component';\nexport * from './lib/modules/entity/pop-entity-field-editor/pop-entity-field-details/pop-entity-field-details.component';\nexport * from './lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-values/pop-entity-field-values.component';\nexport * from './lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-entries/pop-entity-field-entries.component';\nexport * from './lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/pop-entity-field-item-params.component';\nexport * from './lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-input-param.component';\nexport * from './lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-select-param.component';\nexport * from './lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-label-param.component';\nexport * from './lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-switch-param.component';\nexport * from './lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-textarea-param.component';\nexport * from './lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-radio-param.component';\nexport * from './lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-slider-param.component';\nexport * from './lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-number-param.component';\nexport * from './lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-number-param.component';\nexport * from './lib/modules/app/pop-cac-filter/pop-cac-filter.component';\nexport * from './lib/modules/app/pop-cac-filter/pop-cac-filter-view/pop-cac-filter-view.component';\nexport * from './lib/modules/base/pop-field-item/asset/pop-field-item-loader.component';\nexport * from './lib/modules/base/pop-field-item/asset/pop-field-item-helper.component';\nexport * from './lib/modules/base/pop-field-item/asset/pop-field-item-error.component';\nexport * from './lib/modules/base/pop-field-item/pop-number/pop-number.component';\nexport * from './lib/modules/base/pop-field-item/pop-date/pop-date-range/pop-date-range.component';\nexport * from './lib/modules/base/pop-field-item/pop-date/pop-date-range/expansion-items/date-range-expansion-items.component';\nexport * from './lib/modules/base/pop-field-item/pop-date/datepicker-expansion-items/expansion-items.component';\nexport * from './lib/modules/base/pop-field-item/pop-date/pop-date-range/expansion-items/custom-panel/date-range-panel.component';\nexport * from './lib/modules/base/pop-field-item/pop-date/datepicker-expansion-items/custom-panel/custom-panel.component';\nexport * from './lib/modules/base/pop-field-item/pop-min-max/pop-min-max.component';\nexport * from './lib/modules/base/pop-field-item/pop-slider/pop-slider.component';\nexport * from './lib/modules/entity/pop-entity-field/pop-entity-field-modal/pop-entity-field-modal.component';\nexport * from './lib/modules/entity/pop-entity-field/pop-entity-address/pop-entity-address-edit/pop-entity-address-edit.component';\nexport * from './lib/modules/entity/pop-entity-field/pop-entity-textarea/pop-entity-textarea.component';\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-scheme-field-setting/pop-entity-scheme-field-setting.component';\nexport * from './lib/modules/entity/pop-entity-field-editor/pop-entity-field-details/pop-entity-field-details.component';\n\n\n\n\n\n\n// Services\n\nexport * from './lib/services/pop-base.service';\nexport * from './lib/services/pop-base.interceptors';\nexport * from './lib/services/pop-extend.service';\nexport * from './lib/services/pop-cache.service';\nexport * from './lib/services/pop-common.service';\nexport * from './lib/services/pop-container.service';\nexport * from './lib/services/pop-credential.service';\nexport * from './lib/services/pop-datetime.service';\nexport * from './lib/services/pop-dom.service';\nexport * from './lib/services/pop-log.service';\nexport * from './lib/services/pop-pipe.service';\nexport * from './lib/services/pop-preference.service';\nexport * from './lib/services/pop-route-history.resolver';\nexport * from './lib/services/pop-auth-guard.guard';\nexport * from './lib/services/pop-route-verified.guard';\nexport * from './lib/services/pop-route-access.guard';\nexport * from './lib/services/pop-resource.service';\nexport * from './lib/services/pop-request.service';\nexport * from './lib/services/pop-display.service';\nexport * from './lib/services/pop-request-external.service';\nexport * from './lib/services/pop-validators';\nexport * from './lib/modules/base/pop-tab-menu/pop-tab-menu.service';\n\nexport * from './lib/modules/entity/services/pop-entity.service';\nexport * from './lib/modules/entity/services/pop-entity-event.service';\nexport * from './lib/modules/entity/services/pop-entity-extend.service';\nexport * from './lib/modules/entity/services/pop-entity-util-portal.service';\nexport * from './lib/modules/entity/services/pop-entity-repo.service';\n\nexport * from './lib/modules/entity/pop-entity-field-editor/pop-entity-field-editor.service';\nexport * from './lib/modules/entity/services/pop-entity-action.service';\nexport * from './lib/modules/entity/services/pop-entity-util-field.service';\nexport * from './lib/modules/entity/services/pop-entity-util-param.service';\n\n\n\n// Pop Entity\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n\nexport {PopTemplateAjaxLoaderComponent as ɵe} from './lib/modules/app/assets/ajax-loader.component';\nexport {PopTemplateBufferComponent as ɵi} from './lib/modules/app/assets/buffer.component';\nexport {PopTemplateErrorComponent as ɵh} from './lib/modules/app/assets/error.component';\nexport {PopTemplateGoodByeComponent as ɵg} from './lib/modules/app/assets/goodbye.component';\nexport {PopTemplateWelcomeComponent as ɵf} from './lib/modules/app/assets/welcome.component';\nexport {PopCacFilterBarService as ɵd} from './lib/modules/app/pop-cac-filter/pop-cac-filter.service';\nexport {PopMenuService as ɵa} from './lib/modules/app/pop-menu/pop-menu.service';\nexport {PopTemplateService as ɵc} from './lib/modules/app/pop-template.service';\nexport {DialogComponent as ɵu} from './lib/modules/base/pop-ajax-dialog/dialog/dialog.component';\nexport {ErrorComponent as ɵq} from './lib/modules/base/pop-errors/error/error.component';\nexport {GroupComponent as ɵs} from './lib/modules/base/pop-field-item-group/group/group.component';\nexport {InDialogComponent as ɵr} from './lib/modules/base/pop-field-item-group/in-dialog/in-dialog.component';\nexport {ClickOutsideDirective as ɵb} from './lib/modules/base/pop-field-item/click-outside-directive';\nexport {CustomDateAdapter as ɵo} from './lib/modules/base/pop-field-item/custom-date-adapter';\nexport {PopCacheRedirectComponent as ɵl} from './lib/modules/base/pop-redirects/pop-cache-redirect/pop-cache-redirect.component';\nexport {PopErrorRedirectComponent as ɵk} from './lib/modules/base/pop-redirects/pop-error-redirect/pop-error-redirect.component';\nexport {PopGuardRedirectComponent as ɵm} from './lib/modules/base/pop-redirects/pop-guard-redirect/pop-guard-redirect.component';\nexport {PopRedirectsModule as ɵj} from './lib/modules/base/pop-redirects/pop-redirects-module';\nexport {PopTableDialogComponent as ɵp} from './lib/modules/base/pop-table/pop-table-dialog/pop-table-dialog.component';\nexport {PopEntityFieldBoilerComponent as ɵv} from './lib/modules/entity/pop-entity-field/pop-entity-field-boiler.component';\nexport {PopEntitySchemeCustomSettingComponent as ɵx} from './lib/modules/entity/pop-entity-scheme/pop-entity-scheme-custom-setting/pop-entity-scheme-custom-setting.component';\nexport {PopEntitySchemeService as ɵw} from './lib/modules/entity/pop-entity-scheme/pop-entity-scheme.service';\nexport {PopEntitySchemeComponentService as ɵn} from './lib/modules/entity/services/pop-entity-scheme-component.service';\nexport {CharacterIconPipe as ɵt} from './lib/pipes/characterIcon.pipe';"],"names":["Pipe","ServiceInjector","PopEntity","PopHistory","PopPipe","PopDate","PopLog","PopEnv","PopComponentResolver","PopRequest","PopExternalApi","PopPortal","PopHref","PopMessage","PopCacheRedirectUrl","Router","PopAuth","PopBusiness","PopApp","PopUser","PopFilter","PopSchemeComponent","PopRouteAliasMap","PopAliasRouteMap","PopTemplate","InjectionToken","isDevMode","Injectable","HttpClient","map","forkJoin","catchError","of","HttpHeaders","HttpParams","HttpBackend","Inject","FormControl","EventEmitter","Component","Input","Output","Validators","ElementRef","HostBinding","ViewChild","NgModule","CommonModule","HttpClientModule","MatMenuModule","MatIconModule","MatTooltipModule","MatButtonModule","MatFormFieldModule","MatInputModule","MAT_SNACK_BAR_DATA","BehaviorSubject","Observable","Subject","tap","MatSnackBar","ViewEncapsulation","Renderer2","MatDialog","Overlay","MatAutocompleteModule","MatButtonToggleModule","MatCheckboxModule","MatCardModule","MatDatepickerModule","MatDialogModule","MatExpansionModule","MatGridListModule","MatListModule","MatPaginatorModule","MatProgressBarModule","MatProgressSpinnerModule","MatRadioModule","MatRippleModule","MatSelectModule","MatSidenavModule","MatSlideToggleModule","MatSortModule","MatTableModule","MatTabsModule","MatToolbarModule","MatSliderModule","RouterModule","trigger","state","style","transition","group","animate","ChangeDetectorRef","SelectionModel","debounceTime","HostListener","Directive","MatCalendar","DateAdapter","MAT_DATE_FORMATS","OverlayContainer","FormGroup","datePresets","ChangeDetectionStrategy","MatDatepicker","MatDialogRef","MAT_DIALOG_DATA","MatDateRangePicker","ReactiveFormsModule","FormsModule","NgxMaskModule","ScrollingModule","MatDividerModule","MatSnackBarModule","ViewContainerRef","spacetime","PopTableDialogComponent","FieldTemplate","data.default","filter","NavigationEnd","NavigationStart","ActivatedRoute","ComponentPortal","CdkPortalOutlet","Optional","MatTableDataSource","moveItemInArray","transferArrayItem","NativeDateAdapter","HTTP_INTERCEPTORS","ComponentFactoryResolver","MatIconRegistry","DomSanitizer","PlatformLocation","Injector","Location","MatMenuTrigger","MatPaginator","MatSort","DragDropModule","PortalModule","MatNativeDateModule"],"mappings":"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"}