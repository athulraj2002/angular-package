import { Pipe } from '@angular/core';
export class PhonePipe {
    transform(val, args = null) {
        if (!args)
            args = '(XXX) XXX-XXXX';
        if (typeof val === 'string' && String(val).length) {
            let viewVal = String(val).trim();
            viewVal = viewVal.replace(/^\+/, '');
            viewVal = viewVal.replace(/[^0-9]/g, '');
            viewVal = viewVal.slice(0, (args.match(/X/g) || []).length);
            let number = args;
            const digits = viewVal.split('');
            let index = 0;
            digits.forEach(function (digit) {
                index = number.indexOf('X');
                if (index >= 0) {
                    number = number.substr(0, index) + digit + number.substr(index + 1);
                }
            });
            let limit = args.length;
            if (index != -1)
                limit = index + 1;
            return number.substr(0, limit);
        }
        return val;
    }
}
PhonePipe.decorators = [
    { type: Pipe, args: [{
                name: 'phone'
            },] }
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGhvbmUucGlwZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3BvcC1jb21tb24vc3JjL2xpYi9waXBlcy9waG9uZS5waXBlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxJQUFJLEVBQWlCLE1BQU0sZUFBZSxDQUFDO0FBS3BELE1BQU0sT0FBTyxTQUFTO0lBQ3BCLFNBQVMsQ0FBRSxHQUFHLEVBQUUsSUFBSSxHQUFHLElBQUk7UUFFekIsSUFBSSxDQUFDLElBQUk7WUFBRyxJQUFJLEdBQUcsZ0JBQWdCLENBQUM7UUFFcEMsSUFBSSxPQUFPLEdBQUcsS0FBSyxRQUFRLElBQUksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sRUFBRTtZQUVqRCxJQUFJLE9BQU8sR0FBRyxNQUFNLENBQUUsR0FBRyxDQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDbkMsT0FBTyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUUsS0FBSyxFQUFFLEVBQUUsQ0FBRSxDQUFDO1lBQ3ZDLE9BQU8sR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFFLFNBQVMsRUFBRSxFQUFFLENBQUUsQ0FBQztZQUMzQyxPQUFPLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBRSxDQUFDLEVBQUUsQ0FBRSxJQUFJLENBQUMsS0FBSyxDQUFFLElBQUksQ0FBRSxJQUFJLEVBQUUsQ0FBRSxDQUFDLE1BQU0sQ0FBRSxDQUFDO1lBRWxFLElBQUksTUFBTSxHQUFHLElBQUksQ0FBQztZQUNsQixNQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFFLEVBQUUsQ0FBRSxDQUFDO1lBQ25DLElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQztZQUNkLE1BQU0sQ0FBQyxPQUFPLENBQUUsVUFBVSxLQUFLO2dCQUM3QixLQUFLLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBRSxHQUFHLENBQUUsQ0FBQztnQkFDOUIsSUFBSSxLQUFLLElBQUksQ0FBQyxFQUFFO29CQUNkLE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFFLENBQUMsRUFBRSxLQUFLLENBQUUsR0FBRyxLQUFLLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBRSxLQUFLLEdBQUcsQ0FBQyxDQUFFLENBQUM7aUJBQ3pFO1lBQ0gsQ0FBQyxDQUFFLENBQUM7WUFFSixJQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDO1lBQ3hCLElBQUksS0FBSyxJQUFJLENBQUMsQ0FBQztnQkFBRyxLQUFLLEdBQUcsS0FBSyxHQUFHLENBQUMsQ0FBQztZQUNwQyxPQUFPLE1BQU0sQ0FBQyxNQUFNLENBQUUsQ0FBQyxFQUFFLEtBQUssQ0FBRSxDQUFDO1NBQ2xDO1FBQ0QsT0FBTyxHQUFHLENBQUM7SUFDYixDQUFDOzs7WUE5QkYsSUFBSSxTQUFFO2dCQUNMLElBQUksRUFBRSxPQUFPO2FBQ2QiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQaXBlLCBQaXBlVHJhbnNmb3JtIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbkBQaXBlKCB7XG4gIG5hbWU6ICdwaG9uZSdcbn0gKVxuZXhwb3J0IGNsYXNzIFBob25lUGlwZSBpbXBsZW1lbnRzIFBpcGVUcmFuc2Zvcm0ge1xuICB0cmFuc2Zvcm0oIHZhbCwgYXJncyA9IG51bGwgKXtcblxuICAgIGlmKCAhYXJncyApIGFyZ3MgPSAnKFhYWCkgWFhYLVhYWFgnO1xuXG4gICAgaWYoIHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnICYmIFN0cmluZyh2YWwpLmxlbmd0aCApe1xuXG4gICAgICBsZXQgdmlld1ZhbCA9IFN0cmluZyggdmFsICkudHJpbSgpO1xuICAgICAgdmlld1ZhbCA9IHZpZXdWYWwucmVwbGFjZSggL15cXCsvLCAnJyApO1xuICAgICAgdmlld1ZhbCA9IHZpZXdWYWwucmVwbGFjZSggL1teMC05XS9nLCAnJyApO1xuICAgICAgdmlld1ZhbCA9IHZpZXdWYWwuc2xpY2UoIDAsICggYXJncy5tYXRjaCggL1gvZyApIHx8IFtdICkubGVuZ3RoICk7XG5cbiAgICAgIGxldCBudW1iZXIgPSBhcmdzO1xuICAgICAgY29uc3QgZGlnaXRzID0gdmlld1ZhbC5zcGxpdCggJycgKTtcbiAgICAgIGxldCBpbmRleCA9IDA7XG4gICAgICBkaWdpdHMuZm9yRWFjaCggZnVuY3Rpb24oIGRpZ2l0ICl7XG4gICAgICAgIGluZGV4ID0gbnVtYmVyLmluZGV4T2YoICdYJyApO1xuICAgICAgICBpZiggaW5kZXggPj0gMCApe1xuICAgICAgICAgIG51bWJlciA9IG51bWJlci5zdWJzdHIoIDAsIGluZGV4ICkgKyBkaWdpdCArIG51bWJlci5zdWJzdHIoIGluZGV4ICsgMSApO1xuICAgICAgICB9XG4gICAgICB9ICk7XG5cbiAgICAgIGxldCBsaW1pdCA9IGFyZ3MubGVuZ3RoO1xuICAgICAgaWYoIGluZGV4ICE9IC0xICkgbGltaXQgPSBpbmRleCArIDE7XG4gICAgICByZXR1cm4gbnVtYmVyLnN1YnN0ciggMCwgbGltaXQgKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbDtcbiAgfVxufVxuIl19