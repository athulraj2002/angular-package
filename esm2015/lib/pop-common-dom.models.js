export function GetServiceDom() {
    return {
        subscriber: {},
        delay: {},
        interval: {},
        handler: {},
        session: {},
        state: {},
    };
}
export function DestroyServiceDom(dom) {
    if (typeof (dom.interval) === 'object') {
        Object.keys(dom.interval).map((name) => {
            if (dom.interval[name]) {
                clearInterval(dom.interval[name]);
            }
            if (dom.interval[name]) {
                clearInterval(dom.interval[name]);
            }
        });
    }
    if (typeof (dom.delay) === 'object') {
        Object.keys(dom.delay).map((name) => {
            if (dom.delay[name]) {
                clearTimeout(dom.delay[name]);
            }
            if (dom.delay[name]) {
                clearTimeout(dom.delay[name]);
            }
        });
    }
    if (typeof (dom.subscriber) === 'object') {
        Object.keys(dom.subscriber).map((name) => {
            if (dom.subscriber[name] && typeof dom.subscriber[name].unsubscribe === 'function') {
                dom.subscriber[name].unsubscribe();
            }
        });
    }
}
export function GetServiceAssetContainer() {
    return {
        map: {}
    };
}
export function GetServiceUiContainer() {
    return {
        state: { loaded: false, loading: true, refreshing: false },
        active: {},
        session: {},
        asset: {
            map: {},
        }
    };
}
/************************************************************************************************
 *                                                                                              *
 *                                          Service                                             *
 *                                      ( Handles Services )                                    *
 *                                                                                              *
 ************************************************************************************************/
export function GetServiceContainer() {
    return {};
}
export function GetComponentUiContainer() {
    return {
        error: {
            code: 0,
            message: ''
        },
        overhead: 0,
        height: {
            outer: null,
            inner: null,
            default: 0
        },
        width: {},
        state: {},
        resource: {
            map: {},
        },
        active: {
            map: {},
        },
        session: {},
        asset: {
            map: {},
        },
        contextMenu: {
            config: undefined,
            configure: undefined,
        }
    };
}
export function AbstractUiMixin(Base = class {
}) {
    return class extends Base {
        constructor() {
            super(...arguments);
            this.ui = GetComponentUiContainer();
        }
    };
}
export function GetComponentTraitContainer() {
    return {
        bubble: false
    };
}
export function GetComponentAssetContainer() {
    return {
        map: {}
    };
}
export function GetComponentDomContainer() {
    const dom = {
        /**
         * Service will preserve session, state, etc and allow all components on the core to communicate and share assets`
         */
        active: {},
        error: {
            code: 0,
            message: ''
        },
        overhead: 0,
        height: {
            outer: null,
            inner: null,
            default: 0
        },
        width: {},
        state: {},
        session: {},
        contextMenu: {
            config: undefined,
            configure: undefined,
        },
        repo: undefined,
        /**
         * Store all subscribers here
         */
        subscriber: {},
        /**
         * Store all time intervals here
         */
        interval: {},
        /**
         * Store all timeouts here
         */
        delay: {},
        handler: {},
    };
    return dom;
}
export function AbstractDomMixin(Base = class {
}) {
    return class extends Base {
        constructor() {
            super(...arguments);
            this.dom = GetComponentDomContainer();
        }
    };
}
export function DestroyComponentDom(dom) {
    if (typeof (dom.interval) === 'object') {
        Object.keys(dom.interval).map((name) => {
            if (dom.interval[name]) {
                clearInterval(dom.interval[name]);
            }
            if (dom.interval[name]) {
                clearInterval(dom.interval[name]);
            }
        });
    }
    if (typeof (dom.delay) === 'object') {
        Object.keys(dom.delay).map((name) => {
            if (dom.delay[name]) {
                clearTimeout(dom.delay[name]);
            }
            if (dom.delay[name]) {
                clearTimeout(dom.delay[name]);
            }
        });
    }
    if (typeof (dom.subscriber) === 'object') {
        Object.keys(dom.subscriber).map((name) => {
            if (dom.subscriber[name] && typeof dom.subscriber[name].unsubscribe === 'function') {
                dom.subscriber[name].unsubscribe();
            }
        });
    }
}
export function GetComponentTemplateContainer() {
    const template = {
        container: undefined,
        refs: [],
        ref_events: []
    };
    return template;
}
export function AbstractTemplateMixin(Base = class {
}) {
    return class extends Base {
        constructor() {
            super(...arguments);
            this.template = GetComponentTemplateContainer();
        }
    };
}
export function DestroyComponentTemplate(template) {
    if (typeof template === 'object') {
        template.ref_events.map((subscription) => {
            if (subscription && typeof subscription.unsubscribe === 'function') {
                subscription.unsubscribe();
            }
        });
        template.refs = template.refs.map(function (componentRef) {
            if (componentRef && typeof componentRef.destroy === 'function') {
                componentRef.destroy();
            }
            componentRef = null;
            return null;
        });
        if (template.container)
            template.container.clear();
        template = null;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG9wLWNvbW1vbi1kb20ubW9kZWxzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vcHJvamVjdHMvcG9wLWNvbW1vbi9zcmMvbGliL3BvcC1jb21tb24tZG9tLm1vZGVscy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFnQ0EsTUFBTSxVQUFVLGFBQWE7SUFDM0IsT0FBNEI7UUFDMUIsVUFBVSxFQUFFLEVBQUU7UUFDZCxLQUFLLEVBQUUsRUFBRTtRQUNULFFBQVEsRUFBRSxFQUFFO1FBQ1osT0FBTyxFQUFFLEVBQUU7UUFDWCxPQUFPLEVBQUUsRUFBRTtRQUNYLEtBQUssRUFBRSxFQUFFO0tBQ1YsQ0FBQztBQUNKLENBQUM7QUFFRCxNQUFNLFVBQVUsaUJBQWlCLENBQUMsR0FBd0I7SUFDeEQsSUFBSSxPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxLQUFLLFFBQVEsRUFBRTtRQUN0QyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLEVBQUUsRUFBRTtZQUNyQyxJQUFJLEdBQUcsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEVBQUU7Z0JBQ3RCLGFBQWEsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7YUFDbkM7WUFDRCxJQUFJLEdBQUcsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEVBQUU7Z0JBQ3RCLGFBQWEsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7YUFDbkM7UUFDSCxDQUFDLENBQUMsQ0FBQztLQUNKO0lBRUQsSUFBSSxPQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxLQUFLLFFBQVEsRUFBRTtRQUNuQyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLEVBQUUsRUFBRTtZQUNsQyxJQUFJLEdB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SUFFRixPQUFPLFFBQVEsQ0FBQztBQUNsQixDQUFDO0FBRUQsTUFBTSxVQUFVLHFCQUFxQixDQUE0QixPQUFXO0NBQ25FO0lBQ1AsT0FBTyxLQUFNLFNBQVEsSUFBSTtRQUFsQjs7WUFDTCxhQUFRLEdBQStCLDZCQUE2QixFQUFFLENBQUM7UUFDekUsQ0FBQztLQUFBLENBQUM7QUFDSixDQUFDO0FBR0QsTUFBTSxVQUFVLHdCQUF3QixDQUFDLFFBQW9DO0lBQzNFLElBQUksT0FBTyxRQUFRLEtBQUssUUFBUSxFQUFFO1FBQ2hDLFFBQVEsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUMsWUFBMEIsRUFBRSxFQUFFO1lBQ3JELElBQUksWUFBWSxJQUFJLE9BQU8sWUFBWSxDQUFDLFdBQVcsS0FBSyxVQUFVLEVBQUU7Z0JBQ2xFLFlBQVksQ0FBQyxXQUFXLEVBQUUsQ0FBQzthQUM1QjtRQUNILENBQUMsQ0FBQyxDQUFDO1FBRUgsUUFBUSxDQUFDLElBQUksR0FBRyxRQUFRLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFVLFlBQStCO1lBQ3pFLElBQUksWUFBWSxJQUFJLE9BQU8sWUFBWSxDQUFDLE9BQU8sS0FBSyxVQUFVLEVBQUU7Z0JBQzlELFlBQVksQ0FBQyxPQUFPLEVBQUUsQ0FBQzthQUN4QjtZQUNELFlBQVksR0FBRyxJQUFJLENBQUM7WUFDcEIsT0FBTyxJQUFJLENBQUM7UUFDZCxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksUUFBUSxDQUFDLFNBQVM7WUFBRSxRQUFRLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxDQUFDO1FBRW5ELFFBQVEsR0FBRyxJQUFJLENBQUM7S0FDakI7QUFDSCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQ29yZUNvbmZpZyxcbiAgRGljdGlvbmFyeSxcbiAgRHluYW1pY0NvbXBvbmVudEludGVyZmFjZSxcbiAgRW50aXR5QWNjZXNzSW50ZXJmYWNlLFxuICBFdmVudENhbGxiYWNrLFxuICBQb3BCYXNlRXZlbnRJbnRlcmZhY2UsXG4gIFNlcnZpY2VJbmplY3RvclxufSBmcm9tICcuL3BvcC1jb21tb24ubW9kZWwnO1xuaW1wb3J0IHtTdWJzY3JpcHRpb259IGZyb20gJ3J4anMnO1xuaW1wb3J0IHtQb3BDb250ZXh0TWVudUNvbmZpZ30gZnJvbSAnLi9tb2R1bGVzL2Jhc2UvcG9wLWNvbnRleHQtbWVudS9wb3AtY29udGV4dC1tZW51Lm1vZGVsJztcbmltcG9ydCB7Q29tcG9uZW50UmVmLCBFbGVtZW50UmVmLCBFdmVudEVtaXR0ZXIsIFZpZXdDb250YWluZXJSZWZ9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtQb3BMb2dTZXJ2aWNlfSBmcm9tICcuL3NlcnZpY2VzL3BvcC1sb2cuc2VydmljZSc7XG5pbXBvcnQge0h0dHBFcnJvclJlc3BvbnNlfSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG5cblxuZXhwb3J0IGludGVyZmFjZSBTZXJ2aWNlRG9tSW50ZXJmYWNlIHtcbiAgc3Vic2NyaWJlcj86IERpY3Rpb25hcnk8U3Vic2NyaXB0aW9uPjtcbiAgZGVsYXk/OiBEaWN0aW9uYXJ5PGFueT47XG4gIGludGVydmFsPzogRGljdGlvbmFyeTxhbnk+O1xuICBoYW5kbGVyPzoge1xuICAgIGNvcmU/OiBFdmVudENhbGxiYWNrLFxuICAgIGJ1YmJsZT86IEV2ZW50Q2FsbGJhY2ssXG4gICAgW2tleTogc3RyaW5nXTogRXZlbnRDYWxsYmFja1xuICB9O1xuICBzZXNzaW9uPzogRGljdGlvbmFyeTxhbnk+O1xuICBzdGF0ZTogRG9tU3RhdGVJbnRlcmZhY2U7XG4gIHNldFN1YnNjcmliZXI/OiAoc3Vic2NyaXB0aW9uS2V5OiBzdHJpbmcsIHN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uKSA9PiB2b2lkO1xuICBzZXRUaW1lb3V0PzogKHRpbWVvdXRLZXk6IHN0cmluZywgY2FsbGJhY2ssIGRlbGF5PzogbnVtYmVyKSA9PiB2b2lkO1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBHZXRTZXJ2aWNlRG9tKCk6IFNlcnZpY2VEb21JbnRlcmZhY2Uge1xuICByZXR1cm4gPFNlcnZpY2VEb21JbnRlcmZhY2U+e1xuICAgIHN1YnNjcmliZXI6IHt9LFxuICAgIGRlbGF5OiB7fSxcbiAgICBpbnRlcnZhbDoge30sXG4gICAgaGFuZGxlcjoge30sXG4gICAgc2Vzc2lvbjoge30sXG4gICAgc3RhdGU6IHt9LFxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gRGVzdHJveVNlcnZpY2VEb20oZG9tOiBTZXJ2aWNlRG9tSW50ZXJmYWNlKTogdm9pZCB7XG4gIGlmICh0eXBlb2YgKGRvbS5pbnRlcnZhbCkgPT09ICdvYmplY3QnKSB7XG4gICAgT2JqZWN0LmtleXMoZG9tLmludGVydmFsKS5tYXAoKG5hbWUpID0+IHtcbiAgICAgIGlmIChkb20uaW50ZXJ2YWxbbmFtZV0pIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbChkb20uaW50ZXJ2YWxbbmFtZV0pO1xuICAgICAgfVxuICAgICAgaWYgKGRvbS5pbnRlcnZhbFtuYW1lXSkge1xuICAgICAgICBjbGVhckludGVydmFsKGRvbS5pbnRlcnZhbFtuYW1lXSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBpZiAodHlwZW9mIChkb20uZGVsYXkpID09PSAnb2JqZWN0Jykge1xuICAgIE9iamVjdC5rZXlzKGRvbS5kZWxheSkubWFwKChuYW1lKSA9PiB7XG4gICAgICBpZiAoZG9tLmRlbGF5W25hbWVdKSB7XG4gICAgICAgIGNsZWFyVGltZW91dChkb20uZGVsYXlbbmFtZV0pO1xuICAgICAgfVxuICAgICAgaWYgKGRvbS5kZWxheVtuYW1lXSkge1xuICAgICAgICBjbGVhclRpbWVvdXQoZG9tLmRlbGF5W25hbWVdKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBpZiAodHlwZW9mIChkb20uc3Vic2NyaWJlcikgPT09ICdvYmplY3QnKSB7XG4gICAgT2JqZWN0LmtleXMoZG9tLnN1YnNjcmliZXIpLm1hcCgobmFtZSkgPT4ge1xuICAgICAgaWYgKGRvbS5zdWJzY3JpYmVyW25hbWVdICYmIHR5cGVvZiBkb20uc3Vic2NyaWJlcltuYW1lXS51bnN1YnNjcmliZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBkb20uc3Vic2NyaWJlcltuYW1lXS51bnN1YnNjcmliZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cblxuZXhwb3J0IGludGVyZmFjZSBEb21TdGF0ZUludGVyZmFjZSB7XG4gIGF1dGhlbnRpY2F0ZWQ/OiBib29sZWFuO1xuICBhcmNoaXZlZD86IGJvb2xlYW47XG4gIGNsb3NlZD86IGJvb2xlYW47XG4gIGxvYWRlZD86IGJvb2xlYW47XG4gIGxvYWRlcj86IGJvb2xlYW47XG4gIGxvYWRpbmc/OiBib29sZWFuO1xuICBpc0Rldk1vZGU/OiBib29sZWFuO1xuICBvcGVuPzogYm9vbGVhbjtcbiAgcmVmcmVzaGluZz86IGJvb2xlYW47XG4gIHBlbmRpbmc/OiBib29sZWFuO1xuICBzdWNjZXNzPzogYm9vbGVhbjtcbiAgdmFsaWRhdGVkPzogYm9vbGVhbjtcbiAgc2hvd0FyY2hpdmVkPzogYm9vbGVhbjtcbiAgaGlkZGVuPzogYm9vbGVhbjtcbiAgdGVtcGxhdGU/OiBudW1iZXIgfCBib29sZWFuIHwgc3RyaW5nO1xuICB2aXNpYmlsaXR5PzogYm9vbGVhbjtcblxuICBba2V5OiBzdHJpbmddOiBhbnk7XG59XG5cblxuZXhwb3J0IHR5cGUgQ29uc3RydWN0b3I8VD4gPSBuZXcoLi4uYXJnczogYW55W10pID0+IFQ7XG5cblxuZXhwb3J0IGludGVyZmFjZSBTZXJ2aWNlQ29udGFpbmVySW50ZXJmYWNlIHtcbiAgW2tleTogc3RyaW5nXTogRGljdGlvbmFyeTxhbnk+O1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBHZXRTZXJ2aWNlQXNzZXRDb250YWluZXIoKTogU2VydmljZUFzc2V0Q29udGFpbmVySW50ZXJmYWNlIHtcbiAgcmV0dXJuIHtcbiAgICBtYXA6IHt9XG4gIH07XG59XG5cblxuZXhwb3J0IGludGVyZmFjZSBTZXJ2aWNlVWlDb250YWluZXJJbnRlcmZhY2Uge1xuICBzdGF0ZTogRG9tU3RhdGVJbnRlcmZhY2U7XG4gIGFjdGl2ZTogRGljdGlvbmFyeTxhbnk+O1xuICBzZXNzaW9uOiBEaWN0aW9uYXJ5PGFueT47XG4gIGFzc2V0OiB7XG4gICAgbWFwOiBEaWN0aW9uYXJ5PGFueT5cbiAgICBba2V5OiBzdHJpbmddOiBhbnk7XG4gIH07XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIEdldFNlcnZpY2VVaUNvbnRhaW5lcigpOiBTZXJ2aWNlVWlDb250YWluZXJJbnRlcmZhY2Uge1xuICByZXR1cm4ge1xuICAgIHN0YXRlOiB7bG9hZGVkOiBmYWxzZSwgbG9hZGluZzogdHJ1ZSwgcmVmcmVzaGluZzogZmFsc2V9LFxuICAgIGFjdGl2ZToge30sXG4gICAgc2Vzc2lvbjoge30sXG4gICAgYXNzZXQ6IHtcbiAgICAgIG1hcDogPERpY3Rpb25hcnk8YW55Pj57fSxcbiAgICB9XG4gIH07XG59XG5cblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTZXJ2aWNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICggSGFuZGxlcyBTZXJ2aWNlcyApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuXG5leHBvcnQgZnVuY3Rpb24gR2V0U2VydmljZUNvbnRhaW5lcigpOiBTZXJ2aWNlQ29udGFpbmVySW50ZXJmYWNlIHtcbiAgcmV0dXJuIDxTZXJ2aWNlQ29udGFpbmVySW50ZXJmYWNlPnt9O1xufVxuXG5cbmV4cG9ydCBpbnRlcmZhY2UgU2VydmljZUFzc2V0Q29udGFpbmVySW50ZXJmYWNlIHtcbiAgbWFwPzogRGljdGlvbmFyeTxhbnk+O1xuXG4gIFtrZXk6IHN0cmluZ106IGFueTtcbn1cblxuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJhc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICggICkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG5leHBvcnQgaW50ZXJmYWNlIEhhc05hbWUge1xuICBuYW1lOiBzdHJpbmc7XG59XG5cblxuZXhwb3J0IGludGVyZmFjZSBIYXNEb20ge1xuICBkb206IENvbXBvbmVudERvbUludGVyZmFjZTtcbn1cblxuXG5leHBvcnQgaW50ZXJmYWNlIEhhc1Bvc2l0aW9uIHtcbiAgcG9zaXRpb246IG51bWJlcjtcbn1cblxuXG5leHBvcnQgaW50ZXJmYWNlIEhhc0NvcmUge1xuICBjb3JlOiBDb3JlQ29uZmlnO1xufVxuXG5cbmV4cG9ydCBpbnRlcmZhY2UgSGFzVGVtcGxhdGUge1xuICB0ZW1wbGF0ZTogQ29tcG9uZW50VGVtcGxhdGVJbnRlcmZhY2U7XG59XG5cblxuZXhwb3J0IGludGVyZmFjZSBIYXNFdmVudHMge1xuICBldmVudHM6IEV2ZW50RW1pdHRlcjxQb3BCYXNlRXZlbnRJbnRlcmZhY2U+O1xufVxuXG5cbmV4cG9ydCBpbnRlcmZhY2UgSGFzVHJhaXQge1xuICB0cmFpdDogQ29tcG9uZW50VHJhaXRDb250YWluZXJJbnRlcmZhY2U7XG59XG5cblxuZXhwb3J0IGludGVyZmFjZSBTZXRDb250cm9sIHtcbiAgc2V0Q29udHJvbDogKCkgPT4gdm9pZDtcbn1cblxuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCAgKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcG9uZW50VWlDb250YWluZXJJbnRlcmZhY2Uge1xuICBlcnJvcj86IHsgY29kZT86IG51bWJlciwgbWVzc2FnZTogc3RyaW5nIH07XG4gIG92ZXJoZWFkOiBudW1iZXI7XG4gIGhlaWdodDoge1xuICAgIGNvbnRlbnQ/OiBudW1iZXJcbiAgICBkZWZhdWx0OiBudW1iZXJcbiAgICBpbm5lcjogbnVtYmVyLFxuICAgIG1pbj86IG51bWJlcixcbiAgICBtYXg/OiBudW1iZXIsXG4gICAgb3V0ZXI6IG51bWJlcixcbiAgICBwYXJlbnQ/OiBudW1iZXJcbiAgICBzcGxpdD86IG51bWJlclxuICB9O1xuXG4gIHdpZHRoOiB7XG4gICAgb3V0ZXI/OiBudW1iZXIsXG4gICAgaW5uZXI/OiBudW1iZXIsXG4gICAgbWluPzogbnVtYmVyLFxuICAgIG1heD86IG51bWJlcixcbiAgICBwYXJlbnQ/OiBudW1iZXJcbiAgfTtcbiAgc3RhdGU6IERvbVN0YXRlSW50ZXJmYWNlO1xuICBhY3RpdmU6IERpY3Rpb25hcnk8YW55PjtcbiAgc2Vzc2lvbjogRGljdGlvbmFyeTxhbnk+O1xuICByZXNvdXJjZToge1xuICAgIG1hcDogRGljdGlvbmFyeTxhbnk+XG4gICAgW2tleTogc3RyaW5nXTogYW55O1xuICB9O1xuICBhc3NldDoge1xuICAgIG1hcD86IERpY3Rpb25hcnk8YW55PlxuICAgIFtrZXk6IHN0cmluZ106IGFueTtcbiAgfTtcblxuICBjb250ZXh0TWVudToge1xuICAgIGNvbmZpZzogUG9wQ29udGV4dE1lbnVDb25maWc7XG4gICAgY29uZmlndXJlOiBDYWxsYWJsZUZ1bmN0aW9uO1xuICB9O1xuXG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIEdldENvbXBvbmVudFVpQ29udGFpbmVyKCk6IENvbXBvbmVudFVpQ29udGFpbmVySW50ZXJmYWNlIHtcbiAgcmV0dXJuIHtcbiAgICBlcnJvcjoge1xuICAgICAgY29kZTogMCxcbiAgICAgIG1lc3NhZ2U6ICcnXG4gICAgfSxcbiAgICBvdmVyaGVhZDogMCxcbiAgICBoZWlnaHQ6IHtcbiAgICAgIG91dGVyOiBudWxsLFxuICAgICAgaW5uZXI6IG51bGwsXG4gICAgICBkZWZhdWx0OiAwXG4gICAgfSxcbiAgICB3aWR0aDoge30sXG4gICAgc3RhdGU6IDxEb21TdGF0ZUludGVyZmFjZT57fSxcbiAgICByZXNvdXJjZToge1xuICAgICAgbWFwOiA8RGljdGlvbmFyeTxhbnk+Pnt9LFxuICAgIH0sXG4gICAgYWN0aXZlOiB7XG4gICAgICBtYXA6IDxEaWN0aW9uYXJ5PGFueT4+e30sXG4gICAgfSxcbiAgICBzZXNzaW9uOiA8RGljdGlvbmFyeTxhbnk+Pnt9LFxuICAgIGFzc2V0OiB7XG4gICAgICBtYXA6IDxEaWN0aW9uYXJ5PGFueT4+e30sXG4gICAgfSxcbiAgICBjb250ZXh0TWVudToge1xuICAgICAgY29uZmlnOiA8UG9wQ29udGV4dE1lbnVDb25maWc+dW5kZWZpbmVkLFxuICAgICAgY29uZmlndXJlOiB1bmRlZmluZWQsXG4gICAgfVxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gQWJzdHJhY3RVaU1peGluPFQgZXh0ZW5kcyBDb25zdHJ1Y3Rvcjx7fT4+KEJhc2U6IFQgPSAoY2xhc3Mge1xufSBhcyBhbnkpKTogYW55IHtcbiAgcmV0dXJuIGNsYXNzIGV4dGVuZHMgQmFzZSB7XG4gICAgdWk6IENvbXBvbmVudFVpQ29udGFpbmVySW50ZXJmYWNlID0gR2V0Q29tcG9uZW50VWlDb250YWluZXIoKTtcbiAgfTtcbn1cblxuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRyYWl0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoICApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG5leHBvcnQgaW50ZXJmYWNlIENvbXBvbmVudFRyYWl0Q29udGFpbmVySW50ZXJmYWNlIHtcbiAgYnViYmxlOiBib29sZWFuO1xuXG4gIFtrZXk6IHN0cmluZ106IGJvb2xlYW47XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIEdldENvbXBvbmVudFRyYWl0Q29udGFpbmVyKCk6IENvbXBvbmVudFRyYWl0Q29udGFpbmVySW50ZXJmYWNlIHtcbiAgcmV0dXJuIHtcbiAgICBidWJibGU6IGZhbHNlXG4gIH07XG59XG5cblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXNzZXQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCAgKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuZXhwb3J0IGludGVyZmFjZSBDb21wb25lbnRBc3NldENvbnRhaW5lckludGVyZmFjZSB7XG4gIG1hcD86IERpY3Rpb25hcnk8YW55PjtcblxuICBba2V5OiBzdHJpbmddOiBhbnk7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIEdldENvbXBvbmVudEFzc2V0Q29udGFpbmVyKCk6IENvbXBvbmVudEFzc2V0Q29udGFpbmVySW50ZXJmYWNlIHtcbiAgcmV0dXJuIHtcbiAgICBtYXA6IHt9XG4gIH07XG59XG5cblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEb20gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICogICAgICAgICAgICAgICAgICAgICggSGFuZGxlcyBTdWJzY3JpcHRpb25zLCBUaW1lb3V0cywgSW50ZXJ2YWxzLCBldGMgKSAgICAgICAgICAgICAgICAgICAgICAgKlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuXG5leHBvcnQgaW50ZXJmYWNlIENvbXBvbmVudERvbUludGVyZmFjZSB7XG4gIGFjdGl2ZTogRGljdGlvbmFyeTxhbnk+O1xuICBhY2Nlc3M6IEVudGl0eUFjY2Vzc0ludGVyZmFjZTtcblxuICBjb250ZXh0TWVudToge1xuICAgIGNvbmZpZzogUG9wQ29udGV4dE1lbnVDb25maWc7XG4gICAgY29uZmlndXJlOiBDYWxsYWJsZUZ1bmN0aW9uO1xuICB9O1xuXG5cbiAgZGVsYXk6IERpY3Rpb25hcnk8YW55PjtcblxuICBlcnJvcj86IHsgY29kZT86IG51bWJlciwgbWVzc2FnZTogc3RyaW5nIH07XG5cbiAgaW50ZXJ2YWw6IERpY3Rpb25hcnk8YW55PjtcblxuICBoYW5kbGVyOiB7XG4gICAgY29yZT86IEV2ZW50Q2FsbGJhY2ssXG4gICAgYnViYmxlPzogRXZlbnRDYWxsYmFjayxcbiAgICBba2V5OiBzdHJpbmddOiBFdmVudENhbGxiYWNrXG4gIH07XG5cbiAgaGVpZ2h0OiB7XG4gICAgY29udGVudD86IG51bWJlclxuICAgIGRlZmF1bHQ6IG51bWJlclxuICAgIGlubmVyOiBudW1iZXIsXG4gICAgbWluPzogbnVtYmVyLFxuICAgIG1heD86IG51bWJlcixcbiAgICBvdXRlcjogbnVtYmVyLFxuICAgIHBhcmVudD86IG51bWJlclxuICAgIHNwbGl0PzogbnVtYmVyXG4gIH07XG5cbiAgb3ZlcmhlYWQ6IG51bWJlcjtcblxuICB3aWR0aDoge1xuICAgIG91dGVyPzogbnVtYmVyLFxuICAgIGlubmVyPzogbnVtYmVyLFxuICAgIG1pbj86IG51bWJlcixcbiAgICBtYXg/OiBudW1iZXIsXG4gICAgcGFyZW50PzogbnVtYmVyXG4gIH07XG4gIHN0YXRlOiBEb21TdGF0ZUludGVyZmFjZTtcblxuICBzZXNzaW9uOiBEaWN0aW9uYXJ5PGFueT47XG5cbiAgc3Vic2NyaWJlcjogRGljdGlvbmFyeTxTdWJzY3JpcHRpb24+O1xuXG5cbiAgcmVwbzogYW55O1xuICBpbmplY3RSZXBvOiAoKSA9PiB2b2lkO1xuICBsb2FkaW5nOiAoKSA9PiB2b2lkO1xuICByZWZyZXNoaW5nOiAoKSA9PiB2b2lkO1xuICBfZXh0ZW5kOiAoKSA9PiBQcm9taXNlPGJvb2xlYW4+O1xuICBjb25maWd1cmU6ICgpID0+IFByb21pc2U8Ym9vbGVhbj47XG4gIHJlZ2lzdGVyOiAoKSA9PiBQcm9taXNlPGJvb2xlYW4+O1xuICBwcm9jZWVkOiAoKSA9PiBQcm9taXNlPGJvb2xlYW4+O1xuICByZWFkeTogKCkgPT4gdm9pZDtcbiAgZmluZDogKGFzc2V0VHlwZTogJ2NvbXBvbmVudCcgfCAnZmllbGQnIHwgJ2VsJywgaWQ6IG51bWJlciB8IHN0cmluZykgPT4gYW55O1xuICBmb2N1czogKHF1ZXJ5U2VsZWN0b3I6IHN0cmluZywgZGVsYXk6IG51bWJlcikgPT4gdm9pZDtcbiAgZm9jdXNOZXh0SW5wdXQ6IChlbDogRWxlbWVudFJlZikgPT4gdm9pZDtcbiAgc2V0RXJyb3I6IChlcnI6IEh0dHBFcnJvclJlc3BvbnNlLCBtb2RhbDogYm9vbGVhbikgPT4gdm9pZDtcbiAgc2V0SGVpZ2h0OiAocGFyZW50SGVpZ2h0OiBudW1iZXIsIG92ZXJoZWFkOiBudW1iZXIpID0+IHZvaWQ7XG4gIHNldEhlaWdodFdpdGhQYXJlbnQ6IChwYXJlbnRDbGFzc05hbWU6IHN0cmluZywgb3ZlcmhlYWQ/OiBudW1iZXIsIGRlZmF1bHRIZWlnaHQ/OiBudW1iZXIpID0+IFByb21pc2U8Ym9vbGVhbj47XG4gIHNldFdpdGhDb21wb25lbnRJbm5lckhlaWdodDogKGNvbXBvbmVudDogc3RyaW5nLCBjb21wb25lbnRJZCwgb3ZlcmhlYWQ6IG51bWJlciwgZGVmYXVsdEhlaWdodDogbnVtYmVyKSA9PiBQcm9taXNlPG51bWJlcj47XG4gIHVubG9hZDogKCkgPT4gUHJvbWlzZTxib29sZWFuPjtcbiAgd2FpdEZvclBhcmVudDogKGVsLCBjbGFzc05hbWU/OiBzdHJpbmcsIHRpbWU/OiBudW1iZXIsIGNvdW50ZXI/OiBudW1iZXIpID0+IFByb21pc2U8RWxlbWVudD47XG4gIHdhaXRGb3JQYXJlbnRIZWlnaHQ6IChlbDogRWxlbWVudCwgdGltZT86IG51bWJlciwgY291bnRlcj86IG51bWJlcikgPT4gUHJvbWlzZTxudW1iZXI+O1xuICBmaW5kUGFyZW50RWxlbWVudDogKGVsLCBjbGFzc05hbWUpID0+IEVsZW1lbnRSZWY7XG4gIHN0b3JlOiAoa2V5Pzogc3RyaW5nKSA9PiB2b2lkO1xuICBzZXRTdWJzY3JpYmVyOiAoc3Vic2NyaXB0aW9uS2V5OiBzdHJpbmcsIHN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uKSA9PiB2b2lkO1xuICBzZXRUaW1lb3V0OiAodGltZW91dEtleTogc3RyaW5nLCBjYWxsYmFjaywgZGVsYXk/OiBudW1iZXIpID0+IHZvaWQ7XG4gIGRlc3Ryb3k6ICgpID0+IHZvaWQ7XG5cbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gR2V0Q29tcG9uZW50RG9tQ29udGFpbmVyKCk6IENvbXBvbmVudERvbUludGVyZmFjZSB7XG4gIGNvbnN0IGRvbSA9IDxDb21wb25lbnREb21JbnRlcmZhY2U+e1xuICAgIC8qKlxuICAgICAqIFNlcnZpY2Ugd2lsbCBwcmVzZXJ2ZSBzZXNzaW9uLCBzdGF0ZSwgZXRjIGFuZCBhbGxvdyBhbGwgY29tcG9uZW50cyBvbiB0aGUgY29yZSB0byBjb21tdW5pY2F0ZSBhbmQgc2hhcmUgYXNzZXRzYFxuICAgICAqL1xuXG4gICAgYWN0aXZlOiA8RGljdGlvbmFyeTxhbnk+Pnt9LFxuXG4gICAgZXJyb3I6IHtcbiAgICAgIGNvZGU6IDAsXG4gICAgICBtZXNzYWdlOiAnJ1xuICAgIH0sXG5cblxuICAgIG92ZXJoZWFkOiAwLFxuICAgIGhlaWdodDoge1xuICAgICAgb3V0ZXI6IG51bGwsXG4gICAgICBpbm5lcjogbnVsbCxcbiAgICAgIGRlZmF1bHQ6IDBcbiAgICB9LFxuICAgIHdpZHRoOiB7fSxcbiAgICBzdGF0ZTogPERvbVN0YXRlSW50ZXJmYWNlPnt9LFxuXG5cbiAgICBzZXNzaW9uOiA8RGljdGlvbmFyeTxhbnk+Pnt9LFxuXG4gICAgY29udGV4dE1lbnU6IHtcbiAgICAgIGNvbmZpZzogPFBvcENvbnRleHRNZW51Q29uZmlnPnVuZGVmaW5lZCxcbiAgICAgIGNvbmZpZ3VyZTogdW5kZWZpbmVkLFxuICAgIH0sXG5cbiAgICByZXBvOiB1bmRlZmluZWQsXG5cbiAgICAvKipcbiAgICAgKiBTdG9yZSBhbGwgc3Vic2NyaWJlcnMgaGVyZVxuICAgICAqL1xuICAgIHN1YnNjcmliZXI6IHt9LFxuXG4gICAgLyoqXG4gICAgICogU3RvcmUgYWxsIHRpbWUgaW50ZXJ2YWxzIGhlcmVcbiAgICAgKi9cbiAgICBpbnRlcnZhbDoge30sXG5cbiAgICAvKipcbiAgICAgKiBTdG9yZSBhbGwgdGltZW91dHMgaGVyZVxuICAgICAqL1xuICAgIGRlbGF5OiB7fSxcblxuICAgIGhhbmRsZXI6IHt9LFxuXG4gIH07XG4gIHJldHVybiBkb207XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIEFic3RyYWN0RG9tTWl4aW48VCBleHRlbmRzIENvbnN0cnVjdG9yPHt9Pj4oQmFzZTogVCA9IChjbGFzcyB7XG59IGFzIGFueSkpIHtcbiAgcmV0dXJuIGNsYXNzIGV4dGVuZHMgQmFzZSB7XG4gICAgZG9tOiBDb21wb25lbnREb21JbnRlcmZhY2UgPSBHZXRDb21wb25lbnREb21Db250YWluZXIoKTtcbiAgfTtcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gRGVzdHJveUNvbXBvbmVudERvbShkb206IENvbXBvbmVudERvbUludGVyZmFjZSk6IHZvaWQge1xuXG4gIGlmICh0eXBlb2YgKGRvbS5pbnRlcnZhbCkgPT09ICdvYmplY3QnKSB7XG4gICAgT2JqZWN0LmtleXMoZG9tLmludGVydmFsKS5tYXAoKG5hbWUpID0+IHtcbiAgICAgIGlmIChkb20uaW50ZXJ2YWxbbmFtZV0pIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbChkb20uaW50ZXJ2YWxbbmFtZV0pO1xuICAgICAgfVxuICAgICAgaWYgKGRvbS5pbnRlcnZhbFtuYW1lXSkge1xuICAgICAgICBjbGVhckludGVydmFsKGRvbS5pbnRlcnZhbFtuYW1lXSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBpZiAodHlwZW9mIChkb20uZGVsYXkpID09PSAnb2JqZWN0Jykge1xuICAgIE9iamVjdC5rZXlzKGRvbS5kZWxheSkubWFwKChuYW1lKSA9PiB7XG4gICAgICBpZiAoZG9tLmRlbGF5W25hbWVdKSB7XG4gICAgICAgIGNsZWFyVGltZW91dChkb20uZGVsYXlbbmFtZV0pO1xuICAgICAgfVxuICAgICAgaWYgKGRvbS5kZWxheVtuYW1lXSkge1xuICAgICAgICBjbGVhclRpbWVvdXQoZG9tLmRlbGF5W25hbWVdKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBpZiAodHlwZW9mIChkb20uc3Vic2NyaWJlcikgPT09ICdvYmplY3QnKSB7XG4gICAgT2JqZWN0LmtleXMoZG9tLnN1YnNjcmliZXIpLm1hcCgobmFtZSkgPT4ge1xuICAgICAgaWYgKGRvbS5zdWJzY3JpYmVyW25hbWVdICYmIHR5cGVvZiBkb20uc3Vic2NyaWJlcltuYW1lXS51bnN1YnNjcmliZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBkb20uc3Vic2NyaWJlcltuYW1lXS51bnN1YnNjcmliZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBMb2cgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCBIYW5kbGVzIExvZ2dpbmcgKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuZXhwb3J0IGludGVyZmFjZSBDb21wb25lbnRMb2dJbnRlcmZhY2Uge1xuICByZXBvOiB7XG4gICAgbWVzc2FnZTogKG1lc3NhZ2U/OiBzdHJpbmcpID0+IHN0cmluZztcbiAgICBjb2xvcjogKHR5cGU/OiBzdHJpbmcpID0+IHN0cmluZztcbiAgICBlbmFibGVkOiAodHlwZT86IHN0cmluZywgY29tcG9uZW50Pzogc3RyaW5nKSA9PiBib29sZWFuO1xuICAgIGluaXQ6IChjb21wb25lbnROYW1lOiBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZywgZGF0YT86IGFueSwgZm9yY2U/OiBib29sZWFuKSA9PiB2b2lkO1xuICAgIGRlYnVnOiAoY29tcG9uZW50TmFtZTogc3RyaW5nLCBtZXNzYWdlOiBzdHJpbmcsIGRhdGE/OiBhbnksIGZvcmNlPzogYm9vbGVhbikgPT4gdm9pZDtcbiAgICBjYWNoZTogKGNvbXBvbmVudE5hbWU6IHN0cmluZywgbWVzc2FnZTogc3RyaW5nLCBzZXQ/OiBib29sZWFuLCBmb3JjZT86IGJvb2xlYW4pID0+IHZvaWQ7XG4gICAgd2FybjogKGNvbXBvbmVudE5hbWU6IHN0cmluZywgbWVzc2FnZTogc3RyaW5nLCBkYXRhPzogYW55LCBmb3JjZT86IGJvb2xlYW4pID0+IHZvaWQ7XG4gICAgaW5mbzogKGNvbXBvbmVudE5hbWU6IHN0cmluZywgbWVzc2FnZTogc3RyaW5nLCBkYXRhPzogYW55LCBmb3JjZT86IGJvb2xlYW4pID0+IHZvaWQ7XG4gICAgdGhlbWU6IChjb21wb25lbnROYW1lOiBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZywgZGF0YT86IGFueSwgZm9yY2U/OiBib29sZWFuKSA9PiB2b2lkO1xuICAgIGV2ZW50OiAoY29tcG9uZW50TmFtZTogc3RyaW5nLCBtZXNzYWdlOiBzdHJpbmcsIGV2ZW50PzogUG9wQmFzZUV2ZW50SW50ZXJmYWNlLCBmb3JjZT86IGJvb2xlYW4pID0+IHZvaWQ7XG4gICAgZXJyb3I6IChjb21wb25lbnROYW1lOiBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZywgZGF0YT86IGFueSwgZm9yY2U/OiBib29sZWFuKSA9PiB2b2lkO1xuICB9O1xuICBpbml0OiAoKSA9PiB2b2lkO1xuICBkZWJ1ZzogKG1zZzogc3RyaW5nLCBkYXRhPzogYW55KSA9PiB2b2lkO1xuICBlcnJvcjogKG1zZzogc3RyaW5nLCBlcnJvcj86IGFueSkgPT4gdm9pZDtcbiAgd2FybjogKG1zZzogc3RyaW5nLCBkYXRhPzogYW55KSA9PiB2b2lkO1xuICBpbmZvOiAobXNnOiBzdHJpbmcsIGRhdGE/OiBhbnkpID0+IHZvaWQ7XG4gIGV2ZW50OiAobXNnOiBzdHJpbmcsIGV2ZW50OiBQb3BCYXNlRXZlbnRJbnRlcmZhY2UpID0+IHZvaWQ7XG4gIGNvbmZpZzogKG1zZzogc3RyaW5nLCBjb25maWc/OiBhbnkpID0+IHZvaWQ7XG4gIGRlc3Ryb3k6ICgpID0+IHZvaWQ7XG59XG5cblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZW1wbGF0ZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgKCBIYW5kbGVzIHJlbmRlcmluZyBEeW5hbWljIGNvbnRlbnQgKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuXG5leHBvcnQgaW50ZXJmYWNlIENvbXBvbmVudFRlbXBsYXRlSW50ZXJmYWNlIHtcbiAgY29udGFpbmVyOiBWaWV3Q29udGFpbmVyUmVmO1xuICByZWZzOiBDb21wb25lbnRSZWY8YW55PltdO1xuICByZWZfZXZlbnRzOiBTdWJzY3JpcHRpb25bXTtcbiAgYXR0YWNoOiAoY29udGFpbmVyOiBzdHJpbmcgfCBWaWV3Q29udGFpbmVyUmVmKSA9PiB2b2lkO1xuICByZW5kZXI6IChsaXN0OiBEeW5hbWljQ29tcG9uZW50SW50ZXJmYWNlW10sIHRyYW5zZmVyPzogc3RyaW5nW10sIGJ5cGFzc1RyYW5zZmVyPzogYm9vbGVhbikgPT4gdm9pZDtcbiAgdHJhbnNmZXI6IERpY3Rpb25hcnk8YW55PjtcbiAgY2xlYXI6ICgpID0+IHZvaWQ7XG4gIGRlc3Ryb3k6ICgpID0+IHZvaWQ7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIEdldENvbXBvbmVudFRlbXBsYXRlQ29udGFpbmVyKCk6IENvbXBvbmVudFRlbXBsYXRlSW50ZXJmYWNlIHtcbiAgY29uc3QgdGVtcGxhdGUgPSA8Q29tcG9uZW50VGVtcGxhdGVJbnRlcmZhY2U+e1xuICAgIGNvbnRhaW5lcjogdW5kZWZpbmVkLFxuICAgIHJlZnM6IFtdLFxuICAgIHJlZl9ldmVudHM6IFtdXG4gIH07XG5cbiAgcmV0dXJuIHRlbXBsYXRlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gQWJzdHJhY3RUZW1wbGF0ZU1peGluPFQgZXh0ZW5kcyBDb25zdHJ1Y3Rvcjx7fT4+KEJhc2U6IFQgPSAoY2xhc3Mge1xufSBhcyBhbnkpKTogYW55IHtcbiAgcmV0dXJuIGNsYXNzIGV4dGVuZHMgQmFzZSBpbXBsZW1lbnRzIEhhc1RlbXBsYXRlIHtcbiAgICB0ZW1wbGF0ZTogQ29tcG9uZW50VGVtcGxhdGVJbnRlcmZhY2UgPSBHZXRDb21wb25lbnRUZW1wbGF0ZUNvbnRhaW5lcigpO1xuICB9O1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBEZXN0cm95Q29tcG9uZW50VGVtcGxhdGUodGVtcGxhdGU6IENvbXBvbmVudFRlbXBsYXRlSW50ZXJmYWNlKSB7XG4gIGlmICh0eXBlb2YgdGVtcGxhdGUgPT09ICdvYmplY3QnKSB7XG4gICAgdGVtcGxhdGUucmVmX2V2ZW50cy5tYXAoKHN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uKSA9PiB7XG4gICAgICBpZiAoc3Vic2NyaXB0aW9uICYmIHR5cGVvZiBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0ZW1wbGF0ZS5yZWZzID0gdGVtcGxhdGUucmVmcy5tYXAoZnVuY3Rpb24gKGNvbXBvbmVudFJlZjogQ29tcG9uZW50UmVmPGFueT4pIHtcbiAgICAgIGlmIChjb21wb25lbnRSZWYgJiYgdHlwZW9mIGNvbXBvbmVudFJlZi5kZXN0cm95ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGNvbXBvbmVudFJlZi5kZXN0cm95KCk7XG4gICAgICB9XG4gICAgICBjb21wb25lbnRSZWYgPSBudWxsO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSk7XG5cbiAgICBpZiAodGVtcGxhdGUuY29udGFpbmVyKSB0ZW1wbGF0ZS5jb250YWluZXIuY2xlYXIoKTtcblxuICAgIHRlbXBsYXRlID0gbnVsbDtcbiAgfVxufVxuXG5cblxuXG4iXX0=