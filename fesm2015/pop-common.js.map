{"version":3,"file":"pop-common.js","sources":["../../../projects/pop-common/src/lib/pipes/phone.pipe.ts","../../../projects/pop-common/src/lib/pipes/toYesNo.pipe.ts","../../../projects/pop-common/src/lib/pop-common.model.ts","../../../projects/pop-common/src/lib/pipes/toActiveOrArchived.pipe.ts","../../../projects/pop-common/src/lib/pipes/label.pipe.ts","../../../projects/pop-common/src/lib/pop-common-utility.ts","../../../projects/pop-common/src/lib/pipes/truncate.pipe.ts","../../../projects/pop-common/src/lib/pop-common-token.model.ts","../../../projects/pop-common/src/lib/pop-common-dom.models.ts","../../../projects/pop-common/src/lib/services/pop-extend.service.ts","../../../projects/pop-common/src/lib/services/pop-base.service.ts","../../../projects/pop-common/src/lib/modules/app/pop-menu/pop-menu.service.ts","../../../projects/pop-common/src/lib/services/pop-credential.service.ts","../../../projects/pop-common/src/lib/modules/base/pop-tab-menu/tab-menu.model.ts","../../../projects/pop-common/src/lib/modules/base/pop-side-by-side/pop-side-by-side.model.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-select/select-config.model.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-select-multi/select-mulit-config.model.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-input/input-config.model.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-number/number-config.model.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-date/date-config.model.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-time/time-config.model.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-checkbox/checkbox-config.model.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-switch/switch-config.model.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-min-max/min-max.models.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-radio/radio-config.model.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-textarea/textarea-config.model.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-label/label-config.model.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-button/button-config.model.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-email/email.setting.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-switch-param.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-address/address.setting.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-phone/phone.setting.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-name/name.setting.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-input/input.settings.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-radio/radio.setting.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-switch/switch.setting.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-select/select.setting.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-checkbox/checkbox.setting.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-textarea/textarea.setting.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-select-filter/select-filter-config.model.ts","../../../projects/pop-common/src/lib/services/pop-validators.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-text/text-config.model.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-select-list/select-list-config.model.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-datepicker/datepicker-config.model.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-select-modal/select-modal-config.model.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-utility.ts","../../../projects/pop-common/src/lib/pop-extend.component.ts","../../../projects/pop-common/src/lib/modules/app/pop-menu/pop-menu.component.ts","../../../projects/pop-common/src/lib/modules/app/pop-menu/pop-menu.module.ts","../../../projects/pop-common/src/lib/modules/app/assets/ajax-loader.component.ts","../../../projects/pop-common/src/lib/modules/app/assets/goodbye.component.ts","../../../projects/pop-common/src/lib/modules/app/assets/welcome.component.ts","../../../projects/pop-common/src/lib/modules/app/assets/error.component.ts","../../../projects/pop-common/src/lib/modules/app/assets/buffer.component.ts","../../../projects/pop-common/src/lib/modules/app/pop-cac-filter/pop-cac-filter.model.ts","../../../projects/pop-common/src/lib/modules/entity/services/pop-entity-event.service.ts","../../../projects/pop-common/src/lib/services/pop-cache.service.ts","../../../projects/pop-common/src/lib/services/pop-resource.service.ts","../../../projects/pop-common/src/lib/services/pop-pipe.service.ts","../../../projects/pop-common/src/lib/modules/app/pop-cac-filter/pop-cac-filter.service.ts","../../../projects/pop-common/src/lib/modules/app/pop-template.service.ts","../../../projects/pop-common/src/lib/modules/app/pop-template.component.ts","../../../projects/pop-common/src/lib/modules/app/pop-left-menu/entity-menu.model.ts","../../../projects/pop-common/src/lib/modules/entity/services/pop-entity-util-param.service.ts","../../../projects/pop-common/src/lib/modules/app/pop-left-menu/pop-left-menu.component.ts","../../../projects/pop-common/src/lib/modules/material/material.module.ts","../../../projects/pop-common/src/lib/modules/base/pop-indicators/main-spinner.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-indicators/pop-indicators.module.ts","../../../projects/pop-common/src/lib/modules/app/pop-left-menu/pop-left-menu.module.ts","../../../projects/pop-common/src/lib/pop-extend-dynamic.component.ts","../../../projects/pop-common/src/lib/modules/app/pop-widget-bar/pop-widget-bar.component.ts","../../../projects/pop-common/src/lib/modules/app/pop-widget-bar/pop-widget-bar.module.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-field-item.component.ts","../../../projects/pop-common/src/lib/pop-common-animations.model.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-input/pop-input.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-select/pop-select.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-select-multi/pop-select-multi.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-checkbox/pop-checkbox.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-radio/pop-radio.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-switch/pop-switch.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-textarea/pop-textarea.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-label/pop-label.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-select-filter/pop-select-filter.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/click-outside-directive.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-date/datepicker-expansion-items/expansion-items.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-date/pop-date.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-date/pop-date-range/expansion-items/date-range-expansion-items.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-date/pop-date-range/date-range-config.models.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-date/pop-date-range/pop-date-range.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-date/datepicker-expansion-items/custom-panel/custom-panel.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-time/pop-time.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-select-list/pop-select-list.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-select-modal/pop-select-modal-dialog/pop-select-modal-dialog.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-select-modal/pop-select-modal.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-button/pop-button.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-min-max/pop-min-max.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-slider/pop-slider.model.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-slider/pop-slider.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-number/pop-number.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/asset/pop-field-item-loader.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/asset/pop-field-item-helper.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/asset/pop-field-item-error.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-text/pop-text.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-date/pop-date-range/expansion-items/custom-panel/date-range-panel.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-datepicker/pop-datepicker.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/pop-field-item.module.ts","../../../projects/pop-common/src/lib/modules/app/pop-cac-filter/pop-cac-filter.component.ts","../../../projects/pop-common/src/lib/modules/app/pop-cac-filter/pop-cac-filter-view/pop-cac-filter-view.component.ts","../../../projects/pop-common/src/lib/modules/app/pop-cac-filter/pop-cac-filter.module.ts","../../../projects/pop-common/src/lib/modules/app/pop-template.module.ts","../../../projects/pop-common/src/lib/services/pop-container.service.ts","../../../projects/pop-common/src/lib/directives/lib-container.directive.ts","../../../projects/pop-common/src/lib/directives/lib-outside-click.directive.ts","../../../projects/pop-common/src/lib/directives/lib-track-caps-lock.directive.ts","../../../projects/pop-common/src/lib/pop-common.module.ts","../../../projects/pop-common/src/lib/services/pop-datetime.service.ts","../../../projects/pop-common/src/environments/environment.ts","../../../projects/pop-common/src/lib/services/pop-log.service.ts","../../../projects/pop-common/src/lib/services/pop-display.service.ts","../../../projects/pop-common/src/lib/services/pop-request.service.ts","../../../projects/pop-common/src/lib/modules/base/pop-context-menu/pop-context-menu.model.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-field.setting.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-field.service.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-field.component.ts","../../../projects/pop-common/src/lib/services/pop-dom.service.ts","../../../projects/pop-common/src/lib/modules/base/pop-dialogs/pop-table-dialog/pop-table-dialog.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-side-by-side/pop-side-by-side.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-dialogs/pop-confirmation-dialog/pop-confirmation-dialog.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-field-modal/pop-entity-field-modal.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-field-boiler.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-name/pop-entity-name.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-datetime/pop-entity-datetime.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-email/pop-entity-email.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-phone/pop-entity-phone.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-address/pop-entity-address.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-input/pop-entity-input.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-select/pop-entity-select.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-radio/pop-entity-radio.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-checkbox/pop-entity-checkbox.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-switch/pop-entity-switch.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-select-multi/select-mulit.setting.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-select-multi/pop-entity-select-multi.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-textarea/pop-entity-textarea.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field-editor/pop-entity-field-editor.service.ts","../../../projects/pop-common/src/lib/modules/entity/services/pop-entity-util-field.service.ts","../../../projects/pop-common/src/lib/modules/entity/services/pop-entity-repo.service.ts","../../../projects/pop-common/src/lib/modules/entity/models/pop-entity-default.action.ts","../../../projects/pop-common/src/lib/modules/entity/models/pop-entity-default.table.ts","../../../projects/pop-common/src/lib/modules/entity/models/pop-entity-default.field.ts","../../../projects/pop-common/src/lib/modules/entity/models/pop-entity-default.resource.ts","../../../projects/pop-common/src/lib/modules/entity/models/pop-entity-default.menu.ts","../../../projects/pop-common/src/lib/modules/entity/models/pop-entity-default.route.ts","../../../projects/pop-common/src/lib/modules/entity/services/pop-entity.service.ts","../../../projects/pop-common/src/lib/services/pop-route-history.resolver.ts","../../../projects/pop-common/src/lib/modules/base/pop-tab-menu/pop-tab-menu.service.ts","../../../projects/pop-common/src/lib/modules/base/pop-tab-menu/pop-tab-menu.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-scheme/pop-entity-scheme.model.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item-group/pop-field-item-group.model.ts","../../../projects/pop-common/src/lib/modules/base/pop-dialogs/pop-action-dialog/pop-action-dialog.component.ts","../../../projects/pop-common/src/lib/modules/entity/services/pop-entity-action.service.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-scheme/pop-entity-scheme-custom-component/pop-entity-scheme-custom.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-tab/pop-entity-tab.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-tab-menu/pop-entity-portal-menu/pop-entity-portal-menu.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-tab-menu/pop-entity-tab-menu.component.ts","../../../projects/pop-common/src/lib/modules/entity/services/pop-entity-util-portal.service.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field-group/pop-entity-field-group.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-table/pop-table.model.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-history/pop-entity-history.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-assignments/pop-entity-provider-dialog/pop-entity-provider-dialog.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-assignments/pop-entity-assignments.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-settings.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-scheme/pop-entity-scheme-field-setting/pop-entity-scheme-field-setting.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-scheme/pop-entity-scheme.service.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-scheme/pop-entity-scheme-asset-pool/pop-entity-scheme-asset-pool.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-scheme/pop-entity-scheme-asset-layout/pop-entity-scheme-asset-layout.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-scheme/pop-entity-scheme-details/pop-entity-scheme-details.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-scheme/pop-entity-scheme.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field-editor/pop-entity-field-details/pop-entity-field-details.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field-editor/pop-entity-field-preview/pop-entity-field-preview.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field-editor/pop-entity-field-editor.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-status/pop-entity-status.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-tab/pop-entity-tab.model.ts","../../../projects/pop-common/src/lib/services/pop-base.interceptors.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item/custom-date-adapter.ts","../../../projects/pop-common/src/lib/modules/base/pop-redirects/pop-error-redirect/pop-error-redirect.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-redirects/pop-cache-redirect/pop-cache-redirect.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-redirects/pop-guard-redirect/pop-guard-redirect.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-redirects/pop-redirects-module.ts","../../../projects/pop-common/src/lib/modules/base/pop-redirects/pop-redirect.guard.ts","../../../projects/pop-common/src/lib/modules/base/pop-redirects/pop-cache-redirect.guard.ts","../../../projects/pop-common/src/lib/services/pop-request-external.service.ts","../../../projects/pop-common/src/lib/modules/entity/services/pop-entity-scheme-component.service.ts","../../../projects/pop-common/src/lib/modules/pop-initializer.module.ts","../../../projects/pop-common/src/lib/modules/base/pop-tab-menu/pop-tab-menu-section-bar/pop-tab-menu-section-bar.service.ts","../../../projects/pop-common/src/lib/modules/base/pop-tab-menu/pop-tab-menu-section-bar/pop-tab-menu-section-bar.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-tab-menu/pop-tab-menu.module.ts","../../../projects/pop-common/src/lib/modules/base/pop-errors/error/error.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-errors/pop-errors.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-errors/pop-errors.module.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item-group/in-dialog/in-dialog.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item-group/group/group.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-context-menu/pop-context-menu.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-context-menu/pop-context-menu.module.ts","../../../projects/pop-common/src/lib/pipes/characterIcon.pipe.ts","../../../projects/pop-common/src/lib/modules/base/pop-side-by-side/pop-side-by-side.module.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item-group/pop-field-item-group.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-field-item-group/pop-field-item-group.module.ts","../../../projects/pop-common/src/lib/services/pop-common.service.ts","../../../projects/pop-common/src/lib/modules/base/pop-table/pop-table-dialog/pop-table-dialog.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-table/pop-table.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-table/pop-table-view/pop-table-view.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-table/pop-table.module.ts","../../../projects/pop-common/src/lib/modules/base/pop-ajax-dialog/dialog/dialog.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-ajax-dialog/pop-ajax-dialog.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-ajax-dialog/pop-ajax-dialog.module.ts","../../../projects/pop-common/src/lib/modules/base/pop-dialogs/pop-navigation-dialog/pop-navigation-dialog.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-dialogs/pop-success-dialog/pop-success-dialog.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-dialogs/pop-message-dialog/pop-message-dialog.component.ts","../../../projects/pop-common/src/lib/modules/base/pop-dialogs/pop-dialogs.module.ts","../../../projects/pop-common/src/lib/modules/base/pop-base.module.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-list/pop-entity-advanced-search/pop-entity-advanced-search.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-list/pop-entity-list.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-access/pop-entity-access.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/assets/pop-entity-field-action-btn.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/assets/pop-entity-field-edit-icon/pop-entity-field-edit-icon.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/assets/pop-entity-field-dash.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/assets/pop-entity-field-spacer.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-tab/pop-entity-tab-column.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-scheme/pop-entity-asset-field-modal/params/field-input-setting.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-scheme/pop-entity-asset-field-modal/params/field-label-setting.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-scheme/pop-entity-asset-field-modal/params/field-radio-setting.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-scheme/pop-entity-asset-field-modal/params/field-select-setting.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-scheme/pop-entity-asset-field-modal/params/field-switch-setting.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-scheme/pop-entity-asset-field-modal/params/field-textarea-setting.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-scheme/pop-entity-asset-component-modal/pop-entity-asset-component-modal.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-scheme/pop-entity-asset-field-modal/pop-entity-asset-field-modal.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-scheme/pop-entity-scheme-asset-layout/entity-scheme-layout-section/entity-scheme-layout-section.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-scheme/pop-entity-scheme-asset-layout/entity-scheme-layout-section/entity-scheme-field-content/entity-scheme-field-content.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-scheme/pop-entity-scheme-asset-layout/entity-scheme-layout-section/entity-scheme-table-content/entity-scheme-table-content.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-scheme/pop-entity-scheme-asset-layout/entity-scheme-layout-section/entity-scheme-component-content/entity-scheme-component-content.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-items/pop-entity-field-items.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-values/pop-entity-field-values.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-label-param.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-textarea-param.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-radio-param.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-select-param.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-input-param.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-number-param.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/pop-entity-field-item-params.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-slider-param.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-entries/pop-entity-field-entries.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-tab-list/pop-entity-tab-list.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-field/pop-entity-address/pop-entity-address-edit/pop-entity-address-edit.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity-scheme/pop-entity-scheme-custom-setting/pop-entity-scheme-custom-setting.component.ts","../../../projects/pop-common/src/lib/modules/entity/pop-entity.module.ts","../../../projects/pop-common/src/lib/modules/base/pop-ajax-dialog/pop-ajax-dialog.model.ts","../../../projects/pop-common/src/lib/services/pop-preference.service.ts","../../../projects/pop-common/src/lib/services/pop-auth-guard.guard.ts","../../../projects/pop-common/src/lib/services/pop-route-verified.guard.ts","../../../projects/pop-common/src/lib/services/pop-route-access.guard.ts","../../../projects/pop-common/src/lib/modules/entity/services/pop-entity-extend.service.ts","../../../projects/pop-common/src/public_api.ts","../../../projects/pop-common/src/pop-common.ts"],"sourcesContent":["import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe( {\n  name: 'phone'\n} )\nexport class PhonePipe implements PipeTransform {\n  transform( val, args = null ){\n\n    if( !args ) args = '(XXX) XXX-XXXX';\n\n    if( typeof val === 'string' && String(val).length ){\n\n      let viewVal = String( val ).trim();\n      viewVal = viewVal.replace( /^\\+/, '' );\n      viewVal = viewVal.replace( /[^0-9]/g, '' );\n      viewVal = viewVal.slice( 0, ( args.match( /X/g ) || [] ).length );\n\n      let number = args;\n      const digits = viewVal.split( '' );\n      let index = 0;\n      digits.forEach( function( digit ){\n        index = number.indexOf( 'X' );\n        if( index >= 0 ){\n          number = number.substr( 0, index ) + digit + number.substr( index + 1 );\n        }\n      } );\n\n      let limit = args.length;\n      if( index != -1 ) limit = index + 1;\n      return number.substr( 0, limit );\n    }\n    return val;\n  }\n}\n","import {Pipe, PipeTransform} from '@angular/core';\n\n@Pipe({name: 'toYesNo', pure: true})\nexport class ToYesNoPipe implements PipeTransform {\n  transform(value) {\n    return value ? 'Yes' : 'No';\n  }\n}\n","import {ChangeDetectorRef, ComponentFactoryResolver, ElementRef, InjectionToken, Injector} from '@angular/core';\nimport {ComponentType} from '@angular/cdk/portal';\nimport {FormGroup, Validators} from '@angular/forms';\nimport {EventEmitter} from '@angular/core';\n\nimport {FieldItemGroupConfig} from './modules/base/pop-field-item-group/pop-field-item-group.model';\nimport {TabButtonInterface, TabComponentInterface, TabConfig} from './modules/base/pop-tab-menu/tab-menu.model';\nimport {PopEntityRepoService} from './modules/entity/services/pop-entity-repo.service';\nimport {LabelConfig, MetadataConfig} from './modules/base/pop-field-item/pop-label/label-config.model';\nimport {CheckboxConfig} from './modules/base/pop-field-item/pop-checkbox/checkbox-config.model';\nimport {InputConfig} from './modules/base/pop-field-item/pop-input/input-config.model';\nimport {SelectConfig} from './modules/base/pop-field-item/pop-select/select-config.model';\nimport {SelectMultiConfig} from './modules/base/pop-field-item/pop-select-multi/select-mulit-config.model';\nimport {RadioConfig} from './modules/base/pop-field-item/pop-radio/radio-config.model';\nimport {TextareaConfig} from './modules/base/pop-field-item/pop-textarea/textarea-config.model';\nimport {SwitchConfig} from './modules/base/pop-field-item/pop-switch/switch-config.model';\nimport {SideBySideConfig} from './modules/base/pop-side-by-side/pop-side-by-side.model';\nimport {MinMaxConfig} from './modules/base/pop-field-item/pop-min-max/min-max.models';\nimport {PopLogService} from './services/pop-log.service';\nimport {NumberConfig} from './modules/base/pop-field-item/pop-number/number-config.model';\nimport {PopTemplateService} from './modules/app/pop-template.service';\nimport {App, AuthDetails, Business, BusinessUser} from './pop-common-token.model';\nimport {CacFilter} from './modules/app/pop-cac-filter/pop-cac-filter.model';\nimport {PopPipeService} from './services/pop-pipe.service';\nimport {PopDatetimeService} from './services/pop-datetime.service';\nimport {PopRequestService} from './services/pop-request.service';\nimport {PopEntityService} from './modules/entity/services/pop-entity.service';\nimport {PopRouteHistoryResolver} from './services/pop-route-history.resolver';\nimport {PopEntityUtilPortalService} from './modules/entity/services/pop-entity-util-portal.service';\nimport {EntityMenu} from './modules/app/pop-left-menu/entity-menu.model';\nimport {BehaviorSubject, Subject} from 'rxjs';\nimport {Router} from '@angular/router';\nimport {ComponentDomInterface} from './pop-common-dom.models';\nimport {PopRequestExternalService} from './services/pop-request-external.service';\nimport {PopDomService} from './services/pop-dom.service';\nimport {DateFilterPredicate} from './modules/base/pop-field-item/pop-date/date-config.model';\nimport {PopEntitySchemeComponentService} from \"./modules/entity/services/pop-entity-scheme-component.service\";\n\nexport type EventCallback = (core: CoreConfig, event: PopBaseEventInterface, dom?: ComponentDomInterface) => void;\nexport type EventPromiseCallback = (core: CoreConfig, event: PopBaseEventInterface, dom?: ComponentDomInterface) => Promise<any>;\nexport type OutletReset = (position?: number) => void;\nexport type PopTask = () => void;\n\nexport type DataFactory = (id?: number, archived?: boolean | number) => Promise<any[]>;\nexport type DataDecorator = (core: CoreConfig, entity: Entity) => Entity;\nexport type DataFilter = (entity: Entity) => boolean;\nexport type DataSetter = (core: CoreConfig, data: any, domRepo?: PopDomService) => any;\n\n\nexport let ServiceInjector: Injector;\n\nexport function SetServiceInjector(injector: Injector) {\n  if (!ServiceInjector) ServiceInjector = injector;\n}\n\nexport let PopEntity: PopEntityService;\n\nexport function SetPopEntity(entity: PopEntityService) {\n  if (!PopEntity) PopEntity = entity;\n}\n\nexport let PopHistory: PopRouteHistoryResolver;\n\nexport function SetPopHistory(history: PopRouteHistoryResolver) {\n  if (!PopHistory) PopHistory = history;\n}\n\nexport let PopPipe: PopPipeService;\n\nexport function SetPopPipe(pipe: PopPipeService) {\n  if (!PopPipe) PopPipe = pipe;\n}\n\nexport let PopDate: PopDatetimeService;\n\nexport function SetPopDate(date: PopDatetimeService) {\n  if (!PopDate) PopDate = date;\n}\n\nexport let PopLog: PopLogService;\n\nexport function SetPopLogger(log: PopLogService) {\n  if (!PopLog) PopLog = log;\n}\n\nexport let PopEnv: Dictionary<any>;\n\nexport function SetPopEnv(env: Dictionary<any>) {\n  if (!PopEnv) PopEnv = env;\n}\n\n\nexport let PopComponentResolver: ComponentFactoryResolver;\n\nexport function SetPopComponentResolver(cfr: ComponentFactoryResolver) {\n  if (!PopComponentResolver) PopComponentResolver = cfr;\n}\n\nexport let PopRequest: PopRequestService;\n\nexport function SetPopRequest(request: PopRequestService) {\n  if (!PopRequest) PopRequest = request;\n}\n\nexport let PopExternalApi: PopRequestExternalService;\n\nexport function SetPopExternalApi(api: PopRequestExternalService) {\n  if (!PopExternalApi) PopExternalApi = api;\n}\n\n\nexport let PopPortal: PopEntityUtilPortalService;\n\nexport function SetPopPortal(portal: PopEntityUtilPortalService) {\n  if (!PopPortal) PopPortal = portal;\n}\n\nexport let PopHref: string;\n\nexport function SetPopHref(href: string) {\n  if (href && typeof href === 'string') {\n    PopHref = href;\n  }\n}\n\nexport let PopMessage: string;\n\nexport function SetPopMessage(message: string) {\n  if (message && typeof message === 'string') {\n    PopMessage = message;\n  } else {\n    PopMessage = undefined;\n  }\n}\n\nexport let PopCacheRedirectUrl: string;\n\nexport function SetPopCacheRedirectUrl(router: Router = null, url: string = null): void {\n  if (router instanceof Router) {\n    if (!url) url = router.url;\n    PopCacheRedirectUrl = url;\n    router.navigateByUrl('system/cache/clear', {skipLocationChange: true}).catch((e) => {\n      console.log('e', e);\n    });\n  } else {\n    PopCacheRedirectUrl = undefined;\n  }\n}\n\n\nexport let PopAuth: AuthDetails;\n\nexport function SetPopAuth(auth: AuthDetails) {\n  if (auth && typeof auth === 'object' && auth !== null && Object.keys(auth).length) {\n    PopAuth = JSON.parse(JSON.stringify(auth));\n  }\n}\n\nexport let PopBusiness: Business;\n\nexport function SetPopBusiness(business: Business) {\n  if (business && typeof business === 'object' && business !== null && Object.keys(business).length) {\n    PopBusiness = JSON.parse(JSON.stringify(business));\n  }\n}\n\nexport let PopApp: App;\n\nexport function SetPopApp(app: App) {\n  if (app && typeof app === 'object' && app !== null && Object.keys(app).length) {\n    PopApp = JSON.parse(JSON.stringify(app));\n  }\n}\n\nexport let PopUser: BusinessUser;\n\nexport function SetPopUser(user: BusinessUser) {\n  if (user && typeof user === 'object' && user !== null && Object.keys(user).length) {\n    PopUser = JSON.parse(JSON.stringify(user));\n  }\n}\n\nexport let PopFilter: CacFilter = {};\n\nexport function SetPopFilter(filter: CacFilter) {\n  if (typeof filter === 'object' && filter !== null) {\n    PopFilter = filter;\n  }\n}\n\nexport let PopSchemeComponent: PopEntitySchemeComponentService;\n\nexport function SetPopSchemeComponent(schemeComponent: PopEntitySchemeComponentService) {\n  if (!PopSchemeComponent) PopSchemeComponent = schemeComponent;\n}\n\nexport let PopRouteAliasMap: { client?: string; account?: string, campaign?: string, profile?: string };\n\nexport function SetPopRouteAliasMap(aliasMap: { client?: string; account?: string, campaign?: string, profile?: string }) {\n  if (aliasMap && typeof aliasMap === 'object') PopRouteAliasMap = aliasMap;\n}\n\nexport let PopAliasRouteMap: Dictionary<string> = {};\n\nexport function SetPopAliasRouteMap(routeMap: Dictionary<string>) {\n  if (routeMap && typeof routeMap === 'object') PopAliasRouteMap = routeMap;\n}\n\n\nexport let PopTemplate: PopTemplateService;\n\nexport function SetPopTemplate(srv: PopTemplateService) {\n  if (!PopTemplate) PopTemplate = srv;\n}\n\nexport const FIELD_CUSTOM_SETTING = new InjectionToken<Dictionary<FieldCustomSettingInterface>>('Field Custom Setting', {\n  providedIn: 'root',\n  factory: () => <Dictionary<FieldCustomSettingInterface>>{}\n});\n\n// export const APP_MENUS = new InjectionToken<Dictionary<FieldCustomSettingInterface>>('APP_MENUS', {\n//   providedIn: 'root',\n//   factory: () => <Dictionary<FieldCustomSettingInterface>>{}\n// });\n\nexport interface AppMenusInterface {\n  get: () => EntityMenu[];\n  set: (menus: EntityMenu[]) => void;\n  init: (menus: EntityMenu[]) => EntityMenu[];\n}\n\n\nexport interface AppWidgetsInterface {\n  get: () => EntityMenu[];\n  set: (menus: EntityMenu[]) => void;\n}\n\n\nexport interface AppThemeInterface {\n  init: BehaviorSubject<boolean>;\n  get: () => string;\n  set: (theme: string, contrast: string) => void;\n  isLoaded: () => boolean;\n}\n\n\nexport interface AppGlobalInterface {\n  isVerified: () => Promise<boolean>;\n  setVerified: () => void;\n  setModal: () => void;\n  isModal: () => number;\n  removeModal: () => void;\n  isEntities: () => boolean;\n  setEntities: (value: boolean) => void;\n  isFilterBar: () => boolean;\n  setFilterBar: (value: boolean) => void;\n  isPipes: () => boolean;\n  setPipes: (value: boolean) => void;\n  isAliases: () => boolean;\n  setAliases: (value: boolean) => void;\n  isOpen: () => boolean;\n  setOpen: (value: boolean) => void;\n  isSecurity: () => boolean;\n  setSecurity: (value: boolean) => void;\n  isPermissions: () => boolean;\n  setPermissions: (value: boolean) => void;\n  init: BehaviorSubject<boolean>;\n  verification: Subject<boolean>;\n  _unload: Subject<boolean>;\n}\n\n\nexport interface AppGlobalParamInterface {\n  filter?: boolean; // will the app use the filter bar\n  pipes?: boolean; // will the app heavily use the pipe service, meaning a lot thing will auto import into that\n  aliases?: boolean; // will the app use aliases\n  entities?: boolean; // will the app use entities menus from the database\n  open?: boolean; // will the app be a public facing app\n  security?: boolean; // will the app enforce security profiles\n  permissions?: boolean; // will the app enforce security profiles\n}\n\n\n// export const APP_INITIALIZER_TASKS = new InjectionToken<Promise<boolean>[]>('App Initializer Tasks', {\n//   providedIn: 'root',\n//   factory: () => <Promise<boolean>[]>[]\n// });\n\n// ********************* Core  *************************************************\n\n\nexport interface CoreInterface {\n  params: EntityParams;   // the base entityId definitions\n  flag?: EntityFlagInterface;\n  repo?: PopEntityRepoService;  // handles are server calls\n  entity?: Entity | undefined; // the active record\n  metadata?: Dictionary<any>; // additional input\n  resource?: Dictionary<any>;\n  preference?: EntityPreference; // the blueprint for field groups\n}\n\n\nexport class CoreConfig {\n  flag: EntityFlagInterface = {};\n  params: EntityParams;\n  repo: PopEntityRepoService;\n  entity: Entity;\n  resource: Dictionary<any> = {};\n  metadata: object;\n  preference: EntityPreference;\n  access: EntityAccessInterface;\n  channel?: EventEmitter<PopBaseEventInterface>;\n\n\n  constructor(params?: CoreInterface) {\n    if (params) for (const i in params) this[i] = params[i];\n    if (!this.metadata) this.metadata = {};\n  }\n}\n\n\nexport interface EntityFilterInterface {\n  entity: string;\n  name: string;\n  options: OptionItem[];\n  path: string;\n  parent_link: string | null;\n  child_link: string | null;\n  single: boolean;\n  sort_order: number;\n}\n\n\n// ********************* Entity *********************\n\n\nexport interface Entity {\n  id: number;\n  name: string;\n  client_id?: number;\n  client_name?: string;\n  account_id?: number;\n  account_name?: string;\n  campaign_id?: number;\n  campaign_name?: string;\n  created_at?: string;\n  created_by_user_id?: string;\n  description?: string;\n  added_by_user_id?: number;\n  added_by_user?: string;\n  added_at?: string;\n  updated_by_user_id?: string;\n  updated_at?: string;\n  deleted_by_user_id?: string;\n  deleted_at?: string;\n  internal_name?: string;\n  scheme_id?: number;\n  scheme_assets?: Dictionary<any>;\n  ui?: Dictionary<any>;\n  assignments?: Dictionary<any>;\n\n  [key: string]: any;\n}\n\n\nexport interface EntityAccessInterface {\n  can_create: boolean | number;\n  can_read: boolean | number;\n  can_update: boolean | number;\n  can_delete: boolean | number;\n  can_destroy: boolean | number;\n}\n\n\nexport interface EntityParamsInterface {\n  alias?: { name: string, plural: string };\n  access?: EntityAccessInterface;\n  entityId?: number; // the entityId of the entityId,\n  can_extend?: boolean;\n  api?: string;\n  app?: string;\n  id?: number;\n  internal_name: string;\n  name: string;\n  param?: string;\n  path?: string; // the api path for the entityId\n  cache?: boolean | number;\n  refresh?: boolean;\n}\n\n\nexport class EntityParams {\n  // id = 0; // the entityId of the entityId\n  alias?: { name: string, plural: string };\n  access?: EntityAccessInterface;\n  api = ''; // the api path of this entityId http:server/app/<api>\n  app?: string; // the name of the app this entityId belongs to used on both local and server urls\n  entityId?: number;\n  can_extend = false;\n  id: number;\n  internal_name: string; // the internal name of this entityId ... client maybe aliased so we need to have a hard reference back to it\n  name: string;\n  path? = '';\n  param? = '';\n  refresh? = false;\n  blockAssets? = false;\n\n\n  constructor(params?: EntityParamsInterface) {\n    if (params) for (const i in params) this[i] = params[i];\n  }\n}\n\n\nexport interface EntityFlagInterface {\n  routeCheck?: boolean;\n  assetCheck?: boolean;\n  modalCheck?: boolean;\n  refreshCheck?: boolean;\n\n  [key: string]: boolean;\n}\n\n\nexport interface EntityPreference {\n  table: any;\n  fields: any;\n  filters: boolean;\n  options: any;\n}\n\n\nexport interface EntityFieldItemInterface {\n  name?: string; // user assigned label for field use for header\n  data?: Dictionary<any>; //\n  items?: FieldItemInterface[];\n\n  [key: string]: any;\n}\n\n\nexport interface EntityModelInterface {\n  action?: Dictionary<any>;\n  dataSetter?: DataSetter;\n  lastDataSetter?: DataSetter;\n  decorator?: DataDecorator;\n  entryAccess?: string[];\n  filter?: DataFilter;\n  tab?: TabConfig[];\n  table?: EntityModelTableInterface;\n  menu?: EntityModelMenuInterface;\n  scheme?: Dictionary<any>;\n  field?: Dictionary<FieldInterface>;\n  resource?: Dictionary<ResourceInterface>;\n  route?: ServiceRoutesInterface;\n}\n\n\nexport class EntityExtendInterface {\n  buttons?: TabButtonInterface[];\n  can_read?: boolean | string;\n  can_update?: boolean;\n  debug?: boolean;\n  goToUrl?: string;\n  postUrl?: string;\n  internal_name?: string;\n  linkBehavior?: 'portal';\n  parent?: string;\n  parentId?: string | number;\n  portal?: boolean;\n  syncTabs?: boolean;\n  width?: string | number;\n  table?: EntityModelTableInterface;\n  tabs?: TabConfig[];\n}\n\n\nexport interface EntityModelTableInterface {\n  advanced_search?: boolean;\n  preference?: Dictionary<any>;\n  button?: EntityModelTableButtonInterface;\n  filter?: EntityModelTableFilterInterface;\n  linkBehavior?: 'portal';\n  extension?: EntityExtendInterface;\n  permission?: Dictionary<boolean>;\n  whitelist?: Dictionary<1>; // fields to always show\n  blacklist?: Dictionary<1>; // fields to never show\n  appendlist?: Dictionary<number | string | boolean>; // fields to never show\n  route?: string;\n}\n\n\nexport interface EntityModelTableFilterInterface {\n  active?: boolean;\n  display?: string;\n  query?: Dictionary<string>;\n  view?: string[];\n  api?: EntityFilterInterface[];\n}\n\n\nexport interface EntityModelTableButtonInterface {\n  advanced_search?: boolean;\n  archived?: boolean;\n  custom?: any[];\n  new?: boolean;\n}\n\n\nexport interface EntityModelMenuInterface {\n  button?: {\n    archive?: boolean;\n    clone?: boolean;\n    custom?: any[];\n    delete?: boolean;\n    goBack?: boolean;\n  };\n  archiveKey?: string;\n}\n\nexport interface SchemeComponentModelInterface {\n  action?: Dictionary<any>;\n  tab?: TabConfig[];\n  component?: DynamicComponentInterface;\n  resource?: Dictionary<ResourceInterface>;\n  setting?: SchemeComponentSettingInterface;\n  option?: Dictionary<any>;\n}\n\n\nexport interface SchemeComponentSettingInterface {\n  component?: DynamicComponentInterface;\n  client_id?: number[];\n  account_id?: number[];\n  campaign_id?: number[];\n  readonly?: boolean;\n\n  [key: string]: any;\n}\n\n\nexport interface SchemeComponentOptionInterface {\n  component?: DynamicComponentInterface;\n  client_id?: number[];\n  account_id?: number[];\n  campaign_id?: number[];\n  startDate?: string;\n  endDate?: string;\n\n  [key: string]: any;\n}\n\n\nexport interface SchemeComponentParamInterface {\n  id?: string;\n  internal_name?: string;\n  name?: string;\n}\n\n\nexport class SchemeComponentParams {\n  id?: string;\n  internal_name?: string; // the internal name of this entityId ... client maybe aliased so we need to have a hard reference back to it\n  name?: string;\n\n\n  constructor(params?: SchemeComponentParamInterface) {\n    if (params) for (const i in params) this[i] = params[i];\n  }\n}\n\n\nexport interface SchemeComponentConfigInterface {\n  cols?: number;\n  component?: DynamicComponentInterface;\n  config?: Dictionary<any>;\n  faux?: string;\n  group?: string;\n  icon?: string;\n  id?: string;\n  internal_name?: string;\n  minItemRows?: number;\n  minItemCols?: number;\n  name?: string;\n  option?: SchemeComponentOptionInterface;\n  param: SchemeComponentParamInterface;\n  preferences?: Dictionary<any>;\n  resource?: Dictionary<ResourceInterface>;\n  rows?: number;\n  setting?: SchemeComponentSettingInterface;\n  type?: string;\n  x?: number;\n  y?: number;\n  component_id?: number;\n}\n\n\nexport class SchemeComponentConfig {\n  cols?: number;\n  component?: DynamicComponentInterface;\n  config?: Dictionary<any>;\n  faux?: string;\n  group?: string;\n  icon?: string;\n  id?: string;\n  internal_name?: string;\n  minItemRows?: number;\n  minItemCols?: number;\n  name?: string;\n  option?: SchemeComponentOptionInterface;\n  param: SchemeComponentParamInterface;\n  preferences?: Dictionary<any>;\n  resource?: Dictionary<ResourceInterface>;\n  rows?: number;\n  setting?: SchemeComponentSettingInterface;\n  type?: string;\n  x?: number;\n  y?: number;\n  widget_id?: number;\n\n\n  constructor(params?: SchemeComponentConfigInterface) {\n    if (params) for (const i in params) this[i] = params[i];\n  }\n}\n\n\nexport interface SchemeComponentGroupInterface {\n  id?: number | string;\n  name?: string;\n  widgets?: SchemeComponentConfigInterface[];\n}\n\n\n// ********************* Resource *************************************************\n\nexport interface ResourceInterface {\n  name: string;\n  defaultValue?: string | number | boolean;\n  api_cache?: boolean | number;\n  api_path?: string;\n  api_when?: any[];\n\n  api_path_vars?: Dictionary<string>;\n  api_params?: QueryParamsInterface;\n  api_version?: number;\n  can_read?: string;\n  data?: any;\n  data_values?: OptionItem[];\n  data_decorator?: DataDecorator;\n  data_filter?: Dictionary<string | number | boolean>;\n  data_setter?: DataSetter;\n  data_when?: any[];\n  data_storage?: 'data_values' | 'data';\n}\n\n\nexport class ResourceConfig {\n  name: string;\n  defaultValue?: string | number | boolean = null;\n  api_cache?: boolean | number = false;\n  api_version? = 1;\n  api_path? = '';\n  api_when?: any[];\n  api_path_vars?: Dictionary<string> = null;\n  api_params?: QueryParamsInterface;\n  can_read?: string;\n  data?: any;\n  data_values?: OptionItem[] = [];\n  data_filter?: Dictionary<string | number | boolean> = null;\n  data_setter?: DataSetter;\n  data_decorator?: DataDecorator;\n  data_when?: any[] = null;\n  data_storage?: 'data_values' | 'data';\n\n\n  constructor(params?: ResourceInterface) {\n    if (params) for (const i in params) this[i] = params[i];\n  }\n}\n\n\n// ********************* Fields *************************************************\n\n\nexport class FieldItemInterface {\n  id?: number;\n  active?: boolean | number;\n  name?: string;\n  component?: ComponentType<any>;\n  config?: SideBySideConfig | LabelConfig | CheckboxConfig | InputConfig | NumberConfig | SelectConfig | SelectMultiConfig | RadioConfig | TextareaConfig | SwitchConfig | MinMaxConfig | MetadataConfig;\n  custom_setting?: Dictionary<FieldCustomSettingInterface>;\n  entry?: FieldEntry;\n  field_id?: number;\n  field_item_id?: number;\n  model?: FieldItemModelInterface;\n  view?: Dictionary<any>;\n  rule?: Dictionary<string | number | boolean | any[]>;\n  rules?: FieldItemRule[];\n  table?: FieldItemTableInterace;\n  trait?: FieldItemTrait;\n  field?: Dictionary<string>;\n  source?: FieldItemOption[];\n  sourceMap?: KeyMap<number>;\n  setting?: Dictionary<boolean | number | string | any[] | Dictionary<boolean | number | string>>;\n  sort?: number;\n}\n\n\nexport class FieldItemConfig {\n  id?: number;\n  active?: boolean | number;\n  name?: string;\n  custom_setting?: Dictionary<FieldCustomSettingInterface> = {};\n  component: ComponentType<any>;\n  config?: LabelConfig | CheckboxConfig | InputConfig | NumberConfig | SelectConfig | SelectMultiConfig | RadioConfig | TextareaConfig | SwitchConfig | MetadataConfig;\n  entry?: FieldEntry;\n  field?: Dictionary<string>;\n  internal_name?: string;\n  model?: FieldItemModelInterface;\n  table?: FieldItemTableInterace;\n  setting?: Dictionary<boolean | number | string | any[] | Dictionary<boolean | number | string>> = {};\n  sort?: number;\n\n\n  constructor(config?: FieldItemInterface) {\n    for (const i in config) this[i] = config[i];\n  }\n}\n\n\nexport interface FieldCustomSettingInterface {\n  id?: number;\n  component?: ComponentType<any>;\n  defaultValue?: boolean | number | string | any[] | Dictionary<boolean | number | string>;\n  disabled?: boolean;\n  field_id?: number;\n\n  group?: string;\n  helpText?: string;\n  icon?: string;\n  item?: string;\n  items?: any;\n  label?: string;\n  modal?: ComponentType<any>;\n  model?: string;\n  multiple?: boolean;\n  name: string;\n  options?: FieldItemOptions;\n  selected?: boolean;\n  type: 'boolean' | 'expression' | 'validation' | 'transformation' | 'model' | 'primary' | 'fixed' | 'trait'; // just guesses at this point\n  value?: boolean | number | string | any[] | Dictionary<boolean | number | string>;\n  when?: any[];\n}\n\n\nexport interface FieldEntry {\n  disabled?: boolean;\n  id: number;\n  field_id: number;\n  name: string;\n  orphaned?: boolean;\n  orphaned_at?: boolean | string;\n  sort_order: number;\n  type: string;\n  traits: FieldCustomSettingInterface[];\n}\n\n\nexport interface FieldItemPatchInterface {\n  field: string;\n  path: string;\n  method?: 'POST' | 'PATCH';\n  businessId?: number; // specify the business\n  callback?: EventCallback;\n  disabled?: boolean;  // allow for auto-patch to be disabled and but still allow to be called manually\n  displayIndicator?: boolean;\n  duration?: number;\n  ignore401?: boolean;\n  metadata?: {};\n  trigger?: 'auto' | 'manual';\n  version?: number;\n  running?: boolean;\n  success?: boolean;\n  raw?: boolean;          // Set to True to patch raw value, aka not json_encode\n  json?: boolean;          // Set to True to patch raw value, aka not json_encode\n}\n\n\nexport interface FieldItemRule {\n  id: number;\n  field_id: number | null;\n  field_item_id: number | null;\n  name: string;\n  defaultValue?: string | boolean | number | any[];\n  value?: string | boolean | number | any[];\n  source?: any[] | null;\n  options?: any[] | null;\n}\n\n\nexport interface FieldItemOptions {\n  assigned?: any;\n  child?: string;\n  converted?: boolean;                      // Indicates that option list has already been parsed into an options set\n  defaultValue?: string | number | boolean | any[];\n  empty?: OptionItem;                       // Pass in an Option Item that you want to represent an unassigned value\n  ensure?: OptionItem;\n  nameKey?: 'string';\n  parent?: string;\n  preserveKeys?: string[];\n  rawValues?: FieldItemOption[];\n  values?: FieldItemOption[];\n  resource?: string;\n  sort?: boolean;\n  prevent?: Array<string | number>;         // pass in ids of an Option Items that you don't want in list\n}\n\n\nexport interface FieldItemOption {\n  value: number | string;\n  name: string;\n  group?: string;\n  groupFk?: number;\n  level?: number;\n  indentation?: number;\n  mode?: number | string;\n  sort_order?: number;\n  selected?: boolean;\n  hidden?: boolean;\n}\n\n\nexport interface FieldItemTableInterace {\n  sort?: number;\n  visible?: boolean;\n  transformation?: any;\n  hidden?: boolean;\n}\n\n\nexport interface FieldItemTrait {\n  metadata?: boolean;\n  primary?: boolean;\n  bubble?: boolean;\n  readonly?: boolean;\n  unique?: boolean;\n  secure?: boolean;\n}\n\n\nexport interface FieldOptionsInterface {\n  layout?: string;\n  legend?: boolean;\n  bubble?: boolean;\n\n  [key: string]: any;\n}\n\n\nexport interface FieldItemModelInterface {\n  active?: boolean;\n  all?: boolean;\n  allowAll?: boolean;\n  allowGroupAll?: boolean;\n  allOverlay?: boolean;\n  allOverlayEnabled?: boolean;\n  allOverlayLabel?: string;\n  allOverlayMessage?: string;\n  allOverlayCallback?: EventCallback;\n  api_path?: string;\n  api_column?: string;\n  api_metadata?: object | any[];\n  assign_all?: boolean;\n  autoFill?: boolean;\n  autoSize?: boolean;\n  autofocus?: boolean;\n  autoselect?: boolean;\n  assignedLabel?: string;\n  bubble?: boolean;\n  button?: boolean;\n\n  border?: boolean;\n  checkbox?: { visible?: boolean, sort?: number };      // [Table: 'Display a selectable checkbox:extraction: a little muddy']\n  name?: string;\n  className?: string;\n  copyLabel?: boolean;         // [Label: The label text has a click to copy]\n  copyLabelDisplay?: string;  // [Label: The label that should go with the label copy button]\n  copyLabelBody?: string | number;    // [Label: The value that be copied when the label copy button is clicked]\n  copyLabelDisplayTransformation?: any; // The transformation that should happen to the copyLabelDisplay\n  copyLabelBodyTransformation?: any; // The transformation that should happen to the copyLabelBody\n\n  copyValue?: boolean;         // [Label: The value text has a click to copy]\n  copyValueDisplay?: string;  // [Label: The value that should go with the value copy button]\n  copyValueBody?: string | number;    // [Label: The value that be copied when the label value button is clicked]\n  copyValueDisplayTransformation?: any; // The transformation that should happen to the copyLabelDisplay\n  copyValueBodyTransformation?: any; // The transformation that should happen to the copyLabelBody\n\n  display?: string;     // [Univr: 'the label of the field/name']\n  displayTitle?: boolean;\n  displayHelper?: boolean;\n  entry?: FieldEntry;\n  empty?: 'ConvertEmptyToNull' | 'ConvertEmptyToZero';\n  filter?: boolean;\n  filterPredicate?: string | DateFilterPredicate;\n  helpText?: string;  // [Univr: 'Creates a tooltip that displays this value :usage: <'The is some helpful information about this field'>']\n  helper?: string;       // [Univr: 'A navigation mechanism: a combo of tooltip, route, and helpText: usage < 'Go to <client>' : extraction : Will look on the active record to find the actual value of client to display inn tooltip and also look for 'client' + '_fk' to create a route\n  hidden?: boolean;\n  html?: string;\n  route?: string;        // [Univr: 'Navigate on click target':extraction: If a field or name navigates, this value needs to till it where to go]\n  subLabel?: string;\n  subValue?: string;\n  id?: string | number;\n  icon?: string;        // Material icon\n  iconType?: string;\n  link?: boolean;       // [Univr: 'Indicate <hype-route> text':extraction:Displays the value as a hyperlink, fires a event when clicked]\n  order?: number;      // [Univr: 'left to right (horizontal) position']\n  sort?: number;       // [Univr: 'top to bottom (vertical) position']\n  visible?: boolean;    // [Table: 'Set to true to see in table view']\n  // show name'\n\n  form?: string;       // [Field: 'html input type <'input' | 'select' | 'textarea' | 'radio' | 'checkbox' | 'switch' | 'metadata'>  'metadata' will not display an html capture but will append field=>value to metadata']\n  value?: any;         // [Field: 'A default/existing value on the html capture'\n  header?: string | number | boolean;\n  height?: string | number;\n  hint?: boolean;\n  hintText?: string;\n  maxHeight?: number;\n  interval?: string;\n  disabled?: boolean;   // [Field: 'Disabled']\n  facade?: boolean;    // [Field: 'Set to true to signal that this field is a client side mechanism (filter, helper, toggle),effects no actual value on the server side(no patch)]\n  label?: string;     // [Univr: 'the label of the field/name']\n  labelButton?: boolean;  // Display the label with a button\n  labelPosition?: string;\n  layout?: string;\n  list?: any;\n  min?: number;         // [Field: 'min value']\n  max?: number;         // [Field: 'max value']\n  mode?: any;\n  maxColumn?: string;\n  maxlength?: number;   // [Field: 'maxlength:default:64]\n  minHeight?: number;   // [Field: 'maxlength:default:64]\n  minlength?: number;   // [Field: 'maxlength:default:64]\n  minValue?: number;\n  maxValue?: number;\n  minColumn?: string;\n  metadata?: object;   // [Field: 'maxlength:default:64]\n  noInitialValue?: boolean;\n  multiple?: boolean;\n  options?: FieldItemOptions;   // [Field: 'maxlength:default:64]\n  optionsLabel?: string;\n  patch?: FieldItemPatchInterface;\n  prevent?: any[];\n  pattern?: string;     // [Field: 'regex pattern:default:'AlphaNumeric']\n  preserve?: boolean;\n  required?: boolean | number;   // [Field: 'set to false to bypass required validator:default:true']\n\n\n  removeAll?: boolean;\n  readonly?: boolean;   // [Field: 'Html attribute']\n  reset?: boolean;       // Flags whether the view should be reset if this field changes\n  step?: number;\n  mask?: string;        // [Field: 'Input Mask']\n  prefix?: string;      // [Field: 'Set a prefix on the html capture .. $, does not get stored on captured value']\n  session?: boolean;\n  sessionPath?: string;\n  size?: number;\n  suffix?: string;      // [Field: 'Set a prefix on the html capture .. '%', does not get stored on captured value']\n  transformation?: any;\n  tabOnEnter?: boolean;           // Convert enter to a tab when control is valid, default is false ie .. set to true when you want to moved down a form list\n  time?: string;\n  truncate?: number;\n  textOverflow?: 'ellipsis' | 'wrap'; // Text overflow behavior,\n  type?: string;\n  validators?: Array<Validators>; // Array of Validators.\n  valueButton?: boolean;  // Display the value with a button\n  valueButtonDisabled?: boolean;  // Display the value with a button\n  valueButtonDisplay?: string;  // The label that should go with the label value button\n  valueButtonDisplayTransformation?: any;  // The transformation that should happen to the valueButtonDisplay\n  warning?: string | number | boolean;\n  when?: any[];         // [Field: 'Pass an array of strings <['name[:value]']> that should be truthful for this field to show.// ['account_fk'] ..ie  <['account_fk']> account_fk just needs to be defined or <['client_fk', 'account_fk:88']> client just needs to be defined, account_fk has to be 88']\n}\n\n\nexport interface FieldInterface {\n  canAdd?: boolean;\n  canRemove?: boolean;\n  configs?: { field_configs: FieldCustomSettingInterface[ ], item_configs: KeyMap<FieldCustomSettingInterface[]> };\n  custom_rule?: Dictionary<any>;\n  custom_setting?: Dictionary<FieldCustomSettingInterface>;\n  custom?: boolean;\n  component?: ComponentType<any>;\n  ancillary?: boolean | number;\n  children?: Dictionary<FieldItemInterface>;\n  data?: any;\n  data_keys?: any[];\n  entries?: FieldEntry[];\n  metadata?: Dictionary<any>;\n  multiple?: boolean;\n  multiple_min?: number;\n  multiple_max?: number;\n  multiple_max_limit?: number;\n  facade?: boolean;\n  fieldgroup?: Entity;\n  hidden?: boolean;\n  id?: number | string;\n  internal_name?: string;\n  model?: FieldItemModelInterface;\n  items?: KeyMap<FieldItemInterface>;\n  itemMap?: any;\n  name?: string;\n  label?: string;\n  options?: Dictionary<any>;\n  position?: number;\n  primary?: boolean;\n  setting?: Dictionary<boolean | number | string | any[] | Dictionary<boolean | number | string>>;\n  show_name?: boolean;\n  sort?: number;\n  state?: 'template_edit' | 'template_readonly' | 'text_single' | 'text_format';\n  table?: Dictionary<any>;\n  trait?: Dictionary<any>;\n  value?: any;\n  view?: Dictionary<any>;\n  when?: any;\n}\n\n\nexport class FieldConfig {\n  canAdd = false;\n  canRemove = false;\n  children?: Dictionary<FieldItemInterface>;\n  component: ComponentType<any>;\n  configs?: { field_configs: FieldCustomSettingInterface[ ], item_configs: KeyMap<FieldCustomSettingInterface[]> };\n  custom_rule?: Dictionary<any>;\n  custom_setting?: Dictionary<FieldCustomSettingInterface> = {};\n  data?: any = {};\n  data_keys: any[] = [];\n  facade? = false;\n  fieldgroup?: Entity;\n  entry?: FieldEntry;\n  entries?: FieldEntry[] = [];\n  metadata? = {};\n  multiple = false;\n  multiple_min? = 1;\n  multiple_max? = 1;\n  multiple_max_limit? = 10;\n\n  id = null;\n  internal_name?: string;\n\n  items?: any;\n  itemMap: any;\n  name = '';\n  label: string;\n  modal?: ComponentType<any>;\n  show_name = true;\n  options = <FieldOptionsInterface>{};\n  primary?: boolean;\n  setting?: Dictionary<boolean | number | string | any[] | Dictionary<boolean | number | string>> = {};\n  sort? = 99;\n  state: 'template_edit' | 'template_readonly' | 'text_single' | 'text_format' = 'template_edit';\n  view?: Dictionary<any>;\n\n\n  // onEvent: Subject<PopBaseEventInterface>;\n\n\n  constructor(params?: FieldInterface) {\n    if (params) for (const i in params) this[i] = params[i];\n    if (!this.options) this.options = {};\n  }\n}\n\n\n// ********************* FIELD GROUPS *************************************************\n\n\nexport interface FieldGroupInterface {\n  id?: string | number;\n  header?: string;\n  border?: boolean;\n  position?: string;\n  debug?: boolean;\n  layout?: 'row' | 'column';\n  metadata?: object;   // Any metadata desired.\n  fields?: FieldInterface[];\n  fieldMap?: object;\n}\n\n\nexport class FieldGroupConfig {\n  id?: string | number;\n  header? = '';\n  border? = false;\n  position? = 'left';\n  debug? = false;\n  layout?: 'row' | 'column' = 'column';\n  metadata?: object = {};   // Any metadata desired.\n  fields?: FieldInterface[] = [];\n  fieldMap?: object;\n\n\n  constructor(params?: FieldGroupInterface) {\n    if (params) for (const i in params) this[i] = params[i];\n  }\n}\n\n\nexport interface SectionInterface {\n  id: string;\n  active?: boolean;\n  name?: string;\n  path?: string;\n  inputs?: object;\n  component: ComponentType<any>;\n  metadata?: object;\n  requireRefresh?: boolean;        // require an api call to refresh the entityId on every load\n}\n\n\nexport class SectionConfig {\n  id: string;\n  name?: string;\n  path? = '';\n  metadata?: object;\n  inputs = {};\n  component: ComponentType<any>;\n  visible = true;\n  require_refresh? = false;\n\n\n  constructor(params: SectionInterface) {\n    if (params) for (const i in params) this[i] = params[i];\n    if (!this.name) this.name = this.id.replace(/_/g, ' ').replace(/(?:^|\\s)\\S/g, function (a) {\n      return a.toUpperCase();\n    });\n\n    if (!this.path) this.path = this.id.replace(/_/g, '-').toLowerCase();\n    if (!this.metadata) this.metadata = {};\n  }\n}\n\n\nexport interface TabSectionBarInterface {\n  name: string;\n  params: EntityParams;\n  access?: EntityAccessInterface;\n  field?: Dictionary<any>;\n  action?: Dictionary<any>;\n  repo?: PopEntityRepoService;\n  entity?: Entity;\n  preference?: EntityPreference;\n  sections?: Array<SectionConfig>;\n  metadata?: any;\n}\n\n\nexport class TabSectionBarConfig {\n  access: EntityAccessInterface = {\n    can_create: false,\n    can_read: false,\n    can_update: false,\n    can_delete: false,\n    can_destroy: false,\n  };\n  params: EntityParams;\n  repo: PopEntityRepoService;\n  entity: Entity;\n  field?: Dictionary<any>;\n  action?: Dictionary<any>;\n  preference: EntityPreference;\n  metadata?: any;\n  name = '';\n  sections: Array<SectionConfig> = [];\n\n\n  constructor(params?: TabSectionBarInterface) {\n    if (params) for (const i in params) this[i] = params[i];\n    if (!this.metadata) this.metadata = {};\n  }\n}\n\n\nexport interface FieldParamInterface {\n  column: string;\n  name: string;   // the base entityId definitions\n  label: string;\n  value: number | string | boolean;\n  defaultValue: number | string | boolean;\n  default_value: number | string | boolean;\n  metadata: Dictionary<any>;\n  params: any;\n  options?: FieldItemOptions;\n  helpText?: string;\n  patch?: FieldItemPatchInterface;\n  facade?: boolean;\n  readonly: boolean;\n  required: boolean;\n  min?: number;\n  max?: number;\n}\n\n\nexport interface Dictionary<T> {\n  [key: string]: T;\n}\n\n\nexport interface KeyMap<T> {\n  [key: number]: T;\n}\n\n\nexport interface DynamicComponentInterface {\n  type: ComponentType<any>;\n  inputs?: Dictionary<number | string | boolean | object | any[]>;\n  position?: number;\n  when?: any;\n  ancillary?: boolean | number;\n  hidden?: boolean;\n  sort?: number;\n}\n\n\nexport interface QueryParamsInterface {\n  archived?: -1 | 0 | 1;\n  related?: boolean;\n  bypassFilters?: boolean;\n  bypassParams?: boolean;\n  select?: string;\n  with?: string;\n  bypassCache?: boolean;\n  cache?: boolean;\n  cacheKey?: string;\n}\n\n\nexport interface PopBaseEventInterface {\n  type: string;                             // (*required)  this should be a generic name of the source component  ..ie field, table, tab, button\n  source: string;                           // the name of the Component that the event came from\n  name: string;                             // (*required)  this should be specific to the event ie ... blur, patch, focus, onValueChange\n\n  channel?: boolean;                        // (optional)   This sets a flag that this event has already be sent across the channel, and should NOT be sent across the channel again\n  session?: boolean;                        // (optional)   This sets a flag that this event created a onSession event\n\n  access?: string;                          // (optional)   This should be a crud access\n  config?: any;                             // (optional)   This should be the source component's configuration\n  core?: CoreConfig;                        // (optional)   This should be an core\n\n  data?: any;                               // (optional)   Used for tracking a changed value\n  data_key?: number;                        // (optional)   data index\n  id?: string | number;                     // (optional)   Misc, used to track between events of modules that are similar\n  ids?: any[];                              // (optional)   Misc, used to track between events of modules that are similar\n  entity?: Entity;\n  form?: FormGroup;                         // (optional)   Form Group of fieldItems\n  group?: FieldItemGroupConfig;             // (optional)   The Field Group Config that this event source belongs to .. ie will give you permissons to the config of other fieldItems in the group\n  field?: FieldInterface;                   // (optional)   Core Field Interface\n  fields?: Dictionary<FieldInterface>;                   // (optional)   Core Field Interface\n  column?: string;                          // (optional)   The field item entityId\n  fieldgroup?: FieldGroupConfig;            // (optional)   The Field Group Config that this event source belongs to .. ie will give you permissons to the config of other fieldItems in the group\n  internal_name?: string;                   // (optional)\n  message?: string;                         // (optional)   Helpful language\n  metadata?: any;                           // (optional)   Additional info\n  method?: string;                          // (optional)   This should be a entityId name create, read, store, delete\n  model?: any;                              // (optional)   This should be the field configuration model that a field config is built off\n  open?: boolean;                            //\n  option?: any;                              //\n\n  tab?: TabConfig;                          // (optional)   The tab config that this event occurred from, ie ... will contain a mapping of the view, ie ... allow you to reload all/portion of the view\n  target?: string;                           // the name of the Component that the event should go to\n  component?: TabComponentInterface;        // (optional)   The tab component config that this event occurred from, ie ... will contain a mapping of the specific tab section of the view\n  options?: any[];                          // (optional)   Used to track options of selects fieldItems, sidebyside, radios\n  position?: string;                        // (optional)   This should reference a template position ie ... left, center, right\n  success?: boolean;                        // (optional)   Specify if a event was successful ie.. patch\n  refresh?: boolean;                        //\n  response?: any;                           // (optional)   The server response on a patch\n  value?: boolean;                          // (optional)   Specify a certain value ie.. patch\n  cdr?: ChangeDetectorRef;                  // (optional)   Reload Tab Position\n\n}\n\n\n/**\n * Method to travel up dom of element until a height is found\n * @param el\n */\n\nexport function ParentHeightSetter(el: ElementRef, className: string = null) {\n  let height = 0;\n  let maxHeight = 0;\n  let attempts = 20;\n  if (el && el.nativeElement && el.nativeElement.parentElement) {\n    let parent = el.nativeElement.parentElement;\n    while (!height && attempts) {\n      if (parent.clientHeight) {\n        if (parent.clientHeight > maxHeight) {\n          maxHeight = parent.clientHeight;\n        }\n        if (className) {\n          if (parent.classList && parent.classList.contains(className)) {\n            height = parent.clientHeight;\n          }\n        } else {\n          height = parent.clientHeight;\n        }\n      }\n      if (!height && parent.parentElement) {\n        parent = parent.parentElement;\n\n      }\n      attempts--;\n    }\n  }\n  if (!height && maxHeight) height = maxHeight;\n\n  return height;\n}\n\n\nexport interface OptionItem {\n  id?: string | number;\n  value?: string | number | null;\n  name: string;\n  label?: string;\n  sort?: number;\n  active?: number | boolean;\n  compact?: boolean;\n}\n\n\nexport interface OptionParamsInterface {\n  key?: string;                             // the default key is 'entityId' ie.. it is going to look for the entityId of the passing in options and convert it to setKey which should be 'value'\n  setKey?: string;                          // the default key is 'value', not really an reason to subject ... yet\n  nameKey?: string;                          // the default key is 'name', this is the column that should be used to present the \"name\" of the item\n  tags?: string[];                          // cant remember\n  sort?: boolean;                           // If set to true, will sort based off of key\n  group?: string;                           // set a default group on the options\n  activeKey?: string;                        // which key should be used for active\n  groupKey?: string;                        // which key should be used for the grouping\n  groupFkKey?: string;                      // which key should be used for the groupFk\n  parent?: { field: string, value: number };// If Set, all options that do not have field:value match will be removed\n  level?: number;                           // Set an indentation level\n  empty?: OptionItem;                       // Pass in an Option Item that you want to represent an unassigned value\n  preserveKeys?: Array<string>;             // pass in keys that should remain in the list\n  prevent?: Array<string | number>;         // pass in ids of an Option Items that you don't want in list\n  ensure?: OptionItem;                      // Pass in an Option item that has to be in the list ... ie maybe the assigned value is archived and does not come through\n  converted?: boolean;\n  hasEmpty?: boolean;\n}\n\n\nexport interface EntityActionInterface {\n  name: string;\n  bubbleAll?: boolean;\n  component?: DynamicComponentInterface;\n  blockEntity?: boolean;\n  facade?: boolean;\n  facadeDuration?: number;\n  fields?: Dictionary<any>;\n  header?: string;\n  width?: string;\n  submitText?: string;\n  cancelText?: string;\n  label?: string;\n  postUrl?: string;\n  goToUrl?: string;\n  http?: 'POST' | 'PATCH' | 'DELETE' | 'GET';\n  responseType?: 'form' | 'boolean' | 'store';\n  store?: Dictionary<any>;\n  active?: boolean | number;\n  callback?: EventCallback;\n  onEvent?: EventPromiseCallback;\n}\n\n\nexport interface EntityActionDataInterface {\n  core: CoreConfig;\n  action?: EntityActionInterface;\n  actionName?: string;\n  extension?: EntityExtendInterface;\n}\n\n\nexport interface EntitySuccessDataInterface {\n  header: string;\n  message: string;\n  submitText?: string;\n}\n\n\nexport interface ServiceRoutesInterface {\n  get?: {\n    entity?: ServiceRouteInterface;\n    entities?: ServiceRouteInterface;\n    config?: ServiceRouteInterface;\n    preference?: ServiceRouteInterface;\n  };\n  patch?: {\n    entity: ServiceRouteInterface;\n    entities?: ServiceRouteInterface;\n  };\n  archive?: {\n    entity?: ServiceRouteInterface;\n  };\n  restore?: {\n    entity?: ServiceRouteInterface;\n  };\n}\n\n\nexport interface ServiceRouteInterface {\n  path: string;\n  params?: ServiceRouteParamInterface;\n}\n\n\nexport interface ServiceRouteParamInterface {\n  with?: string;\n  select?: string;\n\n  [key: string]: string | boolean | number | number[];\n}\n\n\n\n\n","import { Pipe, PipeTransform } from '@angular/core';\n\n\n@Pipe({ name: 'toActiveOrArchived', pure: true })\nexport class ToActiveOrArchivedPipe implements PipeTransform {\n  /**\n   * If value is true, then that would indicate that is archived\n   * @param value\n   */\n  transform(value){\n    if( value === 'true' || value === '1' ) value = true;\n    if( value === 'false' || value === '0' ) value = false;\n    return value && value !== null ? 'Archived' : 'Active';\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({ name: 'label', pure: true })\nexport class LabelPipe implements PipeTransform {\n\n  aliases = [];\n\n\n  /**\n   * Provides the actual name we want displayed to the user.\n   * text - The field name coming from the DB.\n   * displayInfo - Either a string or object. If object then will look for property display or label. Takes aliases into account. IE: account:ID\n   * set - If passed will look in the displayInfo object for this field before falling back to the display or label field.\n   * returns {string}\n   */\n  transform(text: string, displayInfo: any = '', displayField: string = ''){\n    let displayString = '';\n\n    if( displayInfo && typeof displayInfo === 'string' ){\n      displayString = displayInfo;\n    }else if( displayInfo && displayField && displayInfo[ displayField ] ){\n      displayString = displayInfo[ displayField ];\n    }else if( displayInfo && displayInfo.display ){\n      displayString = displayInfo.display;\n    }else if( displayInfo && displayInfo.label ){\n      displayString = displayInfo.label;\n    }\n\n    // Check for aliases.\n    if( displayString ){\n      if( displayString.includes('alias:') ){\n        const aliasArray = displayString.split(':');\n        aliasArray.shift();\n        const alias = this.getAlias(aliasArray.shift()).toLocaleLowerCase();\n        displayString = alias.charAt(0).toUpperCase() + alias.slice(1) + ' ';\n        let tempString = '';\n        while( tempString = aliasArray.shift() ) displayString += ' ' + tempString;\n      }\n    }else{\n      // Format the string base on the field name.\n      const words = text.split('_');\n      for( const word of words ){\n        if( word === 'id' || word === 'fk' ){\n          displayString += 'ID ';\n        }else{\n          displayString += word.charAt(0).toUpperCase() + word.slice(1) + ' ';\n        }\n      }\n    }\n\n    return displayString.trim();\n  }\n\n\n  public getAlias(entity){\n    return ( this.aliases[ entity ] ? this.aliases[ entity ] : entity );\n  }\n}\n","import {\n  Dictionary,\n  Entity,\n  OptionItem,\n  OptionParamsInterface,\n  PopAuth, PopLog,\n  PopRouteAliasMap,\n  PopTemplate,\n  ServiceInjector\n} from './pop-common.model';\nimport {PopLogService} from './services/pop-log.service';\nimport {PhonePipe} from './pipes/phone.pipe';\nimport {ToActiveOrArchivedPipe} from './pipes/toActiveOrArchived.pipe';\nimport {LabelPipe} from './pipes/label.pipe';\nimport {isDevMode} from '@angular/core';\n\n\n/************************************************************************************************\n *                                                                                              *\n *                                      Local Storage                                           *\n *                                                                                              *\n ************************************************************************************************/\n\n/**\n * Store a value in localStorage for the site\n * @param siteVarPath - This should always follow a dot notation that represents the structure of an object App.Setting.value\n * @param siteVal\n */\nexport function SetSiteVar(siteVarPath: string, siteVal: any) {\n  if (IsString(siteVarPath, true) && siteVarPath.includes('.') && IsDefined(siteVal)) {\n    // if( IsObject(siteVal) || IsArray(siteVal) ) siteVal = JSON.stringify(siteVal);\n    const steps: string[] = siteVarPath.split('.');\n    const basePath = steps.shift();\n    if (basePath) {\n      const baseStorage = JSON.parse(localStorage.getItem(basePath) || '{}');\n      const key = steps.length ? steps.pop() : basePath;\n      const pathStorage = steps.length ? StorageSetter(baseStorage, steps) : baseStorage;\n      if (pathStorage && key) {\n        if (siteVal === null) {\n          delete pathStorage[key];\n        } else {\n          pathStorage[key] = siteVal;\n        }\n        localStorage.setItem(basePath, JSON.stringify(baseStorage));\n      }\n    }\n  }\n\n}\n\n\n/**\n * Get stored value in localStorage for the site\n * @param siteVarPath - This should always follow a dot notation that represents the structure of an object App.Setting.value\n * @param defaultValue\n * @constructor\n */\nexport function GetSiteVar(siteVarPath: string, defaultValue: any = null) {\n  if (IsString(siteVarPath, true) && siteVarPath.includes('.')) {\n    const steps = siteVarPath.split('.');\n    const basePath = steps.shift();\n    if (basePath) {\n      const key = steps.length ? steps.pop() : basePath;\n      // console.log('basePath ', basePath, ' key', key);\n      const baseStorage = JSON.parse(localStorage.getItem(basePath) || '{}');\n      // console.log('baseStorage', basePath, baseStorage);\n      const pathStorage = steps.length ? StorageSetter(baseStorage, steps) : baseStorage;\n      // console.log('pathStorage', pathStorage);\n      if (pathStorage && key) {\n        const value = typeof pathStorage[key] !== 'undefined' ? pathStorage[key] : defaultValue;\n        // console.log('GetSiteVar', siteVarPath, value, typeof value);\n        return value;\n      } else {\n        return defaultValue;\n      }\n    }\n\n  }\n  return defaultValue;\n}\n\n\nexport function GetRouteAlias(internal_name, type: 'plural' | 'singular' = 'plural'): string {\n  if (IsString(internal_name, true)) {\n    if (IsObject(PopRouteAliasMap, [internal_name])) {\n      return PopRouteAliasMap[internal_name][type];\n    } else {\n      let alias = SnakeToPascal(internal_name);\n      alias = SpaceToHyphenLower(alias);\n      if (type === 'plural') {\n        if (alias.slice(-1) !== 's') alias = `${alias}s`;\n      }\n      return alias;\n    }\n  }\n  return internal_name;\n\n}\n\n\n/************************************************************************************************\n *                                                                                              *\n *                                      Session Storage                                         *\n *                                                                                              *\n ************************************************************************************************/\n\n\n/**\n * Set a session variable for the site\n * @param siteVarPath - This should always follow a dot notation that represents the structure of an object App.Setting.value\n * @param siteVal\n * @constructor\n */\nexport function SetSessionSiteVar(siteVarPath: string, siteVal): void {\n  if (IsString(siteVarPath, true) && siteVarPath.includes('.') && IsDefined(siteVal)) {\n    // if( IsObject(siteVal) || IsArray(siteVal) ) siteVal = JSON.stringify(siteVal);\n    const steps: string[] = siteVarPath.split('.');\n    const basePath = steps.shift();\n    if (basePath) {\n      const key = steps.length ? steps.pop() : basePath;\n      const baseStorage = JSON.parse(sessionStorage.getItem(basePath) || '{}');\n      const pathStorage = steps.length ? StorageSetter(baseStorage, steps) : baseStorage;\n      if (pathStorage && key) {\n        if (siteVal === null) {\n          delete pathStorage[key];\n        } else {\n          pathStorage[key] = siteVal;\n        }\n        sessionStorage.setItem(basePath, JSON.stringify(baseStorage));\n        // console.log('SetSessionSiteVar', basePath, baseStorage);\n      }\n    }\n\n  }\n}\n\n/**\n * Get a stored session variable for the site\n * @param siteVarPath - This should always follow a dot notation that represents the structure of an object App.Setting.value\n * @param defaultValue - Return this value if a stored value is not found\n * @constructor\n */\nexport function GetSessionSiteVar(siteVarPath: string, defaultValue: any = null) {\n  if (IsString(siteVarPath, true) && siteVarPath.includes('.')) {\n    const steps = siteVarPath.split('.');\n    const basePath = steps.shift();\n    if (basePath) {\n      const key = steps.length ? steps.pop() : basePath;\n      const baseStorage = JSON.parse(sessionStorage.getItem(basePath) || '{}');\n      const pathStorage = steps.length ? StorageSetter(baseStorage, steps) : baseStorage;\n      if (pathStorage && key) {\n        const value = typeof pathStorage[key] !== 'undefined' ? pathStorage[key] : defaultValue;\n        // console.log('GetSessionSiteVar', siteVarPath, value, typeof value);\n        return value;\n      } else {\n        return defaultValue;\n      }\n    }\n  }\n  return defaultValue;\n}\n\n/**\n * Get a stored session variable for the site that has been base64 encoded\n * @param siteVarPath\n * @param defaultValue\n * @constructor\n */\nexport function GetEncodedSessionSiteVar(siteVarPath: string, defaultValue: any = null) {\n  let siteVar = GetSessionSiteVar(siteVarPath, defaultValue);\n  if (IsString(siteVar, true)) {\n    try {\n      siteVar = JSON.parse(atob(siteVar));\n    } catch (e) {\n      siteVar = null;\n    }\n  } else {\n    siteVar = null;\n  }\n  return siteVar;\n}\n\n/**\n * Deep Copy an Object\n * @param obj\n */\nexport function DeepCopy(obj) {\n  let copy;\n\n  // Handle the 3 simple types, and null or undefined\n  if (null == obj || 'object' != typeof obj) return obj;\n\n  // Handle Date\n  if (obj instanceof Date) {\n    copy = new Date();\n    copy.setTime(obj.getTime());\n    return copy;\n  }\n\n  // Handle Array\n  if (obj instanceof Array) {\n    copy = [];\n    for (let i = 0, len = obj.length; i < len; i++) {\n      copy[i] = DeepCopy(obj[i]);\n    }\n    return copy;\n  }\n\n  // Handle Object\n  if (obj instanceof Object) {\n    copy = {};\n    for (const attr in obj) {\n      if (obj.hasOwnProperty(attr)) copy[attr] = DeepCopy(obj[attr]);\n    }\n    return copy;\n  }\n\n  throw new Error('Unable to copy obj! Its type isn\\'t supported.');\n}\n\nexport function RandomInt(min, max) {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nexport function JsonCopy(x: any) {\n  return JSON.parse(JSON.stringify(x));\n}\n\n/**\n * Deep merge two objects.\n * @param target\n * @param ...sources\n */\nexport function DeepMerge(target, ...sources) {\n  if (!sources.length) return target;\n  const source = sources.shift();\n\n  if (IsObject(target) && IsObject(source)) {\n    for (const key in source) {\n      if (IsObject(source[key])) {\n        if (!target[key]) Object.assign(target, {[key]: {}});\n        DeepMerge(target[key], source[key]);\n      } else {\n        Object.assign(target, {[key]: source[key]});\n      }\n    }\n  }\n\n  return DeepMerge(target, ...sources);\n}\n\n/**\n * Helper Function to prepare an array to used as an option set for a field item\n * @param arr\n * @param params\n */\nexport function ConvertArrayToOptionList(arr: OptionItem[], params: OptionParamsInterface = {}) {\n  if (!params.key) params.key = 'id';\n  if (!params.setKey) params.setKey = 'value';\n  if (!params.nameKey) params.nameKey = 'name';\n  if (!params.tags) params.tags = null;\n  if (!params.prevent) params.prevent = [];\n  if (!params.parent) params.parent = null;\n  if (!params.groupKey) params.groupKey = 'group';\n  if (!params.activeKey) params.activeKey = 'active';\n  if (!params.preserveKeys) params.preserveKeys = [];\n\n  // if( typeof params.level === 'undefined') params.level = 1;\n\n  if (params.converted) return arr.slice();\n\n  let optionList = [];\n  let listOption;\n  let ensureOptionFound = false;\n  if (Array.isArray(arr) && arr.length) {\n    // check if this list has already be converted to the option list structure, so it does not get re-run\n    let tmpArr = [...arr];\n    const first = tmpArr[0];\n\n    if (params.key === 'id' && typeof first.id === 'undefined' && typeof first.value !== 'undefined') params.key = 'value';\n    if (typeof first[params.activeKey] !== 'undefined') {\n      tmpArr = tmpArr.filter((item) => item[params.activeKey]);\n    }\n\n    if (typeof first[params.nameKey] === 'undefined' && first.name) {\n      params.nameKey = 'name';\n    }\n\n    tmpArr.map((item) => {\n      if (item && params.key in item && params.prevent.indexOf(item[params.key]) === -1) {\n        if (params.parent) {\n          if (params.parent.field in item && +item[params.parent.field] === +params.parent.value) {\n            // continue\n          } else {\n            return false;\n          }\n        }\n        listOption = {name: item[params.nameKey], sort_order: item.sort};\n        listOption[params.setKey] = item[params.key];\n        if (params.preserveKeys.length) {\n          params.preserveKeys.map(preserveKey => {\n            listOption[preserveKey] = item[preserveKey] ? item[preserveKey] : undefined;\n          });\n        }\n        if (typeof item['level'] === 'number') {\n          listOption.level = item['level'];\n        } else if (params.level) {\n          listOption.level = params.level;\n        }\n\n        if (typeof item[params.groupKey] === 'string') {\n          listOption.group = item[params.groupKey] ? item[params.groupKey] : params.group ? item[params.groupKey] : '';\n        }\n        if (typeof params.groupFkKey === 'string') {\n          listOption.groupFk = item[params.groupFkKey] ? item[params.groupFkKey] : 0;\n        }\n        if (params.ensure && params.ensure.id && !ensureOptionFound && params.ensure[params.setKey] === item[params.setKey]) {\n          ensureOptionFound = true;\n        }\n        if (params.tags) {\n          params.tags.map((tag) => {\n            if (tag in item) {\n              listOption[tag] = item[tag];\n            }\n          });\n        }\n        if (listOption[params.setKey]) optionList.push(listOption);\n      }\n    });\n    if (params.ensure && !ensureOptionFound) {\n      optionList.push(params.ensure);\n    }\n    if (params.sort && optionList.length > 1) {\n      if (typeof optionList[0].sort_order !== 'undefined') {\n        optionList.sort((a, b) => {\n          if (a.sort_order < b.sort_order) return -1;\n          if (a.sort_order > b.sort_order) return 1;\n          return 0;\n        });\n      } else {\n        optionList.sort((a, b) => {\n          if (a.name < b.name) return -1;\n          if (a.name > b.name) return 1;\n          return 0;\n        });\n      }\n    }\n  }\n  // add empty option only if the optionList is empty !IsArray(optionList,true)\n\n\n  // remove any duplicates\n\n  // return optionList;\n\n  return [...new Map(optionList.map(item => [item['name'], item])).values()];\n}\n\n/**\n * Helper to get an nested value out of an object\n * @param storage - The base object you want to reach into\n * @param steps  - the nested path to the find the value you are looking for\n * @param defaultValue Set a default value to return if value is not found\n */\nexport function StorageGetter(storage, steps: string[], defaultValue: any = null): any {\n  if (IsObject(storage, true)) {\n    let pathLength = steps.length;\n    let path: string;\n    while (pathLength) {\n      path = steps.shift();\n      if (!storage[path]) {\n        return defaultValue;\n      }\n      storage = storage[path];\n      pathLength--;\n    }\n    if (!storage) {\n      return defaultValue;\n    }\n  } else {\n    return defaultValue;\n  }\n\n  return storage;\n}\n\n/**\n * Helper to set a storage container into a nested location in an object\n * @param storage - The base object you want to reach into\n * @param steps  - the nested path to the find the value you are looking for\n * @param defaultValue Set a default value to return if value is not found\n */\nexport function StorageSetter(storage, steps: string[]): object | null {\n  let pathLength = steps.length;\n  let path: string;\n  while (pathLength) {\n    path = steps.shift();\n    if (!storage[path]) {\n      storage[path] = {};\n    }\n    storage = storage[path];\n    pathLength--;\n  }\n  return storage;\n}\n\nexport function Sleep(milliseconds) {\n  return new Promise(resolve => setTimeout(resolve, milliseconds));\n}\n\n\n/**\n * Sort helper for a list of objects where the sort needs to be done on a specific property\n * @param key\n * @param order\n */\nexport function DynamicSort(key, order = 'asc') {\n  return function (a, b) {\n    if (!a.hasOwnProperty(key) || !b.hasOwnProperty(key)) {\n      // property doesn't exist on either object\n      return 0;\n    }\n    const varA = (typeof a[key] === 'string') ?\n      a[key].toUpperCase() : a[key];\n    const varB = (typeof b[key] === 'string') ?\n      b[key].toUpperCase() : b[key];\n\n    let comparison = 0;\n    if (varA > varB) {\n      comparison = 1;\n    } else if (varA < varB) {\n      comparison = -1;\n    }\n    return (\n      (order == 'desc') ? (comparison * -1) : comparison\n    );\n  };\n}\n\n/**\n * Check if the values of two arrays contain the same items\n * This is way to get around the order not being the same, but the items are the same\n * @param arr1\n * @param arr2\n * @param field\n */\nexport function ArraysMatch(arr1: any[], arr2: any[], field: string) {\n  if (arr1.length !== arr2.length)\n    return false;\n  if (field) {\n    for (let i = arr1.length; i--;) {\n      if (arr1[i][field] !== arr2[i][field])\n        return false;\n    }\n  } else {\n    for (let i = arr1.length; i--;) {\n      if (arr1[i] !== arr2[i])\n        return false;\n    }\n  }\n\n\n  return true;\n}\n\n/**\n * Check if an array contains a list of key:value pairs\n * @param needles\n * @param haystack\n * @param strict\n */\nexport function ArrayContainsAll(needles: Array<string>, haystack: Array<string>, strict: boolean = false) {\n  haystack = haystack.map(function (hay) {\n    return String(hay).toLowerCase().trim();\n  });\n  if (strict) {\n    for (let i = 0, len = needles.length; i < len; i++) {\n      needles[i] = String(needles[i]).toLowerCase().trim();\n      if (haystack.indexOf(needles[i]) === -1) return false;\n    }\n  } else {\n    const need = needles.length;\n    let match: boolean;\n    let met = 0;\n    needles.forEach(function (needle) {\n      // loop over the blacklisted terms\n      match = null;\n      haystack.some(function (str) {\n        if (String(str).toLowerCase().trim().indexOf(needle) > -1) {\n          match = true;\n          return true;\n        }\n      });\n      if (match) {\n        met++;\n      }\n    });\n    return met >= need;\n  }\n  return true;\n}\n\n/**\n * Create a map of an array of objects using a specific property\n * @param arr\n * @param array_key_field\n */\nexport function ArrayMapSetter(arr: any[], array_key_field) {\n  const map = {};\n  if (Array.isArray(arr)) {\n    arr.forEach((value, index) => {\n      if (value[array_key_field]) map[value[array_key_field]] = index;\n    });\n  }\n\n  return map;\n}\n\n/**\n * Sort an array by a parent_id\n * @param arr\n * @param parentId\n * @param result\n * @param itemKey\n * @param parentKey\n * @constructor\n */\nexport function ArrayParentSort(arr: any[], parentId = 0, result = [], itemKey = 'id', parentKey = 'parent_id') {\n  if (IsArray(arr, true)) {\n    arr.map(item => {\n      if (+item[parentKey] === +parentId) {\n        result.push(item);\n        ArrayParentSort(arr, item[itemKey], result, itemKey, parentKey);\n      }\n    });\n  }\n  return result;\n}\n\n/**\n * Convert an array to a nested array\n * @param data\n * @param itemKey\n * @param parentKey\n * @constructor\n */\nexport function ArrayTreeList(data: any[], itemKey = 'id', parentKey = 'parent_id') {\n  const map = {};\n  const roots = [];\n  let node;\n  let i;\n\n  for (i = 0; i < data.length; i += 1) {\n    map[data[i][itemKey]] = i; // initialize the map\n    data[i].children = []; // initialize the children\n  }\n\n  for (i = 0; i < data.length; i += 1) {\n    node = data[i];\n    if (node[parentKey] !== 0) {\n      // if you have dangling branches check that map[node.parentId] exists\n      data[map[node[parentKey]]].children.push(node);\n    } else {\n      roots.push(node);\n    }\n  }\n  return roots;\n}\n\n/**\n * Flatten an array that has parent/child relationship\n * @param list\n * @param result\n * @param level\n * @param itemKey\n * @param parentKey\n * @constructor\n */\nexport function ArrayParentTreeFlatten(list: any[], result = [], level = 0, itemKey = 'id', parentKey = 'parent_id') {\n  let children;\n  if (IsArray(list, true)) {\n    list.map((item) => {\n      children = item.children;\n      delete item.children;\n      item.level = level;\n      result.push(item);\n      if (IsArray(children, true)) {\n        ArrayParentTreeFlatten(children, result, level + 1);\n      }\n    });\n  }\n  return result;\n}\n\n/**\n * Create an array with parent child relations\n * @param data\n * @param parentId\n * @param result\n * @param tree\n * @param itemKey\n * @param parentKey\n * @param flatten\n * @constructor\n */\nexport function ArrayParentTree(data: any[], parentId = 0, result = [], tree?: any[], itemKey = 'id', parentKey = 'parent_id', flatten = false) {\n  data = ArrayParentSort(data, parentId, result, itemKey, parentKey);\n  data = ArrayTreeList(data, itemKey, parentKey);\n  return data;\n}\n\n/**\n * Create a map of list of object keyed by an object property\n * @param arr\n * @param array_key_field\n */\nexport function ArrayKeyBy(arr: any[], key: string) {\n  const keyBy = {};\n  if (IsArray(arr, true) && IsString(key, true)) {\n    arr.map(x => {\n      if (IsDefined(x[key])) keyBy[x[key]] = x;\n    });\n  }\n  return keyBy;\n}\n\n\n/**\n * Determine if an object is an array\n * @param arr\n * @param requireLength - Requires that it is an array but also has values\n */\nexport function IsArray(arr: any, requireLength = false): boolean {\n  if (Array.isArray(arr)) {\n    if (requireLength) {\n      if (arr.length) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n    return true;\n  }\n  return false;\n}\n\nexport function IsArrayThrowError(arr: any, requireLength = false, throwError: string): boolean {\n  const isArray = IsArray(arr, requireLength);\n  if (!isArray) {\n    if (IsObject(PopLog)) {\n      if (PopLog.enabled('error')) {\n        console.log(PopLog.message(`IsArrayError: Fail`), PopLog.color('error'), {\n          data: arr,\n          requireLength: requireLength,\n          name: throwError\n        });\n      }\n    }\n\n    throw new Error(throwError);\n  }\n  return isArray;\n}\n\n\n/**\n * Convert an Object to an Array\n * @param obj\n */\nexport function ToArray(obj: object): any[] {\n  if (typeof obj === 'object' && Object.keys(obj).length) {\n    return Object.keys(obj).map(function (key) {\n      return obj[key];\n    });\n  }\n  return [];\n}\n\n/**\n * Check if a var is undefined\n * @param x\n */\nexport function IsUndefined(x: any): boolean {\n  if (typeof x === 'undefined') return true;\n  return false;\n}\n\n/**\n * Check if a var is defined\n * @param x\n */\nexport function IsDefined(x: any, allowNull = true): boolean {\n  if (x === null && !allowNull) return false;\n  if (typeof x === 'undefined') return false;\n  return true;\n}\n\n/**\n * Convert an Array to an object\n * @param obj\n */\nexport function ToObject(arr: any[]) {\n  if (arr && Array.isArray(arr) && arr.length) {\n    const rv = {};\n    for (let i = 0; i < arr.length; ++i)\n      rv[i] = arr[i];\n    return rv;\n  }\n  return arr;\n}\n\nexport function ObjectsMatch(x, y) {\n  if (x === null || x === undefined || y === null || y === undefined) {\n    return x === y;\n  }\n  // after this just checking type of one would be enough\n  if (x.constructor !== y.constructor) {\n    return false;\n  }\n  // if they are functions, they should exactly refer to same one (because of closures)\n  if (x instanceof Function) {\n    return x === y;\n  }\n  // if they are regexps, they should exactly refer to same one (it is hard to better equality check on current ES)\n  if (x instanceof RegExp) {\n    return x === y;\n  }\n  if (x === y || x.valueOf() === y.valueOf()) {\n    return true;\n  }\n  if (Array.isArray(x) && x.length !== y.length) {\n    return false;\n  }\n\n  // if they are dates, they must had equal valueOf\n  if (x instanceof Date) {\n    return false;\n  }\n\n  // if they are strictly equal, they both need to be object at least\n  if (!(x instanceof Object)) {\n    return false;\n  }\n  if (!(y instanceof Object)) {\n    return false;\n  }\n\n  // recursive object equality check\n  const p = Object.keys(x);\n  return Object.keys(y).every(function (i) {\n      return p.indexOf(i) !== -1;\n    }) &&\n    p.every(function (i) {\n      return ObjectsMatch(x[i], y[i]);\n    });\n}\n\n/**\n * Check for a qualified object\n * @param value\n * @param requireKeys\n * @constructor\n */\nexport function IsObject(value: any, requireKeys: boolean | string[] = false): boolean {\n  if (!Array.isArray(value) && value !== null && typeof value === 'object') {\n    if (requireKeys) {\n      if (typeof requireKeys === 'boolean' && Object.keys(value).length) {\n        return true;\n      } else if (IsArray(requireKeys, true)) {\n        let pass = true;\n        const keys = <string[]>requireKeys;\n        keys.some((key) => {\n          if (!(key in value)) pass = false;\n          return true;\n        });\n        if (!pass) return false;\n      } else {\n        return false;\n      }\n    }\n    return true;\n  }\n  return false;\n}\n\n\n/**\n * Check for a qualified function\n * @param value\n * @param requireKeys\n * @constructor\n */\nexport function IsCallableFunction(fn: any): boolean {\n  return typeof fn === 'function';\n}\n\n/**\n * Remove empty values from an object\n * @param obj\n * @constructor\n */\nexport function CleanObject(obj: Object, options: { whitelist?: string[], blacklist?: string[], alias?: Dictionary<string> } = {}) {\n  if (!(IsArray(options.whitelist))) options.whitelist = [];\n  if (!(IsArray(options.blacklist))) options.blacklist = [];\n  if (!(IsObject(options.alias))) options.alias = {};\n  for (const propName in obj) {\n    if (!(options.whitelist.includes(propName)) && (obj[propName] === null || obj[propName] === undefined || options.blacklist.includes(propName))) {\n      delete obj[propName];\n    }\n    if (propName in options.alias && IsString(options.alias[propName], true)) {\n      obj[options.alias[propName]] = obj[propName];\n      delete obj[propName];\n    }\n  }\n  return obj;\n}\n\n/**\n * A helper function to determine if a variable is a qualified object\n *\n * @param value\n * @param requireKeys\n * @param throwError\n */\nexport function IsObjectThrowError(value: any, requireKeys: boolean | string[] = false, throwError: string): boolean {\n  const isObject = IsObject(value, requireKeys);\n  if (!isObject && throwError) {\n    if (IsObject(PopLog)) {\n      if (PopLog.enabled('error')) {\n        if (PopTemplate) {\n          if (isDevMode() && !(IsObject(PopAuth, ['token']))) {\n            PopTemplate.error({message: `${throwError}, this may be due to not being authenticated.`, code: 500});\n          }\n        }\n        console.log(PopLog.message(`IsObjectError: Fail`), PopLog.color('error'), {\n          data: value,\n          requireKeys: requireKeys,\n          name: throwError\n        });\n      }\n    }\n\n    throw new Error(throwError);\n  }\n\n  return isObject;\n}\n\n/**\n * Check for a qualified number\n * @param value\n * @param requireTruthy\n * @constructor\n */\n\nexport function IsNumber(value: any, requireTruthy?: boolean): boolean {\n  if ((typeof value === 'number' || typeof value === 'string') && String(value).length && !isNaN(Number(value.toString()))) {\n    if (requireTruthy) {\n      if (+value) {\n        return true;\n      } else {\n        return false;\n      }\n    } else {\n      return true;\n    }\n  }\n  return false;\n}\n\n\n/**\n * Check for a qualified string\n * @param value\n * @param requireLength\n * @constructor\n */\nexport function IsString(value: any, requireLength = false): boolean {\n  if (value && typeof value === 'string' && !(IsNumber(value))) {\n    if (requireLength) {\n      if (String(value).length) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n    return true;\n  }\n  return false;\n}\n\n/**\n *\n * A helper function to determine if a variable is a qualified string\n * @param value\n * @param requireLength\n * @param throwError\n */\nexport function IsStringError(value: any, requireLength = false, throwError: string): boolean {\n  const isString = IsString(value, requireLength);\n  if (!isString && throwError) {\n    if (IsObject(PopLog)) {\n      if (PopLog.enabled('error')) {\n        console.log(PopLog.message(`IsStringError: Fail`), PopLog.color('error'), {\n          data: value,\n          requireLength: requireLength,\n          name: throwError\n        });\n      }\n    }\n    throw new Error(throwError);\n  }\n  return isString;\n}\n\n/**\n * Capitalize the first Letter of every word in a string\n * @param str\n * @returns str\n */\nexport function TitleCase(str: string) {\n  if (IsString(str, true)) {\n    str = StringReplaceAll(str, '_', ' ');  // convert underscores to spaces\n    str = String(str).replace(/\\w\\S*/g, (txt) => {\n      return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase(); // capitalize first letter of words\n    });\n    str = str.replace(/(^|[\\s-])\\S/g, function (match) { // capitalize letters after hyphens\n      return match.toUpperCase();\n    });\n  }\n  return str;\n}\n\n/**\n * Capitalize the first Letter of every word in a string\n * @param str\n * @returns str\n */\nexport function Capitalize(str: string) {\n  if (IsString(str, true)) {\n    str = str.trim();\n    str = StringReplaceAll(str, '_', ' ');  // convert underscores to spaces\n    str = StringReplaceAll(str, '\\'', '');  // convert ' to spaces\n    str = str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();\n  }\n  return str;\n}\n\n/**\n * Convert a string from snake case to Pascal Case\n * @param field\n * @returns string\n */\nexport function SnakeToPascal(field: string): string {\n  if (IsString(field, true)) {\n    const words = field.split('_');\n    let validField = '';\n    for (const word of words) {\n      validField += word.charAt(0).toUpperCase() + word.slice(1) + ' ';\n    }\n    return String(validField).trim();\n  }\n  return field;\n\n}\n\n/**\n * Convert a string with spaces to snake case .. 'this is snake case' to 'this_is_snake_case'\n * @param field\n * @returns string\n */\nexport function SpaceToSnake(pascal: string): string {\n  const words = pascal.split(' ');\n  for (let word of words) {\n    word = String(word).toLowerCase();\n  }\n  return words.join('_');\n}\n\n\n/**\n * Convert a string with hyphens to Pascal Case\n * @param field\n * @returns string\n */\nexport function HyphenToPascal(field: string): string {\n  const words = field.split('-');\n  let validField = '';\n  for (const word of words) {\n    validField += word.charAt(0).toUpperCase() + word.slice(1) + ' ';\n  }\n  return validField;\n}\n\n/**\n * Convert a string with spaces to Pascal Case\n * @param field\n * @returns string\n */\nexport function SpaceToHyphenLower(str: string): string {\n  const tmp = str.trim();\n  return String(StringReplaceAll(tmp, ' ', '-')).toLowerCase();\n}\n\n\n/**\n * String replace all\n * @param str\n * @param find\n * @param replace\n * @constructor\n */\nexport function StringReplaceAll(str: string, find: string, replace: string): string {\n  return str.replace(new RegExp(find, 'g'), replace);\n}\n\n\n/**\n * Search filter helper to see if an object contains tags\n * @param obj\n * @param tags\n * @param match\n * @param values\n * @param has\n * @param not\n * @constructor\n */\nexport function ObjectContainsTagSearch(obj, tags: string, match = null, values = null, has = null, not = null) {\n  if (String(tags).length) {\n    has = String(tags).toLowerCase().split(',').map(function (str) {\n      return str.trim();\n    }).filter(\n      item => {\n        return String(item).length && String(item).charAt(0) !== '!';\n      }\n    );\n\n    not = String(tags).toLowerCase().split(',').map((str) => {\n      return str.trim();\n    }).filter(\n      item => {\n        return String(item).length >= 2 && String(item).charAt(0) === '!';\n      }\n    );\n    not = not.map((tag) => {\n      return StringReplaceAll(tag, '!', '');\n    }).filter((tag) => {\n      return tag.length >= 1;\n    });\n\n    match = true;\n    values = Object.values(obj).filter(\n      val => {\n        return String(val).length > 0;\n      });\n\n    if (Array.isArray(not) && not.length) {\n      match = true;\n      not.some(tag => {\n        values.some((val) => {\n          if (String(val).toLowerCase().indexOf(tag) > -1) {\n            match = null;\n            return true;\n          }\n        });\n        if (!match) {\n          return true;\n        }\n      });\n    }\n    if (match === true) {\n      match = null;\n      if (Array.isArray(has) && has.length) {\n        has.some((tag) => {\n          if (tag.indexOf('&') > -1) {\n            const has2 = String(tag).toLowerCase().split('&').map((str) => {\n              return str.trim();\n            }).filter(item => {\n              return String(item).length && String(item).charAt(0) !== '!';\n            });\n\n            let not2 = String(tag).toLowerCase().split('&').map((str) => {\n              return str.trim();\n            }).filter(\n              item => {\n                return String(item).length >= 1 && String(item).charAt(0) === '!';\n              });\n\n            not2 = not2.map(firstTag => {\n              return StringReplaceAll(firstTag, '!', '');\n            }).filter(nextTag => {\n              return nextTag.length >= 1;\n            });\n\n            match = true;\n            if (Array.isArray(not2) && not2.length) {\n              match = true;\n              not2.some((firstTag) => {\n                values.some((val) => {\n                  if (String(val).toLowerCase().indexOf(firstTag) > -1) {\n                    match = null;\n                    return true;\n                  }\n                });\n                if (!match) {\n                  return true;\n                }\n              });\n            }\n            if (match === true) {\n              match = null;\n              if (Array.isArray(has2) && has2.length) {\n                if (ArrayContainsAll(has2, values)) {\n                  match = true;\n                }\n                return match;\n              }\n            }\n            return match;\n          } else {\n            values.some((val) => {\n              if (String(val).toLowerCase().indexOf(tag) > -1) {\n                match = true;\n                return true;\n              }\n            });\n          }\n          if (match) {\n            return true;\n          }\n        });\n      }\n    }\n    return match;\n  }\n\n  return true;\n}\n\nexport function ConvertDateToDateTimeFormat(value): string {\n  const dt = new Date(value);\n  dt.setHours(dt.getHours() + Math.round(dt.getMinutes() / 60));\n  dt.setMinutes(0);\n\n  let date: any = dt.getDate();\n  if (String(date).length === 1) {\n    date = '0' + date;\n  }\n\n  let month: any = dt.getMonth() + 1;\n  if (String(month).length === 1) {\n    month = '0' + month;\n  }\n\n  const year = dt.getFullYear();\n  let h: any = dt.getHours();\n  if (String(h).length === 1) {\n    h = '0' + h;\n  }\n\n  return year + '-' + month + '-' + date + ' ' + h + ':' + '00' + ':' + '00';\n}\n\nexport function ConvertDateFormat(value: string, format = 'yyyy-mm-dd'): string {\n  const dt = new Date(value);\n  let dateFormat;\n\n  let date: any = dt.getDate();\n  if (String(date).length === 1) {\n    date = '0' + date;\n  }\n\n  let month: any = dt.getMonth() + 1;\n  if (String(month).length === 1) {\n    month = '0' + month;\n  }\n\n  const year = dt.getFullYear();\n\n  switch (String(format).toLowerCase()) {\n    case 'mm-dd-yyyy':\n      dateFormat = month + '-' + date + '-' + year;\n      break;\n    case 'mm/dd/yyyy':\n      dateFormat = month + '/' + date + '/' + year;\n      break;\n    case 'yyyy-mm-dd':\n      dateFormat = year + '-' + month + '-' + date;\n      break;\n    default:\n      dateFormat = year + '-' + month + '-' + date;\n      break;\n  }\n  return dateFormat;\n}\n\nexport function ConvertDateToTimeFormat(value): string {\n  const dt = new Date(value);\n  const h = dt.getHours().toString(10).padStart(2, '0');\n  const m = dt.getMinutes().toString(10).padStart(2, '0');\n  const s = dt.getSeconds().toString(10).padStart(2, '0');\n  return h + ':' + m + ':' + s;\n}\n\nexport function PopUid() {\n  return Math.random().toString(36).replace(/[^a-z]+/g, '').substr(0, 5);\n}\n\nexport function ConvertObjectToUri(obj: object | any[]) {\n  if (Array.isArray(obj)) {\n    obj = ToObject(obj);\n  }\n  return Object.entries(obj).map(([key, val]) => `${key}=${encodeURIComponent(val)}`).join('&');\n}\n\n\n/**\n * Group a list of objects inside of an array\n * @param arr\n * @param key\n * @constructor\n */\nexport function ArrayGroupBy(arr: Dictionary<any>[], key) {\n  if (IsArray(arr, true)) {\n    return arr.reduce(function (rv, x) {\n      (rv[x[key]] = rv[x[key]] || []).push(x);\n      return rv;\n    }, {});\n  } else {\n    return arr;\n  }\n\n}\n\n\n/**\n * Pick a random element from an array\n * @param arr\n * @constructor\n */\nexport function RandomArrayElement(arr: any[]) {\n  if (IsArrayThrowError(arr, true, `RandomArrayElement: Invalid Array`)) {\n    return arr[Math.floor(Math.random() * arr.length)];\n  }\n}\n\n/**\n * Helper method to remove duplicate items from a  flat array [1,2,3,1,1], [['a','b','c','a']\n * @param arr\n */\nexport function ArrayOnlyUnique(arr: any[]) {\n  if (IsArray(arr, true)) {\n    return arr.filter(function (elem, index, self) {\n      return index === self.indexOf(elem);\n    });\n  }\n  return arr;\n}\n\nexport function ArrayRemoveDupliates(array: object[], prop) {\n  return array.filter((obj, pos, arr) => {\n    return arr.map(mapObj => mapObj[prop]).indexOf(obj[prop]) === pos;\n  });\n}\n\n/**\n * Pass in a state verb to resolve to a color theme ... use case would be color of buttons, icons, and notifications\n * @param state\n */\nexport function GetVerbStateTheme(stateVerb: string | boolean | number): string {\n\n  const successVerbs = ['active', 'success', 'on', '1'];\n  const dangerVerbs = ['err', 'off', 'remove', '0', 'fail', 'archived'];\n  const warningVerbs = ['warn', 'pend', 'remove'];\n  const infoVerbs = ['new', 'info', 'add'];\n  let theme = null;\n  successVerbs.some((verb) => {\n    if (String(stateVerb).toLowerCase().search(verb) > -1) {\n      theme = 'success';\n      return true;\n    }\n  });\n  if (!theme) {\n    dangerVerbs.some(function (verb) {\n      if (String(stateVerb).toLowerCase().search(verb) > -1) {\n        theme = 'danger';\n        return true;\n      }\n    });\n  }\n  if (!theme) {\n    warningVerbs.some(function (verb) {\n      if (String(stateVerb).toLowerCase().search(verb) > -1) {\n        theme = 'warn';\n        return true;\n      }\n    });\n  }\n  if (!theme) {\n    infoVerbs.some(function (verb) {\n      if (String(stateVerb).toLowerCase().search(verb) > -1) {\n        theme = 'info';\n        return true;\n      }\n    });\n  }\n  if (!theme) theme = 'default';\n\n  return theme;\n}\n\n\n/**\n * Helper for getting a message string from an http error\n * @param err\n * @constructor\n */\nexport function GetHttpErrorMsg(err: any) {\n  let errorMessage = '';\n  let location = err;\n  if (IsObject(location, true)) {\n    if (IsObject(err.error, true)) {\n      location = err.error;\n      if (IsObject(location.errors, true)) {\n        Object.keys(location.errors).map((key) => {\n          if (IsArray(location.errors[key], true)) {\n            location.errors[key].map((errorMsg, index) => {\n              if (index) errorMessage += `<br/>`;\n              errorMessage += errorMsg + `<br/>`;\n            });\n          } else if (IsString(location.errors[key])) {\n            errorMessage += err.errors[key] + `<br/>`;\n          }\n          errorMessage += `<br/>`;\n        });\n      } else if (IsString(location.message, true)) {\n        errorMessage = location.message;\n      }\n    } else if (IsString(location.message, true)) {\n      errorMessage = err.message;\n    } else if (StorageGetter(location, ['data', 'message'])) {\n      errorMessage = location.data.message;\n    }\n  } else if (IsObject(location, ['message'])) {\n    errorMessage = location.message;\n  } else if (IsString(location, true)) {\n    errorMessage = String(location);\n  }\n  if (!errorMessage) {\n    if (IsObject(PopLog)) {\n      console.log(PopLog.message(`GetHttpErrorMsg: Fail`), PopLog.color('error'), {\n        data: location,\n      });\n    }\n    errorMessage = `Server Error: Code ${err.status + (err.statusText ? ' - ' + err.statusText : '') + '.'}`;\n  }\n\n  return errorMessage;\n}\n\n\n/**\n * Helper for getting an array from a response\n * @param err\n * @constructor\n */\nexport function GetHttpResult(res: any): any {\n  if (res) {\n    if (res.data) res = res.data;\n  } else {\n    console.log(`Undefined response: ${JSON.stringify(res)}`);\n  }\n  return res;\n}\n\n/**\n * Helper for getting an array from a response\n * @param err\n * @constructor\n */\nexport function GetHttpArrayResult(res: Response, requireLength = false): Entity[] {\n  let result = <any>res;\n  if (result && result.data) {\n    result = result.data;\n  }\n  return IsArrayThrowError(result, requireLength, `Api Result was not an array as expected`) ? result : null;\n}\n\n/**\n * Helper for getting an object from a response\n * @param err\n * @constructor\n */\nexport function GetHttpObjectResult(res: Response, requireKeys: boolean | string[] = false): Entity {\n  let result = <any>res;\n  if (result && result.data) {\n    result = result.data;\n  }\n  return IsObjectThrowError(result, requireKeys, `Api Result was not an object as expected`) ? result : null;\n}\n\n\n/**\n * Replace { var } in a string with the corresponding data value of an object\n * @param str\n * @param obj\n * @constructor\n */\nexport function InterpolateString(str: string, obj: Object) { // recursive\n  if (typeof (str) === 'string' && str.includes('{') && IsObject(obj, true)) {\n    const start = str.indexOf('{');\n    const end = str.indexOf('}', start) !== -1 ? str.indexOf('}', start) : str.length;\n    const fieldName = str.substring(start + 1, end);\n    const varName = fieldName.trim();\n    if (varName in obj) {\n      str = str.replace('{' + fieldName + '}', obj[varName]);\n      if (str && str.includes('{')) {\n        str = InterpolateString(str, obj);\n      }\n    }\n\n  }\n  return str;\n}\n\nexport function GetStringAbbrv(str: string): string {\n  let abbrv = '';\n  if (IsString(str, true)) {\n    const strArray = String(str).trim().split(' ');\n    let word;\n    while (strArray.length) {\n      word = strArray.shift();\n      abbrv += String(word).trim().charAt(0).toLocaleUpperCase();\n    }\n  }\n  return abbrv;\n}\n\n\nexport function PopTransform(value: string | number | boolean, transformation: string | object): any {\n\n  switch (String(transformation).toLowerCase()) {\n    case 'toRelationName':\n      if (IsObject(value)) {\n        const val = <any>value;\n        const location = val.label ? 'label' : 'name';\n        const name = <string>StorageGetter(value, [location]);\n        if (name) value = name;\n      }\n      break;\n    case 'totitlecase':\n    case 'title':\n      value = TitleCase(String(value));\n      break;\n    case 'tolowercase':\n    case 'lower':\n      value = String(value).toLowerCase();\n      break;\n    case 'label':\n      const label = new LabelPipe();\n      value = label.transform(value + '');\n      break;\n    case 'todigits':\n    case 'digits':\n      value = String(value).match(/\\d+/g).map(Number).join('');\n      break;\n    case 'tophonepipe':\n    case 'phone':\n      const phone = new PhonePipe();\n      value = phone.transform(value);\n      break;\n    case 'active':\n    case 'archived':\n    case 'toactiveararchived':\n      const active = new ToActiveOrArchivedPipe();\n      value = active.transform(value);\n      break;\n    case 'touppercase':\n    case 'upper':\n      value = String(value).toUpperCase();\n      break;\n    case 'convertemptytonull':\n      if (!String(value).length) value = null;\n      break;\n    case 'convertemptyzero':\n      if (!String(value).length) value = 0;\n      break;\n    case 'tocurrency':\n    case 'currency':\n    case 'dollar':\n      if (IsNumber(value)) {\n        value = new Intl.NumberFormat('en-US', {\n          style: 'currency',\n          currency: 'USD',\n          minimumFractionDigits: 2\n        }).format(Number(value));\n      }\n      break;\n    case 'amount':\n      value = IsNumber(value) ? parseFloat(String(value)).toFixed(2) : '0.00';\n      break;\n    default:\n      break;\n  }\n\n  return value;\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { IsString } from '../pop-common-utility';\n\n\n@Pipe( {\n  name: 'truncate'\n} )\n\nexport class TruncatePipe implements PipeTransform {\n\n  transform( value: string, args: string | number[] ): string{\n\n    if( IsString( value, true ) ){\n      const limit = args.length > 0 ? parseInt( args[ 0 ] + '', 10 ) : 20;\n      const trail = args.length > 1 ? args[ 1 ] : '...';\n      return String( value ).length > limit ? String(value).substring( 0, limit ) + trail : value;\n    }\n    return value;\n  }\n}\n","import { Dictionary, EntityParamsInterface, KeyMap } from './pop-common.model';\nimport { GetSessionSiteVar, GetSiteVar, IsObject } from './pop-common-utility';\nimport { EntityMenu } from './modules/app/pop-left-menu/entity-menu.model';\n\n\nexport interface AuthDetails {\n  created?: number;\n  max_ttl?: number;\n  id: number;\n  first_name: string;\n  last_name: string;\n  name: string;\n  initials: string;\n  email: string;\n  email_verified_at?: string| boolean | number;\n  avatarLink?: string;\n  business_fk?: number;\n  last_login_at?: string;\n  legacy_user_id?: number;\n  username?: string;\n  token?: string;\n  x_popcx_token?: string;\n  created_at?: number;\n  users?: KeyMap<BusinessUser>;\n  businesses?: KeyMap<Business>;\n}\n\n\nexport interface BusinessUser {\n  id: number;\n  first_name: string;\n  last_name: string;\n  email: string;\n  phone: string;\n  business?: Business;\n  setting?: Dictionary<any>;\n  business_id: number;\n  permissions?: Dictionary<any>;\n}\n\n\nexport interface Business {\n  id: number;\n  name: string;\n  short_name: string;\n  theme: string;\n  date_format: string;\n  hour_format: '12' | '24';\n  homepage?: string;\n  logo_small_url?: string;\n  logo_main_url?: string;\n  timezone_value_id?: number;\n  aliases?: any[];\n  timezone?: string;\n  apps?: App[];\n}\n\n\nexport interface App {\n  id: number;\n  name: string;\n  label?: string;\n  sort?: number;\n  active?: boolean;\n  path?: string;\n  href?: string;\n  menu?: Dictionary<EntityMenu>;\n\n  entities?: EntityParamsInterface[];\n}\n\n\nexport interface AppMenu {\n  id?: number;\n  name: string;\n  path: string;\n  description: string;\n  short_description: string;\n  sort: number;\n  icon: string;\n  entityId?: number;\n  hasAlias?: boolean;\n  originalPath?: string;\n  originalName?: string;\n}\n\n\nexport interface AuthUser {\n  id?: number;\n  name?: string;\n  first_name?: string;\n  last_name?: string;\n  initials?: string;\n  email?: string;\n  email_verified_at?: string | number | boolean;\n  avatarLink?: string;\n  username?: string;\n  business_fk?: number;\n}\n\n\nexport function GetAuthStorage(): { token: string, popcxToken: string, time: number, auth: AuthDetails, businessId: number }{\n  return {\n    token: GetSiteVar('Auth.token', ''),\n    popcxToken: GetSiteVar('Auth.popcx-token', ''),\n    time: parseInt(GetSiteVar('Auth.time', 0), 10),\n    auth: <AuthDetails>GetSiteVar('Auth.details', {}),\n    businessId: parseInt(GetSessionSiteVar('Business.current', 0), 10)\n  };\n}\n","import {\n  CoreConfig,\n  Dictionary,\n  DynamicComponentInterface,\n  EntityAccessInterface,\n  EventCallback,\n  PopBaseEventInterface,\n  ServiceInjector\n} from './pop-common.model';\nimport {Subscription} from 'rxjs';\nimport {PopContextMenuConfig} from './modules/base/pop-context-menu/pop-context-menu.model';\nimport {ComponentRef, ElementRef, EventEmitter, ViewContainerRef} from '@angular/core';\nimport {PopLogService} from './services/pop-log.service';\nimport {HttpErrorResponse} from '@angular/common/http';\n\n\nexport interface ServiceDomInterface {\n  subscriber?: Dictionary<Subscription>;\n  delay?: Dictionary<any>;\n  interval?: Dictionary<any>;\n  handler?: {\n    core?: EventCallback,\n    bubble?: EventCallback,\n    [key: string]: EventCallback\n  };\n  session?: Dictionary<any>;\n  state: DomStateInterface;\n  setSubscriber?: (subscriptionKey: string, subscription: Subscription) => void;\n  setTimeout?: (timeoutKey: string, callback, delay?: number) => void;\n}\n\n\nexport function GetServiceDom(): ServiceDomInterface {\n  return <ServiceDomInterface>{\n    subscriber: {},\n    delay: {},\n    interval: {},\n    handler: {},\n    session: {},\n    state: {},\n  };\n}\n\nexport function DestroyServiceDom(dom: ServiceDomInterface): void {\n  if (typeof (dom.interval) === 'object') {\n    Object.keys(dom.interval).map((name) => {\n      if (dom.interval[name]) {\n        clearInterval(dom.interval[name]);\n      }\n      if (dom.interval[name]) {\n        clearInterval(dom.interval[name]);\n      }\n    });\n  }\n\n  if (typeof (dom.delay) === 'object') {\n    Object.keys(dom.delay).map((name) => {\n      if (dom.delay[name]) {\n        clearTimeout(dom.delay[name]);\n      }\n      if (dom.delay[name]) {\n        clearTimeout(dom.delay[name]);\n      }\n    });\n  }\n  if (typeof (dom.subscriber) === 'object') {\n    Object.keys(dom.subscriber).map((name) => {\n      if (dom.subscriber[name] && typeof dom.subscriber[name].unsubscribe === 'function') {\n        dom.subscriber[name].unsubscribe();\n      }\n    });\n  }\n}\n\n\nexport interface DomStateInterface {\n  authenticated?: boolean;\n  archived?: boolean;\n  closed?: boolean;\n  loaded?: boolean;\n  loader?: boolean;\n  loading?: boolean;\n  isDevMode?: boolean;\n  open?: boolean;\n  refreshing?: boolean;\n  pending?: boolean;\n  success?: boolean;\n  validated?: boolean;\n  showArchived?: boolean;\n  hidden?: boolean;\n  template?: number | boolean | string;\n  visibility?: boolean;\n\n  [key: string]: any;\n}\n\n\nexport type Constructor<T> = new(...args: any[]) => T;\n\n\nexport interface ServiceContainerInterface {\n  [key: string]: Dictionary<any>;\n}\n\n\nexport function GetServiceAssetContainer(): ServiceAssetContainerInterface {\n  return {\n    map: {}\n  };\n}\n\n\nexport interface ServiceUiContainerInterface {\n  state: DomStateInterface;\n  active: Dictionary<any>;\n  session: Dictionary<any>;\n  asset: {\n    map: Dictionary<any>\n    [key: string]: any;\n  };\n}\n\n\nexport function GetServiceUiContainer(): ServiceUiContainerInterface {\n  return {\n    state: {loaded: false, loading: true, refreshing: false},\n    active: {},\n    session: {},\n    asset: {\n      map: <Dictionary<any>>{},\n    }\n  };\n}\n\n\n/************************************************************************************************\n *                                                                                              *\n *                                          Service                                             *\n *                                      ( Handles Services )                                    *\n *                                                                                              *\n ************************************************************************************************/\n\n\nexport function GetServiceContainer(): ServiceContainerInterface {\n  return <ServiceContainerInterface>{};\n}\n\n\nexport interface ServiceAssetContainerInterface {\n  map?: Dictionary<any>;\n\n  [key: string]: any;\n}\n\n\n/************************************************************************************************\n *                                                                                              *\n *                                          Base                                                *\n *                                          (  )                                                *\n *                                                                                              *\n ************************************************************************************************/\n\nexport interface HasName {\n  name: string;\n}\n\n\nexport interface HasDom {\n  dom: ComponentDomInterface;\n}\n\n\nexport interface HasPosition {\n  position: number;\n}\n\n\nexport interface HasCore {\n  core: CoreConfig;\n}\n\n\nexport interface HasTemplate {\n  template: ComponentTemplateInterface;\n}\n\n\nexport interface HasEvents {\n  events: EventEmitter<PopBaseEventInterface>;\n}\n\n\nexport interface HasTrait {\n  trait: ComponentTraitContainerInterface;\n}\n\n\nexport interface SetControl {\n  setControl: () => void;\n}\n\n\n/************************************************************************************************\n *                                                                                              *\n *                                          UI                                                  *\n *                                         (  )                                                 *\n *                                                                                              *\n ************************************************************************************************/\n\n\nexport interface ComponentUiContainerInterface {\n  error?: { code?: number, message: string };\n  overhead: number;\n  height: {\n    content?: number\n    default: number\n    inner: number,\n    min?: number,\n    max?: number,\n    outer: number,\n    parent?: number\n    split?: number\n  };\n\n  width: {\n    outer?: number,\n    inner?: number,\n    min?: number,\n    max?: number,\n    parent?: number\n  };\n  state: DomStateInterface;\n  active: Dictionary<any>;\n  session: Dictionary<any>;\n  resource: {\n    map: Dictionary<any>\n    [key: string]: any;\n  };\n  asset: {\n    map?: Dictionary<any>\n    [key: string]: any;\n  };\n\n  contextMenu: {\n    config: PopContextMenuConfig;\n    configure: CallableFunction;\n  };\n\n}\n\n\nexport function GetComponentUiContainer(): ComponentUiContainerInterface {\n  return {\n    error: {\n      code: 0,\n      message: ''\n    },\n    overhead: 0,\n    height: {\n      outer: null,\n      inner: null,\n      default: 0\n    },\n    width: {},\n    state: <DomStateInterface>{},\n    resource: {\n      map: <Dictionary<any>>{},\n    },\n    active: {\n      map: <Dictionary<any>>{},\n    },\n    session: <Dictionary<any>>{},\n    asset: {\n      map: <Dictionary<any>>{},\n    },\n    contextMenu: {\n      config: <PopContextMenuConfig>undefined,\n      configure: undefined,\n    }\n  };\n}\n\nexport function AbstractUiMixin<T extends Constructor<{}>>(Base: T = (class {\n} as any)): any {\n  return class extends Base {\n    ui: ComponentUiContainerInterface = GetComponentUiContainer();\n  };\n}\n\n\n/************************************************************************************************\n *                                                                                              *\n *                                          Trait                                               *\n *                                           (  )                                               *\n *                                                                                              *\n ************************************************************************************************/\n\nexport interface ComponentTraitContainerInterface {\n  bubble: boolean;\n\n  [key: string]: boolean;\n}\n\n\nexport function GetComponentTraitContainer(): ComponentTraitContainerInterface {\n  return {\n    bubble: false\n  };\n}\n\n\n/************************************************************************************************\n *                                                                                              *\n *                                           Asset                                              *\n *                                           (  )                                               *\n *                                                                                              *\n ************************************************************************************************/\n\nexport interface ComponentAssetContainerInterface {\n  map?: Dictionary<any>;\n\n  [key: string]: any;\n}\n\n\nexport function GetComponentAssetContainer(): ComponentAssetContainerInterface {\n  return {\n    map: {}\n  };\n}\n\n\n/************************************************************************************************\n *                                                                                              *\n *                                          Dom                                                 *\n *                    ( Handles Subscriptions, Timeouts, Intervals, etc )                       *\n *                                                                                              *\n ************************************************************************************************/\n\n\nexport interface ComponentDomInterface {\n  active: Dictionary<any>;\n  access: EntityAccessInterface;\n\n  contextMenu: {\n    config: PopContextMenuConfig;\n    configure: CallableFunction;\n  };\n\n\n  delay: Dictionary<any>;\n\n  error?: { code?: number, message: string };\n\n  interval: Dictionary<any>;\n\n  handler: {\n    core?: EventCallback,\n    bubble?: EventCallback,\n    [key: string]: EventCallback\n  };\n\n  height: {\n    content?: number\n    default: number\n    inner: number,\n    min?: number,\n    max?: number,\n    outer: number,\n    parent?: number\n    split?: number\n  };\n\n  overhead: number;\n\n  width: {\n    outer?: number,\n    inner?: number,\n    min?: number,\n    max?: number,\n    parent?: number\n  };\n  state: DomStateInterface;\n\n  session: Dictionary<any>;\n\n  subscriber: Dictionary<Subscription>;\n\n\n  repo: any;\n  injectRepo: () => void;\n  loading: () => void;\n  refreshing: () => void;\n  _extend: () => Promise<boolean>;\n  configure: () => Promise<boolean>;\n  register: () => Promise<boolean>;\n  proceed: () => Promise<boolean>;\n  ready: () => void;\n  find: (assetType: 'component' | 'field' | 'el', id: number | string) => any;\n  focus: (querySelector: string, delay: number) => void;\n  focusNextInput: (el: ElementRef) => void;\n  setError: (err: HttpErrorResponse, modal: boolean) => void;\n  setHeight: (parentHeight: number, overhead: number) => void;\n  setHeightWithParent: (parentClassName: string, overhead?: number, defaultHeight?: number) => Promise<boolean>;\n  setWithComponentInnerHeight: (component: string, componentId, overhead: number, defaultHeight: number) => Promise<number>;\n  unload: () => Promise<boolean>;\n  waitForParent: (el, className?: string, time?: number, counter?: number) => Promise<Element>;\n  waitForParentHeight: (el: Element, time?: number, counter?: number) => Promise<number>;\n  findParentElement: (el, className) => ElementRef;\n  store: (key?: string) => void;\n  setSubscriber: (subscriptionKey: string, subscription: Subscription) => void;\n  setTimeout: (timeoutKey: string, callback, delay?: number) => void;\n  destroy: () => void;\n\n}\n\n\nexport function GetComponentDomContainer(): ComponentDomInterface {\n  const dom = <ComponentDomInterface>{\n    /**\n     * Service will preserve session, state, etc and allow all components on the core to communicate and share assets`\n     */\n\n    active: <Dictionary<any>>{},\n\n    error: {\n      code: 0,\n      message: ''\n    },\n\n\n    overhead: 0,\n    height: {\n      outer: null,\n      inner: null,\n      default: 0\n    },\n    width: {},\n    state: <DomStateInterface>{},\n\n\n    session: <Dictionary<any>>{},\n\n    contextMenu: {\n      config: <PopContextMenuConfig>undefined,\n      configure: undefined,\n    },\n\n    repo: undefined,\n\n    /**\n     * Store all subscribers here\n     */\n    subscriber: {},\n\n    /**\n     * Store all time intervals here\n     */\n    interval: {},\n\n    /**\n     * Store all timeouts here\n     */\n    delay: {},\n\n    handler: {},\n\n  };\n  return dom;\n}\n\n\nexport function AbstractDomMixin<T extends Constructor<{}>>(Base: T = (class {\n} as any)) {\n  return class extends Base {\n    dom: ComponentDomInterface = GetComponentDomContainer();\n  };\n}\n\n\nexport function DestroyComponentDom(dom: ComponentDomInterface): void {\n\n  if (typeof (dom.interval) === 'object') {\n    Object.keys(dom.interval).map((name) => {\n      if (dom.interval[name]) {\n        clearInterval(dom.interval[name]);\n      }\n      if (dom.interval[name]) {\n        clearInterval(dom.interval[name]);\n      }\n    });\n  }\n\n  if (typeof (dom.delay) === 'object') {\n    Object.keys(dom.delay).map((name) => {\n      if (dom.delay[name]) {\n        clearTimeout(dom.delay[name]);\n      }\n      if (dom.delay[name]) {\n        clearTimeout(dom.delay[name]);\n      }\n    });\n  }\n  if (typeof (dom.subscriber) === 'object') {\n    Object.keys(dom.subscriber).map((name) => {\n      if (dom.subscriber[name] && typeof dom.subscriber[name].unsubscribe === 'function') {\n        dom.subscriber[name].unsubscribe();\n      }\n    });\n  }\n}\n\n\n/************************************************************************************************\n *                                                                                              *\n *                                          Log                                                 *\n *                                  ( Handles Logging )                                         *\n *                                                                                              *\n ************************************************************************************************/\n\nexport interface ComponentLogInterface {\n  repo: {\n    message: (message?: string) => string;\n    color: (type?: string) => string;\n    enabled: (type?: string, component?: string) => boolean;\n    init: (componentName: string, message: string, data?: any, force?: boolean) => void;\n    debug: (componentName: string, message: string, data?: any, force?: boolean) => void;\n    cache: (componentName: string, message: string, set?: boolean, force?: boolean) => void;\n    warn: (componentName: string, message: string, data?: any, force?: boolean) => void;\n    info: (componentName: string, message: string, data?: any, force?: boolean) => void;\n    theme: (componentName: string, message: string, data?: any, force?: boolean) => void;\n    event: (componentName: string, message: string, event?: PopBaseEventInterface, force?: boolean) => void;\n    error: (componentName: string, message: string, data?: any, force?: boolean) => void;\n  };\n  init: () => void;\n  debug: (msg: string, data?: any) => void;\n  error: (msg: string, error?: any) => void;\n  warn: (msg: string, data?: any) => void;\n  info: (msg: string, data?: any) => void;\n  event: (msg: string, event: PopBaseEventInterface) => void;\n  config: (msg: string, config?: any) => void;\n  destroy: () => void;\n}\n\n\n/************************************************************************************************\n *                                                                                              *\n *                                          Template                                            *\n *                            ( Handles rendering Dynamic content )                             *\n *                                                                                              *\n ************************************************************************************************/\n\n\nexport interface ComponentTemplateInterface {\n  container: ViewContainerRef;\n  refs: ComponentRef<any>[];\n  ref_events: Subscription[];\n  attach: (container: string | ViewContainerRef) => void;\n  render: (list: DynamicComponentInterface[], transfer?: string[], bypassTransfer?: boolean) => void;\n  transfer: Dictionary<any>;\n  clear: () => void;\n  destroy: () => void;\n}\n\n\nexport function GetComponentTemplateContainer(): ComponentTemplateInterface {\n  const template = <ComponentTemplateInterface>{\n    container: undefined,\n    refs: [],\n    ref_events: []\n  };\n\n  return template;\n}\n\nexport function AbstractTemplateMixin<T extends Constructor<{}>>(Base: T = (class {\n} as any)): any {\n  return class extends Base implements HasTemplate {\n    template: ComponentTemplateInterface = GetComponentTemplateContainer();\n  };\n}\n\n\nexport function DestroyComponentTemplate(template: ComponentTemplateInterface) {\n  if (typeof template === 'object') {\n    template.ref_events.map((subscription: Subscription) => {\n      if (subscription && typeof subscription.unsubscribe === 'function') {\n        subscription.unsubscribe();\n      }\n    });\n\n    template.refs = template.refs.map(function (componentRef: ComponentRef<any>) {\n      if (componentRef && typeof componentRef.destroy === 'function') {\n        componentRef.destroy();\n      }\n      componentRef = null;\n      return null;\n    });\n\n    if (template.container) template.container.clear();\n\n    template = null;\n  }\n}\n\n\n\n\n","import { Injectable, OnDestroy } from '@angular/core';\n\nimport {\n  DestroyServiceDom,\n  GetServiceUiContainer,\n  GetServiceDom,\n  GetServiceAssetContainer,\n  ServiceUiContainerInterface,\n  ServiceAssetContainerInterface,\n} from '../pop-common-dom.models';\nimport { Subscription } from 'rxjs';\nimport { PopUid } from '../pop-common-utility';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PopExtendService implements OnDestroy {\n  protected dom = GetServiceDom();\n  protected id: number | string = PopUid();\n  protected name;\n  protected asset;\n\n\n  // public ui = <ServiceUiContainerInterface>GetServiceUiContainer();\n\n\n  constructor(){\n    if( !this.asset ) this.asset = <ServiceAssetContainerInterface>GetServiceAssetContainer();\n    this.dom = {\n      ...this.dom, ...{\n        setSubscriber: (subscriptionKey: string, subscription: Subscription = null) => {\n          if( subscriptionKey && this.dom.subscriber && subscriptionKey in this.dom.subscriber && this.dom.subscriber[ subscriptionKey ] && typeof this.dom.subscriber[ subscriptionKey ].unsubscribe === 'function' ){\n            this.dom.subscriber[ subscriptionKey ].unsubscribe();\n          }\n          if( subscription ){\n            this.dom.subscriber[ subscriptionKey ] = subscription;\n          }\n        },\n\n        setTimeout: (timeoutKey: string, callback = null, delay = 250) => {\n          if( timeoutKey && this.dom.delay && timeoutKey in this.dom.delay && this.dom.delay[ timeoutKey ] ){\n            clearTimeout(this.dom.delay[ timeoutKey ]);\n          }\n          if( typeof callback === 'function' ){\n            this.dom.delay[ timeoutKey ] = setTimeout(callback, delay);\n          }\n        },\n      }\n    };\n  }\n\n\n  ngOnDestroy(){\n    DestroyServiceDom(this.dom);\n  }\n}\n","import {Injectable, isDevMode, OnDestroy} from '@angular/core';\nimport {KeyMap, PopBusiness, PopHref, SetPopAuth} from '../pop-common.model';\nimport {GetSiteVar, IsObject, IsString, SetSessionSiteVar, SetSiteVar, StorageGetter} from '../pop-common-utility';\nimport {AuthUser, Business, BusinessUser, GetAuthStorage, AuthDetails, App} from '../pop-common-token.model';\nimport {PopExtendService} from './pop-extend.service';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PopBaseService extends PopExtendService implements OnDestroy {\n  public name = 'PopBaseService';\n\n  protected asset = {\n    sessionRoot: 'SiteVars',\n    businessId: 0,\n    authTime: <number>undefined,\n  };\n\n  private auth: AuthDetails;\n\n\n  constructor() {\n    super();\n    const authStorage = GetAuthStorage();\n    this.auth = authStorage.auth;\n    this.asset.businessId = authStorage.businessId;\n    this.asset.authTime = authStorage.time;\n\n\n    if (!this.asset.businessId) {\n      const lastBusinessId = parseInt(GetSiteVar('Business.last') || '0', 10);\n      if (lastBusinessId) {\n        this.setCurrentBusinessId(lastBusinessId);\n      }\n    }\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Local Storage                                           *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  /**\n   * Clear localStorage data\n   */\n  public clearLocalStorage(): void {\n    localStorage.clear();\n    this.auth = null;\n    this.asset.authTime = 0;\n    this.asset.businessId = 0;\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Auth Details                                            *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  /**\n   * Remove any user auth relics\n   */\n  public clearAuthDetails(caller: string): void {\n    SetSessionSiteVar('Login.time', 0);\n    this.clearLocalStorage();\n    sessionStorage.clear();\n  }\n\n\n  /**\n   * Clear the time when an auth was last completed\n   */\n  public clearAuthTime(): void {\n    this.asset.authTime = 0;\n    SetSiteVar('Auth.time', 0);\n    // localStorage.setItem('Auth-Time', '0');\n  }\n\n\n  /**\n   * Return the entire Auth Object\n   */\n  public getAuthDetails(): AuthDetails {\n    if (!IsObject(this.auth, true)) {\n      const authStorage = GetAuthStorage();\n      this.auth = authStorage.auth;\n    }\n    return this.auth;\n  }\n\n\n  /**\n   * Extract the prime user/ root out of the auth details\n   */\n  public getAuthPrimeUser(): AuthUser {\n    if (IsObject(this.auth, ['id', 'email'])) {\n      return {\n        id: this.auth.id,\n        name: this.auth.name,\n        first_name: this.auth.first_name,\n        last_name: this.auth.last_name,\n        initials: this.auth.initials,\n        avatarLink: StorageGetter(this.auth, ['profile', 'avatar_link'], null),\n        email: this.auth.email,\n        business_fk: this.auth.business_fk,\n      };\n    }\n    return null;\n  }\n\n\n  /**\n   * Return the time when the last authentication took place\n   */\n  public getAuthTime(): number {\n    return this.asset.authTime;\n  }\n\n\n  /**\n   * Bearer token helper\n   * The api will expect an auth token for any authenticated routes\n   */\n  public getBearerToken(): string {\n    if (IsObject(this.auth, ['token'])) {\n      return 'Bearer ' + (this.auth.token ? this.auth.token : '123');\n    } else {\n      return '';\n    }\n  }\n\n\n  /**\n   * Get all the Business Users that belong to the auth user\n   */\n  public getAuthUsers(): KeyMap<BusinessUser> {\n    return JSON.parse(JSON.stringify(this.auth.users));\n  }\n\n\n  /**\n   * Get the current business id that is in user\n   */\n  public getCurrentBusinessId(): number {\n    return this.asset.businessId;\n  }\n\n\n  /**\n   * Return the business details for the current business\n   */\n  public getCurrentBusinessUserId(): number {\n    const businessId = this.getCurrentBusinessId();\n    if (IsObject(this.auth.users, true) && businessId in this.auth.users) {\n      return this.auth.users[businessId].id;\n    }\n    return 0;\n  }\n\n\n  /**\n   * Determine if the last auth has expired\n   */\n  public isAuthExpired(): boolean {\n    let expired = false;\n\n    if (!(IsObject(this.auth, ['token']))) {\n      return true;\n    }\n\n    const currentTime = Math.round(new Date().getTime() / 1000);\n    if (!this.asset.authTime || typeof this.auth.created_at == 'undefined' || !this.getBearerToken()) {\n      expired = true;\n    } else if (currentTime > ((+this.auth.created_at) + (this.auth.max_ttl * 60))) { // Check if token is passed max_ttl\n      expired = true;\n      return true;\n    } else if (currentTime > (this.asset.authTime + (this.auth.max_ttl * 60))) {// Check if token has timed out.\n      expired = true;\n    }\n    return expired;\n  }\n\n\n  /**\n   * Stores a timestamp to track when the last authentication took place\n   */\n  public setAuthTime(): void {\n    // This gets set when there is a new token. It will calculate this and the tokendetails TTL / timeout to decide if the token\n    // is expired without having to make an ajax call to know.\n    this.asset.authTime = Math.round(new Date().getTime() / 1000);\n    // localStorage.setItem('Auth-Time', this.asset.authTime.toString());\n    SetSiteVar('Auth.time', this.asset.authTime.toString());\n  }\n\n\n  /**\n   * Exposes the Auth Token at the root level of localStorage for convenience\n   * @param token\n   */\n  public setAuthToken(authToken: string): void {\n    // localStorage.setItem('Auth-Token', authToken);\n    SetSiteVar('Auth.token', authToken);\n  }\n\n\n  /**\n   * Store the auth object that the auth/user login route return to the app\n   * @param authDetails\n   */\n  public setAuthDetails(auth: AuthDetails): void {\n    if (IsObject(auth, ['id', 'token'])) {\n      const existingAuthDetailsDetails = this.auth;\n      if (existingAuthDetailsDetails && +existingAuthDetailsDetails.id && +existingAuthDetailsDetails.id !== +auth.id) {\n        // this.clearAuthDetails('setAuthDetails');\n      }\n      this.auth = auth;\n      this.setAuthToken(this.auth.token);\n      this.setAuthPopcxToken(this.auth.x_popcx_token);\n      this.setAuthTime();\n      SetPopAuth({\n        id: auth.id,\n        name: auth.name,\n        first_name: auth.first_name,\n        last_name: auth.last_name,\n        initials: auth.initials,\n        email: auth.email,\n        email_verified_at: auth.email_verified_at,\n        avatarLink: StorageGetter(this.auth, ['profile', 'avatar_link'], null),\n        username: auth.username,\n        created_at: auth.created_at\n      });\n      SetSiteVar('Auth.details', auth);\n    }\n  }\n\n\n  /**\n   * Exposes the Auth User at the root level of localStorage for convenience\n   * @param token\n   */\n  public setAuthUser(primeUser): void {\n    if (IsObject(primeUser, true)) {\n      SetSiteVar('Auth.User', primeUser);\n    }\n  }\n\n\n  /**\n   * Exposes the Auth Popcx Token at the root level of localStorage for convenience\n   * @param token\n   */\n  public setAuthPopcxToken(token: string): void {\n    // localStorage.setItem('Auth-Popcx-Token', token);\n    SetSiteVar('Auth.popcx-token', token);\n  }\n\n\n  /**\n   * Track the current business that has been selected\n   * @param id\n   */\n  public setCurrentBusinessId(id: number): void {\n    this.asset.businessId = id;\n    SetSessionSiteVar('Business.current', id);\n    SetSiteVar('Business.last', id);\n  }\n\n\n  /**\n   * Get all the Businesses that the auth user has access to\n   */\n  public getAuthBusinesses(): KeyMap<Business> {\n    return IsObject(this.auth, ['token']) && IsObject(this.auth.businesses) ? JSON.parse(JSON.stringify(this.auth.businesses)) : null;\n  }\n\n\n  /**\n   * Switch to a different business\n   * @param id\n   */\n  public switchBusiness(id) {\n    this.setCurrentBusinessId(id);\n    this.redirect();\n  }\n\n\n  /**\n   * Change to a different app with the current business\n   * @param appPath\n   */\n  public switchApps(appPath: string): void {\n    window.location.href = window.location.origin + appPath;\n  }\n\n  /**\n   * Change to a different app with the current business\n   * @param appPath\n   */\n  public checkAppAccess(appName: string, redirect: boolean = false): boolean {\n    if (IsObject(PopBusiness, ['id', 'apps']) && IsObject(PopBusiness.apps, true)) {\n      if (IsString(appName, true) && appName in PopBusiness.apps) {\n        return true;\n      }\n    }\n    if (redirect && !isDevMode()) {\n      if(IsString(PopHref) && PopHref !== 'home' ) window.location.href = window.location.protocol + '//' + window.location.host + '/home';\n    }\n    return false;\n  }\n\n\n  /**\n   * Determine the route after a user has authenticated\n   */\n  public redirect(): void {\n    const auth = this.getAuthDetails();\n    let url = '';\n\n    // First check if the redirect url was set. This is for if you want to over-ride and take priority over other redirects.\n    url = GetSiteVar('App.redirect');\n    if (url) SetSiteVar('App.redirect', '');\n\n    // Check if the site was redirected due to a 401.\n    if (!url) {\n      url = GetSiteVar('App.redirectAfterLogin');\n      if (url) SetSiteVar('App.redirectAfterLogin', '');\n    }\n\n    if (!auth.email_verified_at) {\n      url = window.location.origin + '/user/confirm-email-resend';\n    }\n\n    // Check if there is a current business unit for this onSession and a corresponding default page.\n    if (!url) {\n      // const currentBuId = this.asset.businessId;\n      // If their current B.U. is no longer available then make sure the settings are zero'd out.\n      if (this.asset.businessId && IsObject(auth.businesses, true) && typeof auth.businesses[this.asset.businessId] === 'undefined') {\n        this.setCurrentBusinessId(0);\n      } else if (this.asset.businessId && IsObject(auth.businesses, true) && typeof auth.businesses[this.asset.businessId] !== 'undefined') {\n        if (auth.businesses[this.asset.businessId].homepage) {\n          const business = auth.businesses[this.asset.businessId];\n          url = window.location.origin + business.homepage;\n        } else {\n          if (isDevMode()) {\n            url = window.location.origin + '/';\n          } else {\n            url = window.location.origin + '/home';\n          }\n\n        }\n      }\n    }\n\n    // Check if there is a home page set for the default business unit.\n    if (!url) {\n      if (IsObject(auth.businesses, true)) {\n        if (auth.business_fk && typeof auth.businesses[auth.business_fk] !== 'undefined') {\n          if (auth.businesses[auth.business_fk].homepage) {\n            url = window.location.origin + auth.businesses[auth.business_fk].homepage;\n          } else {\n            if (isDevMode()) {\n              url = window.location.origin + '/' + (IsString(PopHref, true) ? PopHref : '');\n            } else {\n              url = window.location.origin + '/home';\n            }\n\n          }\n        }\n      }\n    }\n\n\n    if (url) {\n      window.location.href = url;\n    } else {\n      // If still no url then redirect to the users profile page.\n      if (isDevMode()) {\n        window.location.href = window.location.origin + '/';\n      } else {\n        window.location.href = window.location.origin + '/home';\n      }\n    }\n  }\n\n\n  ngOnDestroy() {\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n}\n\n","import { Injectable } from '@angular/core';\nimport { PopBaseService } from '../../../services/pop-base.service';\nimport { ServiceInjector } from '../../../pop-common.model';\n\n\n@Injectable()\nexport class PopMenuService {\n  protected srv: {\n    base: PopBaseService,\n  } = {\n    base: ServiceInjector.get(PopBaseService),\n  };\n\n  isAuthenticated(){\n    return !this.srv.base.isAuthExpired();\n  }\n\n\n  changeBusiness(id: number){\n    this.srv.base.switchBusiness(id);\n  }\n}\n","import {Inject, Injectable, isDevMode} from '@angular/core';\nimport {catchError, map} from 'rxjs/operators';\n\nimport {PopBaseService} from './pop-base.service';\nimport {AuthDetails, Business, BusinessUser} from '../pop-common-token.model';\nimport {forkJoin, of} from 'rxjs';\nimport {\n  ArrayKeyBy,\n  GetHttpErrorMsg, GetHttpResult,\n  GetStringAbbrv,\n  IsArray,\n  IsDefined,\n  IsObject,\n  IsString,\n  IsUndefined, SetSessionSiteVar,\n  SetSiteVar\n} from '../pop-common-utility';\nimport {HttpBackend, HttpClient, HttpHeaders, HttpParams} from '@angular/common/http';\nimport {AppGlobalInterface, PopRequest, PopUser, SetPopAuth, SetPopBusiness} from '../pop-common.model';\n\n\n@Injectable() @Injectable({\n  providedIn: 'root'\n})\nexport class PopCredentialService {\n  public name = 'PopCredentialService';\n  private http: HttpClient;\n\n\n  private readonly baseUrl;\n\n\n  constructor(\n    private base: PopBaseService,\n    private backend: HttpBackend,\n    @Inject('APP_GLOBAL') private APP_GLOBAL: AppGlobalInterface,\n    @Inject('env') public env?,\n  ) {\n    if (!this.baseUrl) {\n      const envUrl = isDevMode() && this.env && this.env.apiBaseUrl ? this.env.apiBaseUrl : null;\n      this.baseUrl = (envUrl ? envUrl : `${window.location.protocol}//api.${window.location.host}`);\n    }\n    this.http = new HttpClient(this.backend); // bypass the default interceptors\n  }\n\n\n  /**\n   * Main login function hit after they click the Login button.\n   *\n   * @param credentials\n   * @returns {Observable<void>}\n   */\n  authenticate(credentials): Promise<AuthDetails | string> {\n    return new Promise<AuthDetails | string>(resolve => {\n      this.base.clearAuthDetails(`${this.name}:authenticate`);\n      this.http.post(`${this.baseUrl}/auth/login`, credentials).pipe(\n        map((auth: any) => {\n          auth = auth.data ? auth.data : auth;\n          auth = this._transformAuthResponse(auth);\n          // this.base.setAuthDetails( auth );\n          SetSiteVar('Legacy.remember_me', credentials.remember_me);\n          SetSiteVar('Legacy.remembered_username', (credentials.remember_me ? credentials.username : null));\n          return auth;\n        })\n      ).subscribe(async (auth) => {\n          auth = await this._attachBusinesses(auth);\n          this.base.setAuthDetails(auth);\n          SetSessionSiteVar('Login.time', new Date().getTime());\n          return resolve(auth);\n        },\n        (err) => {\n          return resolve(GetHttpErrorMsg(err));\n        });\n    });\n  }\n\n\n  /**\n   * Reset login function hit after password reset\n   *\n   * @param credentials\n   * @returns {Observable<void>}\n   */\n\n  reset(credentials, businessId: number = 0): Promise<AuthDetails | string> {\n    return new Promise<AuthDetails | string>((resolve, reject) => {\n      this.base.clearLocalStorage();\n      this.http.post(`${this.baseUrl}/auth/password/reset`, credentials).pipe(\n        map((auth: any) => {\n          auth = auth.data ? auth.data : auth;\n          auth = this._transformAuthResponse(auth);\n          this.base.setAuthDetails(auth);\n          return auth;\n        })\n      ).subscribe(async (auth) => {\n          if (IsObject(auth), ['token', 'id']) {\n            auth = auth.data ? <AuthDetails>auth.data : <AuthDetails>auth;\n            auth = await this._attachBusinesses(auth, businessId);\n            this.base.setAuthDetails(auth);\n            return resolve(auth);\n          } else {\n            return reject(auth);\n          }\n\n        },\n        err => {\n          return resolve(GetHttpErrorMsg(err));\n        });\n    });\n  }\n\n\n  update(auth: AuthDetails, businessId: number = 0): Promise<AuthDetails | string> {\n    return new Promise<AuthDetails | string>(async (resolve) => {\n      this.base.clearLocalStorage();\n      auth = this._transformAuthResponse(auth);\n      auth = await this._attachBusinesses(auth, businessId);\n      this.base.setAuthDetails(auth);\n      return resolve(auth);\n    });\n  }\n\n\n  clear(storage = true) {\n    return PopRequest.doPost(`auth/logout`, {}).pipe(\n      map((res: any) => {\n        res = res.data ? res.data : res;\n        if (storage) {\n          this.base.clearAuthDetails(`${this.name}:clear`);\n        }\n\n        return res;\n      })\n    );\n  }\n\n\n  clearAll(storage = true) {\n    return PopRequest.doPost(`auth/logout`, {logoutAll: true}).pipe(\n      map((res: any) => {\n        res = res.data ? res.data : res;\n        if (storage) {\n          SetPopAuth(null);\n          SetPopBusiness(null);\n          this.base.clearAuthDetails(`${this.name}:clearAll`);\n        }\n        return res;\n      })\n    );\n  }\n\n\n  /**\n   * Verify the current auth storage\n   *\n   * @param credentials\n   * @returns {Observable<void>}\n   */\n  verify(businessId: number): Promise<AuthDetails> {\n    return new Promise<AuthDetails>(async (resolve) => {\n      if (!businessId || this.base.isAuthExpired()) {\n        return resolve(null);\n      }\n      let checkedPermission = false;\n      const initRequests = [\n        PopRequest.doGet(`/auth/user`).pipe(\n          map((auth: any) => {\n            auth = auth.data ? auth.data : auth;\n            auth = this._transformAuthResponse(auth);\n            if (+businessId) {\n              let tmp = IsObject(auth.businesses[businessId], true) ? auth.businesses[businessId] : null;\n              auth.businesses = {};\n              if (tmp) {\n                auth.businesses[businessId] = tmp;\n              }\n\n              tmp = IsObject(auth.users[businessId], true) ? auth.users[businessId] : null;\n              auth.users = {};\n              if (tmp) {\n                auth.users[businessId] = tmp;\n              }\n            }\n            return auth;\n          })\n        )\n      ];\n      if (IsObject(PopUser, ['id']) && this.APP_GLOBAL.isPermissions()) {\n        checkedPermission = true;\n        initRequests.push(PopRequest.doPatch(`/businesses/${businessId}/users/${PopUser.id}/permissions`, {\n          with: ''\n        }, 1, true));\n      }\n\n      forkJoin(initRequests).subscribe((results) => {\n        const auth = <AuthDetails>results[0];\n        const existing = <AuthDetails>this.base.getAuthDetails();\n        existing.users = {...existing.users, ...auth.users};\n        existing.businesses = {...existing.businesses, ...auth.businesses};\n\n        if (checkedPermission) {\n\n          const user = GetHttpResult(results[1]);\n          if (businessId in existing.users) {\n            existing.users[businessId].permissions = user.permissions;\n          }\n        }\n        if (+businessId) {\n          forkJoin([\n            PopRequest.doGet(`/businesses/${businessId}`, {with: 'apps'}, 1, false, businessId).pipe(\n              catchError(error => of(error)),\n              map((res: any) => {\n                if (res.data) res = res.data;\n                if (IsArray(res)) {\n                  return res.pop();\n                } else {\n                  return res;\n                }\n\n              })),\n            PopRequest.doGet(`/apps/user/${auth.users[businessId].id}/settings`, {}, 1, false, businessId).pipe(\n              catchError(error => of(error)),\n              map((res: any) => {\n                if (res.data) res = res.data;\n                return res;\n              })),\n          ]).subscribe((data: any) => {\n            if (!(IsObject(existing.businesses[businessId], true)) || !(existing.users[businessId])) {\n              return resolve(null);\n            }\n\n            existing.businesses[businessId] = data[0];\n            existing.users[businessId].setting = {};\n            if (IsArray(data[1], true)) {\n              data[1].map((item) => {\n                if (IsObject(item, true)) {\n                  existing.users[businessId].setting[item.name] = item.setting.value ? item.setting.value : item.defaultValue;\n                }\n              });\n            }\n            // existing.users[businessId] = auth.users[businessId];\n            // existing.businesses[businessId] = auth.businesses[businessId];\n            this.base.setAuthDetails(existing);\n            return resolve(existing);\n          }, () => {\n            return resolve(existing);\n          });\n        } else {\n          this.base.setAuthDetails(existing);\n          return resolve(existing);\n        }\n\n      }, () => {\n        return resolve(null);\n      });\n    });\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  private _attachBusinesses(auth: AuthDetails, defaultBusinessId: number = 0): Promise<AuthDetails> {\n    return new Promise<AuthDetails>(async (resolve) => {\n      const businessIds = Object.keys(auth.users).map((id) => +id);\n      if (!defaultBusinessId) defaultBusinessId = +auth.business_fk && businessIds.includes(+auth.business_fk) ? +auth.business_fk : (IsArray(businessIds, true) ? +businessIds[0] : 0);\n      if (+defaultBusinessId > 0) {\n        this.base.setCurrentBusinessId(defaultBusinessId);\n        this.http.get(`${this.baseUrl}/businesses`, {\n          headers: new HttpHeaders(\n            {\n              'Authorization': `Bearer ${auth.token}`,\n              'X-Popcx-Business': defaultBusinessId + '',\n              'Content-Type': 'application/json',\n              'Api-Version': '1'\n            }\n          ),\n          params: this._setParams({\n            id: businessIds\n          })\n        }).subscribe((res: any) => {\n          const businesses = res.data ? res.data : res;\n          auth.businesses = {};\n          if (IsArray(businesses, true)) {\n            businesses.map((business: Business) => {\n              auth.businesses[business.id] = business;\n            });\n          }\n          // Check if this app was public facing, and turn it off\n          if (this.APP_GLOBAL.isOpen()) this.APP_GLOBAL.setOpen(false);\n          return resolve(auth);\n        });\n      } else {\n        auth.businesses = {};\n        auth.users = {};\n        return resolve(auth);\n      }\n    });\n  }\n\n\n  private _setParams(body) {\n    let params: HttpParams = new HttpParams();\n    for (const key of Object.keys(body)) {\n      if (body[key]) {\n        if (body[key] instanceof Array) {\n          body[key].forEach((item) => {\n            params = params.append(`${key.toString()}[]`, item);\n          });\n        } else {\n          params = params.append(key.toString(), body[key]);\n        }\n      }\n    }\n    return params;\n  }\n\n\n  private _transformAuthResponse(auth: any): AuthDetails {\n    const existingAuth = this.base.getAuthDetails();\n    if (!(IsObject(auth.businesses))) {\n      auth.businesses = {};\n    }\n    if (IsArray(auth.users, true)) {\n      auth.users.map((user: BusinessUser) => {\n        auth.businesses[user.business_id] = user.business;\n        delete user.business;\n      });\n      auth.users = ArrayKeyBy(auth.users, 'business_id');\n    }\n    if (IsString(auth.first_name, true) && IsString(auth.last_name, true)) {\n      auth.initials = GetStringAbbrv(`${auth.first_name} ${auth.last_name}`);\n    } else if (IsString(auth.name, true)) {\n      auth.initials = GetStringAbbrv(auth.name);\n    } else if (auth.first_name || auth.last_name) {\n      if (auth.first_name) {\n        auth.initials = GetStringAbbrv(auth.first_name);\n      } else {\n        auth.initials = GetStringAbbrv(auth.last_name);\n      }\n    } else {\n      auth.initials = '?';\n    }\n    if (IsDefined(auth.created_at)) auth.created_at = Math.floor((new Date(auth.created_at)).getTime() / 1000);\n    if (IsDefined(auth.last_login_at)) auth.last_login_at = Math.floor(new Date(auth.last_login_at).getTime() / 1000);\n    if (IsString(auth.email_verified_at, true)) auth.email_verified_at = Math.floor(new Date(auth.email_verified_at).getTime() / 1000);\n    if (IsDefined(auth.token_created_at) && IsUndefined(auth.created_at)) auth.created_at = auth.token_created_at;\n    if (IsUndefined(auth.max_ttl)) auth.max_ttl = 720;\n    if (!(IsString(auth.token, true)) && IsObject(existingAuth, ['token'])) auth.token = existingAuth.token;\n    if (IsDefined(existingAuth.created_at)) auth.created_at = existingAuth.created_at;\n\n\n    return <AuthDetails>auth;\n  }\n\n}\n","import { ComponentType } from '@angular/cdk/portal';\nimport { CoreConfig, Dictionary, EntityExtendInterface, EventCallback, OutletReset, PopBaseEventInterface, SectionConfig } from '../../../pop-common.model';\nimport { FieldItemGroupConfig } from '../pop-field-item-group/pop-field-item-group.model';\nimport { Subject } from 'rxjs';\n\nexport type TabLoadCallback = ( config: CoreConfig, tab: TabConfig ) => void;\nexport type TabUnloadCallback = ( config: CoreConfig, tab: TabConfig ) => void;\nexport type TabCoreCallback = ( event: PopBaseEventInterface ) => void;\n\n\nconst enum TabPosition {\n  left = 'left',\n  center = 'center',\n  right = 'center'\n}\n\n\nexport interface TabComponentInterface {\n  type: ComponentType<any>;\n  inputs?: Dictionary<any>;\n  position: number;\n  name?: string;\n  width?: string;\n  header?: string;\n  when?:any[];\n}\n\n\nexport interface TabPositionInterface {\n  id?: string | number;\n  name?: string;\n  flex: number;\n  maxWidth?: number;\n  minWidth?: number;\n  maxHeight?: number;\n  position?: number;\n  components?: TabComponentInterface[];\n  reset?: Subject<any>;\n  header?: string;\n  extension?: EntityExtendInterface;\n}\n\n\nexport interface TabInterface {\n  id: string;\n  hidden?: boolean;\n  positions?: any;\n  name?: string;\n  path?: string;\n  metadata?: object;\n  onLoad?: TabLoadCallback; // initial load event hook for custom logic\n  onEvent?: EventCallback;  // main event hook for custom logic\n  overhead?: number;       // compute extra overhead assigned by parent component\n  onUnload?: TabUnloadCallback;\n  requireRefresh?: boolean;        // require an api call to refresh the entityId on every load\n  scheme?: boolean;\n  sections?: SectionConfig[];\n  syncPositionFields?: string[]; // a list of fieldItems that should only trigger tab to reload modules of the tab\n  syncPositionMap?: Dictionary<number[]>; // a more specific mapping to specify certain positions to reload with a patch comes from a certain position\n  syncPositions?: boolean;  // a general switch that triggers all positions to reset on a patch, should be reduced by providing syncPositionFields <['security_profile_fk', 'type_fk']> or syncPositionMap <{'left':['right']>}\n  wrap?: boolean;   // Indicate whether this tab should have the default wrapper .ie margin, sometimes a tab might be framed from within another tab that already has the wrap\n  columnWrap?: boolean;   // Indicate whether this tab should have the default wrapper .ie margin, sometimes a tab might be framed from within another tab that already has the wrap\n  when?: any[];  // conditional whether to show tab or not\n}\n\n\nexport class TabConfig {\n  id: string;\n  name?: string;\n  hidden? = false;\n  path? = '';\n  metadata?: object;\n  scheme? = false;\n  overhead? = 0;\n  positions?: {\n    1?: TabPositionInterface,\n    2?: TabPositionInterface,\n    3?: TabPositionInterface,\n  };\n  sections? = null;\n  syncPositionFields?: string[];\n  syncPositions? = false;\n  syncPositionMap?: Dictionary<number[]>;\n  requireRefresh? = false;\n  onLoad?: TabLoadCallback;\n  onEvent?: EventCallback;\n  onUnload?: TabUnloadCallback;\n  // internal assets\n  view?: any;\n  resetView?: OutletReset;\n  when? = null;\n\n  wrap? = true;\n  columnWrap? = true;\n  groups?: Dictionary<FieldItemGroupConfig> = {};\n\n\n  constructor( params: TabInterface ){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n    if( !this.name ) this.name = this.id.replace( /_/g, ' ' ).replace( /(?:^|\\s)\\S/g, function( a ){\n      return a.toUpperCase();\n    } );\n\n    if( !this.path ) this.path = this.id.replace( /_/g, '-' ).toLowerCase();\n    if( !this.metadata ) this.metadata = {};\n    if( !this.syncPositionMap ) this.syncPositionMap = {};\n    if( !this.positions ) this.positions = { 1: { flex: 1 } };\n    Object.keys( this.positions ).map( ( position ) => {\n      if( !this.positions[ position ].min ) this.positions[ position ].multiple_min = null;\n      if( !this.positions[ position ].max ) this.positions[ position ].multiple_max = null;\n      if( !this.positions[ position ].flex && this.positions[ position ].cols ) this.positions[ position ].flex = this.positions[ position ].cols;\n      delete this.positions[ position ].cols;\n    } );\n  }\n}\n\n\nexport interface TabButtonInterface {\n  id: number | string;\n  name: string;\n  metadata?: any;\n  hidden?: boolean;\n  disabled?: boolean;\n  accessType?: string;\n}\n\n\nexport interface TabMenuInterface {\n  name: string;\n  goBack?: boolean;\n  portal?: boolean;\n  tabs?: Array<TabConfig>;\n  buttons?: Array<TabButtonInterface>;\n}\n\n\nexport interface TabMenuPortalInterface {\n  internal_name: string;\n  entity_id: number;\n}\n\n\nexport class TabMenuConfig {\n  name = '';\n  goBack = true;\n  tabs: Array<TabConfig> = [];\n  buttons: Array<TabButtonInterface> = [];\n  portal = <boolean>false;\n  metadata: Dictionary<any> = {};\n  loaded = false;\n  loading = false;\n\n\n  constructor( params?: TabMenuInterface ){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n  }\n}\n\n\nexport interface BackButton {\n  returnUrl: string;\n  hardReload: boolean;\n} \n\n\n\n","import { EventCallback, FieldItemOptions, OptionItem } from '../../../pop-common.model';\nimport { TableConfig } from '../pop-table/pop-table.model';\n\n\nexport interface SideBySideOptionInterface {\n  value: string | number;\n  name: string;\n  group?: string;\n  sort_order?: number;\n  patching?: boolean;\n  optionFilter?: boolean;\n  assignBlock?: boolean;\n  optionBlock?: boolean;\n  assignedFilter?: boolean;\n  errMessage?: string;\n}\n\n\nexport interface SideBySideOptions {\n  assigned?: any;\n  resource?: string;\n  child?: string;\n  parent?: string;\n  values: SideBySideOptionInterface[];\n  empty?: OptionItem;                       // Pass in an Option Item that you want to represent an unassigned value\n  prevent?: Array<string | number>;         // pass in ids of an Option Items that you don't want in list\n  ensure?: OptionItem;\n}\n\n\nexport interface SideBySideInterface {\n  id?: number | string;           // A number that will be included in the events so you know which field it came from.\n  name?: string;              // the entityId field name\n  assigned?: Array<string | number>;  // the ids of the assigned items\n  assignAll?: boolean;        // If \"Assign All\" should be available.\n  assignedLabel?: string;     // Label of the assigned items name\n  bubble?:boolean;\n\n  bucketHeight?: number;      // The exact px height you want the buckets to be. Overrides bucket limit\n  bucketLimit?: number;      // The limit of items to show in a bucket\n  disabled?: boolean;          // Set to true to disable buttons\n  displayCircleID?: boolean;   //\n  displayHelper?: boolean;     // Set to false if you don't want to see helper icons when no assigned\n  displayTitle?: boolean;     //\n  facade?:boolean;            // mimic api calls\n  facadeEvent?:boolean;       // If set means that only an event should be fired instead of actually doing anything\n  helpText?: string;         // Displayed text when none assigned\n  helpTextRight?:string;   // Displayed text when no options available to assign\n  height?: number;               // static px height\n  optionsLabel?: string;         // Label of the available items name.\n  filter?: boolean;           // If filters are available\n  filterBoth?: boolean;        // If filter boxes should be combined\n  route?: string;              // Absolute Url path to route to each option: Extrapolate the entityId/value by  passing 'users/:value'\n  metadata?: object;\n  options: SideBySideOptions;// The options available.\n  removeAll?: boolean;        // If \"Remove All\" should be available.\n  required?: boolean;\n  sort?: boolean;             //  Set to true if you want items to be sorted in priority of sort_order, name\n  sessionPath?: string;          // Entity Config location to store values, ie...  a way store the captured values of facades on the entityId metadata <'entityId.metadata.role_type'>\n  display?: string;             // Title of the Side by Side\n  parentHeight?: string;     // class name of parent height to match\n  patch?: {\n    path: string;\n    conflictPath?:string;\n    conflictMessage?:string;\n    conflictHeader?:string;\n    addId?:boolean\n    conflictTableConfig?:TableConfig;\n    field?: string;\n    businessId?: number;\n    callback?: EventCallback;\n    ignore401?: boolean,\n    metadata?: object;\n    displayIndicator?: boolean;\n    version?: number,\n    running?: boolean;\n    assignErrMessage?: string // Store (mass) assign Http Error message\n    removeErrMessage?: string // Store (mass) remove Http Error message\n    assignMethod?: 'POST' | 'PATCH';\n    removeMethod?: 'POST' | 'PATCH' | 'DELETE';\n  };\n}\n\n\nexport class SideBySideConfig {\n  id;\n  name = 'name';\n  bubble = false;\n  hasLabelRow = false;\n  hasFilterRow = false;\n  hasHeader = false;\n  assigned: Array<string | number> = []; // List of item ids of assigned items\n  assignAll = false;\n  assignedLabel = '';\n  bucketHeight?: number;\n  bucketLimit = 0;\n  disabled = false;\n  displayCircleID = true;\n  displayHelper = true;\n  displayTitle = true;\n  facade = false;\n  facadeEvent = false;\n  helpText: string;\n  helpTextRight:string;\n  optionsLabel = '';\n  optionHtml = 'label';\n  filter = true;\n  filterBoth = false;\n  height?: number;               // static px height\n  route = '';\n  metadata = null;\n  options: SideBySideOptions = { values: [] }; // List of all available items\n  removeAll = false;\n  required?: boolean;\n  sort: false;\n  display = '';\n  patch = null;\n  parentClassName?: string;     // class name of parent height to match\n  removeAllOptions;\n  addAllOptions;\n  assign;\n  remove;\n  applyFilter;\n  getAssigned;\n  block;\n  unblock;\n  control;\n\n\n  constructor(config: SideBySideInterface){\n    for( const i in config ) this[ i ] = config[ i ];\n    if( !this.patch ) this.patch = {};\n    if( this.patch.displayIndicator !== false ) this.patch.displayIndicator = true;\n    if( !this.patch.field ) this.patch.field = 'option';\n    if( !this.patch.assignMethod ) this.patch.assignMethod = 'POST';\n    if( !this.patch.removeMethod ) this.patch.removeMethod = 'DELETE';\n    if( !this.patch.businessId ) this.patch.businessId = 0;\n\n    if( !this.metadata ) this.metadata = {};\n    this.hasHeader = this.display && this.displayTitle;\n    this.hasLabelRow = this.assignAll || this.removeAll || this.optionsLabel || this.assignedLabel ? true : false;\n    this.hasFilterRow = this.filter || this.filterBoth ? true : false;\n\n\n    if( this.route ) this.optionHtml = 'route';\n\n    if( this.displayHelper && !this.helpText ) this.helpText = 'You have no ' + ( this.display ? this.display.toLowerCase() : 'options' );\n    this.options = JSON.parse(JSON.stringify(this.options)); // make as deep copy of options so that options reference can be used elsewhere\n\n    if( this.displayHelper && !this.helpTextRight ) this.helpTextRight = ' No ' + ( this.display ? this.display.toLowerCase() +' available ' : 'data available ');\n    this.options = JSON.parse(JSON.stringify(this.options)); // make as deep copy of options so that options reference can be used elsewhere\n\n    if( this.sort && this.options.values.length > 1 ){\n      if( typeof this.options[ 0 ].sort_order !== 'undefined' ){\n        this.options.values.sort((a, b) => {\n          if( a.sort_order < b.sort_order ) return -1;\n          if( a.sort_order > b.sort_order ) return 1;\n          return 0;\n        });\n      }else{\n        this.options.values.sort((a, b) => {\n          if( a.name < b.name ) return -1;\n          if( a.name > b.name ) return 1;\n          return 0;\n        });\n      }\n    }\n  }\n}\n","import { FormControl, Validators } from '@angular/forms';\nimport { FieldItemOption, FieldItemOptions, FieldItemPatchInterface } from '../../../../pop-common.model';\nimport { SetControl } from '../../../../pop-common-dom.models';\n\n\nexport interface SelectConfigInterface {\n  autoFill?: boolean;\n  bubble?: boolean;               // fire events\n  control?: FormControl;          // The form control. If not passed one will be created.\n  disabled?: boolean;             // Mark as readonly.\n  displayErrors?: boolean;        // If Error messages should be displayed.\n  emptyOption?: FieldItemOption;      // Sets an empty or a null option value as the first option\n  empty?: 'ConvertEmptyToNull' | 'ConvertEmptyToZero';\n  facade?: boolean;               // Sets a flag that says this fieldItems really does not exist in the backend, and just pretend to hit the api\n  helpText?: string;           // On hover helper text.\n  height?: number;\n  hidden?: boolean;                // Hide a field by setting to true;\n  id?: number | string;           // A number that will be included in the events so you know which field it came from.\n  label?: string;                 // Input label.\n  metadata?: object;              // Array of objects. To be passed back on the event emitter and included in a patch if desired.\n  mode?: 'select' | 'label';\n  minimal?: boolean;              // Allows the input to fit in a tighter space, removes indicators and padding\n  name?: string;                 //  name of column\n  noInitialValue?: boolean;        // Set to true to always have an empty value on load\n  options?: FieldItemOptions;        // Array of FieldOptions\n  patch?: FieldItemPatchInterface;         // If field should be auto-patched.\n  route?: string;                 // a router url path\n  readonly?: boolean;\n  required?: boolean;\n  session?: boolean;                // If field value change should be stored to core entity\n  sessionPath?: string;                // If session path if not stored on root entity\n  sort?: boolean;                 //  Set to true if you want options to be sorted in priority of sort_order, name\n  tooltip?: string;               // Tooltip for information to show when input is focused\n  validators?: Array<Validators>; // Array of Validators.\n  value?: boolean | string | number;        // Initial value.\n}\n\n\nexport class SelectConfig implements SetControl {\n  autoFill?: boolean;\n  bubble = false;\n  clearMessage;\n  control: FormControl;\n  disabled = false;\n  displayErrors = true;\n  empty;\n  facade = false;\n  helpText = '';\n  hidden: false;\n  height? = 240;\n  id;\n  label = '';\n  message = '';\n  mode = 'select';\n  metadata;\n  minimal = false;\n  name = 'name';\n  noInitialValue = false;\n  options?: FieldItemOptions = { values: [] };\n  patch: FieldItemPatchInterface;\n  route;\n  readonly = false;\n  required?: boolean;\n  showTooltip = false;\n  sort = false;\n  session?: boolean;\n  sessionPath?: string;\n  triggerOnChange;\n  tooltip = '';\n  validators;\n  value?: boolean | string | number | any[] = null;\n\n\n  constructor( params?: SelectConfigInterface ){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n    if( this.sort && this.options.values.length > 1 ){\n      if( typeof this.options.values[ 0 ].sort_order !== 'undefined' ){\n        this.options.values.sort( ( a, b ) => {\n          if( a.sort_order < b.sort_order ) return -1;\n          if( a.sort_order > b.sort_order ) return 1;\n          return 0;\n        } );\n      }else{\n        this.options.values.sort( ( a, b ) => {\n          if( a.name < b.name ) return -1;\n          if( a.name > b.name ) return 1;\n          return 0;\n        } );\n      }\n    }\n    if( this.options.empty ) this.options.values.unshift( { value: this.options.empty.value, name: this.options.empty.name } );\n\n    if( !this.patch ) this.patch = { field: '', duration: 750, path: '', disabled: false, businessId: 0 };\n    if( !this.disabled ) this.disabled = false;\n    if( this.patch.displayIndicator !== false ) this.patch.displayIndicator = true;\n    if( this.noInitialValue ) this.value = '';\n    if( !this.control ) this.setControl();\n  }\n\n\n  setControl(){\n    this.control = ( this.disabled\n        ? new FormControl( { value: this.value, disabled: true } )\n        : new FormControl( this.value, ( this.validators ? this.validators : [] ) )\n    );\n  }\n}\n","import { FormControl, Validators } from '@angular/forms';\nimport { FieldItemOptions, FieldItemPatchInterface } from '../../../../pop-common.model';\nimport { SetControl } from '../../../../pop-common-dom.models';\n\n\nexport interface SelectMultiConfigInterface {\n  bubble?: boolean;               // fire events\n  column?: string;              // the entityId field name\n  control?: FormControl;          // The form control. If not passed one will be created.\n  displayErrors?: boolean;        // If Error messages should be displayed.\n  disabled?: boolean;             // Mark as readonly.\n  facade?:boolean;\n  helpText?: string;            // On hover helper text.\n  id?: number | string;           // A number that will be included in the events so you know which field it came from.\n  label?: string;                 // Input label.\n  metadata?: object;              // Array of objects. To be passed back on the event emitter and included in a patch if desired.\n  minimal?: boolean;              // Allows the input to fit in a tighter space, removes indicators and padding\n  noInitialValue?:boolean;         // Set to true to always have an empty value on load\n  options?: FieldItemOptions;        // Array of FieldOptions\n  patch?: FieldItemPatchInterface;         // If field should be auto-patched.\n  session?: boolean;                // If field value change should be stored to core entity\n  sessionPath?: string;                // If session path if not stored on root entity\n  sort?: boolean;                 //  Set to true if you want options to be sorted in priority of sort_order, name\n  tooltip?: string;               // Tooltip for information to show when input is focused\n  validators?: Array<Validators>; // Array of Validators.\n  value?: Array<number | string>;   // Initial value.\n}\n\n\nexport class SelectMultiConfig implements SetControl {\n  bubble = false;\n  clearMessage;\n  control: FormControl;\n  displayErrors = true;\n  disabled = false;\n  facade = false;\n  helpText = '';\n  id;\n  label = '';\n  minimal?: false;\n  metadata;\n  message = '';\n  noInitialValue = false;\n  name = 'name';\n  options?: FieldItemOptions;\n  patch: FieldItemPatchInterface;\n  route;\n  session?: boolean;\n  sessionPath?: string;\n  sort: false;\n  showTooltip = false;\n  tooltip = '';\n  triggerOnChange: CallableFunction;\n  validators;\n  value;\n\n\n  constructor( params?: SelectMultiConfigInterface ){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n    this.value = Array.isArray( this.value ) ? this.value : [];\n    if( !this.options ) this.options = { values: [] };\n    if( this.sort && this.options.values.length > 1 ){\n      if( typeof this.options.values[ 0 ].sort_order !== 'undefined' ){\n        this.options.values.sort( ( a, b ) => {\n          if( a.sort_order < b.sort_order ) return -1;\n          if( a.sort_order > b.sort_order ) return 1;\n          return 0;\n        } );\n      }else{\n        this.options.values.sort( ( a, b ) => {\n          if( a.name < b.name ) return -1;\n          if( a.name > b.name ) return 1;\n          return 0;\n        } );\n      }\n    }\n\n    if( !this.patch ) this.patch = { field: '', duration: 750, path: '', disabled: false };\n    if( this.patch.displayIndicator !== false ) this.patch.displayIndicator = true;\n    if( this.noInitialValue ) this.value = [];\n    if( !this.control ) this.setControl();\n  }\n\n\n  setControl(){\n    this.control = ( this.disabled ? new FormControl( {\n      value: this.value,\n      disabled: true\n    } ) : new FormControl( this.value, ( this.validators ? this.validators : [] ) ) );\n  }\n}\n","import { FormControl, Validators } from '@angular/forms';\nimport { EventPromiseCallback, FieldItemPatchInterface } from '../../../../pop-common.model';\nimport { SetControl } from '../../../../pop-common-dom.models';\n\n\nexport interface InputConfigInterface {\n  autofocus?:boolean;\n  autoselect?:boolean;\n  bubble?: boolean;               // fire events\n  conceal?: boolean;              // Mask the input as dots\n\n  control?: FormControl;          // The form control. If not passed one will be created.\n\n  dropSpecial?: boolean;\n  disabled?: boolean;             // Mark as disabled.\n  displayErrors?: boolean;        // If Error messages should be displayed.\n  empty?: 'ConvertEmptyToNull' | 'ConvertEmptyToZero';\n  facade?: boolean;\n  helpText?: string;            // On hover helper text.\n  hintText?: string;\n  hidden?: boolean;               // Hide input.\n  hint?: boolean;\n  id?: string | number;           // A number that will be included in the events so you know which field it came from.\n  label?: string;                 // Input label.\n\n  minimal?: boolean;              // Allows the input to fit in a tighter space, removes indicators and padding\n  mask?: string;                  // ngxMask expression\n  maxlength?: number;             // Field multiple_max length.\n  metadata?: object;              // Array of objects. To be passed back on the event emitter and included in a patch if desired.\n  name?: string;                 // name of column\n  noInitialValue?: boolean;        // Set to true to always have an empty value on load\n  onEnter?:EventPromiseCallback;\n  patch?: FieldItemPatchInterface; // If field should be auto-patched.\n  pattern?: string;               // Character type limiter.\n  prefix?: string;                // Prefix Character\n  prevent?: any[];\n  readonly?: boolean;             // Mark as readonly.\n  required?: boolean;\n  session?: boolean;                // If field value change should be stored to core entity\n  sessionPath?: string;                // If session path if not stored on root entity\n  showMask?: boolean;\n  specialChars?: string[];        // New default characters for mask\n  suffix?: string;                // Suffix Character\n  selectMode?: boolean;               // Marks input html to mimic disabled select input : ie.. pop a modal when input is clicked, set an onclick event function to on component tag to call a certain function\n  selectModeOptionsDirection?: 'up' | 'down';\n  tooltip?: string;               // Tooltip for information to show when input is focused\n  tabOnEnter?: boolean;           // Convert enter to a tab when control is valid, default is false ie .. set to true when you want to moved down a form list\n  type?: 'text' | 'password' | 'email';     // HTML input type.\n  transformation?: any;// Transform the input to match a specific case of format 'title' | 'lower' | 'upper' | 'ConvertEmptyToNull' | 'ConvertEmptyToZero'\n  validators?: Array<Validators>; // Array of Validators.\n  value?: boolean | string | number;        // Initial value.\n\n}\n\n\nexport class InputConfig implements SetControl {\n  // Defaults\n  autofocus = false;\n  autoselect = false;\n  bubble = false;\n  conceal = false;\n  displayErrors = true;\n  disabled = false;\n  dropSpecial = true;\n  empty;\n  facade? = false;\n  helpText = '';\n  hintText = '';\n  hidden = false;\n  hint = false;\n  id = '';\n  label = '';\n  maxlength = 129;\n  mask = null;\n  minimal = false;\n  message = '';\n  name = 'name';\n  noInitialValue = false;\n  onEnter?:EventPromiseCallback;\n  patch: FieldItemPatchInterface;\n  prefix = '';\n  prevent?: any[];\n  readonly = false;\n  required?: boolean;\n  showMask = false;\n  showTooltip = false;\n  suffix = '';\n  selectMode = false;\n  selectModeOptionsDirection = 'down';\n  session?: boolean;\n  sessionPath?: string;\n  specialChars = [ '-', '/', '(', ')', '.', ':', ' ', '+', ',', '@', '[', ']' ];\n  tooltip = '';\n  type = 'text';\n  tabOnEnter = false;\n  value?: boolean | string | number = '';\n\n\n  // No Defaults\n  control;\n  clearMessage;\n  metadata;\n  pattern;\n  setType;\n  transformation;\n  triggerOnChange;\n  triggerDirectPatch;\n  validators;\n\n\n  constructor( params?: InputConfigInterface ){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n    if( !this.patch ) this.patch = { field: '', path: '', duration: 750, disabled: false, businessId: 0 };\n    if( this.patch.displayIndicator !== false ) this.patch.displayIndicator = true;\n    if( !this.readonly ) this.readonly = false;\n    if( this.selectMode ) this.readonly = true; // input is mimicking a select box to a trigger  modal functionality\n    if( this.noInitialValue ) this.value = '';\n    if( !this.control ) this.setControl();\n    if( this.mask ){\n      this.maxlength = null;\n      this.hint = false;\n      this.pattern = null;\n    }\n  }\n\n\n  setControl(){\n    this.control = ( this.disabled ? new FormControl( {\n      value: this.value,\n      disabled: true\n    } ) : new FormControl( this.value, ( this.validators ? this.validators : [] ) ) );\n  }\n}\n","import { FormControl, Validators } from '@angular/forms';\nimport { FieldItemPatchInterface } from '../../../../pop-common.model';\nimport { SetControl } from '../../../../pop-common-dom.models';\n\n\nexport interface NumberConfigInterface {\n  bubble?: boolean;               // fire events\n  column?: string;              // the entityId field name\n  control?: FormControl;          // The form control. If not passed one will be created.\n  readonly?: boolean;             // Mark as readonly.\n  disabled?: boolean;             // Mark as disabled.\n  displayErrors?: boolean;        // If Error messages should be displayed.\n  dropSpecial?: boolean;\n  facade?: boolean;\n  helpText?: string;            // On hover helper text.\n  hidden?: boolean;               // Hide input.\n  id?: string | number;           // A number that will be included in the events so you know which field it came from.\n  label?: string;                 // Input label.\n  metadata?: object;              // Array of objects. To be passed back on the event emitter and included in a patch if desired.\n  minimal?: boolean;              // Allows the input to fit in a tighter space, removes indicators and padding\n  min?: number;             // Field multiple_max length.\n  max?: number;             // Field multiple_max length.\n  noInitialValue?:boolean;        // Set to true to always have an empty value on load\n  name?: string;\n  patch?: FieldItemPatchInterface; // If field should be auto-patched.\n  prefix?: string;\n  session?: boolean;                // If field value change should be stored to core entity\n  sessionPath?: string;                // If session path if not stored on root entity\n  suffix?: string;\n  step?: number;\n  showMask?: boolean;\n  tooltip?: string;               // Tooltip for information to show when input is focused\n  transformation?: any;// Transform the input to match a specific case of format 'title' | 'lower' | 'upper' | 'ConvertEmptyToNull' | 'ConvertEmptyToZero'\n  validators?: Array<Validators>; // Array of Validators.\n  value?: boolean | string | number;        // Initial value.\n\n}\n\n\nexport class NumberConfig implements SetControl {\n  // Defaults\n  bubble = false;\n  control;\n  dropSpecial = true;\n  displayErrors = true;\n  disabled = false;\n  facade? = false;\n  helpText = '';\n  hidden = false;\n  id = '';\n  label = '';\n  message = '';\n  min? = 1;\n  max? = 100;\n  metadata;\n  minimal = false;\n  maxlength;\n  mask = '0*';\n  name = 'name';\n  noInitialValue = false;\n  pattern = 'Numeric';\n  patch: FieldItemPatchInterface;\n  prefix = '';\n  readonly = false;\n  session?: boolean;\n  sessionPath?: string;\n  showTooltip = false;\n  specialChars = [ '$', ' ', ',', '%' ];\n  showMask = false;\n  suffix = '';\n  step? = 1;\n  tooltip = '';\n  transformation;\n  triggerOnChange;\n  triggerDirectPatch;\n  value?: boolean | string | number = '';\n  validators;\n  \n  \n\n  // No Defaults\n\n\n\n  constructor(params?: NumberConfigInterface){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n    if( !this.patch ) this.patch = { field: '', duration: 750, path: '', disabled: false, businessId: 0 };\n    if( this.patch.displayIndicator !== false ) this.patch.displayIndicator = true;\n    if( !this.readonly ) this.readonly = false;\n\n    if( this.min > this.max ) this.min = this.max;\n    if( this.max < this.min ) this.max = this.min;\n    this.maxlength = String(this.max).length;\n\n    if( this.value ){\n      if( this.value < this.min ) this.value = this.min;\n      if( this.value > this.max ) this.value = this.max;\n    }\n    if( this.noInitialValue ) this.value =  '';\n    if( !this.control ) this.setControl();\n  }\n\n\n  setControl(){\n    this.control = ( this.disabled ? new FormControl({\n      value: this.value,\n      disabled: true\n    }) : new FormControl(this.value, ( this.validators ? this.validators : [] )) );\n  }\n}\n","import { FormControl, Validators } from '@angular/forms';\nimport { FieldItemPatchInterface } from '../../../../pop-common.model';\nimport { SetControl } from '../../../../pop-common-dom.models';\n\nexport type DateFilterPredicate = ( d: Date ) => boolean;\n\n\n\n\nexport interface DateConfigInterface {\n  type?: 'Basic' | 'Expanded';\n  bubble?: boolean;                                 // fire events\n  disabled?: boolean;                               // Mark as disabled.\n  displayErrors?: boolean;                          // If Error messages should be displayed.\n  name?: string;                                // the entityId field name\n  facade?: boolean;\n  filterPredicate?: string | DateFilterPredicate;   // A function to remove certain dates\n  helpText?: string;                             // On hover helper text.\n  id?: string | number;                             // A number that will be included in the events so you know which field it came from.\n  label?: string;                                   // Date label.\n  min?: string | number | Date;                            // Field multiple_min date.\n  max?: string | number | Date;                            // Field multiple_max date.\n  metadata?: object;                                // Array of objects. To be passed back on the event emitter and included in a patch if desired.\n  noInitialValue?: boolean;                          // Set to true to always have an empty value on load\n  required?: boolean;\n  session?: boolean;                                // If field value change should be stored to core entity\n  sessionPath?: string;                            // If session path if not stored on root entity\n  patch?: FieldItemPatchInterface;                           // If field should be auto-patched.\n  tooltip?: string;                                 // Tooltip for information to show when input is focused\n  transformation?: string;                          // Transform the input to match a specific case of format\n  validators?: Array<Validators>;                   // Array of Validators.\n  value?: string | number;                          // Initial value\n  options?: object;                                 //\n}\n\n\nexport class DateConfig implements SetControl {\n\n\n  // Defaults\n  type = 'Expanded';\n  bubble = false;\n  control: FormControl;\n  displayErrors = true;\n  disabled = false;\n  facade?: boolean;\n  filterPredicate = null;\n  helpText = '';\n  id = '';\n  label = '';\n  min = null;\n  max = null;\n  message = '';\n  metadata;\n  name = 'name';\n  noInitialValue = false;\n  patch: FieldItemPatchInterface;\n  required?: boolean;\n  session?: boolean;\n  sessionPath?: string;\n  showTooltip = false;\n  transformation;\n  tooltip = '';\n  value;\n  clearMessage;\n  triggerOnChange;\n\n  // No Defaults\n\n  validators;\n\n\n  constructor( params?: DateConfigInterface ){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n    if( this.value ) this.value = new Date( this.value );\n    if( typeof this.min === 'string'){\n      this.min = new Date( this.min );\n    }\n    if( typeof this.max === 'string'){\n      this.max = new Date( this.max );\n    }\n    // if( isNaN( this.max ) === false ){\n    //   const maxDate = new Date();\n    //   // maxDate.setDate(maxDate.getDate() - 1);\n    //   maxDate.setDate( maxDate.getDate() + parseInt( this.max, 10 ) );\n    //   this.max = new Date( maxDate );\n    // }\n    if( !this.patch ) this.patch = { field: '', duration: 750, path: '', disabled: false, businessId: 0 };\n    if( this.patch.displayIndicator !== false ) this.patch.displayIndicator = true;\n    if( this.noInitialValue ) this.value = '';\n    if( !this.control ) this.setControl();\n  }\n\n\n  setControl(){\n    this.control = <FormControl> ( this.disabled ? new FormControl( {\n      value: this.value,\n      disabled: true\n    } ) : new FormControl( this.value, ( this.validators ? this.validators : [] ) ) );\n  }\n}\n","import { FormControl, Validators } from '@angular/forms';\nimport { FieldItemPatchInterface } from '../../../../pop-common.model';\nimport { SetControl } from '../../../../pop-common-dom.models';\n\n\nexport interface TimeConfigInterface {\n  bubble?: boolean;               // fire events\n  control?: FormControl;          // The form control. If not passed one will be created.\n  disabled?: boolean;             // Mark as disabled.\n  displayErrors?: boolean;        // If Error messages should be displayed.\n  facade?: boolean;               // Sets a flag that says this fieldItems really does not exist in the backend, and just pretend to hit the api\n  helpText?: string;           // On hover helper text.\n  interval: 1 | 5 | 10 | 15;      // Minute interval\n  id?: string | number;           // A number that will be included in the events so you know which field it came from.\n  label?: string;                 // Time label.\n  metadata?: object;              // Array of objects. To be passed back on the event emitter and included in a patch if desired.\n  name?: string;              // the entityId field name\n  noInitialValue?: boolean;        // Set to true to always have an empty value on load\n  patch?: FieldItemPatchInterface;         // If field should be auto-patched.\n  readonly?: boolean;             // Mark as readonly.\n  session?: boolean;                // If field value change should be stored to core entity\n  sessionPath?: string;                // If session path if not stored on root entity\n  tooltip?: string;               // Tooltip for information to show when input is focused\n  time: 12 | 24;                  // Selectable times\n  transformation?: string;        // Transform the input to match a specific case of format\n  validators?: Array<Validators>; // Array of Validators.\n  value?: string | number;        // Initial value.\n}\n\n\nexport class TimeConfig implements SetControl {\n  // Defaults\n  bubble = false;\n  control;\n  displayErrors = true;\n  disabled = false;\n  facade = false;\n  helpText = '';\n  id = '';\n  label = '';\n  message = '';\n  metadata;\n  name = 'name';\n  noInitialValue = false;\n  patch: FieldItemPatchInterface;\n  showTooltip = false;\n  readonly = false;\n  session?: boolean;\n  sessionPath?: string;\n  tooltip = '';\n  transformation;\n  triggerOnChange;\n  time: 12 | 24 = 12;\n  interval: 1 | 5 | 10 | 15 = 15;\n  value = '';\n  validators;\n  // No Defaults\n\n\n  constructor( params?: TimeConfigInterface ){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n    if( !this.patch ) this.patch = { field: '', duration: 750, path: '', disabled: false, businessId: 0 };\n    if( this.patch.displayIndicator !== false ) this.patch.displayIndicator = true;\n    if( !this.readonly ) this.readonly = false;\n    if( this.noInitialValue ) this.value = '';\n    if( !this.control ) this.setControl();\n\n  }\n\n\n  setControl(){\n    this.control = ( this.disabled ? new FormControl( {\n      value: this.value,\n      disabled: true\n    } ) : new FormControl( this.value, ( this.validators ? this.validators : [] ) ) );\n  }\n}\n","import { FormControl, Validators } from '@angular/forms';\nimport { FieldItemOptions, FieldItemPatchInterface } from '../../../../pop-common.model';\nimport { SetControl } from '../../../../pop-common-dom.models';\n\n\nexport interface CheckboxConfigInterface {\n \n  align?: string;                  // With no label, align checkbox < 'left', 'center', 'right';\n  bubble?: boolean;               // fire events\n  control?: FormControl;          // The form control. If not passed one will be created.\n  disabled?: boolean;             // Mark as readonly.\n  displayErrors?: boolean;        // If Error messages should be displayed.\n  facade?: boolean;               // Sets a flag that says this fieldItems really does not exist in the backend, and should not patch to the api\n  helpText?: string;            // On hover helper text.\n  id?: number | string;           // A number that will be included in the events so you know which field it came from.\n  label?: string;                 // Input label. A label is optional, checkbox will center inside the container without a label\n  labelPosition?: string;          // Label can be positioned to be 'before' or 'after' the checkbox. Default is 'after'\n  metadata?: object;              // Array of objects. To be passed back on the event emitter and included in a patch if desired.\n  name?: string;               // the entityId field name\n  noInitialValue?:boolean;        // Set to true to always have an empty value on load\n  options?: FieldItemOptions;        // Array of FieldOptions\n  patch?: FieldItemPatchInterface;         // If field should be auto-patched.\n  session?: boolean;                // If field value change should be stored to core entity\n  sessionPath?: string;                // If session path if not stored on root entity\n  tabOnEnter?:boolean;\n  textOverflow?:'wrap' | 'ellipsis';   // Set the text overflow behavior, default wrap\n  validators?: Array<Validators>; // Array of Validators.\n  value?: number | boolean;        // Initial value.\n}\n\n\nexport class CheckboxConfig implements SetControl {\n\n  align = 'right';\n  bubble = false;\n  control: FormControl;\n  disabled = false;\n  displayErrors = true;\n  facade = false;\n  helpText = '';\n  id: number | string = '';\n  label = '';\n  labelPosition = 'after';\n  message = '';\n  metadata;\n  name = 'name';\n  noInitialValue = false;\n  options?: FieldItemOptions = { values: [] };\n  patch;\n  patchSuccess;\n  patchFail;\n  session?: boolean;\n  sessionPath?: string;\n  startPatch;\n  tabOnEnter = false;\n  toolTipDirection = 'right';\n  textOverflow = 'wrap';\n  value: number | boolean = false;\n  validators;\n\n  constructor(params?: CheckboxConfigInterface){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n    if( this.label ){\n      this.toolTipDirection = this.labelPosition === 'after' ? 'right' : 'left';\n    }else{\n      this.toolTipDirection = 'above';\n    }\n    if( [ 'left', 'center', 'right', ].indexOf(this.align) === -1 ) this.align = 'center';\n    if( !this.patch ) this.patch = { field: '', path: '', disabled: false, businessId: 0  };\n    if( this.patch.displayIndicator !== false ) this.patch.displayIndicator = true;\n    if( this.noInitialValue ) this.value =  null;\n    if( !this.control ) this.setControl();\n  }\n\n\n  setControl(){\n    this.control = this.disabled === true ? new FormControl({\n      value: this.value,\n      disabled: this.disabled\n    }) : new FormControl(this.value, ( this.validators ? this.validators : [] ));\n  }\n\n}\n","import { FormControl, Validators } from '@angular/forms';\nimport { FieldItemPatchInterface } from '../../../../pop-common.model';\nimport { SetControl } from '../../../../pop-common-dom.models';\n\n\nexport interface SwitchConfigInterface {\n  bubble?: boolean;               // fire events\n  control?: FormControl;          // The form control. If not passed one will be created.\n  disabled?: boolean;             // Mark as readonly.\n  displayErrors?: boolean;        // If Error messages should be displayed.\n  empty?: 'ConvertEmptyToNull' | 'ConvertEmptyToZero';\n  facade?: boolean;               // Sets a flag that says this fieldItems really does not exist in the backend, and should not patch to the api\n  helpText?: string;            // On hover helper text.\n  id?: number | string;           // A number that will be included in the events so you know which field it came from.\n  label?: string;                 // Input label. A label is optional, checkbox will center inside the container without a label\n  labelPosition?: string;          // Label can be positioned to be 'before' or 'after' the checkbox. Default is 'after'\n  metadata?: object;              // Array of objects. To be passed back on the event emitter and included in a patch if desired.\n  name?: string;\n  noInitialValue?:boolean;                                // Set to true to always have an empty value on load\n  patch?: FieldItemPatchInterface;         // If field should be auto-patched.\n  tabOnEnter?:boolean;\n  padding?: string;               // padding adjustment\n  session?: boolean;                // If field value change should be stored to core entity\n  sessionPath?: string;                // If session path if not stored on root entity\n  textOverflow?:'wrap' | 'ellipsis';   // Set the text overflow behavior, default wrap\n  tooltip?: string;\n  validators?: Array<Validators>; // Array of Validators.\n  value?: boolean | number | string;        // Initial value.\n\n}\n\n\nexport class SwitchConfig implements SetControl {\n  bubble = false;\n  control: FormControl;\n  disabled = false;\n  displayErrors = true;\n  empty?: 'ConvertEmptyToNull' | 'ConvertEmptyToZero';\n  facade = false;\n  helpText = '';\n  id: number | string;\n  label = '';\n  labelPosition = 'after';\n  message = '';\n  metadata;\n  noInitialValue = false;\n  name? = 'name';\n  patch: FieldItemPatchInterface;\n  padding = '0';\n  session?: boolean;\n  sessionPath?: string;\n  setValue;\n  switchRef;\n  triggerOnChange;\n  tooltip: string;\n  toolTipDirection = 'right';\n  tabOnEnter = false;\n  textOverflow = 'wrap';\n  validators;\n  value: boolean | number | string = false;\n\n\n  constructor(params?: SwitchConfigInterface){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n    this.value = +this.value === 1 ? true : false;\n    this.labelPosition = [ 'before', 'after' ].indexOf(this.labelPosition) >= 0 ? this.labelPosition : 'after';\n    if( this.label ){\n      if( this.labelPosition === 'after' ){\n        this.toolTipDirection = 'right';\n      }\n    }else{\n      this.toolTipDirection = 'above';\n    }\n    if( !this.patch ) this.patch = { field: '', duration: 750, path: '', disabled: false , businessId: 0 };\n    if( !this.disabled ) this.disabled = false;\n    if( this.patch.displayIndicator !== false ) this.patch.displayIndicator = true;\n    if( !this.control ) this.setControl();\n  }\n\n\n  setControl(){\n    this.control = this.disabled === true ? new FormControl({\n      value: this.value,\n      disabled: this.disabled\n    }) : new FormControl(this.value, ( this.validators ? this.validators : [] ));\n  }\n\n}\n\n","import { FormControl } from '@angular/forms';\nimport { FieldItemPatchInterface } from '../../../../pop-common.model';\nimport { SetControl } from '../../../../pop-common-dom.models';\nimport { NumberConfig } from '../pop-number/number-config.model';\nimport { SwitchConfig } from '../pop-switch/switch-config.model';\n\n\nexport interface MinMaxConfigInterface {\n  allowNegative?: boolean;\n  bubble?: boolean;               // fire events\n  disabled?: boolean;             // Mark as disabled.\n  displayErrors?: boolean;        // If Error messages should be displayed.\n  helpText?: string;            // On hover helper text.\n  id?: string | number;           // A number that will be included in the events so you know which field it came from.\n  facade?: boolean;\n   \n  label?: string;                 // Input label.\n  limit?: number;             // Field multiple_max length.\n  minValue?: number;\n  maxValue?: number;\n\n  minReadonly?: boolean;\n  maxReadonly?: boolean;\n\n  min?: number;\n  max?: number;\n\n\n  minRequired?: boolean;\n  maxRequired?: boolean;\n\n \n  minColumn?: string;              // Override the patch name for multiple_min\n  maxColumn?: string;              // Override the patch name for multiple_max\n  minimal?: boolean;\n  minLabel?: string;              // Override the patch name for multiple_min\n  maxLabel?: string;              // Override the patch name for multiple_max\n  metadata?: object;              // Array of objects. To be passed back on the event emitter and included in a patch if desired.\n  patch?: FieldItemPatchInterface; // If field should be auto-patched.\n  session?: boolean;                // If field value change should be stored to core entity\n  sessionPath?: string;            // If session path if not stored on root entity\n  tooltip?: string;               // Tooltip for information to show when input is focused\n}\n\n\nexport class MinMaxConfig implements SetControl {\n  // Defaults\n\n  allowNegative? = false;\n  bubble = false;\n  control;\n\n  disabled = false;\n  facade = false;\n  helpText = '';\n  id = '';\n  isMinConfig: SwitchConfig;\n  isMaxConfig: SwitchConfig;\n  label = 'Min/Max';\n  limit = 100;\n  minValue = 1;\n  maxValue = 10;\n\n  min = 1;\n  max = 10;\n\n  minColumn = 'min';\n  maxColumn = 'max';\n\n  minReadonly = false;\n  maxReadonly = false;\n\n  minConfig: NumberConfig;\n\n  minRequired? = false;\n\n  maxConfig: NumberConfig;\n\n  maxRequired? = false;\n\n  minDefaultValue? = 1;\n  maxDefaultValue? = 1;\n\n  minLabel = 'Minimum';\n  maxLabel = 'Maximum';\n\n  minimal: false;\n  metadata;\n  message = '';\n  name;\n  pattern;\n  patch: FieldItemPatchInterface;\n  session?: boolean;\n  sessionPath?: string;\n  showTooltip = false;\n  tooltip = '';\n  triggerOnChange;\n  transformation;\n  validators;\n  value = '';\n\n  // No Defaults\n\n\n\n\n\n\n\n  constructor(params?: MinMaxConfigInterface){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n    if( !this.patch ) this.patch = { field: '', duration: 750, path: '', disabled: false };\n    if( this.patch.displayIndicator !== false ) this.patch.displayIndicator = true;\n\n    // const maxOptions = [];\n    // let maxLimit = this.limit;\n    // while( maxLimit ){\n    //   maxOptions.push({ value: maxLimit, name: maxLimit, sort: maxLimit });\n    //   maxLimit--;\n    // }\n\n    if( this.limit && this.maxValue > this.limit ) this.maxValue = +this.limit;\n\n    this.isMaxConfig = new SwitchConfig({\n      label: this.maxLabel,\n      value: +this.maxValue ? true : this.maxRequired ? true : false,\n      disabled: this.maxRequired ? true : false,\n      bubble: true,\n      facade: false,\n      labelPosition: 'after',\n    });\n\n    this.maxConfig = new NumberConfig({\n      label: null,\n      value: +this.maxValue,\n      min: this.min,\n      max: this.max,\n      readonly: this.maxReadonly,\n      facade: true,\n      minimal: true,\n      bubble: true,\n    });\n\n    if( this.minValue > this.maxValue ) this.minValue = this.maxValue;\n\n    // let minLimit = this.maxValue;\n    // const minOptions = [];\n    // while( minLimit ){\n    //   minOptions.push({ value: minLimit, name: minLimit, sort: minLimit });\n    //   minLimit--;\n    // }\n\n\n    this.isMinConfig = new SwitchConfig({\n      label: this.minLabel,\n      value: +this.minValue ? true : this.minRequired ? true : false,\n      disabled: this.minRequired ? true : false,\n      bubble: true,\n      facade: false,\n      labelPosition: 'after',\n    });\n\n    this.minConfig = new NumberConfig({\n      label: null,\n      value: +this.minValue,\n      min: this.min,\n      max: this.max,\n      readonly: this.minReadonly,\n      facade: true,\n      minimal: true,\n      bubble: true,\n    });\n\n\n    if( !this.control ) this.setControl();\n\n  }\n\n\n  setControl(){\n    this.control = ( this.disabled ? new FormControl({\n      value: { min: this.minValue, max: this.maxValue },\n      disabled: true\n    }) : new FormControl(this.value, ( this.validators ? this.validators : [] )) );\n  }\n}\n","import { FormControl, Validators } from '@angular/forms';\nimport { FieldItemOption, FieldItemOptions, FieldItemPatchInterface } from '../../../../pop-common.model';\nimport { SetControl } from '../../../../pop-common-dom.models';\n\n\nexport interface RadioConfigInterface {\n  bubble?: boolean;               // fire events\n  control?: FormControl;          // The form control. If not passed one will be created.\n  disabled?: boolean;             // Mark as readonly.\n  displayErrors?: boolean;        // If Error messages should be displayed.\n  emptyOption?: FieldItemOption;      // Sets an empty or a null option value as the first option\n  facade?: boolean;               // Sets a flag that says this fieldItems really does not exist in the backend, and should not patch to the api\n  helpText?: string;            // On hover helper text.\n  id?: number | string;           // A number that will be included in the events so you know which field it came from.\n  label?: string;                 // Input label.\n  labelPosition?: string;         // 'above' (default) 'inline' (Left of selection)\n  layout?: string;                // Default to 'row'. Set to 'name' to display options vertically\n  metadata?: object;              // Array of objects. To be passed back on the event emitter and included in a patch if desired.\n  name?: string;              // the entityId field name\n  noInitialValue?: boolean;        // Set to true to always have an empty value on load\n  options?: FieldItemOptions;        // Array of FieldOptions\n  patch?: FieldItemPatchInterface;         // If field should be auto-patched.\n  session?: boolean;                // If field value change should be stored to core entity\n  sessionPath?: string;                // If session path if not stored on root entity\n  sort?: boolean;                 //  Set to true if you want options to be sorted in priority of sort_order, name\n  validators?: Array<Validators>; // Array of Validators.\n  value?: boolean | string | number;        // Initial value.\n}\n\n\nexport class RadioConfig implements SetControl {\n  bubble = false;\n  control: FormControl;\n  clearMessage;\n  disabled = false;\n  displayErrors = true;\n  facade = false;\n  helpText = '';\n  id: number | string;\n  label = '';\n  labelPosition = 'above';\n  layout = 'row';\n  message = '';\n  metadata;\n  noInitialValue = false;\n  name = 'name';\n  options: FieldItemOptions;\n  patch: FieldItemPatchInterface;\n  reset? = false;\n  session?: boolean;\n  sessionPath?: string;\n  sort? = false;\n  triggerOnChange;\n  validators;\n  value?: boolean | string | number = '';\n\n\n  constructor( params?: RadioConfigInterface ){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n    if( this.sort && this.options.values.length > 1 ){\n      if( typeof this.options.values[ 0 ].sort_order !== 'undefined' ){\n        this.options.values.sort( ( a, b ) => {\n          if( a.sort_order < b.sort_order ) return -1;\n          if( a.sort_order > b.sort_order ) return 1;\n          return 0;\n        } );\n      }else{\n        this.options.values.sort( ( a, b ) => {\n          if( a.name < b.name ) return -1;\n          if( a.name > b.name ) return 1;\n          return 0;\n        } );\n      }\n    }\n    if( this.layout !== 'column' ) this.layout = 'row';\n\n    if( !this.patch ) this.patch = { field: '', duration: 750, path: '', disabled: false, businessId: 0 };\n    if( !this.disabled ) this.disabled = false;\n    if( this.patch.displayIndicator !== false ) this.patch.displayIndicator = true;\n    if( this.noInitialValue ) this.value = '';\n    if( !this.control ) this.setControl();\n  }\n\n\n  setControl(){\n    if( !this.control ){\n      this.control = ( this.disabled === true\n        ? new FormControl( {\n          value: this.value,\n          disabled: this.disabled\n        } )\n        : new FormControl( this.value, ( this.validators ? this.validators : [] ) ) );\n    }\n  }\n}\n","import { FormControl, Validators } from '@angular/forms';\nimport { FieldItemPatchInterface } from '../../../../pop-common.model';\nimport { SetControl } from '../../../../pop-common-dom.models';\n\n\nexport interface TextareaConfigInterface {\n  autoSize?: boolean;           // Auto Adjust the height to fit content\n  bubble?: boolean;               // fire events\n  column?: string;              // the entityId field name\n  control?: FormControl;          // The form control. If not passed one will be created.\n  displayErrors?: boolean;        // If Error messages should be displayed.\n  disabled?: boolean;             // Mark as disabled.\n  facade?: boolean;               // Sets a flag that says this fieldItems really does not exist in the backend, and should not patch to the api\n  helpText?: string;            // On hover helper text.\n  height?: number;                // Set a fixed height for the text area otherwise container will auto expand\n  hint?: boolean;                 // If remaining of available characters should be displayed\n  id?: string | number;           // A number that will be included in the events so you know which field it came from.\n  label?: string;                 // Input label.\n  maxHeight?: number;                // Set a fixed height for the text area otherwise container will auto expand\n  maxlength?: number;             // Field multiple_max length.\n  metadata?: object;              // Array of objects. To be passed back on the event emitter and included in a patch if desired.\n  name?: string;\n  noInitialValue?:boolean;        // Set to true to always have an empty value on load\n  patch?: FieldItemPatchInterface;         // If field should be auto-patched.\n  readonly?: boolean;             // Mark as readonly.\n  session?: boolean;                // If field value change should be stored to core entity\n  sessionPath?: string;                // If session path if not stored on root entity\n  tooltip?: string;               // Tooltip for information to show when input is focused\n  validators?: Array<Validators>; // Array of Validators.\n  value?: boolean | string | number;        // Initial value.\n}\n\n\nexport class TextareaConfig implements SetControl{\n  autoSize = false;\n  bubble = false;\n  control: FormControl;\n  _disabled = false;\n  displayErrors = true;\n  facade = false;\n  helpText = '';\n  height = 0;\n  maxHeight = null;\n  hint = false;\n  id: number | string;\n  label: string;\n  message = '';\n  metadata;\n  maxlength = 1024;\n  name = 'name';\n  noInitialValue = false;\n  patch:FieldItemPatchInterface;\n  readonly = false;\n  session?: boolean;\n  sessionPath?: string;\n  showTooltip = false;\n  tabOnEnter = false;\n  tooltip = '';\n  validators;\n  value:boolean | string | number = '';\n\n\n  constructor(params?: TextareaConfigInterface){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n    // if( this.height && !isNaN(Number(this.height)) ) this.height = this.height + 'px';\n    if( !this.patch ) this.patch = { field: '', duration: 750, path: '', disabled: false , businessId: 0 };\n    if( this.patch.displayIndicator !== false ) this.patch.displayIndicator = true;\n    if( this.noInitialValue) this.value = '';\n    if( !this.control ) this.setControl();\n  }\n\n  setControl(){\n    this.control = ( this.disabled ? new FormControl({\n      value: this.value,\n      disabled: true\n    }) : new FormControl(this.value, ( this.validators ? this.validators : [] )) );\n  }\n\n  get disabled():boolean{\n    return this._disabled;\n  }\n\n  set disabled(value){\n    this._disabled = value;\n    if(value === true){\n      this.control.disable();\n    }else if (value === false){\n      this.control.enable();\n    }\n  }\n\n}\n","import { FormControl } from '@angular/forms';\nimport { FieldItemPatchInterface } from '../../../../pop-common.model';\nimport { SetControl } from '../../../../pop-common-dom.models';\n\n\nexport interface LabelConfigInterface {\n  button?: boolean;       // Turn text/icon into a route method\n  bubble?: boolean;\n  border?: boolean;\n  copyLabel?: boolean;         // The label text has a click to copy\n  copyLabelDisplay?: string;  // The label that should go with the label copy button\n  copyLabelBody?: string | number;    // The value that be copied when the label copy button is clicked\n  copyLabelDisplayTransformation?: any; // The transformation that should happen to the copyLabelDisplay\n  copyLabelBodyTransformation?: any; // The transformation that should happen to the copyLabelBody\n  copyValue?: boolean;         // The value text has a click to copy\n  copyValueDisplay?: string;  // The value that should go with the value copy button\n  copyValueBody?: string | number;    // The value that be copied when the label value button is clicked\n  copyValueDisplayTransformation?: any; // The transformation that should happen to the copyLabelDisplay\n  copyValueBodyTransformation?: any; // The transformation that should happen to the copyLabelBody\n  helpText?: string;  // Helper Text on the right side of label\n  icon?: string;        // Use an icon instead of text. Pass in icon string as Materials(icon_key) or Pop(A)\n  labelButton?: boolean;  // Display the label with a button\n  link?: boolean;       // Turn text/icon into a route method\n  label: string;          // The label Text on the left side\n  metadata?: object;    // Desired Metadata\n  name?: string;    // the entityId field name\n  patch?: FieldItemPatchInterface; // If field should be auto-patched.\n  route?: string;       // a router url path\n  subLabel?: string;\n  subValue?: string;\n  textOverflow?: 'wrap' | 'ellipsis';   // Set the text overflow behavior, default wrap\n  truncate?: number;    // Truncate the text a character length\n  tooltip?: string;     // Tooltip on the left side of the text/icon\n  valueButton?: boolean;  // Display the value with a button\n  valueButtonDisplay?: string;\n  valueButtonDisplayTransformation?: any; // The transformation that should happen to the valueButtonDisplay\n  valueButtonDisabled?: boolean; // The transformation that should happen to the valueButtonDisplay\n  value?: string | number; // The text on the right side\n\n}\n\n\nexport class LabelConfig implements SetControl {\n  bubble = false;\n  button = false;\n  border = false;\n  control;\n  copyValue = false;\n  copyValueDisplay?: string;\n  copyValueBody?: string | number;\n  copyValueDisplayTransformation?: string;\n  copyValueBodyTransformation?: string;\n  copyLabel = false;\n  copyLabelDisplay?: string;\n  copyLabelBody?: string | number;\n  copyLabelDisplayTransformation?: string;\n  copyLabelBodyTransformation?: string;\n  html = 'label';\n  helpText = '';\n  icon;\n  iconType = 'mat';\n  name = 'name';\n  label = 'Label';\n  labelButton?: boolean;\n  link = false;\n  metadata;\n  patch: FieldItemPatchInterface;\n  route;\n  subLabel = '';\n  subValue = '';\n  tooltip = '';\n  textOverflow?: 'wrap' | 'ellipsis' = 'wrap';\n  truncate = 0;\n  value = '';\n  valueButton = false;\n  valueButtonDisplay?: string;\n  valueButtonDisplayTransformation?: any;\n  valueButtonDisabled = false;\n \n\n\n\n  constructor( params?: LabelConfigInterface ){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n    if( this.link || this.route ) this.html = 'link';\n    if( !this.patch ) this.patch = { field: '', duration: 750, path: '', disabled: false };\n    if( this.patch.displayIndicator !== false ) this.patch.displayIndicator = true;\n    if( this.icon ){\n      if( this.icon.length === 1 ){\n        this.icon = this.icon.toUpperCase();\n        this.iconType = 'sw';\n      }\n    }\n  }\n\n\n  setControl(){\n    // meet requirement\n  }\n}\n\n\nexport class MetadataConfig {\n  bubble = false;\n  value: string | number | any[] = '';\n  control: FormControl;\n  name;\n\n\n  constructor( name: string, value: string | number | any[] ){\n    this.name = name;\n    this.value = value;\n    this.control = new FormControl( value );\n  }\n}\n","import { FormControl, Validators } from '@angular/forms';\nimport { FieldItemPatchInterface } from '../../../../pop-common.model';\nimport { SetControl } from '../../../../pop-common-dom.models';\n\n\nexport interface ButtonConfigInterface {\n  bubble?: boolean;                         // fire events\n  color?: 'accent' | 'primary' | 'default'; // Color of Icon\n  conceal?: boolean;                        // Mask the button as dots\n  control?: FormControl;                    // The form control. If not passed one will be created.\n  disabled?: boolean;                       // Mark as disabled.\n  displayErrors?: boolean;                  // If Error messages should be displayed.\n  event?: string;                             // The name you want to give the event that is fired on click\n  helpText?: string;                     // On hover helper text.\n  hidden?: boolean;                         // Hide button.\n  icon?: string;                             // Angular material icon\n  iconColor?: 'accent' | 'primary' | 'default'; // Color of Icon\n  id?: string | number;                     // A number that will be included in the events so you know which field it came from.\n  label?: string;                           // Input label.\n  metadata?: object;                        // Array of objects. To be passed back on the event emitter and included in a patch if desired.\n  name?: string;                        // the entityId field name\n  patch?: FieldItemPatchInterface;          // If field should be auto-patched.\n  radius?: number;                          // Radius of button\n  size?: number;                             // Width and height of box\n  text?: number;                             // Width and height of box\n  tooltip?: string;                         // Tooltip for information to show when input is focused\n  type?: 'mat-button' | 'mat-raised-button' | 'mat-flat-button'; // HTML input type.\n  validators?: Array<Validators>;           // Array of Validators.\n  value?: string | number;                  // Initial value.\n  width?: number;                           // Width of the value and icon\n}\n\n\nexport class ButtonConfig implements SetControl {\n  // Defaults\n  control;\n  color: 'accent' | 'primary' | 'default' = 'default';\n  bubble = false;\n  displayErrors = true;\n  disabled = false;\n  event? = 'click';\n  helpText = '';\n  hidden = false;\n  icon = 'help_outline';\n  iconColor: 'accent' | 'primary' | 'default' = 'accent';\n  id = '';\n  label = '';\n  message = '';\n  metadata;\n  name = 'name';\n  patch;\n  radius = 2;\n  size = 35;\n  showTooltip = false;\n  text = 26;\n  tooltip = '';\n  type = 'mat-button';\n\n  // No Defaults\n\n  transformation;\n  validators;\n\n  triggerOnChange;\n  value = 'Button';\n  width = null;\n\n\n  constructor(params?: ButtonConfigInterface){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n    if( !this.patch ) this.patch = { field: '', path: '', disabled: false };\n    if( this.patch.displayIndicator !== false ) this.patch.displayIndicator = true;\n    if( this.size < 10 ) this.size = 10;\n    if( !this.control ) this.setControl();\n  }\n\n\n  setControl(){\n    this.control = ( this.disabled ? new FormControl({\n      value: this.value,\n      disabled: true\n    }) : new FormControl(this.value, ( this.validators ? this.validators : [] )) );\n  }\n}\n","import { Dictionary, FieldCustomSettingInterface } from '../../../../pop-common.model';\n\nexport const EmailFieldSetting = <Dictionary<FieldCustomSettingInterface>>{\n  unique_label: {\n    name: 'unique_label',\n    type: 'boolean',\n    defaultValue: true,\n  },\n  disabled: {\n    name: 'disabled',\n    type: 'boolean',\n    item: 'address',\n    defaultValue: false,\n  },\n  address_pattern: {\n    name: 'address_pattern',\n    item: 'address',\n    type: 'model',\n    model: 'pattern',\n    value: 'Email',\n  },\n  make_primary: {\n    name: 'make_primary',\n    type: 'fixed',\n    defaultValue: false,\n  },\n\n  email_primary: {\n    name: 'email_primary',\n    type: 'trait',\n    icon: 'email',\n    defaultValue: false,\n  },\n};\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { FieldParamInterface, PopBaseEventInterface } from '../../../../../../pop-common.model';\nimport { SwitchConfig } from '../../../../../base/pop-field-item/pop-switch/switch-config.model';\nimport { IsDefined} from '../../../../../../pop-common-utility';\n\n\n@Component({\n  selector: 'lib-field-switch-param',\n  template: `\n    <lib-pop-switch (events)=\"events.emit($event);\" [config]=param></lib-pop-switch>`,\n})\nexport class FieldSwitchParamComponent implements OnInit {\n  @Input() config: FieldParamInterface;\n  @Output() events: EventEmitter<PopBaseEventInterface> = new EventEmitter<PopBaseEventInterface>();\n\n  param: SwitchConfig;\n\n\n  ngOnInit(){\n    this.param = new SwitchConfig({\n      name: this.config.name,\n      label: this.config.label,\n      labelPosition: 'after',\n      value: IsDefined(this.config.value) ? this.config.value : this.config.defaultValue,\n      patch: this.config.patch,\n      facade: this.config.facade,\n      metadata: this.config.metadata ? this.config.metadata : {}\n    });\n  }\n}\n","import { Dictionary, FieldCustomSettingInterface } from '../../../../pop-common.model';\nimport {FieldSwitchParamComponent} from \"../../pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-switch-param.component\";\n\nexport const AddressFieldSetting = <Dictionary<FieldCustomSettingInterface>>{\n  show_name: null,\n  unique_label: {\n    name: 'unique_label',\n    type: 'boolean',\n    defaultValue: true,\n  },\n  primary_can_text: {\n    name: 'primary_can_text',\n    label: 'Primary Text',\n    type: 'primary',\n    defaultValue: true,\n  },\n  primary_can_call: {\n    name: 'primary_can_call',\n    label: 'Primary Call',\n    type: 'primary',\n    defaultValue: true,\n  },\n  make_primary: {\n    name: 'make_primary',\n    type: 'fixed',\n    defaultValue: false,\n  },\n  shipping_primary: {\n    name: 'shipping_primary',\n    type: 'trait',\n    icon: 'local_shipping',\n    defaultValue: false,\n  },\n  billing_primary: {\n    name: 'billing_primary',\n    type: 'trait',\n    icon: 'local_post_office',\n    component: FieldSwitchParamComponent,\n    defaultValue: false,\n  },\n  allow_canada: {\n    name: 'allow_canada',\n    type: 'boolean',\n    item: 'zip',\n    defaultValue: false,\n  },\n  auto_fill: {\n    name: 'auto_fill',\n    type: 'boolean',\n    item: 'zip',\n    component: FieldSwitchParamComponent,\n    defaultValue: true,\n  },\n};\n","import { Dictionary, FieldCustomSettingInterface, FieldItemOptions } from '../../../../pop-common.model';\n\nexport const PhoneFieldSetting = <Dictionary<FieldCustomSettingInterface>>{\n  unique_label: {\n    name: 'unique_label',\n    type: 'boolean',\n    defaultValue: true,\n  },\n\n  make_primary: {\n    name: 'make_primary',\n    type: 'fixed',\n    defaultValue: false,\n  },\n\n  text_primary: {\n    name: 'text_primary',\n    type: 'trait',\n    icon: 'sms',\n    defaultValue: false,\n  },\n\n  call_primary: {\n    name: 'call_primary',\n    type: 'trait',\n    icon: 'call',\n    defaultValue: false,\n  },\n};\n","import { Dictionary, FieldCustomSettingInterface } from '../../../../pop-common.model';\n\nexport const NameFieldSetting = <Dictionary<FieldCustomSettingInterface>>{\n  unique_label: {\n    name: 'unique_label',\n    type: 'boolean',\n    defaultValue: true,\n  },\n  disabled: {\n    name: 'disabled',\n    type: 'boolean',\n    defaultValue: false,\n  },\n  make_primary: {\n    name: 'make_primary',\n    type: 'fixed',\n    defaultValue: false,\n  },\n  name_primary: {\n    name: 'name_primary',\n    type: 'trait',\n    icon: 'api',\n    defaultValue: false,\n  },\n};\n","import { Dictionary, FieldCustomSettingInterface } from '../../../../pop-common.model';\n\nexport const InputFieldSetting = <Dictionary<FieldCustomSettingInterface>>{\n  unique_label: {\n    name: 'unique_label',\n    type: 'boolean',\n    defaultValue: true,\n  },\n  transformation: {\n    name: 'transformation',\n    type: 'transformation',\n    item: 'value',\n    defaultValue: '',\n    options: {\n      empty: { value: '', name: '--- Select One ---' },\n      values: [\n        { value: 'toTitleCase', name: 'Title Case' },\n        { value: 'toUpperCase', name: 'Upper Case' },\n        { value: 'toLowerCase', name: 'Lower Case' },\n        { value: 'toCurrency', name: 'Currency' },\n        { value: 'date', name: 'Date' },\n      ]\n    }\n  },\n};\n","import { Dictionary, FieldCustomSettingInterface } from '../../../../pop-common.model';\n\nexport const RadioFieldSetting = <Dictionary<FieldCustomSettingInterface>>{\n  unique_label: {\n    name: 'unique_label',\n    type: 'boolean',\n    defaultValue: true,\n  },\n};\n","import { Dictionary, FieldCustomSettingInterface } from '../../../../pop-common.model';\n\nexport const SwitchFieldSetting = <Dictionary<FieldCustomSettingInterface>>{\n  unique_label: {\n    name: 'unique_label',\n    type: 'boolean',\n    defaultValue: true,\n  },\n};\n","import { Dictionary, FieldCustomSettingInterface } from '../../../../pop-common.model';\n\nexport const SelectFieldSetting = <Dictionary<FieldCustomSettingInterface>>{\n  unique_label: {\n    name: 'unique_label',\n    type: 'boolean',\n    defaultValue: true,\n  },\n};\n","import { Dictionary, FieldCustomSettingInterface } from '../../../../pop-common.model';\n\nexport const CheckboxFieldSetting = <Dictionary<FieldCustomSettingInterface>>{\n  unique_label: {\n    name: 'unique_label',\n    type: 'boolean',\n    defaultValue: true,\n  },\n};\n","import { Dictionary, FieldCustomSettingInterface } from '../../../../pop-common.model';\n\nexport const TextareaFieldSetting = <Dictionary<FieldCustomSettingInterface>>{\n  disabled: {\n    name: 'disabled',\n    type: 'boolean',\n    item: 'address',\n    defaultValue: false,\n  },\n};\n","import { FormControl, ValidatorFn } from '@angular/forms';\nimport { FieldItemOption, FieldItemOptions, FieldItemPatchInterface } from '../../../../pop-common.model';\nimport { SetControl } from '../../../../pop-common-dom.models';\nimport { DynamicSort, IsArray, IsNumber } from '../../../../pop-common-utility';\n\n\nexport interface SelectFilterGroupInterface {\n  label: string;                   // Input label.\n  options: FieldItemOptions;          // Array of FieldOptions\n  all?: boolean;\n  indeterminate?: boolean;\n  groupFk: number;\n  visible?: number; // the count of  visible options within the group\n  open?: boolean;\n  selected?: number; // the count of selected visible options within the group\n}\n\n\nexport interface SelectFilterConfigInterface {\n  allLabel?: string;                                      // Set string to as label to indicate that all options are selected\n  all?: boolean;                                          // Set boolean to indicate that all options are selected\n  allValue?: boolean | string | number | null | any[];    // A custom value for when all options are selected\n  allowAll?: boolean;                                     // Set boolean to indicate whether to set check all option\n  bubble?: boolean;                                       // fire events\n  checkboxPosition?: string;                             // The position of the checkbox for a multiple selection.\n  collapsed?: boolean;                                    // Set to true on massive sets to show only option headers on render\n  control?: FormControl;                                  // The form control. If not passed one will be created.\n  disabled?: boolean;                                     // Mark as readonly.\n  displayErrors?: boolean;                                // If Error messages should be displayed.\n  emptyLabel?: string;                                    // Set string as label to when no options are selected\n  emptyValue?: boolean | string | number | null | any[];  // A custom value for when all options are unselected\n  float?: boolean;\n  filter?: boolean;                                       // Search filter.\n  facade?: boolean;                                       // Sets a flag that says this fieldItems really does not exist in the backend, and just pretend to hit the api\n  helpText?: string;                                   // On hover helper text.\n  height?: number;                                        // List height.\n  id?: number | string;                                   // A number that will be included in the events so you know which field it came from.\n  levelGap?: number;\n  label?: string;                                         // Input label.\n  metadata?: object;                                  // Array of objects. To be passed back on the event emitter and included in a patch if desired.\n  multiple?: boolean;                                     // If multiple is needed.\n  name?: string;                                      // the entityId field name\n  noInitialValue?:boolean;                                // Set to true to always have an empty value on load\n  options?: FieldItemOptions;                                // Array of FieldOptions\n  patch?: FieldItemPatchInterface;                                 // If field should be auto-patched.\n  patchGroupFk?: boolean;                                 // If value should contain groupFk, 3:12,4:12,5:13 <value:groupFk>\n  session?: boolean;                                      // If field value change should be stored to core entity\n  sessionPath?: string;                                  // If session path if not stored on root entity\n  sort?: boolean;                                         //  Set to true if you want options to be sorted in priority of sort_order, name\n  position?: 'above' | 'below';                           // list position\n  value?: Array<number | string> | number | string;                         // Initial value.\n  validators?: Array<ValidatorFn>;                        // Array of Validators.\n}\n\n\nexport class SelectFilterConfig implements SetControl {\n  allLabel = 'All';\n  all = false;\n  allValue;\n  allowAll = true;\n  bubble = false;\n  displayErrors = true;\n  collapsed = false;\n  checkboxPosition = 'before';\n  control: FormControl;\n  defaultHeight;\n  defaultMinHeight = 1;\n  disabled: boolean;\n  emptyValue;\n  emptyLabel;\n  facade = false;\n  float? = false;\n  filter = true;\n  groups: SelectFilterGroupInterface[];\n  helpText = '';\n  height = 200;\n  id: number | string;\n  label: string;\n  levelGap = 35;\n  message: string;\n  metadata;\n  minHeight = 50;\n  multiple = false;\n  name = 'name';\n  noInitialValue = false;\n  offset = null;\n  offsetSession = null;\n  options?: FieldItemOptions;\n  patch: FieldItemPatchInterface;\n  patchGroupFk = false;\n  position;\n  session?: boolean;\n  sessionPath?: string;\n  sort: boolean;\n  selectedOptions: any[];\n  strVal = '';\n  value?: Array<number | string> | number | string;\n  validators: Array<ValidatorFn>;\n  route;\n\n\n  constructor( params?: SelectFilterConfigInterface ){\n    this.setDefaultValues();\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n\n    this.value = this.multiple ? ( Array.isArray( this.value ) ? this.value : [] ) : ( +this.value ? this.value : null );\n\n    if( this.options.values.length > 1 ){\n      if( this.sort ){\n        if( typeof this.options.values[ 0 ].sort_order !== 'undefined' ){\n          this.options.values.sort( ( a, b ) => {\n            if( a.sort_order < b.sort_order ) return -1;\n            if( a.sort_order > b.sort_order ) return 1;\n            return 0;\n          } );\n        }else{\n          this.options.values.sort( ( a, b ) => {\n            if( a.name < b.name ) return -1;\n            if( a.name > b.name ) return 1;\n            return 0;\n          } );\n        }\n      }\n\n      if( this.options.values[ 0 ].group ){\n        this.groups = this.getOptionGroups();\n        if( this.groups.length < 2 ){\n          this.allowAll = false;\n        }\n      }else{\n        const str: string[] = [];\n        this.selectedOptions = [];\n        this.options.values.map( ( option ) => {\n          if( this.all ){\n            option.selected = true;\n            this.selectedOptions.push( option.value );\n          }else{\n            option.selected = IsArray( this.value ) ? ( ( <any[]>this.value ).includes( option.value ) ? true : false ) : false;\n            if( option.selected ){\n              this.selectedOptions.push( option.value );\n              str.push( option.name );\n            }\n          }\n          option.level = this.levelGap * option.level;\n        } );\n        const defaultGroup = {\n          label: '',\n          options: this.options,\n          groupFk: 0,\n          open: true,\n        };\n        this.groups = [ defaultGroup ];\n      }\n    }\n    if( !this.levelGap ) this.levelGap = 35;\n    this.defaultHeight = this.height;\n    this.all = IsArray( this.value ) ? ( this.options.values.length === ( <any[]>this.value ).length ) : false;\n\n    if( !this.position ) this.position = 'below';\n    if( !this.patch ) this.patch = { field: '', duration: 750, path: '', disabled: false };\n    if( this.patch.displayIndicator !== false ) this.patch.displayIndicator = true;\n    if( this.groups.length === 1 ) this.collapsed = false;\n    if( this.noInitialValue ) this.value = this.multiple ? [] : '';\n    if( !this.control ) this.setControl();\n  }\n\n\n  setControl(){\n    this.control = ( this.disabled ? new FormControl( {\n      value: this.value,\n      disabled: true\n    } ) : new FormControl( this.value, ( this.validators ? this.validators : [] ) ) );\n  }\n\n\n  private setDefaultValues(): void{\n    // this.helpText = '';\n    this.label = '';\n    this.message = '';\n    this.options = { values: [] };\n    this.disabled = false;\n    this.sort = false;\n    // this.showTooltip = false;\n    // this.tooltip = '';\n  }\n\n\n  private getOptionGroups(): SelectFilterGroupInterface[]{\n    this.selectedOptions = [];\n\n    const groups = {};\n    const list = [];\n    let defaultGroup = this.options.values[ 0 ].group;\n    this.options.values.map( ( option, index ) => {\n      if( typeof option.level === 'undefined' ) option.level = 0;\n      option.level = this.levelGap * option.level;\n      if( !option.group ) option.group = defaultGroup;\n      if( option.group in groups === false ){\n        groups[ option.group ] = <SelectFilterGroupInterface> {\n          label: option.group,\n          groupFk: option.groupFk,\n          options: {\n            values: [],\n            filtered: []\n          },\n          all: false,\n          open: true,\n          indeterminate: false,\n        };\n        defaultGroup = option.group;\n      }\n      if( this.all ){\n        option.selected = true;\n        this.selectedOptions.push( option.value );\n      }else{\n        option.selected = IsArray(this.value) ? (<any[]>this.value).includes( option.value ): false;\n        if( option.selected ){\n          this.selectedOptions.push( option.value );\n        }\n      }\n      groups[ option.group ].options.values.push( option );\n    } );\n    const count = Object.keys( groups ).length;\n    Object.keys( groups ).map( ( key ) => {\n      const group = groups[ key ];\n      // if(IsArray(group.options.values)){\n      //   // ToDo:: allow ordering by a sort order property\n      //   group.options.values = group.options.values.sort(DynamicSort('name'));\n      // }\n      if( count > 1 && this.collapsed ) group.open = false;\n      list.push( groups[ key ] );\n    } );\n    return list;\n  }\n\n\n  public resetSelection(): void{\n    this.selectedOptions = [];\n  }\n\n\n  public addSelectedOption( option: number ): void{\n    this.selectedOptions.push( option );\n  }\n}\n\n","import { AbstractControl, ValidatorFn } from '@angular/forms';\nimport { IsString } from '../pop-common-utility';\n\n// export class CustomValidators{\n\nexport function RegexPatterns( pattern ){\n  switch( pattern ){\n    case 'Alpha':\n      return { tester: /^[ a-zA-Z\\-\\_]+/g, replacer: /[^ a-zA-Z\\-\\_]+/g };\n    case 'AlphaNoSpace':\n      return { tester: /^[a-zA-Z]+/g, replacer: /[^a-zA-Z\\.\\-\\_]+/g };\n    case 'AlphaNoSpaceOnlyDash':\n      return { tester: /^[a-zA-Z]+/g, replacer: /[^a-zA-Z\\-]+/g };\n    case 'AlphaLowercaseNoSpace':\n      return { tester: /^[a-z]+/g, replacer: /[^a-z\\.\\-\\_]+/g };\n    case 'AlphaNumeric':\n      return { tester: /^[ a-zA-Z0-9\\.\\-\\_]+/g, replacer: /[^ a-zA-Z0-9\\.\\-\\_]+/g };\n    case 'AlphaNumericNoUnderscore':\n      return { tester: /^[ a-zA-Z0-9\\.\\-]+/g, replacer: /[^ a-zA-Z0-9\\.\\-]+/g };\n    case 'AlphaNumericNoSpace':\n      return { tester: /^[a-zA-Z0-9\\.\\-\\_]+/g, replacer: /[^a-zA-Z0-9\\.\\-\\_]+/g };\n    case 'NumericNoSpace':\n      return { tester: /^[0-9]+/g, replacer: /[^0-9]+/g };\n    case 'NoSpace':\n      return { tester: /[^ ]+/g, replacer: /[ ]+/g };\n    case 'Default':\n      return { tester: /^[a-zA-Z0-9\\/\\*\\?\\!\\%\\@\\$\\&\\,\\.\\-\\(\\) ]+/g, replacer: /[^a-zA-Z0-9\\/\\*\\?\\!\\%\\@\\$\\&\\,\\.\\-\\(\\) ]+/g };\n    case 'NumericWithSpace':\n      return { tester: /^[ 0-9]+/g, replacer: /[^ 0-9]+/g };\n    case 'Numeric':\n      return { tester: /^[0-9]+/g, replacer: /[^0-9]+/g };\n    case 'Phone':\n      return { tester: /@\"^[\\d-]+$\"/, replacer: /[^\\d-]+/g };\n    case 'Email':\n      return { tester: /^[^@]+@[a-zA-Z0-9._-]+\\\\.+[a-z._-]+$/, replacer: /[^@a-zA-Z0-9._-]+/g };\n    case 'Password':\n      return {\n        tester: /^(?=.*[A-Za-z])(?=.*\\d)(?=.*[$@$!%*#?&])[A-Za-z\\d$@$!%*#?&]{8,}$/,\n        replacer: /^(?=.*[A-Za-z])(?=.*\\d)(?=.*[$@$!%*#?&])[A-Za-z\\d$@$!%*#?&]{8,}$/\n      };\n    case 'Username':\n      return {\n        tester: /^\\S[a-zA-Z0-9._\\-]{2,}$/g,\n        replacer: /[^a-zA-Z0-9._\\-]+/g\n      };\n\n    case 'Url':\n      return {\n        tester: /https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)/,\n        replacer: /[^\\\\:a-zA-Z0-9._\\\\-\\\\/\\\\?\\\\=\\\\#\\\\&]+/g\n      };\n\n    case 'Zip':\n      return {\n        tester: /^(\\d{5}(-\\d{4})?|[A-Z]\\d[A-Z] *\\d[A-Z]\\d)$/,\n        replacer: /[^[0-9][A-Z][A-Z]$]+/g\n      };\n\n    // case 'NumericSigned': return '^-?[^0-9]+[0-9]';\n    // case 'float': return /[^.0-9]+/g;\n    // case 'float': return /^(.(?!\\d)|\\D)+/;\n    // case 'floatSigned': return '^-?[^0-9]+\\.?[0-9]';\n    default:\n      return { tester: /^[a-zA-Z0-9\\!\\%\\@\\$\\&\\.\\-\\(\\) ]+/g, replacer: /[^a-zA-Z0-9\\!\\%\\@\\$\\&\\.\\-\\(\\) ]+/g }; // default\n  }\n}\n\nexport function PatternValidation( pattern: string, response: 'value' | 'message' | 'test', value?: string ){\n\n  const regExPattern = RegexPatterns( pattern );\n\n  if( response === 'test' ){\n\n    return regExPattern.tester.test( value.trim() );\n\n  }else if( response === 'value' ){\n    if( typeof value !== 'string' ) value = '';\n    switch( pattern ){\n      case 'Alpha':\n        return value.replace( regExPattern.replacer, '' );\n      case 'AlphaNoSpace':\n        return value.replace( regExPattern.replacer, '' );\n      case 'AlphaNoSpaceOnlyDash':\n        return value.replace( regExPattern.replacer, '' );\n      case 'AlphaLowercaseNoSpace':\n        return value.replace( regExPattern.replacer, '' );\n      case 'AlphaNumeric':\n        return value.replace( regExPattern.replacer, '' );\n      case 'AlphaNumericNoUnderscore':\n        return value.replace( regExPattern.replacer, '' );\n      case 'AlphaNumericNoSpace':\n        return value.replace( regExPattern.replacer, '' );\n      case 'NoSpace':\n        return value.replace( regExPattern.replacer, '' );\n      case 'Numeric':\n        return value.replace( regExPattern.replacer, '' );\n      case 'NumericNoSpace':\n        return value.replace( regExPattern.replacer, '' );\n      case 'Phone':\n        return value.replace( regExPattern.replacer, '' );\n      case 'Email':\n        return value.replace( regExPattern.replacer, '' );\n      case 'Zip':\n        return value.replace( regExPattern.replacer, '' );\n      case 'Url':\n        return value.replace( regExPattern.replacer, '' );\n      default:\n        return value.replace( regExPattern.replacer, '' );\n    }\n\n  }else{\n\n    switch( pattern ){\n      case 'Alpha':\n        return 'Only letters are allowed.';\n      case 'AlphaNoSpace':\n        return 'Only letters are allowed.';\n      case 'AlphaLowercaseNoSpace':\n        return 'Only lowercase letters are allowed.';\n      case 'AlphaNumeric':\n        return 'Only letters and Numbers are allowed.';\n      case 'AlphaNumericNoUnderscore':\n        return 'Only letters and Numbers are allowed.';\n      case 'AlphaNumericNoSpace':\n        return 'Only letters and Numbers are allowed.';\n      case 'Blacklist':\n        return 'Not allowed';\n      case 'NoSpace':\n        return 'Spaces not allowed.';\n      case 'Numeric':\n        return 'Only numbers are allowed.';\n      case 'NumericNoSpace':\n        return 'Only numbers are allowed.';\n      case 'Phone':\n        return 'Invalid Phone.';\n      case 'Email':\n        return 'Invalid Email.';\n      case 'Password':\n        return 'Must contain a number, letter, special and be > 8 characters.';\n      case 'Username':\n        return 'Must contain only A-Z 0-9 . - _';\n      case 'Url':\n        return 'Must be a valid url.';\n      default:\n        return 'Invalid characters.';\n    }\n  }\n}\n\nexport function ValidateBlacklist( blacklist: string[] ): ValidatorFn{\n  return ( control: AbstractControl ): { alpha: { message: string | boolean } } | null => {\n    let forbidden = false;\n    for( const s of blacklist ){\n      if( s === control.value ){\n        forbidden = true;\n      }\n    }\n    return forbidden ? { alpha: { message: PatternValidation( 'Blacklist', 'message' ) } } : null;\n  };\n}\n\nexport function ValidateAlpha( control: AbstractControl ){\n  const pattern = RegexPatterns( 'Alpha' );\n  if( !pattern.tester.test( control.value.trim() ) ) return { alpha: { message: PatternValidation( 'Alpha', 'message' ) } };\n  return null;\n}\n\nexport function ValidateAlphaNoSpace( control: AbstractControl ){\n  const pattern = RegexPatterns( 'AlphaNoSpace' );\n  if( !pattern.tester.test( control.value.trim() ) ) return { alpha: { message: PatternValidation( 'AlphaNoSpace', 'message' ) } };\n  return null;\n}\n\nexport function ValidateAlphaLowercaseNoSpace( control: AbstractControl ){\n  const pattern = RegexPatterns( 'AlphaLowercaseNoSpace' );\n  if( !pattern.tester.test( control.value.trim() ) ) return { alpha: { message: PatternValidation( 'AlphaLowercaseNoSpace', 'message' ) } };\n  return null;\n}\n\nexport function ValidateAlphaNumeric( control: AbstractControl ){\n  const pattern = RegexPatterns( 'AlphaNumeric' );\n  if( !pattern.tester.test( control.value.trim() ) ) return { alpha: { message: PatternValidation( 'AlphaNumeric', 'message' ) } };\n  return null;\n}\n\nexport function ValidateAlphaNumericNoUnderscore( control: AbstractControl ){\n  const pattern = RegexPatterns( 'AlphaNumericNoUnderscore' );\n  if( !pattern.tester.test( control.value.trim() ) ) return { alpha: { message: PatternValidation( 'AlphaNumericNoUnderscore', 'message' ) } };\n  return null;\n}\n\nexport function ValidateAlphaNumericNoSpace( control: AbstractControl ){\n  const pattern = RegexPatterns( 'AlphaNumericNoSpace' );\n  if( !pattern.tester.test( control.value.trim() ) ) return { alpha: { message: PatternValidation( 'AlphaNumericNoSpace', 'message' ) } };\n  return null;\n}\n\nexport function ValidateNumeric( control: AbstractControl ){\n  const pattern = RegexPatterns( 'Numeric' );\n  if( !pattern.tester.test( control.value.trim() ) ) return { numeric: { message: PatternValidation( 'Numeric', 'message' ) } };\n  return null;\n}\n\nexport function ValidateNumericNoSpace( control: AbstractControl ){\n  const pattern = RegexPatterns( 'NumericNoSpace' );\n  if( !pattern.tester.test( control.value ) ) return { numeric: { message: PatternValidation( 'NumericNoSpace', 'message' ) } };\n  return null;\n}\n\nexport function ValidateUsername( control: AbstractControl ){\n  const pattern = RegexPatterns( 'Username' );\n  if( !pattern.tester.test( control.value ) ) return { username: { message: PatternValidation( 'Username', 'message' ) } };\n  return null;\n}\n\nexport function ValidateEmail( control: AbstractControl ){\n  const pattern = RegexPatterns( 'Email' );\n  if( !pattern.tester.test( control.value ) ) return { email: { message: PatternValidation( 'Email', 'message' ) } };\n  return null;\n}\n\n\nexport function ValidatePassword( control: AbstractControl ){\n  const pattern = RegexPatterns( 'Password' );\n  if( !pattern.tester.test( control.value ) ) return { password: { message: PatternValidation( 'Password', 'message' ) } };\n  return null;\n}\n\nexport function ValidatePhone( control: AbstractControl ){\n  const pattern = RegexPatterns( 'Phone' );\n  if( !pattern.tester.test( control.value ) ) return { phone: { message: PatternValidation( 'Phone', 'message' ) } };\n  return null;\n}\n\n\nexport function ValidateZip( control: AbstractControl ){\n  const pattern = RegexPatterns( 'Zip' );\n  if( !pattern.tester.test( control.value ) ) return { zip: { message: PatternValidation( 'Zip', 'message' ) } };\n  return null;\n}\n\nexport function ValidateUrl( control: AbstractControl ){\n  const pattern = RegexPatterns( 'Url' );\n  let value = control.value;\n  if( IsString( value, true ) ) value = value.trim();\n  if( !pattern.tester.test( value ) ) return { url: { message: PatternValidation( 'Url', 'message' ) } };\n  return null;\n}\n\n\nexport function MatchPassword( control: AbstractControl ){\n  const password = control.get( 'password' ).value; // to get value in input tag\n  const password_confirmation = control.get( 'password_confirmation' ).value; // to get value in input tag\n  if( password !== password_confirmation ){\n    control.get( 'password_confirmation' ).setErrors( { MatchPassword: true } );\n    if( control.get( 'password_confirmation' ).value ){\n      control.get( 'password_confirmation' ).markAsDirty();\n    }\n  }else{\n    return true;\n  }\n}\n\nexport function MatchEmail( control: AbstractControl ){\n  const email = control.get( 'email' ).value; // to get value in input tag\n  const email_confirmation = control.get( 'email_confirmation' ).value; // to get value in input tag\n  if( email !== email_confirmation ){\n    control.get( 'email_confirmation' ).setErrors( { MatchEmail: true } );\n    if( control.get( 'email_confirmation' ).value ){\n      control.get( 'email_confirmation' ).markAsDirty();\n    }\n  }else{\n    return true;\n  }\n}\n\nexport function ValidationErrorMessages( validationError: object ): string{\n  let message = '';\n  for( const validation in validationError ){\n    if( !validationError.hasOwnProperty( validation ) ) continue;\n    if( typeof validationError[ validation ].message === 'string' ){\n      message += validationError[ validation ].message + ' ';\n    }else{\n      switch( validation ){\n        case 'min':\n          message += `Must be greater than or equal to ${validationError[ validation ].min}. `;\n          break;\n        case 'max':\n          message += `Must be less than or equal to ${validationError[ validation ].max}. `;\n          break;\n        case 'required':\n          message += 'Field is required.';\n          break;\n        case 'email':\n          message += 'Invalid email. ';\n          break;\n        case 'unique':\n          message += 'The current value is already in use.';\n          break;\n        case 'minlength':\n          message += `To short, minimum ${validationError[ validation ].requiredLength} characters. `;\n          break;\n        case 'maxlength':\n          message += `To long, maximum ${validationError[ validation ].requiredLength} characters. `;\n          break;\n        case 'pattern':\n          message += 'Invalid characters. ';\n          break;\n        case 'MatchPassword':\n          message = `This field must match the password.`;\n          break;\n        case 'MatchEmail':\n          message = `This field must match the email.`;\n          break;\n        default:\n          message += 'Invalid. ';\n          break;\n      }\n    }\n  }\n  return message.trim();\n}\n\n// }\n","import { FormControl } from '@angular/forms';\nimport { SetControl } from '../../../../pop-common-dom.models';\n\n\nexport interface TextConfigInterface {\n  border?: boolean;\n  className?: string;\n  control?: FormControl;          // The form control. If not passed one will be created.\n  header?: boolean;\n  id?: number | string;           // A number that will be included in the events so you know which field it came from.\n  name?: string;\n  noInitialValue?: boolean;                 // Set to true to always have an empty value on load\n  tabOnEnter?: boolean;\n  padding?: number;                         // padding adjustment\n  size?: number;                            // font size adjustment\n  textOverflow?: 'wrap' | 'ellipsis';       // Set the text overflow behavior, default wrap\n  value?: boolean | number | string;        // Initial value.\n  warning?:boolean;\n\n}\n\n\nexport class TextConfig implements SetControl {\n\n  border = false;\n  className = 'theme-foreground-base';\n  control: FormControl;\n  header? = false;\n  id: number | string;\n  message = '';\n  noInitialValue = false;\n  name? = 'name';\n  setValue;\n  padding = 5;\n  textOverflow = 'wrap';\n  value: boolean | number | string = false;\n  warning? = true;\n\n\n  constructor( params?: TextConfigInterface ){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n    if( !this.control ) this.setControl();\n  }\n\n\n  setControl(){\n    this.control = new FormControl( this.value );\n  }\n\n}\n","import { FormControl, ValidatorFn } from '@angular/forms';\nimport { SelectFilterGroupInterface } from '../pop-select-filter/select-filter-config.model';\nimport { EventCallback, FieldItemOption, FieldItemOptions, FieldItemPatchInterface } from '../../../../pop-common.model';\nimport { SetControl } from '../../../../pop-common-dom.models';\nimport { ArrayKeyBy, ArrayMapSetter, IsArray, IsDefined, IsUndefined } from '../../../../pop-common-utility';\n\n\nexport interface SelectListGroupInterface {\n  label: string;                   // Input label.\n  options: FieldItemOptions;          // Array of FieldOptions\n  all?: boolean;\n  indeterminate?: boolean;\n  groupFk?: number | string;\n  visible?: number; // the count of  visible options within the group\n  selected?: number; // the count of selected visible options within the group\n  open?: boolean;\n}\n\n\nexport interface SelectListConfigInterface {\n  all?: boolean;                    // Set boolean to indicate that all options are selected\n  allLabel?: string;                // Set string to as label to indicate that all options are selected\n  allowAll?: boolean;               // Set boolean to indicate whether to set check all option\n  allowGroupAll?: boolean;               // Set boolean to indicate whether to set check all option\n  allValue?: boolean | string | number | null | any[];       // A custom value for when all options are selected\n  allOverlay?: boolean;\n  allOverlayEnabled?: boolean;\n  allOverlayLabel?: string;\n  allOverlayMessage?: string;\n  allOverlayCallback?: EventCallback;\n  bubble?: boolean;                 // fire events\n  checkboxPosition?: string;       // The position of the checkbox for a multiple selection.\n  control?: FormControl;            // The form control. If not passed one will be created.\n  collapsed?: boolean;              // Set to true on massive sets to show only option headers on render\n  disabledIds?: number[];\n  disabled?: boolean;               // Mark as readonly.\n  displayErrors?: boolean;          // If Error messages should be displayed.\n  emptyValue?: boolean | string | number | null | any[];     // A custom value for when all options are unselected\n  empty?: 'ConvertEmptyToNull' | 'ConvertEmptyToZero';\n  emptyLabel?: string;              // Set string as label to when no options are selected\n  facade?: boolean;                 // Sets a flag that says this fieldItems really does not exist in the backend, and just pretend to hit the api\n  filter?: boolean;                 // Search filter.\n  helpText?: string;             // On hover helper text.\n  height?: number;                  // List height.\n  id?: number | string;             // A number that will be included in the events so you know which field it came from.\n  label?: string;                   // Input label.\n  levelGap?: number;\n  mode?: FieldItemOption[];\n  minHeight?: number;                  // List height.\n  multiple?: boolean;               // If multiple is needed.\n  noInitialValue?: boolean;          // Set to true to always have an empty value on load\n  name?: string;                    // the entityId field name\n  options?: FieldItemOptions;          // Array of FieldOptions\n  outline?: boolean;                // Show border around option container\n  patch?: FieldItemPatchInterface;           // If field should be auto-patched.\n  patchGroupFk?: boolean;           // If value should contain groupFk, 3:12,4:12,5:13 <value:groupFk>\n  required?: boolean;                // If field value change should be stored to core entity\n  session?: boolean;                // If field value change should be stored to core entity\n  sessionPath?: string;                // If session path if not stored on root entity\n  sort?: boolean;                   //  Set to true if you want options to be sorted in priority of sort_order, name\n  value?: Array<number | string> | number | string;  // Initial value.\n  validators?: Array<ValidatorFn>;  // Array of Validators.\n}\n\n\nexport class SelectListConfig implements SetControl {\n  allValue;\n  allLabel = 'All';\n  allowAll = true;\n  allowGroupAll? = true;\n  allOverlay? = false;\n  allOverlayEnabled? = false;\n  allOverlayLabel? = '';\n  allOverlayMessage? = '';\n  allOverlayCallback?: EventCallback;\n  all = false;\n  bubble = false;\n  checkboxPosition = 'before';\n  collapsed = false;\n  control: FormControl;\n  column = 'column';\n  displayErrors = true;\n  disableOption;\n  defaultHeight = null;\n  defaultMode:string|number;\n  disabled: boolean;\n  disabledIds = [];\n  enableOption;\n  emptyValue;\n  emptyLabel;\n  facade = false;\n  filter = true;\n  focusSearch;\n  groups: SelectListGroupInterface[];\n  helpText = '';\n  height = null;\n  id: number | string;\n  levelGap = 35;\n  label = '';\n  mode?: FieldItemOption[];\n  message: string;\n  multiple = false;\n  minHeight = null;\n  noInitialValue = false;\n  outline = true;\n  options?: FieldItemOptions;\n  patch: FieldItemPatchInterface;\n  patchGroupFk = false;\n  required?: boolean;\n  route;\n  session?: boolean;\n  sessionPath?: string;\n  sort: boolean;\n  setDisabled;\n  strVal = '';\n  setActive;\n  setHeight;\n  clearSelected;\n  selectedOptions: any[];\n  triggerOnChange;\n  value?: Array<number | string> | number | string;\n  validators: Array<ValidatorFn>;\n\n\n  constructor( params?: SelectListConfigInterface ){\n    this.setDefaultValues();\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n    const mode = this.mode;\n    const hasMode = IsArray( this.mode, true ) ? true : false;\n    this.defaultMode = hasMode ? this.mode[ 0 ].value : 0;\n    this.value = Array.isArray( this.value ) ? this.value : [];\n    if( this.options.values.length > 1 ){\n      if( this.sort ){\n        if( typeof this.options.values[ 0 ].sort_order !== 'undefined' ){\n          this.options.values.sort( ( a, b ) => {\n            if( a.sort_order < b.sort_order ) return -1;\n            if( a.sort_order > b.sort_order ) return 1;\n            return 0;\n          } );\n        }else{\n          this.options.values.sort( ( a, b ) => {\n            if( a.name < b.name ) return -1;\n            if( a.name > b.name ) return 1;\n            return 0;\n          } );\n        }\n      }\n\n      if( this.options.values[ 0 ].group ){\n        this.groups = this.getOptionGroups();\n      }else if( this.options.values.length ){\n        let str: string[] = [];\n        this.selectedOptions = [];\n        this.options.values.map( ( option ) => {\n          if( hasMode && IsUndefined( option.mode ) ) option.mode = this.defaultMode;\n          option.selected = ( <any[]>this.value ).includes( option.value ) ? true : false;\n          if( option.selected ){\n            this.selectedOptions.push( option.value );\n            str.push( option.name );\n          }\n          option.indentation = ( +this.levelGap ) * ( option.level + 1 );\n          str = str.sort();\n          this.strVal = str.join( ', ' );\n        } );\n        if( this.options.empty ) this.options.values.unshift( { value: this.options.empty.value, name: this.options.empty.name } );\n        const defaultGroup = {\n          label: '',\n          options: this.options,\n          open: true\n        };\n        this.groups = [ defaultGroup ];\n      }else{\n        this.groups = [];\n      }\n    }\n    if( !this.groups ) this.groups = [];\n    if( !this.levelGap ) this.levelGap = 35;\n    this.defaultHeight = this.height;\n\n    let allGroupsSelected = true;\n    const selected = this.selectedOptions;\n    let groupSelected;\n    if( this.all ){\n      this.selectedOptions = [];\n      this.groups.map( ( group ) => {\n        group.all = true;\n        this.selectedOptions = group.options.values.map( ( option ) => {\n          option.selected = true;\n          this.selectedOptions.push( option.value );\n        } );\n      } );\n      this.strVal = this.allLabel;\n    }else{\n      let str: string[] = [];\n      this.selectedOptions = [];\n      const isGroups = this.groups.length > 1;\n\n      this.groups.map( ( group: SelectFilterGroupInterface ) => {\n        if( group.all ){\n          if( isGroups ){\n            str.push( group.label + ' (All)' );\n          }else{\n            str.push( 'All' );\n          }\n          group.options.values.filter( option => {\n            this.selectedOptions.push( option.value );\n          } );\n        }else{\n          groupSelected = group.options.values.filter( ( option ) => {\n            return option.selected;\n          } );\n          if( groupSelected && groupSelected.length ){\n            if( groupSelected.length === group.options.values.length ) group.all = true;\n            if( group.all ){\n              if( isGroups ){\n                str.push( group.label + ' (All)' );\n              }else{\n                str.push( 'All' );\n              }\n              group.options.values.filter( option => {\n                this.selectedOptions.push( option.value );\n              } );\n            }else{\n              allGroupsSelected = false;\n              if( isGroups && groupSelected.length ){\n                str.push( group.label + ` (${groupSelected.length} of ${group.options.values.length})` );\n                groupSelected.map( ( option: any ) => {\n                  this.selectedOptions.push( option.value );\n                } );\n              }else{\n                groupSelected.map( ( option: any ) => {\n                  this.selectedOptions.push( option.value );\n                  str.push( option.name );\n                } );\n              }\n            }\n          }else{\n            group.all = false;\n            allGroupsSelected = false;\n          }\n        }\n      } );\n      if( !this.selectedOptions.length ){\n        allGroupsSelected = false;\n        if( this.emptyLabel ){\n          str = [ this.emptyLabel ];\n        }\n      }else if( !this.all && allGroupsSelected ){\n        str = [ 'All' ];\n      }\n      this.all = allGroupsSelected;\n      str = str.sort();\n      this.strVal = str.join( ', ' );\n    }\n\n    delete this.options;\n    delete this.value;\n\n    if( !this.patch ) this.patch = { field: '', duration: 750, path: '', disabled: false };\n    if( this.patch.displayIndicator !== false ) this.patch.displayIndicator = true;\n    if( this.groups.length === 1 ) this.collapsed = false;\n    if( this.noInitialValue ) this.value = this.multiple ? [] : '';\n    if( !this.control ) this.setControl();\n    if( !( IsDefined( this.value, false ) ) ) this.value = this.multiple ? [] : '';\n\n    if( this.allOverlay && !this.allOverlayLabel ){\n      this.allOverlayLabel = 'All Access';\n    }\n  }\n\n\n  setControl(){\n    this.control = ( this.disabled ? new FormControl( {\n      value: this.value,\n      disabled: false\n    } ) : new FormControl( this.value, ( this.validators ? this.validators : [] ) ) );\n  }\n\n\n  private setDefaultValues(): void{\n    // this.helpText = '';\n    this.label = '';\n    this.message = '';\n    this.options = { values: [] };\n    this.disabled = false;\n    this.sort = false;\n    // this.showTooltip = false;\n    // this.tooltip = '';\n  }\n\n\n  private getOptionGroups(): SelectListGroupInterface[]{\n    this.selectedOptions = [];\n\n    const groups = {};\n    const list = [];\n    let defaultGroup = this.options.values[ 0 ].group;\n    let defaultGroupFk = this.options.values[ 0 ].groupFk;\n    this.options.values.map( ( option, index ) => {\n      if( typeof option.level === 'undefined' ) option.level = 0;\n      if( this.mode && IsUndefined( option.mode ) ) option.mode = this.defaultMode;\n      option.indentation = ( +this.levelGap ) * ( option.level + 1 );\n      if( !option.group ) option.group = defaultGroup;\n      if( option.group in groups === false ){\n        groups[ option.group ] = <SelectListGroupInterface> {\n          label: option.group,\n          options: { values: [] },\n          all: false,\n          indeterminate: false,\n          open: true,\n          groupFk: option.groupFk,\n        };\n        defaultGroup = option.group;\n        defaultGroupFk = option.groupFk;\n      }\n      option.selected = ( <any[]>this.value ).includes( option.value );\n      if( option.selected ){\n        this.selectedOptions.push( option.value );\n      }\n      groups[ option.group ].options.values.push( option );\n    } );\n\n    const count = Object.keys( groups ).length;\n    Object.keys( groups ).map( ( key ) => {\n      let indeterminate = false;\n      let all = true;\n      groups[ key ].options.values.some( option => {\n        if( !option.selected ){\n          all = false;\n          indeterminate = true;\n          return true;\n        }\n      } );\n      groups[ key ].all = all;\n      groups[ key ].indeterminate = indeterminate;\n      if( count > 1 && this.collapsed ) groups[ key ].open = false;\n      list.push( groups[ key ] );\n    } );\n    const countLabel = this.selectedOptions.length > 1 ? `[${this.selectedOptions.length}] ` : '';\n\n    return list;\n  }\n\n\n  public resetSelection(): void{\n    this.selectedOptions = [];\n  }\n\n\n  public addSelectedOption( option: number ): void{\n    this.selectedOptions.push( option );\n  }\n}\n\n","import { FormControl, Validators } from '@angular/forms';\nimport { FieldItemPatchInterface } from '../../../../pop-common.model';\nimport { SetControl } from '../../../../pop-common-dom.models';\n\nexport type DateFilterPredicate = ( d: Date ) => boolean;\n\n\n\n\nexport interface DatePickerConfigInterface {\n  bubble?: boolean;                                 // fire events\n  disabled?: boolean;                               // Mark as disabled.\n  displayErrors?: boolean;                          // If Error messages should be displayed.\n  name?: string;                                // the entityId field name\n  facade?: boolean;\n  filterPredicate?: string | DateFilterPredicate;   // A function to remove certain dates\n  helpText?: string;                             // On hover helper text.\n  id?: string | number;                             // A number that will be included in the events so you know which field it came from.\n  label?: string;                                   // Date label.\n  min?: string | number | Date;                            // Field multiple_min date.\n  max?: string | number | Date;                            // Field multiple_max date.\n  metadata?: object;                                // Array of objects. To be passed back on the event emitter and included in a patch if desired.\n  noInitialValue?: boolean;                          // Set to true to always have an empty value on load\n  required?: boolean;\n  session?: boolean;                                // If field value change should be stored to core entity\n  sessionPath?: string;                            // If session path if not stored on root entity\n  patch?: FieldItemPatchInterface;                           // If field should be auto-patched.\n  tooltip?: string;                                 // Tooltip for information to show when input is focused\n  transformation?: string;                          // Transform the input to match a specific case of format\n  validators?: Array<Validators>;                   // Array of Validators.\n  value?: string | number;                          // Initial value\n  options?: object;                                 //\n}\n\n\nexport class DatePickerConfig implements SetControl {\n\n\n  // Defaults\n  bubble = false;\n  control: FormControl;\n  displayErrors = true;\n  disabled = false;\n  facade?: boolean;\n  filterPredicate = null;\n  helpText = '';\n  id = '';\n  label = '';\n  min = null;\n  max = null;\n  message = '';\n  metadata;\n  name = 'name';\n  noInitialValue = false;\n  patch: FieldItemPatchInterface;\n  required?: boolean;\n  session?: boolean;\n  sessionPath?: string;\n  showTooltip = false;\n  transformation;\n  tooltip = '';\n  value;\n  clearMessage;\n  triggerOnChange;\n\n  // No Defaults\n\n  validators;\n\n\n  constructor( params?: DatePickerConfigInterface ){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n    if( this.value ) this.value = new Date( this.value );\n    if( typeof this.min === 'string'){\n      this.min = new Date( this.min );\n    }\n    if( isNaN( this.max ) === false ){\n      const maxDate = new Date();\n      // maxDate.setDate(maxDate.getDate() - 1);\n      maxDate.setDate( maxDate.getDate() + parseInt( this.max, 10 ) );\n      this.max = new Date( maxDate );\n    }\n    if( !this.patch ) this.patch = { field: '', duration: 750, path: '', disabled: false, businessId: 0 };\n    if( this.patch.displayIndicator !== false ) this.patch.displayIndicator = true;\n    if( this.noInitialValue ) this.value = '';\n    if( !this.control ) this.setControl();\n  }\n\n\n  setControl(){\n    this.control = <FormControl> ( this.disabled ? new FormControl( {\n      value: this.value,\n      disabled: true\n    } ) : new FormControl( this.value, ( this.validators ? this.validators : [] ) ) );\n  }\n}\n","import { SelectListConfig } from '../pop-select-list/select-list-config.model';\nimport { FieldItemPatchInterface } from '../../../../pop-common.model';\nimport { SetControl } from '../../../../pop-common-dom.models';\nimport { FormControl, ValidatorFn } from '@angular/forms';\n\n\nexport interface SelectModalConfigInterface {\n  bubble?: boolean;                 // Bubble Events\n  disabled?: boolean;               // Mark as readonly.\n  displayErrors?: boolean;         // If Error messages should be displayed.\n  facade?: boolean;                                       // Sets a flag that says this fieldItems really does not exist in the backend, and just pretend to hit the api\n  header?: string;                   // Header of the modal\n  label?: string;                 // label of input trigger field\n  subLabel?: string;                 // label of input trigger field\n  list?: SelectListConfig;           // the selection list inside the modal\n  patch?: FieldItemPatchInterface;            // If field should be auto-patched.\n  metadata?: object;                                  // Array of objects. To be passed back on the event emitter and included in a patch if desired.\n  noInitialValue?: boolean;                                // Set to true to always have an empty value on load\n  value?: Array<number | string> | number | string;                         // Initial value.\n  validators?: Array<ValidatorFn>;\n}\n\n\nexport class SelectModalConfig implements SetControl {\n  control: FormControl;\n  displayErrors? = true;\n  disabled = false;\n  facade? = false;                                       // Sets a flag that says this fieldItems really does not exist in the backend, and just pretend to hit the api\n  header = '';\n  list: SelectListConfig;\n  label = '';\n  metadata?: object;                                  // Array of objects. To be passed back on the event emitter and included in a patch if desired.\n  noInitialValue = false;                                // Set to true to always have an empty value on load\n  patch: FieldItemPatchInterface;\n  triggerOpen;\n  validators?: Array<ValidatorFn>;\n  value?: Array<number | string> | number | string;                         // Initial value.\n\n\n  constructor( params?: SelectModalConfigInterface ){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n    // if( !this.label ) this.label = 'Options';\n    if( !this.patch ) this.patch = { field: '', duration: 750, path: '', disabled: false, json: false };\n    if( this.patch.displayIndicator !== false ) this.patch.displayIndicator = true;\n    if( this.noInitialValue ) this.value = this.list.multiple ? [] : '';\n    if( !this.control ) this.setControl();\n  }\n\n\n  setControl(){\n    this.control = ( this.disabled ? new FormControl( {\n      value: this.value,\n      disabled: false\n    } ) : new FormControl( this.value, ( this.validators ? this.validators : [] ) ) );\n  }\n}\n\n","import {\n  CoreConfig,\n  Dictionary,\n  Entity,\n  EntityParams,\n  FieldItemModelInterface,\n  PopBaseEventInterface,\n  PopPipe,\n  PopLog,\n  ServiceRoutesInterface, PopApp, SetPopRouteAliasMap, PopRouteAliasMap, FieldItemInterface, FieldInterface\n} from '../../pop-common.model';\nimport {\n  ArrayKeyBy,\n  CleanObject,\n  ConvertArrayToOptionList,\n  DeepCopy, DeepMerge, GetRouteAlias,\n  InterpolateString,\n  IsArray, IsDefined,\n  IsNumber,\n  IsObject,\n  IsString, IsUndefined, JsonCopy, PopTransform, SpaceToHyphenLower,\n  StorageGetter, StringReplaceAll,\n  TitleCase,\n  ToObject\n} from '../../pop-common-utility';\nimport {TabButtonInterface, TabConfig, TabMenuConfig} from '../base/pop-tab-menu/tab-menu.model';\nimport {SideBySideConfig, SideBySideInterface} from '../base/pop-side-by-side/pop-side-by-side.model';\nimport {Validator, Validators} from '@angular/forms';\nimport {SelectConfig, SelectConfigInterface} from '../base/pop-field-item/pop-select/select-config.model';\nimport {\n  SelectMultiConfig,\n  SelectMultiConfigInterface\n} from '../base/pop-field-item/pop-select-multi/select-mulit-config.model';\nimport {InputConfig, InputConfigInterface} from '../base/pop-field-item/pop-input/input-config.model';\nimport {NumberConfig, NumberConfigInterface} from '../base/pop-field-item/pop-number/number-config.model';\nimport {DateConfig, DateConfigInterface} from '../base/pop-field-item/pop-date/date-config.model';\nimport {TimeConfig, TimeConfigInterface} from '../base/pop-field-item/pop-time/time-config.model';\nimport {CheckboxConfig, CheckboxConfigInterface} from '../base/pop-field-item/pop-checkbox/checkbox-config.model';\nimport {SwitchConfig, SwitchConfigInterface} from '../base/pop-field-item/pop-switch/switch-config.model';\nimport {MinMaxConfig, MinMaxConfigInterface} from '../base/pop-field-item/pop-min-max/min-max.models';\nimport {RadioConfig, RadioConfigInterface} from '../base/pop-field-item/pop-radio/radio-config.model';\nimport {TextareaConfig, TextareaConfigInterface} from '../base/pop-field-item/pop-textarea/textarea-config.model';\nimport {LabelConfig, LabelConfigInterface, MetadataConfig} from '../base/pop-field-item/pop-label/label-config.model';\nimport {ButtonConfig, ButtonConfigInterface} from '../base/pop-field-item/pop-button/button-config.model';\nimport {Route, Routes} from '@angular/router';\nimport {EmailFieldSetting} from './pop-entity-field/pop-entity-email/email.setting';\nimport {AddressFieldSetting} from './pop-entity-field/pop-entity-address/address.setting';\nimport {PhoneFieldSetting} from './pop-entity-field/pop-entity-phone/phone.setting';\nimport {NameFieldSetting} from './pop-entity-field/pop-entity-name/name.setting';\nimport {InputFieldSetting} from './pop-entity-field/pop-entity-input/input.settings';\nimport {RadioFieldSetting} from './pop-entity-field/pop-entity-radio/radio.setting';\nimport {SwitchFieldSetting} from './pop-entity-field/pop-entity-switch/switch.setting';\nimport {SelectFieldSetting} from './pop-entity-field/pop-entity-select/select.setting';\nimport {CheckboxFieldSetting} from './pop-entity-field/pop-entity-checkbox/checkbox.setting';\nimport {TextareaFieldSetting} from './pop-entity-field/pop-entity-textarea/textarea.setting';\nimport {\n  SelectFilterConfig,\n  SelectFilterConfigInterface\n} from '../base/pop-field-item/pop-select-filter/select-filter-config.model';\nimport {ValidatePassword, ValidatePhone, ValidateUrl, ValidateUsername} from '../../services/pop-validators';\nimport {TextConfig, TextConfigInterface} from '../base/pop-field-item/pop-text/text-config.model';\nimport {\n  SelectListConfig,\n  SelectListConfigInterface\n} from '../base/pop-field-item/pop-select-list/select-list-config.model';\nimport {\n  DatePickerConfig,\n  DatePickerConfigInterface\n} from '../base/pop-field-item/pop-datepicker/datepicker-config.model';\nimport {\n  SelectModalConfig,\n  SelectModalConfigInterface\n} from \"../base/pop-field-item/pop-select-modal/select-modal-config.model\";\nimport {isArray} from \"rxjs/internal-compatibility\";\n\n\n/**\n * A helper method that will build out TabMenuConfig off of an entityConfig\n * @param entityConfig\n * @param tabs\n */\nexport function GetTabMenuConfig(core: CoreConfig, tabs: TabConfig[] = []): TabMenuConfig {\n  const tabMenuConfig = new TabMenuConfig({\n    name: DetermineEntityName(core.entity),\n    goBack: true,\n    portal: false,\n    tabs: tabs,\n    buttons: GetTabMenuButtons(core),\n  });\n  return tabMenuConfig;\n}\n\n/**\n * Determine the buttons that should be shown for this entity\n * @param core\n */\nexport function GetTabMenuButtons(core: CoreConfig) {\n  let buttons = [];\n  const defaultButtons = <TabButtonInterface[]>[\n    {id: 'clone', name: 'Clone', accessType: 'can_update', hidden: false},\n    // { id: 'archive', name: 'Archive', accessType: 'can_update', hidden: true },\n    // { id: 'activate', name: 'Activate', accessType: 'can_update', hidden: true },\n    {id: 'delete', name: 'Delete', accessType: 'can_delete', hidden: true},\n    {id: 'close', name: 'Close', hidden: false},\n  ];\n  if (IsObject(core.repo.model.table.button, true)) {\n    buttons = defaultButtons.filter((button) => {\n\n      if (button.id === 'clone' && !core.repo.model.menu.button.clone) return false;\n      // if( button.id === 'archive' && !core.repo.model.menu.button.archive ) return false;\n      // if( button.id === 'activate' && !core.repo.model.menu.button.archive ) return false;\n      if (button.id === 'delete' && !core.repo.model.menu.button.delete) return false;\n      if (!button.accessType) return true;\n      if (!core.access[button.accessType]) return false;\n      return true;\n    });\n  }\n\n  return buttons;\n}\n\n/**\n * A helper method that sets up a FieldGroupConfig for a create/new pop-table-dialog\n * @param entityConfig\n * @param goToUrl\n */\nexport function GetObjectVar(obj: Dictionary<any>, path: string) {\n  const steps = path.split('.');\n  const key = steps.pop();\n  const pathStorage = StorageGetter(obj, steps);\n  if (pathStorage) {\n    return typeof pathStorage[key] !== 'undefined' ? pathStorage[key] : undefined;\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * Get a list of the transformations that are within a field set\n * @param obj\n * @constructor\n */\nexport function GetObjectTransformations(obj: Object) {\n  const transformations = [];\n  Object.keys(obj).map((key) => {\n    const field = obj[key];\n    if (IsObject(field, ['model'])) {\n      if (field.model && field.model.name && field.model.transformation) {\n        transformations[field.model.name] = CleanObject({\n          type: field.model.transformation.type,\n          arg1: field.model.transformation.arg1 ? field.model.transformation.arg1 : null,\n          arg2: field.model.transformation.arg2 ? field.model.transformation.arg2 : null,\n          arg3: field.model.transformation.arg3 ? field.model.transformation.arg3 : null,\n        });\n      }\n    } else if (IsObject(field, ['id', 'name'])) {\n      console.log('with relation', key, obj[key]);\n    } else {\n      console.log('fail', key);\n    }\n  });\n  return transformations;\n}\n\nexport function SetCoreValue(core: CoreConfig | TabMenuConfig, entity_path: string, value: any): void {\n  const steps: string[] = entity_path.split('.');\n  const key = steps.pop();\n  const pathStorage = StorageGetter(core, steps);\n  if (value === null) {\n    delete pathStorage[key];\n  } else {\n    pathStorage[key] = value;\n  }\n}\n\n/**\n * Parse a value with any mutations that need to be applied\n * @param value\n * @param core\n * @param blockEntity\n * @constructor\n */\nexport function ParseModelValue(value: any = '', core?: CoreConfig, blockEntity = false) {\n  // console.log('ParseModelValue', value);\n  let tmp = value;\n  if (typeof tmp === 'undefined') {\n    // console.log('zzz')\n    return tmp;\n  }\n  if (tmp === 'null' || tmp === null) {\n    // console.log( 'a', tmp );\n    tmp = null;\n  } else if (typeof tmp === 'boolean') {\n    tmp = +tmp;\n    // console.log( 'b', tmp );\n  } else if (IsString(tmp, true)) {\n    if (tmp.includes('/')) { // url\n      if (core && core.params && IsString(tmp, true) && tmp.includes('#')) {\n        tmp = ParseUrlForParams(tmp, core.params);\n        // console.log( 'd', tmp );\n      }\n      if (!blockEntity && core && core.entity && IsString(tmp, true) && tmp.includes(':')) {\n        const entityField = ParseStringForEntityField(tmp, core.entity);\n        if (IsDefined(entityField, false)) {\n          tmp = entityField;\n        }\n        // console.log( 'e', tmp );\n      }\n      return tmp;\n    } else {\n      if (IsString(tmp, true) && tmp.includes('alias:')) {\n        tmp = ParseForAlias(tmp);\n        // console.log( 'f', tmp );\n      }\n      if (core) {\n        if (tmp.includes('.') && !(tmp.includes('@')) && !(tmp.includes(' '))) { // object location\n          const coreVar = GetObjectVar(core, tmp);\n          if (typeof coreVar !== 'undefined') tmp = coreVar;\n          // console.log( 'g', tmp );\n        }\n\n        if (core.params && IsString(tmp, true) && tmp.includes('#')) {\n          const paramsField = ParseStringForParams(tmp, core.params);\n          if (IsDefined(paramsField, false)) {\n            tmp = paramsField;\n          }\n          // console.log( 'h', tmp );\n        }\n        if (!blockEntity && core.entity && IsString(tmp, true) && tmp.includes(':')) {\n          const entityField = ParseStringForEntityField(tmp, core.entity);\n          if (IsDefined(entityField, false)) {\n            tmp = entityField;\n          }\n\n          // console.log( 'i', tmp );\n        }\n      }\n    }\n  } else if (IsNumber(tmp)) {\n    // console.log( 'ca', tmp );\n    tmp = Number(tmp);\n    // console.log( 'c', tmp );\n  }\n  // console.log( 'after', tmp );\n  return tmp;\n}\n\n\n/**\n * Look through an entire object and make the necessary mutations\n * @param obj\n * @param entityConfig\n * @constructor\n */\nexport function ParseObjectDefinitions(obj: object, entityConfig: CoreConfig) {\n  const definitions = {};\n  let value;\n  if (typeof obj !== 'undefined') {\n    if (obj && Array.isArray(obj)) obj = ToObject(obj);\n    if (typeof obj === 'object') {\n      Object.keys(obj).map((key) => {\n        value = ParseModelValue(obj[key], entityConfig);\n        definitions[key] = value;\n      });\n    }\n  }\n\n  return definitions;\n}\n\n/**\n * A method to translate entityId fields out of a url /#app/#plural_name/:entityId, (#) indicates a entityId param, (:) indicates a entityId field\n */\nexport function ParseUrlForEntityFields(url: string, entity: Entity) { // recursive\n  if (url && url.includes(':')) {\n    const start = url.indexOf(':');\n    const end = url.indexOf('/', start) !== -1 ? url.indexOf('/', start) : url.length;\n    const fieldName = url.substring(start + 1, end);\n    url = url.replace(':' + fieldName, entity[fieldName]);\n    if (url && url.includes(':')) {\n      url = ParseUrlForEntityFields(url, entity);\n    }\n  }\n  return url;\n}\n\n\n/**\n * Translate an aliases or mutations within a url\n * @param url\n * @param entity\n * @param ignore\n * @constructor\n */\nexport function ParseLinkUrl(url: string, entity: Object = null, ignore: string[] = []) {\n  if (url) {\n    return url.split('/').map((part) => {\n      if (part.includes('alias:')) {\n        part = PopPipe.label.getAlias((part.split(':')[1]));\n      } else if (part.includes(':') && entity) {\n        if (!(ignore.includes(part))) {\n          part = part.split(':')[1];\n          if (part in entity) part = entity[part];\n        }\n      }\n      return part;\n    }).join('/');\n  }\n  return url;\n}\n\n\n/**\n * A method to translate entityId params out of a url /#app/#plural_name/:entityId, (#) indicates a entityId param, (:) indicates a entityId field\n */\nexport function ParseUrlForParams(url: string, entityParams: EntityParams): string { // recursive\n  if (url && url.includes('#') && !(url.includes(' '))) {\n    const start = url.indexOf('#');\n    const end = url.indexOf('/', start) !== -1 ? url.indexOf('/', start) : url.length;\n    const paramName = url.substring(start + 1, end);\n    url = url.replace('#' + paramName, entityParams[paramName]);\n    if (url && url.includes('#')) {\n      url = ParseUrlForParams(url, entityParams);\n    }\n  }\n  return url;\n}\n\n\n/**\n * A methid that replaces entityId aliases found in a string\n * @param string\n */\nexport function ParseForAlias(string: string) {\n  if (IsString(string, true)) {\n    let alias = false;\n    const parts = [];\n    string.split(':').map((part) => {\n      if (part.includes('alias')) {\n        alias = true;\n      } else {\n        parts.push(alias ? TitleCase(PopPipe.label.getAlias((part))) : part);\n        alias = false;\n      }\n      return part;\n    });\n    return parts.join(' ');\n  }\n  return string;\n}\n\n\n/**\n * A method to translate entityId fields out of a string ':entityId' (:) indicates a entityId field\n */\nexport function ParseStringForEntityField(str: string, entity: Entity) { // recursive\n  if (typeof (str) === 'string' && str.includes(':') && !(str.includes(' '))) {\n    const start = str.indexOf(':');\n    const end = str.indexOf('.', start) !== -1 ? str.indexOf('.', start) : str.length;\n    const fieldName = str.substring(start + 1, end);\n    if (IsDefined(entity[fieldName], false)) {\n      str = str.replace(':' + fieldName, entity[fieldName]);\n      if (str && str.includes(':')) {\n        str = ParseStringForEntityField(str, entity);\n      }\n    }\n  } else if (typeof (str) === 'string' && str.includes(':') && str.includes(' ')) {\n    const parts = str.trim().split(' ');\n    const partials = [];\n    parts.map((part) => {\n      const start = part.indexOf(':');\n      const end = part.indexOf('.', start) !== -1 ? part.indexOf('.', start) : part.length;\n      const fieldName = part.substring(start + 1, end);\n      if (IsDefined(entity[fieldName], false)) {\n        part = part.replace(':' + fieldName, entity[fieldName]);\n        if (part && part.includes(':')) {\n          part = ParseStringForEntityField(part, entity);\n        }\n      }\n      partials.push(part);\n    });\n    str = partials.join(' ').trim();\n\n  }\n  return str;\n}\n\n\n/**\n * A method that replaces entityId params found in a string\n * @param str\n * @param entityParams\n */\nexport function ParseStringForParams(str: string, entityParams: EntityParams, separator = '.'): string { // recursive\n  if (typeof (str) === 'string' && str.includes('#')) {\n    const start = str.indexOf('#');\n    const end = str.indexOf(separator, start) !== -1 ? str.indexOf(separator, start) : str.length;\n    const paramName = str.substring(start + 1, end);\n    if (entityParams[paramName]) {\n      str = str.replace('#' + paramName, entityParams[paramName]);\n      if (str && str.includes('#')) {\n        str = ParseStringForParams(str, entityParams);\n      }\n    }\n\n  }\n  return str;\n}\n\n/**\n * Helper function to set routes for an entity\n * @param routes\n * @param params\n * @constructor\n */\nexport function InterpolateEntityRoutes(routes: ServiceRoutesInterface, params: EntityParams) {\n  if (IsObject(routes)) {\n    const set = <ServiceRoutesInterface>{};\n    Object.keys(routes).map((method) => {\n      set[method] = {};\n      Object.keys(routes[method]).map((route) => {\n        if (!set[method][route]) set[method][route] = {};\n        set[method][route].path = String(ParseUrlForParams(routes[method][route].path, params)).trim();\n        set[method][route].params = routes[method][route].params;\n      });\n    });\n    return set;\n  } else {\n    return routes;\n  }\n}\n\n/**\n * Helper function to set routes for an entity\n * @param routes\n * @param params\n * @constructor\n */\nexport function InterpolateEntityRoute(route: string, obj: Object) {\n  let path = InterpolateString(route, obj);\n  path = StringReplaceAll(path, '\\\\/\\\\/', '\\\\/');\n  return path;\n}\n\n\n/**\n * Remove all the empty values from an object\n * @param model\n * @constructor\n */\nexport function ClearEmptyValues(model: object) {\n  const pointless = [null, undefined, ''];\n  Object.getOwnPropertyNames(model).map((key) => {\n    if (typeof key === 'string' && key.includes('_') == false && pointless.includes(model[key]) && key !== 'value') {\n      delete model[key];\n    }\n    if (model[key] !== null && !Array.isArray(model[key]) && typeof model[key] === 'object') {\n      model[key] = ClearEmptyValues(model[key]);\n    }\n  });\n  return model;\n}\n\n/**\n * Get a name to display for an entity, use fall backs if necessary\n * @param entity\n * @constructor\n */\nexport function DetermineEntityName(entity: Entity) {\n  let name = '';\n  if (entity) {\n    if (IsString(entity.label, true)) {\n      name = entity.label;\n\n    } else if (IsString(entity.name, true)) {\n      name = entity.name;\n\n    } else if (IsString(entity.display_name, true)) {\n      name = entity.display_name;\n\n    } else if (IsString(entity.first_name, true)) {  //code change by Chetu Development Team on 17-05-2021\n      name = entity.first_name + ' ' + entity.last_name;\n\n    } else if (IsString(entity.email, true)) {\n      name = entity.email;\n\n    } else if (typeof entity.id !== 'undefined') {\n      name = String(entity.id);\n    }\n  }\n  return name;\n}\n\n/**\n * Parse conditional logic of a when statement\n * [\n *    first level is OR statements\n *    [ ...Every thing in the second level is an AND statement..., ['name', '=', 'user'], ['age', '>', 21] ],\n *    [key, '=', 'value ],\n *    [key, 'in', [1,2,3,45] ],\n * ]\n * @param obj\n * @param when\n * @param core\n * @constructor\n */\nexport function EvaluateWhenConditions(obj: Dictionary<any>, when: any[] = null, core?: CoreConfig) {\n  if (!when || when === null) return true;\n  let pass = true;\n  if (IsArray(when, true)) { // conditional logic to display fields\n    let block;\n    when = DeepCopy(when).filter((section) => IsArray(section, true));\n    const isOrStatement = when.length > 1;\n    if (isOrStatement) {\n      // console.log('or check', obj, when, core);\n      when.reverse();\n      while (when.length) {\n        block = when.pop().filter((section) => IsArray(section, true));\n        pass = EvaluateWhenCondition(obj, block, core);\n        if (pass) break;\n      }\n    } else {\n      // console.log('check', obj, when, core);\n      pass = EvaluateWhenCondition(obj, when, core);\n    }\n  } else {\n    pass = false;\n  }\n  return pass;\n}\n\n/**\n * Evaluate a single conditional block: [location, operator, value]\n * @param obj\n * @param block\n * @param core\n * @constructor\n */\nexport function EvaluateWhenCondition(obj: Dictionary<any>, block: any[], core?: CoreConfig): boolean {\n  const operators = ['=', '>', '>=', '<', 'truthy', 'falsey', 'length', 'contains'];\n  let pass = true;\n  let location;\n  let operator;\n  let value;\n  if (IsArray(block, true)) {\n    // expects array of arrays\n    block.some((section: any) => {\n\n      section.some((rule) => {\n        // console.log('rule', rule);\n        // console.log('has core', core);\n        if (IsArray(rule, true)) {\n          location = rule[0];\n          if (rule.length === 1) {\n            operator = 'truthy';\n            value = undefined;\n          } else if (rule.length === 2) {\n            operator = '=';\n            value = rule[1];\n            if (['truthy', 'falsey', 'length'].includes(value)) {\n              operator = value;\n              value = undefined;\n            }\n          } else if (rule.length >= 2) {\n            operator = rule[1];\n            value = rule[2];\n          }\n          if (location && operator && operators.includes(operator)) {\n            if (IsString(location, true) && location in obj && obj[location]) {\n              location = obj[location];\n            } else if (IsString(location, true) && location.includes('.')) {\n              location = GetObjectVar(obj, location);\n            } else {\n              location = ParseModelValue(location, core);\n            }\n            if (IsString(value, true) && IsObject(core, [value])) {\n              value = ParseModelValue(value, core);\n            } else if (IsString(value, true) && IsObject(obj, [value])) {\n              value = GetObjectVar(obj, value);\n            }\n            // console.log('location', location);\n            // console.log('operator', operator);\n            // console.log('value', value);\n            switch (operator) {\n              case 'contains':\n                if (IsArray(location)) {\n                  if (!(location.includes(value))) {\n                    pass = false;\n                    return true;\n                  }\n                } else if (IsString(location)) {\n                  if (!(location.search(value) > -1)) {\n                    pass = false;\n                    return true;\n                  }\n                } else if (IsObject(location)) {\n                  if (!(value in location)) {\n                    pass = false;\n                    return true;\n                  }\n                } else {\n                  pass = false;\n                  return true;\n                }\n                break;\n              case 'length':\n                if (!(IsArray(location, true))) {\n                  pass = false;\n                  return true;\n                }\n                break;\n              case 'truthy':\n                if (!location) {\n                  pass = false;\n                  return true;\n                }\n                break;\n              case 'falsey':\n                if (location) {\n                  pass = false;\n                  return true;\n                }\n                break;\n              case '=':\n                if (location != value) {\n                  pass = false;\n                  return true;\n                }\n                break;\n              case '!=':\n                if (location == value) {\n                  pass = false;\n                  return true;\n                }\n                break;\n              case '>':\n                if (!(location > value)) {\n                  pass = false;\n                  return true;\n                }\n                break;\n              case '>=':\n                if (!(location >= value)) {\n                  pass = false;\n                  return true;\n                }\n                break;\n              case '<':\n                if (!(location < value)) {\n                  pass = false;\n                  return true;\n                }\n                break;\n              case '<=':\n                if (!(location <= value)) {\n                  pass = false;\n                  return true;\n                }\n                break;\n              default:\n                pass = false;\n                return true;\n                break;\n            }\n          } else {\n            pass = false;\n            return true;\n          }\n        } else {\n          pass = false;\n          return true;\n        }\n      });\n      return pass === false;\n    });\n  } else {\n    pass = false;\n  }\n\n  return pass;\n}\n\n\n/**\n * check if event matches the signature for a field patch\n * @param core\n * @param event\n * @constructor\n */\nexport function IsValidFieldPatchEvent(core: CoreConfig, event: PopBaseEventInterface) {\n  if (IsObject(event, true)) {\n    if (event.type === 'field' && event.name === 'patch' && event.success) {\n      return true;\n    }\n    if (event.type === 'field' && event.name === 'onChange' && event.config.facade) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * check if event matches the signature for a field patch\n * @param core\n * @param event\n * @constructor\n */\nexport function IsValidChangeEvent(core: CoreConfig, event: PopBaseEventInterface) {\n  if (IsObject(event, true)) {\n    if (event.type === 'field' && event.name === 'onChange') {\n      return true;\n    }\n  }\n  return false;\n}\n\n\n/**\n * Check if a event matches the same core signature of a core that belongs to a component\n * @param core\n * @param event\n * @constructor\n */\nexport function IsValidCoreSignature(core: CoreConfig, event: PopBaseEventInterface = null) {\n  console.log(' IsValidCoreSignature core', core);\n  console.log(' IsValidCoreSignature event', event);\n  if (IsObject(core, true) && IsObject(core.entity)) {\n    if (IsObject(event, true) && IsObject(event.core)) {\n      return core === event.core;\n    }\n    return true;\n  }\n  console.log('IsValidCoreSignature, fail');\n  return false;\n}\n\nexport function GetCustomFieldSettings(field: FieldInterface) {\n  let fieldSettings = {};\n  switch (String(field.fieldgroup.name).toLowerCase()) {\n    case 'email':\n      fieldSettings = EmailFieldSetting;\n      break;\n    case 'address':\n      fieldSettings = AddressFieldSetting;\n      break;\n    case 'phone':\n      fieldSettings = PhoneFieldSetting;\n      break;\n    case 'name':\n      fieldSettings = NameFieldSetting;\n      break;\n    case 'textfield':\n    case 'input':\n      fieldSettings = InputFieldSetting;\n      break;\n    case 'radio':\n      fieldSettings = RadioFieldSetting;\n      break;\n    case 'switch':\n      fieldSettings = SwitchFieldSetting;\n      break;\n    case 'select':\n      fieldSettings = SelectFieldSetting;\n      break;\n    case 'select-multi':\n    case 'select_multi':\n    case 'multi_selection':\n      fieldSettings = SelectFieldSetting;\n      break;\n    case 'checkbox':\n      fieldSettings = CheckboxFieldSetting;\n      break;\n    case 'textarea':\n      fieldSettings = TextareaFieldSetting;\n      break;\n    default:\n      fieldSettings = {};\n  }\n\n  return fieldSettings;\n}\n\n/**\n * Selection type fields require a list of options to present the user\n * The option values may be directly assigned on the field, point to a specific location in the entity data, or reference a resource that may exists in the entity models\n * ...\n * options:{\n *   ...\n *   values: FieldItemOptions[], resolve what is in this list\n *   ...\n * }\n * ...\n * @param core\n * @param options\n * @private\n */\nexport function ModelOptionValues(core: CoreConfig, options: any) {\n  if (IsObject(options, true)) {\n    if (IsString(options.resource, true)) {\n      if (IsObject(core.resource, true) && options.resource in core.resource && IsObject(core.resource[options.resource], ['data_values']) && IsArray(core.resource[options.resource].data_values, true)) {\n        options.converted = false;\n        options.rawValues = DeepCopy(core.resource[options.resource].data_values);\n        // options.values = DeepCopy( core.resource[ options.resource ].data_values );\n      }\n    } else if (IsArray(options.values, true)) {\n      options.converted = false;\n      const tmp = DeepCopy(options.values);\n      options.values = null;\n      options.rawValues = tmp;\n    } else if (IsString(options.values)) {\n      const tmpOptions = GetObjectVar(core, options.values);\n      if (IsArray(tmpOptions)) {\n        options.converted = false;\n        options.rawValues = DeepCopy(tmpOptions);\n      } else {\n        const tmp = ParseModelValue(options.values, core);\n        if (IsArray(tmp, true)) {\n          options.converted = false;\n          options.rawValues = DeepCopy(tmp);\n        }\n      }\n    }\n  }\n  return options;\n}\n\n/**\n * Get the rules that should be applied on this field\n * @param fieldItem\n * @private\n */\nexport function FieldItemRules(fieldItem: any): void {\n  const RuleSet = {};\n  fieldItem.rule = {};\n  const itemRules = IsArray(fieldItem.itemrules, true) ? fieldItem.itemrules : []; // default rules inherited from the field_item_id\n  const fieldRules = IsArray(fieldItem.fieldrules, true) ? fieldItem.fieldrules : []; // rules specific to this field item\n// we want field rules to override items rules when there is overlap ie.. the item might come with a default rule but the items rules should override it\n  itemRules.map((rule) => {\n    if (IsArray(rule.validations, true)) {\n      if (!(IsObject(rule.options))) rule.options = {};\n      rule.options.values = ConvertArrayToOptionList(rule.validations, {\n        nameKey: 'label',\n      });\n      rule.validationMap = ArrayKeyBy(rule.validations, 'id');\n      rule.value = +rule.validation.id;\n    } else {\n      rule.value = rule.raw_value;\n    }\n    if (!rule.value && rule.default_value) rule.value = rule.default_value;\n    RuleSet[rule.name] = rule;\n  });\n  fieldRules.map((rule) => {\n\n    if (IsObject(RuleSet[rule.name])) {\n      RuleSet[rule.name].id = rule.id;\n      RuleSet[rule.name].value = IsArray(RuleSet[rule.name].validations, true) ? rule.validation.id : rule.raw_value;\n      RuleSet[rule.name].field_id = rule.field_id;\n    }\n  });\n\n  fieldItem.rules = Object.values(RuleSet);\n  fieldItem.rules.map((rule: any) => {\n    if (!rule.validation.fixed) {\n      fieldItem.rule[rule.name] = ParseModelValue(rule.value);\n    }\n  });\n\n// delete fieldItem.fieldrules;\n// delete fieldItem.itemrules;\n}\n\n\nexport function FieldItemModel(core: CoreConfig, fieldItem: any, checkAccess = true): FieldItemModelInterface {\n  if (IsObject(fieldItem, true)) {\n    let hasAccess = true;\n    if (checkAccess) {\n      hasAccess = core.access.can_update ? true : false;\n      if (IsObject(core.entity, ['system']) && core.entity.system) hasAccess = false;\n    }\n    const showAsReadonly = +fieldItem.readonly ? true : (!hasAccess ? true : false);\n    const allowPatch = IsObject(core.entity, ['id']) && IsObject(fieldItem.patch, ['path']) && !fieldItem.facade && hasAccess && !showAsReadonly ? true : false;\n    if (!fieldItem.metadata) {\n      fieldItem.metadata = {};\n    }\n\n\n    fieldItem.metadata = DeepMerge(fieldItem.metadata, {internal_name: core.params.internal_name});\n    // ToDo:: Optimize this part, currently uses catch-all method to accommodate all field item types, need to run checks on some and not others which prevents simply merging\n    let model = <FieldItemModelInterface>{\n      ...CleanObject({ // any empty values will be purged\n        access: hasAccess,\n        align: fieldItem.align,\n        all: fieldItem.all,\n        allValue: fieldItem.allValue,\n        allowAll: fieldItem.allowAll,\n        allowGroupAll: fieldItem.allowGroupAll,\n        allOverlay: fieldItem.allOverlay,\n        allOverlayEnabled: fieldItem.allOverlayEnabled,\n        allOverlayLabel: fieldItem.allOverlayLabel,\n        allOverlayMessage: fieldItem.allOverlayMessage,\n        allOverlayCallback: fieldItem.allOverlayCallback,\n        autoFill: +fieldItem.autoFill ? true : null,\n        autoSize: +fieldItem.autoSize ? true : null,\n        autofocus: +fieldItem.autofocus ? true : null,\n        autoselect: +fieldItem.autoselect ? true : null,\n        border: fieldItem.border,\n        bubble: fieldItem.bubble,\n        button: fieldItem.button,\n        checkboxPosition: fieldItem.checkboxPosition,\n        className: fieldItem.className,\n        color: fieldItem.color,\n        collapsed: fieldItem.collapsed,\n        control: fieldItem.control,\n        defaultHeight: fieldItem.defaultHeight,\n        disabled: +fieldItem.disabled ? true : false,\n        displayErrors: +fieldItem.displayErrors ? true : false,\n        dropSpecial: fieldItem.dropSpecial,\n        event: +fieldItem.event,\n        empty: fieldItem.empty,\n        facade: fieldItem.facade ? true : false,\n        filterPredicate: fieldItem.filterPredicate,\n        form: fieldItem.view ? String(fieldItem.view.name).toLowerCase() : fieldItem.form ? fieldItem.form : 'label',\n        header: fieldItem.header,\n        hidden: fieldItem.hidden,\n        hint: fieldItem.hint,\n        hintText: fieldItem.hintText,\n        height: fieldItem.height,\n        helpText: fieldItem.helpText,\n        helper: fieldItem.helper,\n        html: fieldItem.html,\n        icon: fieldItem.icon,\n        iconColor: fieldItem.iconColor,\n        interval: fieldItem.interval,\n        layout: fieldItem.setting && fieldItem.setting.layout,\n        level: fieldItem.level,\n        levelGap: fieldItem.levelGap,\n        link: fieldItem.link,\n        label: fieldItem.label,\n        list: fieldItem.list,\n        maxHeight: fieldItem.maxHeight,\n        multiple: fieldItem.multiple,\n        message: fieldItem.message,\n        minimal: fieldItem.minimal,\n        mode: fieldItem.mode,\n        noInitialValue: fieldItem.noInitialValue,\n        labelPosition: fieldItem.labelPosition,\n        mask: fieldItem.mask,\n        metadata: fieldItem.metadata ? fieldItem.metadata : {},\n        min: fieldItem.min,\n        max: fieldItem.max,\n        minColumn: fieldItem.minColumn,\n        maxColumn: fieldItem.maxColumn,\n        minHeight: fieldItem.minHeight,\n        minlength: IsObject(fieldItem.rule) && IsDefined(fieldItem.rule.minlength) ? fieldItem.rule.minlength : (fieldItem.minlength ? fieldItem.minlength : null),\n        maxlength: IsObject(fieldItem.rule) && IsDefined(fieldItem.rule.maxlength) ? fieldItem.rule.maxlength : (fieldItem.maxlength ? fieldItem.maxlength : 128),\n        minValue: fieldItem.minValue,\n        maxValue: fieldItem.maxValue,\n        name: fieldItem.name,\n        options: ModelOptionValues(core, fieldItem.options),\n        pattern: fieldItem.rule && fieldItem.rule.pattern ? fieldItem.rule.pattern : (fieldItem.pattern ? fieldItem.pattern : null),\n        patch: allowPatch && fieldItem.patch ? fieldItem.patch : null,\n        patchGroupFk: fieldItem.patchGroupFk,\n        padding: fieldItem.padding,\n        position: fieldItem.position,\n        preserve: fieldItem.preserve,\n        prevent: fieldItem.prevent,\n        prefix: fieldItem.prefix ? fieldItem.prefix : null,\n        suffix: fieldItem.suffix ? fieldItem.suffix : null,\n        radius: fieldItem.radius,\n        readonly: showAsReadonly,\n        reset: fieldItem.reset,\n        route: fieldItem.route,\n        required: fieldItem.rule && fieldItem.rule.required ? true : fieldItem.required ? true : false,\n        session: fieldItem.session,\n        sessionPath: fieldItem.sessionPath,\n        showMask: fieldItem.showMask,\n        showTooltip: fieldItem.showTooltip,\n        size: fieldItem.size,\n        sort: fieldItem.sort,\n        sort_order: fieldItem.sort_order,\n        specialChars: fieldItem.specialChars,\n        tooltip: fieldItem.tooltip,\n        toolTipDirection: fieldItem.toolTipDirection,\n        textOverflow: fieldItem.textOverflow,\n        transformation: fieldItem.transformation,\n        truncate: fieldItem.truncate,\n        type: fieldItem.type,\n        value: fieldItem.value,\n        validators: fieldItem.validators,\n        width: fieldItem.width,\n        warning: fieldItem.warning,\n        when: IsArray(fieldItem.when, true) ? fieldItem.when : null\n      })\n    };\n\n    if (model.form === 'label') { // label specific params\n      model = {\n        ...model,\n        ...CleanObject({// label stuff\n          subLabel: fieldItem.subLabel ? fieldItem.subLabel : null,\n          subValue: fieldItem.subValue ? fieldItem.subValue : null,\n          truncate: fieldItem.truncate ? fieldItem.truncate : null,\n          copyLabel: fieldItem.copyLabel ? fieldItem.copyLabel : null,\n          labelButton: fieldItem.labelButton ? fieldItem.labelButton : null,\n          valueButton: fieldItem.valueButton ? fieldItem.valueButton : null,\n          copyLabelBody: fieldItem.copyLabelBody ? fieldItem.copyLabelBody : null,\n          copyLabelDisplay: fieldItem.copyLabelDisplay ? fieldItem.copyLabelDisplay : null,\n          valueButtonDisplay: fieldItem.valueButtonDisplay ? fieldItem.valueButtonDisplay : null,\n          valueButtonDisabled: fieldItem.valueButtonDisabled ? fieldItem.valueButtonDisabled : null,\n          valueButtonDisplayTransformation: fieldItem.valueButtonDisplayTransformation ? fieldItem.valueButtonDisplayTransformation : null,\n        })\n      };\n    }\n\n    delete fieldItem.patch;\n    if (model.patch) {\n      if (model.patch.path) model.patch.path = StringReplaceAll(ParseUrlForParams(model.patch.path, core.params), '//', '/');\n      if (model.patch.metadata) model.patch.metadata = ParseObjectDefinitions(model.patch.metadata, core);\n    }\n    return model;\n  }\n\n  return {};\n\n}\n\n/**\n * When patches are made, we need to update the entity in the core config\n * ToDo:: Hoping to be able to improve this, and have each component be responsible to manage their own updates. My hesitation right now is I want the least amount of components as possible manipulating the core config\n * @param core\n * @param event\n */\nexport function SessionEntityFieldUpdate(core: CoreConfig, event: PopBaseEventInterface, path: string = null) {\n  PopLog.event(`SessionEntityFieldUpdate`, `Session Detected`, event);\n  if (IsValidCoreSignature(core, event)) {\n    if (IsValidFieldPatchEvent(core, event)) {\n\n      let value;\n      if (!(IsString(path, true))) path = 'entity';\n      const session = StorageGetter(core, String(path).trim().split('.'));\n      if (event.config.name in session || event.config.facade) {\n        value = event.config.control ? event.config.control.value : event.data;\n        value = ParseModelValue(value);\n        console.log('SessionEntityFieldUpdate', session, event.config.name, value);\n        session[event.config.name] = value;\n        core.repo.clearCache('active', `SessionEntityFieldUpdate`);\n        core.repo.clearCache('all', `SessionEntityFieldUpdate`);\n        event.session = true;\n      }\n      return true;\n    }\n  }\n  return false;\n}\n\nexport function GetSingularName(value: string): string {\n  if (IsString(value, true) && String(value).length > 3) {\n    let tmp = SpaceToHyphenLower(String(value).toLowerCase().trim());\n    if (String(tmp).slice(-3) === 'ies') {\n      tmp = String(tmp).slice(0, -3);\n      tmp += 'y';\n    } else if (String(tmp).slice(-1) === 's') {\n      tmp = String(tmp).slice(0, -1);\n    }\n\n    return tmp;\n  }\n  return value;\n}\n\n\nexport function IsAliasable(value: string): boolean {\n  if (IsString(value, true) && String(value).length > 3) {\n    const tmp = SpaceToHyphenLower(String(value).toLowerCase().trim());\n    if (IsObject(PopRouteAliasMap, true) && tmp in PopRouteAliasMap) {\n      return true;\n    }\n  }\n  return false;\n}\n\n\nexport function IsEntity(entityValue: string) {\n  if (IsString(entityValue, true)) {\n    if (IsObject(PopApp, ['entities']) && entityValue in PopApp.entities) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport function ParseModuleRoutes(parent: string, config: Route[], routes = []) {\n  for (let i = 0; i < config.length; i++) {\n    const route = config[i];\n    // console.log(parent + '/' + route.path);\n    routes.push(route);\n    if (route.children) {\n      const currentPath = route.path ? parent + '/' + route.path : parent;\n      ParseModuleRoutes(currentPath, route.children, routes);\n    }\n  }\n  return routes;\n}\n\nexport function ParseModuleRoutesForAliases(routes: Routes): Routes {\n  if (IsArray(routes, true)) {\n    routes.map((route: any) => {\n      if (IsObject(route.data, ['alias', 'internal_name'])) {\n        const alias = route.data.alias;\n        if (IsObject(alias, ['target', 'type']) && !route.data.masterPath) {\n          route.data.masterPath = route.path;\n          if (IsString(alias.target, true) && IsString(alias.type, true)) {\n            route.path = String(StringReplaceAll(route.path, alias.target, GetRouteAlias((IsString(alias.internal_name, true) ? alias.internal_name : route.data.internal_name), alias.type))).trim();\n            if (route.data.masterPath !== route.path) routes.push({\n              path: route.data.masterPath,\n              redirectTo: route.path,\n              pathMatch: 'prefix'\n            });\n          }\n          if (IsObject(route.data.table, true)) {\n            if (IsString(route.data.table.route, true)) {\n              const tableRoute = route.data.table.route;\n              if (String(tableRoute).includes(alias.target)) {\n                route.data.table.route = String(StringReplaceAll(tableRoute, alias.target, GetRouteAlias((IsString(alias.internal_name, true) ? alias.internal_name : route.data.internal_name), alias.type))).trim();\n              }\n            }\n            if (IsString(route.data.table.goToUrl)) {\n              const goToUrl = route.data.table.goToUrl;\n              if (String(goToUrl).includes(route.data.alias)) {\n                route.data.table.goToUrl = String(StringReplaceAll(goToUrl, route.data.alias, GetRouteAlias((IsString(alias.internal_name, true) ? alias.internal_name : route.data.internal_name), alias.type))).trim();\n              }\n            }\n          }\n\n        } else if (IsString(route.data.alias, true) && !route.data.masterPath) {\n          route.data.masterPath = route.path;\n          route.path = String(StringReplaceAll(route.path, route.data.alias, GetRouteAlias(route.data.internal_name, 'plural'))).trim();\n          if (route.data.masterPath !== route.path) routes.push({\n            path: route.data.masterPath,\n            redirectTo: route.path,\n            pathMatch: 'prefix'\n          });\n          if (IsObject(route.data.table, true)) {\n            if (IsString(route.data.table.route, true)) {\n              const tableRoute = route.data.table.route;\n              if (String(tableRoute).includes(route.data.alias)) {\n                route.data.table.route = String(StringReplaceAll(tableRoute, route.data.alias, GetRouteAlias(route.data.internal_name, 'plural'))).trim();\n              }\n            }\n            if (IsString(route.data.table.goToUrl)) {\n              const goToUrl = route.data.table.goToUrl;\n              if (String(goToUrl).includes(route.data.alias)) {\n                route.data.table.goToUrl = String(StringReplaceAll(goToUrl, route.data.alias, GetRouteAlias(route.data.internal_name, 'plural'))).trim();\n              }\n            }\n          }\n        }\n      }\n      if (IsArray(route.children, true)) {\n        route.children = ParseModuleRoutesForAliases(route.children);\n      }\n      if (IsObject(route._loadedConfig, ['routes'])) {\n        route._loadedConfig.routes = ParseModuleRoutesForAliases(route._loadedConfig.routes);\n      }\n    });\n  }\n  return routes;\n}\n\n\nexport function FieldItemView(view: any): { id: number, name: string, type: string, description: string } {\n  const tmp = IsObject(view) ? view : null;\n  return <{ id: number, name: string, type: string, description: string }>CleanObject({\n    id: tmp ? tmp.id : 0,\n    name: tmp ? tmp.name : 'label',\n    type: tmp && String(tmp.html).includes('[') ? String(tmp.html).split('[')[1].split(']')[0] : 'text',\n    description: tmp ? tmp.description : null\n  });\n}\n\n\nexport function FieldItemBooleanValue(model: FieldItemModelInterface, core: CoreConfig): boolean {\n  PopLog.debug('FieldItemBooleanValue', `convert:`, {name: name, model: model, core: core});\n  let result;\n  if (IsDefined(model.value, false)) {\n    if (typeof model.value === 'boolean') {\n      result = model.value;\n    } else if (IsString(model.value, true)) {\n      result = ParseModelValue(model.value, core);\n    } else if (IsNumber(model.value, false)) {\n      result = +core.entity[model.name] > 0;\n    }\n  }\n  if (!(IsDefined(result, false)) && model.name && IsObject(core.entity, true) && IsDefined(core.entity[model.name])) {\n    result = +core.entity[model.name] > 0;\n  }\n\n  if (!(IsDefined(result, false))) result = false;\n  PopLog.debug('FieldItemBooleanValue', `result:`, {initial: model.value, result: result});\n  return result;\n}\n\nexport function FieldItemTextValue(model: FieldItemModelInterface, core: CoreConfig): string {\n  let result;\n  if (+model.value > 0) {\n    result = model.value;\n  } else if (IsDefined(model.value, false) && IsString(model.value, true)) {\n    result = ParseModelValue(model.value, core);\n    // console.log( 'belongs to parse', model.value, result );\n  }\n  if (!(IsDefined(result, false)) && model.name && IsObject(core.entity, true) && IsDefined(core.entity[model.name]) && IsString(core.entity[model.name], true)) {\n    result = core.entity[model.name];\n    // console.log( 'belongs to entity', model.value, result );\n  }\n  if (!(IsDefined(result, false)) || result === 'Null') result = '';\n  return result;\n}\n\nexport function FieldItemArrayValue(model: FieldItemModelInterface, core: CoreConfig): any[] {\n  let result;\n  if (IsDefined(model.value, false)) {\n    if (IsArray(model.value, false)) {\n      result = model.value;\n    } else if (IsString(model.value, true)) {\n      result = ParseModelValue(model.value, core);\n    }\n  }\n  if (!(IsArray(result, false)) && model.name && IsObject(core.entity, true) && IsArray(core.entity[model.name], false)) {\n    result = core.entity[model.name];\n  }\n  if (!(IsArray(result, false))) result = [];\n\n  return result;\n}\n\n\nexport function GetPatternValidator(pattern: string) {\n  // ToDo:: Add all of the options that are built for this, numeric, alpha, ....\n  switch (String(pattern).toLowerCase()) {\n    case 'url':\n      return ValidateUrl;\n      break;\n    case 'phone':\n      return ValidatePhone;\n      break;\n    case 'email':\n      return Validators.email;\n      break;\n    case 'zip':\n      return ValidatePhone;\n      break;\n    case 'password':\n      return ValidatePassword;\n      break;\n    case 'username':\n      return ValidateUsername;\n      break;\n    default:\n      return null;\n  }\n}\n\n\nexport function FieldItemOptionValues(model: FieldItemModelInterface, core: CoreConfig): any[] {\n  if (IsUndefined(model.options)) {\n    model.options = {\n      rawValues: [],\n      values: []\n    };\n  }\n  // console.log('model', model.options);\n  if (!IsArray(model.options.rawValues, true)) {\n    const optionValues = IsArray(model.options.values, true) ? model.options.values : [];\n    model.options.rawValues = [...new Map(optionValues.map(item => [item['name'], item])).values()];\n  }\n  const list = ConvertArrayToOptionList(model.options.rawValues, {\n    converted: model.options.converted ? true : false, // if true, this will return default values\n    // ensure that an option shows up in list in case other conditions remove it, aka it has been archived\n    nameKey: model.options.nameKey ? model.options.nameKey : 'name',\n    ensure: model.options.ensure && IsObject(core.entity, true) ? {\n      name: core.entity[model.options.ensure.name],\n      value: core.entity[model.name]\n    } : undefined,\n    prevent: IsArray(model.options.prevent, true) ? model.options.prevent : [], // a list of ids that should not appear in the list for whatever reason\n    preserveKeys: IsArray(model.options.preserveKeys, true) ? model.options.preserveKeys : [], // a list of keys that need to be preserved wile constructing the object\n    // parent means this options should all have a common field trait like client_fk, account_fk ....\n    parent: model.options.parent && IsObject(core.entity, true) ? {\n      field: model.options.parent,\n      value: core.entity[model.options.parent]\n    } : undefined,\n    // empty is the blank or null option that you want to have\n    empty: null,\n    sort: IsDefined(model.options.sort) ? model.options.sort : true,\n  });\n\n  return list;\n}\n\n\n/**\n * Generatea form config from the field item model;\n * @param core\n * @param model\n * @constructor\n */\nexport function FieldItemModelConfig(core: CoreConfig, model: FieldItemModelInterface) {\n  let value;\n  let assigned;\n  let configInterface;\n  let validators;\n//   const isDialogLimit = this.srv.dialog.openDialogs.length > 3;\n  const isDialogLimit = false;\n\n  let config = null;\n\n  // const metadata = { ...GetCoreParamsAsMetadata(core.params), ...model.metadata };\n  switch (model.form) {\n    case 'sidebyside':\n      assigned = Array.isArray(model.options.assigned) && model.options.assigned.length ? model.options.assigned : typeof model.options.assigned === 'string' && IsObject(core.entity.assignments, true) && Array.isArray(core.entity.assignments[model.options.assigned]) ? core.entity.assignments[model.options.assigned] : [];\n      model.options.values = FieldItemOptionValues(model, core);\n      model.options.converted = true;\n      configInterface = <SideBySideInterface>{\n        assigned: assigned,\n        assignAll: typeof model.assign_all === 'boolean' ? model.assign_all : false,\n        assignedLabel: typeof model.assignedLabel === 'string' ? model.assignedLabel : 'Assigned',\n        bubble: model.bubble ? true : false,\n        disabled: model.disabled,\n        displayHelper: typeof model.displayHelper === 'boolean' ? model.displayHelper : false,\n        displayTitle: typeof model.displayTitle === 'boolean' ? model.displayTitle : false,\n        facade: true,\n        filter: typeof model.filter === 'boolean' ? model.filter : true,\n        helpText: typeof model.helpText === 'string' ? model.helpText : undefined,\n        id: model.id ? model.id : undefined,\n        label: model.label ? ParseForAlias(model.label) : '',\n        metadata: model.metadata,\n        noInitialValue: model.noInitialValue ? model.noInitialValue : false,\n        name: model.name ? model.name : null,\n        optionsLabel: typeof model.optionsLabel === 'string' ? model.optionsLabel : 'Available',\n        options: model.options,\n        // bucketHeight: typeof model.bucketHeight === 'string' ? model.bucketHeight : undefined,\n        parentHeight: 'mat-grid-tile',\n        patch: model.patch,\n        route: typeof model.route === 'string' ? model.route : undefined,\n        removeAll: typeof model.removeAll === 'boolean' ? model.removeAll : false,\n        session: model.session,\n        sessionPath: model.sessionPath,\n        validators: model.required ? [Validators.required] : undefined,\n      };\n      config = new SideBySideConfig(<SideBySideInterface>CleanObject(configInterface));\n      break;\n    case 'select':\n      model.options.values = FieldItemOptionValues(model, core);\n      model.options.converted = true;\n      configInterface = <SelectConfigInterface>{\n        autoFill: model.autoFill,\n        bubble: model.bubble ? true : false,\n        disabled: model.disabled,\n        empty: model.empty ? model.empty : null,\n        facade: model.facade ? true : false,\n        height: model.height ? model.height : undefined,\n        helpText: model.helpText ? model.helpText : undefined,\n        id: model.id ? model.id : undefined,\n        label: model.label ? ParseForAlias(model.label) : '',\n        mode: model.mode ? model.mode : 'select',\n        metadata: model.metadata,\n        name: model.name ? model.name : null,\n        noInitialValue: model.noInitialValue ? model.noInitialValue : false,\n        options: model.options,\n        patch: model.patch,\n        readonly: model.readonly ? true : false,\n        session: model.session,\n        sessionPath: model.sessionPath,\n        required: model.required ? true : false,\n        validators: model.required ? [Validators.required] : undefined,\n        value: typeof model.value !== 'undefined' && model.value !== null ? ParseModelValue(model.value, core) : IsObject(core.entity, true) && typeof core.entity[(model.name ? model.name : null)] !== 'undefined' ? core.entity[(model.name ? model.name : null)] : null,\n      };\n      config = new SelectConfig(<SelectConfigInterface>CleanObject(configInterface));\n      break;\n    case 'select-modal':\n      model.options.values = FieldItemOptionValues(model, core);\n      model.options.converted = true;\n      const configListInterface = <SelectListConfigInterface>{\n        autoFill: model.autoFill,\n        bubble: model.bubble ? true : false,\n        disabled: model.disabled,\n        empty: model.empty ? model.empty : null,\n        facade: model.facade ? true : false,\n        height: model.height ? model.height : undefined,\n        helpText: model.helpText ? model.helpText : undefined,\n        id: model.id ? model.id : undefined,\n        label: model.subLabel ? ParseForAlias(model.subLabel) : '',\n        mode: model.mode ? model.mode : 'select',\n        metadata: model.metadata,\n        name: model.name ? model.name : null,\n        noInitialValue: model.noInitialValue ? model.noInitialValue : false,\n        options: model.options,\n        patch: model.patch,\n        readonly: model.readonly ? true : false,\n        session: model.session,\n        sessionPath: model.sessionPath,\n        required: model.required,\n        validators: model.required ? [Validators.required] : undefined,\n        value: typeof model.value !== 'undefined' && model.value !== null ? ParseModelValue(model.value, core) : IsObject(core.entity, true) && typeof core.entity[(model.name ? model.name : null)] !== 'undefined' ? core.entity[(model.name ? model.name : null)] : null,\n      };\n      config = new SelectModalConfig(<SelectModalConfigInterface>{\n        facade: false,\n        header: model.header ? model.header : null,\n        label: model.label ? model.label : null,\n        metadata: {},\n        name: model.name,\n        required: model.required,\n        validators: model.required ? [Validators.required] : undefined,\n        list: new SelectListConfig(<SelectListConfigInterface>CleanObject(configListInterface))\n      });\n      break;\n    case 'select-filter':\n      model.options.values = FieldItemOptionValues(model, core);\n      model.options.converted = true;\n      configInterface = <SelectFilterConfigInterface>{\n        autoFill: model.autoFill,\n        bubble: model.bubble ? true : false,\n        disabled: model.disabled,\n        facade: model.facade ? true : false,\n        helpText: model.helpText ? model.helpText : undefined,\n        height: model.height ? model.height : undefined,\n        id: model.id ? model.id : undefined,\n        label: model.label ? ParseForAlias(model.label) : '',\n        mode: model.mode ? model.mode : 'select',\n        minHeight: model.minHeight ? model.minHeight : undefined,\n        multiple: model.multiple ? true : false,\n        metadata: model.metadata,\n        name: model.name ? model.name : null,\n        noInitialValue: model.noInitialValue ? model.noInitialValue : false,\n        options: model.options,\n        patch: model.patch,\n        readonly: model.readonly ? true : false,\n        session: model.session,\n        sessionPath: model.sessionPath,\n        validators: model.required ? [Validators.required] : undefined,\n        value: typeof model.value !== 'undefined' && model.value !== null ? ParseModelValue(model.value, core) : IsObject(core.entity, true) && typeof core.entity[(model.name ? model.name : null)] !== 'undefined' ? core.entity[(model.name ? model.name : null)] : null,\n      };\n      config = new SelectFilterConfig(<SelectFilterConfigInterface>CleanObject(configInterface));\n      break;\n    case 'select-list':\n      model.options.values = FieldItemOptionValues(model, core);\n      model.options.converted = true;\n      configInterface = <SelectListConfigInterface>{\n        autoFill: model.autoFill,\n        all: model.all,\n        allowAll: model.allowAll,\n        allowGroupAll: model.allowGroupAll,\n        allOverlay: model.allOverlay,\n        allOverlayEnabled: model.allOverlayEnabled,\n        allOverlayLabel: model.allOverlayLabel,\n        allOverlayMessage: model.allOverlayMessage,\n        allOverlayCallback: model.allOverlayCallback,\n        bubble: model.bubble ? true : false,\n        disabled: model.disabled,\n        facade: model.facade ? true : false,\n        helpText: model.helpText ? model.helpText : undefined,\n        height: model.height ? model.height : undefined,\n        id: model.id ? model.id : undefined,\n        label: model.label ? ParseForAlias(model.label) : '',\n        mode: model.mode ? model.mode : null,\n        multiple: model.multiple ? true : false,\n        minHeight: model.minHeight ? model.minHeight : undefined,\n        metadata: model.metadata,\n        name: model.name ? model.name : null,\n        noInitialValue: model.noInitialValue ? model.noInitialValue : false,\n        options: model.options,\n        patch: model.patch,\n        required: model.required,\n        readonly: model.readonly ? true : false,\n        session: model.session,\n        sessionPath: model.sessionPath,\n        validators: model.required ? [Validators.required] : undefined,\n        value: typeof model.value !== 'undefined' && model.value !== null ? ParseModelValue(model.value, core) : IsObject(core.entity, true) && typeof core.entity[(model.name ? model.name : null)] !== 'undefined' ? core.entity[(model.name ? model.name : null)] : null,\n      };\n      config = new SelectListConfig(<SelectListConfigInterface>CleanObject(configInterface));\n      break;\n    case 'select-multi':\n    case 'select_multi':\n      model.options.values = FieldItemOptionValues(model, core);\n      model.options.converted = true;\n      configInterface = <SelectMultiConfigInterface>{\n        bubble: model.bubble ? true : false,\n        disabled: model.disabled,\n        facade: model.facade ? true : false,\n        helpText: model.helpText ? model.helpText : undefined,\n        id: model.id ? model.id : undefined,\n        label: model.label ? ParseForAlias(model.label) : '',\n        metadata: model.metadata,\n        name: model.name ? model.name : null,\n        noInitialValue: model.noInitialValue ? model.noInitialValue : false,\n        options: model.options,\n        patch: model.patch,\n        readonly: model.readonly ? true : false,\n        session: model.session,\n        sessionPath: model.sessionPath,\n        validators: model.required ? [Validators.required] : undefined,\n        value: FieldItemArrayValue(model, core),\n      };\n      model.options.converted = true;\n      config = new SelectMultiConfig(<SelectMultiConfigInterface>CleanObject(configInterface));\n      break;\n    case 'textfield':\n    case 'text':\n    case 'input':\n      validators = [];\n      if (!model.mask) validators.push(Validators.maxLength(+model.maxlength || 64));\n      if (model.mask) model.maxlength = null;\n      if (model.required) validators.push(Validators.required);\n      if (model.pattern) {\n        const patternValidator = GetPatternValidator(model.pattern);\n        if (patternValidator) {\n          validators.push(patternValidator);\n        }\n      }\n\n      if (+model.minlength) validators.push(Validators.minLength(+model.minlength));\n      configInterface = <InputConfigInterface>{\n        autofocus: model.autofocus ? true : null,\n        autoselect: model.autoselect ? true : null,\n        bubble: model.bubble ? true : false,\n        disabled: model.disabled ? true : false,\n        empty: model.empty ? model.empty : null,\n        facade: model.facade ? true : null,\n        hint: model.hint ? true : null,\n        hintText: model.hintText ? model.hintText : null,\n        helpText: model.helpText ? model.helpText : null,\n        hidden: model.hidden ? true : false,\n        id: model.id ? model.id : undefined,\n        label: ParseForAlias(model.label),\n        metadata: model.metadata,\n        maxlength: model.maxlength || 64,\n        mask: typeof model.mask === 'string' && model.mask.length ? model.mask : null,\n        name: model.name ? model.name : null,\n        noInitialValue: model.noInitialValue ? model.noInitialValue : false,\n        patch: model.patch,\n        pattern: typeof model.pattern === 'string' && model.pattern.length ? model.pattern : null,\n        prefix: IsString(model.prefix, true) ? model.prefix : null,\n        prevent: IsArray(model.prevent, true) ? model.prevent : null,\n        readonly: model.readonly ? true : false,\n        session: model.session,\n        sessionPath: model.sessionPath,\n        suffix: typeof model.suffix === 'string' && model.suffix.length ? model.suffix : null,\n        transformation: IsString(model.transformation, true) ? model.transformation : null,\n        validators: validators,\n        value: FieldItemTextValue(model, core),\n      };\n      config = new InputConfig(<InputConfigInterface>CleanObject(configInterface));\n      break;\n    case 'number':\n      validators = [];\n      if (model.min) validators.push(Validators.max(model.min));\n      if (model.max) validators.push(Validators.max(model.max));\n      if (model.required) validators.push(Validators.required);\n      configInterface = <NumberConfigInterface>{\n        bubble: model.bubble ? true : false,\n        facade: model.facade ? true : false,\n        helpText: model.helpText ? model.helpText : null,\n        hidden: model.hidden ? true : false,\n        id: model.id ? model.id : undefined,\n        label: ParseForAlias(model.label),\n        metadata: model.metadata,\n        min: typeof model.min !== 'undefined' ? model.min : 1,\n        noInitialValue: model.noInitialValue ? model.noInitialValue : false,\n        name: model.name ? model.name : null,\n        prefix: IsString(model.prefix, true) ? model.prefix : '',\n        patch: model.patch,\n        readonly: model.readonly ? true : false,\n        session: model.session,\n        sessionPath: model.sessionPath,\n        suffix: typeof model.suffix === 'string' && model.suffix.length ? model.suffix : '',\n        step: typeof model.step ? model.step : 1,\n        transformation: IsString(model.transformation, true) ? model.transformation : null,\n        validators: validators,\n        value: FieldItemTextValue(model, core),\n      };\n      config = new NumberConfig(<NumberConfigInterface>CleanObject(configInterface));\n      break;\n    case 'date':\n      configInterface = <DateConfigInterface>{\n        bubble: model.bubble ? true : false,\n        disabled: model.disabled,\n        facade: model.facade ? true : false,\n        helpText: model.helpText ? model.helpText : null,\n        id: model.id ? model.id : undefined,\n        label: ParseForAlias(model.label),\n        min: IsString(model.min, true) ? model.min : null,\n        // min: isNaN( model.min ) === false ? model.min : null,\n        max: isNaN(model.max) === false ? model.max : null,\n        metadata: model.metadata,\n        noInitialValue: model.noInitialValue ? model.noInitialValue : false,\n        name: model.name ? model.name : null,\n        patch: model.patch,\n        required: model.required,\n\n        readonly: model.readonly ? true : false,\n        session: model.session,\n        sessionPath: model.sessionPath,\n        transformation: IsString(model.transformation, true) ? model.transformation : null,\n        type: IsString(model.type, true) ? model.type : \"Basic\",\n        value: FieldItemTextValue(model, core),\n        validators: model.required ? [Validators.required] : undefined,\n      };\n      configInterface = CleanObject(configInterface);\n      if (IsDefined(model.filterPredicate)) configInterface.filterPredicate = model.filterPredicate;\n      config = new DateConfig(<DateConfigInterface>configInterface);\n      break;\n    case 'datepicker':\n      configInterface = <DatePickerConfigInterface>{\n        bubble: model.bubble ? true : false,\n        disabled: model.disabled,\n        facade: model.facade ? true : false,\n        helpText: model.helpText ? model.helpText : null,\n        id: model.id ? model.id : undefined,\n        label: ParseForAlias(model.label),\n        min: IsString(model.min, true) ? model.min : null,\n        // min: isNaN( model.min ) === false ? model.min : null,\n        max: isNaN(model.max) === false ? model.max : null,\n        metadata: model.metadata,\n        noInitialValue: model.noInitialValue ? model.noInitialValue : false,\n        name: model.name ? model.name : null,\n        patch: model.patch,\n        required: model.required,\n        transformation: IsString(model.transformation, true) ? model.transformation : null,\n        readonly: model.readonly ? true : false,\n        session: model.session,\n        sessionPath: model.sessionPath,\n        value: FieldItemTextValue(model, core),\n        validators: model.required ? [Validators.required] : undefined,\n      };\n      configInterface = CleanObject(configInterface);\n      if (IsDefined(model.filterPredicate)) configInterface.filterPredicate = model.filterPredicate;\n      config = new DatePickerConfig(<DatePickerConfigInterface>configInterface);\n      break;\n    case 'time':\n      configInterface = <TimeConfigInterface>{\n        bubble: model.bubble ? true : false,\n        disabled: model.disabled,\n        facade: model.facade ? true : false,\n        helpText: model.helpText ? model.helpText : null,\n        interval: model.interval ? model.interval : 15,\n        id: model.id ? model.id : undefined,\n        label: ParseForAlias(model.label),\n        metadata: model.metadata,\n        min: typeof model.min === 'string' ? model.min : null,\n        max: typeof model.max === 'string' ? model.max : null,\n        name: model.name ? model.name : null,\n        noInitialValue: model.noInitialValue ? model.noInitialValue : false,\n        patch: model.patch,\n        readonly: model.readonly ? true : false,\n        session: model.session,\n        sessionPath: model.sessionPath,\n        time: model.time ? model.time : 12,\n        transformation: IsString(model.transformation, true) ? model.transformation : null,\n        value: FieldItemTextValue(model, core),\n        validators: model.required ? [Validators.required] : undefined,\n      };\n      config = new TimeConfig(<TimeConfigInterface>CleanObject(configInterface));\n      break;\n    case 'checkbox':\n      model.options.values = FieldItemOptionValues(model, core);\n      model.options.converted = true;\n      configInterface = <CheckboxConfigInterface>{\n        bubble: model.bubble ? true : false,\n        disabled: model.disabled,\n        facade: model.facade ? true : false,\n        helpText: model.helpText ? model.helpText : undefined,\n        id: model.id ? model.id : undefined,\n        label: model.label ? ParseForAlias(model.label) : '',\n        labelPosition: typeof model.labelPosition !== 'undefined' ? model.labelPosition : 'after',\n        metadata: model.metadata,\n        name: model.name ? model.name : null,\n        noInitialValue: model.noInitialValue ? model.noInitialValue : false,\n        options: model.options,\n        patch: model.patch,\n        session: model.session,\n        sessionPath: model.sessionPath,\n        textOverflow: model.textOverflow ? model.textOverflow : 'wrap',\n        value: FieldItemBooleanValue(model, core),\n      };\n      config = new CheckboxConfig(<CheckboxConfigInterface>CleanObject(configInterface));\n      break;\n    case 'switch':\n      configInterface = <SwitchConfigInterface>{\n        bubble: model.bubble ? true : false,\n        disabled: model.disabled,\n        facade: model.facade ? true : false,\n        helpText: model.helpText ? model.helpText : undefined,\n        id: model.id ? model.id : undefined,\n        label: model.label ? ParseForAlias(model.label) : '',\n        labelPosition: typeof model.labelPosition !== 'undefined' ? model.labelPosition : 'after',\n        metadata: model.metadata,\n        name: model.name ? model.name : null,\n        noInitialValue: model.noInitialValue ? model.noInitialValue : false,\n        patch: model.patch,\n        session: model.session,\n        sessionPath: model.sessionPath,\n        textOverflow: model.textOverflow ? model.textOverflow : 'wrap',\n        value: FieldItemBooleanValue(model, core),\n      };\n      config = new SwitchConfig(<SwitchConfigInterface>CleanObject(configInterface));\n      break;\n    case 'minmax':\n      const minColumn = model.minColumn ? model.minColumn : 'min';\n      const maxColumn = model.maxColumn ? model.maxColumn : 'max';\n\n      const minValue = typeof model.minValue !== 'undefined' && model.minValue !== null ? ParseModelValue(model.minValue, core) : IsObject(core.entity, true) && typeof core.entity[minColumn] !== 'undefined' ? core.entity[minColumn] : 1;\n      const maxValue = typeof model.maxValue !== 'undefined' && model.maxValue !== null ? ParseModelValue(model.maxValue, core) : IsObject(core.entity, true) && typeof core.entity[maxColumn] !== 'undefined' ? core.entity[maxColumn] : 10;\n\n      configInterface = <MinMaxConfigInterface>{\n        bubble: model.bubble ? true : false,\n        disabled: model.disabled,\n        facade: model.facade ? true : false,\n        helpText: model.helpText ? model.helpText : undefined,\n        id: model.id ? model.id : undefined,\n        label: model.label ? ParseForAlias(model.label) : '',\n        minColumn: model.minColumn ? model.minColumn : 'min',\n        maxColumn: model.maxColumn ? model.maxColumn : 'max',\n        minValue: minValue,\n        maxValue: maxValue,\n        metadata: model.metadata,\n        name: model.name ? model.name : null,\n        noInitialValue: model.noInitialValue ? model.noInitialValue : false,\n        patch: model.patch,\n        readonly: model.readonly ? true : false,\n        session: model.session,\n        sessionPath: model.sessionPath,\n      };\n      config = new MinMaxConfig(<MinMaxConfigInterface>CleanObject(configInterface));\n      break;\n    case 'radio':\n      model.options.values = FieldItemOptionValues(model, core);\n      model.options.converted = true;\n      configInterface = <RadioConfigInterface>{\n        bubble: model.bubble ? true : false,\n        disabled: model.disabled,\n        facade: model.facade ? true : false,\n        helpText: model.helpText ? model.helpText : '',\n        id: model.id ? model.id : undefined,\n        labelPosition: typeof model.labelPosition !== 'undefined' ? model.labelPosition : 'above',\n        label: model.label ? ParseForAlias(model.label) : '',\n        layout: typeof model.layout !== 'undefined' ? model.layout : 'row',\n        metadata: model.metadata,\n        name: model.name ? model.name : null,\n        noInitialValue: model.noInitialValue ? model.noInitialValue : false,\n        options: model.options,\n        patch: model.patch,\n        reset: model.reset ? true : false,\n        readonly: model.readonly ? true : false,\n        session: model.session,\n        sessionPath: model.sessionPath,\n        sort: typeof model.labelPosition !== 'undefined' ? model.sort : false,\n        value: FieldItemTextValue(model, core),\n      };\n      model.options.converted = true;\n      config = new RadioConfig(<RadioConfigInterface>CleanObject(configInterface));\n      break;\n    case 'textarea':\n      configInterface = <TextareaConfigInterface>{\n        autoSize: model.autoSize ? true : false,\n        bubble: model.bubble ? true : false,\n        facade: model.facade ? true : false,\n        height: model.height || 70,\n        helpText: model.helpText ? model.helpText : '',\n        id: model.id ? model.id : undefined,\n        label: ParseForAlias(model.label),\n        maxlength: model.maxlength || 255,\n        metadata: model.metadata,\n        maxHeight: model.maxHeight || null,\n        name: model.name ? model.name : null,\n        noInitialValue: model.noInitialValue ? model.noInitialValue : false,\n        pattern: typeof model.pattern === 'string' && model.pattern.length ? model.pattern : null,\n        patch: model.patch,\n        readonly: model.readonly,\n        session: model.session,\n        sessionPath: model.sessionPath,\n        validators: model.required ? [Validators.required, Validators.maxLength(model.maxlength || 255)] : [Validators.maxLength(model.maxlength || 255)],\n        value: FieldItemTextValue(model, core),\n      };\n      config = new TextareaConfig(<TextareaConfigInterface>CleanObject(configInterface));\n      break;\n    case 'label':\n      value = typeof model.value !== 'undefined' && model.value !== null ? ParseModelValue(model.value, core) : IsObject(core.entity, true) && IsObject(core.entity, true) && typeof core.entity[(model.name ? model.name : null)] !== 'undefined' ? core.entity[(model.name ? model.name : null)] : '';\n      if (model.transformation && typeof (value) !== 'undefined') {\n        value = PopTransform(value, model.transformation);\n      }\n\n      if (typeof (model.copyLabelDisplay) !== 'undefined') {\n        model.copyLabelDisplay = ParseModelValue(model.copyLabelDisplay, core);\n        if (model.copyLabelDisplay && model.copyLabelDisplayTransformation) {\n          model.copyLabelDisplay = PopTransform(model.copyLabelDisplay, model.copyLabelDisplayTransformation);\n        }\n      }\n\n      if (typeof (model.copyLabelBody) !== 'undefined') {\n        model.copyLabelBody = ParseModelValue(model.copyLabelBody, core);\n        if (model.copyLabelBody && model.copyLabelBodyTransformation) {\n          model.copyLabelBody = PopTransform(model.copyLabelBody, model.copyLabelBodyTransformation);\n        }\n      }\n\n      if (typeof (model.copyValueDisplay) !== 'undefined') {\n        model.copyValueDisplay = model.copyValueDisplay !== null ? ParseModelValue(model.copyValueDisplay, core) : '';\n        if (model.copyValueDisplay && model.copyValueDisplayTransformation) {\n          model.copyValueDisplay = PopTransform(model.copyValueDisplay, model.copyValueDisplayTransformation);\n        }\n      }\n\n      if (typeof (model.copyValueBody) !== 'undefined') {\n        model.copyValueBody = model.copyValueBody !== null ? ParseModelValue(model.copyValueBody, core) : '';\n        if (model.copyValueBody && model.copyValueBodyTransformation) {\n          model.copyValueBody = PopTransform(model.copyValueBody, model.copyValueBodyTransformation);\n        }\n      }\n\n      if (typeof (model.valueButtonDisplay) !== 'undefined') {\n        model.valueButtonDisplay = ParseModelValue(model.valueButtonDisplay, core);\n        if (model.valueButtonDisplay && model.valueButtonDisplayTransformation) {\n          model.valueButtonDisplay = PopTransform(model.valueButtonDisplay, model.valueButtonDisplayTransformation);\n        }\n      }\n\n      configInterface = <LabelConfigInterface>CleanObject({\n        name: model.name ? model.name : null,\n        label: ParseForAlias(model.label),\n        button: model.button,\n        border: model.border,\n        icon: model.icon,\n        iconType: model.iconType,\n        html: model.html,\n        textOverflow: model.textOverflow ? model.textOverflow : 'wrap',\n\n        labelButton: !!model.labelButton,\n        copyLabel: !!model.copyLabel,\n        copyLabelBody: model.copyLabelBody ? model.copyLabelBody : null,\n        copyLabelBodyTransformation: model.copyLabelBodyTransformation ? model.copyLabelBodyTransformation : null,\n        copyLabelDisplay: model.copyLabelDisplay ? model.copyLabelDisplay : null,\n        copyLabelDisplayTransformation: model.copyLabelDisplayTransformation ? model.copyLabelDisplayTransformation : null,\n\n\n        copyValue: !!model.copyValue,\n        copyValueBody: model.copyValueBody ? model.copyValueBody : null,\n        copyValueBodyTransformation: model.copyValueBodyTransformation ? model.copyValueBodyTransformation : null,\n        copyValueDisplay: model.copyValueDisplay ? model.copyValueDisplay : null,\n        copyValueDisplayTransformation: model.copyValueDisplayTransformation ? model.copyValueDisplayTransformation : null,\n\n        valueButton: !!model.valueButton,\n        valueButtonDisabled: !!model.valueButtonDisabled,\n        valueButtonDisplay: model.valueButtonDisplay ? model.valueButtonDisplay : null,\n        valueButtonDisplayTransformation: model.valueButtonDisplayTransformation ? model.valueButtonDisplayTransformation : null,\n\n        value: value,\n        link: model.link || false,\n        helpText: model.helpText ? model.helpText : undefined,\n        route: model.route && !isDialogLimit ? ParseModelValue(model.route, core) : '',\n        metadata: model.metadata,\n      });\n      config = new LabelConfig(<LabelConfigInterface>CleanObject(configInterface));\n      break;\n    case 'textstring':\n      configInterface = <TextConfigInterface>{\n        border: model.border,\n        className: model.className,\n        header: model.header,\n        id: model.id ? model.id : undefined,\n        name: model.name ? model.name : null,\n        size: model.size,\n        textOverflow: model.textOverflow,\n        value: model.value ? model.value : '',\n        warning: model.warning\n      };\n      config = new TextConfig(<TextConfigInterface>CleanObject(configInterface));\n      break;\n    case 'button':\n      configInterface = <ButtonConfigInterface>{\n        bubble: model.bubble ? true : false,\n        disabled: model.disabled,\n        facade: model.facade ? true : false,\n        icon: model.icon ? model.icon : 'help_outline',\n        helpText: model.helpText ? model.helpText : undefined,\n        id: model.id ? model.id : undefined,\n        metadata: model.metadata,\n        name: model.name ? model.name : null,\n        patch: model.patch,\n        value: FieldItemTextValue(model, core),\n      };\n      config = new ButtonConfig(<ButtonConfigInterface>CleanObject(configInterface));\n      break;\n    case 'metadata':\n      const val = IsDefined(model.value) ? model.value : IsObject(core.entity, true) && model.name in core.entity ? core.entity[model.name] : null;\n      config = new MetadataConfig(model.name, val);\n      break;\n    default:\n      PopLog.warn(`FieldItemModelConfig`, `buildCoreFieldItemConfig`, model.form);\n      break;\n  }\n\n  return config;\n}\n\n\n","import {\n  Component,\n  ElementRef,\n  EventEmitter,\n  HostBinding,\n  Input,\n  OnDestroy,\n  OnInit,\n  Output\n} from '@angular/core';\nimport {\n  CoreConfig,\n  EntityExtendInterface,\n  EventPromiseCallback,\n  PopBaseEventInterface,\n  PopEnv,\n  PopTemplate\n} from './pop-common.model';\n\nimport {\n  HasEvents,\n  HasCore,\n  ComponentTraitContainerInterface,\n  ComponentDomInterface,\n  GetComponentAssetContainer,\n  GetComponentTraitContainer,\n  DestroyComponentDom,\n  GetComponentDomContainer,\n  ComponentLogInterface,\n} from './pop-common-dom.models';\n\nimport {Subscription} from 'rxjs';\nimport {\n  GetHttpErrorMsg,\n  IsArray,\n  IsCallableFunction,\n  IsObject,\n  IsString,\n  JsonCopy,\n  StorageGetter,\n} from './pop-common-utility';\nimport {PopDomService} from './services/pop-dom.service';\nimport {PopTabMenuService} from './modules/base/pop-tab-menu/pop-tab-menu.service';\nimport {EvaluateWhenConditions, IsValidFieldPatchEvent} from './modules/entity/pop-entity-utility';\nimport {HttpErrorResponse} from '@angular/common/http';\n\n\n@Component({\n  selector: 'lib-pop-base-component',\n  template: `Base Component`,\n})\nexport class PopExtendComponent implements HasEvents, HasCore, OnInit, OnDestroy {\n  @Input() position = 1;\n  @Input() core: CoreConfig = <CoreConfig>{};\n  @Output() events: EventEmitter<PopBaseEventInterface> = new EventEmitter<PopBaseEventInterface>();\n  @Input() extension: EntityExtendInterface;\n\n  @Input() onLoad?: EventPromiseCallback;\n  @Input() onEvent?: EventPromiseCallback;\n  @Input() onUnload?: EventPromiseCallback;\n\n  @Input() when: any[] = null;\n  @HostBinding('class.sw-hidden') @Input() hidden = false;\n\n  name: string;\n  internal_name: string;\n  protected id: string | number = 1;\n\n  protected el: ElementRef;\n  protected trait = <ComponentTraitContainerInterface>GetComponentTraitContainer();\n  protected asset;\n  protected srv;\n  protected _domRepo: PopDomService;\n  protected _tabRepo: PopTabMenuService;\n\n  /**\n   * The Dom is boiler plate for managing the state and assets of the html view\n   */\n  public dom: ComponentDomInterface;\n\n  public log: ComponentLogInterface;\n\n  /**\n   * The ui is a container for assets that are created for the html view specifically\n   */\n  public ui;\n\n\n  constructor() {\n    if (!this.asset) this.asset = GetComponentAssetContainer();\n    if (!this.ui) this.ui = GetComponentAssetContainer();\n    this.log = this._initializeLogSystem();\n    this.dom = this._initializeDom();\n  }\n\n\n  ngOnInit() {\n    this.dom.loading();\n    const init = new Promise<boolean>(async (resolve) => {\n      await this.dom._extend();\n      await this.dom.configure();\n      await this.dom.register();\n      await this.dom.proceed();\n      if (IsCallableFunction(this.onLoad)) {\n        await this.onLoad(this.core, <PopBaseEventInterface>{\n          source: this.name,\n          type: 'component',\n          name: 'onLoad',\n          data: this\n        }, this.dom);\n      }\n      this.dom.ready();\n      return resolve(true);\n    });\n\n    init.then(() => {\n      this.log.init();\n    });\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy() {\n    const destroy = new Promise<boolean>(async (resolve) => {\n      if (IsCallableFunction(this.onUnload)) {\n        await this.onUnload(this.core, <PopBaseEventInterface>{\n          source: this.name,\n          type: 'component',\n          name: 'onUnload',\n          data: this\n        });\n      }\n      await this.dom.unload();\n      if (this.dom.repo) this.dom.store();\n      this.dom.destroy();\n\n      return resolve(true);\n    });\n    destroy.then(() => {\n      this.log.destroy();\n    });\n  }\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  private _initializeDom(): ComponentDomInterface {\n    return <ComponentDomInterface>{\n      ...GetComponentDomContainer(), ...{\n        /**\n         * Initialize the component in a loading state\n         */\n        loading: () => {\n          this.dom.error = {code: 0, message: ''};\n          this.dom.state.loading = true;\n          this.dom.state.loader = false;\n          this.dom.setTimeout('delay-loader-trigger', () => {\n            this.dom.state.loader = true;\n          }, 500);\n        },\n\n        /**\n         * Configure the component tailored to its specific needs\n         */\n        _extend: (): Promise<boolean> => {\n          return new Promise((resolve) => {\n            const repos = Object.keys(this).filter((key: string) => String(key).startsWith('_') && String(key).endsWith('Repo') && String(key).length > 6 && IsObject(this[key], true));\n            if (IsArray(repos, true)) {\n              if (!(IsObject(this.srv))) this.srv = {};\n              repos.map((repoName: string) => {\n                const srvName = repoName.replace('_', '').replace('Repo', '');\n                // this.log.info( `Transferred ${repoName} to srv container as ${srvName}` );\n                if (srvName === 'dom') {\n                  this.dom.repo = this[repoName];\n                } else {\n                  this.srv[srvName] = this[repoName];\n                }\n                delete this[repoName];\n              });\n            }\n            return resolve(true);\n          });\n        },\n\n        /**\n         * Configure the component tailored to its specific needs\n         */\n        configure: (): Promise<boolean> => {\n          return new Promise((resolve) => {\n            return resolve(true);\n          });\n        },\n\n        /**\n         * Configure the component tailored to its specific needs\n         */\n        proceed: (): Promise<boolean> => {\n          return new Promise((resolve) => {\n            return resolve(true);\n          });\n        },\n\n\n        /**\n         * Trigger the view to render\n         */\n        ready: () => {\n          this.dom.setTimeout('delay-loader-trigger', null);\n          this.dom.state.loading = false;\n          this.dom.state.loaded = true;\n          this.dom.state.loader = false;\n          this.dom.state.refresh = false;\n          if (IsArray(this.when, true)) {\n            this.log.info(`eval when`, this.when);\n            this.hidden = !EvaluateWhenConditions(this.core, this.when, this.core);\n          }\n        },\n\n        /**\n         * Trigger the view to refresh\n         */\n        refreshing: () => {\n          this.dom.state.refresh = true;\n        },\n\n\n        /**\n         * Register this component in the PopDomService so that session, state, etc can be preserved\n         * It will also bind events to the appropriate handlers\n         * CoreConfig is obviously something that you must have for any of this to work\n         */\n        register: (): Promise<boolean> => {\n          return new Promise<boolean>(async (resolve) => {\n            if (this.el && !this.dom.width.outer) this.dom.width.outer = this.el.nativeElement.getBoundingClientRect().width;\n            if (IsObject(this.core, true)) {\n              if (IsObject(this.core.access, true)) this.dom.access = JsonCopy(this.core.access);\n              if (typeof this.dom.handler.core === 'function' || IsArray(this.when, true)) {\n                this.dom.setSubscriber('on-core-event', this.core.channel.subscribe(async (event: PopBaseEventInterface) => {\n                  // if( event.source !== this.name ){\n                  if (IsValidFieldPatchEvent(this.core, event) && IsArray(this.when)) {\n                    this.log.info('eval when', this.when);\n                    this.dom.setTimeout('eval-when', () => {\n                      this.hidden = !EvaluateWhenConditions(this.core, this.when, this.core);\n                    }, 50);\n                  }\n\n                  if (event.source && event.target) {\n                    if (event.source && event.source === this.name) return;\n                    if (event.target && String(event.target).search(this.name) === -1) return;\n                  }\n                  if (IsCallableFunction(this.dom.handler.core)) this.dom.handler.core(IsObject(this.core, true) ? this.core : null, event);\n                  // }\n                }));\n              }\n            }\n\n            if (this.name && typeof this.id !== 'undefined') {\n              if (this.dom.repo && typeof this.dom.repo.onRegister === 'function') {\n                this.dom.repo.onRegister(this);\n              }\n            }\n\n            if (IsCallableFunction(this.onEvent)) {\n              this.dom.setSubscriber(`on-event`, this.events.subscribe(async (event: PopBaseEventInterface) => {\n                await this.onEvent(this.core, event, this.dom);\n                this.log.event(this.name, event);\n              }));\n            }\n            return resolve(true);\n          });\n        },\n\n\n        find: (assetType: 'component' | 'field' | 'el', name: string | number, id: string | number = 1): any => {\n          let asset = null;\n          if (assetType === 'field') {\n            const fieldRepo = StorageGetter(this.dom, ['repo', 'ui', 'fields']);\n            asset = fieldRepo.get(name);\n            asset = StorageGetter(asset, ['inputs', 'config']);\n          } else if (assetType === 'component') {\n            asset = StorageGetter(this.dom, ['repo', 'components', String(name)]);\n            if (IsObject(asset) && id in asset) {\n              asset = asset[id];\n            } else {\n              asset = null;\n            }\n          } else if (this.el && assetType === 'el') {\n            asset = this.el.nativeElement.querySelector(name);\n          }\n\n          return asset;\n        },\n\n        focus: (querySelector: string, delay: 50): void => {\n          if (this.el && IsString(querySelector, true)) {\n            this.dom.setTimeout('focus-child-element-delay', () => {\n              this.dom.setTimeout('focus-child-element', () => {\n                const childEl = this.el.nativeElement.querySelector(querySelector);\n                if (childEl) {\n                  childEl.focus();\n                }\n              }, 0);\n            }, delay);\n          }\n        },\n\n        setError(err: HttpErrorResponse = null, modal = false) {\n          if (IsObject(err)) {\n            if (modal) {\n              PopTemplate.error({code: (err.status ? err.status : 422), message: GetHttpErrorMsg(err)});\n            } else {\n              this.dom.error.code = err.status ? err.status : 422;\n              this.dom.error.message = GetHttpErrorMsg(err);\n            }\n          } else {\n            this.dom.error.message = '';\n          }\n        },\n\n        /**\n         * Configure operations that need to happen when this component is going to be destroyed\n         */\n        unload: (): Promise<boolean> => {\n          return new Promise<boolean>(async (resolve) => {\n            return resolve(true);\n          });\n        },\n        /**\n         * Preferred method of setting a subscriber\n         * @param subscriptionKey\n         * @param subscription\n         */\n        setSubscriber: (subscriptionKey: string, subscription: Subscription = null) => {\n          if (subscriptionKey && this.dom.subscriber && subscriptionKey in this.dom.subscriber && this.dom.subscriber[subscriptionKey] && typeof this.dom.subscriber[subscriptionKey].unsubscribe === 'function') {\n            this.dom.subscriber[subscriptionKey].unsubscribe();\n          }\n          if (subscription) {\n            this.dom.subscriber[subscriptionKey] = subscription;\n          }\n        },\n        /**\n         * Preferred method of setting a timeout\n         * @param timeoutKey\n         * @param callback\n         * @param delay\n         */\n        setTimeout: (timeoutKey: string, callback = null, delay = 250) => {\n          if (timeoutKey && this.dom.delay && timeoutKey in this.dom.delay && this.dom.delay[timeoutKey]) {\n            clearTimeout(this.dom.delay[timeoutKey]);\n          }\n          if (typeof callback === 'function') {\n            this.dom.delay[timeoutKey] = setTimeout(callback, delay);\n          }\n        },\n\n        setHeight: (parentHeight: number, overhead: number) => {\n          if (this.name && parentHeight > 0) {\n            this.dom.overhead = overhead;\n            this.dom.height = {\n              outer: parentHeight,\n              inner: parentHeight - overhead,\n              split: +((parentHeight - overhead) / 2),\n              default: 0\n            };\n          }\n        },\n\n        setHeightWithParent: (parentClassName: string = null, overhead: number = 0, defaultHeight: number): Promise<boolean> => {\n          return new Promise((resolve) => {\n            if (this.el) {\n              this.dom.waitForParent(this.el, parentClassName, 10, 10).then((parentEl: Element) => {\n                if (parentEl) {\n                  this.dom.waitForParentHeight(parentEl).then((parentHeight: number) => {\n                    if (parentHeight < defaultHeight) parentHeight = defaultHeight;\n                    if (parentHeight) {\n                      this.dom.setHeight(+parentHeight, overhead);\n                      resolve(true);\n                    } else {\n                      this.dom.setHeight(defaultHeight, overhead);\n                      resolve(true);\n                    }\n                  });\n                } else {\n                  this.dom.setHeight(defaultHeight, overhead);\n                  resolve(true);\n                }\n              });\n            } else {\n              resolve(false);\n            }\n          });\n        },\n\n        focusNextInput(el: ElementRef): void {\n          if (el) {\n            let limit = 5;\n            let input = null;\n            let next = el.nativeElement.nextElementSibling;\n            while (limit && !input) {\n              input = next.querySelector('input[type=text]');\n              if (!input) {\n                input = next.querySelector('input[type=checkbox]');\n              }\n              if (!input) {\n                input = next.querySelector('mat-select');\n              }\n\n              if (!input) {\n                input = next.querySelector('button');\n              }\n\n              if (!input) {\n                if (next.nativeElement && next.nativeElement.nextElementSibling) {\n                  next = next.nativeElement.nextElementSibling;\n                } else if (next.nextElementSibling) {\n                  next = <Element>next;\n                  next = next.nextElementSibling;\n                } else {\n                  limit = 0;\n                }\n              }\n              limit--;\n            }\n\n            if (input) {\n              if (input instanceof ElementRef) {\n                input.nativeElement.focus();\n              } else if (IsCallableFunction(next.focus)) {\n                input.focus();\n              }\n            }\n          }\n        },\n\n        setWithComponentInnerHeight: (component: string, componentId = 1, overhead: number, defaultHeight: number): Promise<number> => {\n          return new Promise((resolve) => {\n            if (this.dom.repo) {\n              let height = this.dom.repo.getComponentHeight(component);\n              if (height && height.inner) {\n                height = height.inner;\n              } else {\n                height = defaultHeight;\n              }\n\n              this.dom.setHeight(+height, overhead);\n              resolve(this.dom.height.inner);\n            } else {\n              this.dom.setHeight(+defaultHeight, overhead);\n              resolve(this.dom.height.inner);\n            }\n          });\n        },\n\n        waitForParent: (el: ElementRef, className: string = null, time: number = 50, counter: number = 5) => {\n          let interval;\n          let parentEl;\n          return new Promise((resolve) => {\n            interval = setInterval(() => {\n              parentEl = this.dom.findParentElement(el, className);\n              if (!counter || (parentEl)) {\n                clearInterval(interval);\n                return resolve(parentEl);\n              }\n              counter--;\n            }, time);\n          });\n        },\n\n        waitForParentHeight: (el: Element, time: number = 5, counter: number = 10) => {\n          return new Promise((resolve) => {\n            const interval = setInterval(() => {\n              if (!counter || (el && el.clientHeight)) {\n                clearInterval(interval);\n                return resolve(el.clientHeight);\n              }\n              counter--;\n            }, time);\n          });\n        },\n\n        findParentElement: (el: ElementRef, className: string = null) => {\n          let attempts = 10;\n          let found;\n          if (el && el.nativeElement && el.nativeElement.parentElement) {\n            let parent = el.nativeElement.parentElement;\n            while (!found && attempts) {\n              if (parent) {\n                if (className) {\n                  if (parent.classList && parent.classList.contains(className)) {\n                    found = parent;\n                  }\n                } else {\n                  found = parent;\n                }\n                if (!found) {\n                  parent = parent.parentElement;\n                }\n              }\n              attempts--;\n            }\n          }\n          return found;\n        },\n        store: (key: string = null) => {\n          if (this.dom.repo && this.name && this.id) {\n            return this.dom.repo.onSession(this, key);\n          }\n        },\n        destroy: () => {\n          if (this.dom) DestroyComponentDom(this.dom);\n        }\n      }\n    };\n  }\n\n  private _initializeLogSystem(): ComponentLogInterface {\n    return <ComponentLogInterface>{\n      repo: {\n        message: (message: string) => {\n          return `%c${message}`;\n        },\n        color: (type: string) => {\n          let color = 'aqua';\n          switch (type) {\n            case 'warn':\n              color = 'orange';\n              break;\n            case 'force':\n            case 'error':\n            case 'destroy':\n              color = 'red';\n              break;\n            case 'info':\n              color = 'aqua';\n              break;\n            case 'event':\n              color = 'yellow';\n              break;\n            case 'onSession':\n            case 'event-trigger':\n              color = 'gold';\n              break;\n            case 'cache-in':\n              color = 'green';\n              break;\n            case 'cache-out':\n              color = 'darkgreen';\n              break;\n            case 'dom':\n              color = 'brown';\n              break;\n            case 'debug':\n              color = 'pink';\n              break;\n            case 'api':\n              color = 'darkgreen';\n              break;\n            case 'config':\n              color = 'pink';\n              break;\n            case 'theme':\n              color = 'purple';\n              break;\n            default:\n              color = 'aqua';\n              break;\n          }\n          return `color: ${color}`;\n        },\n\n\n        enabled: (type: string = '', component: string = null) => {\n          if (IsObject(PopEnv, true) && PopEnv.debug) {\n            if (type && Array.isArray(PopEnv.debugTypes)) {\n              if (PopEnv.debugTypes.includes(type)) return true;\n            }\n            if (typeof PopEnv.debugLevel === 'number') {\n              if (['error', 'onSession'].includes(type) && PopEnv.debug >= 1) {\n                return true;\n              }\n              if (['warning', 'info'].includes(type) && PopEnv.debug >= 2) {\n                return true;\n              }\n              if (['events'].includes(type) && PopEnv.debug >= 2) {\n                return true;\n              }\n            }\n            if (component && typeof PopEnv.debugComponents === 'string') {\n              return PopEnv.debugComponents.search(component) > -1;\n            }\n          }\n          return false;\n        },\n\n\n        init: (componentName: string, message: string, data: any = '', force = false) => {\n          const type = 'init';\n          if (this.log.repo.enabled(type, componentName) || force) console.log(this.log.repo.message(`${componentName}:${message}`), this.log.repo.color((force ? 'force' : type)), data);\n        },\n\n        debug: (componentName: string, message: string, data: any = '', force = false) => {\n          const type = 'debug';\n          if (this.log.repo.enabled(type, componentName) || force) console.log(this.log.repo.message(`${componentName}:${message}`), this.log.repo.color((force ? 'force' : type)), data);\n        },\n\n\n        cache: (componentName: string, message: string, set = true, force = false) => {\n          let type = 'cache';\n          if (this.log.repo.enabled(type, componentName) || force) {\n            type = set ? 'cache-in' : 'cache-out';\n            console.log(this.log.repo.message(`${componentName}:${message}`), this.log.repo.color((force ? 'force' : type)));\n          }\n        },\n\n\n        warn: (componentName: string, message: string, data: any = '', force = false) => {\n          const type = 'warn';\n          if (this.log.repo.enabled(type, componentName) || force) console.log(this.log.repo.message(`${componentName}:${message}`), this.log.repo.color((force ? 'force' : type)), data);\n        },\n\n\n        info: (componentName: string, message: string, data: any = '', force = false) => {\n          const type = 'info';\n          if (this.log.repo.enabled(type, componentName) || force) console.log(this.log.repo.message(`${componentName}:${message}`), this.log.repo.color((force ? 'force' : type)), data);\n        },\n\n\n        theme: (componentName: string, message: string, data: any = '', force = false) => {\n          const type = 'theme';\n          if (this.log.repo.enabled(type, componentName) || force) console.log(this.log.repo.message(`${componentName}:${message}`), this.log.repo.color((force ? 'force' : type)), data);\n        },\n\n\n        event: (componentName: string, message: string, event: PopBaseEventInterface, force = false) => {\n          const type = 'event';\n          if (this.log.repo.enabled(type, componentName) || force) console.log(this.log.repo.message(`${componentName}:${message}`), this.log.repo.color((force ? 'force' : type)), event);\n        },\n\n\n        error: (componentName: string, message: string, data: any = '', force = false) => {\n          const type = 'error';\n          if (this.log.repo.enabled(type, componentName) || force) {\n            console.log(this.log.repo.message(`${componentName}:${message}`), this.log.repo.color((force ? 'force' : type)), data);\n            // throw new Error('message');\n          }\n        }\n      },\n\n      init: () => {\n        if (this.log.repo.enabled('init', this.name)) console.log(this.log.repo.message(`${this.name}:init`), this.log.repo.color('init'), this);\n      },\n\n      debug: (msg = 'Debug', data: any = '') => {\n        if (this.log.repo.enabled('debug', this.name)) console.log(this.log.repo.message(`${this.name}:${msg}`), this.log.repo.color('debug'), data);\n      },\n\n      error: (msg = 'Error', error: any = '') => {\n        if (this.log.repo.enabled('error', this.name)) console.log(this.log.repo.message(`${this.name}:${msg}`), this.log.repo.color('error'), error);\n      },\n\n      warn: (msg = 'Warning', data: any = '') => {\n        if (this.log.repo.enabled('warn', this.name)) console.log(this.log.repo.message(`${this.name}:${msg}`), this.log.repo.color('error'), data);\n      },\n\n      info: (msg = 'info', data: any = '') => {\n        if (this.log.repo.enabled('event', this.name)) console.log(this.log.repo.message(`${this.name}:${msg}`), this.log.repo.color('info'), data);\n      },\n\n      event: (msg = 'event', event: PopBaseEventInterface) => {\n        if (this.log.repo.enabled('event', this.name)) console.log(this.log.repo.message(`${this.name}:${msg}`), this.log.repo.color('event'), event);\n      },\n\n      config: (msg = 'config', config: any = '') => {\n        if (this.log.repo.enabled('config', this.name)) console.log(this.log.repo.message(`${this.name}:${msg}`), this.log.repo.color('config'), config);\n      },\n      destroy: () => {\n        if (this.log.repo.enabled('destroy', this.name)) console.log(this.log.repo.message(`${this.name}:destroy`), this.log.repo.color('destroy'));\n      },\n    };\n  }\n}\n","import {Component, Inject, OnInit, ViewChild, ElementRef, isDevMode, OnDestroy} from '@angular/core';\nimport {PopBaseService} from '../../../services/pop-base.service';\nimport {App, AppMenu, Business, AuthDetails, AuthUser} from '../../../pop-common-token.model';\nimport {IsArray, IsObject, IsString, ObjectsMatch, SetSiteVar} from '../../../pop-common-utility';\nimport {\n  AppGlobalInterface,\n  KeyMap,\n  PopAliasRouteMap,\n  PopEnv,\n  PopHref,\n  PopTemplate,\n  ServiceInjector\n} from '../../../pop-common.model';\nimport {PopMenuService} from './pop-menu.service';\nimport {PopCredentialService} from '../../../services/pop-credential.service';\nimport {PopExtendComponent} from '../../../pop-extend.component';\nimport {Router} from '@angular/router';\n\n\n@Component({\n  selector: 'lib-pop-menu',\n  templateUrl: './pop-menu.component.html',\n  styleUrls: ['./pop-menu.component.scss']\n})\nexport class PopMenuComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @ViewChild('mmNavRef') mmNavRef: ElementRef;\n  public name = 'PopMenuComponent';\n\n\n  protected asset = {\n    existingBusinesses: <KeyMap<Business>>undefined\n  };\n\n  public ui = {\n    alternate_businesses: <any[]>[],\n    menus: {\n      all: <any[]>[],\n      more: <any[]>[]\n    },\n    user: <AuthUser>undefined\n  };\n\n  protected srv = {\n    base: <PopBaseService>ServiceInjector.get(PopBaseService),\n    credential: <PopCredentialService>ServiceInjector.get(PopCredentialService),\n    menu: <PopMenuService>ServiceInjector.get(PopMenuService),\n    router: <Router>ServiceInjector.get(Router),\n  };\n\n  constructor(\n    @Inject('APP_GLOBAL') private APP_GLOBAL: AppGlobalInterface,\n  ) {\n    super();\n\n    this.dom.configure = (): Promise<boolean> => {\n\n      // this component set the outer height boundary of this view\n      return new Promise(async (resolve) => {\n        await Promise.all([\n          this._setInitialConfig()\n        ]);\n        return resolve(true);\n      });\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise(async (resolve) => {\n        if (!this.dom.state.checkedContent && this.mmNavRef) {\n          this.onUpdateMenus();\n          this.dom.state.checkedContent = true;\n        }\n        return resolve(true);\n      });\n    };\n  }\n\n\n  ngOnInit() {\n    super.ngOnInit();\n  }\n\n\n\n  /**\n   * The user click to a app nav menu\n   * @param appPath\n   */\n  onChangeApp(appPath: string): void {\n    if (isDevMode() && IsString(PopHref)) { // Auto Login/Logout since there is no access to the prime-user-app\n      if (appPath === '/login') {\n        if (PopEnv.username && PopEnv.password) {\n          PopTemplate.lookBusy(30);\n          this.srv.credential.authenticate({\n            username: PopEnv.username,\n            password: PopEnv.password\n          }).then((auth: AuthDetails) => {\n            if (IsObject(auth, true)) {\n              return window.location.reload();\n            } else {\n              PopTemplate.error({message: String(auth), code: 500});\n            }\n          });\n        }\n      } else if (appPath === '/logout') {\n        PopTemplate.goodbye();\n        setTimeout(() => {\n          this.srv.credential.clear().subscribe(() => {\n            this.srv.base.switchApps(`/` + (IsString(PopHref, true) ? PopHref : ''));\n          });\n        }, 0);\n      } else {\n        PopTemplate.notify(`You Shall not Pass! Actually this link will take you to nowhere, so its been disabled.`);\n      }\n    } else {\n      this.srv.base.switchApps(appPath);\n    }\n  }\n\n\n  /**\n   * Temporary fx to help test if the menu can auto update itself to external changes\n   */\n  onAuthVerification() {\n    PopTemplate.verify();\n  }\n\n\n  /**\n   * A user can select from a list of businesses that their prime user has access to\n   * @param appPath\n   */\n  onChangeBusiness(id: number): void {\n    let slugs = <any>window.location.href.split(PopHref + '/').pop().trim();\n    slugs = <string[]>slugs.split('/');\n    slugs = slugs.slice(0, 1);\n    const path = slugs.join('/');\n    const redirect = `${window.location.origin}/${PopHref}/${slugs.join('/')}`;\n    const originalRoute = IsObject(PopAliasRouteMap, true) && path in PopAliasRouteMap ? PopAliasRouteMap[path] : null;\n    SetSiteVar('App.redirect', (originalRoute ? originalRoute : redirect));\n    this.srv.menu.changeBusiness(id);\n  }\n\n\n  /**\n   * Determine the presentation of the nav menus\n   */\n  onUpdateMenus() {\n    if (!this.dom.state.authenticated) {\n      this.ui.menus.all = [];\n      this.ui.menus.more = [];\n    } else {\n      const moreMenus = [];\n      let talliedMenuSize = 0;\n      const children = this.mmNavRef.nativeElement.children;\n      const maxWidth = this.mmNavRef.nativeElement.offsetWidth - 15;\n\n      for (let i = 0; i < children.length; i++) {\n        talliedMenuSize += children[i].offsetWidth;\n        if (talliedMenuSize < maxWidth) {\n          children[i].style.visibility = 'visible';\n        } else {\n          children[i].style.visibility = '';\n          moreMenus.push(this.ui.menus.all[i]);\n        }\n      }\n\n      this.ui.menus.more = moreMenus;\n    }\n  }\n\n\n  ngOnDestroy() {\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  /**\n   * Set the initial config for this component\n   * @private\n   */\n  private _setInitialConfig() {\n    return new Promise(async (resolve) => {\n\n      this.dom.active.path = `/${window.location.pathname.split('/')[1]}`;\n      this.dom.active.business = <Business>undefined;\n      this.dom.state.authenticated = false;\n      this.dom.state.checkedContent = false;\n      this.dom.state.isDevMode = isDevMode();\n\n      this._initialize();\n\n      this.dom.setSubscriber('init', this.APP_GLOBAL.init.subscribe((val: boolean) => {\n        if (val) {\n          this.dom.setTimeout(`init`, () => {\n            this._initialize();\n          }, 100);\n        }\n      }));\n      return resolve(true);\n    });\n  }\n\n  /**\n   * Initialize the component\n   * This is designed so that at any time a verification event can be fired from the Initializer module, and the menu can respond to the business(app)s that is stored in the new Auth Token\n   * Future:  A web socket will be able to detect a change in security+access of apps and trigger the menu to auto update\n   */\n  private _initialize() {\n    this.dom.state.authenticated = this.srv.menu.isAuthenticated();\n    this.ui.user = this.srv.base.getAuthPrimeUser();\n    this._loadBusiness();\n    setTimeout(() => {\n      this.onUpdateMenus();\n    }, 0);\n  }\n\n\n  /**\n   * Set the menus for the current business, apps across the top\n   * @param business\n   */\n  private _loadBusiness(): void {\n    // Token details should contain all the info to populate the menu bar.\n    const businesses = this.srv.base.getAuthBusinesses();\n    if (IsObject(businesses, true) && !(ObjectsMatch(this.asset.existingBusinesses, businesses))) { // check to see if an update is really required\n      this.asset.existingBusinesses = businesses;\n      // Set non-business unit stuff.\n      // Get the current buId from onSession storage.\n      const businessId = this.srv.base.getCurrentBusinessId();\n      this.ui.alternate_businesses = [];\n      // If a business unit has been found then populate the necessary objects.\n      if (businessId) {\n        Object.keys(businesses).map((buId) => {\n          const business = businesses[buId];\n          if (business.id === businessId) {\n            this.dom.active.business = <Business>{\n              id: business.id,\n              name: business.name,\n              short_name: business.short_name,\n              logo_main_url: business.logo_main_url,\n              logo_small_url: business.logo_small_url,\n            };\n            this._setBusinessAppMenus(business);\n          } else {\n            this.ui.alternate_businesses.push({\n              id: business.id,\n              name: business.name,\n              short_name: business.short_name,\n              logo_main_url: business.logo_main_url,\n              logo_small_url: business.logo_small_url,\n            });\n          }\n        });\n      }\n    }\n  }\n\n\n  /**\n   * This set the nav menu across the top of template\n   * @param business\n   */\n  private _setBusinessAppMenus(business: Business) {\n    if (business) {\n      if (IsArray(business.apps, true)) {\n        this.ui.menus.all = business.apps.filter((app: App) => {\n          return +app.active;\n        }).sort(function (a, b) {\n          if (a.sort < b.sort) return -1;\n          if (a.sort > b.sort) return 1;\n          return 0;\n        }).map((app: App) => {\n          return this._extractAppMenu(app);\n        });\n      } else if (IsObject(business.apps, true)) {\n        this.ui.menus.all = Object.keys(business.apps).map((appKey) => {\n          return this._extractAppMenu(business.apps[appKey]);\n        });\n      }\n    }\n  }\n\n\n  /**\n   * This fx will extract the necessary data out of the app data\n   * @param app\n   * @private\n   */\n  private _extractAppMenu(app: App): AppMenu {\n    return <AppMenu>{\n      name: app.label ? app.label : app.name,\n      path: `/${String(app.name).toLowerCase()}`,\n      description: '',\n      short_description: '',\n      sort: app.sort,\n      icon: '',\n    };\n  }\n}\n\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatButtonModule } from \"@angular/material/button\";\nimport { PopMenuComponent} from './pop-menu.component';\nimport { PopMenuService } from './pop-menu.service';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport {MatFormFieldModule} from '@angular/material/form-field';\nimport { MatInputModule} from '@angular/material/input';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    HttpClientModule,\n    MatMenuModule,\n    MatIconModule,\n    MatTooltipModule,\n    MatButtonModule,\n    MatFormFieldModule,\n    MatInputModule\n  ],\n  declarations: [\n    PopMenuComponent,\n  ],\n  providers: [\n    PopMenuService,\n  ],\n  exports: [\n    PopMenuComponent\n  ]\n})\nexport class PopMenuModule { }\n","import { Component } from '@angular/core';\nimport { RandomArrayElement } from '../../../pop-common-utility';\n\n\n@Component({\n  template: `\n    <div class=\"pop-template-ajax-loader\">\n      <div class=\"pop-template-ajax-row\">\n        <h5>{{expression}}</h5>\n      </div>\n      <div class=\"pop-template-ajax-row\">\n        <lib-main-spinner\n          [options]=\"{strokeWidth:10, color:'primary', diameter:40}\">\n        </lib-main-spinner>\n      </div>\n    </div>\n  `,\n  styles: [ `\n    .pop-template-ajax-loader {\n      display: flex;\n      flex-direction: column;\n      width: 100%;\n      min-height: 30px;\n      justify-content: center;\n      align-items: center;\n    }\n\n    .pop-template-ajax-row {\n      display: flex;\n      width: 100%;\n      min-height: 30px;\n      justify-content: center;\n      align-items: center;\n      clear: both;\n    }\n  ` ]\n})\nexport class PopTemplateAjaxLoaderComponent {\n  expression;\n\n\n  constructor(){\n    const greetings = [\n      `Just a sec ...`,\n      `Git \\'Er Done`,\n      `This may take a while ...`,\n      `No Problemo`,\n    ];\n    this.expression = RandomArrayElement(greetings);\n\n  }\n\n}\n","import { Component, OnInit } from '@angular/core';\nimport { ServiceInjector } from '../../../pop-common.model';\nimport { PopBaseService } from '../../../services/pop-base.service';\nimport { RandomArrayElement } from '../../../pop-common-utility';\n\n\n@Component({\n  template: `\n    <div class=\"pop-template-goodbye\">\n      <div class=\"pop-template-goodbye-row\">\n        <h4>{{expression}}</h4>\n      </div>\n    </div>\n  `,\n  styles: [ `\n    .pop-template-goodbye {\n      display: flex;\n      flex-direction: column;\n      width: 100%;\n      min-height: 30px;\n      justify-content: center;\n      align-items: center;\n      font-size: 1.5em;\n    }\n\n    .pop-template-goodbye-row {\n      display: flex;\n      width: 100%;\n      min-height: 30px;\n      justify-content: center;\n      align-items: center;\n      clear: both;\n    }\n  ` ]\n})\nexport class PopTemplateGoodByeComponent {\n\n  expression;\n\n\n  constructor(){\n    const name = ServiceInjector.get(PopBaseService).getAuthPrimeUser().first_name;\n    const greetings = [\n      `Audios Amigo`,\n      `See Ya Later, ${name}`,\n      `Hasta la vista`,\n      `Later Hater`,\n      `Done so soon?`,\n      `GoodBye`,\n      `Thanks for all you have done, ${name}`\n    ];\n    this.expression = RandomArrayElement(greetings);\n\n  }\n}\n","import { Component} from '@angular/core';\nimport { ServiceInjector } from '../../../pop-common.model';\nimport { PopBaseService } from '../../../services/pop-base.service';\nimport { RandomArrayElement } from '../../../pop-common-utility';\n\n\n@Component({\n  template: `\n    <div class=\"pop-template-welcome\">\n      <div class=\"pop-template-welcome-row\">\n        <h4>{{expression}}</h4>\n      </div>\n    </div>\n  `,\n  styles: [ `\n    .pop-template-welcome {\n      display: flex;\n      flex-direction: column;\n      width: 100%;\n      min-height: 30px;\n      justify-content: center;\n      align-items: center;\n      font-size: 1.5em;\n      background: var(--background-2);\n    }\n\n    .pop-template-welcome-row {\n      display: flex;\n      width: 100%;\n      min-height: 30px;\n      justify-content: center;\n      align-items: center;\n      clear: both;\n    }\n  ` ]\n})\nexport class PopTemplateWelcomeComponent {\n  expression;\n\n\n  constructor(){\n    const name = ServiceInjector.get(PopBaseService).getAuthPrimeUser().first_name;\n    const greetings = [\n      `Hola!`,\n      `Welcome Back, ${name}`,\n      `Howd, partner`,\n      `Good to see you, ${name}`,\n      `Hello, ${name}`,\n      `Lets do this!`,\n      `Alright, Alright, Alright ...`\n    ];\n    this.expression = RandomArrayElement(greetings);\n\n  }\n}\n","import { Component, Input } from '@angular/core';\nimport { IsObject } from '../../../pop-common-utility';\n\n\n@Component({\n  template: `\n    <div class=\"pop-template-error\">\n      <div class=\"pop-template-error-row\">\n        <h5>{{error.code}} - {{error.message}}</h5>\n      </div>\n    </div>\n  `,\n  styles: [ `\n    .pop-template-error {\n      display: flex;\n      flex-direction: column;\n      width: 100%;\n      min-height: 30px;\n      justify-content: center;\n      align-items: center;\n      font-size: 1em;\n      color: white;\n      padding: 10px;\n      background: red;\n      box-sizing: border-box;\n    }\n\n    .pop-template-error-row {\n      display: flex;\n      width: 100%;\n      min-height: 30px;\n      justify-content: center;\n      align-items: center;\n      clear: both;\n      word-wrap: break-word;\n      box-sizing: border-box;\n    }\n  ` ]\n})\nexport class PopTemplateErrorComponent {\n  @Input() error: { code: number, message: string };\n\n\n  constructor(){\n    if( !IsObject(this.error) ) this.error = { message: 'Something went wrong!', code: 500 };\n  }\n}\n","import { Component, Inject, OnDestroy, OnInit } from '@angular/core';\nimport { MAT_SNACK_BAR_DATA } from '@angular/material/snack-bar';\n\n\n@Component({\n  template: `\n    <div class=\"pop-template-buffer\">\n      <div class=\"pop-template-ajax-row\" *ngIf=\"data.expression\">\n        <h5>{{data.expression}}</h5>\n      </div>\n      <div class=\"pop-template-buffer-row\">\n        <mat-progress-bar\n          [color]=\"color\"\n          [mode]=\"mode\"\n          [value]=\"value\"\n          [bufferValue]=\"bufferValue\">\n        </mat-progress-bar>\n      </div>\n    </div>\n  `,\n  styles: [ `\n    .pop-template-buffer {\n      display: flex;\n      flex-direction: column;\n      width: 100%;\n      min-height: 30px;\n      justify-content: center;\n      align-items: center;\n      font-size: 1.5em;\n      background: var(--background-code);\n    }\n\n    .pop-template-buffer-row {\n      display: flex;\n      width: 100%;\n      min-height: 30px;\n      justify-content: center;\n      align-items: center;\n      clear: both;\n    }\n  ` ]\n})\nexport class PopTemplateBufferComponent implements OnInit, OnDestroy {\n  expression;\n  color = 'primary';\n  mode = 'buffer';\n  bufferValue = 100;\n  value = 0;\n  interval;\n\n  constructor(@Inject(MAT_SNACK_BAR_DATA) public data){\n  }\n\n\n  ngOnInit(){\n    this._meterProgress();\n  }\n\n\n  ngOnDestroy(){\n    if( this.interval ) clearInterval(this.interval);\n  }\n\n\n  private _meterProgress(){\n    this.interval = setInterval(() => {\n      this.bufferValue -= 5;\n      this.value += 5;\n      if( this.value >= 100 ) clearInterval(this.interval);\n    }, 175, 50);\n  }\n}\n","import { BehaviorSubject } from 'rxjs';\nimport { EntityFilterInterface, KeyMap } from '../../../pop-common.model';\n\n\nexport interface CacFilterBarInterface {\n  app?: string;\n  entity_path?: string;                  // Name of the entityId client, account, campaign ....\n  display?: string;                // default (toggles), static(always open), float(filter bar floats)\n  archived?: boolean;           // Set whether archived items should be looked at\n  active?: boolean;           // Set whether the filter should be shown\n  loader?: boolean;           // Set whether the filter should be shown\n  sortToTop?: boolean;\n}\n\n\nexport class CacFilterBarConfig {\n  archived = false;\n  active = false;\n  api?: EntityFilterInterface[];\n  app: string;\n  display: 'default' | 'static' | 'float' = 'default';\n  loader = false;\n  view: string[] = [ 'client', 'account', 'campaign' ];\n  sortToTop = false;\n  invalid = false;\n\n\n  constructor(params?: CacFilterBarInterface){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n    if( !( [ 'default', 'static', 'float' ].includes(this.display) ) ) this.display = 'default';\n  }\n}\n\n\nexport interface CacFilterBarEntityInterface {\n  internal_name: string;                  // Name of the entity client, account, campaign ....\n  parent_link: string | null; // column that creates the parent/child relationship to the next entity\n  child_link: string | null; // column that creates the parent/child relationship to the next entity\n  name: string;\n  options: CacFilterBarItem[];   // Items that should be displayed as options for this entityId\n  search?: string;               // A search string that will be applies to the options of this entityId\n  single?: boolean;\n  mode?: boolean;\n  visible?: boolean;\n  sort_order?: number;\n}\n\n\nexport class CacFilterBarEntityConfig {\n  /**/\n  allSelected = false;\n  internal_name: string;\n  child_link: string | null; // column that creates the parent/child relationship\n  parent_link: string | null; // column that creates the parent/child relationship\n  name: string;\n  search: '';\n  checkAll = false;\n  options: CacFilterBarItem[];\n  feed: BehaviorSubject<CacFilterBarItem[]>;\n  totalVisible: number;\n  totalSelected: number;\n  totalAvailable: number;\n  totalOptions: number;\n  indeterminate = false;\n  single = true;\n  selected: KeyMap<boolean> = {};\n  display: KeyMap<boolean> = {};\n  hidden: KeyMap<boolean> = {};\n  filter: any[] = [];\n  selectedText = '';\n  displaySelectedText = '';\n  totalText = '';\n  mode = false;\n  visible = false;\n  sort_order?: number;\n\n\n  constructor(params: CacFilterBarEntityInterface){\n    for( const i in params ) this[ i ] = params[ i ];\n    this.feed = new BehaviorSubject<CacFilterBarItem[]>([]);\n  }\n}\n\n\nexport interface CacFilterBarItem {\n  id: number;\n  name: string;\n  selected?: boolean;\n  hidden?: boolean;\n  display?: boolean;\n  client_id: number;\n  account_id?: number;\n  campaign_id?: number;\n  agency_id?: number;\n  sort?: number;\n}\n\n\nexport interface CacFilter {\n  client?: any[];\n  account?: any[];\n  campaign?: any[];\n}\n\n\n\n\n","import { EventEmitter, Injectable } from '@angular/core';\nimport { PopBaseEventInterface } from '../../../pop-common.model';\n\n@Injectable({ providedIn: 'root' })\nexport class PopEntityEventService {\n  events: EventEmitter<PopBaseEventInterface> = new EventEmitter<PopBaseEventInterface>();\n  sendEvent(event: PopBaseEventInterface){\n    this.events.emit(event);\n  }\n}\n\n\n\n","import { Observable, of, Subject,} from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport { Injectable } from '@angular/core';\nimport { IsString } from '../pop-common-utility';\n\n\ninterface CacheContent {\n  expiry: number;\n  value: any;\n}\n\n\n/**\n * Cache Service is an observables based in-memory cache implementation\n * Keeps track of in-flight observables and sets a default expiry for cached values\n */\n@Injectable({ providedIn: 'root' })\nexport class PopCacheService {\n  private name = 'PopCacheService';\n  private cache = {};\n  private inFlightObservables: Map<string, Subject<any>> = new Map<string, Subject<any>>();\n  readonly DEFAULT_MAX_AGE: number = 60000; // 1 minute\n\n  constructor(){\n  }\n\n\n  /**\n   * Gets the value from cache if the key is provided.\n   * If no value exists in cache, then check if the same call exists\n   * in flight, if so return the subject. If not create a new\n   * Subject inFlightObservable and return the source observable.\n   */\n  get(type: string, key: string, fallback?: Observable<any>, maxAge?: number): Observable<any> | Subject<any>{\n    if( this.hasValidCachedValue(type, key) ){\n      return of(this.cache[ type ].get(key).value);\n    }\n\n    if( !maxAge ){\n      maxAge = this.DEFAULT_MAX_AGE;\n    }\n\n    if( fallback && fallback instanceof Observable ){\n      if( this.inFlightObservables.has(key) ){\n        const sub = this.inFlightObservables.get(key);\n        if( sub ){\n          sub.complete();\n          sub.unsubscribe();\n        }\n      }\n      this.inFlightObservables.set(key, new Subject());\n      return fallback.pipe(tap((value) => {\n        this.set(type, key, value, maxAge);\n      }));\n    }else{\n      return of(null);\n      // return throwError('Requested key is not available in Cache');\n    }\n  }\n\n\n  clear(cacheType: string, cacheKey?: string): void{\n    if( IsString(cacheType, true) ){\n      if( IsString(cacheKey, true) ){\n        if( this.cache[ cacheType ] && this.has(cacheType, cacheKey) ){\n          this.cache[ cacheType ].delete(cacheKey);\n        }\n      }else{\n        if( this.cache[ cacheType ] ) delete this.cache[ cacheType ];\n      }\n    }\n  }\n\n\n  clearAll(){\n    this.cache = {};\n  }\n\n\n  /**\n   * Sets the value with key in the cache\n   * Notifies all observers of the new value\n   */\n  set(type: string, key: string, value: any, maxAge: number = this.DEFAULT_MAX_AGE): void{\n    if( !this.cache[ type ] ) this.cache[ type ] = <Map<string, CacheContent> >new Map<string, CacheContent>();\n    this.cache[ type ].set(key, { value: value, expiry: Date.now() + maxAge });\n    this.notifyInFlightObservers(key, value);\n  }\n\n\n  /**\n   * Checks if the a key exists in cache\n   */\n  has(type: string, key: string): boolean{\n    if( this.cache[ type ] ){\n      return this.cache[ type ].has(key);\n    }\n    return false;\n  }\n\n\n  /**\n   * Publishes the value to all observers of the given\n   * in progress observables if observers exist.\n   */\n  private notifyInFlightObservers(key: string, value: any): void{\n    if( this.inFlightObservables.has(key) ){\n      const inFlight = this.inFlightObservables.get(key);\n      const observersCount = inFlight.observers.length;\n      if( observersCount ){\n        inFlight.next(value);\n      }\n      inFlight.complete();\n      this.inFlightObservables.delete(key);\n    }\n  }\n\n\n  /**\n   * Checks if the key exists and  has not expired.\n   */\n  private hasValidCachedValue(type: string, key: string): boolean{\n\n    if( this.cache[ type ] && this.cache[ type ].has(key) ){\n      if( this.cache[ type ].get(key).expiry < Date.now() ){\n        this.cache[ type ].delete(key);\n        return false;\n      }\n      return true;\n    }else{\n      return false;\n    }\n  }\n}\n","import { Injectable, OnDestroy } from '@angular/core';\nimport { forkJoin } from 'rxjs';\nimport { PopCacheService } from './pop-cache.service';\nimport {\n  CoreConfig,\n  Dictionary,\n  PopEntity,\n  PopLog,\n  PopRequest,\n  ResourceConfig,\n  ResourceInterface,\n  ServiceInjector\n} from '../pop-common.model';\nimport { CleanObject, GetHttpResult, IsArray, IsCallableFunction, IsObject, IsString, StorageGetter, StringReplaceAll } from '../pop-common-utility';\nimport { EvaluateWhenConditions, ParseModelValue } from '../modules/entity/pop-entity-utility';\nimport { PopExtendService } from './pop-extend.service';\n\n\n@Injectable( {\n  providedIn: 'root'\n} )\nexport class PopResourceService extends PopExtendService implements OnDestroy {\n\n  public name = 'PopResourceService';\n\n  private cache = new PopCacheService();\n\n\n  constructor(){\n    super();\n  }\n\n\n  /**\n   * This fx will map the api calls for a collection of resources\n   * @param collection\n   * @param core\n   */\n  setCollection( collection: Dictionary<ResourceInterface>, core?: CoreConfig ): Promise<boolean>{\n    return new Promise( async( resolve ) => {\n      const api_requests = [];\n      const request_map = [];\n      let resource;\n      if( IsObject( collection, true ) ){\n        Object.keys( collection ).map( ( resourceKey ) => {\n          resource = <ResourceConfig>collection[ resourceKey ];\n          if( resource.api_path ){\n            if(!resource.can_read || PopEntity.checkAccess(resource.can_read, 'can_read')){\n              // break;\n              let path = resource.api_path;\n              if( IsArray( resource.api_when, true ) && IsObject( core, true ) ){\n                const when = EvaluateWhenConditions( core, resource.api_when );\n                if( !when ){\n                  PopLog.info( this.name, `setCollection: condition not met`, resource );\n                  return false;\n                }\n              }\n              request_map.push( resourceKey );\n              if( IsObject( resource.api_path_vars, true ) && core ){\n                Object.keys( resource.api_path_vars ).map( ( varKey ) => {\n                  let value = '';\n                  if( String( resource.api_path_vars[ varKey ] ).includes( '.' ) ){\n                    value = <any>StorageGetter( core, String( resource.api_path_vars[ varKey ] ).split( '.' ) );\n                  }\n                  if( !value ) value = ParseModelValue( String( resource.api_path_vars[ varKey ] ) );\n                  if( value ){\n                    path = StringReplaceAll( path, `:${varKey}`, value );\n                  }\n                } );\n              }\n              const body = IsObject( resource.api_params, true ) ? resource.api_params : {};\n              if( IsObject( body ) ){\n                Object.keys( body ).map( ( key: string ) => {\n                  body[ key ] = ParseModelValue( body[ key ], core );\n                } );\n              }\n\n              if( +resource.api_cache ){\n                PopLog.info( this.name, `cached resource`, resource );\n                api_requests.push( this.cache.get( 'resource', path, PopRequest.doGet( path, body, resource.api_version ), 3600000 ) );\n              }else{\n                api_requests.push( PopRequest.doGet( path, body, resource.api_version ) );\n              }\n            }\n          }\n        } );\n      }\n      if( api_requests.length ){\n        forkJoin( api_requests ).subscribe( ( results ) => {\n          results.map( ( res: any, index ) => {\n            res = res.data ? res.data : res;\n            resource = <ResourceConfig>collection[ request_map[ index ] ];\n            let dataTarget;\n            if( IsArray( res, false ) ){\n              dataTarget = resource.data_storage ? resource.data_storage : 'data_values';\n              if( IsObject( collection[ request_map[ index ] ].data_filter, true ) ){\n                try{\n                  Object.keys( resource.data_filter ).map( ( filterKey: string ) => {\n                    res = res.filter( ( item ) => {\n                      let filterKeyValue = resource.data_filter[ filterKey ];\n                      if( String( filterKeyValue ).includes( '.' ) ){\n                        filterKeyValue = <any>StorageGetter( core, String( filterKeyValue ).split( '.' ) );\n                      }\n                      if( !filterKeyValue ) filterKeyValue = ParseModelValue( String( resource.data_filter[ filterKey ] ) );\n                      return item[ filterKey ] == filterKeyValue;\n                    } );\n                  } );\n                }catch( e ){\n                  PopLog.warn( this.name, `setCollection`, e );\n                }\n              }\n\n              res = IsCallableFunction( resource.data_decorator ) ? res.map( x => resource.data_decorator( core, x ) ) : res;\n\n              if( IsArray( resource.data_when, true ) ){\n                // EvaluateModelConditionals();\n                try{\n                  res = res.filter( ( item ) => {\n                    return EvaluateWhenConditions( item, resource.data_when, core );\n                  } );\n                }catch( e ){\n                  PopLog.warn( this.name, `setCollection`, e );\n                }\n              }\n\n              if( IsCallableFunction( resource.data_setter ) ) res = <any[]>resource.data_setter( core, res );\n              resource[ dataTarget ] = res;\n            }else{\n              dataTarget = resource.data_storage ? resource.data_storage : 'data';\n              resource[ dataTarget ] = IsCallableFunction( resource.data_decorator ) ? resource.data_decorator( core, res ) : res;\n              if( IsCallableFunction( resource.data_setter ) ) resource[ dataTarget ] = <any[]>resource.data_setter( core, resource[ dataTarget ] );\n            }\n          } );\n          resolve( true );\n        }, err => {\n          resolve( false );\n        } );\n      }else{\n        resolve( true );\n      }\n    } );\n  }\n\n\n\n  /**\n   * This fx will extract the data from a resource collection\n   * @param collection\n   * @param core\n   */\n  getCollection( collection: Dictionary<ResourceConfig>, ){\n    const store = {};\n    if( IsObject( collection, true ) ){\n      Object.keys( collection ).map( ( resourceKey ) => {\n        const resource = collection[ resourceKey ];\n        store[ resource.name ] = CleanObject( new ResourceConfig( resource ) );\n      } );\n    }\n    return store;\n  }\n\n\n  /**\n   * This fx will reload a single existing resource\n   * @param collection\n   */\n  reloadResource( core: CoreConfig, resource: ResourceConfig ): Promise<ResourceConfig>{\n    return new Promise<ResourceConfig>( ( resolve ) => {\n      if( IsObject( resource, [ 'api_path' ] && resource.api_path && IsString( resource.api_path, true ) ) ){\n        let path = resource.api_path;\n        if(resource.can_read && !PopEntity.checkAccess(resource.can_read, 'can_read')) {\n          PopLog.debug( this.name, `reloadResource: Cannot read resource:${resource.can_read}` );\n          return resolve( resource );\n        }\n        if( IsArray( resource.api_when, true ) && IsObject( core, true ) ){\n          const when = EvaluateWhenConditions( core, resource.api_when );\n          if( !when ){\n            PopLog.debug( this.name, 'reloadResource: condition not met' );\n            return resolve( resource );\n          }\n        }\n        if( IsObject( resource.api_path_vars, true ) && core ){\n          Object.keys( resource.api_path_vars ).map( ( varKey ) => {\n            let value = '';\n            if( String( resource.api_path_vars[ varKey ] ).includes( '.' ) ){\n              value = <any>StorageGetter( core, String( resource.api_path_vars[ varKey ] ).split( '.' ) );\n            }\n            if( !value ) value = ParseModelValue( String( resource.api_path_vars[ varKey ] ) );\n            if( value ){\n              path = StringReplaceAll( path, `:${varKey}`, value );\n            }\n          } );\n        }\n        const body = IsObject( resource.api_params, true ) ? resource.api_params : {};\n        if( IsObject( body ) ){\n          Object.keys( body ).map( ( key: string ) => {\n            body[ key ] = ParseModelValue( body[ key ], core );\n          } );\n        }\n\n        PopRequest.doGet( path, body, resource.api_version ).subscribe( ( res ) => {\n          res = GetHttpResult( res );\n          let dataTarget;\n          PopLog.debug( this.name, 'reloadResource: pass 4' );\n          if( IsArray( res, false ) ){\n            dataTarget = resource.data_storage ? resource.data_storage : 'data_values';\n            if( IsObject( resource.data_filter, true ) ){\n              try{\n                Object.keys( resource.data_filter ).map( ( filterKey: string ) => {\n                  res = res.filter( ( item ) => {\n                    let filterKeyValue = resource.data_filter[ filterKey ];\n                    if( String( filterKeyValue ).includes( '.' ) ){\n                      filterKeyValue = <any>StorageGetter( core, String( filterKeyValue ).split( '.' ) );\n                    }\n                    if( !filterKeyValue ) filterKeyValue = ParseModelValue( String( resource.data_filter[ filterKey ] ) );\n                    return item[ filterKey ] == filterKeyValue;\n                  } );\n                } );\n              }catch( e ){\n                PopLog.warn( this.name, `setCollection`, e );\n              }\n            }\n\n            if( IsArray( resource.data_when, true ) ){\n              // EvaluateModelConditionals();\n              try{\n                res = res.filter( ( item ) => {\n                  return EvaluateWhenConditions( item, resource.data_when, core );\n                } );\n              }catch( e ){\n                PopLog.warn( this.name, `setCollection`, e );\n              }\n            }\n            resource[ dataTarget ] = IsCallableFunction( resource.data_decorator ) ? res.map( x => resource.data_decorator( core, x ) ) : res;\n            if( IsCallableFunction( resource.data_setter ) ) resource[ dataTarget ] = <any[]>resource.data_setter( core, resource[ dataTarget ] );\n          }else{\n            dataTarget = resource.data_storage ? resource.data_storage : 'data';\n            resource[ dataTarget ] = IsCallableFunction( resource.data_decorator ) ? resource.data_decorator( core, res ) : res;\n          }\n          return resolve( resource );\n        }, () => {\n          return resolve( resource );\n        } );\n      }else{\n        return resolve( resource );\n      }\n    } );\n  }\n\n\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n}\n","import {Injectable} from '@angular/core';\nimport {ToYesNoPipe} from '../pipes/toYesNo.pipe';\nimport {PhonePipe} from '../pipes/phone.pipe';\nimport {TruncatePipe} from '../pipes/truncate.pipe';\nimport {ToActiveOrArchivedPipe} from '../pipes/toActiveOrArchived.pipe';\nimport {CoreConfig, Entity, KeyMap, PopApp, PopBusiness, PopDate} from '../pop-common.model';\nimport {\n  GetSessionSiteVar,\n  IsArray,\n  IsDefined,\n  IsNumber,\n  IsObject,\n  IsString,\n  PopTransform,\n  SetSessionSiteVar,\n  StorageGetter,\n  TitleCase\n} from '../pop-common-utility';\nimport {PopResourceService} from './pop-resource.service';\nimport {LabelPipe} from '../pipes/label.pipe';\nimport {Business} from '../pop-common-token.model';\nimport {GetSingularName, IsAliasable} from '../modules/entity/pop-entity-utility';\n\n\n@Injectable({providedIn: 'root'})\nexport class PopPipeService {\n\n  private name = 'PopPipeService';\n\n  loaded = false;\n\n\n  constructor(private resource: PopResourceService) {\n  }\n\n\n  private resources: any = {\n    timezone: {\n      name: 'timezone',\n      defaultValue: null,\n      data_type: 'api_records',\n      api_path: 'records/timezone-values',\n      api_cache: 1,\n    },\n    country: {\n      name: 'country',\n      defaultValue: null,\n      data_type: 'api_records',\n      api_path: 'records/countries',\n      api_cache: 1,\n    },\n    state: {\n      name: 'state',\n      defaultValue: null,\n      data_type: 'api_records',\n      api_path: 'records/u-s-states',\n      api_cache: 1,\n    },\n    entity: {\n      name: 'entity',\n      defaultValue: null,\n      data_type: 'api_records',\n      api_path: `entities?select=id,name,internal_name,alias&with=alias`,\n      api_cache: 1,\n    }\n  };\n\n\n  private asset = {\n    business: <KeyMap<Business>>{},\n    country: <KeyMap<Entity>>{},\n    timezone: <KeyMap<Entity>>{},\n    state: <KeyMap<Entity>>{},\n    client: <KeyMap<Entity>>{},\n    campaign: <KeyMap<Entity>>{},\n    account: <KeyMap<Entity>>{},\n    entity: <KeyMap<Entity>>{},\n  };\n\n  private assetMap = {\n    entity: {}\n  };\n\n\n  active = new ToActiveOrArchivedPipe();\n  yesno = new ToYesNoPipe();\n  truncate = new TruncatePipe();\n  phone = new PhonePipe();\n  label = new LabelPipe();\n\n\n  /**\n   * Mutate a value with a specified transformation\n   * @param value\n   * @param transformation\n   * @param core\n   */\n  transform(value: string | number | boolean, transformation: any, core: CoreConfig = null): any {\n    if (IsObject(transformation, true)) {\n      switch (transformation.type) {\n        case 'toRelationName':\n          if (IsObject(value)) {\n            if (transformation.arg1) { // core storage path\n              const location = IsString(transformation.arg1, true) ? transformation.arg1 : 'name';\n              const steps = <any[]>String(location).split('.');\n              // steps.push(value);\n              const name = <string>StorageGetter(value, steps);\n              if (name) value = name;\n              if (IsString(transformation.arg2, true)) { // alias\n                if (IsAliasable(GetSingularName(String(value)))) {\n                  value = StorageGetter(PopApp.entities[TitleCase(String(value))], ['alias', String(transformation.arg2).toLowerCase()], value);\n                }\n              }\n            }\n          } else {\n            value = transformation.arg2 ? transformation.arg2 : value; // transformations[ field ].arg2 is default value\n          }\n          break;\n        case 'toResourceName':\n          if (IsNumber(value)) {\n            let resource;\n            let key = 'name';\n            let resourceName;\n            let id;\n            if (IsString(transformation.arg1, true)) { // resource name\n              resourceName = String(transformation.arg1).trim();\n              if (IsObject(core, ['resource']) && resourceName in core.resource) {\n                resource = core.resource[resourceName];\n                if (IsArray(core.resource[resourceName].data_values, true)) {\n                  if (IsString(transformation.arg2, true)) key = transformation.arg2;\n                  const item = core.resource[resourceName].data_values.find((i) => +i.id === value);\n                  if (IsObject(item, [key]) && IsDefined(item[key])) {\n                    value = item[key];\n                  }\n                }\n                if (IsString(transformation.arg2, true)) { // alias\n                  if (IsAliasable(GetSingularName(String(value)))) {\n                    value = StorageGetter(PopApp.entities[TitleCase(String(value))], ['alias', String(transformation.arg2).toLowerCase()], value);\n                  }\n                }\n              } else if (resourceName in this.asset) {\n                id = +value;\n                resourceName = String(transformation.arg1).trim();\n                if (IsString(transformation.arg1, true)) { // alternate value\n                  key = transformation.arg1;\n                }\n                if (resourceName in this.asset && id in this.asset[resourceName] && IsDefined(this.asset[resourceName][id][key])) {\n                  value = this.asset[transformation.type][id][key];\n                }\n              }\n            }\n          } else {\n            value = transformation.arg3 ? transformation.arg3 : value; // transformations[ field ].arg2 is default value\n          }\n          break;\n        case 'entity':\n          if (value) {\n            let key;\n            if (IsString(value, true) && transformation.arg1 === 'alias') {\n              const id = this.assetMap.entity[value + ''];\n              const alias = transformation.arg2 ? (transformation.arg2 !== 'plural' ? 'name' : 'plural') : 'name';\n              if (id in this.asset.entity && this.asset.entity[id]) {\n                const entity = this.asset.entity[id];\n                if (IsObject(entity.alias) && alias in entity.alias) {\n                  value = TitleCase(entity.alias[alias]);\n                } else {\n                  if (alias === 'plural') {\n                    value = entity.name;\n                  } else {\n                    value = TitleCase(value + '');\n                  }\n                }\n              } else {\n                value = TitleCase(value + '');\n              }\n            } else if (IsString(value, true)) {\n              const id = this.assetMap.entity[value + ''];\n              key = 'name';\n              if (IsString(transformation.arg1, true)) {\n                key = transformation.arg1;\n              }\n              if (id in this.asset.entity && this.asset.entity[id] && IsDefined(this.asset.entity[id][key])) {\n                value = this.asset.entity[id][key];\n              } else {\n                value = TitleCase(value + '');\n              }\n            } else if (IsNumber(value, true)) {\n              const id = +value;\n              key = 'name';\n              if (IsString(transformation.arg1, true)) { // alternate value\n                key = transformation.arg1;\n              }\n              if (id in this.asset.entity && IsString(this.asset.entity[id][key])) {\n                value = this.asset[transformation.type][id][key];\n              }\n\n            }\n          }\n          break;\n        case 'client':\n        case 'account':\n        case 'campaign':\n        case 'state':\n        case 'country':\n        case 'timezone':\n          if (value) {\n            const id = +value;\n            let key = 'name';\n            if (IsString(transformation.arg1, true)) { // alternate value\n              key = transformation.arg1;\n            }\n\n            if (transformation.type in this.asset && id in this.asset[transformation.type] && IsDefined(this.asset[transformation.type][id][key])) {\n              value = this.asset[transformation.type][id][key];\n            }\n          }\n          break;\n        case 'toDigits':\n          value = String(value).match(/\\d+/g).map(Number).join('');\n          break;\n        case 'toYesNoPipe':\n          value = this.yesno.transform(+value > 0);\n          break;\n        case 'toPhonePipe':\n          value = this.phone.transform(value);\n          break;\n        case 'toActiveOrArchived':\n          value = this.active.transform(value);\n          break;\n        case 'toTitleCase':\n          value = TitleCase(value + '');\n          break;\n        case 'toUpperCase':\n          value = String(value).toUpperCase();\n          break;\n        case 'toLowerCase':\n          value = String(value).toLowerCase();\n          break;\n        case 'date':\n          value = PopDate.transform(value, transformation.arg1);\n          break;\n        case 'toCurrency':\n          value = new Intl.NumberFormat('en-US', {\n            style: 'currency',\n            currency: 'USD',\n            minimumFractionDigits: 2\n          }).format(Number(value));\n          break;\n        default:\n          break;\n      }\n    } else if (IsString(transformation, true)) {\n      return PopTransform(value, transformation);\n    }\n    return value;\n  }\n\n\n  loadResources(allowCache = true) {\n    return new Promise(async (resolve) => {\n      if (this.loaded) return resolve(true);\n      let resources;\n      if (allowCache && IsObject(PopBusiness, ['id'])) {\n        try {\n          resources = GetSessionSiteVar(`App.${PopBusiness.id}.Resource`);\n          resources = JSON.parse(atob(resources));\n        } catch (e) {\n        }\n      }\n      if (IsObject(resources, Object.keys(this.resources))) {\n        Object.keys(resources).map((key: string) => {\n          const values = resources[key].data_values;\n          this.asset[key] = {};\n          values.map((item) => {\n            this.asset[key][item.id] = item;\n          });\n        });\n        this._setAssetMap();\n        return resolve(true);\n      } else {\n        this.resource.setCollection(this.resources).then(() => {\n          resources = this.resource.getCollection(this.resources);\n          if (IsObject(resources, true)) {\n            try {\n              SetSessionSiteVar(`App.${PopBusiness.id}.Resource`, btoa(JSON.stringify(resources)));\n            } catch (e) {\n            }\n            Object.keys(resources).map((key: string) => {\n              const values = resources[key].data_values;\n              this.asset[key] = {};\n              values.map((item) => {\n                this.asset[key][item.id] = item;\n              });\n            });\n            this._setAssetMap();\n            this.loaded = true;\n            return resolve(true);\n          } else {\n            this.loaded = true;\n            return resolve(true);\n          }\n        }, () => {\n          return resolve(false);\n        });\n      }\n\n    });\n  }\n\n\n  setAsset(assetName: string, data: KeyMap<Entity>) {\n    if (assetName in this.asset && IsObject(data, true)) {\n      this.asset[assetName] = data;\n    }\n  }\n\n\n  updateEntityAlias(entityId: string, alias: any) {\n    if (entityId in this.asset.entity && IsObject(this.asset.entity[entityId])) {\n      this.asset.entity[entityId].alias = alias;\n    }\n  }\n\n\n  /**\n   * A helper method to prepareTableData\n   * @param row\n   * @param transformations\n   */\n  transformObjectValues(obj: Object, transformations: {}, core: CoreConfig = null) {\n    for (const field in transformations) {\n      if (!transformations.hasOwnProperty(field)) continue;\n      obj[field] = this.transform(obj[field], transformations[field], core);\n    }\n    return obj;\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  private _setAssetMap() {\n    if (IsObject(this.asset.entity, true)) {\n      Object.keys(this.asset.entity).map(entityId => {\n        const entity = this.asset.entity[entityId];\n        this.assetMap.entity[entity.internal_name] = entityId;\n      });\n    }\n  }\n}\n","import { ElementRef, Inject, Injectable, OnDestroy } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport {\n  Entity,\n  OptionItem,\n  PopBaseEventInterface,\n  PopBusiness,\n  PopPipe,\n  PopLog,\n  PopUser,\n  SetPopFilter, CoreConfig, PopRequest, AppGlobalInterface, PopEntity,\n} from '../../../pop-common.model';\nimport { GetSessionSiteVar, IsArray, IsNumber, IsObject, IsString, SetSessionSiteVar, StorageGetter } from '../../../pop-common-utility';\nimport { PopExtendService } from '../../../services/pop-extend.service';\nimport { CacFilterBarConfig, CacFilterBarEntityConfig } from './pop-cac-filter.model';\nimport { PopEntityEventService } from '../../entity/services/pop-entity-event.service';\nimport { IsValidFieldPatchEvent } from '../../entity/pop-entity-utility';\nimport { PopPipeService } from '../../../services/pop-pipe.service';\n\n\n@Injectable( {\n  providedIn: 'root'\n} )\nexport class PopCacFilterBarService extends PopExtendService implements OnDestroy {\n  loading = false;\n\n  public name = 'PopClientFilterBarService';\n\n  private config: CacFilterBarConfig = new CacFilterBarConfig(\n    {\n      active: false\n    }\n  );\n\n  protected asset = {\n    lookup: {},\n    el: <ElementRef<any>>undefined,\n    client: < Map<number, Entity> >new Map<number, Entity>(),\n    account: < Map<number, Entity> >new Map<number, Entity>(),\n    campaign: < Map<number, Entity> >new Map<number, Entity>(),\n    triggerFields: [ 'name', 'archived', 'deleted_at', 'client_id', 'account_id', 'campaign_id' ],\n    views: [ 'client', 'account', 'campaign' ]\n  };\n\n  event = {\n    data: new Subject<string>(),\n    config: new Subject<CacFilterBarEntityConfig[]>(),\n    bubble: new Subject<PopBaseEventInterface>()\n  };\n\n  private filter: { client?: number[], account?: number[], campaign?: number[] } = {};\n\n  private readonly entities = <CacFilterBarEntityConfig[]>[\n    new CacFilterBarEntityConfig( {\n      sort_order: 0,\n      internal_name: 'client',\n      name: 'Client(s)',\n      options: [],\n      parent_link: null,\n      child_link: 'client_id',\n      single: false,\n      visible: true\n    } ),\n    new CacFilterBarEntityConfig( {\n      sort_order: 1,\n      internal_name: 'account',\n      name: 'Account(s)',\n      options: [],\n      parent_link: 'client_id',\n      child_link: 'account_id',\n      single: false,\n      visible: true,\n    } ),\n    new CacFilterBarEntityConfig( {\n      sort_order: 2,\n      internal_name: 'campaign',\n      name: 'Campaigns(s)',\n      options: [],\n      parent_link: 'account_id',\n      child_link: null,\n      single: false,\n      visible: true\n    } ),\n  ];\n\n\n  constructor(\n    private crud: PopEntityEventService,\n    private pipe: PopPipeService,\n    @Inject( 'APP_GLOBAL' ) private APP_GLOBAL: AppGlobalInterface,\n  ){\n    super();\n    this._init().then(()=>true);\n  }\n\n\n  private _init(){\n    return new Promise<boolean>( async( resolve ) => {\n      await this.APP_GLOBAL.isVerified();\n      if( IsObject( PopBusiness, [ 'id' ] ) && IsObject( PopUser, [ 'id' ] ) ){\n        this._getFilterStorage(); // retrieve any session data\n      }else{\n        this.config.active = false;\n        return resolve( false );\n      }\n      this.dom.setSubscriber( `crud-events`, this.crud.events.subscribe( ( event ) => {\n        if( IsValidFieldPatchEvent( <CoreConfig>{}, event ) ){\n          const internalName = StorageGetter( event.config, [ 'metadata', 'internal_name' ], null );\n          if( internalName && this.asset.views.includes( internalName ) && this.asset.triggerFields.includes( event.config.name ) ){\n            this._triggerDataRefresh( 'Patch' );\n          }\n        }else{\n          if( event.internal_name && event.type === 'entity' && this.asset.views.includes( event.internal_name ) ){\n            if( event.method === 'archive' ){\n              const entity = this.entities.find( ( e ) => e.internal_name );\n              const filter = this.filter[ entity.internal_name ];\n              const archive = event.data;\n              if( archive ){\n                let id;\n                if( IsString( event.id, true ) ){\n                  if( String(event.id).includes( ',' ) ){\n                    id = String( event.id ).split( ',' ).map( x => +x );\n                  }else{\n                    id = [ +event.id ];\n                  }\n                }else if( IsNumber( event.id ) ){\n                  id = [ +event.data.id ];\n                }\n\n\n                let setFilter = false;\n                id.map( ( x ) => {\n                  delete entity.hidden[ x ];\n                  delete entity.display[ x ];\n                  delete entity.selected[ x ];\n                  if( IsArray( filter, true ) ){\n                    const index = filter.indexOf( String( x ), 0 );\n                    if( index > -1 ){\n                      setFilter = true;\n                      filter.splice( index, 1 );\n                    }\n                  }\n                } );\n\n                if( setFilter ){\n                  this.setFilter( this.filter );\n                }\n              }\n              this._triggerDataRefresh( 'archive', 1 );\n            }\n            if( event.method === 'create' ){\n              const entity = this.entities.find( ( e ) => e.internal_name );\n              this._triggerDataRefresh( 'create', 1 );\n            }\n          }\n        }\n      } ) );\n\n      return resolve( false );\n    } );\n  }\n\n\n  public register( el: ElementRef<any> ){\n    this.asset.el = el;\n  }\n\n\n  getEntities(): CacFilterBarEntityConfig[]{\n    return this.entities;\n  }\n\n\n  getFilter(){\n    return this.filter;\n  }\n\n\n  /**\n   * Return the filter bar config\n   */\n  getConfig(): CacFilterBarConfig{\n    return this.config;\n  }\n\n\n  public setFilter( filter: { client?: number[], account?: number[], campaign?: number[] } ){\n    this.filter = {};\n    if( IsObject( PopBusiness, [ 'id' ] ) ){\n      if( IsArray( filter.client, true ) ) this.filter.client = filter.client;\n\n      if( this.config.view.includes( 'account' ) && IsArray( filter.account, true ) ){\n        this.filter.account = filter.account;\n      }else{\n        if( IsArray( filter.client, true ) ){\n          const clients = filter.client.map( c => +c );\n          filter.account = <any>this.entities[ 1 ].options.filter( ( account ) => {\n            return +account.client_id  && clients.includes( account.client_id );\n          } ).map( a => String( a.id ) );\n          this.filter.account = filter.account;\n        }\n      }\n      if( this.config.view.includes( 'campaign' ) && IsArray( filter.campaign, true ) ){\n        this.filter.campaign = filter.campaign;\n      }else{\n        if( IsArray( filter.account, true ) ){\n          const accounts = filter.account.map( c => +c );\n          filter.campaign = <any>this.entities[ 2 ].options.filter( ( campaign ) => {\n            return +campaign.account_id && accounts.includes( campaign.account_id );\n          } ).map( c => String( c.id ) );\n          console.log('filter.campaign', filter.campaign);\n          this.filter.campaign = filter.campaign;\n        }\n      }\n      SetSessionSiteVar( `Business.${PopBusiness.id}.Filter.Entities`, filter );\n      SetPopFilter( filter );\n    }\n  }\n\n\n  getElHeight(): number{\n    if( this.asset.el ){\n      return this.asset.el.nativeElement.lastChild.clientHeight;\n    }\n    return 0;\n  }\n\n\n  getHeight(): number{\n    if( IsObject( PopBusiness, [ 'id' ] ) ){\n      const open = GetSessionSiteVar( `Business.${PopBusiness.id}.Filter.open`, false );\n      if( +open ){\n        return 281;\n      }else{\n        return 101;\n      }\n    }\n    return 0;\n  }\n\n\n  /**\n   * Clear any existing filters\n   * @param app\n   */\n  public clearFilters(){\n    this.setFilter({});\n  }\n\n\n  /**\n   * Trigger update trigger\n   * @param type strings\n   * @returns void\n   */\n  onChange( event: PopBaseEventInterface ){\n    setTimeout( () => {\n      this.event.bubble.next( event );\n    }, 0 );\n  }\n\n\n  /**\n   * Ask whether the filter bar is active or not\n   */\n  isActive(): boolean{\n    return this.config.active;\n  }\n\n\n  refresh(){\n    this.event.bubble.next( {\n      source: 'PopFilterBarService',\n      type: 'filter',\n      name: 'refresh',\n    } );\n  }\n\n\n  /**\n   * Toggle whether to include archived records\n   * @param active\n   */\n  setArchived( archived: boolean ){\n    if( this.config ){\n      this.config.archived = archived;\n      this.event.bubble.next( {\n        source: 'PopFilterBarService',\n        type: 'filter',\n        name: 'archived',\n        data: archived\n      } );\n    }\n  }\n\n\n  /**\n   * Toggle the filer bar on and off\n   * @param active\n   */\n  setActive( active: boolean ){\n    if( this.config ){\n      this.config.active = active;\n      this.event.bubble.next( {\n        source: 'PopFilterBarService',\n        type: 'filter',\n        name: 'state',\n        model: 'active'\n      } );\n    }\n  }\n\n\n  /**\n   * Toggle the Loader\n   * @param loader\n   */\n  setLoader( loader: boolean ){\n    if( this.config ){\n      this.config.loader = loader;\n    }\n  }\n\n\n  /**\n   * Change the display state of the filter bar\n   * @param display\n   */\n  setDisplay( display: any ){\n    if( this.config ){\n      if( ![ 'default', 'static', 'float' ].includes( display ) ) display = 'default';\n      this.config.display = display;\n    }\n  }\n\n\n  /**\n   * Change the display state of the filter bar\n   * @param display\n   */\n  setView( view: string[] ){\n    if( IsArray( view ) ){\n      this.config.view = view;\n      this.entities.map( ( entity ) => {\n        entity.visible = this.config.view.includes( entity.internal_name );\n      } );\n    }\n  }\n\n\n  getAsset( internal_name: string, id: number ){\n    if( internal_name in this.asset ){\n      return this.asset[ internal_name ].get( +id );\n    }\n    return null;\n  }\n\n\n  setData( caller: string, allowCache = true ): Promise<boolean>{\n    PopLog.info( this.name, `setData`, caller );\n    return new Promise<boolean>( async( resolve ) => {\n      let cache;\n      if( allowCache && IsObject( PopBusiness, [ 'id' ] ) ){\n        try{\n          cache = GetSessionSiteVar( `Business.${PopBusiness.id}.Filter.Data` );\n          cache = JSON.parse( atob( cache ) );\n        }catch( e ){\n        }\n      }\n      if( IsArray( cache, true ) ){\n        this._transFormData( cache );\n        this._triggerDataRefresh( 'init' );\n        return resolve( true );\n      }else{\n        // this.config.loader = true;\n        const url = `clients?select=id,name,client_id,account_id,campaign_id,allaccounts,allcampaigns&archived=0&with=allaccounts.allcampaigns&limit=500`;\n        this.dom.setSubscriber( `data-fetch`, PopRequest.doGet( url, {}, 1, false ).subscribe( ( x ) => {\n          if( x.data ) x = x.data;\n          if( IsObject( PopBusiness, [ 'id' ] ) ){\n            try{\n              SetSessionSiteVar( `Business.${PopBusiness.id}.Filter.Data`, btoa( JSON.stringify( x ) ) );\n            }catch( e ){\n            }\n          }\n          this._transFormData( x );\n          // this.config.loader = false;\n          return resolve( true );\n        }, () => {\n          return resolve( false );\n        } ) );\n      }\n    } );\n\n  }\n\n\n  setConfigAliases(){\n    this.entities.map( ( entity ) => {\n      entity.name = PopPipe.transform( entity.internal_name, { type: 'entity', arg1: 'alias', arg2: 'singular' } ) + '(s)';\n    } );\n  }\n\n\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  private _triggerDataRefresh( caller: string, seconds = 10 ): void{\n    this.dom.setTimeout( 'lazy-load-filter-data', () => {\n      this.setData( `_triggerDataRefresh`, false ).then( () => {\n        this.event.data.next( caller );\n      } );\n    }, ( seconds * 1000 ) );\n  }\n\n\n  private _transFormData( x: any[] ): void{\n    const data = this._setDataStructure( x );\n\n    Object.keys( data ).map( key => {\n      this.pipe.setAsset( key, data[ key ] );\n      PopLog.init( this.name, `Transfer asset to PipeService: ${key}` );\n    } );\n\n    this.entities[ 0 ].options = <any>Object.values( data.client ).sort( ( a: OptionItem, b: OptionItem ) => {\n      if( a.name < b.name ) return -1;\n      if( a.name > b.name ) return 1;\n      return 0;\n    } );\n\n    this.entities[ 1 ].options = <any>Object.values( data.account ).sort( ( a: OptionItem, b: OptionItem ) => {\n      if( a.name < b.name ) return -1;\n      if( a.name > b.name ) return 1;\n      return 0;\n    } );\n\n    this.entities[ 2 ].options = <any>Object.values( data.campaign ).sort( ( a: OptionItem, b: OptionItem ) => {\n      if( a.name < b.name ) return -1;\n      if( a.name > b.name ) return 1;\n      return 0;\n    } );\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  /**\n   * Retrieves any filter settings from session storage\n   */\n  private _getFilterStorage(){\n    let filter = <{ client?: any[], account?: any[], campaign?: any[] }>{};\n    if( IsObject( PopBusiness, [ 'id' ] ) ){\n      filter = GetSessionSiteVar( `Business.${PopBusiness.id}.Filter.Entities`, {} );\n      if(IsArray(filter.client, true)){\n        const client = this.entities[0];\n        if(!IsObject(client.selected)) client.selected = {};\n        filter.client.map((c)=>{\n          client.selected[c.id] = true;\n        });\n      }\n      if(IsArray(filter.account, true)){\n        const account = this.entities[1];\n        if(!IsObject(account.selected)) account.selected = {};\n        filter.account.map((a)=>{\n          account.selected[a.id] = true;\n        });\n      }\n      if(IsArray(filter.campaign, true)){\n        const campaign = this.entities[2];\n        if(!IsObject(campaign.selected)) campaign.selected = {};\n        filter.campaign.map((c)=>{\n          campaign.selected[c.id] = true;\n        });\n      }\n      // this.asset.views.map((internal_name: string) => {\n      //   if( !IsArray(filter[ internal_name ], true) ) delete filter[ internal_name ];\n      // });\n\n      SetPopFilter( filter );\n    }\n\n\n    this.filter = filter;\n  }\n\n\n  private _setDataStructure( res ){\n    const data = {\n      client: {},\n      account: {},\n      campaign: {}\n    };\n\n    if( IsArray( res, true ) ){\n      res.map( ( client ) => {\n        data.client[ +client.id ] = {\n          id: +client.id,\n          name: client.name,\n          archived: client.archived,\n        };\n        // this.asset.client.set(+client.id, data.client[ +client.id ]);\n        if( IsArray( client.allaccounts, true ) ){\n          client.allaccounts.map( ( account: any ) => {\n            if( IsObject( account ) ){\n              data.account[ +account.id ] = {\n                id: +account.id,\n                name: account.name,\n                client_id: +account.client_id,\n                archived: +account.archived,\n              };\n              // this.asset.account.set(+account.id, data.account[ +account.id ]);\n              if( IsArray( account.allcampaigns, true ) ){\n                account.allcampaigns.map( ( campaign: any ) => {\n                  if( IsObject( campaign ) ){\n                    data.campaign[ +campaign.id ] = {\n                      id: +campaign.id,\n                      name: campaign.name,\n                      client_id: +client.id,\n                      account_id: +campaign.account_id,\n                      archived: +campaign.archived,\n                    };\n                    // this.asset.campaign.set(+campaign.id, data.campaign[ +campaign.id ]);\n                  }\n                } );\n              }\n            }\n          } );\n        }\n      } );\n    }\n    return data;\n  }\n\n\n}\n","import { ElementRef, Inject, Injectable, isDevMode } from '@angular/core';\nimport { MatSnackBar, MatSnackBarRef } from '@angular/material/snack-bar';\nimport { PopTemplateAjaxLoaderComponent } from './assets/ajax-loader.component';\nimport { PopTemplateGoodByeComponent } from './assets/goodbye.component';\nimport { PopTemplateWelcomeComponent } from './assets/welcome.component';\nimport { PopTemplateErrorComponent } from './assets/error.component';\nimport { IsObject } from '../../pop-common-utility';\nimport { PopTemplateBufferComponent } from './assets/buffer.component';\nimport { PopCacFilterBarService } from './pop-cac-filter/pop-cac-filter.service';\nimport { AppGlobalInterface } from '../../pop-common.model';\n\n\n@Injectable( {\n  providedIn: 'root'\n} )\nexport class PopTemplateService {\n\n  protected asset = {\n    notification: <MatSnackBarRef<any>>undefined,\n    contentEl: <ElementRef>undefined\n  };\n\n\n\n\n  constructor(\n    private filter: PopCacFilterBarService,\n    private snackbar: MatSnackBar,\n    @Inject( 'APP_GLOBAL' ) private APP_GLOBAL: AppGlobalInterface,\n    @Inject( 'env' ) private env?\n  ){\n  }\n\n\n  turnOffFilter(){\n    this.filter.setActive( false );\n  }\n\n\n  welcome(){\n    this.asset.notification = this.snackbar.openFromComponent( PopTemplateWelcomeComponent, {\n      panelClass: 'pop-template-center',\n      duration: 5 * 1000\n    } );\n  }\n\n\n  buffer( expression: string = null, duration: number = 4 ){\n    if( isDevMode() ){\n      this.asset.notification = this.snackbar.openFromComponent( PopTemplateBufferComponent, {\n        panelClass: 'pop-template-center',\n        duration: duration * 1000,\n        data: {\n          expression: expression,\n        }\n      } );\n    }\n  }\n\n\n  error( error: { message: string, code: number }, duration: number = 5 ){\n    if( isDevMode() ){\n      this.asset.notification = this.snackbar.openFromComponent( PopTemplateErrorComponent, {\n        panelClass: 'pop-template-center',\n        duration: duration * 1000\n      } );\n      this.asset.notification.instance.error = error;\n    }\n  }\n\n\n  goodbye(){\n    this.asset.notification = this.snackbar.openFromComponent( PopTemplateGoodByeComponent, {\n      panelClass: 'pop-template-center',\n      duration: 5 * 1000\n    } );\n  }\n\n\n  lookBusy( duration: number = 5 ){\n    if( isDevMode() ){\n      this.asset.notification = this.snackbar.openFromComponent( PopTemplateAjaxLoaderComponent, {\n        panelClass: 'pop-template-center',\n        duration: duration * 1000\n      } );\n    }\n  }\n\n\n  notify( message: string, action: string = null, duration: number = 3 ){\n    this.asset.notification = this.snackbar.open(\n      message, action, {\n        panelClass: 'pop-template-center',\n        duration: duration * 1000\n      }\n    );\n  }\n\n\n  clear(){\n    if( IsObject( this.asset.notification, [ 'dismiss' ] ) ){\n      this.asset.notification.dismiss();\n    }\n  }\n\n\n  setContentEl( el: ElementRef ): void{\n    if( el ) this.asset.contentEl = el;\n  }\n\n\n  verify(){\n    if( this.APP_GLOBAL.isVerified() ){\n      this.APP_GLOBAL.verification.next();\n    }\n  }\n\n\n  getContentHeight( modal = false, overhead = 60 ): number{\n    let height = window.innerHeight;\n    if( this.asset.contentEl && this.asset.contentEl.nativeElement.offsetTop) height = (height - this.asset.contentEl.nativeElement.offsetTop);\n    if( modal ) height -= 100;\n    if( overhead ) height -= overhead;\n    return height;\n  }\n}\n","import { Component, ElementRef, HostBinding, Inject, Input, OnDestroy, OnInit, Renderer2, ViewChild, ViewEncapsulation } from '@angular/core';\nimport { EntityMenu } from './pop-left-menu/entity-menu.model';\nimport { PopTemplateService } from './pop-template.service';\nimport {\n  AppGlobalInterface, AppThemeInterface,\n} from '../../pop-common.model';\nimport { PopExtendComponent } from '../../pop-extend.component';\nimport { Router } from '@angular/router';\nimport { fadeInOut } from '../../pop-common-animations.model';\n\n\n@Component( {\n  selector: 'lib-pop-template',\n  templateUrl: './pop-template.component.html',\n  styleUrls: [ './pop-template.component.scss' ],\n  encapsulation: ViewEncapsulation.None,\n} )\nexport class PopTemplateComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @ViewChild( 'header' ) header: ElementRef;\n  @ViewChild( 'content' ) content: ElementRef;\n  @HostBinding( 'class.pop-template-backdrop' ) @Input() backdrop = true;\n  @Input() menus: EntityMenu[] = [];\n  @Input() widgets: any[] = [];\n  @Input() filter = true;\n  @Input() left = true;\n  @Input() right = true;\n  @Input() displayMenu = true;\n\n\n  public name = 'PopTemplateComponent';\n\n\n  constructor(\n    public el: ElementRef,\n    private router: Router,\n    private template: PopTemplateService,\n    private renderer: Renderer2,\n    @Inject( 'APP_GLOBAL' ) private APP_GLOBAL: AppGlobalInterface,\n    @Inject( 'APP_THEME' ) private APP_THEME: AppThemeInterface,\n  ){\n    super();\n\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n        this.dom.setSubscriber( 'theme', this.APP_THEME.init.subscribe( ( val: boolean ) => {\n          this.dom.setTimeout(`remove-backdrop`, ()=>{\n            this.renderer.removeClass(document.body, 'site-backdrop-dark');\n          }, 0);\n          if( val ) this.backdrop = !val;\n        } ) );\n        this.dom.setSubscriber( 'init', this.APP_GLOBAL.init.subscribe( ( val: boolean ) => {\n          if( val ) this._initialize();\n        } ) );\n\n        window.onbeforeunload = () =>{\n          try {\n            this.APP_GLOBAL._unload.next(true);\n          } catch(e){\n            console.log(e);\n          }\n        };\n\n        return resolve( true );\n      } );\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n        this.template.setContentEl( this.content );\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  ngOnInit(): void{\n    super.ngOnInit();\n  }\n\n\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  private _initialize(){\n\n    return true;\n  }\n\n\n}\n","import { IsString } from '../../../pop-common-utility';\n\n\nexport class EntityMenu {\n  public id: number;\n  public description?: string;\n  public entity_id?:number;\n  public icon?: string;\n  public iconType?: string;\n  public name: string;\n  public path: string;\n  public short_description: string;\n  public internal_name: string;\n  public sort: number;\n  public character_icon: string;\n  hasAlias: boolean;\n  originalPath: string;\n  originalName: string;\n\n\n  constructor(\n    args: {\n      id?: number,\n      description?: string,\n      entity_id?:number,\n      icon?: string,\n      name: string,\n      path: string,\n      short_description: string,\n      internal_name?: string;\n      sort: number,\n      hasAlias?: boolean;\n      originalPath?: string;\n      originalName?: string;\n    }\n  ){\n    this.id = args.id || 0;\n    this.description = args.description || '';\n    this.name = args.name;\n    this.entity_id = args.entity_id || null;\n    this.path = args.path;\n    this.short_description = args.short_description || '';\n    this.sort = args.sort || 0;\n    this.internal_name = args.internal_name || null;\n    this.hasAlias =  args.hasAlias ? true: false;\n    this.originalPath =  args.originalPath;\n    this.originalName =  args.originalName;\n    if( IsString(args.icon, true) ){\n      this.icon = args.icon;\n      this._setIcon();\n    }\n    else{\n      this._setCharacters();\n    }\n  }\n\n\n  private _setPath(){\n    const pathSet = this.path.split(\"/\");\n    this.path = '/' + pathSet[ pathSet.length - 1 ];\n  }\n\n\n  private _setIcon(){\n    const iconSet = this.icon.split(\":\");\n    if( iconSet.length === 2 ){\n      [ this.iconType, this.icon ] = iconSet;\n    }\n  }\n\n\n  private _setCharacters(){\n    this.character_icon = \"\";\n    const nameArray = this.name.split(\" \");\n    if( nameArray.length >= 2 ){\n      this.character_icon += nameArray[ 0 ].charAt(0).toLocaleUpperCase();\n      this.character_icon += nameArray[ 1 ].charAt(0).toLocaleUpperCase();\n    }\n    else{\n      this.character_icon += this.name.charAt(0).toLocaleUpperCase();\n      this.character_icon += this.name.charAt(1).toLocaleLowerCase();\n    }\n  }\n}\n\n","import {Injectable} from '@angular/core';\nimport {EntityAccessInterface, EntityParams, EntityParamsInterface} from '../../../pop-common.model';\nimport {DeepMerge, IsNumber, IsObject, SpaceToHyphenLower} from '../../../pop-common-utility';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PopEntityUtilParamService {\n\n  private store = <Map<string, EntityParamsInterface>>new Map<string, EntityParamsInterface>();\n  private mapById = <Map<number, string>>new Map<number, string>();\n  private mapByRoute = <Map<string, string>>new Map<string, string>();\n\n\n  constructor() {\n    this.setEntityParams({\n      id: 0,\n      alias: null,\n      access: {\n        can_create: 1,\n        can_read: 1,\n        can_update: 1,\n        can_delete: 0,\n        can_destroy: 0,\n      },\n      can_extend: false,\n      path: '/auth/user',\n      param: '',\n      api: '/auth/user',\n      internal_name: 'prime_user',\n      name: 'Prime User',\n    });\n  }\n\n\n  public getEntityParamsWithPath(path: string, entityId: number = null,): EntityParams {\n    let entity;\n    let entityParams = <EntityParams>undefined;\n    const internal_name = this.mapByRoute.get(path);\n    if (internal_name && this.store.has(internal_name)) entity = this.store.get(internal_name);\n    if (entity) {\n      entityParams = <EntityParams>{\n        alias: entity.alias,\n        api: entity.api,\n        app: entity.app,\n        id: entity.id,\n        can_extend: entity.can_extend,\n        internal_name: entity.internal_name,\n        name: entity.name,\n        path: entity.path,\n        param: entity.param,\n      };\n      if (entityId) entityParams.entityId = entityId;\n    }\n\n    return entityParams;\n  }\n\n\n  public setEntityParams(params: EntityParamsInterface): void {\n    if (IsObject(params, true)) {\n      if (!(IsObject(params.access, true))) {\n        params.access = {can_create: 0, can_read: 0, can_update: 0, can_delete: 0, can_destroy: 0};\n      } else {\n        Object.keys(params.access).map((accessName) => {\n          params.access[accessName] = +params.access[accessName];\n        });\n      }\n      this.mapById.set(+params.id, params.internal_name);\n      this.mapByRoute.set(SpaceToHyphenLower(params.name), params.internal_name);\n      if (this.store.has(params.internal_name)) {\n        let existingParams = this.store.get(params.internal_name);\n        existingParams = DeepMerge(existingParams, params);\n        this.store.set(params.internal_name, existingParams);\n      } else {\n        this.store.set(params.internal_name, params);\n      }\n    }\n  }\n\n\n  public getEntityParams(internal_name: string | number, entityId: number = null,): EntityParamsInterface {\n    let entityParams = <EntityParams>undefined;\n    if (IsNumber(internal_name)) {\n      internal_name = this.mapById.get(+internal_name);\n    }\n    const entity = this.store.get(internal_name + '');\n    if (entity) {\n      entityParams = <EntityParams>{\n        alias: entity.alias,\n        api: entity.api,\n        app: entity.app,\n        id: entity.id,\n        can_extend: entity.can_extend,\n        internal_name: entity.internal_name,\n        name: entity.name,\n        path: entity.path,\n        param: entity.param,\n      };\n      if (entityId) entityParams.entityId = entityId;\n    }\n    return entityParams;\n  }\n\n\n  public getAccess(internal_name: string | number, accessType?: string): EntityAccessInterface | null {\n    let access = null;\n    if (IsNumber(internal_name)) internal_name = this.mapById.get(+internal_name);\n    if (this.store.has(internal_name + '')) {\n      const entity = this.store.get(internal_name + '');\n      if (accessType && accessType in entity.access) {\n        access = entity.access[accessType];\n      } else {\n        access = entity.access;\n      }\n    }\n    return access;\n  }\n\n  public getAlias(internal_name: string | number, accessType?: string): EntityAccessInterface | null {\n    let alias = null;\n    if (IsNumber(internal_name)) internal_name = this.mapById.get(+internal_name);\n    if (this.store.has(internal_name + '')) {\n      const entity = this.store.get(internal_name + '');\n      if (IsObject(entity.alias, true)) {\n        alias = entity.alias;\n      }\n    }\n    return alias;\n  }\n\n\n  /**\n   * Checks if the user has permissons to the specific type of an entity depending upon the local token details.\n   *\n   * @param appName - The name of the app to check. IE: admin, cis, etc...\n   * @param entityName - The name of the entity inside the app to check: IE: For the admin app, users.\n   * @param accessType - The type of permissons to check. Enum [can_create, can_read, can_update, can_delete]\n   */\n  public checkAccess(internal_name: string | number, accessType: string): boolean {\n    if (IsNumber(internal_name)) internal_name = this.mapById.get(+internal_name);\n    if (this.store.has(internal_name + '')) {\n      const entity = this.store.get(internal_name + '');\n      return !!entity.access[accessType];\n    }\n    return false;\n  }\n\n\n}\n","import {Component, HostBinding, Inject, Input, OnDestroy, OnInit} from '@angular/core';\nimport {EntityMenu} from './entity-menu.model';\nimport {\n  GetSiteVar,\n  IsArray, IsCallableFunction, IsDefined,\n  IsObject, IsString,\n  ObjectsMatch,\n  SetSiteVar,\n  SpaceToHyphenLower, TitleCase,\n} from '../../../pop-common-utility';\nimport {\n  AppGlobalInterface,\n  AppMenusInterface,\n  PopApp,\n  PopAuth,\n  PopHref,\n  PopLog,\n  ServiceInjector,\n  SetPopAliasRouteMap,\n} from '../../../pop-common.model';\nimport {Router} from '@angular/router';\nimport {PopExtendComponent} from '../../../pop-extend.component';\nimport {PopEntityUtilParamService} from '../../entity/services/pop-entity-util-param.service';\n\n\n@Component({\n  selector: 'lib-pop-left-menu',\n  templateUrl: './pop-left-menu.component.html',\n  styleUrls: ['./pop-left-menu.component.scss'],\n})\nexport class PopLeftMenuComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() entityMenus: EntityMenu[] = [];\n  @HostBinding('class.sw-hidden') @Input() hidden = false;\n  public name = 'PopLeftMenuComponent';\n\n  protected srv = {\n    param: <PopEntityUtilParamService>ServiceInjector.get(PopEntityUtilParamService)\n  };\n\n  protected asset = {\n    siteVar: 'App.LeftMenu.open',\n  };\n\n  public ui = {};\n\n\n  constructor(\n    private router: Router,\n    @Inject('APP_GLOBAL') private APP_GLOBAL: AppGlobalInterface,\n    @Inject('APP_MENUS') private APP_MENUS: AppMenusInterface,\n  ) {\n    super();\n\n    if (APP_GLOBAL.isOpen()) {\n      PopLog.init(this.name, `Public App`, this.entityMenus);\n      this.hidden = ((this.APP_GLOBAL.isEntities() && !(IsObject(PopAuth))) || !(this.entityMenus.length)) ? true : false;\n    } else {\n      this._initialize();\n      this.dom.setSubscriber('init', this.APP_GLOBAL.init.subscribe(async (val: boolean) => {\n        if (val) {\n          this.dom.state.verified = await this.APP_GLOBAL.isVerified();\n          this._initialize();\n        }\n      }));\n    }\n\n\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise(async (resolve) => {\n\n        return resolve(true);\n      });\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise(async (resolve) => {\n        this._setState();\n        return resolve(true);\n      });\n    };\n  }\n\n\n  ngOnInit() {\n    super.ngOnInit();\n  }\n\n  /**\n   * This fx will open/close the left side nav\n   */\n  public onToggleMenu(): void {\n    this.dom.state.open = !this.dom.state.open;\n    this.dom.state.closed = !this.dom.state.open;\n    SetSiteVar(this.asset.siteVar, this.dom.state.open);\n    window.dispatchEvent(new Event('onWindowResize'));\n  }\n\n  ngOnDestroy() {\n    super.ngOnDestroy();\n  }\n\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  /**\n   * This fx will build out the menus for this component\n   * @private\n   */\n  private _initialize() {\n    this.dom.setTimeout(`init`, async () => {\n      const menus = await this._setMenus();\n      PopLog.init(this.name, `Private App`, this.entityMenus);\n      if (IsArray(menus, true) && this._isVerifiedMenusDifferent(menus)) {\n        this.entityMenus = menus;\n      }\n      this.hidden = ((this.APP_GLOBAL.isEntities() && !(IsObject(PopAuth))) || !(this.entityMenus.length)) ? true : false;\n      if (this.dom.state.verified) {\n        await this._checkDefaultRoute();\n      }\n\n    }, 5);\n  }\n\n\n  /**\n   * Determine the state of this component\n   * The component should be open or closed base of the users latest session setting, or should default to open\n   * @private\n   */\n  private _setState() {\n    const open = GetSiteVar(this.asset.siteVar, true);\n    this.dom.state.open = typeof open === 'boolean' ? open : false;\n    this.dom.state.closed = !this.dom.state.open;\n  }\n\n\n  /**\n   * Create a list of the menus needed for the current app\n   * @private\n   */\n  private _setMenus(): Promise<EntityMenu[]> {\n    return new Promise<EntityMenu[]>(async (resolve) => {\n      let menus = [];\n      const routeAliasMap = {};\n      if (this.APP_GLOBAL.isEntities() && IsObject(PopApp, ['menu'])) {\n        for (const menuEntity in PopApp.menu) {\n          if (IsObject(PopApp.menu [menuEntity])) {\n            const menu = PopApp.menu[menuEntity];\n            menu.originalPath = menu.path;\n            menu.originalName = menu.name;\n\n            if (menu.entity_id) {\n              const params = this.srv.param.getEntityParams(menu.entity_id);\n              if (IsObject(params, ['id', 'internal_name']) && this.srv.param.checkAccess(params.internal_name, 'can_read')) {\n                menu.id = +menu.entity_id;\n                menu.internal_name = params.internal_name;\n                if (this.APP_GLOBAL.isAliases() && IsObject(params.alias, ['name', 'plural'])) {\n                  const alias = params.alias;\n                  menu.hasAlias = true;\n                  menu.name = TitleCase(alias.plural);\n                  menu.path = SpaceToHyphenLower(alias.plural);\n                  routeAliasMap[SpaceToHyphenLower(alias.plural)] = menu.originalPath;\n                } else {\n                  menu.hasAlias = false;\n                }\n                menus.push(new EntityMenu(menu));\n              } else {\n                PopLog.warn(this.name, `Cannot view menu:`, menu);\n              }\n            } else {\n              menus.push(new EntityMenu(menu));\n            }\n          }\n        }\n        if (IsCallableFunction(this.APP_MENUS.init)) {\n          menus = this.APP_MENUS.init(menus);\n        }\n        SetPopAliasRouteMap(routeAliasMap);\n        this.APP_MENUS.set(menus);\n        return resolve(menus);\n      } else {\n        return resolve(menus);\n      }\n    });\n  }\n\n\n  /**\n   * Set a default route for the project\n   * @param parent\n   * @param config\n   * @param routes\n   * @private\n   */\n  private _checkDefaultRoute(): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      if (this.router.config.length && IsArray(this.entityMenus, true)) {\n        const defaultRoute = this.router.config.find((route) => route.path === '**');\n        if (!defaultRoute && this._isValidRoute(this.entityMenus[0].path)) {\n          this.router.config.push({path: '**', 'redirectTo': this.entityMenus[0].path});\n          PopLog.init(this.name, `Default Route Wildcard **`, this.entityMenus[0].path);\n        }\n        // const activeRouteUrl = ( !this.router.url || this.router.url === '/' ) ? false : true;\n        // if( !activeRouteUrl ){\n        const currentPath = window.location.href.split(`${PopHref}`)[1];\n        if (this._isValidRoute(currentPath)) {\n          this._fallBackUrlRoute();\n        } else {\n          this._fallBackMenuRoute();\n        }\n        // }\n      } else {\n\n      }\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * This fx will try to use the first menu item as the default route\n   * @private\n   */\n  private _fallBackMenuRoute() {\n    PopLog.init(this.name, `Fallback Menu Route`, this.entityMenus[0].path);\n    if (IsArray(this.entityMenus, true) && this._isValidRoute(this.entityMenus[0].path)) {\n      this.log.info(`Fallback Menu Route`, this.entityMenus[0].path);\n      this.router.navigate([this.entityMenus[0].path]).catch((e) => {\n        this.log.info(`Could not find route`);\n        this._fallbackSystemRoute();\n      });\n    } else {\n      this._fallbackSystemRoute();\n    }\n  }\n\n\n  /**\n   * This fx will attempt to use the current url as the default route\n   * @private\n   */\n  private _fallBackUrlRoute() {\n    let currentPath = window.location.href.split(PopHref)[1];\n    currentPath = currentPath.split('?')[0];\n    if (this._isValidRoute(currentPath)) {\n      PopLog.init(this.name, `Current Route`, currentPath);\n      this.router.navigate([currentPath], {queryParams: this._getUrlParams()}).catch((e) => {\n        this._fallbackSystemRoute();\n      }).then(() => {\n        if (!(this.router.url.includes(currentPath))) {\n          this._fallbackSystemRoute();\n        }\n      });\n    } else {\n      this._fallbackSystemRoute();\n    }\n  }\n\n\n  /**\n   * This fx will temp redirect and try to find a valid route\n   * @private\n   */\n  private _fallbackSystemRoute() {\n    if (this.dom.state.verified) {\n      this.router.navigate(['/system/route'], {skipLocationChange: true});\n    } else {\n      this.router.navigate(['/']);\n    }\n  }\n\n\n  /**\n   * This fx determines if there is a difference between tow sets of menus(existing, new)\n   * @param menus\n   * @private\n   */\n  private _isVerifiedMenusDifferent(menus: EntityMenu[]) {\n    return !(ObjectsMatch(this.entityMenus, menus));\n  }\n\n\n  /**\n   * This fx determines if a path is a valid route\n   * @param path\n   * @private\n   */\n  private _isValidRoute(path: string) {\n    return IsDefined(path, false) && IsString(path, true) && path !== '/' && path !== 'null' && !(String(path).includes('/error/'));\n  }\n\n\n  private _getUrlParams() {\n    const params = {};\n    window.location.search.slice(1).split('&').forEach(elm => {\n      if (elm === '') return;\n      const spl = elm.split('=');\n      const d = decodeURIComponent;\n      params[d(spl[0])] = (spl.length >= 2 ? d(spl[1]) : true);\n    });\n\n    return params;\n  }\n}\n\n","import {NgModule} from '@angular/core';\nimport {MatButtonModule} from '@angular/material/button';\nimport {MatButtonToggleModule} from '@angular/material/button-toggle';\nimport {MatCheckboxModule} from '@angular/material/checkbox';\nimport {MatCardModule} from '@angular/material/card';\nimport {MatDatepickerModule} from '@angular/material/datepicker';\nimport {MatExpansionModule} from '@angular/material/expansion';\nimport {MatFormFieldModule} from '@angular/material/form-field';\nimport {MatGridListModule} from '@angular/material/grid-list';\nimport {MatInputModule} from '@angular/material/input';\nimport {MatIconModule} from '@angular/material/icon';\nimport {MatListModule} from '@angular/material/list';\nimport {MatMenuModule} from '@angular/material/menu';\nimport {MatPaginatorModule} from '@angular/material/paginator';\nimport {MatProgressBarModule} from '@angular/material/progress-bar';\nimport {MatProgressSpinnerModule} from '@angular/material/progress-spinner';\nimport {MatRadioModule} from '@angular/material/radio';\nimport {MatSelectModule} from '@angular/material/select';\nimport {MatSidenavModule} from '@angular/material/sidenav';\nimport {MatSlideToggleModule} from '@angular/material/slide-toggle';\nimport {MatSortModule} from '@angular/material/sort';\nimport {MatRippleModule} from '@angular/material/core';\nimport {MatDialog, MatDialogModule} from '@angular/material/dialog';\nimport {MatTableModule} from '@angular/material/table';\nimport {MatTabsModule} from '@angular/material/tabs';\nimport {MatToolbarModule} from '@angular/material/toolbar';\nimport {MatTooltipModule} from '@angular/material/tooltip';\nimport {MatAutocompleteModule} from '@angular/material/autocomplete';\nimport {MatSliderModule} from '@angular/material/slider';\nimport {Overlay} from \"@angular/cdk/overlay\";\n\n@NgModule({\n  imports: [\n    MatAutocompleteModule,\n    MatButtonModule,\n    MatButtonToggleModule,\n    MatCheckboxModule,\n    MatCardModule,\n    MatDatepickerModule,\n    MatDialogModule,\n    MatExpansionModule,\n    MatFormFieldModule,\n    MatGridListModule,\n    MatInputModule,\n    MatIconModule,\n    MatListModule,\n    MatMenuModule,\n    MatPaginatorModule,\n    MatProgressBarModule,\n    MatProgressSpinnerModule,\n    MatRadioModule,\n    MatRippleModule,\n    MatSelectModule,\n    MatSidenavModule,\n    MatSlideToggleModule,\n    MatSortModule,\n    MatTableModule,\n    MatTabsModule,\n    MatToolbarModule,\n    MatTooltipModule,\n    MatSliderModule\n  ],\n  exports: [\n    MatAutocompleteModule,\n    MatButtonModule,\n    MatButtonToggleModule,\n    MatCheckboxModule,\n    MatCardModule,\n    MatDatepickerModule,\n    MatDialogModule,\n    MatExpansionModule,\n    MatFormFieldModule,\n    MatGridListModule,\n    MatInputModule,\n    MatIconModule,\n    MatListModule,\n    MatMenuModule,\n    MatPaginatorModule,\n    MatProgressBarModule,\n    MatProgressSpinnerModule,\n    MatRadioModule,\n    MatRippleModule,\n    MatSelectModule,\n    MatSidenavModule,\n    MatSlideToggleModule,\n    MatSortModule,\n    MatTableModule,\n    MatTabsModule,\n    MatToolbarModule,\n    MatTooltipModule,\n    MatSliderModule,\n  ],\n  providers: [],\n})\nexport class MaterialModule {\n  static forRoot() {\n    return {\n      ngModule: MaterialModule,\n      providers: [MatDialog, Overlay]\n    };\n  }\n}\n","import { Component, Input, OnInit } from '@angular/core';\nimport { MainSpinner } from './pop-indicators.model';\n\n\n@Component({\n  selector: 'lib-main-spinner',\n  templateUrl: 'main-spinner.component.html',\n  styleUrls: ['main-spinner.component.scss']\n})\nexport class MainSpinnerComponent implements OnInit {\n  @Input() options: MainSpinner;\n  color: string;\n  mode: string;\n  diameter: number;\n  strokeWidth: number;\n\n\n  ngOnInit(){\n    if( !this.options ) this.options = {};\n    this.color = this.options.color ? this.options.color : 'primary';\n    this.mode = this.options.mode ? this.options.mode : 'indeterminate';\n    this.diameter = this.options.diameter ? this.options.diameter : 75;\n    this.strokeWidth = this.options.strokeWidth ? this.options.strokeWidth : 12;\n  }\n}\n","import { NgModule } from \"@angular/core\";\nimport {MaterialModule} from '../../material/material.module';\nimport {MainSpinnerComponent} from './main-spinner.component';\n\n@NgModule({\n  declarations: [MainSpinnerComponent],\n  imports: [MaterialModule],\n  exports: [MainSpinnerComponent],\n})\nexport class PopIndicatorsModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatRippleModule } from '@angular/material/core';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatListModule } from '@angular/material/list';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { PopLeftMenuComponent} from './pop-left-menu.component';\nimport { PopIndicatorsModule } from '../../base/pop-indicators/pop-indicators.module';\n\n@NgModule({\n    declarations: [\n        PopLeftMenuComponent,\n    ],\n    imports: [\n        CommonModule,\n        RouterModule,\n        MatRippleModule,\n        MatIconModule,\n        MatTooltipModule,\n        MatListModule,\n        MatButtonModule,\n        PopIndicatorsModule\n    ],\n    exports: [\n        PopLeftMenuComponent,\n    ],\n    providers: [\n    ],\n\n})\nexport class PopLeftMenuModule {\n}\n","import { Component, ComponentFactoryResolver, ComponentRef, OnDestroy, OnInit, ViewContainerRef } from '@angular/core';\nimport { ComponentTemplateInterface, DestroyComponentTemplate, GetComponentTemplateContainer } from './pop-common-dom.models';\nimport {DynamicComponentInterface, PopBaseEventInterface, PopComponentResolver} from './pop-common.model';\nimport { Subscription } from 'rxjs';\nimport { ServiceInjector } from './pop-common.model';\nimport { PopExtendComponent } from './pop-extend.component';\nimport { IsDefined, IsObject, IsString } from './pop-common-utility';\n\n\n@Component( {\n  selector: 'lib-pop-template-component',\n  template: `Template Component`,\n} )\nexport class PopExtendDynamicComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  protected template: ComponentTemplateInterface = GetComponentTemplateContainer();\n\n\n  constructor(){\n    super();\n\n    this.template = <ComponentTemplateInterface>{\n      ...this.template, ...{\n        attach: ( container: string | ViewContainerRef ) => {\n          if( IsString( container, true ) ){\n            if( this[ <string> container ] ){\n              this.template.container = this[ <string>container ];\n              delete this[ <string>container ];\n            }else{\n            }\n          }else{\n            this.template.container = <ViewContainerRef>container;\n          }\n        },\n\n        render: ( list: DynamicComponentInterface[], transfer = [ 'core', 'position' ], bypassTransfer = false ) => {\n          this.template.ref_events.map( ( subscription: Subscription ) => {\n            if( subscription && typeof subscription.unsubscribe === 'function' ){\n              subscription.unsubscribe();\n            }\n          } );\n\n          this.template.refs = this.template.refs.map( function( componentRef: ComponentRef<any> ){\n            if( componentRef && typeof componentRef.destroy === 'function' ){\n              componentRef.destroy();\n            }\n            componentRef = null;\n            return null;\n          } );\n          this.template.transfer = {};\n          if( !bypassTransfer ){\n            transfer.map( ( transferKey: string ) => {\n              if( typeof this[ transferKey ] !== 'undefined' ){\n                this.template.transfer[ transferKey ] = this[ transferKey ];\n              }\n            } );\n          }\n          if( this.template && this.template.container ){\n\n\n            this.template.container.clear();\n            if( Array.isArray( list ) ){\n              list.map( ( component: DynamicComponentInterface ) => {\n                if( IsObject( component, true ) && IsDefined( component.type ) ){\n                  const factory = PopComponentResolver.resolveComponentFactory( component.type );\n                  const componentRef = <any>this.template.container.createComponent( factory );\n\n                  if( componentRef.instance.events ){\n                    this.template.ref_events.push( componentRef.instance.events.subscribe( ( event: PopBaseEventInterface ) => {\n                      if( typeof this.dom.handler.bubble === 'function' ){\n                        this.dom.handler.bubble( this.core, event );\n                      }else{\n                        if( this.trait.bubble ) this.events.emit( event );\n                      }\n                    } ) );\n                  }\n\n                  if( typeof( component.inputs ) === 'object' ){\n                    Object.keys( component.inputs ).map( ( key ) => {\n                      if( typeof( key ) === 'string' && typeof( component.inputs[ key ] ) !== 'undefined' ){\n                        componentRef.instance[ key ] = component.inputs[ key ];\n                      }\n                    } );\n                  }\n                  Object.keys( this.template.transfer ).map( ( transferKey: string ) => {\n                    componentRef.instance[ transferKey ] = this.template.transfer[ transferKey ];\n                  } );\n                  componentRef.changeDetectorRef.detectChanges();\n                  this.template.refs.push( componentRef );\n                }\n              } );\n            }\n          }\n        },\n        clear: () => {\n          if( this.template.container ) this.template.container.clear();\n        },\n\n        destroy: () => {\n          if( this.template ) DestroyComponentTemplate( this.template );\n        },\n      }\n    };\n  }\n\n\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  ngOnDestroy(){\n    this.template.destroy();\n    super.ngOnDestroy();\n  }\n\n}\n","import { Component, HostBinding, Inject, Input, OnDestroy, OnInit } from '@angular/core';\nimport { AppGlobalInterface, AppWidgetsInterface, PopAuth } from '../../../pop-common.model';\nimport { PopExtendDynamicComponent } from '../../../pop-extend-dynamic.component';\nimport { EntityMenu } from '../pop-left-menu/entity-menu.model';\nimport { IsObject } from '../../../pop-common-utility';\n\n\n@Component({\n  selector: 'lib-pop-widget-bar',\n  templateUrl: './pop-widget-bar.component.html',\n  styleUrls: [ './pop-widget-bar.component.scss' ],\n})\nexport class PopWidgetBarComponent extends PopExtendDynamicComponent implements OnInit, OnDestroy {\n  @HostBinding('class.sw-hidden') @Input() hidden = false;\n  @Input() widgets: any[] = [];\n  public name =  'PopWidgetBarComponent';\n\n  public ui = {};\n\n  protected asset = {};\n\n  constructor(\n    @Inject( 'APP_GLOBAL' ) private APP_GLOBAL: AppGlobalInterface,\n    @Inject( 'APP_WIDGETS' ) private APP_WIDGETS: AppWidgetsInterface,\n  ){\n    super();\n\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n        this.dom.state.open = false;\n        this.dom.state.closed = true;\n\n        this.dom.setSubscriber( 'init', this.APP_GLOBAL.init.subscribe( ( val: boolean ) => {\n          if( val ) this._initialize();\n        } ) );\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  public onToggleMenu(): void{\n    this.dom.state.open = !this.dom.state.open;\n    this.dom.state.closed = !this.dom.state.open;\n    window.dispatchEvent(new Event('onWindowResize'));\n  }\n\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n  private _initialize(){\n    this.hidden = ( ( this.APP_GLOBAL.isEntities() && !( IsObject( PopAuth ) ) ) || !( this.widgets.length ) ) ? true : false;\n    return true;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { PopWidgetBarComponent } from './pop-widget-bar.component';\nimport { MatButtonModule } from '@angular/material/button';\n\n\n@NgModule( {\n  imports: [\n    CommonModule,\n    MatButtonModule\n  ],\n  declarations: [\n    PopWidgetBarComponent,\n  ],\n  exports: [\n    PopWidgetBarComponent,\n  ],\n  providers: [],\n} )\nexport class PopWidgetBarModule{\n}\n","import { ChangeDetectorRef, Component, ElementRef, HostBinding, Input, OnDestroy, OnInit } from '@angular/core';\nimport { PopExtendComponent } from '../../../pop-extend.component';\nimport { Dictionary, Entity, FieldItemPatchInterface, PopBaseEventInterface, PopRequest, ServiceInjector } from '../../../pop-common.model';\nimport { HttpErrorResponse } from '@angular/common/http';\nimport { FormControl } from '@angular/forms';\nimport { ValidationErrorMessages } from '../../../services/pop-validators';\nimport {GetHttpErrorMsg, IsArray, IsNumber, IsObject, IsString, PopTransform} from '../../../pop-common-utility';\nimport { SessionEntityFieldUpdate } from '../../entity/pop-entity-utility';\nimport { PopEntityEventService } from '../../entity/services/pop-entity-event.service';\n\n\n@Component( {\n  selector: 'lib-pop-field-item-component',\n  template: `Field Item Component`,\n} )\nexport class PopFieldItemComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() position = 1;\n  @Input() when: any[] = null;\n  @HostBinding( 'class.sw-hidden' ) @Input() hidden = false;\n  config: any;\n  el: ElementRef;\n  name: string;\n  protected cdr: ChangeDetectorRef;\n\n\n  constructor(){\n    super();\n\n    this.dom.state.helper = false;\n    this.dom.state.tooltip = false;\n    this.dom.state.hint = false;\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * On Link Click\n   */\n  onLinkClick(){\n    console.log( 'LINK STUB: Link to Entity', this.config );\n  }\n\n\n  /**\n   * On Blur Event\n   */\n  onBlur(){\n    if( IsObject( this.config, true ) ){\n      let value = this.config.control.value;\n      if( IsString( value ) ){\n        value = String( value ).trim();\n        this.config.control.setValue( value );\n      }else if( IsNumber( value ) ){\n        value = +String( value ).trim();\n        this.config.control.setValue( value );\n      }\n\n      this.onBubbleEvent( 'onBlur' );\n      if( this._isChangeValid() ){\n        if( this._isFieldPatchable() ){\n          this.onChange();\n        }else{\n          this._applyTransformation( value );\n        }\n      }\n    }\n  }\n\n\n  /**\n   * On Change event\n   * @param value\n   * @param force\n   */\n  onChange( value?: any, force = false ){\n    if( IsObject( this.config, [ 'control' ] ) ){\n      this.log.info( `onChange`, value );\n      const control = <FormControl>this.config.control;\n      if( typeof value !== 'undefined' ){\n        control.setValue( value );\n        control.markAsDirty();\n        control.updateValueAndValidity();\n      }\n      if( this._isChangeValid() ){\n        value = typeof value !== 'undefined' ? value : this.config.control.value;\n        value = this._applyTransformation( value );\n        if( this.config.patch && ( this.config.patch.path || this.config.facade ) ){\n          this._onPatch( value, force );\n        }else{\n          this.onBubbleEvent( 'onChange' );\n        }\n      }else{\n        // console.log( 'invalid change', this.config.control.value );\n        this.onBubbleEvent( 'onInvalidChange' );\n      }\n    }\n  }\n\n\n  /**\n   * On Focus event\n   */\n  onFocus(): void{\n    if( IsObject( this.config, [ 'control' ] ) ){\n      const control = <FormControl>this.config.control;\n      if( !control.dirty ) this.asset.storedValue = this.config.control.value;\n      this.config.message = '';\n      this.onBubbleEvent( 'onFocus' );\n    }\n  }\n\n\n  /**\n   * This will bubble an event up the pipeline\n   * @param eventName\n   * @param message\n   * @param extend\n   * @param force\n   */\n  onBubbleEvent( eventName: string, message: string = null, extend: Dictionary<any> = {}, force = false ): PopBaseEventInterface{\n    if( IsObject( this.config, true ) ){\n      const event = <PopBaseEventInterface>{\n        type: 'field',\n        name: eventName,\n        source: this.name\n      };\n      if( this.config ) event.config = this.config;\n      if( message ) event.message = message;\n      Object.keys( extend ).map( ( key ) => {\n        event[ key ] = extend[ key ];\n      } );\n      this.log.event( `onBubbleEvent`, event );\n      if( this.config.bubble || force ){\n        this.events.emit( event );\n      }\n\n      return event;\n    }\n  }\n\n\n  ngOnDestroy(){\n    this._clearState();\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Protected Method )                                      *\n   *               These are protected instead of private so that they can be overridden          *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  /**\n   * Hook that is called on destroy to reset the field\n   */\n  protected _clearState(): void{\n    const patch = <FieldItemPatchInterface>this.config.patch;\n    const control = <FormControl>this.config.control;\n    if( patch.running ){\n      control.enable();\n      patch.running = false;\n    }\n  }\n\n\n  /**\n   * Hook that is called right before a patch\n   */\n  protected _beforePatch(): Promise<boolean>{\n    return new Promise( ( resolve ) => {\n      const patch = <FieldItemPatchInterface>this.config.patch;\n      const control = <FormControl>this.config.control;\n\n      control.disable();\n      patch.running = true;\n\n      this._clearMessage();\n\n      return resolve( true );\n    } );\n  }\n\n\n  /**\n   * Hook that is called right after the api response returns\n   */\n  protected _afterPatch(): Promise<boolean>{\n    return new Promise( ( resolve ) => {\n      const patch = <FieldItemPatchInterface>this.config.patch;\n      const control = <FormControl>this.config.control;\n\n      control.enable();\n      patch.running = false;\n\n      return resolve( true );\n    } );\n  }\n\n\n  /**\n   * Prepare to make an api call to the server\n   * @param value\n   * @param force\n   */\n  protected _onPatch( value?: string | number | boolean | null | Object, force = false ){\n    const patch = <FieldItemPatchInterface>this.config.patch;\n    if( !force ){\n      if( !this.config.control.valid ) return false;\n      if( value === this.asset.storedValue ) return false;\n      if( patch.trigger === 'manual' ) return false;\n    }\n    this._beforePatch().then( () => {\n      if( this.config.facade && !force ){\n        this.dom.setTimeout( 'api-facade', () => {\n          this._onPatchSuccess( <Entity>{} ).then( () => this._afterPatch() );\n        }, ( this.config.patch.duration || 0 ) );\n      }else{\n        this.log.info( `onPatch` );\n        this._doPatch( this._getPatchBody( value ) );\n      }\n    } );\n  }\n\n\n  /**\n   * This fx will make the actual api call to the server\n   * @param body\n   * @private\n   */\n  protected _doPatch( body: Entity ){\n    const method = this.config.patch.method ? this.config.patch.method : 'PATCH';\n    const patch = <FieldItemPatchInterface>this.config.patch;\n    const ignore401 = ( patch.ignore401 ? true : null );\n    const version = ( patch.version ? patch.version : 1 );\n    if( IsString( this.config.patch.path, true ) ){\n      const request = method === 'PATCH' ? PopRequest.doPatch( this.config.patch.path, body, version, ignore401, this.config.patch.businessId ) : PopRequest.doPost( this.config.patch.path, body, version, ignore401, this.config.patch.businessId );\n      this.dom.setSubscriber( 'api-patch', request.subscribe(\n        res => {\n          this._onPatchSuccess( res ).then( () => this._afterPatch() );\n        },\n        err => {\n          this._onPatchFail( err ).then( () => this._afterPatch() );\n        }\n      ) );\n    }else{\n      this._onPatchSuccess( body ).then( () => this._afterPatch() );\n    }\n  }\n\n\n  /**\n   * Determine if a change is valid\n   */\n  protected _isChangeValid(){\n    const control = <FormControl>this.config.control;\n    if( control.invalid ){\n      if( this.config.displayErrors ) this._setMessage( ValidationErrorMessages( control.errors ) );\n      return false;\n    }\n    return this._checkPrevent();\n  }\n\n\n  /**\n   * Determine if a field should be patched\n   */\n  protected _isFieldPatchable(){\n    if( this.config.facade ){\n      return true;\n    }else if( this.config.patch && this.config.patch.path ){\n      return true;\n    }\n    return false;\n  }\n\n\n  /**\n   * Helper to determine if an event is related to a field update\n   * @param event\n   */\n  protected _isFieldChange( event: PopBaseEventInterface ){\n    return event.type === 'field' && ( event.name === 'onChange' || event.name === 'patch' );\n  }\n\n\n  /**\n   * Transformations can be applied to a value before it is sent to the api server\n   * @param value\n   */\n  protected _applyTransformation( value: any ){\n    if( IsString( this.config.transformation, true ) ){\n      value = PopTransform( value, this.config.transformation );\n      if( value !== this.config.control.value ) this.config.control.setValue( value );\n    }\n    return value;\n  }\n\n\n  /**\n   * Handle an api call success\n   * @param res\n   */\n  protected _onPatchSuccess( res: Entity ): Promise<boolean>{\n    return new Promise( ( resolve ) => {\n      this.log.info( `onPatchSuccess` );\n      const patch = <FieldItemPatchInterface>this.config.patch;\n      const control = <FormControl>this.config.control;\n      this.asset.storedValue = control.value;\n      patch.success = true;\n      patch.running = false;\n\n\n      const event = this.onBubbleEvent( `patch`, 'Patched.', {\n        success: true,\n        response: res.data ? res.data : res\n      }, true );\n\n\n      if( IsObject( this.core, [ 'channel' ] ) ){\n        if( this.config.session ){\n          if( SessionEntityFieldUpdate( this.core, event, this.config.sessionPath ) ){\n            if( !event.channel ){\n              event.channel = true;\n              this.core.channel.emit( event );\n            }\n            this.core.repo.clearCache( 'table', 'data' );\n          }else{\n            this.log.error( `SessionEntityFieldUpdate:${event.config.name}`, `Session failed` );\n          }\n\n        }\n        ServiceInjector.get( PopEntityEventService ).sendEvent( event );\n      }\n\n      if( typeof patch.callback === 'function' ){ // allows developer to attach a callback when this field is updated\n        patch.callback( this.core, event );\n\n        this._onPatchSuccessAdditional();\n      }\n      this.dom.setTimeout( 'patch-success', () => {\n        patch.success = false;\n      }, ( this.config.patch.duration || 0 ) );\n      return resolve( true );\n    } );\n  }\n\n\n  protected _onPatchSuccessAdditional(): boolean{\n    return true;\n  }\n\n\n  /**\n   * Handle an http failure\n   * @param err\n   */\n  protected _onPatchFail( err: HttpErrorResponse ): Promise<boolean>{\n    return new Promise( ( resolve ) => {\n      this.log.info( `onPatchFail` );\n      const patch = <FieldItemPatchInterface>this.config.patch;\n      const control = <FormControl>this.config.control;\n      patch.running = false;\n      control.markAsDirty();\n      control.setValue( this.asset.storedValue );\n      control.setErrors( { server: true } );\n      this.config.message = GetHttpErrorMsg(err);\n      this.onBubbleEvent( `patch`, this.config.message, {\n        success: false,\n        response: err\n      }, true );\n\n      this._onPatchFailAdditional();\n\n      return resolve( true );\n    } );\n  }\n\n\n  protected _onPatchFailAdditional(): boolean{\n    return true;\n  }\n\n\n  /**\n   * Set up the body of the api patch\n   * @param value\n   * @private\n   */\n  protected _getPatchBody( value?: number | string | boolean | null | Object ): Entity{\n    let body = <Entity>{};\n    const patch = <FieldItemPatchInterface>this.config.patch;\n\n    value = typeof value !== 'undefined' ? value : this.config.control.value;\n\n    if( IsObject( value ) ){\n      const val = <{}>value;\n      body = <Entity>{ ...body, ...val };\n    }else if( IsArray( value ) ){\n      body[ this.config.patch.field ] = value;\n    }else{\n      body[ this.config.patch.field ] = value;\n      if( this.config.empty && !body[ this.config.patch.field ] ){\n        body[ this.config.patch.field ] = PopTransform( String( value ), this.config.empty );\n      }\n    }\n    if( this.config.patch.json ) body[ this.config.patch.field ] = JSON.stringify( body[ this.config.patch.field ] );\n\n    if( patch && patch.metadata ){\n      for( const i in patch.metadata ){\n        if( !patch.metadata.hasOwnProperty( i ) ) continue;\n        body[ i ] = patch.metadata[ i ];\n      }\n    }\n    return body;\n  }\n\n\n  /**\n   * Helper to set error message\n   * @param message\n   */\n  protected _setMessage( message: string ): void{\n    this.config.message = message;\n  }\n\n\n  /**\n   * Helper to clear error message\n   */\n  protected _clearMessage(): void{\n    this.config.message = '';\n  }\n\n\n  protected _checkPrevent(){\n    if( IsArray( this.config.prevent, true ) ){\n      const control = <FormControl>this.config.control;\n      const value = control.value;\n      const conflicts = this.config.prevent.filter( ( str ) => str.toLowerCase() === String( value ).toLowerCase() );\n      if( conflicts.length ){\n        control.setErrors( { unique: true } );\n        this._setMessage( ValidationErrorMessages( control.errors ) );\n        return false;\n      }else{\n        this._clearMessage();\n        return true;\n      }\n    }\n    return true;\n  }\n\n}\n","import { animate, group, state, style, transition, trigger } from '@angular/animations';\n\nexport const slideInOut = trigger('slideInOut', [\n  state('in', style({ height: '*', opacity: 0 })),\n  transition(':leave', [\n    style({ height: '*', opacity: 1 }),\n\n    group([\n      animate(300, style({ height: 0 })),\n      animate('200ms ease-in-out', style({ 'opacity': '0' }))\n    ])\n\n  ]),\n  transition(':enter', [\n    style({ height: '0', opacity: 0 }),\n\n    group([\n      animate(300, style({ height: '*' })),\n      animate('400ms ease-in-out', style({ 'opacity': '1' }))\n    ])\n\n  ])\n]);\n\n\nexport const fadeInOut = trigger('fadeInOut', [\n\n  // the \"in\" style determines the \"resting\" state of the element when it is visible.\n  state('in', style({ opacity: 1 })),\n\n  // fade in when created. this could also be written as transition('void => *')\n  transition(':enter', [\n    style({ opacity: 0 }),\n    animate(600)\n  ]),\n\n  // fade out when destroyed. this could also be written as transition('void => *')\n  transition(':leave',\n    animate(600, style({ opacity: 0 })))\n]);\n","import { Component, Input, OnInit, ChangeDetectorRef, OnDestroy, ElementRef, ViewChild } from '@angular/core';\nimport { InputConfig } from './input-config.model';\nimport { PatternValidation, ValidationErrorMessages } from '../../../../services/pop-validators';\nimport { PopFieldItemComponent } from '../pop-field-item.component';\nimport { slideInOut } from '../../../../pop-common-animations.model';\nimport { IsArray, IsCallableFunction } from '../../../../pop-common-utility';\n\n\n@Component( {\n  selector: 'lib-pop-input',\n  templateUrl: './pop-input.component.html',\n  styleUrls: [ './pop-input.component.scss' ],\n  animations: [\n    slideInOut\n  ]\n} )\nexport class PopInputComponent extends PopFieldItemComponent implements OnInit, OnDestroy {\n  @Input() config: InputConfig = new InputConfig();\n  @ViewChild('inputField', {static: true}) inputField:any;\n  public name = 'PopInputComponent';\n\n\n  constructor(\n    public el: ElementRef,\n    // protected cdr: ChangeDetectorRef,\n  ){\n    super();\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n        if(this.config.autofocus) {\n         this.inputField.nativeElement.focus();\n        } else if (this.config.autoselect) {\n          this.inputField.nativeElement.focus();\n           this.inputField.nativeElement.select();\n        } \n       \n        this.config.triggerOnChange = ( value: string | number | null, forcePatch = false ) => {\n          this.dom.setTimeout( `config-trigger-change`, () => {\n            // this.cdr.detectChanges();\n            this.onChange( value, forcePatch );\n          }, 0 );\n\n        };\n\n        this.config.triggerDirectPatch = ( value: string | number | null ) => {\n          this.dom.setTimeout( `config-trigger-patch`, () => {\n            this._onPatch( value, true );\n          }, 0 );\n        };\n\n        this.config.clearMessage = () => {\n\n          this.dom.setTimeout( `config-clear-message`, () => {\n            this.config.message = '';\n            this.config.control.markAsPristine();\n            this.config.control.markAsUntouched();\n            // this.cdr.detectChanges();\n          }, 0 );\n        };\n\n        this.config.setType = ( type: 'text' | 'password' ) => {\n          this.dom.setTimeout( `config-set-type`, () => {\n            this.config.type = type;\n            // this.cdr.detectChanges();\n          }, 0 );\n        };\n\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  onKeyUp( event ): void{\n    if( event.code === 'Enter' ){\n      if( this.config.control.invalid ){\n        if( this.config.displayErrors ) this._setMessage( ValidationErrorMessages( this.config.control.errors ) );\n      }else{\n        this._clearMessage();\n        if( this.config.patch && ( this.config.patch.path || this.config.facade ) ){\n          if( this.config.control.value !== this.asset.storedValue ){\n            if( this._isFieldPatchable() ){\n              this.onChange();\n            }\n          }\n        }\n        if( this.config.tabOnEnter ){\n          this.dom.focusNextInput( this.el );\n\n        }else{\n          this.onBubbleEvent( 'onEnter' );\n        }\n\n        if( IsCallableFunction( this.config.onEnter ) ){\n          this.dom.setTimeout( `on-enter`, async() => {\n            await this.config.onEnter( this.core, event );\n          }, 250 );\n        }\n      }\n    }else if( !this.config.mask && this.config.pattern && this.config.pattern.length ){\n      const val = PatternValidation( this.config.pattern, 'value', this.config.control.value );\n      if( val !== this.config.control.value ) this.config.control.setValue( val );\n      if( this.config.control.touched && this._isChangeValid() ){\n        this._clearMessage();\n      }else if( IsArray( this.config.prevent, true ) ){\n        this._isChangeValid();\n      }\n\n      this.onBubbleEvent( 'onKeyUp' );\n    }else{\n      if( this.config.control.touched && this._isChangeValid() ){\n        this._clearMessage();\n      }else if( IsArray( this.config.prevent, true ) ){\n        this._isChangeValid();\n      }\n      this.onBubbleEvent( 'onKeyUp' );\n    }\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n}\n","import {Component, ElementRef, Input, OnDestroy, OnInit} from '@angular/core';\nimport {SelectConfig} from './select-config.model';\nimport {PopFieldItemComponent} from '../pop-field-item.component';\nimport {InputConfig} from '../pop-input/input-config.model';\nimport {IsCallableFunction, IsObject, IsObjectThrowError} from '../../../../pop-common-utility';\n\n\n@Component({\n  selector: 'lib-pop-select',\n  templateUrl: './pop-select.component.html',\n  styleUrls: ['./pop-select.component.scss']\n})\nexport class PopSelectComponent extends PopFieldItemComponent implements OnInit, OnDestroy {\n  @Input() config: SelectConfig = new SelectConfig();\n  name = 'PopSelectComponent';\n\n  optionsTopPos = '-5px';\n\n  ui = {selected: {config: undefined}};\n\n\n  constructor(\n    public el: ElementRef,\n  ) {\n    super();\n\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise(async (resolve) => {\n\n        await Promise.all([\n          this._setInitialConfig(),\n          this._setConfigHooks(),\n          this._initialFauxControl()\n        ]);\n\n        resolve(true);\n      });\n    };\n\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        this.dom.setTimeout('check-existing-value', () => {\n          if (!this.config.control.value && this.config.autoFill && this.config.required) {\n            if (this.config.options.values.length === 1) {\n              if (IsCallableFunction(this.config.triggerOnChange)) {\n                const existingValue = this.config.options.values[0].value;\n                this.config.triggerOnChange(existingValue);\n              }\n            }\n          }\n        }, 0);\n        resolve(true);\n      });\n    };\n\n  }\n\n\n  ngOnInit() {\n    super.ngOnInit();\n  }\n\n\n  /**\n   * SelectsOption\n   * @param optionValue: option value selected\n   */\n\n  onOptionSelected(optionValue: string | number): void {\n    this.config.control.setValue(optionValue);\n    this.dom.state.displayItems = false;\n    this.ui.selected.config.label = this.config.label;\n    this.onBlur();\n  }\n\n\n  /**\n   *  Select Box clicked\n   *  @returns void\n   */\n  onSelectionClick($event): void {\n    if (!this.config.readonly && this.config.control.status !== 'DISABLED') {\n\n      // determine display direction and top offset\n      const thirdHeight = window.innerHeight / 3;\n\n      if ($event.clientY < (thirdHeight * 2)) {\n        this.dom.state.displayBottom = true;\n        this.optionsTopPos = '-5px';\n        this.ui.selected.config.selectModeOptionsDirection = 'down';\n      } else {\n        this.dom.state.displayBottom = false;\n        let offset = (44 + (this.config.options.values.length * 48));\n\n        offset = offset > 284 ? 284 : offset;\n\n        this.optionsTopPos = `-${offset}px`;\n        this.ui.selected.config.label = ' ';\n        this.ui.selected.config.selectModeOptionsDirection = 'up';\n      }\n\n      if (this.dom.state.displayItems) {\n        this.dom.state.displayItems = false;\n        this.ui.selected.config.label = this.config.label;\n        this.onBlur();\n      } else {\n        this.dom.state.displayItems = true;\n        this.onFocus();\n      }\n    }\n  }\n\n\n  /**\n   * Closes the dropdown if it is active.\n   * This method is called from the ClickOutside directive.\n   * If the user clicks outside of the component, it will close\n   * @returns void\n   */\n  public onOutsideCLick(): void {\n    this.dom.state.displayItems = false;\n    this.ui.selected.config.label = this.config.label;\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy() {\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  /**\n   * Set the initial config for this component\n   * @private\n   */\n  private _setInitialConfig(): Promise<boolean> {\n    return new Promise<boolean>((resolve) => {\n      this.dom.state.displayItems = false;\n      this.dom.state.displayBottom = true;\n      this.config = IsObjectThrowError(this.config, true, `Config required`) ? this.config : null;\n      this.id = this.config.name;\n      return resolve(true);\n    });\n  }\n\n  /**\n   * Set the config hooks for this component\n   * @private\n   */\n  private _setConfigHooks(): Promise<boolean> {\n    return new Promise<boolean>((resolve) => {\n      this.config.triggerOnChange = (value: string | number | null) => {\n\n        this.dom.setTimeout(`config-trigger-change`, () => {\n          // this.cdr.detectChanges();\n          this._setStrVal(value);\n          this.onChange(value, true);\n        }, 0);\n      };\n\n      this.config.clearMessage = () => {\n        this.dom.setTimeout(`config-clear-message`, () => {\n          this.config.message = '';\n          this.config.control.markAsPristine();\n          this.config.control.markAsUntouched();\n          // this.cdr.detectChanges();\n        }, 0);\n      };\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * Initialize Faux control ( used to display string value of select ). Subscribes to actual control value changes to update value.\n   */\n\n  private _initialFauxControl(): Promise<boolean> {\n    return new Promise<boolean>((resolve) => {\n      this.ui.selected.config = new InputConfig({\n        value: '',\n        disabled: this.config.disabled ? this.config.disabled : null,\n        helpText: this.config.helpText,\n        displayErrors: false,\n        label: this.config.label,\n        readonly: true,\n        selectMode: true,\n        minimal: this.config.minimal,\n        maxlength: 65000\n      });\n\n      this._setStrVal((<any>this.config.value));\n\n\n      this.dom.setSubscriber(`value-changes`, this.config.control.valueChanges.subscribe((value) => {\n        this._setStrVal((<any>value));\n      }));\n\n      this.dom.setSubscriber(`status-changes`, this.config.control.statusChanges.subscribe((status) => {\n        this.ui.selected.config.control.status = status;\n      }));\n\n      return resolve(true);\n    });\n  }\n\n\n  private _setStrVal(value: number | string): void {\n    if (value || value == '') { // code change by chetu developer on 16-05-2021\n      const selected = this.config.options.values.find((o) => o.value === value);\n      if (IsObject(selected, ['name'])) {\n        this.ui.selected.config.control.setValue(selected.name);\n      } else {\n        this.ui.selected.config.control.setValue('');\n      }\n    } else {\n      this.ui.selected.config.control.setValue(null);\n    }\n  }\n}\n","import { ChangeDetectorRef, Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { SelectMultiConfig } from './select-mulit-config.model';\nimport { PopFieldItemComponent } from '../pop-field-item.component';\n\n\n@Component( {\n  selector: 'lib-pop-select-multi',\n  templateUrl: './pop-select-multi.component.html',\n  styleUrls: [ './pop-select-multi.component.scss' ]\n} )\n\nexport class PopSelectMultiComponent extends PopFieldItemComponent implements OnInit, OnDestroy {\n  @Input() config: SelectMultiConfig;\n  public name = 'PopSelectMultiComponent';\n\n\n  constructor(\n    public el: ElementRef,\n  ){\n    super();\n\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n\n        this.config.triggerOnChange = ( value: string | number | null ) => {\n          // this.cdr.detectChanges();\n          this.dom.setTimeout( `config-trigger-change`, () => {\n            this.onChange( value, true );\n          }, 0 );\n        };\n\n        this.config.clearMessage = () => {\n          this.dom.setTimeout( `config-clear-message`, () => {\n            this.config.message = '';\n            this.config.message = '';\n            this.config.control.markAsPristine();\n            this.config.control.markAsUntouched();\n            // this.cdr.detectChanges();\n          }, 0 );\n        };\n\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * On Blur Event\n   */\n  onBlur(){\n    this.onBubbleEvent( 'onBlur' );\n  }\n\n\n  onClose( open: boolean ){\n    if( !open ){\n      this.onChange();\n    }\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n}\n","import {\n  AfterViewInit, ChangeDetectorRef,\n  Component,\n  ElementRef,\n  Input, OnDestroy,\n  OnInit,\n  Renderer2,\n} from '@angular/core';\nimport { CheckboxConfig } from './checkbox-config.model';\nimport { PopFieldItemComponent } from '../pop-field-item.component';\nimport { FormControl } from '@angular/forms';\nimport { FieldItemPatchInterface } from '../../../../pop-common.model';\n\n\n@Component( {\n  selector: 'lib-pop-checkbox',\n  templateUrl: './pop-checkbox.component.html',\n  styleUrls: [ './pop-checkbox.component.scss' ],\n} )\nexport class PopCheckboxComponent extends PopFieldItemComponent implements OnInit, AfterViewInit, OnDestroy {\n  @Input() config: CheckboxConfig;\n  public name = 'PopCheckboxComponent';\n\n\n  constructor(\n    public el: ElementRef,\n    private renderer: Renderer2,\n    protected cdr: ChangeDetectorRef\n  ){\n    super();\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n        this.dom.state.indeterminate = false;\n        this.asset.storedValue = +this.config.control.value === 1 ? true : false;\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * This will position the feedback container in the right spot\n   */\n  ngAfterViewInit(){\n    this.asset.checkBoxBackground = this.el.nativeElement.querySelector( '.mat-checkbox-background' );\n    this.asset.checkBoxFrame = this.el.nativeElement.querySelector( '.mat-checkbox-frame' );\n\n    this.cdr.detectChanges();\n  }\n\n\n  onEnter( event ){\n    if( this.config.tabOnEnter ){\n      this.dom.focusNextInput( this.el );\n    }\n  }\n\n\n  _beforePatch(): Promise<boolean>{\n    return new Promise( ( resolve ) => {\n      const patch = <FieldItemPatchInterface>this.config.patch;\n      const control = <FormControl>this.config.control;\n\n      control.disable();\n      patch.running = true;\n      this._onHideCheckbox();\n\n      this._clearMessage();\n\n      return resolve( true );\n    } );\n  }\n\n\n  _afterPatch(): Promise<boolean>{\n    return new Promise( ( resolve ) => {\n      const patch = <FieldItemPatchInterface>this.config.patch;\n      const control = <FormControl>this.config.control;\n\n      control.enable();\n      control.markAsPristine();\n      patch.running = false;\n\n      return resolve( true );\n    } );\n  }\n\n\n  protected _onPatchSuccessAdditional(): boolean{\n    this._displayCheckbox();\n    return true;\n  }\n\n\n  protected _onPatchFailAdditional(): boolean{\n    this._displayCheckbox();\n    return true;\n  }\n\n\n  /**\n   * This will trigger when the user click the checkbox to subject its value\n   * This updates the config value since that is auto-handled with this input type\n   */\n  onToggleValue(){\n    const value = !this.asset.storedValue;\n    this.config.control.setValue( value, { emitEvent: true } );\n    this.onChange( value );\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  /**\n   * This will make the checkbox hidden in the view\n   */\n  private _onHideCheckbox(){\n    this.renderer.setStyle( this.asset.checkBoxFrame, 'border-color', '' );\n    this.renderer.setStyle( this.asset.checkBoxBackground, 'background-color', '' );\n    this.renderer.setStyle( this.asset.checkBoxBackground, 'border', '' );\n    this.renderer.setStyle( this.asset.checkBoxBackground, 'display', 'none' );\n  }\n\n\n  /**\n   * This will make the checkbox visible in the view\n   */\n  private _displayCheckbox(){\n    this.renderer.setStyle( this.asset.checkBoxBackground, 'display', 'block' );\n  }\n\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit, Renderer2 } from '@angular/core';\nimport { MatRadioChange } from '@angular/material/radio';\nimport { RadioConfig } from './radio-config.model';\nimport { PopFieldItemComponent } from '../pop-field-item.component';\n\n\n@Component({\n  selector: 'lib-pop-radio',\n  templateUrl: './pop-radio.component.html',\n  styleUrls: [ './pop-radio.component.scss' ],\n})\nexport class PopRadioComponent extends PopFieldItemComponent implements OnInit, OnDestroy {\n  @Input() config: RadioConfig;\n  public name = 'PopRadioComponent';\n\n\n  constructor(\n    public el: ElementRef,\n  ){\n    super();\n\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        this.asset.storedValue = this.config.control.value;\n        this.asset.spinnerRef = this.el.nativeElement.querySelector('.radio-ajax-spinner'); // would use a @viewChild but it returns a component model instead of an element.. weird\n\n        this.config.triggerOnChange = ( value: string | number | null ) => {\n          this.dom.setTimeout( `config-trigger-change`, () => {\n            this.onChange( value, true );\n          }, 0 );\n        };\n\n        this.config.clearMessage = () => {\n          this.dom.setTimeout( `config-clear-message`, () => {\n            this.config.message = '';\n            this.config.control.markAsPristine();\n            this.config.control.markAsUntouched();\n            // this.cdr.detectChanges();\n          }, 0 );\n        };\n\n        resolve(true);\n      });\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n  \n\n  onSelection(change: MatRadioChange){\n    this.asset.change = change;\n    this.onChange();\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n}\n","import { Component, ElementRef, EventEmitter, Input, OnDestroy, OnInit, Output, ViewChild } from '@angular/core';\nimport { MatSlideToggle } from '@angular/material/slide-toggle';\nimport { SwitchConfig } from './switch-config.model';\nimport { FieldItemPatchInterface, PopBaseEventInterface } from '../../../../pop-common.model';\nimport { PopFieldItemComponent } from '../pop-field-item.component';\nimport { FormControl } from '@angular/forms';\n\n\n@Component( {\n  selector: 'lib-pop-switch',\n  templateUrl: './pop-switch.component.html',\n  styleUrls: [ './pop-switch.component.scss' ],\n} )\nexport class PopSwitchComponent extends PopFieldItemComponent implements OnInit, OnDestroy {\n  @ViewChild( 'switch', { static: true } ) private switchRef: MatSlideToggle;\n  @ViewChild( 'feedback', { static: true } ) private feedbackRef: ElementRef;\n  @Input() config: SwitchConfig;\n  @Output() events: EventEmitter<PopBaseEventInterface> = new EventEmitter<PopBaseEventInterface>();\n  public name = 'PopSwitchComponent';\n\n\n  constructor(\n    public el: ElementRef,\n  ){\n    super();\n\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n\n        this.switchRef.checked = !!this.config.control.value;\n        this.config.switchRef = this.switchRef;\n        this.asset.storedValue = this.config.control.value;\n        this.config.triggerOnChange = ( value: boolean ) => {\n          this.dom.setTimeout( `trigger-change`, () => {\n            this.onSelection( { checked: value } );\n          }, 0 );\n        };\n\n        this.config.setValue = ( value: boolean ) => {\n          this.dom.setTimeout( `set-value`, () => {\n            this.asset.change = value;\n            this.config.control.setValue( value, { emitEvent: false } );\n            this.config.control.updateValueAndValidity();\n            this.config.control.markAsPristine();\n            this.switchRef.checked = value;\n          }, 0 );\n        };\n\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  onEnter( event ){\n    if( this.config.tabOnEnter ){\n      this.dom.focusNextInput( this.el );\n    }\n  }\n\n\n  onSelection( change: { checked: boolean } ){\n    this.asset.change = change;\n    this.onChange( change.checked );\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                    Base Class Overrides                                      *\n   *                                    ( Protected Method )                                      *\n   *               These are protected instead of private so that they can be overridden          *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  protected _beforePatch(): Promise<boolean>{\n    return new Promise( ( resolve ) => {\n      const patch = <FieldItemPatchInterface>this.config.patch;\n      const control = <FormControl>this.config.control;\n\n      control.disable();\n      patch.running = true;\n\n      return resolve( true );\n    } );\n  }\n\n\n  /**\n   * Called after a successful patch\n   */\n  protected _afterPatch(): Promise<boolean>{\n    return new Promise( ( resolve ) => {\n      const patch = <FieldItemPatchInterface>this.config.patch;\n      const control = <FormControl>this.config.control;\n\n      control.enable();\n      patch.running = false;\n\n      this.switchRef.checked = this.asset.storedValue;\n\n      return resolve( true );\n    } );\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n}\n","import {\n  Component,\n  ElementRef,\n  Input,\n  OnDestroy,\n  OnInit,\n  Renderer2,\n  ViewChild\n} from '@angular/core';\n\nimport { TextareaConfig } from './textarea-config.model';\nimport { PopFieldItemComponent } from '../pop-field-item.component';\nimport { Sleep } from '../../../../pop-common-utility';\n\n\n@Component({\n  selector: 'lib-pop-textarea',\n  templateUrl: './pop-textarea.component.html',\n  styleUrls: [ './pop-textarea.component.scss' ]\n})\nexport class PopTextareaComponent extends PopFieldItemComponent implements OnInit, OnDestroy {\n  @ViewChild('textArea', { static: true }) private textAreaRef: ElementRef;\n  @Input() config: TextareaConfig;\n  public name = 'PopTextareaComponent';\n\n\n  constructor(\n    public el: ElementRef,\n    private renderer: Renderer2,\n  ){\n    super();\n\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        if( this.config.autoSize ){\n          this.dom.setSubscriber('auto-size', this.config.control.valueChanges.subscribe(() => {\n            this.onAutoSize();\n          }));\n        } else{\n          if(+this.config.height){\n            this.renderer.setStyle(this.textAreaRef.nativeElement, 'height', this.config.height + 'px');\n          }\n        }\n        resolve(true);\n      });\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise(async(resolve) => {\n        if( this.config.autoSize && this.config.control.value){\n          await Sleep(5);\n          this.onAutoSize();\n        }\n        resolve(true);\n      });\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * Trigger on key up event\n   */\n  onKeyUp(): void{\n    this.onBubbleEvent(`onKeyUp`);\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  protected onAutoSize(){\n    this.dom.setTimeout('size-delay', () => {\n      this.renderer.setStyle(this.textAreaRef.nativeElement, 'height', '0');\n      let height = this.textAreaRef.nativeElement.scrollHeight;\n      if(+this.config.height && height < this.config.height) height = this.config.height;\n      if(+this.config.maxHeight && height > this.config.maxHeight) height = this.config.maxHeight;\n      this.renderer.setStyle(this.textAreaRef.nativeElement, 'height', height +'px');\n    }, 250);\n  }\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { LabelConfig } from './label-config.model';\nimport { TruncatePipe } from '../../../../pipes/truncate.pipe';\nimport { ButtonConfig } from '../pop-button/button-config.model';\nimport { Router } from '@angular/router';\nimport { PopFieldItemComponent } from '../pop-field-item.component';\nimport { GetVerbStateTheme, IsObjectThrowError, StringReplaceAll } from '../../../../pop-common-utility';\nimport { PopHref, ServiceInjector } from '../../../../pop-common.model';\n\n\n@Component({\n  selector: 'lib-pop-label',\n  templateUrl: './pop-label.component.html',\n  styleUrls: [ './pop-label.component.scss' ],\n})\nexport class PopLabelComponent extends PopFieldItemComponent implements OnInit, OnDestroy {\n  @Input() config: LabelConfig;\n  public name = 'PopLabelComponent';\n\n\n  constructor(\n    public el: ElementRef,\n  ){\n    super();\n\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        this.config = IsObjectThrowError(this.config, true, `${this.name}:configure: - this.config`) ? this.config : null;\n\n        this.ui.copyLabel = <ButtonConfig>undefined;\n        this.ui.copyValue = <ButtonConfig>undefined;\n        this.ui.valueButton = <ButtonConfig>undefined;\n        this.dom.state.valueButton_theme = 'default';\n\n        if( this.config.truncate ){\n          const truncatePipe = new TruncatePipe();\n          this.config.value = truncatePipe.transform(this.config.value, [ this.config.truncate ]);\n        }\n        if( this.config.copyLabel ) this.ui.copyLabel = new ButtonConfig({\n          // disabled: !this.config.copyLabelBody ? true : false,\n          disabled: false,\n          icon: this.config.copyLabelBody ? 'file_copy' : null,\n          value: this.config.copyLabelDisplay,\n          size: 25,\n          width: 100,\n          radius: 5,\n          text: 12,\n        });\n        if( this.config.copyValue ) this.ui.copyValue = new ButtonConfig({\n          // disabled: !this.config.copyValueBody ? true : false,\n          disabled: false,\n          icon: this.config.copyValueBody ? 'file_copy' : null,\n          value: this.config.copyValueDisplay,\n          size: 25,\n          radius: 5,\n          text: 12,\n        });\n\n        if( this.config.valueButton ) this.ui.valueButton = new ButtonConfig({\n          disabled: this.config.valueButtonDisabled ? true : false,\n          icon: this.config.icon,\n          value: this.config.valueButtonDisplay,\n          size: 25,\n          radius: 5,\n          text: 12,\n          bubble: true,\n          event: 'click'\n        });\n        this._setValueButtonTheme();\n\n        resolve(true);\n      });\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * The user can click on a link to route to another part of the app\n   */\n  onRouteLink(){\n    if( this.config.route ){\n      const routeApp = String(this.config.route).split('/');\n      if( routeApp[ 1 ] && routeApp[ 1 ] === PopHref ){\n        return ServiceInjector.get(Router).navigate([ routeApp.slice(2).join('/') ]).catch((e) => {\n          console.log(e);\n          return false;\n        });\n      }\n    }\n    return this.onBubbleEvent('link');\n  }\n\n\n  /**\n   * The user can click on a label button to copy a value into the clipboard\n   */\n  onLabelCopy(){\n    const nav = <any>navigator;\n    const strip = [ 'ID ' ];\n    let body = String(this.config.copyLabelBody).slice();\n    strip.map((tag) => {\n      if( body.includes(tag) ) body = StringReplaceAll(body, tag, '');\n    });\n    nav.clipboard.writeText(body);\n  }\n\n\n  /**\n   * The user can click on a button value and copy a value to the clipboard\n   */\n  onValueCopy(){\n    const nav = <any>navigator;\n    const strip = [ 'ID ' ];\n    let body = String(this.config.copyValueBody).slice();\n    strip.map((tag) => {\n      if( body.includes(tag) ) body = StringReplaceAll(body, tag, '');\n    });\n    nav.clipboard.writeText(body);\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  /**\n   * This fx basically checks the label value to sees if it can be associated with a color scheme aka warning, success, error\n   */\n  protected _setValueButtonTheme(){\n    if( this.config.valueButton ){\n      if( this.config.valueButtonDisplay ){\n        this.dom.state.valueButton_theme = GetVerbStateTheme(this.config.valueButtonDisplay);\n      }\n    }\n  }\n\n}\n","import { Component, OnInit, Input, Output, EventEmitter, ViewChild, ElementRef, ChangeDetectorRef, OnDestroy, HostListener } from '@angular/core';\nimport { SelectFilterConfig, SelectFilterGroupInterface } from './select-filter-config.model';\nimport { MatSelectionList, MatListOption } from '@angular/material/list';\nimport { Observable } from 'rxjs';\nimport { InputConfig } from '../pop-input/input-config.model';\nimport { SelectionModel } from '@angular/cdk/collections';\nimport { debounceTime } from 'rxjs/operators';\nimport { ValidationErrorMessages } from '../../../../services/pop-validators';\nimport { FieldItemOption } from '../../../../pop-common.model';\nimport { PopFieldItemComponent } from '../pop-field-item.component';\nimport { IsObject, IsObjectThrowError, JsonCopy, ObjectContainsTagSearch } from '../../../../pop-common-utility';\n\n\n@Component( {\n  selector: 'lib-pop-select-filter',\n  templateUrl: './pop-select-filter.component.html',\n  styleUrls: [ './pop-select-filter.component.scss' ]\n} )\nexport class PopSelectFilterComponent extends PopFieldItemComponent implements OnInit, OnDestroy {\n  @Input() config: SelectFilterConfig; // configuration for component\n  @ViewChild( 'list', { static: true } ) listRef: ElementRef; // Getting a reference to the selection list in the view so that I can know which options are selected\n  @ViewChild( 'selectionList', { static: true } ) selectionListRef: MatSelectionList; // Getting a reference to the selection list in the view so that I can know which options are selected\n  @ViewChild( 'search' ) searchRef: ElementRef;\n  name = 'PopSelectFilterComponent';\n\n\n\n  protected asset = {\n    filteredOptions: <Observable<FieldItemOption[]>>undefined,\n    groups: [],\n    onFocusValue: undefined\n  };\n\n  public ui = {\n    selected: {\n      config: undefined,\n      count: 0\n    },\n    search: {\n      config: undefined,\n      count: 0\n    }\n  };\n\n  @HostListener('document:keydown.escape', ['$event']) onEscapeHandler(event: KeyboardEvent) {\n    if(this.dom.state.filterActivated){\n      console.log('esc',event);\n      this._closeOptionList();\n    }\n  }\n\n\n\n  constructor(\n    public el: ElementRef,\n    protected cdr: ChangeDetectorRef\n  ){\n    super();\n\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n\n        this.config = IsObjectThrowError( this.config, true, `${this.name}:configure: - this.config` ) ? this.config : null;\n        this._setInitialDomState();\n        this._filterOptionsList( '' );\n        this._setUpFilterObservable();\n\n        return resolve( true );\n      } );\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n\n\n        return resolve( true );\n      } );\n    };\n\n\n\n  }\n\n\n\n  ngOnInit(): void{\n    super.ngOnInit();\n  }\n\n\n  /**\n   * Set the inital dom state of the component\n   * @private\n   */\n  private _setInitialDomState(){\n    this.dom.state.filter = <boolean> undefined;\n    this.dom.state.filterActivated = false;\n    this.dom.state.above = <number> undefined;\n    this.dom.state.below = <number> undefined;\n    this.dom.state.list = <any> undefined;\n    this.dom.state.position = <'below' | 'above'>'below';\n    this.dom.state.active = undefined;\n    this.dom.state.checkboxPosition = this.config.checkboxPosition === 'before' ? 'before' : 'after';\n\n    if( !this.config.multiple ){\n      this.selectionListRef.selectedOptions = new SelectionModel<MatListOption>( false );\n    }\n\n    this.ui.selected.config = new InputConfig( {\n      value: this.config.strVal,\n      helpText: this.config.helpText,\n      displayErrors: false,\n      label: this.config.label,\n      readonly: true,\n      selectMode: true,\n      maxlength: 65000\n    } );\n\n    this.ui.search.config = new InputConfig( {\n      value: this.config.strVal,\n      helpText: this.config.helpText,\n      displayErrors: false,\n      label: this.config.label,\n      readonly: true,\n      maxlength: 255\n    } );\n\n    if( !this.config.multiple && +this.config.value ){\n      const activeOption = IsObject(this.config.options, ['values']) ?  this.config.options.values.find( ( option ) => +option.value === +this.config.value ) : null;\n      if( IsObject( activeOption, [ 'value', 'name' ] ) ){\n        this.config.selectedOptions = [ +activeOption.value ];\n        this.asset.onFocusValue = JSON.stringify( this.config.selectedOptions );\n        this.dom.active.optionId = +activeOption.value;\n        this.ui.selected.config.control.setValue( activeOption.name, { emitEvent: false } );\n      }\n    }else{\n      this.asset.onFocusValue = JSON.stringify( this.config.selectedOptions );\n      this._updateSelectedOptions();\n    }\n    delete this.config.options;\n  }\n\n\n  /**************************************\n   * Public methods invoked by the view\n   * ************************************/\n\n  /**\n   * Turn the dropdown on or off. If it is turned off,\n   * it will emit the close event\n   * @returns void\n   */\n  public onToggleFilter( event, list: { clientHeight: number } ): boolean{\n    if( this.config.patch.running ) return false;\n    this.dom.state.filterActivated = !this.dom.state.filterActivated;\n    if(this.dom.state.filterActivated){\n      if(this.config.float){\n        if(this.config.offsetSession) {\n          this.config.offset = this.config.offsetSession;\n        } else if(this.config.height){\n          this.config.offset = this.config.height;\n        }\n      } else{\n        this.config.offset = null;\n      }\n\n    } else{\n      this.config.offset = null;\n    }\n\n    this.dom.setTimeout('open-close', () => {\n      if( !this.config.position ) this._setOptionListPosition( { above: event.pageY - 280, below: window.innerHeight - event.pageY - 20, height: list.clientHeight } );\n      if( !this.dom.state.filterActivated ){\n        this.onBubbleEvent( 'close' );\n      }else{\n        this.asset.onFocusValue = JSON.stringify( this.config.selectedOptions );\n        this.config.message = '';\n        this.onBubbleEvent( 'open' );\n      }\n      if(this.dom.state.filterActivated){\n        if(this.config.float){\n          const offsetHeight = this.listRef.nativeElement.offsetHeight;\n          if(offsetHeight){\n            this.config.offset = offsetHeight * (-1);\n            if(this.config.offset) this.config.offsetSession = this.config.offset;\n          }\n        }\n      }\n\n    }, 0 );\n    return true;\n  }\n\n\n  /**\n   * The client user can toggle a specific grouping to be open/close\n   * @param group\n   */\n  public onToggleGroup( group: SelectFilterGroupInterface ){\n    if( this.config.groups.length > 1 ){\n      group.open = !group.open;\n    }\n  }\n\n\n  /**\n   * Closes the dropdown if it is active.\n   * This method is called from the ClickOutside directive.\n   * If the user clicks outside of the component, it will close\n   * @param event\n   * @returns void\n   */\n  public onOutsideCLick(): void{\n    this._closeOptionList();\n  }\n\n\n  /**\n   * Checks/Unchecks all of the filtered options within a specific group\n   * @param  FieldOption option\n   * @returns boolean\n   */\n  public onAllChange( checked: boolean ): boolean{\n    if( !this.config.multiple ) return false;\n    this.config.groups.map( ( group ) => {\n      group.options.values.map( ( option: FieldItemOption ) => {\n        option.selected = checked;\n      } );\n      group.all = checked;\n      group.indeterminate = false;\n    } );\n    setTimeout( () => {\n      this._updateSelectedOptions();\n    }, 0 );\n    return false;\n  }\n\n\n  /**\n   * Checks/Unchecks all of the filtered options within a specific group\n   * @param  FieldOption option\n   * @returns boolean\n   */\n  public onGroupChange( checked: boolean, group ): boolean{\n    if( !this.config.multiple ) return false;\n    group.options.values.map( ( option: FieldItemOption ) => {\n      if( !option.hidden ){\n        option.selected = checked;\n      }\n    } );\n    setTimeout( () => {\n      this._checkGroupState( checked, group );\n      this._updateSelectedOptions();\n    }, 0 );\n    return false;\n  }\n\n\n  /**\n   * Update's the list of selected options inside of the config\n   * and emits a change event. This method will be called by the view\n   * whenever an option is selected\n   * @param MatSelectionListChange event\n   * @returns void\n   */\n  public onOptionChange( event, option, group ): void{\n    setTimeout( () => {\n      option.selected = event.target.className.search( 'mat-pseudo-checkbox-checked' ) > -1 ? true : false;\n      this._checkGroupState( option.selected, group );\n      this._updateSelectedOptions();\n    }, 0 );\n  }\n\n\n  public onLink(){\n    console.log( 'LINK STUB: Link to Entity', this.config.control.value );\n  }\n\n\n  /**\n   * Checks if the given option is in the list of selected options\n   * in the config. Used by the view to set the checkbox's on the initial state of the dropdown\n   * @param  FieldOption option\n   * @returns boolean\n   */\n  public isOptionSelected( option: FieldItemOption ): boolean{\n    return option.selected;\n  }\n\n\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  /**\n   * Observes the value changes to the search and triggers the filter of the options\n   * @returns void\n   */\n  private _setUpFilterObservable(): void{\n    this.ui.search.config.control.valueChanges\n      .pipe(\n        debounceTime( 200 )\n      ).subscribe( ( value: string ) => {\n      this._filterOptionsList( value );\n    } );\n  }\n\n\n  /**\n   * Close the option list\n   * @private\n   */\n  private _closeOptionList(){\n    if( this.dom.state.filterActivated ){\n      // this.config.control.setValue( '', { emitEvent: true } );\n      this.dom.state.filterActivated = false;\n      this.cdr.detectChanges();\n      this._checkSelectedValue( this.dom.state.filterActivated );\n      this._filterOptionsList('');\n      this.onBubbleEvent( 'close' );\n      this.config.offset = null;\n    }\n  }\n\n\n  /**\n   * Check the selected value to see if it needs to be stored\n   * @param open\n   * @private\n   */\n  private _checkSelectedValue( open: boolean ){\n    // if( !open ){\n    if( this.ui.selected.config.control.invalid ){\n      if( this.config.displayErrors ) this.config.message = ValidationErrorMessages( this.ui.selected.config.control.errors );\n    }else if( this.config.patch && ( this.config.patch.path || this.config.facade ) ){\n      if( JSON.stringify( this.config.selectedOptions ) !== this.asset.onFocusValue ){\n        this.onChange();\n      }\n    }\n  }\n\n\n\n  /**\n   * Detects if the list of options should appear above or below the select input\n   * @param height\n   */\n  private _setOptionListPosition( params: { above: number, below: number, height: number } ): void{\n    if( params.height > 0 ){\n      this.config.offset = null;\n      this.dom.state.above = params.above;\n      this.dom.state.below = params.below;\n      this.dom.state.list = params.height;\n      // if( this.config.allowAll ) this.dom.state.list += 60;\n      // if( this.config.filter ) this.dom.state.list += 58;\n      this.config.position = this.dom.state.below >= this.dom.state.above ? 'below' : 'above';\n      this.config.height = this.config.defaultHeight;\n      if( this.config.position === 'above' ){\n        if( this.config.height > this.dom.state.above ) this.config.height = this.dom.state.above;\n        this.config.minHeight = this.config.height;\n      }else{\n        if( this.config.height > this.dom.state.below ) this.config.height = this.dom.state.below;\n        // this.config.minHeight = this.config.defaultMinHeight;\n        this.config.minHeight = this.config.height;\n      }\n      this.dom.setTimeout( `search-focus`, () => {\n        if( this.searchRef ){\n          this.searchRef.nativeElement.focus();\n          // this.onBubbleEvent( 'focus' );\n        }\n      }, 200 );\n    }\n  }\n\n\n  /**\n   * Detects whether the check all  box for a group should be unchecked, checked, or indeterminate\n   * @param checked\n   * @param group\n   */\n  private _checkGroupState( checked: boolean, group ): void{\n    let indeterminate = false;\n    let all = true;\n    if( !checked ){\n      all = false;\n      group.options.values.some( ( option ) => {\n        if( !option.hidden && option.selected ){\n          indeterminate = true;\n          return true;\n        }\n      } );\n    }else{\n      group.options.values.some( option => {\n        if( !option.hidden && !option.selected ){\n          all = false;\n          indeterminate = true;\n          return true;\n        }\n      } );\n    }\n    group.all = all;\n    group.indeterminate = indeterminate;\n  }\n\n\n  /**\n   * Finds only the options from the config's options that match\n   * the string passed in, and returns those options.\n   * Used as the filter when setting up the filteredOptions observable\n   * @param string value\n   * @returns FieldItemOption\n   */\n  private _filterOptionsList( search: string ): void{\n    this.config.groups.map( ( group: SelectFilterGroupInterface ) => {\n      group.options.values.map( ( option ) => {\n        option.hidden = ObjectContainsTagSearch( option, search ) ? false : true;\n      } );\n      group.selected = group.options.values.filter( ( option ) => {\n        return !option.hidden && option.selected;\n      } ).length;\n\n      group.visible = group.options.values.filter( ( option ) => {\n        return !option.hidden;\n      } ).length;\n      const checked = group.visible === group.selected;\n      this._checkGroupState( checked, group );\n    } );\n    this.cdr.detectChanges();\n  }\n\n\n  /**\n   * Update's the selection options in config\n   * by looping through all of the currently selected items\n   * in the selectionListRef.\n   * @param number id\n   */\n  private _updateSelectedOptions(){\n    const selected = this.selectionListRef.selectedOptions.selected;\n    let str: string[] = [];\n    if( this.config.multiple ){\n      this.config.selectedOptions = [];\n      for( const option of selected ){\n        str.push( option._text.nativeElement.innerText );\n        this.config.selectedOptions.push( String( option.value ).trim() );\n      }\n      str = str.sort();\n      this.config.strVal = str.join( ', ' );\n      this.ui.selected.config.control.setValue( this.config.strVal, { emitEvent: false } );\n      const value = JsonCopy( this.config.selectedOptions );\n      this.config.control.setValue( value, { emitEvent: false } );\n    }else{\n      let value;\n      for( const option of selected ){\n        str.push( option._text.nativeElement.innerText );\n        value = option.value;\n      }\n      str = str.sort();\n      this.config.strVal = str.join( ', ' );\n      this.ui.selected.config.control.setValue( this.config.strVal, { emitEvent: false } );\n      this.dom.active.optionId = value;\n      this.config.control.setValue( value, { emitEvent: false } );\n      this.config.value = value;\n      this._closeOptionList();\n    }\n  }\n}\n","/**\n * This directive was taken from this github repository\n * https://github.com/christianliebel/angular2-click-outside\n * found on stack over flow post \n * https://stackoverflow.com/questions/35712379/how-can-i-close-a-dropdown-on-click-outside\n * \n * Credit goes to github user christianliebel\n */\n\nimport {Directive, ElementRef, Output, EventEmitter, HostListener} from '@angular/core';\n\n@Directive({\n    selector: '[libClickOutside]'\n})\nexport class ClickOutsideDirective {\n    constructor(private _elementRef: ElementRef) {\n    }\n\n    @Output()\n    public libClickOutside = new EventEmitter<MouseEvent>();\n\n    @HostListener('document:click', ['$event', '$event.target'])\n    public onClick(event: MouseEvent, targetElement: HTMLElement): void {\n        if (!targetElement) {\n            return;\n        }\n\n        const clickedInside = this._elementRef.nativeElement.contains(targetElement);\n        if (!clickedInside) {\n            this.libClickOutside.emit(event);\n        }\n    }\n}\n","import { Component, Inject } from '@angular/core';\nimport { MatCalendar } from '@angular/material/datepicker';\nimport { DateAdapter, MAT_DATE_FORMATS, MatDateFormats } from '@angular/material/core';\n\n@Component({\n  selector: 'lib-custom-header',\n  templateUrl: 'expansion-items.component.html',\n  styleUrls: ['expansion-items.component.scss']\n})\nexport class ExpansionItemsComponent<D>{\n\n  constructor(\n    private calendar: MatCalendar<D>,\n    private dateAdapter: DateAdapter<D>,\n    @Inject(MAT_DATE_FORMATS) private dateFormat: MatDateFormats,\n  ){\n  }\n\n\n  /**\n   * Toggle Calendar between Month and Multiple Year\n   */\n\n  toggleCalView(){\n    this.calendar.currentView = this.calendar.currentView === 'month' ? 'multi-year' : 'month';\n  }\n\n  /**\n   * Get the date month and year label. Example: May 2021.\n   */\n\n  get periodLabel(): string {\n    return this.dateAdapter.format(this.calendar.activeDate, this.dateFormat.display.monthYearLabel);\n  }\n\n\n  /**\n   * Change the month or year by -1\n   * @param mode month or year\n   */\n\n  previousClicked(mode: 'month' | 'year'): void{\n    this.changeDate(mode, -1);\n  }\n\n\n  /**\n   * Change the month or year 1\n   * @param mode\n   */\n\n  nextClicked(mode: 'month' | 'year'): void {\n    this.changeDate(mode, 1);\n  }\n\n\n  /**\n   * Change the month or year by -1 or 1\n   * @param mode : year or month\n   * @param amount -1 or 1\n   * @private\n   */\n\n  private changeDate(mode: 'month' | 'year', amount: -1 | 1): void {\n    this.calendar.activeDate = mode === 'month' ?  this.dateAdapter.addCalendarMonths(this.calendar.activeDate, amount)\n      : this.dateAdapter.addCalendarYears(this.calendar.activeDate, amount);\n  }\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit, ViewChild, AfterViewInit} from '@angular/core';\nimport { MatDatepicker } from \"@angular/material/datepicker\";\nimport { DateConfig } from './date-config.model';\nimport { PopFieldItemComponent } from '../pop-field-item.component';\nimport { FormControl } from '@angular/forms';\nimport { IsObject } from '../../../../pop-common-utility';\nimport { PopDate } from '../../../../pop-common.model';\nimport { ExpansionItemsComponent } from './datepicker-expansion-items/expansion-items.component';\nimport { OverlayContainer } from '@angular/cdk/overlay';\n\n@Component( {\n  selector: 'lib-pop-date',\n  templateUrl: './pop-date.component.html',\n  styleUrls: [ './pop-date.component.scss' ]\n} )\nexport class PopDateComponent extends PopFieldItemComponent implements OnInit, OnDestroy, AfterViewInit {\n  @Input() config: DateConfig = new DateConfig();\n  @ViewChild('datePicker') picker: MatDatepicker<any>;\n  public name = 'PopDateComponent';\n\n  ExpansionItems =  ExpansionItemsComponent;\n  private selfClose: () => void;\n\n  constructor(public el: ElementRef, private overlayContainer: OverlayContainer){\n    super();\n\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n\n        this.config.triggerOnChange = ( value: string | number | null, forcePatch = false ) => {\n          this.dom.setTimeout( `config-trigger-change`, () => {\n            // this.cdr.detectChanges();\n            this.onChange( value, forcePatch );\n          }, 0 );\n        };\n\n\n        this.config.clearMessage = () => {\n          this.dom.setTimeout( `config-clear-message`, () => {\n            this.config.message = '';\n            this.config.control.markAsPristine();\n            this.config.control.markAsUntouched();\n            // this.cdr.detectChanges();\n          }, 0 );\n        };\n\n        this._setFilter();\n\n        return resolve( true );\n      } );\n    };\n  }\n\n  /**\n   * On init hook\n   */\n  ngOnInit(){\n    super.ngOnInit();\n    if(this.config.type === 'Basic'){\n      this.ExpansionItems = null;\n    }\n  }\n\n\n  /**\n   * After view init hook\n   *  Backup picker close method\n   */\n\n  ngAfterViewInit() {\n    this.selfClose = this.picker.close;\n  }\n\n  /**\n   * on Open Event\n   * Overwrite picker close to prevent auto closing\n   */\n  public onOpen() {\n    const olcClasses =this.overlayContainer.getContainerElement().classList;\n\n\n    if(this.config.type === 'Expanded'){\n      this.picker.close = () => {};\n\n\n      olcClasses.add('expanded');\n\n\n    }else{\n      this.removeExpandedClass();\n    }\n  }\n\n\n  /**\n   * Removes Expanded Class from the Overlay Container if needed\n   */\n  removeExpandedClass(){\n    const olcClasses =this.overlayContainer.getContainerElement().classList;\n    if (olcClasses.contains('expanded')) {\n      setTimeout( () =>  olcClasses.remove('expanded'), 100);\n    }\n\n  }\n\n  /**\n   * On Change event\n   * @param value\n   * @param force\n   */\n  onChange( value?: any, force = false ){\n\n    if( value ){\n      value = PopDate.toIso( value );\n    }else{\n      value = null;\n    }\n\n    if( IsObject( this.config, [ 'control' ] ) ){\n      this.log.info( `onChange`, value );\n      const control = <FormControl>this.config.control;\n      if( typeof value !== 'undefined' ){\n        control.setValue( value );\n        control.markAsDirty();\n        control.updateValueAndValidity();\n      }\n      if( this._isChangeValid() ){\n        value = typeof value !== 'undefined' ? value : this.config.control.value;\n        value = this._applyTransformation( value );\n        if( this.config.patch && ( this.config.patch.path || this.config.facade ) ){\n          this._onPatch( value, force );\n        }else{\n          this.onBubbleEvent( 'onChange' );\n        }\n      }else{\n        this.onBubbleEvent( 'onInvalidChange' );\n      }\n    }\n  }\n\n  /**\n   * Reset the Form\n   */\n\n  onResetForm(): void{\n    this.dom.setTimeout( `reset-form`, () => {\n      this.config.control.setValue( null, { emitEvent: true } );\n      this.config.control.updateValueAndValidity();\n      this.onChange();\n    }, 0 );\n\n  }\n\n\n  /**\n   * Determine where the click happened. Return picker close to original state\n   * @param $click\n   */\n\n  onOutsideCLick($click){\n    let isDatepickerAreaClick = $click.path.some( path => {\n      if(path.className){\n        return path.className.includes('mat-datepicker');\n      }\n    });\n\n    if(isDatepickerAreaClick){\n      const r = $click.path.some( path => {\n        if(path.className){\n          return path.className.includes('mat-overlay');\n        }\n      });\n\n      if(r){\n        isDatepickerAreaClick = false;\n      }\n    }\n\n    const isDatepickerCancel = $click.path.some( ele =>{\n      if(ele.id){\n        return ele.id.includes('datepicker-cancel');\n      }\n    });\n\n    const isDatepickerApply = $click.path.some( ele =>{\n      if(ele.id){\n        return ele.id.includes('datepicker-apply');\n      }\n    });\n\n    if(!isDatepickerAreaClick || isDatepickerCancel || isDatepickerApply){\n\n\n\n      this.picker.close = this.selfClose;\n      this.picker.close();\n      this.removeExpandedClass();\n    }\n\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n    this.removeExpandedClass();\n  }\n\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  protected _setFilter(): void{\n    if( typeof this.config.filterPredicate === 'string' ){\n      switch( String( this.config.filterPredicate ).toLowerCase() ){\n        case 'weekday':\n          this.config.filterPredicate = ( d: Date ): boolean => {\n            const day = d.getDay();\n            // Prevent Saturday and Sunday from being selected.\n            return day !== 0 && day !== 6;\n          };\n          break;\n        case 'weekday':\n          this.config.filterPredicate = ( d: Date ): boolean => {\n            const day = d.getDay();\n            // Prevent Saturday and Sunday from being selected.\n            return day >= 1 && day <= 5;\n          };\n          break;\n        case 'monday':\n          this.config.filterPredicate = ( d: Date ): boolean => {\n            const day = d.getDay();\n            // monday\n            return day === 1;\n          };\n          break;\n        default:\n          this.config.filterPredicate = null;\n          break;\n      }\n    }\n  }\n\n}\n","import { Component, Inject } from '@angular/core';\nimport { MatCalendar, MatDatepicker, MatDateRangePicker } from '@angular/material/datepicker';\nimport { DateAdapter, MAT_DATE_FORMATS, MatDateFormats } from '@angular/material/core';\n\n@Component({\n  selector: 'lib-custom-header',\n  templateUrl: 'date-range-expansion-items.component.html',\n  styleUrls: ['date-range-expansion-items.component.scss']\n})\nexport class DateRangeExpansionItemsComponent<D>{\n\n  constructor(\n    private calendar: MatCalendar<D>,\n    private dateAdapter: DateAdapter<D>,\n    @Inject(MAT_DATE_FORMATS) private dateFormat: MatDateFormats,\n  ){\n  }\n\n  /**\n   * Toggle Calendar between Month and Multiple Year\n   */\n\n  toggleCalView(){\n    this.calendar.currentView = this.calendar.currentView === 'month' ? 'multi-year' : 'month';\n  }\n\n  /**\n   * Get the date month and year label. Example: May 2021.\n   */\n\n  get periodLabel(): string {\n    return this.dateAdapter.format(this.calendar.activeDate, this.dateFormat.display.monthYearA11yLabel);\n  }\n\n  /**\n   * Change the month or year by -1\n   * @param mode month or year\n   */\n\n  previousClicked(mode: 'month' | 'year'): void{\n    this.changeDate(mode, -1);\n  }\n\n  /**\n   * Change the month or year 1\n   * @param mode\n   */\n\n\n  nextClicked(mode: 'month' | 'year'): void {\n    this.changeDate(mode, 1);\n  }\n\n\n  /**\n   * Change the month or year by -1 or 1\n   * @param mode : year or month\n   * @param amount -1 or 1\n   * @private\n   */\n  private changeDate(mode: 'month' | 'year', amount: -1 | 1): void {\n    this.calendar.activeDate = mode === 'month' ?  this.dateAdapter.addCalendarMonths(this.calendar.activeDate, amount)\n      : this.dateAdapter.addCalendarYears(this.calendar.activeDate, amount);\n  }\n}\n","import { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { FieldItemPatchInterface } from '../../../../../pop-common.model';\nimport { SetControl } from '../../../../../pop-common-dom.models';\n\nexport type DateRangeFilterPredicate = ( d: Date ) => boolean;\n\nexport interface DateRangeConfigInterface {\n\n\n  type?: 'Basic' | 'Expanded';\n  bubble?: boolean;                                 // fire events\n  disabled?: boolean;                               // Mark as disabled.\n  displayErrors?: boolean;                          // If Error messages should be displayed.\n  name?: string;                                // the entityId field name\n  facade?: boolean;\n  filterPredicate?: string | DateRangeFilterPredicate;   // A function to remove certain dates\n  helpText?: string;                             // On hover helper text.\n  id?: string | number;                             // A number that will be included in the events so you know which field it came from.\n  label?: string;                                   // Date label.\n  min?: string | number | Date;                            // Field multiple_min date.\n  max?: string | number | Date;                            // Field multiple_max date.\n  metadata?: object;                                // Array of objects. To be passed back on the event emitter and included in a patch if desired.\n  noInitialValue?: boolean;                          // Set to true to always have an empty value on load\n  required?: boolean;\n  session?: boolean;                                // If field value change should be stored to core entity\n  sessionPath?: string;                            // If session path if not stored on root entity\n  patch?: FieldItemPatchInterface;                           // If field should be auto-patched.\n  tooltip?: string;                                 // Tooltip for information to show when input is focused\n  transformation?: string;                          // Transform the input to match a specific case of format\n  validators?: Array<Validators>;                   // Array of Validators.\n  valueStart?: string | number;                          // Initial value\n  valueEnd?: string | number;\n  options?: object;                                 //\n}\n\n\nexport class DateRangeConfig  implements SetControl{\n\n\n  // Defaults\n  type = 'Expanded';\n  bubble = false;\n  formGroup: FormGroup;\n  displayErrors = true;\n  disabled = false;\n  facade?: boolean;\n  filterPredicate = null;\n  helpText = '';\n  id = '';\n  label = '';\n  min = null;\n  max = null;\n  message = '';\n  metadata;\n  name = 'name';\n  noInitialValue = false;\n  patch: FieldItemPatchInterface;\n  required?: boolean;\n  session?: boolean;\n  sessionPath?: string;\n  showTooltip = false;\n  transformation;\n  tooltip = '';\n  valueStart;\n  valueEnd;\n  clearMessage;\n  triggerOnChange;\n\n  // No Defaults\n\n  validators;\n\n\n  constructor( params?: DateRangeConfigInterface ){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n    if( this.valueStart ) this.valueStart = new Date( this.valueStart );\n    if( this.valueEnd ) this.valueEnd = new Date( this.valueEnd );\n    if( typeof this.min === 'string'){\n      this.min = new Date( this.min );\n    }\n    if( typeof this.max === 'string'){\n      this.max = new Date( this.max );\n    }\n    // if( isNaN( this.max ) === false ){\n    //   const maxDate = new Date();\n    //   // maxDate.setDate(maxDate.getDate() - 1);\n    //   maxDate.setDate( maxDate.getDate() + parseInt( this.max, 10 ) );\n    //   this.max = new Date( maxDate );\n    // }\n    if( !this.patch ) this.patch = { field: '', duration: 750, path: '', disabled: false, businessId: 0 };\n    if( this.patch.displayIndicator !== false ) this.patch.displayIndicator = true;\n    if( this.noInitialValue ) this.valueStart = '';\n    if( this.noInitialValue ) this.valueEnd = '';\n    if( !this.formGroup ) this.setControl();\n\n  }\n\n\n  setControl(){\n    if(this.disabled){\n      this.formGroup =\n        <FormGroup> new FormGroup({\n          start: new FormControl({value: this.valueStart, disabled: true}),\n          end: new FormControl({value: this.valueEnd, disabled: true}),\n        });\n    }else{\n      this.formGroup =\n        <FormGroup> new FormGroup({\n          start: new FormControl( this.valueStart, ( this.validators ? this.validators : [] ) ) ,\n          end: new FormControl( this.valueEnd, ( this.validators ? this.validators : [] ) )\n        });\n\n\n    }\n\n  }\n}\n","import { Component, ElementRef, Input,Output, EventEmitter, OnDestroy, OnInit, ViewChild, AfterViewInit} from '@angular/core';\nimport { MatDateRangePicker } from \"@angular/material/datepicker\";\nimport { PopFieldItemComponent } from '../../pop-field-item.component';\nimport { PopDate } from '../../../../../pop-common.model';\nimport { IsObject } from '../../../../../pop-common-utility';\nimport { FormControl } from '@angular/forms';\nimport { DateRangeExpansionItemsComponent } from './expansion-items/date-range-expansion-items.component';\nimport { DateRangeConfig } from './date-range-config.models';\nimport { ValidationErrorMessages } from '../../../../../services/pop-validators';\nimport { OverlayContainer } from '@angular/cdk/overlay';\n\n@Component( {\n  selector: 'lib-pop-date-range',\n  templateUrl: 'pop-date-range.component.html',\n  styleUrls: [ 'pop-date-range.component.scss' ]\n} )\nexport class PopDateRangeComponent extends PopFieldItemComponent implements OnInit, OnDestroy, AfterViewInit {\n\n  @Input() config: DateRangeConfig = new DateRangeConfig();\n  @Output() apply = new EventEmitter();\n  ExpansionItems =  DateRangeExpansionItemsComponent;\n  @ViewChild('dateRangePicker') picker: MatDateRangePicker<any>;\n\n  public name = 'PopDateRangeComponent';\n  private selfClose: () => void;\n\n  constructor(public el: ElementRef,  private overlayContainer: OverlayContainer){\n    super();\n\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n\n        this.config.triggerOnChange = ( value: {start: string | number | null, end:  string | number | null}, forcePatch = false ) => {\n          this.dom.setTimeout( `config-trigger-change`, () => {\n            // this.cdr.detectChanges();\n            this.onChange( 'start',value.start, forcePatch );\n            this.onChange( 'end',value.end, forcePatch );\n          }, 0 );\n        };\n\n        this.config.clearMessage = () => {\n          this.dom.setTimeout( `config-clear-message`, () => {\n            this.config.message = '';\n            this.config.formGroup.get('start').markAsPristine();\n            this.config.formGroup.get('start').markAsPristine();\n            this.config.formGroup.get('end').markAsPristine();\n            this.config.formGroup.get('end').markAsPristine();\n            // this.cdr.detectChanges();\n          }, 0 );\n        };\n\n        this._setFilter();\n\n        return resolve( true );\n      } );\n    };\n  }\n\n  /**\n   * On init hook\n   */\n  ngOnInit(){\n    super.ngOnInit();\n    if(this.config.type === 'Basic'){\n      this.ExpansionItems = null;\n    }\n  }\n\n  /**\n   * After view init hook\n   *  Backup picker close method\n   */\n\n  ngAfterViewInit() {\n    this.selfClose = this.picker.close;\n  }\n\n\n  /**\n   * Get the date control name for start or end\n   * @param type: start or end\n   */\n\n  getDateControlName(type: 'start' | 'end'){\n    if(type === 'start') return Object.keys(this.config.formGroup.controls)[0];\n    else if(type === 'end') return Object.keys(this.config.formGroup.controls)[1];\n  }\n\n  /**\n   * on Open Event\n   * Overwrite picker close to prevent auto closing\n   */\n\n  public onOpen() {\n\n    const olcClasses =this.overlayContainer.getContainerElement().classList;\n\n    if(this.config.type === 'Expanded'){\n      this.picker.close = () => {};\n\n      olcClasses.add('expanded');\n\n\n    }else{\n      this.removeExpandedClass();\n    }\n  }\n\n  /**\n   * Removes Expanded Class from the Overlay Container if needed\n   */\n  removeExpandedClass(){\n    const olcClasses =this.overlayContainer.getContainerElement().classList;\n    if (olcClasses.contains('expanded')) {\n      setTimeout( () =>  olcClasses.remove('expanded'), 100);\n\n    }\n\n  }\n\n  /**\n   * Determine where the click happened. Return picker close to original state\n   * @param $click\n   */\n\n\n  onOutsideCLick($click){\n    let isDatepickerAreaClick = $click.path.some( path => {\n      if(path.className){\n        return path.className.includes('mat-datepicker');\n      }\n    });\n\n    if(isDatepickerAreaClick){\n      const r = $click.path.some( path => {\n        if(path.className){\n          return path.className.includes('mat-overlay');\n        }\n      });\n\n      if(r){\n        isDatepickerAreaClick = false;\n      }\n    }\n\n    const isDatepickerCancel = $click.path.some( ele =>{\n      if(ele.id){\n        return ele.id.includes('datepicker-cancel');\n      }\n    });\n\n    const isDatepickerApply = $click.path.some( ele =>{\n      if(ele.id){\n        return ele.id.includes('datepicker-apply');\n      }\n    });\n\n    if(isDatepickerCancel || isDatepickerApply){\n      this.onChange('start');\n      this.onChange('end');\n      this.picker.close = this.selfClose;\n      this.picker.close();\n      this.removeExpandedClass();\n\n      if(isDatepickerApply){\n        this.apply.emit({start: this.config.formGroup.get('start').value, end: this.config.formGroup.get('end').value});\n      }\n    }else if(!isDatepickerAreaClick){\n      this.picker.close = this.selfClose;\n      this.picker.close();\n      this.removeExpandedClass();\n    }\n\n\n  }\n\n  /**\n   * On Change event\n   * @param controlName\n   * @param value\n   * @param force\n   */\n  onChange(  controlName: 'start' | 'end',  value?: any,  force = false, ){\n\n   value = this.config.formGroup.get(this.getDateControlName(controlName)).value;\n\n    if( value ){\n      value = PopDate.toIso( value );\n    }else{\n      value = null;\n    }\n\n    if( IsObject( this.config, [ 'formGroup' ] ) ){\n      this.log.info( `onChange`, value );\n\n\n      const control = <FormControl>this.config.formGroup.get(controlName);\n      if( typeof value !== 'undefined' ){\n         control.setValue( value );\n         control.markAsDirty();\n         control.updateValueAndValidity();\n      }\n      if( this.isChangeValid(controlName) ){\n         value = typeof value !== 'undefined' ? value : this.config.formGroup.get(this.getDateControlName(controlName)).value;\n         value = this._applyTransformation( value );\n         if( this.config.patch && ( this.config.patch.path || this.config.facade ) ){\n           this._onPatch( value, force );\n         }else{\n           this.onBubbleEvent( 'onChange' );\n         }\n       }else{\n      }\n    }\n  }\n\n\n  /**\n   * Check to see if change is valid\n   * @param controlName: start or end\n   * @protected\n   */\n\n  protected isChangeValid(controlName: 'start' | 'end'){\n\n\n    const control = <FormControl> this.config.formGroup.get(this.getDateControlName(controlName)).value;\n    if(control){\n      if( control.invalid ){\n        if( this.config.displayErrors ) this._setMessage( ValidationErrorMessages( control.errors ) );\n        return false;\n      }\n    }\n\n    return this._checkPrevent();\n  }\n\n\n  /**\n   * Reset Form event\n   */\n\n  onResetForm(): void{\n    this.dom.setTimeout( `reset-form`, () => {\n      this.config.formGroup.get('start').setValue( null, { emitEvent: true } );\n      this.config.formGroup.get('start').updateValueAndValidity();\n      this.config.formGroup.get('end').setValue( null, { emitEvent: true } );\n      this.config.formGroup.get('end').updateValueAndValidity();\n      this.onChange('start');\n      this.apply.emit({start:null,end:null});\n    }, 0 );\n\n  }\n\n  ngOnDestroy(){\n    super.ngOnDestroy();\n    this.removeExpandedClass();\n  }\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  protected _setFilter(): void{\n    if( typeof this.config.filterPredicate === 'string' ){\n      switch( String( this.config.filterPredicate ).toLowerCase() ){\n        case 'weekday':\n          this.config.filterPredicate = ( d: Date ): boolean => {\n            const day = d.getDay();\n            // Prevent Saturday and Sunday from being selected.\n            return day !== 0 && day !== 6;\n          };\n          break;\n        case 'weekday':\n          this.config.filterPredicate = ( d: Date ): boolean => {\n            const day = d.getDay();\n            // Prevent Saturday and Sunday from being selected.\n            return day >= 1 && day <= 5;\n          };\n          break;\n        case 'monday':\n          this.config.filterPredicate = ( d: Date ): boolean => {\n            const day = d.getDay();\n            // monday\n            return day === 1;\n          };\n          break;\n        default:\n          this.config.filterPredicate = null;\n          break;\n      }\n    }\n  }\n}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { DateAdapter } from '@angular/material/core';\nimport { MatDatepicker,  MatCalendar } from '@angular/material/datepicker';\n\nconst datePresets = [\n  'Today',\n  'Last',\n  'Previous',\n  'Next',\n  'Last Month',\n  'Next Month',\n  'Last Year',\n  'Next Year',\n  'Custom'\n] as const;\n\ntype DatePreset = typeof  datePresets[number];\n\n@Component({\n  selector: 'lib-custom-panel',\n  templateUrl: 'custom-panel.component.html',\n  styleUrls: ['custom-panel.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CustomPanelComponent<D>{\n  readonly presets = datePresets;\n\n  selected: DatePreset = 'Today';\n  dayOfWeek: string;\n\n  constructor(\n    private dateAdapter: DateAdapter<D>,\n    private datePicker: MatDatepicker<D>,\n    private calendar: MatCalendar<D>,\n  ){\n\n    // Get the day of the week to add to preset. Example: Next Monday\n    switch (new Date().getDay()) {\n      case 0:\n        this.dayOfWeek = \"Sunday\";\n        break;\n      case 1:\n        this.dayOfWeek = \"Monday\";\n        break;\n      case 2:\n        this.dayOfWeek = \"Tuesday\";\n        break;\n      case 3:\n        this.dayOfWeek = \"Wednesday\";\n        break;\n      case 4:\n        this.dayOfWeek = \"Thursday\";\n        break;\n      case 5:\n        this.dayOfWeek = \"Friday\";\n        break;\n      case 6:\n        this.dayOfWeek = \"Saturday\";\n    }\n  }\n\n\n  /**\n   * Apply the preset to Datepicker and Calendar\n   * @param datePreset: Example: Today\n   */\n\n  selectDatePreset(datePreset: DatePreset): void{\n    this.selected = datePreset;\n    const date = this.calculateDate(datePreset);\n    this.datePicker.select(date);\n    this.calendar.activeDate = date;\n  }\n\n\n  /**\n   * Calculate date Preset\n   * @param datePreset: Example: Today.\n   */\n\n  calculateDate(datePreset: DatePreset): any{\n    const today = this.today;\n\n    switch(datePreset){\n      case 'Today':\n        return today;\n      case 'Last':\n        return this.dateAdapter.addCalendarDays(today, -7);\n      case 'Previous':\n        return this.dateAdapter.addCalendarDays(today, -14);\n      case 'Next':\n        return this.dateAdapter.addCalendarDays(today, 7);\n      case 'Last Month':\n        return this.dateAdapter.addCalendarMonths(today, -1);\n      case 'Next Month':\n        return this.dateAdapter.addCalendarMonths(today, 1);\n      case 'Last Year':\n        return this.dateAdapter.addCalendarYears(today, -1);\n      case 'Next Year':\n        return this.dateAdapter.addCalendarYears(today, 1);\n    }\n  }\n\n\n  /**\n   * Get Today\n   * @private\n   */\n\n  private get today(): D {\n    const today = this.dateAdapter.today();\n\n    if (today === null) {\n      throw new Error('date creation failed');\n    }\n    return today;\n  }\n\n}\n","import { ChangeDetectorRef, Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { TimeConfig } from './time-config.model';\nimport { PopFieldItemComponent } from '../pop-field-item.component';\n\n\n@Component({\n  selector: 'lib-pop-time',\n  templateUrl: './pop-time.component.html',\n  styleUrls: [ './pop-time.component.scss' ]\n})\nexport class PopTimeComponent extends PopFieldItemComponent implements OnInit, OnDestroy {\n  @Input() config: TimeConfig = new TimeConfig();\n  public name = 'PopTimeComponent';\n\n\n  constructor(\n    public el: ElementRef,\n    protected cdr: ChangeDetectorRef\n  ){\n    super();\n\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n\n        this.config.time = 12;\n        this.ui.time = {\n          12: {\n            hours: [],\n            minutes: [],\n            periods: [ 'AM', 'PM' ]\n\n          },\n          24: {\n            hours: [],\n            minutes: [],\n            periods: []\n          },\n          selectedHour: '12',\n          selectedMinute: '00',\n          selectedPeriod: 'AM',\n        };\n\n        this.setHoursAndMinutes();\n        this.setSelectedValues();\n        this.config.triggerOnChange = (value: string | number | null) => {\n          this.cdr.detectChanges();\n          this.onChange(value, true);\n        };\n\n        resolve(true);\n      });\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  protected setSelectedValues(): void{\n    const time = this.ui.time;\n    const timeValue = this.config.control.value;\n    const minuteValue = timeValue.slice(2, 5).replace(/[^a-zA-Z0-9]/g, '').padStart(2, '0');\n    let hourValue = timeValue.slice(0, 2).replace(/[^a-zA-Z0-9]/g, '').padStart(2, '0');\n    hourValue = ( ( hourValue % 12 ) || 12 ).toString(10).padStart(2, '0');\n    if( Number(hourValue) > 12 && this.config.time === 12 ) time.selectedPeriod = 'PM';\n    if( timeValue ) time.selectedHour = hourValue;\n    time.selectedMinute = minuteValue;\n  }\n\n\n  protected setHoursAndMinutes(): void{\n    let i;\n    const hourLimit = this.config.time === 12 ? 12 : 23;\n    for( i = 1; i <= hourLimit; i++ ){\n      this.ui.time[ this.config.time ].hours.push(i.toString().padStart(2, '0'));\n    }\n    for( i = 0; i < 60; i += this.config.interval ){\n      this.ui.time[ this.config.time ].minutes.push(i.toString().padStart(2, '0'));\n    }\n  }\n\n\n  protected setTimeValue(): void{\n    let selectedHour = this.ui.time.selectedHour;\n    if( this.ui.time.selectedPeriod === 'AM' && Number(selectedHour) === 12 ) selectedHour = '00';\n    if( this.ui.time.selectedPeriod === 'PM' && Number(selectedHour) > 12 ) selectedHour = ( 12 + Number(selectedHour) ).toString(10);\n    const selectedTime = selectedHour + ':' + this.ui.time.selectedMinute + ':00';\n    this.config.control.setValue(selectedTime, { emitEvent: false });\n  }\n}\n","import {\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  EventEmitter,\n  Input, OnDestroy,\n  OnInit,\n  Output,\n  ViewChild,\n} from '@angular/core';\nimport {SelectionModel} from '@angular/cdk/collections';\nimport {MatListOption, MatSelectionList} from '@angular/material/list';\nimport {Observable} from 'rxjs';\nimport {SelectListConfig, SelectListGroupInterface} from './select-list-config.model';\nimport {InputConfig} from '../pop-input/input-config.model';\n\nimport {debounceTime} from 'rxjs/operators';\nimport {SelectFilterGroupInterface} from '../pop-select-filter/select-filter-config.model';\nimport {\n  CoreConfig,\n  Entity,\n  FieldItemOption,\n  FieldItemPatchInterface,\n  KeyMap,\n  PopBaseEventInterface\n} from '../../../../pop-common.model';\nimport {PopFieldItemComponent} from '../pop-field-item.component';\nimport {\n  IsArray,\n  IsCallableFunction,\n  IsDefined,\n  IsNumber,\n  IsObject,\n  ObjectContainsTagSearch\n} from '../../../../pop-common-utility';\nimport {SwitchConfig} from '../pop-switch/switch-config.model';\n\n\n@Component({\n  selector: 'lib-pop-select-list',\n  templateUrl: './pop-select-list.component.html',\n  styleUrls: ['./pop-select-list.component.scss'],\n})\nexport class PopSelectListComponent extends PopFieldItemComponent implements OnInit, OnDestroy {\n  // configuration for component\n  @Input() config: SelectListConfig;\n\n  // emitted every time there is an option selection, search focus, or the filter options close\n  @Output() events: EventEmitter<PopBaseEventInterface> = new EventEmitter<PopBaseEventInterface>();\n\n  // Getting a reference to the selection list in the view so that I can know which options are selected\n  @ViewChild('selectionList', {static: true}) selectionListRef: MatSelectionList;\n  @ViewChild('search') searchRef: ElementRef;\n\n  public name = 'PopSelectListComponent';\n\n\n  protected asset = {\n    filteredOptions: <Observable<FieldItemOption[]>>undefined,\n    groups: [],\n    onFocusValue: undefined,\n    filterActivated: false,\n    disabled: <KeyMap<boolean>>{}\n  };\n\n  public ui = {\n    search: {\n      config: undefined,\n    },\n    all: {\n      overlay: undefined,\n    }\n  };\n\n\n  constructor(\n    public el: ElementRef,\n    protected cdr: ChangeDetectorRef) {\n    super();\n\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n\n        this._setInitialDomState();\n        this._setUpFilterObservable();\n        this._setListPosition();\n        this._filterOptionList('');\n        this._setConfigHooks();\n\n        return resolve(true);\n      });\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n\n        this._setInitialValue();\n\n        return resolve(true);\n      });\n    };\n\n  }\n\n\n  ngOnInit(): void {\n    super.ngOnInit();\n  }\n\n\n  triggerOnChange(wait = 1000) {\n    this.dom.setTimeout('api-fetch', () => {\n      this.onChange();\n    }, wait);\n  }\n\n\n  /**\n   * Checks/Unchecks all of the filtered options within a specific group\n   * @param  FieldOption option\n   * @returns boolean\n   */\n  onGroupChange(checked: boolean, group): boolean {\n    if (!this.config.multiple) return false;\n    if (!checked) this.config.all = false;\n    group.options.values.map((option: FieldItemOption) => {\n      if (!option.hidden) option.selected = checked;\n    });\n    setTimeout(() => {\n      this._checkGroupState(checked, group);\n      this._updateSelectedOptions();\n      this.onBubbleEvent('groupAllChange', 'Group Change', {data: group});\n      this.onBubbleEvent('groupChange', 'Group Change', {data: group});\n    }, 0);\n    return false;\n  }\n\n\n  /**\n   * Checks/Unchecks all of the filtered options within a specific group\n   * @param  FieldOption option\n   * @returns boolean\n   */\n  onAllChange(checked: boolean): boolean {\n    if (!this.config.multiple) return false;\n    this.config.groups.map((group) => {\n      group.options.values.map((option: FieldItemOption) => {\n        option.selected = checked;\n      });\n      group.all = checked;\n      group.indeterminate = false;\n    });\n    setTimeout(() => {\n      this._updateSelectedOptions();\n    }, 0);\n    return false;\n  }\n\n  /**\n   * Allow the user to clear the search text\n   */\n  onClearSearch(): void {\n    this.ui.search.config.control.setValue('');\n  }\n\n\n  /**\n   * Update's the list of selected options inside of the config\n   * and emits a change event. This method will be called by the view\n   * whenever an option is selected\n   * @param MatSelectionListChange event\n   * @returns void\n   */\n  onOptionChange(event, option, group): void {\n    if (this.config.multiple) {\n      // option.selected = event.target.className.search( 'mat-pseudo-checkbox-checked' ) > -1 ? true : false;\n      option.selected = !option.selected;\n      if (!option.selected) this.config.all = false;\n      this._checkGroupState(option.selected, group);\n      this._updateSelectedOptions();\n\n      this.onBubbleEvent('optionChange', 'Option Change', {data: option});\n      setTimeout(() => {\n        this.onBubbleEvent('groupChange', 'Group Change', {data: group});\n      }, 0);\n    } else {\n      this.dom.active.optionId = option.value;\n      this.config.control.setValue(option.value);\n      this.config.strVal = option.name;\n      this.triggerOnChange(0);\n    }\n  }\n\n  /**\n   * Add on to set toggle special custom property\n   * @param event\n   * @param option\n   */\n  onOptionModeChange(event, option): void {\n    if (this.config.multiple) {\n      setTimeout(() => {\n        this.onBubbleEvent('optionModeChange', 'Option Mode Change', {data: option});\n      }, 0);\n    }\n  }\n\n  /**\n   * On link click stub\n   */\n  onLinkClick() {\n    console.log('LINK STUB: Link to Entity', this.config.control.value);\n  }\n\n  /**\n   * Allow user to open close a group section\n   * @param group\n   */\n  onToggleGroup(group: SelectListGroupInterface) {\n    if (this.config.groups.length > 1) {\n      group.open = !group.open;\n    }\n  }\n\n\n  /**\n   * Checks if the given option is in the list of selected options\n   * in the config. Used by the view to set the checkboxe's on the\n   * initial state of the dropdown\n   * @param  FieldOption option\n   * @returns boolean\n   */\n  isOptionSelected(option: FieldItemOption): boolean {\n    return option.selected;\n  }\n\n\n  isSearchValue() {\n    if (IsObject(this.ui.search.config, ['control']) && this.ui.search.config.control.value) {\n      return true;\n    }\n    return false;\n  }\n\n\n  /**\n   * Template logic to determine if a option is hidden\n   * @param option\n   */\n  isOptionHidden(group: SelectListGroupInterface, option: FieldItemOption): boolean {\n    if (!group.open && !(this.isSearchValue())) {\n      return true;\n    }\n    if (option.hidden) {\n      return true;\n    }\n    return false;\n  }\n\n\n  /**\n   * Template logic to determine if a option is active\n   * @param option\n   */\n  isOptionActive(option: FieldItemOption): boolean {\n    return this.dom.active.optionId && option.value === this.dom.active.optionId;\n  }\n\n\n  /**\n   * Template logic to determine if a option is disabled\n   * @param option\n   */\n  isOptionDisabled(option: FieldItemOption): boolean {\n    return this.asset.disabled[option.value];\n  }\n\n\n  ngOnDestroy() {\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  private _setConfigHooks() {\n    this.config.triggerOnChange = (value: string | number | null) => {\n      this.config.control.setValue(value);\n      this.config.control.markAsPristine();\n      this.config.message = '';\n      this.config.control.updateValueAndValidity();\n      this.onChange();\n    };\n\n\n    this.config.disableOption = (optionId: number) => {\n      if (IsDefined(optionId)) {\n        this.asset.disabled[optionId] = true;\n      }\n    };\n\n    this.config.enableOption = (optionId: number) => {\n      if (IsDefined(optionId)) {\n        delete this.asset.disabled[optionId];\n      }\n    };\n\n    this.config.setDisabled = (optionsIds: number[] = null) => {\n      this.dom.setTimeout(`set-disabled`, () => {\n        this.config.disabledIds = optionsIds;\n        this._setDisabledIds();\n      }, 0);\n    };\n\n    this.config.focusSearch = () => {\n      this.dom.setTimeout(`search-focus`, () => {\n        if (this.searchRef) {\n          this.searchRef.nativeElement.focus();\n          // this.onBubbleEvent( 'focus' );\n        }\n      }, 200);\n    };\n\n    this.config.setActive = (optionId) => {\n      this.dom.setTimeout(`set-disabled`, () => {\n        if (+optionId) {\n          this.dom.active.optionId = optionId;\n          delete this.asset.disabled[optionId];\n        }\n      }, 5);\n    };\n\n    this.config.setHeight = (height: number) => {\n      this.dom.setTimeout(`set-height`, () => {\n        if (+height) {\n          this.config.minHeight = height;\n          this.config.height = height;\n        }\n      }, 5);\n    };\n\n    this.config.clearSelected = () => {\n      this.dom.setTimeout(`clear-selected`, () => {\n        this.onAllChange(false);\n      }, 0);\n    };\n  }\n\n  /**\n   * Set the inital dom state of the component\n   * @private\n   */\n  private _setInitialDomState() {\n    this.dom.state.helper = false;\n    this.dom.state.filter = <boolean>undefined;\n    this.dom.state.allOverlayEnabled = this.config.allOverlayEnabled ? true : false;\n    this.dom.state.filterActivated = false;\n    this.dom.state.above = <number>undefined;\n    this.dom.state.below = <number>undefined;\n    this.dom.state.list = <any>undefined;\n    this.asset.filterActivated = false;\n    this.dom.state.checkboxPosition = this.config.checkboxPosition === 'left' ? 'before' : 'after';\n\n\n    this.ui.search.config = new InputConfig({\n      value: '',\n      helpText: this.config.helpText,\n      displayErrors: false,\n      label: this.config.label,\n      readonly: true,\n      maxlength: 255\n    });\n\n\n    this.ui.all.overlay = this.config.allOverlay ? new SwitchConfig({\n      value: this.config.allOverlayEnabled,\n      displayErrors: false,\n      label: this.config.allOverlayLabel,\n      disabled:this.config.disabled,\n      facade: true,\n      labelPosition: this.config.checkboxPosition === 'after' ? 'before' : 'after',\n      patch: {\n        path: '',\n        field: '',\n        callback: (core: CoreConfig, event: PopBaseEventInterface) => {\n          this.dom.setTimeout(`overlay-callback`, async () => {\n            this.dom.state.allOverlayEnabled = event.config.control.value === true;\n            if (IsCallableFunction(this.config.allOverlayCallback)) {\n              await this.config.allOverlayCallback(core, event);\n            }\n          }, 0);\n\n        }\n      }\n    }) : null;\n\n\n    if (!this.config.multiple) {\n      this.selectionListRef.selectedOptions = new SelectionModel<MatListOption>(false);\n    }\n\n    this.asset.onFocusValue = JSON.stringify(this.config.selectedOptions);\n\n    this._setDisabledIds();\n  }\n\n\n  /**\n   * Set the lead mapping options that are disabled;\n   * @private\n   */\n  private _setDisabledIds() {\n    this.asset.disabled = {};\n    if (IsArray(this.config.disabledIds)) {\n      this.config.disabledIds.map((optionId: number) => {\n        if (IsNumber(optionId)) {\n          this.asset.disabled[optionId] = true;\n        }\n      });\n    }\n  }\n\n\n  private _setInitialValue() {\n    if (!this.config.multiple && !this.dom.active.optionId) {\n      if (IsDefined(this.config.value, false)) {\n        this.dom.active.optionId = this.config.value;\n        if (!(IsDefined(this.config.control.value, false))) {\n          this.config.control.setValue(this.config.value);\n        }\n      }\n    } else {\n      if (!(IsArray(this.config.control.value))) {\n        this.config.control.setValue([]);\n      }\n    }\n  }\n\n\n  /**\n   * Observes the value changes to the search and triggers the filter of the options\n   * @returns void\n   */\n  private _setUpFilterObservable(): void {\n    this.ui.search.config.control.valueChanges\n      .pipe(\n        debounceTime(200)\n      ).subscribe((value: string) => {\n      this._filterOptionList(value);\n    });\n  }\n\n\n  /**\n   * Detects if the list of options should appear above or below the select input\n   * @param height\n   */\n  private _setListPosition(): void {\n    // this.config.minHeight = this.config.minHeight;\n    // this.config.minHeight = 200;\n    // this.config.height = this.config.defaultHeight;\n  }\n\n\n  /**\n   * Detects where the check all  box for a group should be unchecked, checked, or indeterminate\n   * @param checked\n   * @param group\n   */\n  private _checkGroupState(checked: boolean, group): void {\n    let indeterminate = false;\n    let all = true;\n    if (!checked) {\n      all = false;\n      group.options.values.some((option) => {\n        if (!option.hidden && option.selected) {\n          indeterminate = true;\n          return true;\n        }\n      });\n    } else {\n      group.options.values.some(option => {\n        if (!option.hidden && !option.selected) {\n          all = false;\n          indeterminate = true;\n          return true;\n        }\n      });\n    }\n    group.all = all;\n    group.indeterminate = indeterminate;\n  }\n\n\n  /**\n   * Finds only the options from the config's options that match\n   * the string passed in, and returns those options.\n   * Used as the filter when setting up the filteredOptions observable\n   * @param string value\n   * @returns FieldItemOption\n   */\n  private _filterOptionList(search: string): void {\n    this.config.groups.map((group: SelectListGroupInterface) => {\n      group.options.values.map((option) => {\n        option.hidden = ObjectContainsTagSearch(option, search) ? false : true;\n      });\n      group.selected = group.options.values.filter((option) => {\n        return !option.hidden && option.selected;\n      }).length;\n\n      group.visible = group.options.values.filter((option) => {\n        return !option.hidden;\n      }).length;\n\n      const checked = group.visible === group.selected;\n      this._checkGroupState(checked, group);\n      try {\n        this.cdr.detectChanges();\n      } catch (e) {\n      }\n    });\n  }\n\n\n  /**\n   * Update's the selection options in config\n   * by looping through all of the currently selected items\n   * in the selectionListRef.\n   * @param number id\n   */\n  private _updateSelectedOptions() {\n    this.dom.setTimeout('update-selected-options', () => {\n      const selected = this.selectionListRef.selectedOptions.selected;\n      let str: string[] = [];\n\n      this.config.selectedOptions = [];\n      for (const option of selected) {\n        str.push(option._text.nativeElement.innerText);\n        this.config.selectedOptions.push(option.value);\n      }\n      this.config.control.setValue(this.config.selectedOptions.slice());\n      str = str.sort();\n      this.config.strVal = str.join(', ');\n      this.triggerOnChange();\n    }, 50);\n  }\n\n\n  /**\n   * Set up the body of the api patch\n   * @param value\n   * @private\n   */\n  protected _getPatchBody(value?: number | string | boolean | null | Object): Entity {\n    const patch = <FieldItemPatchInterface>this.config.patch;\n    const body = <Entity>{};\n    if (this.config.all) {\n      if (typeof this.config.allValue !== 'undefined') {\n        body[this.config.patch.field] = this.config.allValue;\n      } else if (this.config.patchGroupFk) {\n        body[this.config.patch.field] = [];\n        this.config.groups.map((group: SelectFilterGroupInterface) => {\n          body[this.config.patch.field].push(`0:${group.groupFk}`);\n        });\n      } else {\n        body[this.config.patch.field] = this.config.selectedOptions.length ? this.config.selectedOptions : [];\n      }\n    } else {\n      if (this.config.multiple) {\n        if (!this.config.control.value.length && typeof this.config.emptyValue !== 'undefined') {\n          body[this.config.patch.field] = this.config.emptyValue;\n        } else if (this.config.patchGroupFk) {\n          body[this.config.patch.field] = [];\n          this.config.groups.map((group: SelectFilterGroupInterface) => {\n            if (group.all) {\n              body[this.config.patch.field].push(`0:${group.groupFk}`);\n            } else {\n              group.options.values.filter((option) => {\n                return option.selected;\n              }).map((option) => {\n                body[this.config.patch.field].push(`${option.value}:${group.groupFk}`);\n              });\n            }\n          });\n        } else {\n          body[this.config.patch.field] = this.config.control.value.length ? this.config.control.value : [];\n        }\n      } else {\n        value = typeof value !== 'undefined' ? value : this.config.control.value;\n        body[this.config.patch.field] = value;\n      }\n\n      if (patch && patch.metadata) {\n        for (const i in patch.metadata) {\n          if (!patch.metadata.hasOwnProperty(i)) continue;\n          body[i] = patch.metadata[i];\n        }\n      }\n\n    }\n\n\n    if (IsArray(body[this.config.patch.field], true)) body[this.config.patch.field].sort(function (a, b) {\n      return a - b;\n    });\n    if (this.config.patch.metadata) {\n      for (const i in this.config.patch.metadata) {\n        if (!this.config.patch.metadata.hasOwnProperty(i)) continue;\n        body[i] = this.config.patch.metadata[i];\n      }\n    }\n    if (this.config.patch.json) body[this.config.patch.field] = JSON.stringify(body[this.config.patch.field]);\n    return body;\n  }\n}\n","import { Component, ElementRef, Inject, Input, OnDestroy, OnInit } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport { SelectModalConfig } from '../select-modal-config.model';\nimport { FormControl } from '@angular/forms';\nimport { ValidationErrorMessages } from '../../../../../services/pop-validators';\nimport { PopFieldItemComponent } from '../../pop-field-item.component';\nimport { Dictionary } from '../../../../../pop-common.model';\n\n\n@Component({\n  selector: 'lib-pop-select-modal-dialog',\n  templateUrl: './pop-select-modal-dialog.component.html',\n  styleUrls: [ './pop-select-modal-dialog.component.scss' ]\n})\nexport class PopSelectModalDialogComponent extends PopFieldItemComponent implements OnInit, OnDestroy {\n  @Input() config: SelectModalConfig;\n\n  public name ='PopSelectModalDialogComponent';\n\n\n  constructor(\n    public el: ElementRef,\n    public dialog: MatDialogRef<PopSelectModalDialogComponent>,\n    @Inject(MAT_DIALOG_DATA) public data: Dictionary<any>,\n  ){\n    super();\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n\n        this.dom.height.outer = 570;\n        this.dom.height.inner = 520;\n        this.config.list.minHeight = 400;\n\n        return resolve(true);\n      });\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  confirm(){\n    // this.config.list.control.setValue('', { emitEvent: false });\n    this.dom.setTimeout(`dialog-confirm`,() => {\n      this.dialog.close(this.config.list);\n    }, 0);\n\n  }\n\n\n  cancel(){\n    // this.config.list.control.setValue('', { emitEvent: false });\n    this.dom.setTimeout(`dialog-close`, () => {\n      this.dialog.close(null);\n    }, 0);\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Protected Method )                                      *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n}\n","import { Component, EventEmitter, Input, OnDestroy, OnInit, Output } from '@angular/core';\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\nimport { SelectModalConfig } from './select-modal-config.model';\nimport { PopSelectModalDialogComponent } from './pop-select-modal-dialog/pop-select-modal-dialog.component';\nimport { InputConfig } from '../pop-input/input-config.model';\nimport { SelectListConfig } from '../pop-select-list/select-list-config.model';\nimport { SelectFilterGroupInterface } from '../pop-select-filter/select-filter-config.model';\nimport { Dictionary, Entity, PopBaseEventInterface, ServiceInjector } from '../../../../pop-common.model';\nimport { PopFieldItemComponent } from '../pop-field-item.component';\nimport { ArrayOnlyUnique, IsArray, IsCallableFunction, JsonCopy } from '../../../../pop-common-utility';\nimport { FormControl } from '@angular/forms';\nimport { ValidationErrorMessages } from '../../../../services/pop-validators';\n\n\n@Component( {\n  selector: 'lib-pop-select-modal',\n  templateUrl: './pop-select-modal.component.html',\n  styleUrls: [ './pop-select-modal.component.scss' ]\n} )\nexport class PopSelectModalComponent extends PopFieldItemComponent implements OnInit, OnDestroy {\n  @Input() config: SelectModalConfig;\n  @Output() events: EventEmitter<PopBaseEventInterface> = new EventEmitter();\n\n  public name = 'PopSelectModalComponent';\n\n  protected srv = {\n    dialog: <MatDialog>ServiceInjector.get( MatDialog ),\n  };\n\n  protected asset = {\n    original: undefined,\n    dialogRef: <MatDialogRef<PopSelectModalDialogComponent>>undefined\n  };\n\n  public ui = {\n    anchorInput: <InputConfig>undefined,\n    dialogRef: <MatDialogRef<PopSelectModalDialogComponent>>undefined\n  };\n\n\n  constructor(){\n    super();\n\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n\n\n        this.config.triggerOpen = ()=>{\n          this.dom.setTimeout(``, ()=>{\n            this.onChangeOptions();\n          }, 0);\n        };\n\n        this.ui.anchorInput = new InputConfig( {\n          label: this.config.label,\n          value: this.config.list.strVal,\n          selectMode: true,\n          maxlength: 2048,\n        } );\n\n        return resolve( true );\n      } );\n    };\n\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  onChangeOptions(){\n    this.dom.active.storedValue = this.config.list.strVal;\n    this.asset.dialogRef = this.srv.dialog.open( PopSelectModalDialogComponent, {\n      width: `450px`,\n      height: `600px`,\n      panelClass: 'sw-relative',\n      data: <Dictionary<any>>{}\n    } );\n\n    this.asset.original = {\n      all: JsonCopy(this.config.list.all),\n      selectedOptions: this.config.list.multiple ? JsonCopy(this.config.control.value): [],\n      groups: JsonCopy(this.config.list.groups),\n      strVal: JsonCopy(this.config.list.strVal),\n    };\n\n    this.asset.dialogRef.componentInstance.config = this.config;\n\n    this.dom.setSubscriber( `select-dialog`, this.asset.dialogRef.beforeClosed().subscribe( ( list: SelectListConfig | null ) => {\n      if( list && list.strVal !== this.dom.active.storedValue ){\n        this.config.control.setValue(list.control.value);\n        if(!list.multiple) list.value = list.control.value;\n\n        // console.log('list', list);\n        this.ui.anchorInput.triggerOnChange( list.strVal );\n        this.ui.anchorInput.message = '';\n        this.onChange();\n      }else{\n        this.config.list.all = this.asset.original.all;\n        this.config.list.selectedOptions = this.asset.original.selectedOptions;\n        this.config.list.value = this.asset.original.selectedOptions;\n        this.config.list.groups = this.asset.original.groups;\n        this.config.list.strVal = this.asset.original.strVal;\n      }\n      this.asset.dialogRef = null;\n    } ) );\n\n    this.dom.setTimeout( `search-focus`, () => {\n        if(IsCallableFunction(this.asset.dialogRef.componentInstance.config.list.focusSearch)) this.asset.dialogRef.componentInstance.config.list.focusSearch();\n    }, 200 );\n  }\n\n\n  // displaySuccess(): void{\n  //   this.ui.anchorInput.message = '';\n  //   this.ui.anchorInput.patch.success = true;\n  //   setTimeout(() => {\n  //     this.ui.anchorInput.patch.success = false;\n  //   }, 1000);\n  // }\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Protected Method )                                      *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  /**\n   * Set up the body of the api patch\n   * @param value\n   * @private\n   */\n  protected _getPatchBody( value?: number | string | boolean | null | Object ): Entity{\n    const body = <Entity>{};\n    if( !value ) value = this.config.list.multiple ? ( this.config.list.control.value.length ? this.config.list.control.value : [] ) : this.config.list.control.value;\n\n    if( this.config.list.all ){\n      if( typeof this.config.list.allValue !== 'undefined' ){\n        body[ this.config.patch.field ] = this.config.list.allValue;\n      }else if( this.config.list.patchGroupFk ){\n        body[ this.config.patch.field ] = [];\n        this.config.list.groups.map( ( group: SelectFilterGroupInterface ) => {\n          body[ this.config.patch.field ].push( `0:${group.groupFk}` );\n        } );\n      }else{\n        body[ this.config.patch.field ] = value;\n      }\n    }else{\n      if( !this.config.list.selectedOptions.length && typeof this.config.list.emptyValue !== 'undefined' ){\n        body[ this.config.patch.field ] = this.config.list.emptyValue;\n      }else if( this.config.list.patchGroupFk ){\n        body[ this.config.patch.field ] = [];\n        this.config.list.groups.map( ( group: SelectFilterGroupInterface ) => {\n          if( group.all ){\n            body[ this.config.patch.field ].push( `0:${group.groupFk}` );\n          }else{\n            group.options.values.filter( ( option ) => {\n              return option.selected;\n            } ).map( ( option ) => {\n              body[ this.config.patch.field ].push( `${option.value}:${group.groupFk}` );\n            } );\n          }\n        } );\n      }else{\n        body[ this.config.patch.field ] = value;\n      }\n    }\n    if( IsArray( body[ this.config.patch.field ], true ) ){\n      body[ this.config.patch.field ] = ArrayOnlyUnique( body[ this.config.patch.field ] );\n      body[ this.config.patch.field ].sort( function( a, b ){\n        return a - b;\n      } );\n    }\n\n    if( this.config.patch.metadata ){\n      for( const i in this.config.patch.metadata ){\n        if( !this.config.patch.metadata.hasOwnProperty( i ) ) continue;\n        body[ i ] = this.config.patch.metadata[ i ];\n      }\n    }\n    if( this.config.patch.json ) body[ this.config.patch.field ] = JSON.stringify( body[ this.config.patch.field ] );\n\n    return body;\n  }\n\n\n\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n}\n","import { Component, EventEmitter, Input, OnDestroy, OnInit, Output } from '@angular/core';\nimport { ButtonConfig } from './button-config.model';\nimport { PopBaseEventInterface } from '../../../../pop-common.model';\n\n\n@Component({\n  selector: 'lib-pop-button',\n  templateUrl: './pop-button.component.html',\n  styleUrls: [ './pop-button.component.scss' ],\n})\nexport class PopButtonComponent implements OnInit, OnDestroy {\n  @Input() config: ButtonConfig = new ButtonConfig();\n  @Output() events: EventEmitter<PopBaseEventInterface> = new EventEmitter();\n\n  public name ='PopButtonComponent';\n\n\n  ngOnInit(){\n  }\n\n\n  onClick(event){\n    this.emitInputEvent(this.config.event);\n  }\n\n\n  emitInputEvent(name, message: string = null): void{\n    if( this.config.bubble ) this.events.emit({ source: this.name, type: 'field', name: name, config: this.config, message: message });\n  }\n\n\n  ngOnDestroy(){\n  }\n}\n","import { ChangeDetectorRef, Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { PopFieldItemComponent } from '../pop-field-item.component';\nimport { MinMaxConfig } from './min-max.models';\nimport { PopBaseEventInterface } from '../../../../pop-common.model';\nimport { IsObjectThrowError } from '../../../../pop-common-utility';\n\n\n@Component({\n  selector: 'lib-pop-min-max',\n  templateUrl: './pop-min-max.component.html',\n  styleUrls: [ './pop-min-max.component.scss' ]\n})\nexport class PopMinMaxComponent extends PopFieldItemComponent implements OnInit, OnDestroy {\n  @Input() config: MinMaxConfig;\n\n  public name = 'PopMinMaxComponent';\n\n\n  constructor(\n    public el: ElementRef,\n    protected cdr: ChangeDetectorRef\n  ){\n    super();\n\n    this.asset.delay = 250;\n\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        this.config = IsObjectThrowError(this.config, true, `${this.name}:configure: - this.config`) ? this.config : null;\n\n        this.config.triggerOnChange = (value: string | number | null) => {\n          this._setControlValue();\n          this.cdr.detectChanges();\n          this.onChange(value, true);\n        };\n\n        resolve(true);\n      });\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  onIsMaxEvent(event: PopBaseEventInterface){\n    if( this._isFieldChange(event) ){\n      this.config.maxConfig.control.setValue(( event.config.control.value ? ( +this.config.control.value[this.config.minColumn] ? +this.config.control.value[this.config.minColumn] : +this.config.maxDefaultValue ) : null ));\n      this._triggerMaxChange();\n    }\n  }\n\n\n  onIsMinEvent(event: PopBaseEventInterface){\n    if( this._isFieldChange(event) ){\n      console.log('onIsMinEvent', event.config.control.value);\n      this.config.minConfig.control.setValue(( event.config.control.value ? +this.config.minDefaultValue : null ));\n    }\n  }\n\n\n  onMinEvent(event: PopBaseEventInterface){\n    // console.log('onMinEvent', event);\n    if( this._isFieldChange(event) ){\n      this._triggerMinChange();\n    }\n  }\n\n\n  onMaxEvent(event: PopBaseEventInterface){\n    // console.log('onMaxEvent', event);\n    if( this._isFieldChange(event) ){\n      this._triggerMaxChange();\n    }\n  }\n\n\n  onDecrementMin(){\n    const control = this.config.minConfig.control;\n    const newVal = +this.config.minConfig.control.value - 1;\n    if( ( newVal ) >= 1 ){\n      control.setValue(newVal);\n      this._triggerMinChange();\n    }\n  }\n\n\n  onIncrementMin(){\n    const control = this.config.minConfig.control;\n    const newVal = +this.config.minConfig.control.value + 1;\n    const maxVal = +this.config.maxConfig.control.value;\n    if( ( newVal ) <= maxVal ){\n      control.setValue(newVal);\n      this.dom.setTimeout('on-change', () => {\n        this._clearMessage();\n        this._setControlValue();\n        this.onChange(undefined, true);\n      }, this.asset.delay);\n    }\n  }\n\n\n  onDecrementMax(){\n    const control = this.config.maxConfig.control;\n    const newVal = +this.config.maxConfig.control.value - 1;\n    if( ( newVal ) >= 1 ){\n      control.setValue(newVal);\n      this._triggerMaxChange();\n    }\n  }\n\n\n  onIncrementMax(){\n    const control = this.config.maxConfig.control;\n    const newVal = +this.config.maxConfig.control.value + 1;\n    if( ( newVal ) <= this.config.limit ){\n      control.setValue(newVal);\n      this._triggerMaxChange();\n    }\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  private _triggerMinChange(){\n    this.dom.setTimeout('on-change', () => {\n      this._clearMessage();\n      this._setControlValue();\n      this.onChange(undefined, true);\n    }, this.asset.delay);\n  }\n\n\n  private _triggerMaxChange(){\n    this.dom.setTimeout('on-change', () => {\n      this._clearMessage();\n      this._updateMinOptions();\n      this._setControlValue();\n      this.onChange(undefined, true);\n    }, this.asset.delay);\n  }\n\n\n  private _updateMinOptions(){\n    // let minLimit = this.config.maxConfig.control.value;\n    // const minOptions = [];\n    // while( minLimit ){\n    //   minOptions.push({ value: minLimit, name: minLimit, sort: minLimit });\n    //   minLimit--;\n    // }\n    // this.config.minConfig.options = minOptions;\n  }\n\n\n  private _setControlValue(){\n    const maxValue = this.config.maxConfig.control.value;\n    let minValue = this.config.minConfig.control.value;\n    if( !this.config.allowNegative && minValue < 0 ){\n      minValue = 0;\n      this.config.minConfig.control.setValue(minValue);\n    }\n    if( maxValue && +minValue > +maxValue ){\n      minValue = maxValue;\n      this.config.minConfig.control.setValue(minValue);\n    }\n\n    const value = {};\n    value[ this.config.minColumn ] = ( minValue ? +minValue : minValue );\n    value[ this.config.maxColumn ] = ( maxValue ? +maxValue : maxValue );\n    this.config.control.value = value;\n  }\n}\n","import { FormControl, Validators } from '@angular/forms';\nimport { FieldItemOption, FieldItemPatchInterface } from '../../../../pop-common.model';\nimport { SetControl } from '../../../../pop-common-dom.models';\n\n\nexport interface SliderConfigInterface {\n  autoTicks?: false;\n  bubble?: boolean;               // fire events\n  column?: string;              // the entityId field name\n  control?: FormControl;          // The form control. If not passed one will be created.\n  disabled?: boolean;             // Mark as readonly.\n  displayErrors?: boolean;        // If Error messages should be displayed.\n  facade: boolean;\n  helpText?: string;            // On hover helper text.\n  id?: number | string;           // A number that will be included in the events so you know which field it came from.\n  label?: string;                 // Input label.\n  max?: number;\n  min?: number;\n  metadata?: object;              // Array of objects. To be passed back on the event emitter and included in a patch if desired.\n  noInitialValue?:boolean;                                // Set to true to always have an empty value on load\n  patch?: FieldItemPatchInterface;         // If field should be auto-patched.\n  session?: boolean;                // If field value change should be stored to core entity\n  sessionPath?: string;                // If session path if not stored on root entity\n  showTicks?: true;\n  step?: number;                 //  Set to true if you want options to be sorted in priority of sort_order, name\n  thumbLabel?: true;\n  tickInterval?: number;\n  validators?: Array<Validators>; // Array of Validators.\n  value?: boolean | number | string;   // Initial value.\n}\n\n\nexport class SliderConfig implements SetControl {\n\n  autoTicks = false;\n  bubble = false;\n  column = 'column';\n  control: FormControl;\n  displayErrors = true;\n  disabled = false;\n  facade = false;\n  helpText = '';\n  id;\n  label = '';\n  message = '';\n  max = 100;\n  min = 1;\n  metadata;\n  noInitialValue = false;\n  options: FieldItemOption[] = [];\n  patch: FieldItemPatchInterface;\n  session?: boolean;\n  sessionPath?: string;\n  step = 1;\n  showTooltip = false;\n  showTicks = true;\n  thumbLabel = true;\n  tickInterval = 1;\n  tooltip = '';\n  validators;\n  value: boolean | number | string = null;\n\n\n  constructor(params?: SliderConfigInterface){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n    if( !this.patch ) this.patch = { field: '', duration: 750, path: '', disabled: false, businessId: 0 };\n    if( this.patch.displayIndicator !== false ) this.patch.displayIndicator = true;\n    if( this.min > this.max ){\n      this.min = this.max;\n    }\n    if( this.noInitialValue ) this.value = '';\n    if( !this.control ) this.setControl();\n  }\n\n\n  setControl(){\n    this.control = ( this.disabled ? new FormControl({\n      value: this.value,\n      disabled: true\n    }) : new FormControl(this.value, ( this.validators ? this.validators : [] )) );\n  }\n}\n","import { Component, EventEmitter, Input, OnDestroy, OnInit, Output } from '@angular/core';\nimport { PopFieldItemComponent } from '../pop-field-item.component';\nimport { FormControl } from '@angular/forms';\nimport { SliderConfig } from './pop-slider.model';\nimport { PopBaseEventInterface } from '../../../../pop-common.model';\n\n\n@Component({\n  selector: 'lib-pop-slider',\n  templateUrl: './pop-slider.component.html',\n  styleUrls: [ './pop-slider.component.scss' ]\n})\nexport class PopSliderComponent extends PopFieldItemComponent implements OnInit, OnDestroy {\n  @Input() config: SliderConfig = new SliderConfig();\n  @Output() events: EventEmitter<PopBaseEventInterface> = new EventEmitter<PopBaseEventInterface>();\n  public name = 'PopSliderComponent';\n\n\n  constructor(){\n    super();\n    this.dom.state.helper = false;\n    this.dom.state.tooltip = false;\n  }\n\n\n  ngOnInit(): void{\n    super.ngOnInit();\n  }\n\n\n  /**\n   * On Change event\n   * @param value\n   * @param force\n   */\n  onChange(value?: any, force = false){\n    const control = <FormControl>this.config.control;\n    if( typeof value !== 'undefined' ){\n      control.setValue(value);\n      control.markAsDirty();\n      control.updateValueAndValidity();\n    }\n    if( this._isChangeValid() ){\n      value = typeof value !== 'undefined' ? value : this.config.control.value;\n      value = this._applyTransformation(value);\n      if( this.config.patch && this.config.patch && ( this.config.patch.path || this.config.facade ) ){\n        this._onPatch(value, false);\n      }else{\n        this.onBubbleEvent('onChange');\n      }\n    }\n  }\n\n  getSliderTickInterval(): number | 'auto'{\n    if( this.config.showTicks ){\n      return this.config.autoTicks ? 'auto' : this.config.tickInterval;\n    }\n\n    return 0;\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n}\n","import { ChangeDetectorRef, Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { PatternValidation, ValidationErrorMessages } from '../../../../services/pop-validators';\nimport { PopFieldItemComponent } from '../pop-field-item.component';\nimport { NumberConfig } from './number-config.model';\nimport { FieldItemPatchInterface } from '../../../../pop-common.model';\nimport { FormControl } from '@angular/forms';\n\n\n@Component({\n  selector: 'lib-pop-number',\n  templateUrl: './pop-number.component.html',\n  styleUrls: [ './pop-number.component.scss' ]\n})\nexport class PopNumberComponent extends PopFieldItemComponent implements OnInit, OnDestroy {\n  @Input() config: NumberConfig = new NumberConfig();\n  public name = 'PopNumberComponent';\n\n\n  constructor(\n    public el: ElementRef,\n    protected cdr: ChangeDetectorRef,\n  ){\n    super();\n\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n\n        this.config.triggerOnChange = (value: string | number | null, forcePatch = false) => {\n          this.cdr.detectChanges();\n          this.onChange(value, forcePatch);\n        };\n\n        this.config.triggerDirectPatch = (value: string | number | null) => {\n          this._onPatch(value, true);\n        };\n\n        return resolve(true);\n      });\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * Test\n   * @param event\n   */\n  onKeyUp(event): void{\n    if( event.code === 'Enter' ){\n      if( this.config.control.invalid ){\n        if( this.config.displayErrors ) this._setMessage(ValidationErrorMessages(this.config.control.errors));\n      }else{\n        if( this.config.patch && ( this.config.patch.path || this.config.facade ) ){\n          if( this.config.control.value !== this.asset.storedValue ){\n            if( this._isFieldPatchable() ){\n              this.onChange();\n            }\n          }\n        }\n      }\n    }else{\n      this.onBubbleEvent('onKeyUp');\n    }\n  }\n\n\n  /**\n   * Hook that is called right before a patch\n   */\n  protected _beforePatch(): Promise<boolean>{\n    return new Promise((resolve) => {\n      const patch = <FieldItemPatchInterface>this.config.patch;\n      const control = <FormControl>this.config.control;\n\n      this._checkValue();\n\n\n      control.disable();\n      patch.running = true;\n\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  private _checkValue(){\n    const control = <FormControl>this.config.control;\n    if( control.value > this.config.max ){\n      control.setValue(this.config.max, { emitEvent: false });\n    }else if( control.value < this.config.min ){\n      control.setValue(this.config.min, { emitEvent: false });\n    }\n  }\n\n}\n","import { Component, Input, OnInit } from '@angular/core';\n\n\n@Component({\n  selector: 'lib-pop-field-item-loader',\n  template: `\n    <mat-progress-bar\n      class=\"pop-field-item-loader\"\n      *ngIf=\"show\"\n      [style.height.px]=\"1\"\n      [mode]=\"'query'\"\n    >\n    </mat-progress-bar>\n  `,\n  styles: [ ':host { position: absolute; bottom:0; left: 0; right: 0 }' ]\n})\nexport class PopFieldItemLoaderComponent implements OnInit {\n  @Input() show = false;\n\n\n  ngOnInit(){\n  }\n\n}\n","import { Component, HostBinding, Input, OnInit } from '@angular/core';\n\n\n@Component({\n  selector: 'lib-pop-field-item-helper',\n  template: `\n    <span class=\"pop-field-item-help-text material-icons sw-pointer\"\n          *ngIf=\"!hidden && helpText\"\n          (mouseenter)=\"helper = true\"\n          (mouseleave)=\"helper = false\"\n          matTooltip=\"{{helpText}}\"\n          matTooltipPosition=\"above\">help_outline\n    </span>\n  `,\n  styles: [ `\n    .pop-field-item-help-text {\n      position: relative;\n      font-size: 1.5em;\n      color: var(--text-disabled);\n      z-index: 2;\n    }` ]\n})\nexport class PopFieldItemHelperComponent implements OnInit {\n  @Input() helpText;\n  @HostBinding('class.sw-hidden') @Input() hidden = false;\n  helper;\n\n\n  constructor(){\n    if( !this.helpText ) this.helpText = '';\n  }\n\n\n  ngOnInit(){\n  }\n\n}\n","import { Component, HostBinding, Input, OnInit } from '@angular/core';\n\n\n@Component({\n  selector: 'lib-pop-field-item-error',\n  template: `\n    <div class=\"sw-pointer pop-field-item-error\"\n         *ngIf=\"!hidden && message\"\n         matTooltipPosition=\"left\"\n         [matTooltip]=message>\n      <mat-icon color=\"warn\">error</mat-icon>\n    </div>\n  `,\n  styles: [ `.pop-field-item-error {\n    width: 20px;\n    height: 20px;\n    font-size: 1.1em;\n    z-index: 2;\n  }` ]\n})\nexport class PopFieldItemErrorComponent implements OnInit {\n  @Input() message: string;\n  @HostBinding('class.sw-hidden') @Input() hidden = false;\n  helper;\n\n\n  constructor(){\n    if( !this.message ) this.message = '';\n  }\n\n\n  ngOnInit(){\n  }\n\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { PopExtendComponent } from '../../../../pop-extend.component';\nimport { TextConfig } from './text-config.model';\n\n@Component({\n  selector: 'lib-pop-text',\n  templateUrl: './pop-text.component.html',\n  styleUrls: ['./pop-text.component.scss']\n})\nexport class PopTextComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() config: TextConfig;\n  public name = 'PopTextComponent';\n\n\n  constructor(\n    public el: ElementRef,\n  ){\n    super();\n\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { DateAdapter } from '@angular/material/core';\nimport { MatDateRangePicker, MatCalendar } from '@angular/material/datepicker';\nimport { PopFieldItemComponent } from '../../../../pop-field-item.component';\n\nconst datePresets = [\n  'Today',\n  'So Far This Week',\n  'This Week',\n  'Last Week',\n  'Previous Week',\n  'Rest of This Week',\n  'Next Week',\n  'This Month',\n  'Last Month',\n  'Next Month'\n] as const;\n\ntype DatePreset = typeof  datePresets[number];\n\n@Component({\n  selector: 'lib-date-range-panel',\n  templateUrl: 'date-range-panel.component.html',\n  styleUrls: ['date-range-panel.component.scss'],\n  // changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class DateRangePanelComponent<D> {\n  readonly presets = datePresets;\n\n  selected: DatePreset | '' = '';\n\n  constructor(\n    private dateAdapter: DateAdapter<D>,\n    private datePicker: MatDateRangePicker<D>,\n    private calendar: MatCalendar<D>,\n  ){\n\n\n  }\n\n  /**\n   * Apply the preset to Datepicker and Calendar\n   * @param datePreset: Example: This week\n   */\n\n  selectDatePreset(datePreset: DatePreset): void{\n    this.selected = datePreset;\n    const [start, end] = this.calculateDateRange(datePreset);\n\n\n    // @ts-ignore\n    // if only start is selected we need to set end to clear out start and end.\n    if((this.selected.start !== undefined && !this.calendar.selected.end) || (this.calendar.selected.start &&  !this.calendar.selected.end)){\n      this.datePicker.select(start);\n    }\n\n    this.datePicker.select(start);\n    this.datePicker.select(end);\n\n    this.calendar.activeDate = end;\n  }\n\n\n  /**\n   * Fix calulations to make monday first day of week instead of sunday\n   * @param today\n   * @private\n   */\n\n  private adjDayOfWeekToStartOnMonday(today:D):number{\n    let dayOfWeek = this.dateAdapter.getDayOfWeek(today);\n    dayOfWeek = dayOfWeek === 0 ? 6 : (dayOfWeek -1);\n    return dayOfWeek;\n  }\n\n  /**\n   * Calculate date range preset\n   * @param datePreset: Example: This week.\n   */\n\n  private calculateDateRange(datePreset: DatePreset): any{\n    const today = this.today;\n\n    switch(datePreset){\n      case 'Today':\n        return [today,today];\n      case 'So Far This Week':{\n         const dayOfWeek = this.adjDayOfWeekToStartOnMonday(today);\n         const start = this.dateAdapter.addCalendarDays(today, -(dayOfWeek));\n         return [start, today];\n      }\n      case 'This Week': return this.calculateWeek(today);\n      case 'Last Week': return this.calculateWeek(this.dateAdapter.addCalendarDays(today, -7));\n      case 'Previous Week': return this.calculateWeek(this.dateAdapter.addCalendarDays(today, -14));\n      case 'Rest of This Week': {\n        const dayOfWeek = this.adjDayOfWeekToStartOnMonday(today);\n        const end = this.dateAdapter.addCalendarDays(today, (6 - dayOfWeek));\n        return [today, end];\n      }\n      case 'Next Week':{\n        const dayOfWeek = this.adjDayOfWeekToStartOnMonday(today);\n        const start = this.dateAdapter.addCalendarDays(today, (7 - dayOfWeek));\n        return this.calculateWeek(start);\n      }\n      case 'This Month': return this.calculateMonth(today);\n      case 'Last Month': {\n        const thisDayLastMonth = this.dateAdapter.addCalendarMonths(today, -1);\n        return this.calculateMonth(thisDayLastMonth);\n      }\n      case 'Next Month': {\n        const thisDayLastMonth = this.dateAdapter.addCalendarMonths(today, 1);\n        return this.calculateMonth(thisDayLastMonth);\n      }\n    }\n  }\n\n\n  /**\n   * calculate start and end for week\n   * @param forDay\n   * @private\n   */\n\n  private calculateWeek(forDay: D): any {\n    const deltaStart =\n      this.dateAdapter.getFirstDayOfWeek() -\n      this.dateAdapter.getDayOfWeek(forDay);\n    const start = this.dateAdapter.addCalendarDays(forDay, deltaStart);\n    const end = this.dateAdapter.addCalendarDays(start, 6);\n    return [start, end];\n  }\n\n\n  /**\n   * Calculate start and end for month\n   * @param forDay\n   * @private\n   */\n\n  private calculateMonth(forDay: D): any {\n    const year = this.dateAdapter.getYear(forDay);\n    const month = this.dateAdapter.getMonth(forDay);\n    const start = this.dateAdapter.createDate(year, month, 1);\n    const end = this.dateAdapter.addCalendarDays(\n      start,\n      this.dateAdapter.getNumDaysInMonth(forDay) - 1\n    );\n    return [start, end];\n  }\n\n  /**\n   * Get Today\n   * @private\n   */\n\n  private get today(): D {\n    const today = this.dateAdapter.today();\n\n    if (today === null) {\n      throw new Error('date creation failed');\n    }\n    return today;\n  }\n\n\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { DatePickerConfig } from './datepicker-config.model';\nimport { PopFieldItemComponent } from '../pop-field-item.component';\nimport { FormControl } from '@angular/forms';\nimport { IsObject, IsUndefined } from '../../../../pop-common-utility';\nimport { PopDate } from '../../../../pop-common.model';\n\n\n@Component( {\n  selector: 'lib-pop-datepicker',\n  templateUrl: './pop-datepicker.component.html',\n  styleUrls: [ './pop-datepicker.component.scss' ]\n} )\nexport class PopDatePickerComponent extends PopFieldItemComponent implements OnInit, OnDestroy {\n  @Input() config: DatePickerConfig = new DatePickerConfig();\n  public name = 'PopDateComponent';\n\n\n  constructor(\n    public el: ElementRef,\n  ){\n    super();\n\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n\n        this.config.max = null;\n\n        this.config.triggerOnChange = ( value: string | number | null, forcePatch = false ) => {\n          this.dom.setTimeout( `config-trigger-change`, () => {\n            // this.cdr.detectChanges();\n            this.onChange( value, forcePatch );\n          }, 0 );\n        };\n\n\n        this.config.clearMessage = () => {\n          this.dom.setTimeout( `config-clear-message`, () => {\n            this.config.message = '';\n            this.config.control.markAsPristine();\n            this.config.control.markAsUntouched();\n            // this.cdr.detectChanges();\n          }, 0 );\n        };\n\n        // this.config.helpText = 'sdfsdafsadf';\n\n        this._setFilter();\n\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * On Change event\n   * @param value\n   * @param force\n   */\n  onChange( value?: any, force = false ){\n    if( value ){\n      value = PopDate.toIso( value );\n    }else{\n      value = null;\n    }\n    if( IsObject( this.config, [ 'control' ] ) ){\n      this.log.info( `onChange`, value )\n      const control = <FormControl>this.config.control;\n      if( typeof value !== 'undefined' ){\n        control.setValue( value );\n        control.markAsDirty();\n        control.updateValueAndValidity();\n      }\n      if( this._isChangeValid() ){\n        value = typeof value !== 'undefined' ? value : this.config.control.value;\n        value = this._applyTransformation( value );\n        if( this.config.patch && ( this.config.patch.path || this.config.facade ) ){\n          this._onPatch( value, force );\n        }else{\n          this.onBubbleEvent( 'onChange' );\n        }\n      }else{\n        // console.log( 'invalid change', this.config.control.value );\n      }\n    }\n  }\n\n\n  onResetForm(): void{\n    this.dom.setTimeout( `reset-form`, () => {\n      this.config.control.setValue( null, { emitEvent: true } );\n      this.config.control.updateValueAndValidity();\n      this.onChange();\n    }, 0 );\n\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  protected _setFilter(): void{\n    if( typeof this.config.filterPredicate === 'string' ){\n      switch( String( this.config.filterPredicate ).toLowerCase() ){\n        case 'weekday':\n          this.config.filterPredicate = ( d: Date ): boolean => {\n            const day = d.getDay();\n            // Prevent Saturday and Sunday from being selected.\n            return day !== 0 && day !== 6;\n          };\n          break;\n        case 'weekday':\n          this.config.filterPredicate = ( d: Date ): boolean => {\n            const day = d.getDay();\n            // Prevent Saturday and Sunday from being selected.\n            return day >= 1 && day <= 5;\n          };\n          break;\n        case 'monday':\n          this.config.filterPredicate = ( d: Date ): boolean => {\n            const day = d.getDay();\n            // monday\n            return day === 1;\n          };\n          break;\n        default:\n          this.config.filterPredicate = null;\n          break;\n      }\n    }\n  }\n\n}\n","// Angular\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { IConfig, NgxMaskModule } from 'ngx-mask';\n\n\n// Pop Common\nimport { MaterialModule } from '../../material/material.module';\nimport { PopIndicatorsModule } from '../pop-indicators/pop-indicators.module';\nimport { PopInputComponent } from './pop-input/pop-input.component';\nimport { PopSelectComponent } from './pop-select/pop-select.component';\nimport { PopSelectMultiComponent } from './pop-select-multi/pop-select-multi.component';\nimport { PopCheckboxComponent } from './pop-checkbox/pop-checkbox.component';\nimport { PopRadioComponent } from './pop-radio/pop-radio.component';\nimport { PopSwitchComponent } from './pop-switch/pop-switch.component';\nimport { PopTextareaComponent } from './pop-textarea/pop-textarea.component';\nimport { PopLabelComponent } from './pop-label/pop-label.component';\nimport { PopSelectFilterComponent } from './pop-select-filter/pop-select-filter.component';\nimport { ClickOutsideDirective } from './click-outside-directive';\nimport { PopDateComponent } from './pop-date/pop-date.component';\nimport { PopDateRangeComponent } from './pop-date/pop-date-range/pop-date-range.component';\nimport { DateRangeExpansionItemsComponent } from './pop-date/pop-date-range/expansion-items/date-range-expansion-items.component';\nimport { ExpansionItemsComponent } from './pop-date/datepicker-expansion-items/expansion-items.component';\nimport { CustomPanelComponent } from './pop-date/datepicker-expansion-items/custom-panel/custom-panel.component';\nimport { PopTimeComponent } from './pop-time/pop-time.component';\nimport { PopSelectListComponent } from './pop-select-list/pop-select-list.component';\nimport { PopSelectModalComponent } from './pop-select-modal/pop-select-modal.component';\nimport { PopSelectModalDialogComponent } from './pop-select-modal/pop-select-modal-dialog/pop-select-modal-dialog.component';\nimport { PopButtonComponent } from './pop-button/pop-button.component';\nimport { PopFieldItemComponent } from './pop-field-item.component';\nimport { PopMinMaxComponent } from './pop-min-max/pop-min-max.component';\nimport { PopSliderComponent } from './pop-slider/pop-slider.component';\nimport { PopNumberComponent } from './pop-number/pop-number.component';\nimport { PopFieldItemLoaderComponent } from './asset/pop-field-item-loader.component';\nimport { PopFieldItemHelperComponent } from './asset/pop-field-item-helper.component';\nimport { PopFieldItemErrorComponent } from './asset/pop-field-item-error.component';\nimport { PopTextComponent } from './pop-text/pop-text.component';\nimport { DateRangePanelComponent } from './pop-date/pop-date-range/expansion-items/custom-panel/date-range-panel.component';\nimport { PopDatePickerComponent } from './pop-datepicker/pop-datepicker.component';\n\nconst options: Partial<IConfig> | ( () => Partial<IConfig> ) = undefined;\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    ReactiveFormsModule,\n    PopIndicatorsModule,\n    MaterialModule,\n    FormsModule,\n    NgxMaskModule.forRoot(options)\n  ],\n  declarations: [\n    PopFieldItemLoaderComponent,\n    PopFieldItemHelperComponent,\n    PopFieldItemErrorComponent,\n    PopFieldItemComponent,\n    PopButtonComponent,\n    PopInputComponent,\n    PopNumberComponent,\n    PopSelectComponent,\n    PopCheckboxComponent,\n    PopSelectMultiComponent,\n    PopSelectFilterComponent,\n    PopSelectListComponent,\n    PopSelectModalComponent,\n    PopSelectModalDialogComponent,\n    PopRadioComponent,\n    PopSwitchComponent,\n    PopTextareaComponent,\n    PopLabelComponent,\n    PopDateComponent,\n    PopDateRangeComponent,\n    DateRangeExpansionItemsComponent,\n    ExpansionItemsComponent,\n    CustomPanelComponent,\n    DateRangePanelComponent,\n    PopTimeComponent,\n    ClickOutsideDirective,\n    PopButtonComponent,\n    PopMinMaxComponent,\n    PopSliderComponent,\n    PopTextComponent,\n    PopDatePickerComponent\n  ],\n  exports: [\n    PopFieldItemLoaderComponent,\n    PopFieldItemHelperComponent,\n    PopFieldItemErrorComponent,\n    PopFieldItemComponent,\n    PopButtonComponent,\n    PopInputComponent,\n    PopNumberComponent,\n    PopSelectComponent,\n    PopSelectMultiComponent,\n    PopSelectFilterComponent,\n    PopSelectListComponent,\n    PopSelectModalComponent,\n    PopSelectModalDialogComponent,\n    PopCheckboxComponent,\n    PopRadioComponent,\n    PopSwitchComponent,\n    PopTextareaComponent,\n    PopDateComponent,\n    PopDateRangeComponent,\n    DateRangeExpansionItemsComponent,\n    ExpansionItemsComponent,\n    DateRangePanelComponent,\n    CustomPanelComponent,\n    PopTimeComponent,\n    PopLabelComponent,\n    PopButtonComponent,\n    PopMinMaxComponent,\n    PopSliderComponent,\n    PopTextComponent,\n    PopDatePickerComponent\n  ],\n  providers: [],\n\n})\nexport class PopFieldItemModule {\n}\n","import { Component, ElementRef, HostBinding, Inject, Input, OnDestroy, OnInit } from '@angular/core';\nimport { PopExtendComponent } from '../../../pop-extend.component';\nimport { AppGlobalInterface, EntityFilterInterface, PopBaseEventInterface, PopBusiness, ServiceInjector } from '../../../pop-common.model';\nimport { IsObject, SetSessionSiteVar } from '../../../pop-common-utility';\nimport { PopCacFilterBarService } from './pop-cac-filter.service';\nimport { CacFilterBarConfig } from './pop-cac-filter.model';\n\n\n@Component({\n  selector: 'lib-pop-cac-filter',\n  template: `\n    <div class=\"pop-client-filter-container\">\n      <lib-pop-cac-filter-view *ngIf=\"ui.config?.active\" (events)=\"onBubbleEvent($event)\"></lib-pop-cac-filter-view>\n    </div>\n  `,\n  styles: [ `\n    .pop-client-filter-container {\n      display: flex;\n      flex-direction: column;\n      width: 100%;\n      box-sizing: border-box;\n      /*align-items: center;*/\n      padding: 0;\n    }\n  ` ]\n})\nexport class PopCacFilterComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @HostBinding('class.sw-hidden') @Input() hidden = false;\n  @Input() config: CacFilterBarConfig;\n\n  public name = 'PopCacFilterComponent';\n  // this represents the data to be filtered and given to the filter bar view.\n\n  protected srv: {\n    filter: PopCacFilterBarService,\n  } = {\n    filter: ServiceInjector.get(PopCacFilterBarService),\n  };\n\n  protected asset = {\n    filter: undefined // the current filter applied to all columns, this is the (finished product) that we want to be stored in the base service\n  };\n\n  public ui = {\n    config: <CacFilterBarConfig>undefined,\n    entities: <EntityFilterInterface[]>[]\n  };\n\n\n  constructor(\n    public el: ElementRef,\n    @Inject( 'APP_GLOBAL' ) private APP_GLOBAL: AppGlobalInterface,\n  ){\n    super();\n\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        this.ui.config = this.srv.filter.getConfig();\n        if(!(IsObject(this.ui.config))) this.ui.config = <CacFilterBarConfig>{};\n        this.srv.filter.register(el);\n        if( IsObject(PopBusiness, [ 'id' ]) && this.APP_GLOBAL.isFilterBar() ){\n          if( this.ui.config.active ){\n            this.asset.filter = this.srv.filter.getFilter();\n            this.srv.filter.setActive(!this.hidden);\n          }\n        }else{\n          this.hidden = true;\n          this.ui.config.active = false;\n          // this.srv.filter.setFilter({});\n\n        }\n\n        return resolve(true);\n      });\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * Event Emitter\n   */\n  public onBubbleEvent(event: PopBaseEventInterface){\n    if( event.type === 'filter' ){\n      switch( event.name ){\n        case 'apply':\n          this.srv.filter.setFilter(event.data);\n          break;\n        case 'clear':\n          this.srv.filter.setFilter({});\n          break;\n        case 'state':\n          if( event.model === 'open' ){\n            SetSessionSiteVar(`Business.${PopBusiness.id}.Filter.open`, event.data);\n            this.dom.setTimeout(`set-filter-height`, () => {\n              const height = this.srv.filter.getElHeight();\n              if(height){\n                SetSessionSiteVar(`Business.${PopBusiness.id}.Filter.height`, height);\n              }\n\n            }, 0);\n          }\n          break;\n        default:\n          break;\n      }\n    }\n    this.srv.filter.onChange(event);\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { PopExtendComponent } from '../../../../pop-extend.component';\nimport { Subject } from 'rxjs';\nimport { PopPipeService } from '../../../../services/pop-pipe.service';\nimport { Dictionary, PopBusiness, ServiceInjector } from '../../../../pop-common.model';\nimport { ArrayMapSetter, GetSessionSiteVar, IsArray, IsObject, JsonCopy, ObjectContainsTagSearch } from '../../../../pop-common-utility';\nimport { fadeInOut, slideInOut } from '../../../../pop-common-animations.model';\nimport { PopCacFilterBarService } from '../pop-cac-filter.service';\nimport { CacFilterBarConfig, CacFilterBarEntityConfig } from '../pop-cac-filter.model';\n\n\n@Component({\n  selector: 'lib-pop-cac-filter-view',\n  templateUrl: './pop-cac-filter-view.component.html',\n  styleUrls: [ './pop-cac-filter-view.component.scss' ],\n  animations: [ slideInOut, fadeInOut ]\n})\nexport class PopCacFilterViewComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() channel: Subject<CacFilterBarEntityConfig[]>; // this is the channel of that the parent sends down the configuration\n\n  public name = 'PopCacFilterViewComponent';\n\n  public ui = {\n    config: <CacFilterBarConfig>undefined,\n    entities: <CacFilterBarEntityConfig[]>undefined,// the configuration used to build the configs for the selects, subject emit's it every time the filters need to be updated,\n    map: <Dictionary<any>>{}\n  };\n\n  protected asset = {\n\n    filter: undefined // the current filter applied to all columns, this is the (finished product) that we want to be stored in the base service\n  };\n\n  protected srv: {\n    filter: PopCacFilterBarService,\n    pipe: PopPipeService,\n  } = {\n    filter: ServiceInjector.get(PopCacFilterBarService),\n    pipe: ServiceInjector.get(PopPipeService),\n  };\n\n\n  constructor(\n    public el: ElementRef,\n  ){\n    super();\n\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        this.asset.filter = this.srv.filter.getFilter();\n        this.ui.entities = this.srv.filter.getEntities();\n        this.ui.map.entities = ArrayMapSetter(this.ui.entities, 'internal_name');\n\n        this.ui.config = this.srv.filter.getConfig();\n        this._setDefaultState();\n        this._setEntityConfig();\n        this.dom.setSubscriber(`data-reset`, this.srv.filter.event.data.subscribe((caller: string) => {\n          this.dom.setTimeout(`data-reset`, () => {\n            if( IsArray(this.ui.entities, true) ){\n              const first = this.ui.entities[ 0 ];\n              first.options.map((option) => {\n                first.display[ option.id ] = true;\n              });\n              this._checkVisibleForAll(first);\n              this._updateEntitySelectedText(first);\n              this._onEntityFeedUpdate(first);\n            }\n            this.ui.entities.map((entity, index) => {\n              entity.totalOptions = entity.options.length;\n              entity.filter = Object.keys(entity.selected).filter((id) => entity.selected[ id ]);\n              entity.totalSelected = entity.filter.length;\n            });\n            this.onUpdateOptionsDisplay(0);\n          }, 0);\n        }));\n        this.dom.setTimeout('init', () => {\n          this.events.emit({ source: this.name, type: 'filter', name: 'init', data: this.asset.filter });\n        });\n        return resolve(true);\n      });\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * Trigger an entity column to apply search\n   * @param entity\n   */\n  onApplySearch(entity: CacFilterBarEntityConfig){\n    if( this.dom.state.searchDelay ) clearTimeout(this.dom.state.searchDelay);\n    this.dom.setTimeout(`search-delay`, () => {\n      entity.options.map((option) => {\n        entity.hidden[ option.id ] = ObjectContainsTagSearch(option, entity.search) ? false : true;\n      });\n      this._onEntityFeedUpdate(entity);\n      this._checkVisibleForAll(entity);\n    }, 200);\n  }\n\n\n  /**\n   * Checks/Unchecks all the options within an entity column\n   * @param entity\n   */\n  onCheckAll(entity: CacFilterBarEntityConfig){\n    if( IsObject(entity, true) && !entity.single ){\n      entity.options.filter((option) => !entity.hidden[ option.id ]).map((option) => {\n        entity.selected[ option.id ] = +entity.display[ option.id ] ? entity.checkAll : false;\n      });\n      entity.filter = Object.keys(entity.selected).filter((id) => entity.selected[ id ]);\n      entity.totalSelected = entity.filter.length;\n      entity.allSelected = entity.totalSelected === entity.totalAvailable;\n      this._checkVisibleForAll(entity);\n      this._updateEntitySelectedText(entity);\n      this.onUpdateOptionsDisplay(this.ui.map.entities[ entity.internal_name ]);\n      this.dom.state.filterNeedsApplied = true;\n    }\n  }\n\n\n  /**\n   * Handle when an option selection has changed\n   * Detects progmatic changes\n   * @param entity\n   */\n  onCheckboxChange(event, entity, id: number){\n    event.preventDefault();\n    entity.selected[ id ] = !entity.selected[ id ];\n    this.dom.setTimeout(`update-${entity.internal_name}-column`, () => {\n      entity.filter = Object.keys(entity.selected).filter((key) => entity.selected[ key ]);\n      entity.totalSelected = entity.filter.length;\n      entity.allSelected = entity.totalSelected === entity.totalAvailable;\n      this._checkVisibleForAll(entity);\n      this._updateEntitySelectedText(entity);\n      this.onUpdateOptionsDisplay(this.ui.map.entities[ entity.internal_name ]);\n      this.dom.state.filterNeedsApplied = true;\n    }, 100);\n  }\n\n\n  /**\n   * Handle when an option selection has changed\n   * Detects manual changes\n   * @param entity\n   */\n  onRadioChange(event, entity, id){\n    event.preventDefault();\n    if( entity.single ){\n      entity.checkAll = false;\n\n      entity.allSelected = false;\n      entity.indeterminate = false;\n      entity.filter = [ String(id) ];\n      entity.totalSelected = entity.filter.length;\n      entity.options.map((option) => {\n        if( +option.id !== +id ){\n          entity.selected[ option.id ] = false;\n        }else{\n          entity.selected[ option.id ] = true;\n          entity.selectedText = option.name;\n        }\n      });\n      this.onUpdateOptionsDisplay(this.ui.map.entities[ entity.internal_name ]);\n      this.dom.state.filterNeedsApplied = true;\n    }\n  }\n\n\n  /**\n   * The menu bar has been opened or closed\n   * @param entity\n   */\n  onToggleOpen(entity: string = null){\n\n    this.dom.state.open = !this.dom.state.open;\n    if( this.dom.state.open && entity ){\n      setTimeout(() => {\n        this.el.nativeElement.querySelector(`#${entity}-search-input`).focus();\n      });\n    }\n    this.events.emit({ source: this.name, type: 'filter', name: 'state', model: 'open', data: this.dom.state.open });\n  }\n\n\n  /**\n   * Event handler for the click of the reset button\n   * @returns void\n   */\n  resetFilter(): void{\n    this.asset.filter = {};\n    this.ui.entities.map((entity, index) => {\n      if( entity.single ){\n        this._setSingleEntityConfig(entity, index);\n      }else{\n        this._setMultipleEntityConfig(entity, index);\n      }\n    });\n    this.asset.filter = this._getCurrentFilter();\n    this.dom.state.filterNeedsApplied = false;\n    this.dom.state.currentFilterRelevant = false;\n\n    this.events.emit({ source: this.name, type: 'filter', name: 'clear', data: this.asset.filter });\n  }\n\n\n  /**\n   * Emits the apply filter event, called\n   * when the apply filter button is clicked.\n   * @returns void\n   */\n  applyFilter(): void{\n    if( !this.ui.config.invalid ){\n      this.asset.filter = this._getCurrentFilter();\n      this.dom.state.currentFilterRelevant = this._isCurrentFilterRelevant();\n      this.dom.state.filterNeedsApplied = false;\n      this.events.emit({ source: this.name, type: 'filter', name: 'apply', data: this.asset.filter });\n      // close on apply ?\n      if( this.ui.config.display !== 'static' ){\n        this.dom.state.open = false;\n        this.events.emit({ source: this.name, type: 'filter', name: 'state', model: 'open', data: this.dom.state.open });\n      }\n\n    }\n  }\n\n\n  trackByFn(index, item){\n    if( !item ) return null;\n    return item.id;\n  }\n\n\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  /**\n   * Determne if all the visible options are either all checked or unchecked\n   * @param entity\n   * @private\n   */\n  private _checkForIndeterminate(entity: CacFilterBarEntityConfig): void{\n    const selectedVisible = entity.options.filter((option) => !entity.hidden[ option.id ] && entity.display[ option.id ] && entity.selected[ option.id ]).length;\n    entity.indeterminate = selectedVisible && selectedVisible < entity.totalVisible ? true : false;\n  }\n\n\n  /**\n   * Trigger the column list to update with filtered options\n   * @param entity\n   */\n  private _onEntityFeedUpdate(entity: CacFilterBarEntityConfig){\n    const list = entity.options.filter(option => entity.display[ option.id ] && !entity.hidden[ option.id ]);\n    if( !entity.allSelected ){\n      list.sort((a, b) => {\n        if( entity.selected[ a.id ] && !entity.selected[ b.id ] ) return -1;\n        if( !entity.selected[ a.id ] && entity.selected[ b.id ] ) return 1;\n      });\n    }\n\n    entity.feed.next(list);\n  }\n\n\n  /**\n   * Updates the select configurations based on the filter bar configurations\n   * @returns void\n   */\n  private _setEntityConfig(): void{\n    this.dom.state.loading = true;\n    this.ui.entities.map((entity, index) => {\n\n      if( entity.single ){\n        this._setSingleEntityConfig(entity, index);\n      }else{\n        this._setMultipleEntityConfig(entity, index);\n      }\n      entity.totalAvailable = entity.options.length;\n      entity.totalOptions = entity.options.length;\n      entity.totalVisible = Object.keys(entity.display).filter((id) => entity.display[ id ] && !entity.hidden[ id ]).length;\n    });\n    this.dom.state.filterNeedsApplied = false;\n    this.dom.state.currentFilterRelevant = this._isCurrentFilterRelevant();\n    if( !this.dom.state.currentFilterRelevant ){\n      this.srv.filter.clearFilters();\n    }\n  }\n\n\n  /**\n   * Configure a radio enity config\n   * @param entity\n   * @param index\n   * @private\n   */\n  private _setSingleEntityConfig(entity: CacFilterBarEntityConfig, index: number){\n    let first = <any>entity.options[ 0 ];\n    entity.checkAll = false;\n    entity.indeterminate = false;\n    if( IsArray(this.asset.filter[ entity.internal_name ], true) ){\n      const asset = this.srv.filter.getAsset(entity.internal_name, +this.asset.filter[ entity.internal_name ][ 0 ]);\n      first = { id: this.asset.filter[ entity.internal_name ][ 0 ], name: IsObject(asset, [ 'name' ]) ? asset.name : 'Name' };\n    }\n    entity.filter = [ first.id ];\n    entity.selectedText = first.name;\n    entity.totalSelected = 1;\n\n    entity.hidden = {};\n\n    if( index === 0 ){\n      entity.options.map((option) => {\n        entity.display[ option.id ] = true;\n        entity.hidden[ option.id ] = false;\n        entity.selected[ option.id ] = false;\n      });\n      entity.selected[ first.id ] = true;\n    }else{\n      const prevIndex = +index - 1;\n      const prevEntity = this.ui.entities[ prevIndex ];\n      entity.options.map((option) => {\n        entity.display[ option.id ] = prevEntity.selected[ option.id ];\n        entity.hidden[ option.id ] = false;\n        entity.selected[ option.id ] = false;\n      });\n      entity.selected[ first.id ] = true;\n    }\n    this._onEntityFeedUpdate(entity);\n  }\n\n\n  /**\n   * Configure a multiple checkbox entity config\n   * @param entity\n   * @param index\n   * @private\n   */\n  private _setMultipleEntityConfig(entity: CacFilterBarEntityConfig, index: number){\n\n\n    const existingFilter = IsArray(this.asset.filter[ entity.internal_name ], true);\n    entity.filter = existingFilter ? JsonCopy(this.asset.filter[ entity.internal_name ]) : [];\n    // console.log('_setMultipleEntityConfig', entity.name, index, entity.filter.length);\n    if( entity.filter.length ){\n      entity.checkAll = false;\n      entity.indeterminate = true;\n    }else{\n      entity.checkAll = true;\n      entity.indeterminate = false;\n    }\n    entity.totalSelected = entity.checkAll ? entity.options.length : entity.filter.length;\n    if( index === 0 ){\n      entity.options.map((option) => {\n        entity.selected[ option.id ] = entity.checkAll ? true : entity.filter.includes(String(option.id));\n        entity.display[ option.id ] = true;\n        entity.hidden[ option.id ] = false;\n      });\n      entity.totalAvailable = entity.options.length;\n      entity.totalSelected = existingFilter ? entity.filter.length : entity.options.length;\n      entity.allSelected = entity.totalSelected === entity.totalAvailable;\n      this._checkVisibleForAll(entity);\n      this._updateEntitySelectedText(entity);\n    }else{\n      const prevIndex = +index - 1;\n      const prevEntity = this.ui.entities[ prevIndex ];\n      entity.options.map((option) => {\n        entity.selected[ option.id ] = entity.checkAll ? true : prevEntity.filter.includes(String(option[prevEntity.child_link]));\n        entity.display[ option.id ] = prevEntity.selected[ option[prevEntity.child_link]];\n        entity.hidden[ option.id ] = false;\n      });\n      entity.totalAvailable = entity.options.length;\n      entity.totalSelected = existingFilter ? entity.filter.length : entity.options.length;\n      entity.allSelected = entity.totalSelected === entity.totalAvailable;\n      this._checkVisibleForAll(entity);\n      this._updateEntitySelectedText(entity);\n    }\n    this._onEntityFeedUpdate(entity);\n  }\n\n\n  /**\n   * Cascade changes to all columns of the right of the column that made changes\n   * @param entityName\n   */\n  onUpdateOptionsDisplay(changedIndex){\n    this.dom.setTimeout(`options-update-${changedIndex}`, () => {\n      let invalid = false;\n      this.ui.entities.map((entity, index) => {\n\n        const inView = this.ui.config.view.includes(entity.internal_name);\n        if( !entity.totalSelected && inView ) invalid = true;\n        if( index > changedIndex ){\n          const prevIndex = +index - 1;\n          const prevEntity = this.ui.entities[ prevIndex ];\n          entity.options.map((option) => {\n            entity.display[ option.id ] = prevEntity.allSelected ? true : prevEntity.filter.includes(String(option[prevEntity.child_link]));\n            if( !entity.display[ option.id ] ){\n              entity.selected[ option.id ] = false;\n            }\n          });\n          this._onEntityFeedUpdate(entity);\n\n          if(!(inView)){\n            entity.options.filter((option) => !entity.hidden[ option.id ]).map((option) => {\n              entity.selected[ option.id ] = +entity.display[ option.id ] ? true : false;\n            });\n          }\n\n          entity.filter = Object.keys(entity.selected).filter((id) => entity.selected[ id ]);\n          entity.totalSelected = entity.filter.length;\n          if( !entity.totalSelected && this.ui.config.view.includes(entity.internal_name) ) invalid = true;\n          this._checkVisibleForAll(entity);\n          this._updateEntitySelectedText(entity);\n        }\n      });\n      this.ui.config.invalid = invalid;\n    }, 50);\n  }\n\n\n  private _setDefaultState(){\n    if( this.ui.config.display === 'static' ) this.dom.state.open = true;\n    this.dom.state = {\n      ...this.dom.state,\n      ...{\n        differentEntities: false,\n        searchDelay: undefined, // debounce for search inputs\n        loading: false,\n        open: false,\n        loaded: false,\n        currentFilterRelevant: false, // flags whether an any entityId filter is defined\n        filterNeedsApplied: false, // flags when user needs to apply changes to the filter\n      }\n    };\n\n    this.dom.state.open = IsObject(PopBusiness, [ 'id' ]) ? GetSessionSiteVar(`Business.${PopBusiness.id}.Filter.open`, false) : false;\n  }\n\n\n  /**\n   * Update the text appears in the header of each entity column\n   * @param entity\n   */\n  private _updateEntitySelectedText(entity: CacFilterBarEntityConfig){\n    entity.totalText = `${entity.totalAvailable} ${entity.name} available.`;\n    if( this.ui.map.entities[ entity.internal_name ] > 0 ){\n      const index = this.ui.map.entities[ entity.internal_name ];\n      let prevIndex = index - 1;\n      while( prevIndex > 0 ){\n        if( this.ui.entities[ prevIndex ].indeterminate ){\n          break;\n        }else{\n          prevIndex--;\n        }\n      }\n\n      if( entity.totalAvailable < entity.totalOptions ){\n        entity.totalText += `  ${entity.totalOptions - entity.totalAvailable} filtered out by ${this.ui.entities[ prevIndex ].name}.`;\n      }\n    }\n    entity.allSelected = entity.totalSelected === entity.totalAvailable;\n    if( entity.allSelected || !entity.totalSelected ){\n      entity.selectedText = entity.allSelected ? 'All' : 'None';\n    }else{\n      const selectedOptions = entity.options.filter((option) => {\n        return entity.display[ option.id ] && entity.selected[ option.id ];\n      }).map((option) => {\n        return option.name;\n      });\n      entity.selectedText = selectedOptions.length > 4 ? selectedOptions.slice(0, 4).join(', ') + `, ... ${selectedOptions.length - 4} more` : selectedOptions.join(', ');\n    }\n  }\n\n\n  /**\n   * Determine if all the visible options in an entity column have been selected\n   * @param entity\n   */\n  private _checkVisibleForAll(entity: CacFilterBarEntityConfig){\n    if( IsObject(entity, true) && !entity.single ){\n      let all = true;\n      const visible = Object.keys(entity.display).filter((id) => entity.display[ id ] && !entity.hidden[ id ]);\n      entity.totalVisible = visible.length;\n      if( visible.length ){\n        visible.some(id => {\n          if( !entity.selected[ id ] ){\n            all = false;\n            return true;\n          }\n        });\n      }else{\n        all = false;\n      }\n      entity.checkAll = all;\n      this._checkForIndeterminate(entity);\n\n    }\n  }\n\n\n  /**\n   * Create a payload for what the filter has generated\n   */\n  private _getCurrentFilter(){\n    const currentFilter = {};\n    this.ui.entities.map((entity) => {\n      if( !entity.allSelected ){\n        if( entity.filter.length ){\n          currentFilter[ entity.internal_name ] = entity.filter.filter((id)=>+id>0);\n          console.log(entity.internal_name , entity.filter);\n          this._onEntityFeedUpdate(entity);\n        }\n      }\n    });\n\n    console.log('currentFilter', currentFilter);\n\n    return currentFilter;\n  }\n\n\n  /**\n   * Determine which entity columns are having a filtering effect\n   */\n  private _isCurrentFilterRelevant(){\n    let relevant = false;\n    Object.keys(this.asset.filter).some((internal_name: string) => {\n      if( Array.isArray(this.asset.filter[ internal_name ]) && this.asset.filter[ internal_name ].length ){\n        if( internal_name in this.ui.map.entities && this.ui.entities[ this.ui.map.entities[ internal_name ] ].totalAvailable ){\n          if( this.asset.filter[ internal_name ].length < this.ui.entities[ this.ui.map.entities[ internal_name ] ].totalAvailable ){\n            relevant = true;\n            return true;\n          }\n        }\n      }\n    });\n    return relevant;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { PopFieldItemModule } from '../../base/pop-field-item/pop-field-item.module';\nimport { ScrollingModule } from '@angular/cdk/scrolling';\nimport { FormsModule } from '@angular/forms';\nimport { MatCheckboxModule } from '@angular/material/checkbox';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatDividerModule } from '@angular/material/divider';\nimport { MatProgressBarModule } from '@angular/material/progress-bar';\nimport { PopCacFilterComponent } from './pop-cac-filter.component';\nimport { PopCacFilterViewComponent } from './pop-cac-filter-view/pop-cac-filter-view.component';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule,\n    FormsModule,\n    ScrollingModule,\n    MatFormFieldModule,\n    MatInputModule,\n    MatCheckboxModule,\n    MatIconModule,\n    MatTooltipModule,\n    PopFieldItemModule,\n    MatProgressBarModule,\n    MatDividerModule\n  ],\n  declarations: [\n    PopCacFilterComponent,\n    PopCacFilterViewComponent,\n  ],\n  exports: [\n    PopCacFilterComponent,\n    PopCacFilterViewComponent,\n  ],\n  providers: [],\n\n})\nexport class PopCacFilterModule {\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { PopMenuModule } from './pop-menu/pop-menu.module';\nimport { PopTemplateComponent } from './pop-template.component';\nimport { PopLeftMenuModule } from './pop-left-menu/pop-left-menu.module';\nimport { PopWidgetBarModule } from './pop-widget-bar/pop-widget-bar.module';\nimport { RouterModule } from '@angular/router';\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\nimport { PopIndicatorsModule } from '../base/pop-indicators/pop-indicators.module';\nimport { PopTemplateAjaxLoaderComponent } from './assets/ajax-loader.component';\nimport { PopTemplateWelcomeComponent } from './assets/welcome.component';\nimport { PopTemplateGoodByeComponent } from './assets/goodbye.component';\nimport { PopTemplateErrorComponent } from './assets/error.component';\nimport { MatProgressBarModule } from '@angular/material/progress-bar';\nimport { PopTemplateBufferComponent } from './assets/buffer.component';\nimport { PopCacFilterModule } from './pop-cac-filter/pop-cac-filter.module';\n\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule,\n    HttpClientModule,\n    PopMenuModule,\n    PopLeftMenuModule,\n    PopWidgetBarModule,\n    PopCacFilterModule,\n    MatSnackBarModule,\n    MatProgressBarModule,\n    PopIndicatorsModule\n\n  ],\n  declarations: [\n    PopTemplateComponent,\n    PopTemplateAjaxLoaderComponent,\n    PopTemplateWelcomeComponent,\n    PopTemplateGoodByeComponent,\n    PopTemplateErrorComponent,\n    PopTemplateBufferComponent\n  ],\n  entryComponents: [\n    PopTemplateAjaxLoaderComponent,\n    PopTemplateWelcomeComponent,\n    PopTemplateGoodByeComponent,\n    PopTemplateErrorComponent,\n    PopTemplateBufferComponent\n  ],\n  exports: [\n    PopMenuModule,\n    PopLeftMenuModule,\n    PopWidgetBarModule,\n    PopTemplateComponent,\n    PopCacFilterModule\n  ]\n})\nexport class PopTemplateModule {\n\n}\n","import { Injectable, ViewContainerRef } from '@angular/core';\n\n\n// https://medium.com/angular-in-depth/here-is-how-to-get-viewcontainerref-before-viewchild-query-is-evaluated-f649e51315fb\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PopContainerService {\n  createListeners: any[] = [];\n  destroyListeners: any[] = [];\n\n  onContainerCreated = (fn) => {\n    this.createListeners.push(fn);\n  }\n\n  onContainerDestroyed = (fn) => {\n    this.destroyListeners.push(fn);\n  }\n\n  registerContainer = (container: ViewContainerRef) => {\n    this.createListeners.forEach((fn) => {\n      fn(container);\n    });\n  };\n\n  destroyContainer = (container: ViewContainerRef) => {\n    this.destroyListeners.forEach((fn) => {\n      fn(container);\n    });\n  }\n}\n","import { Directive, ViewContainerRef } from '@angular/core';\nimport { ServiceInjector } from '../pop-common.model';\nimport { PopContainerService } from '../services/pop-container.service';\n\n\n@Directive({\n  selector: '[libContainer]',\n})\n\nexport class LibContainerDirective {\n  private templateContainerRepo: PopContainerService;\n  constructor(\n    vc: ViewContainerRef,\n  ){\n    this.templateContainerRepo = ServiceInjector.get(PopContainerService);\n    this.templateContainerRepo.registerContainer(vc);\n  }\n}\n","import { Directive, ElementRef, HostListener, Input, Output, EventEmitter } from '@angular/core';\n\n@Directive({\n  selector: '[libOutsideClick]'\n})\nexport class LibOutsideClickDirective {\n\n  constructor(private _elementRef: ElementRef) { }\n\n  @Output('clickOutside') clickOutside: EventEmitter<any> = new EventEmitter();\n\n  @HostListener('document:click', ['$event.target']) onMouseEnter(targetElement) {\n    const clickedInside = this._elementRef.nativeElement.contains(targetElement);\n    if (!clickedInside) {\n      this.clickOutside.emit(null);\n    }\n  }\n\n\n}\n","import { Directive, Output, EventEmitter, HostListener} from \"@angular/core\";\n\n@Directive({ selector: '[libTrackCapsLock]' })\nexport class LibTrackCapsLockDirective {\n  @Output('capsLock') capsLock = new EventEmitter<Boolean>();\n\n  @HostListener('window:keydown', ['$event'])\n  onKeyDown(event: KeyboardEvent): void {\n    const capsOn = event.getModifierState && event.getModifierState('CapsLock');\n    this.capsLock.emit(capsOn);\n  }\n  @HostListener('window:keyup', ['$event'])\n  onKeyUp(event: KeyboardEvent): void {\n    const capsOn = event.getModifierState && event.getModifierState('CapsLock');\n    this.capsLock.emit(capsOn);\n  }\n}\n","import { ModuleWithProviders, NgModule } from '@angular/core';\nimport { PhonePipe } from './pipes/phone.pipe';\nimport { ToYesNoPipe } from './pipes/toYesNo.pipe';\nimport { TruncatePipe } from './pipes/truncate.pipe';\nimport { ToActiveOrArchivedPipe } from './pipes/toActiveOrArchived.pipe';\nimport { PopTemplateModule } from './modules/app/pop-template.module';\nimport { LabelPipe } from './pipes/label.pipe';\nimport { LibContainerDirective } from './directives/lib-container.directive';\nimport { LibOutsideClickDirective } from './directives/lib-outside-click.directive';\nimport { LibTrackCapsLockDirective } from './directives/lib-track-caps-lock.directive';\n\n\n@NgModule({\n  imports: [\n    PopTemplateModule\n  ],\n  declarations: [\n    LabelPipe,\n    PhonePipe,\n    ToYesNoPipe,\n    ToActiveOrArchivedPipe,\n    TruncatePipe,\n    LibOutsideClickDirective,\n    LibContainerDirective,\n    LibTrackCapsLockDirective,\n  ],\n  exports: [\n    PopTemplateModule,\n    LabelPipe,\n    PhonePipe,\n    ToYesNoPipe,\n    ToActiveOrArchivedPipe,\n    TruncatePipe,\n    LibOutsideClickDirective,\n    LibContainerDirective,\n    LibTrackCapsLockDirective,\n  ],\n})\nexport class PopCommonModule {\n  static forRoot(environment?: any): ModuleWithProviders<PopCommonModule>{\n    return {\n      ngModule: PopCommonModule,\n      providers: [\n        {\n          provide: 'env',\n          useValue: environment\n        },\n      ]\n    };\n  }\n}\n","import {Injectable} from '@angular/core';\nimport {PopBusiness, PopLog, PopPipe, PopUser} from '../pop-common.model';\nimport * as spacetime from 'spacetime/builds/spacetime.min';\nimport {IsArray, IsNumber, IsObject, IsString} from '../pop-common-utility';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PopDatetimeService {\n\n  private timezone: string | number = 'America/Denver';\n  private hourFormat = 12;\n  private dateFormat = `dd/mm/yyyy`;\n\n  protected srv: {\n    spacetime: typeof spacetime\n  } = {\n    spacetime: spacetime\n  };\n\n\n  constructor() {\n  }\n\n\n  transform(value, format: string = 'date', seconds = true) {\n    return this._display({timestamp: value, format: format, seconds: seconds});\n  }\n\n\n  toIso(timestamp) {\n    const dt = this.srv.spacetime(timestamp, this.timezone);\n    return dt.format('iso');\n  }\n\n  toIsoShort(timestamp) {\n    const dt = this.srv.spacetime(timestamp, this.timezone);\n    return dt.format('iso-short');\n  }\n\n\n  getTommorow(date) {\n    return this.srv.spacetime(date).add(1, 'day').format('iso');\n  }\n\n\n  add(date: any, direction: number = 1, unit = 'day') {\n    return this.srv.spacetime(date).add(direction, unit).format('iso');\n  }\n\n\n  subtract(date: any, direction: number = 1, unit = 'day') {\n    return this.srv.spacetime(date).subtract(direction, unit).format('iso');\n  }\n\n\n  getYesterday(date) {\n\n    return this.srv.spacetime(date).subtract(1, 'day').format('iso');\n  }\n\n\n  getLatest(dates: any[]) {\n    let latest = null;\n    if (IsArray(dates, true)) {\n      latest = dates.reduce((a, b) => (this.toIso(a) > this.toIso(b) ? a : b));\n      return this.toIso(latest);\n    }\n  }\n\n\n  getEarliest(dates: any[]) {\n    let latest = null;\n    if (IsArray(dates, true)) {\n      latest = dates.reduce((a, b) => (this.toIso(a) < this.toIso(b) ? a : b));\n      return this.toIso(latest);\n    }\n  }\n\n\n  setCurrentBusinessUnitSettings() {\n    if (IsObject(PopBusiness, true)) {\n      if (IsNumber(PopBusiness.hour_format, true)) this.hourFormat = +PopBusiness.hour_format;\n      if (IsString(PopBusiness.date_format, true)) this.dateFormat = PopBusiness.date_format;\n      if (!(IsNumber(PopBusiness.timezone)) && IsString(PopBusiness.timezone, true)) this.timezone = PopBusiness.timezone;\n    }\n    if (IsObject(PopUser, ['setting'])) {\n      if (IsNumber(PopUser.setting.hour_format, true)) this.hourFormat = +PopUser.setting.hour_format;\n      if (IsString(PopUser.setting.date_format, true)) this.dateFormat = PopUser.setting.date_format;\n\n      if (IsNumber(PopUser.setting.timezone)) {\n        const transformToName = PopPipe.transform(PopUser.setting.timezone, {type: 'timezone'});\n        if (IsString(transformToName, true)) {\n          this.timezone = transformToName;\n        }\n      } else {\n        if (!(IsNumber(PopUser.setting.timezone)) && IsString(PopUser.setting.timezone, true)) this.timezone = PopUser.setting.timezone;\n      }\n\n    }\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  /**\n   * Formats a datetime string to the correct datetime according to the timezone and formats for the user.\n   *  - format enum: [date, time, datetime]\n   */\n  private _display(datetime: { timestamp: string, format?: string, seconds?: boolean }) {\n    const hourFormat = (this.hourFormat == 24 ? 'HH:mm' + (datetime.seconds ? ':ss' : '') : 'h:mm' + (datetime.seconds ? ':ss' : '') + ' a');\n    let dt = this.srv.spacetime(datetime.timestamp);\n    if (IsString(this.timezone, true) && String(this.timezone).length > 10) {\n      dt = dt.goto(this.timezone);\n    }\n\n\n    switch (datetime.format) {\n      case 'datetime':\n        return dt.format(this._displayFormat()) + (['full', 'full-short'].includes(this.dateFormat) ? ', ' : ' ') + dt.unixFmt(hourFormat);\n      case 'date':\n        return dt.format(this._displayFormat());\n      case 'time':\n        return dt.unixFmt(hourFormat);\n      default:\n        return dt.format(this._displayFormat() + ' ' + hourFormat);\n    }\n  }\n\n\n  private _displayFormat() {\n    switch (this.dateFormat) {\n      case 'yyyymmdd':\n        return '{year}{month-pad}{date-pad}';\n      case 'yyyy-mm-dd':\n        return 'iso-short';\n      case 'dd/mm/yyyy':\n        return 'numeric-uk';\n      case 'mm/dd/yyyy':\n        return 'numeric-us';\n      case 'yyyy/mm/dd':\n        return '{year}/{month-pad}/{date-pad}';\n      case 'dd-mm-yyyy':\n        return '{date-pad}-{month-pad}-{year}';\n      case 'yyyy/dd/mm':\n        return '{year}/{date-pad}/{month-pad}';\n      case 'yyyy-dd-mm':\n        return '{year}-{date-pad}-{month-pad}';\n      case 'mm-dd-yyyy':\n        return '{month-pad}-{date-pad}-{year}';\n      case 'full':\n        return '{month} {date-pad}, {year}';\n      case 'full-short':\n        return '{month-short} {date-pad}, {year}';\n      default:\n        return 'iso-short';\n    }\n  }\n\n}\n","export const environment = {\n    production: false,\n    // apiBaseUrl: ' http://127.0.0.1:8899',\n    apiBaseUrl: ' https://api.dev.popcx.com',\n    baseHref: '/lib/',\n    username: 'josh',\n    password: 'Secret@2020',\n    debug: true,\n    debugLevel: 1,\n    debugCache: 0,\n    debugComponents: 'PopEntityListComponent',\n    debugTypes: ['warn'],\n    entities:true\n}","import { Inject, Injectable } from '@angular/core';\nimport { PopBaseEventInterface } from '../pop-common.model';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PopLogService {\n\n  public name = 'PopLogService';\n\n\n  constructor(\n    @Inject('env') public env?\n  ){\n    if( this.enabled('init', this.name) ) console.log(this.message(`${this.name}:init`), this.color('init'));\n  }\n\n\n  message(message: string){\n    return `%c${message}`;\n  }\n\n\n  color(type: string){\n    let color = 'aqua';\n    switch( type ){\n      case 'warn':\n        color = 'orange';\n        break;\n      case 'force':\n      case 'error':\n      case 'destroy':\n        color = 'red';\n        break;\n      case 'info':\n        color = 'aqua';\n        break;\n      case 'event':\n        color = 'yellow';\n        break;\n      case 'onSession':\n      case 'event-trigger':\n        color = 'gold';\n        break;\n      case 'cache-in':\n        color = 'green';\n        break;\n      case 'cache-out':\n        color = 'darkgreen';\n        break;\n      case 'dom':\n        color = 'brown';\n        break;\n      case 'debug':\n        color = 'pink';\n        break;\n      case 'api':\n        color = 'darkgreen';\n        break;\n      case 'config':\n        color = 'pink';\n        break;\n      case 'theme':\n        color = 'purple';\n        break;\n      default:\n        color = 'aqua';\n        break;\n    }\n    return `color: ${color}`;\n  }\n\n\n  enabled(type: string = '', component: string = null){\n    if( this.env.debug ){\n      if( type && Array.isArray(this.env.debugTypes) ){\n        if( this.env.debugTypes.includes(type) ) return true;\n      }\n      if( typeof this.env.debugLevel === 'number' ){\n        if( [ 'error', 'onSession' ].includes(type) && this.env.debug >= 1 ){\n          return true;\n        }\n        if( [ 'warning', 'info' ].includes(type) && this.env.debug >= 2 ){\n          return true;\n        }\n        if( [ 'events' ].includes(type) && this.env.debug >= 2 ){\n          return true;\n        }\n      }\n      if( component && typeof this.env.debugComponents === 'string' ){\n        return this.env.debugComponents.search(component) > -1;\n      }\n    }\n    return false;\n  }\n\n\n  init(componentName: string, message: string, data: any = '', force = false){\n    const type = 'init';\n    if( this.enabled(type, componentName) || force ) console.log(this.message(`${componentName}:${message}`), this.color(( force ? 'force' : type )), data);\n  }\n\n  debug(componentName: string, message: string, data: any = '', force = false){\n    const type = 'debug';\n    if( this.enabled(type, componentName) || force ) console.log(this.message(`${componentName}:${message}`), this.color(( force ? 'force' : type )), data);\n  }\n\n\n  cache(componentName: string, message: string,  set = true, force = false){\n    let type = 'cache';\n    if( this.enabled(type, componentName) || force ){\n      type = set ? 'cache-in' : 'cache-out';\n      console.log(this.message(`${componentName}:${message}`), this.color(( force ? 'force' : type )));\n    }\n  }\n\n\n  warn(componentName: string, message: string, data: any = '', force = false){\n    const type = 'warn';\n    if( this.enabled(type, componentName) || force ) console.log(this.message(`${componentName}:${message}`), this.color(( force ? 'force' : type )), data);\n  }\n\n\n  info(componentName: string, message: string, data: any = '', force = false){\n    const type = 'info';\n    if( this.enabled(type, componentName) || force ) console.log(this.message(`${componentName}:${message}`), this.color(( force ? 'force' : type )), data);\n  }\n\n\n  theme(componentName: string, message: string, data: any = '', force = false){\n    const type = 'theme';\n    if( this.enabled(type, componentName) || force ) console.log(this.message(`${componentName}:${message}`), this.color(( force ? 'force' : type )), data);\n  }\n\n\n  event(componentName: string, message: string, event: PopBaseEventInterface, force = false){\n    const type = 'event';\n    if( this.enabled(type, componentName) || force ) console.log(this.message(`${componentName}:${message}`), this.color(( force ? 'force' : type )), event);\n  }\n\n\n  error(componentName: string, message: string, data: any = '', force = false){\n    const type = 'error';\n    if( this.enabled(type, componentName) || force ){\n      console.log(this.message(`${componentName}:${message}`), this.color(( force ? 'force' : type )), data);\n      // throw new Error('message');\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PopDisplayService {\n  private readonly aliases;\n\n\n  constructor(){\n    this.aliases = [];\n  }\n\n\n  /**\n   * Provides the actual name we want displayed to the user.\n   * field - The field name coming from the DB.\n   * displayInfo - Either a string or object. If object then will look for property display or label. Takes aliases into account. IE: account:ID\n   * set - If passed will look in the displayInfo object for this field before falling back to the display or label field.\n   * returns {string}\n   */\n  public set(text: string, displayInfo: any = '', displayField: string = ''){\n\n    let displayString = '';\n\n    if( displayInfo && typeof displayInfo === 'string' ){\n      displayString = displayInfo;\n    }else if( displayInfo && displayField && displayInfo[ displayField ] ){\n      displayString = displayInfo[ displayField ];\n    }else if( displayInfo && displayInfo.display ){\n      displayString = displayInfo.display;\n    }else if( displayInfo && displayInfo.label ){\n      displayString = displayInfo.label;\n    }\n\n    // Check for aliases.\n    if( displayString ){\n      if( displayString.includes('alias:') ){\n        const aliasArray = displayString.split(':');\n        aliasArray.shift();\n        const alias = this.alias(aliasArray.shift()).toLocaleLowerCase();\n        displayString = alias.charAt(0).toUpperCase() + alias.slice(1) + ' ';\n        let tempString = '';\n        while( tempString = aliasArray.shift() ) displayString += ' ' + tempString;\n      }\n    }else{\n      // Format the string base on the field name.\n      const words = text.split('_');\n      for( const word of words ){\n        if( word === 'id' || word === 'fk' ){\n          displayString += 'ID ';\n        }else{\n          displayString += word.charAt(0).toUpperCase() + word.slice(1) + ' ';\n        }\n      }\n    }\n\n    return displayString.trim();\n  }\n\n\n  public alias(entity){\n    return ( this.aliases[ entity ] ? this.aliases[ entity ] : entity );\n  }\n\n}\n\n","import { HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';\nimport { Inject, Injectable, isDevMode } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { ConvertObjectToUri, IsArray, IsObject, IsString } from '../pop-common-utility';\nimport { PopBusiness } from '../pop-common.model';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PopRequestService {\n\n  private readonly offsetLimit = 2000;\n  private baseUrl: string;\n\n\n  constructor(\n    private http: HttpClient,\n    @Inject('env') private env?,\n  ){\n    // if( +this.env.offsetLimit ) this.offsetLimit = this.env.offsetLimit;\n    if( !this.baseUrl ){\n      const envUrl = isDevMode() && this.env && this.env.apiBaseUrl ? this.env.apiBaseUrl : null;\n      this.baseUrl = ( envUrl ? envUrl : `${ window.location.protocol }//api.${ window.location.host }` );\n    }\n  }\n\n\n  public getHeaders(version, businessId = 0){\n    return {\n      'X-Popcx-Business': +businessId ? String(businessId): PopBusiness ? String(PopBusiness.id) : String(0),\n      'Content-Type': 'application/json',\n      'Api-Version': ( typeof version !== 'undefined' ? version : 1 ).toString()\n    };\n  }\n\n\n  public getBaseUrl(){\n    return this.baseUrl.slice();\n  }\n\n\n  public setBaseUrl(baseUrl: string): void{\n    if( IsString(baseUrl, true) ){\n      this.baseUrl = baseUrl;\n    }\n  }\n\n\n  public getOffsetLimit(){\n    return this.offsetLimit;\n  }\n\n\n  doGet(url: string, params: object = {}, version: number = 1, ignore401: boolean = false, businessId = 0): Observable<any>{\n    const options = {\n      headers: new HttpHeaders(this.getHeaders(version, businessId)),\n      params: this._setParams(params)\n    };\n    if( ignore401 ) options.headers.set('SkipResponse401Interceptor', '1');\n\n    if( url[ 0 ] !== '/' ) url = `/${url}`;\n\n    return this.http.get<any>(`${ this.getBaseUrl() }${ url }`, options);\n  }\n\n\n  doDelete(url: string, body: object = null, version: number = 1, ignore401: boolean = null, businessId = 0): Observable<any>{\n    const options = {\n      headers: new HttpHeaders(this.getHeaders(version, businessId)),\n      body: body,\n    };\n    if( ignore401 ) options.headers.set('SkipResponse401Interceptor', '1');\n    if( url[ 0 ] !== '/' ) url = `/${url}`;\n    // if( data ) options.params = new HttpParams(data);\n    return this.http.delete<any>(`${ this.getBaseUrl() }${ url }`, options);\n  }\n\n\n  doPatch(url: string, data: object, version: number = 1, ignore401: boolean = false, businessId = 0): Observable<any>{\n    const headers = new HttpHeaders(this.getHeaders(version, businessId));\n    if( ignore401 ) headers.set('SkipResponse401Interceptor', '1');\n    if( url[ 0 ] !== '/' ) url = `/${url}`;\n    return this.http.patch(this.getBaseUrl() + url, JSON.stringify(data), { headers: headers });\n  }\n\n\n  doPost(url: string, data: object, version: number = 1, ignore401: boolean = false, businessId = 0): Observable<any>{\n    const headers = new HttpHeaders(this.getHeaders(version, businessId));\n    if( ignore401 ) headers.set('SkipResponse401Interceptor', '1');\n    if( url[ 0 ] !== '/' ) url = `/${url}`;\n    return this.http.post<any>(`${ this.getBaseUrl() }${ url }`, JSON.stringify(data), { headers: headers });\n  }\n\n\n  transform(value: string | number, transformation: any){\n    if( IsArray(transformation, true) ){\n      transformation.map((transKey) => {\n        // value = this.commonRepo.transform(value, transKey);\n      });\n    }else if( IsString(transformation, true) ){\n      // value = this.commonRepo.transform(value, transformation);\n    }\n    return value;\n  }\n\n\n  private _setParams(body){\n    let params: HttpParams = new HttpParams();\n    for( const key of Object.keys(body) ){\n      if( body[ key ] ){\n        if( body[ key ] instanceof Array ){\n          body[ key ].forEach((item) => {\n            params = params.append(`${key.toString()}[]`, item);\n          });\n        }else{\n          params = params.append(key.toString(), body[ key ]);\n        }\n      }\n    }\n    return params;\n  }\n}\n\n","import { Subject } from 'rxjs';\nimport { EventEmitter } from '@angular/core';\nimport { PopBaseEventInterface, PopPipe } from '../../../pop-common.model';\nimport { TitleCase } from '../../../pop-common-utility';\n\n\nexport interface PopContextMenuConfigInterface {\n  // defaultOptions: string[];\n  options?: PopContextMenuOption[];\n  newTabUrl?: string;\n}\n\n\nexport class PopContextMenuConfig {\n  x: number;\n  y: number;\n  toggle: Subject<boolean>;\n  options: PopContextMenuOption[];\n  newTabUrl?: string;\n  emitter: EventEmitter<PopBaseEventInterface> = new EventEmitter<PopBaseEventInterface>();\n\n\n  constructor(config?: PopContextMenuConfigInterface){\n    this.toggle = new Subject<boolean>();\n    this.x = 0;\n    this.y = 0;\n    this.options = [];\n    this.newTabUrl = '';\n    if( config != undefined && config.newTabUrl ){\n      const newTabOption: PopContextMenuOption = {\n        label: 'Open Link in new tab',\n        type: 'new_tab',\n        url: config.newTabUrl,\n      };\n      this.options.push(newTabOption);\n    }\n    if( config != undefined && config.options !== undefined && config.options.length != 0 ){\n      for( const option of config.options ) this.options.push(option);\n    }\n  }\n\n\n  public addNewTabOption(url: string){\n    const newTabOption: PopContextMenuOption = {\n      label: 'Open Link in new tab',\n      type: 'new_tab',\n      url: url,\n    };\n    this.options.push(newTabOption);\n  }\n\n\n  public addPortalOption(internal_name: string = '', id: number){\n    const label = TitleCase(PopPipe.transform(internal_name, {type:'entity', arg1: 'alias', arg2: 'singular'})).replace(/_/g, ' ').trim();\n    const newTabOption: PopContextMenuOption = {\n      label: `View ${label}`,\n      type: 'portal',\n      metadata: {\n        internal_name: internal_name,\n        id: id\n      }\n    };\n    this.options.push(newTabOption);\n  }\n\n\n  public addOption(option: PopContextMenuOption){\n    this.options.push(option);\n  }\n\n\n  public resetOptions(){\n    this.options = [];\n  }\n}\n\n\nexport interface PopContextMenuOption {\n  label: string;\n  type: string;\n  url?: string;\n  subMenus?: PopContextMenuOption[];\n  metadata?: any;\n}\n\n\nexport interface PopContextMenuEvent {\n  option: PopContextMenuOption;\n}\n","export const EntityFieldSetting = {\n  show_name: {\n    name: 'show_name',\n    label: 'Show Name',\n    helpText: 'Show the name of the field as a Header',\n    type: 'boolean',\n    defaultValue: false,\n  },\n  edit_label: {\n    name: 'edit_label',\n    label: 'Allow Label Changes',\n    helpText: 'The User will be able to see the label, but should they be allowed to change it?',\n    type: 'boolean',\n    group: 'label',\n    defaultValue: true\n  },\n  custom_label: {\n    name: 'custom_label',\n    label: 'Allow Custom Label',\n    helpText: 'The user will be able to select \\'Custom\\' from the dropdown and enter their own label',\n    type: 'boolean',\n    group: 'label',\n    defaultValue: false,\n  },\n  unique_label: {\n    name: 'unique_label',\n    label: 'Require Unique Label',\n    helpText: 'Each Value entry will be required to use a select a different label',\n    type: 'boolean',\n    group: 'label',\n    defaultValue: false,\n  },\n};\n\n","import {Injectable} from '@angular/core';\nimport {PopRequestService} from '../../../services/pop-request.service';\nimport {\n  CoreConfig,\n  Dictionary,\n  FieldConfig,\n  FieldCustomSettingInterface,\n  FieldItemPatchInterface,\n  PopBaseEventInterface,\n  PopLog,\n  ServiceInjector\n} from '../../../pop-common.model';\nimport {PopExtendService} from '../../../services/pop-extend.service';\nimport {\n  ConvertObjectToUri,\n  GetHttpErrorMsg,\n  IsArray,\n  IsDefined,\n  IsObject,\n  JsonCopy, StorageGetter,\n  StringReplaceAll\n} from '../../../pop-common-utility';\nimport {EntityFieldSetting} from './pop-entity-field.setting';\nimport {FieldItemModelConfig, IsValidFieldPatchEvent, ParseUrlForParams} from '../pop-entity-utility';\nimport {FormControl} from \"@angular/forms\";\n\n\n@Injectable({providedIn: 'root'})\nexport class PopEntityFieldService extends PopExtendService {\n  protected name = 'PopEntityFieldService';\n\n  protected srv: {\n    request: PopRequestService,\n  } = {\n    request: ServiceInjector.get(PopRequestService)\n  };\n\n\n  constructor() {\n    super();\n    PopLog.init(this.name, 'init', this);\n  }\n\n\n  // /**\n  //  * Ensure that at least 1 label exists\n  //  * @param field\n  //  */\n  // setFieldEntries(field: FieldInterface): Promise<boolean>{\n  //   return new Promise<boolean>((resolve) => {\n  //     if( !( IsArray(field.entries, true) ) ){\n  //       const entry = {\n  //         name: TitleCase(`${field.fieldgroup.name} 1`),\n  //         type: 'provided'\n  //       };\n  //       this.srv.request.doPost(`fields/${field.id}/entries`, entry, 1, false).subscribe((res) => {\n  //         res = res.data ? res.data : res;\n  //         field.entries = [ res ];\n  //         return resolve(true);\n  //       }, (err) => {\n  //         PopLog.error(this.name, `_setFieldEntryValues`, GetHttpErrorMsg(err));\n  //         return resolve(false);\n  //       });\n  //     }else{\n  //       return resolve(true);\n  //     }\n  //   });\n  // }\n\n\n  // /**\n  //  * Ensure that the field has the correct amount of values\n  //  * @param field\n  //  */\n  // setFieldValues(field: FieldInterface): Promise<boolean>{\n  //   return new Promise<boolean>((resolve) => {\n  //\n  //     if( IsArray(field.entries, true) ){\n  //       const realDataKeys = Object.keys(field.data).filter((id) => +id > 0);\n  //       const api = [];\n  //       if( !realDataKeys.length ){\n  //         console.log('create default value for  ', realDataKeys, field);\n  //         api.push(1);\n  //       }\n  //       if(field.multiple){\n  //         let neededValues = field.multiple_min - realDataKeys.length;\n  //         console.log('needed', neededValues);\n  //         while(neededValues){\n  //           api.push(1);\n  //           neededValues--;\n  //         }\n  //\n  //       }\n  //       console.log('should have values', api)\n  //\n  //       return resolve(true);\n  //     }else{\n  //       return resolve(false);\n  //     }\n  //   });\n  // }\n\n  addEntryValue(core: CoreConfig, field: FieldConfig) {\n\n    const dataIndex = field.data_keys.length;\n    const entry = dataIndex in field.entries ? field.entries[dataIndex] : null;\n    if (IsObject(entry, ['id'])) {\n      console.log('entry', entry);\n      const item = {\n        data: {},\n        entry: entry,\n        config: {},\n        index: dataIndex\n      };\n      Object.keys(field.children).map((name) => {\n        const fieldItem = JsonCopy(field.children[name]);\n        fieldItem.model.value = null; // clear any value that might have been stored from previous entry\n        item.data[name] = null;\n        fieldItem.model.facade = true;\n        item.config[name] = FieldItemModelConfig(core, fieldItem.model);\n      });\n      return item;\n    } else {\n      console.log('fail', entry);\n      return null;\n    }\n  }\n\n\n  removeEntryValue(core: CoreConfig, field: FieldConfig, dataKey: number): Promise<boolean> {\n    return new Promise<boolean>((resolve) => {\n      console.log('removeEntryValue', core, field, dataKey);\n      const data = field.data[dataKey];\n      if (IsObject(data, ['id'])) {\n        const body = {};\n        const path = StringReplaceAll(ParseUrlForParams(`#path/#entityId`, core.params), '//', '/');\n        body[field.name] = {\n          field_entry_id: dataKey,\n          id: data.id\n        };\n        this.srv.request.doDelete(path, body, 1, false).subscribe((res) => {\n          if (res.data) res = res.data;\n          console.log('removeEntryValue', res);\n          return resolve(true);\n        }, () => {\n          return resolve(false);\n        });\n      } else {\n        return resolve(true);\n      }\n    });\n\n  }\n\n\n  /**\n   * Update a value for a single field item column of a field record\n   * @param core\n   * @param field\n   * @param event\n   */\n  updateFieldItem(core: CoreConfig, field: FieldConfig, event: PopBaseEventInterface): Promise<boolean> {\n    return new Promise((resolve) => {\n      if (IsValidFieldPatchEvent(core, event)) {\n        const patch = {};\n        const path = StringReplaceAll(ParseUrlForParams(`#path/#entityId`, core.params), '//', '/');\n        patch[field.name] = {\n          field_entry_id: +event.data_key,\n          field_id: +field.id,\n          id: field.data[event.data_key].id ? field.data[event.data_key].id : null\n        };\n        patch[field.name][event.column] = event.config.control.value;\n        this.srv.request.doPatch(path, patch, 1, false).subscribe((res) => {\n          if (res.data) res = res.data;\n          const value = res[field.name].record[event.column];\n          field.data[event.data_key].id = res[field.name].record.id;\n          field.data[event.data_key][event.column] = value;\n\n\n          // if( IsObject(core.entity[ field.name ], true) ){\n          //   core.entity[ field.name ][ event.column ] = value;\n          // }else if( IsArray(core.entity[ field.name ], true) ){\n          //   console.log('session the data', core.entity[ field.name ], value);\n          // }\n\n          return resolve(true);\n        }, (err) => {\n          const fieldPatch = <FieldItemPatchInterface>event.config.patch;\n          const control = <FormControl>event.config.control;\n          fieldPatch.running = false;\n          control.markAsDirty();\n          control.setValue(this.asset.storedValue);\n          control.setErrors({server: true});\n          event.config.message = GetHttpErrorMsg(err);\n          return resolve(false);\n        });\n      }\n    });\n\n  }\n\n\n  /**\n   * Set any field settings for this field & field items, and apply and stored values\n   * @param field\n   * @param settings\n   */\n  setFieldCustomSetting(field: FieldConfig, settings: Dictionary<FieldCustomSettingInterface>) {\n    const stored = field.configs;\n    if (IsObject(field, ['fieldgroup', 'configs']) && IsObject(settings)) {\n      settings = JSON.parse(JSON.stringify({...EntityFieldSetting, ...settings}));\n      Object.keys(settings).map((name: string) => {\n        const setting = settings[name];\n        if (IsObject(setting, true)) {\n          const value = IsDefined(setting.value, false) ? setting.value : setting.defaultValue;\n          setting.value = <any>value;\n          if (setting.item && IsObject(field.children, [setting.item])) {\n            field.children[setting.item].custom_setting[name] = setting;\n            field.children[setting.item].setting[name] = value;\n          } else {\n            field.custom_setting[name] = setting;\n            field.setting[name] = value;\n          }\n        }\n      });\n\n      const childrenIdLookup = {};\n      Object.keys(field.children).map((name) => {\n        childrenIdLookup[field.children[name].id] = name;\n      });\n\n      if (IsArray(stored.field_configs, true)) {\n        stored.field_configs.map((setting) => {\n          if (!field.custom_setting[setting.name]) {\n            // ToDo:: Do We want to allow the database to pass in configs that are not local?\n            PopLog.warn(this.name, `setFieldCustomSettingDefaults: setting no longer defined`, setting);\n            // field.custom_setting[ setting.name ] = setting;\n          } else {\n            field.custom_setting[setting.name].id = setting.id;\n            field.custom_setting[setting.name].value = setting.value;\n          }\n          field.setting[setting.name] = setting.value;\n        });\n      }\n\n\n      if (IsObject(stored.item_configs, true)) {\n        Object.keys(stored.item_configs).map((fieldItemId) => {\n          const fieldItemConfigs = stored.item_configs[fieldItemId];\n          if (IsArray(fieldItemConfigs, true)) {\n            fieldItemConfigs.map((setting) => {\n              if (setting.field_id in childrenIdLookup) {\n                const item = field.children[childrenIdLookup[setting.field_id]];\n\n                // if( !item.custom_setting ) item.custom_setting = {};\n                if (!item.custom_setting[setting.name]) {\n                  // ToDo:: Do We want to allow the database to pass in configs that are not local\n                  PopLog.warn(this.name, `setFieldCustomSettingDefaults: setting no longer defined`, setting);\n                  // item.custom_setting[ setting.name ] = setting;\n                } else {\n                  item.custom_setting[setting.name].id = setting.id;\n                  item.custom_setting[setting.name].value = setting.value;\n                }\n                // if( !item.setting ) item.setting = {};\n                item.setting[setting.name] = setting.value;\n                console.log('here', setting.name, {item: item, setting: setting});\n              }\n            });\n          }\n        });\n      }\n    }\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  private _my() {\n    return true;\n  }\n}\n","import {\n  Component, ElementRef, EventEmitter,\n  Input,\n  OnDestroy,\n  OnInit,\n  ViewChild,\n  ViewContainerRef, ViewEncapsulation\n} from '@angular/core';\nimport { Router } from '@angular/router';\nimport { PopExtendDynamicComponent } from '../../../pop-extend-dynamic.component';\nimport { EntityFieldComponentInterface } from './pop-entity-field.model';\nimport { CoreConfig, Dictionary, DynamicComponentInterface, FieldConfig, PopBaseEventInterface, ServiceInjector } from '../../../pop-common.model';\nimport { PopContextMenuConfig } from '../../base/pop-context-menu/pop-context-menu.model';\nimport { IsObjectThrowError, StorageGetter } from '../../../pop-common-utility';\nimport { PopEntityFieldService } from './pop-entity-field.service';\n\n\n@Component({\n  selector: 'lib-pop-entity-field',\n  styleUrls: [ './pop-entity-field.component.scss' ],\n  templateUrl: './pop-entity-field.component.html',\n  encapsulation: ViewEncapsulation.None,\n})\nexport class PopEntityFieldComponent extends PopExtendDynamicComponent implements EntityFieldComponentInterface, OnInit, OnDestroy {\n  @Input() field: FieldConfig;\n  @ViewChild('container', { read: ViewContainerRef, static: true }) private container;\n\n  public name = 'PopEntityFieldComponent';\n\n  protected srv: {\n    field: PopEntityFieldService,\n    router: Router,\n  } = {\n    field: ServiceInjector.get(PopEntityFieldService),\n    router: ServiceInjector.get(Router),\n  };\n\n\n  constructor(\n    public el: ElementRef,\n  ){\n    super();\n\n\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        // #1 Check Required Data:\n        this.field = IsObjectThrowError(this.field, [ 'id' ], `${this.name}:configure: - this.field`) ? this.field : null;\n        this.id = this.field.id;\n        // #2 Attach a context menu\n        this._attachContextMenu();\n        // #3 Handle Bubble events\n        this.dom.handler.bubble = (core: CoreConfig, event: PopBaseEventInterface) => this.onBubbleEvent('handler', null, event);\n        this.trait.bubble = true; // leave this on\n\n        // #5: Render the dynamic field\n        this.template.attach('container'); // 'container' references the @viewChild at top of file\n        this.template.render([ <DynamicComponentInterface>{\n          type: this.field.component,\n          inputs: {\n            core: this.core,\n            field: this.field,\n          }\n        } ]);\n\n        // set states\n        this._setFieldState();\n\n        resolve(true);\n      });\n    };\n  }\n\n\n  /**\n   * This component should have a purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * The user can call actions on this field\n   * @param event\n   */\n  onActionButtonClick(event: PopBaseEventInterface){\n    this.log.event(`onActionButtonClick`, event);\n    if( event.type === 'field' ){\n      if( event.name === 'add' ){\n        this.onAdd(event);\n      }else if( event.name === 'remove' ){\n        // this.onRemove(event);\n      }else if( event.name === 'close' ){\n        // this.onClose(event);\n      }\n    }\n    return true;\n  }\n\n\n  /**\n   * User wants to add a value entry into the field\n   * @param event\n   */\n  onAdd(event: PopBaseEventInterface){\n    this.log.event(`onAdd`, event);\n    if( this.field.facade ){\n      this.onBubbleEvent('onAdd', null, event);\n    }else{\n      const childEmitter = <EventEmitter<PopBaseEventInterface>>StorageGetter(this.template, [ 'refs', '0', 'instance', 'events' ]);\n      if( childEmitter ){\n        childEmitter.emit(event);\n        this._setFieldState();\n      }\n    }\n    return true;\n  }\n\n\n  /**\n   * User wants to make edits to the value entries\n   * @param event\n   */\n  onEdit(event?: PopBaseEventInterface, dataKey?: number){\n    this.log.event(`onEdit`, event);\n    return true;\n  }\n\n\n  /**\n   * User wants to remove a value entry\n   * @param event\n   */\n  onRemove(event: PopBaseEventInterface){\n    this.log.event(`onRemove`, event);\n    console.log('here');\n    if( this.field.facade ){\n      this.onBubbleEvent('onRemove', null, event);\n    }else{\n      console.log('real delete action');\n    }\n    this._setFieldState();\n    return true;\n  }\n\n\n  /**\n   * User closes the edit ability of the value entries\n   * @param event\n   */\n  onClose(event: PopBaseEventInterface){\n    this.log.event(`onClose`, event);\n    return true;\n  }\n\n\n  /**\n   * The user can click on a link to view the config setup of this field\n   */\n  onNavigateToField(): void{\n    this.srv.router.navigate([ 'entities', 'fields', this.field.id ]).catch((e) => true);\n  }\n\n\n  /**\n   * Handle the bubble events that come up\n   * @param event\n   */\n  onBubbleEvent(name?: string, extension?: Dictionary<any>, event?: PopBaseEventInterface){\n    this.log.event(`onBubbleEvent`, event);\n    this._setFieldState();\n    this.events.emit(event);\n    return true;\n  }\n\n\n  /**\n   * Clean up the dom of this component\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  /**\n   * Set internal state flags of a field\n   * @private\n   */\n  private _setFieldState(): void{\n\n    this.dom.setTimeout(`allow-template-changes`, () => {\n      // this.field.canAdd = this.field.multiple && this.field.data_keys.length < this.field.multiple_max;\n      this.field.canAdd = this.field.multiple && this.field.data_keys.length < this.field.entries.length;\n      this.field.canRemove = this.field.multiple && this.field.data_keys.length > this.field.multiple_min;\n    }, 100);\n\n  }\n\n\n  /**\n   * Interept the mouse right click to show a context menu for this field\n   * @param event\n   */\n  private _attachContextMenu(): void{\n\n    this.dom.contextMenu.config = new PopContextMenuConfig();\n    //\n    this.dom.contextMenu.configure = (event: MouseEvent) => {\n      const hasAccess = true; // TBD\n      if( hasAccess && this.dom.contextMenu.config ){\n        event.preventDefault(); // prevent the default behavior of the right click.\n        // reset the context menu, and configure it to load at the position clicked.\n        this.dom.contextMenu.config.resetOptions();\n        this.dom.contextMenu.config.addPortalOption('field', this.field.id);\n        this.dom.contextMenu.config.addNewTabOption(`entities/fields/${this.field.id}`);\n\n        this.dom.contextMenu.config.x = event.clientX;\n        this.dom.contextMenu.config.y = event.clientY;\n        this.dom.contextMenu.config.toggle.next(true);\n      }\n    };\n    this.dom.setSubscriber('context-menu', this.dom.contextMenu.config.emitter.subscribe((event: PopBaseEventInterface) => {\n      this.events.emit(event);\n    }));\n  }\n}\n","import {Injectable, OnDestroy} from '@angular/core';\nimport {PopLogService} from './pop-log.service';\nimport {IsObject, PopUid} from '../pop-common-utility';\nimport {\n  ComponentDomInterface,\n} from '../pop-common-dom.models';\nimport {Dictionary} from '../pop-common.model';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PopDomService implements OnDestroy {\n  private id: number | string = PopUid();\n\n  private name = 'PopDomService';\n\n  private asset: {\n    sessionKeys: Dictionary<number>\n    map: Dictionary<any>\n  } = {\n    sessionKeys: {height: 1, width: 1, state: 1, active: 1, session: 1},\n    map: {}\n  };\n\n  protected srv: {\n    log: PopLogService,\n  };\n\n  public ui: {\n    active: Dictionary<any>;\n    fields: Map<number | string, any>,\n    map: Dictionary<any>\n    [key: string]: any;\n  } = {\n    active: {},\n    fields: new Map(),\n    map: {}\n  };\n  public position = {};\n  public map = {};\n  public components: Dictionary<any> = {};\n\n\n  constructor() {\n  }\n\n\n  onRegister(component: any) {\n    if (component.name && typeof component.id !== 'undefined' && component.dom) {\n      if (this.components[component.name] && this.components[component.name][component.id]) {\n        this.applyDomKeys(component);\n      } else {\n        this.createDomSession(component);\n      }\n    }\n  }\n\n\n  onSession(dom: any, key: string = null) {\n    if (dom.name && dom.id) {\n      this.sessionDomKeys(dom, key);\n    }\n  }\n\n\n  getComponentHeight(component: string, componentId: number = 1) {\n    return this.components[component] && this.components[component][componentId] && IsObject(this.components[component][componentId].height, true) ? this.components[component][componentId].height : null;\n  }\n\n\n  getComponentWidth(component: string, componentId: number = 1) {\n    return this.components[component] && this.components[component][componentId] && IsObject(this.components[component][componentId].width, true) ? this.components[component][componentId].width : null;\n  }\n\n\n  getComponentSession(component: string, componentId: number = 1) {\n    return this.components[component] && this.components[component][componentId] && IsObject(this.components[component][componentId].onSession, true) ? this.components[component][componentId].onSession : null;\n  }\n\n\n  onDetach(name: string, id) {\n    if (name && id) {\n      if (this.components[name] && this.components[name][id]) {\n        delete this.components[name][id];\n      }\n    }\n  }\n\n\n  ngOnDestroy() {\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  private createDomSession(component: { id: string | number, name: 'string', dom: ComponentDomInterface }) {\n    if (component.name && typeof component.id !== 'undefined') {\n      if (!this.components[component.name]) this.components[component.name] = {};\n      if (!this.components[component.name][component.id]) this.components[component.name][component.id] = {};\n      // if( dom.emitter instanceof EventEmitter ) this.components[ dom.name ][ dom.entityId ].emitter = dom.emitter;\n      this.sessionDomKeys(component);\n    }\n  }\n\n\n  private applyDomKeys(component: { id: string | number, name: 'string', dom: ComponentDomInterface }) {\n    if (this.components[component.name] && this.components[component.name][component.id]) {\n      Object.keys(this.components[component.name][component.id]).map((key) => {\n        if (key && this.asset.sessionKeys[key]) {\n          component.dom[key] = this.components[component.name][component.id][key];\n        }\n      });\n    }\n  }\n\n\n  private sessionDomKeys(component: { id: string | number, name: 'string', dom: ComponentDomInterface }, key: string = null) {\n    if (this.components[component.name] && this.components[component.name][component.id]) {\n      if (key && key in this.asset.sessionKeys) {\n        if (IsObject(component.dom[key], true)) {\n          this.components[component.name][component.id][key] = component.dom[key];\n        }\n\n      } else {\n        Object.keys(this.asset.sessionKeys).map((sessionKey: string) => {\n          if (IsObject(component.dom[sessionKey], true)) {\n            this.components[component.name][component.id][sessionKey] = component.dom[sessionKey];\n          }\n        });\n      }\n    }\n  }\n}\n","import { Component, Inject, OnInit } from '@angular/core';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { TableConfig } from '../../pop-table/pop-table.model';\n\n\n@Component( {\n  selector: 'lib-pop-table-dialog',\n  templateUrl: './pop-table-dialog.component.html',\n  styleUrls: [ './pop-table-dialog.component.scss' ]\n} )\nexport class PopTableDialogComponent implements OnInit {\n\n  public ui = {\n    table: <TableConfig>undefined,\n  };\n\n\n  constructor(\n    public dialog: MatDialogRef<PopTableDialogComponent>,\n    @Inject( MAT_DIALOG_DATA ) public data\n  ){\n    this._buildTable();\n  }\n\n\n  ngOnInit(): void{\n  }\n\n\n  private _buildTable(){\n    const tableData = this.data.data\n    this.data.table.data = tableData\n    this.ui.table = this.data.table;\n  }\n\n\n  onClose(){\n    this.dialog.close( null );\n  }\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { SideBySideConfig, SideBySideOptionInterface } from './pop-side-by-side.model';\nimport { PopConfirmationDialogComponent } from '../pop-dialogs/pop-confirmation-dialog/pop-confirmation-dialog.component';\nimport { of } from 'rxjs';\nimport { PopContextMenuConfig } from '../pop-context-menu/pop-context-menu.model';\nimport { PopExtendComponent } from '../../../pop-extend.component';\nimport { Dictionary, PopBaseEventInterface, PopRequest, PopTemplate, ServiceInjector } from '../../../pop-common.model';\nimport { Router } from '@angular/router';\nimport { MatDialog } from '@angular/material/dialog';\nimport { PopDomService } from '../../../services/pop-dom.service';\nimport { ArrayMapSetter, GetHttpErrorMsg, InterpolateString, IsArray, IsCallableFunction, IsObject, ObjectContainsTagSearch, PopUid, Sleep } from '../../../pop-common-utility';\nimport { PopEntityUtilParamService } from '../../entity/services/pop-entity-util-param.service';\nimport { PopTableDialogComponent } from '../pop-dialogs/pop-table-dialog/pop-table-dialog.component';\n\n\n@Component( {\n  selector: 'lib-pop-side-by-side',\n  templateUrl: './pop-side-by-side.component.html',\n  styleUrls: [ './pop-side-by-side.component.scss' ],\n} )\nexport class PopSideBySideComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() config: SideBySideConfig;\n\n  public name = 'PopSideBySideComponent';\n\n  protected srv: {\n    dialog: MatDialog,\n    router: Router,\n    param: PopEntityUtilParamService,\n  } = {\n    dialog: ServiceInjector.get( MatDialog ),\n    param: ServiceInjector.get( PopEntityUtilParamService ),\n    router: ServiceInjector.get( Router ),\n  };\n\n  availableFilterValue = '';\n  assignedFilterValue = '';\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService,\n  ){\n    super();\n\n\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n        this.id = this.config.id ? this.config.id : PopUid();\n        this._trackAssignedOptions();\n        this._setHooks();\n        this._setContextMenu();\n        this._checkForAssignedOptions();\n        return resolve( true );\n      } );\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n        await this._setHeight();\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * This component should have a purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * Filter Utility\n   * @param type\n   * @param filter\n   */\n  onApplyFilter( type: string, filter: string ){\n    this.dom.setTimeout( 'apply-filter', () => {\n      if( this.config.filterBoth ){\n        this.onFilterBoth( filter );\n        this.assignedFilterValue = filter;\n        this.availableFilterValue = filter;\n      }else{\n        if( type === 'assigned' ){\n          this._filterAssignedOptions( filter );\n          this.assignedFilterValue = filter;\n        }else{\n          this._filterAvailableOptions( filter );\n          this.availableFilterValue = filter;\n        }\n      }\n      this.onBubbleEvent( 'apply-filter', null, { method: type, value: filter } );\n    }, 200 );\n  }\n\n\n  /**\n   * Filter both columns\n   */\n  onFilterBoth( filter: string ){\n    this.config.options.values.map( option => {\n      option.assignedFilter = option.optionFilter = !ObjectContainsTagSearch( option, filter );\n    } );\n  }\n\n\n  /**\n   * Assign a specific option\n   */\n  onOptionAssign( option: SideBySideOptionInterface, confirmed = false ): Promise<boolean>{\n    return new Promise<boolean>( async( resolve ) => {\n      if(!this.config.disabled){\n      if( IsObject( option, true ) && !this.ui.assigned[ option.value ] && !option.optionBlock && !option.optionFilter ){\n        if( this.config.facadeEvent ){\n          this.onBubbleEvent( 'facadeEvent', 'Facade Event has been triggered', {\n            method: 'remove',\n            options: [ option ],\n            ids: [ +option.value ]\n          }, true );\n          return resolve( true );\n        }else{\n          await this._assign( [ option ], confirmed );\n          return resolve( true );\n        }\n      }else{\n        return resolve( true );\n      }}\n    } );\n  }\n\n\n  /**\n   * Assign all options\n   */\n  onAssignAllOptions( confirmed = false ): Promise<boolean>{\n    return new Promise<boolean>( async( resolve ) => {\n      const options = this.config.options.values.filter( option => {\n        return !this.ui.assigned[ option.value ] && !option.optionBlock && !option.optionFilter;\n      } );\n      if( !options.length ){\n        return resolve( true );\n      }\n      if( this.config.facadeEvent ){\n        this.onBubbleEvent( 'facadeEvent', 'Facade Event has been triggered', {\n          method: 'assign',\n          options: options,\n          ids: options.map( o => +o.value )\n        }, true );\n        return resolve( true );\n      }else{\n        await this._assign( options, confirmed );\n        return resolve( true );\n      }\n    } );\n  }\n\n\n  /**\n   * Remove an option that is assigned\n   * @param option\n   * @param confirmed\n   */\n  onRemoveOption( option: SideBySideOptionInterface, confirmed = false ): Promise<boolean>{\n    return new Promise<boolean>( async( resolve ) => {\n      if(!this.config.disabled){\n      if( IsObject( option ) ){\n        if( this.config.facadeEvent ){\n          this.onBubbleEvent( 'facadeEvent', 'Facade Event has been triggered', {\n            method: 'remove',\n            options: [ option ],\n            ids: [ +option.value ]\n          }, true );\n          return resolve( true );\n        }else{\n          await this._remove( [ option ], confirmed );\n          return resolve( true );\n        }\n      }else{\n        return resolve( true );\n      }\n    }\n    } );\n  }\n\n\n  /**\n   * Remove all options that are assigned\n   */\n  onRemoveAllOptions( confirmed = false ): Promise<boolean>{\n    return new Promise<boolean>( async( resolve ) => {\n      this.config.patch.removeErrMessage = '';\n      const options = [];\n      this.config.options.values.map( option => {\n        if( this.ui.assigned[ option.value ] && !option.assignedFilter ){\n          option.patching = true;\n          options.push( option );\n        }\n      } );\n      if( !options.length ){\n        return resolve( true );\n      }\n      if( this.config.facadeEvent ){\n        this.onBubbleEvent( 'facadeEvent', 'Facade Event has been triggered', {\n          method: 'remove',\n          options: options,\n          ids: options.map( o => +o.value )\n        }, true );\n        return resolve( true );\n      }else{\n        await this._remove( options, confirmed );\n        return resolve( true );\n      }\n    } );\n  }\n\n\n  /**\n   * Go to linked route of option\n   * @param option\n   */\n  onNavigateToOptionRoute( option: SideBySideOptionInterface ){\n    if( this.config.route ){\n      let route = this.config.route.slice();\n      route = String( route ).replace( /:value/g, '' + option.value ).replace( /:name/g, option.name );\n\n      this.srv.router.navigateByUrl( route ).then( data => {\n      } )\n        .catch( e => {\n          // const errMessage = 'Route not found:' + route;\n          // console.log(e);\n          this.events.emit( { source: this.name, type: 'context_menu', name: 'portal', data: route, config: this.config } );\n          // option.errMessage = errMessage;\n          // setTimeout(() => {\n          //   if( option.errMessage === errMessage ) option.errMessage = '';\n          // }, 2000);\n        } );\n    }\n  }\n\n\n  /**\n   * Intercept the user right mouse click to show a context menu for this component\n   * @param option\n   * @param event\n   */\n  onMouseRightClick( option, event: MouseEvent ){\n    let route = this.config.route.slice();\n    route = String( route ).replace( /:value/g, '' + option.value ).replace( /:name/g, option.name );\n\n    if( !route ) return false;\n\n    // if we haven't returned, prevent the default behavior of the right click.\n    event.preventDefault();\n\n    const context = this.dom.contextMenu.config;\n\n    // reset the context menu, and configure it to load at the position clicked.\n    context.resetOptions();\n\n    // if(this.config.internal_name) this.dom.contextMenu.addPortalOption(this.config.internal_name, +row.entityId);\n    const api_path = route.split( '/' )[ 0 ];\n    const entityParams = this.srv.param.getEntityParamsWithPath( api_path, option.value );\n    if( entityParams ) context.addPortalOption( entityParams.internal_name, entityParams.entityId );\n\n    context.addNewTabOption( route );\n\n    context.x = event.clientX;\n    context.y = event.clientY;\n    context.toggle.next( true );\n  }\n\n\n  onBubbleEvent( eventName: string, message: string = null, extend: Dictionary<any> = {}, force = false ): PopBaseEventInterface{\n    const event = <PopBaseEventInterface>{\n      type: 'field',\n      name: eventName,\n      source: this.name\n    };\n    if( this.config ) event.config = this.config;\n    if( message ) event.message = message;\n    Object.keys( extend ).map( ( key ) => {\n      event[ key ] = extend[ key ];\n    } );\n    this.log.event( `onBubbleEvent`, event );\n    if( this.config.bubble || force ){\n      this.events.emit( event );\n    }\n\n    return event;\n  }\n\n\n  /**\n   * Clean up the dom of this component\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  private _assign( options: SideBySideOptionInterface[], confirmed = false ): Promise<any>{\n    return new Promise<boolean>( async( resolve ) => {\n      this._beforePatch( options );\n      if( this.config.facade ){\n        await Sleep( 500 );\n        this._onAssignSuccess( options );\n        return resolve( true );\n      }else if( this.config.patch.path && this.config.patch.field ){\n        const request = this._getRequest( 'assign', this._getRequestBody( 'assign', options, confirmed ) );\n        request.subscribe( async( res: any ) => {\n          if( res.data ) res = res.data;\n          if( res.confirmation ){\n            const isConfirmed = await this._confirmAction( res.confirmation );\n            if( isConfirmed ){\n              this._assign( options, true ).then( () => true );\n            }\n          }else{\n            this._onAssignSuccess( options );\n            this.onBubbleEvent( 'patch', 'Patched', {\n              success: true,\n              method: 'assign',\n              ids: options.map( o => o.value ),\n              value: this.config.assigned\n            }, true );\n          }\n          return resolve( res );\n        }, ( err ) => {\n          this._handleAssignError( err );\n          this._onAssignFail( options );\n          return resolve( false );\n        } );\n      }else{\n        this._onAssignSuccess( options );\n        return resolve( true );\n      }\n    } );\n  }\n\n\n  private _remove( options: SideBySideOptionInterface[] = [], confirmed = false ): Promise<any>{\n    return new Promise<boolean>( async( resolve ) => {\n      this._beforePatch( options );\n      if( this.config.facade ){\n        await Sleep( 500 );\n        this._onRemoveSuccess( options );\n        return resolve( true );\n      }else if( this.config.patch.path && this.config.patch.field ){\n        if(!confirmed && this.config.patch.conflictPath){\n\n\n          const value = options[0].value;\n          // const path = 'users/12/roles/1/conflicts';\n\n          const path = InterpolateString( this.config.patch.conflictPath,{value:value});\n          // users/{entityId}/roles/{value}/conflicts\n          PopRequest.doPost(path , {}).subscribe( async (res:any)=>{\n            if(res.data) res=res.data;\n            if(IsArray(res,true)){\n              options.map( ( option ) => {\n                option.patching = false;\n              } );\n              const isConfirmed = await this._confirmAction( res[0] );\n              if( isConfirmed ){\n                this._remove( options, true ).then( () => true );\n              }\n            } else {\n              this._remove( options, true ).then( () => true );\n            }\n\n          })\n\n        } else {\n          const request = this._getRequest( 'remove', this._getRequestBody( 'remove', options, confirmed ) );\n          request.subscribe( async( res: any ) => {\n            if( res.data ) res = res.data;\n\n              this._onRemoveSuccess( options );\n              this.onBubbleEvent( 'patch', 'Patched', {\n                success: true,\n                method: 'remove',\n                ids: options.map( o => o.value ),\n                value: this.config.assigned\n              }, true );\n\n\n            return resolve( res );\n          }, ( err ) => {\n            this._handleRemoveError( err );\n            this._onRemoveFail( options );\n          } );\n        }\n\n      }else{\n        this._onRemoveSuccess( options );\n        return resolve( true );\n      }\n    } );\n  }\n\n  private _getRequestBody( method: 'assign' | 'remove', options: SideBySideOptionInterface[], confirmed = false ){\n\n    if( this.config.patch.field ){\n\n    }\n    const body = {};\n    if( this.config.patch.metadata ){\n      for( const i in this.config.patch.metadata ){\n        if( !this.config.patch.metadata.hasOwnProperty( i ) ) continue;\n        body[ i ] = this.config.patch.metadata[ i ];\n      }\n    }\n    body[ this.config.patch.field ] = options.map( o => o.value );\n    body[ 'method' ] = method;\n    body[ 'confirmed' ] = confirmed;\n\n    return body;\n  }\n\n\n  private _getRequest( method: 'assign' | 'remove', body: object = {} ){\n    let path = this.config.patch.path;\n    const ignore401 = ( this.config.patch.ignore401 ? true : null );\n    const version = ( this.config.patch.version ? this.config.patch.version : 1 );\n    const post = {};\n    if( this.config.patch.metadata ){\n      for( const i in this.config.patch.metadata ){\n        if( !this.config.patch.metadata.hasOwnProperty( i ) ) continue;\n        post[ i ] = this.config.patch.metadata[ i ];\n      }\n    }\n    if(this.config.patch.addId){\n      const id =  body[ this.config.patch.field ][0] ;\n      path = InterpolateString( this.config.patch.path,{id:id});\n\n    }\n\n    if( method === 'assign' ){\n      switch( String( this.config.patch.assignMethod ).toLowerCase() ){\n        case 'patch':\n          return PopRequest.doPatch( `${ path}`, body, version, ignore401 );\n          break;\n        case 'post':\n          return PopRequest.doPost( `${ path }`, body, version, ignore401 );\n          break;\n        default:\n          return PopRequest.doPost( `${ path}`, body, version, ignore401 );\n          break;\n      }\n\n    }else{\n      switch( String( this.config.patch.removedMethod ).toLowerCase() ){\n        case 'patch':\n          return PopRequest.doPatch( `${ path}`, body, version, ignore401 );\n          break;\n        case 'post':\n          return PopRequest.doPost( `${ path}`, body, version, ignore401 );\n          break;\n        case 'delete':\n          return PopRequest.doDelete( `${ path}`, body, version, ignore401 );\n          break;\n        default:\n          return PopRequest.doDelete( `${ path}`, body, version, ignore401 );\n          break;\n      }\n      return PopRequest.doDelete( `${ path}`, body, version, ignore401 );\n    }\n  }\n\n\n  private _handleAssignError( err: any ){\n    this.config.patch.assignErrMessage = GetHttpErrorMsg( err );\n    this.config.patch.running = false;\n  }\n\n\n  private _handleRemoveError( err: any ){\n    this.config.patch.removeErrMessage = GetHttpErrorMsg( err );\n    this.config.patch.running = false;\n  }\n\n\n  private _onAssignSuccess( options: any[] = [] ){\n    this.config.patch.running = false;\n    options.map( option => {\n      this.ui.assigned[ option.value ] = 1;\n      option.patching = false;\n    } );\n    this._checkForAssignedOptions();\n    const event = this.onBubbleEvent( 'assign', 'Assigned', {\n      method: 'assign',\n      ids: options.map( o => o.value ),\n      value: this.config.assigned\n    } );\n    if( IsCallableFunction( this.config.patch.callback ) ){\n      this.config.patch.callback(this.core, event );\n    }\n  }\n\n\n  private _beforePatch( options: SideBySideOptionInterface[] = [] ){\n    this.config.patch.removeErrMessage = '';\n    this.config.patch.running = true;\n    options.map( ( option ) => {\n      option.patching = true;\n      option.errMessage = '';\n    } );\n  }\n\n  private _formatConflictData(conflictData:any[]){\n    const tableData = conflictData.map(pods=>{\n      return {  pod:pods.name, title:pods.pivot.is_leader?'Leader':'Member'}\n    });\n    return tableData;\n  }\n  private _confirmAction( conflictData:any[]): Promise<boolean>{\n    return new Promise<boolean>( ( resolve ) => {\n      const tableData = this._formatConflictData(conflictData);\n      this.srv.dialog.open( PopTableDialogComponent, {\n        width: '500px',\n        data: {\n          data: tableData,\n          type:'sideBySide',\n          table:this.config.patch.conflictTableConfig,\n          message: this.config.patch.conflictMessage,\n          header:this.config.patch.conflictHeader?this.config.patch.conflictHeader:''\n        }\n      } ).afterClosed().subscribe( res => {\n        return resolve( res ? true : false );\n      } );\n    } );\n  }\n\n\n  private _onAssignFail( options: SideBySideOptionInterface[] = [] ){\n    this.config.patch.running = false;\n    options.map( option => {\n      delete this.ui.assigned[ option.value ];\n      option.patching = false;\n    } );\n    this._checkForAssignedOptions();\n  }\n\n\n  private _onRemoveFail( options: SideBySideOptionInterface[] = [] ){\n    this.config.patch.running = false;\n    options.map( option => {\n      this.ui.assigned[ option.value ] = 1;\n      option.patching = false;\n    } );\n    this._checkForAssignedOptions();\n  }\n\n\n  private _onRemoveSuccess( options: SideBySideOptionInterface[] = [] ){\n    this.config.patch.running = false;\n    options.map( option => {\n      delete this.ui.assigned[ option.value ];\n      option.patching = false;\n    } );\n    this._checkForAssignedOptions();\n\n    const event = this.onBubbleEvent( 'remove', 'Removed',\n      {\n        method: 'remove',\n        ids: options.map( o => o.value ),\n        value: this.config.assigned\n      }\n    );\n    if( IsCallableFunction( this.config.patch.callback ) ){\n      this.config.patch.callback( this.core, event );\n    }\n  }\n\n\n  /**\n   * Helper function that naivgates the complexity of the setting the heights needed in this component\n   */\n  private _setHeight(){\n    return new Promise( ( resolve ) => {\n      this.dom.overhead = 2;\n      if( this.config.hasHeader ) this.dom.overhead += 38;\n      if( this.config.hasFilterRow ) this.dom.overhead += 49;\n      if( this.config.hasLabelRow ) this.dom.overhead += 45;\n\n      if( !this.config.height ) this.config.height = PopTemplate.getContentHeight( false, 270 );\n\n\n      let tabColumnHeight = this.dom.repo.getComponentHeight( 'PopEntityTabColumnComponent', this.position );\n      if( !tabColumnHeight ) tabColumnHeight = this.dom.repo.getComponentHeight( 'PopTabMenuComponent', 1 );\n      if( tabColumnHeight && tabColumnHeight.inner ){\n        this.dom.height.default = tabColumnHeight.inner - 20;\n      }else{\n        this.dom.height.default = PopTemplate.getContentHeight( false, this.dom.overhead );\n      }\n\n      if( this.config.parentClassName ){\n        this.dom.overhead = this.dom.overhead + ( Math.abs( this.el.nativeElement.offsetTop ) + 100 );\n        this.dom.setHeightWithParent( this.config.parentClassName, this.dom.overhead, this.dom.height.default ).then( ( res ) => {\n          this.log.info( `setHeight with ${ this.config.parentClassName }` );\n          return resolve( true );\n        } );\n      }else{\n        if( this.config.height ){\n          // if( this.config.height < ( this.dom.overhead * 2 ) ) this.config.height = this.dom.overhead * 2;\n          this.dom.setHeight( this.config.height, this.dom.overhead );\n          this.log.info( `setHeight with config.height:${ this.config.height } - overhead:${ this.dom.overhead }` );\n        }else if( this.config.bucketHeight ){\n          this.config.height = this.config.bucketHeight + this.dom.overhead;\n          this.dom.setHeight( +this.config.height, this.dom.overhead );\n          this.log.info( `setHeight with config.bucketHeight:${ this.config.bucketHeight } - overhead:${ this.dom.overhead }` );\n        }else if( this.config.bucketLimit ){\n          this.config.bucketLimit = this.config.bucketLimit > this.config.options.values.length ? this.config.options.values.length : this.config.bucketLimit;\n          this.config.bucketHeight = ( this.config.bucketLimit * 30.5 );\n          this.config.height = this.config.bucketHeight + this.dom.overhead;\n          this.dom.setHeight( +this.config.height, this.dom.overhead );\n          this.log.info( `setHeight with config.bucketLimit:${ this.config.bucketLimit } - overhead:${ this.dom.overhead }` );\n        }else{\n          this.log.info( `setHeight with defaultHeight:${ this.dom.height.default } - overhead:${ this.dom.overhead }` );\n          this.dom.setHeight( this.dom.height.default, this.dom.overhead );\n        }\n        return resolve( true );\n      }\n\n    } );\n  }\n\n\n  /**\n   * This will block certain options from being available\n   * @param bucket\n   * @param ids\n   */\n  private _blockBucketOptions( bucket: string, ids: any[] ){\n    if( [ 'assign', 'option', 'both' ].includes( bucket ) ){\n      const map = ArrayMapSetter( this.config.options.values, 'value' );\n      ids.map( ( id ) => {\n        if( id in map ){\n          if( bucket === 'assign' ){\n            this.config.options.values[ map[ id ] ].assignBlock = true;\n          }else if( bucket === 'option' ){\n            this.config.options.values[ map[ id ] ].optionBlock = true;\n          }else{\n            this.config.options.values[ map[ id ] ].assignBlock = true;\n            this.config.options.values[ map[ id ] ].optionBlock = true;\n          }\n        }\n      } );\n    }\n  }\n\n\n  /**\n   * This will un-block certain options from being available\n   * @param bucket\n   * @param ids\n   */\n  private _unblockBucketOptions( bucket: string, ids: any[] ){\n    if( [ 'assign', 'option', 'both' ].includes( bucket ) ){\n      const map = ArrayMapSetter( this.config.options.values, 'value' );\n      ids.map( ( id ) => {\n        if( id in map ){\n          if( bucket === 'assign' ){\n            this.config.options.values[ map[ id ] ].assignBlock = false;\n          }else if( bucket === 'option' ){\n            this.config.options.values[ map[ id ] ].optionBlock = false;\n          }else{\n            this.config.options.values[ map[ id ] ].assignBlock = false;\n            this.config.options.values[ map[ id ] ].optionBlock = false;\n          }\n        }\n      } );\n    }\n  }\n\n\n  /**\n   * Allow other modules to trigger certain functionality\n   * @param option\n   * @param event\n   */\n  private _setHooks(){\n    this.config.assign = ( options: SideBySideOptionInterface[], confirmed = false ) => {\n      return this._assign( options, confirmed );\n    };\n\n    this.config.remove = ( options: SideBySideOptionInterface[], confirmed = false ) => {\n      return this._remove( options, confirmed );\n    };\n    this.config.removeAllOptions = () => {\n      return of( this.onRemoveAllOptions() );\n    };\n    this.config.addAllOptions = () => {\n      return of( this.onAssignAllOptions() );\n    };\n    this.config.applyFilter = ( type, filter ) => {\n      this.onApplyFilter( type, filter );\n    };\n\n    this.config.getAssigned = () => {\n      return this.config.assigned.slice();\n    };\n\n    this.config.block = ( bucket: string, ids: any[] ) => {\n      this._blockBucketOptions( bucket, ids );\n    };\n    this.config.unblock = ( bucket: string, ids: any[] ) => {\n      this._unblockBucketOptions( bucket, ids );\n    };\n  }\n\n\n  /**\n   * Intercept the user right mouse click to show a context menu for this component\n   * @param option\n   * @param event\n   */\n  private _setContextMenu(){\n    this.dom.contextMenu.config = new PopContextMenuConfig();\n    this.dom.setSubscriber( 'context-menu', this.dom.contextMenu.config.emitter.subscribe( ( event: PopBaseEventInterface ) => {\n      this.log.event( `context-menu`, event );\n      this.events.emit( event );\n    } ) );\n  }\n\n\n  /**\n   * Get the count of assigned options\n   */\n  private _checkForAssignedOptions(){\n    this.config.assigned = Object.keys( this.ui.assigned );\n    this.ui.assignedCount = this.config.assigned.length;\n    this.ui.optionsCount = this.config.options.values.length;\n    if(this.ui.assignedCount == this.ui.optionsCount) this.ui.optionsCount = 0\n  }\n\n\n  /**\n   * Filter assigned options\n   * @param filter\n   */\n  private _filterAssignedOptions( filter: string ){\n\n    this.config.options.values.map( option => {\n      option.assignedFilter = !ObjectContainsTagSearch( option, filter );\n    } );\n\n\n  }\n\n\n  /**\n   * Filter un-assigned options\n   * @param filter\n   */\n  private _filterAvailableOptions( filter: string ){\n    this.config.options.values.map( option => {\n      option.optionFilter = !ObjectContainsTagSearch( option, filter );\n    } );\n  }\n\n\n  /**\n   * Set the intial state of the assigned options\n   */\n  private _trackAssignedOptions(){\n    this.ui.assigned = {};\n    this.config.assigned.map( optionID => {\n      this.ui.assigned[ optionID ] = 1;\n    } );\n  }\n\n\n}\n","import { Component, Inject, OnInit } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport { PopConfirmationDialogDataInterface } from '../pop-dialogs.model';\n\n\n@Component({\n  selector: 'lib-pop-confirmation-dialog',\n  templateUrl: './pop-confirmation-dialog.component.html',\n  styleUrls: [ './pop-confirmation-dialog.component.scss' ]\n})\nexport class PopConfirmationDialogComponent implements OnInit {\n  constructor(\n    @Inject(MAT_DIALOG_DATA) public config: PopConfirmationDialogDataInterface,\n    public dialog: MatDialogRef<PopConfirmationDialogComponent>\n  ){\n  }\n\n\n  ngOnInit(){\n    if( !this.config.display ) this.config.display = 'Confirmation';\n    if( !this.config.option ) this.config.option = { confirmed: 1 };\n    if( !this.config.align ) this.config.align = 'center';\n  }\n\n\n  onConfirm(){\n    this.dialog.close(this.config.option);\n  }\n\n\n  onCancel(){\n    this.dialog.close(null);\n  }\n}\n","import { Component, Inject, OnDestroy, OnInit } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport { PopExtendDynamicComponent } from '../../../../pop-extend-dynamic.component';\nimport { slideInOut } from '../../../../pop-common-animations.model';\n\n@Component({\n  selector: 'lib-pop-entity-field-modal',\n  templateUrl: './pop-entity-field-modal.component.html',\n  styleUrls: ['./pop-entity-field-modal.component.scss'],\n  animations: [\n    slideInOut\n  ]\n})\nexport class PopEntityFieldModalComponent extends PopExtendDynamicComponent implements OnInit, OnDestroy {\n  public name = 'PopEntityFieldModalComponent';\n\n\n  constructor(\n    public dialog: MatDialogRef<PopEntityFieldModalComponent>,\n    @Inject(MAT_DIALOG_DATA) public data: any) {\n    super();\n  }\n\n  ngOnInit(): void {\n    super.ngOnInit();\n  }\n\n\n\n  onFormSubmit(){\n    if( this.dom.state.validated ){\n\n    }\n  }\n\n\n  onFormCancel(){\n    this.dom.state.loaded = false;\n    this.dom.setTimeout(`close-modal`, () => {\n      this.dialog.close(-1);\n    }, 500);\n\n  }\n\n  ngOnDestroy():void{\n    super.ngOnDestroy();\n  }\n\n}\n","import {Component, ElementRef, Inject, Input, OnDestroy, OnInit} from '@angular/core';\nimport {EntityFieldComponentInterface} from './pop-entity-field.model';\nimport {\n  CoreConfig,\n  Dictionary,\n  FIELD_CUSTOM_SETTING,\n  FieldConfig,\n  FieldCustomSettingInterface,\n  FieldEntry,\n  KeyMap,\n  PopBaseEventInterface,\n  ServiceInjector\n} from '../../../pop-common.model';\nimport {PopExtendComponent} from '../../../pop-extend.component';\nimport {\n  ArrayMapSetter,\n  ConvertArrayToOptionList,\n  DeepCopy,\n  IsArray,\n  IsDefined,\n  IsNumber,\n  IsObject,\n  IsObjectThrowError,\n} from '../../../pop-common-utility';\nimport {SelectConfig} from '../../base/pop-field-item/pop-select/select-config.model';\nimport {InputConfig} from '../../base/pop-field-item/pop-input/input-config.model';\nimport {PopDomService} from '../../../services/pop-dom.service';\nimport {IsValidFieldPatchEvent} from '../pop-entity-utility';\nimport {PopEntityFieldService} from './pop-entity-field.service';\nimport {Validators} from '@angular/forms';\nimport {ButtonConfig} from '../../base/pop-field-item/pop-button/button-config.model';\nimport {PopConfirmationDialogComponent} from '../../base/pop-dialogs/pop-confirmation-dialog/pop-confirmation-dialog.component';\nimport {MatDialog} from '@angular/material/dialog';\nimport {PopEntityFieldModalComponent} from './pop-entity-field-modal/pop-entity-field-modal.component';\n\n\n@Component({\n  template: '<div>Boiler</div>',\n})\nexport class PopEntityFieldBoilerComponent extends PopExtendComponent implements EntityFieldComponentInterface, OnInit, OnDestroy {\n  @Input() field: FieldConfig;\n  public name = 'PopEntityFieldBoilerComponent';\n\n  protected srv: {\n    dialog: MatDialog,\n    field: PopEntityFieldService,\n  } = {\n    dialog: ServiceInjector.get(MatDialog),\n    field: ServiceInjector.get(PopEntityFieldService),\n  };\n\n  public ui = {\n    actionBtnWidth: 0,\n    asset: <KeyMap<{\n      display: InputConfig,\n      entry: SelectConfig,\n      customLabel: InputConfig,\n      actionBtnWidth?: number,\n      canCallBtn?: ButtonConfig,\n      canTextBtn?: ButtonConfig,\n    }>>undefined,\n  };\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService,\n    @Inject(FIELD_CUSTOM_SETTING) public custom_setting: Dictionary<FieldCustomSettingInterface> = {}\n  ) {\n    super();\n\n\n    /**\n     * This should transformValue and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        // #1: Enforce a CoreConfig\n        this.field = IsObjectThrowError(this.field, ['id', 'data_keys'], `${this.name}:configureDom: - this.field`) ? this.field : null;\n        this.id = this.field.id;\n        this.ui.asset = {};\n        this._setInitialConfig();\n        this._transformChildren();\n\n\n        this.field.data_keys.map((dataKey: number, index) => {\n          this.dom.session[dataKey] = {};\n          this.dom.session[dataKey].display = {};\n          this.dom.state[dataKey] = {\n            open: false,\n            template: this.field.state,\n            footer_adjust: this.field.state,\n            customLabel: false\n          };\n        });\n\n        this.dom.setSubscriber(`parent-event-handler`, this.events.subscribe((event: PopBaseEventInterface) => {\n          if (IsObject(event, true)) {\n            if (event.name === 'add') {\n              this.onAdd(event);\n            }\n          }\n        }));\n\n        // this.srv.field.setFieldEntries(this.field).then(() => {\n        //   this.srv.field.setFieldValues(this.field).then(() => {\n        //     return resolve(true);\n        //   });\n        // });\n\n        return resolve(true);\n      });\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        this._restoreDomSession();\n        this._setAssetConfigs();\n        this._setFieldAttributes();\n        return resolve(true);\n      });\n    };\n  }\n\n\n  ngOnInit() {\n    super.ngOnInit();\n  }\n\n\n  /**\n   * Handle click of action button\n   * @param event\n   * @param dataKey\n   */\n  onActionEvent(event: PopBaseEventInterface, dataKey?: number) {\n    if (event.type === 'field') {\n      switch (String(event.name).toLowerCase()) {\n        // case 'add':\n        //   this.onAdd(event);\n        //   break;\n        case 'remove':\n          this.onRemove(event, dataKey);\n          break;\n        case 'edit':\n          this.onEdit(event, dataKey);\n          break;\n        case 'close':\n          this.onClose(event, dataKey);\n          break;\n        default:\n          break;\n      }\n    }\n    return true;\n  }\n\n\n  /**\n   * handle Input Changes from the field items\n   * @param event\n   * @param dataKey\n   * @param name\n   */\n  onFieldItemEvent(event: PopBaseEventInterface, dataKey: number = null, name: string = null) {\n    if (IsValidFieldPatchEvent(this.core, event)) {\n      this.onPatch(event, dataKey, name);\n    } else if (event.type === 'field') {\n      if (event.name === 'close') {\n        this.onClose(event, dataKey);\n      }\n    }\n    return true;\n  }\n\n\n  /**\n   * User wants to add a value entry  into the field\n   * @param event\n   */\n  onAdd(event: PopBaseEventInterface) {\n    // console.log('add lower', this.field.data_keys.length < this.field.entries.length, this.field.entries);\n    this.log.event(`onAdd`, event,);\n    if (this.field.data_keys.length < this.field.entries.length) {\n      const index = this.field.entries.length - 1;\n      const item = this.srv.field.addEntryValue(this.core, this.field);\n      const data = item.data;\n      delete item.data;\n\n      this.field.data[item.entry.id] = data;\n      this.field.items[item.entry.id] = item;\n\n\n      this.field.data_keys.push(item.entry.id + '');\n\n      this._setFieldItemAttribute(item.entry.id, index);\n      this._setAssetConfig(item.entry.id, index);\n      this.dom.setTimeout('open-new', () => {\n        this._updateState(item.entry.id, 'open', true);\n      }, 0);\n\n\n      // this.dom.session[ value.entry.id ] = {};\n      // this.dom.session[ value.entry.id ].display = {};\n      // this.dom.state[ value.entry.id ] = {\n      //   open: true,\n      //   template: this.field.state,\n      //   footer_adjust: this.field.state,\n      //   customLabel: false\n      // };\n\n    }\n    return true;\n  }\n\n\n  /**\n   * User wants to open the value entry and make edits\n   * @param event\n   */\n\n  onEdit(event?: PopBaseEventInterface, dataKey?: number) {\n\n    this.log.event(`onEdit`, event);\n    if (this.field.modal) {\n      console.log('has modal');\n\n      const dialogRef = this.srv.dialog.open(PopEntityFieldModalComponent, {\n        width: `${window.innerWidth * .50}px`,\n        height: `${window.innerHeight * .50}px`,\n        panelClass: 'sw-relative',\n        data: {\n          core: this.core,\n          field: this.field\n        }\n      });\n\n\n      this.dom.subscriber.dialog = dialogRef.beforeClosed().subscribe((changed) => {\n        if (changed || this.dom.state.refresh) {\n          // this._configureTable();up\n        }\n        this.dom.state.blockModal = false;\n      });\n    } else {\n      this.dom.state.template = 'template_edit';\n      this.dom.state.open = true;\n      if (IsDefined(dataKey) && this.dom.state[dataKey]) {\n        this.dom.state[dataKey].template = 'template_edit';\n        this.dom.state[dataKey].open = true;\n      } else {\n        Object.keys(this.dom.state).map((key) => {\n          if (IsNumber(key)) {\n            this.dom.state[key].template = 'template_edit';\n            this.dom.state[key].open = true;\n          }\n        });\n      }\n      this.dom.store('state');\n      return true;\n    }\n  }\n\n\n  /**\n   * User wants to remove a value entry\n   * @param event\n   */\n  onRemove(event: PopBaseEventInterface, dataKey: number) {\n    this.log.event(`onRemove`, event);\n    if (this.field.facade) {\n      this.onBubbleEvent('remove', {dataKey: dataKey});\n    } else {\n      this.srv.dialog.open(PopConfirmationDialogComponent, {\n        width: '350px',\n        data: {\n          option: null,\n          body: `Delete this field value?`\n        }\n      }).afterClosed().subscribe(option => {\n        if (option && option.confirmed) {\n          this.srv.field.removeEntryValue(this.core, this.field, dataKey).then((res) => {\n            delete this.field.data[dataKey];\n            delete this.field.items[dataKey];\n            this.field.data_keys.pop();\n            delete this.dom.state[dataKey];\n            delete this.ui.asset[dataKey];\n            delete this.dom.session[dataKey];\n            this.dom.store('session');\n            this.onBubbleEvent('remove', {dataKey: dataKey});\n          });\n\n        }\n      });\n    }\n\n\n    return true;\n  }\n\n\n  /**\n   * User closes the edit ability of the value entries\n   * @param event\n   */\n\n  onClose(event: PopBaseEventInterface, dataKey?: number) {\n    this.log.event(`onClose`, event);\n    this.dom.state.open = false;\n    this.dom.state.template = 'template_readonly';\n    if (dataKey) {\n      this.dom.state[dataKey].template = 'template_readonly';\n      this.dom.state[dataKey].open = false;\n    } else {\n      Object.keys(this.dom.state).map((key) => {\n        if (IsNumber(key)) {\n          this.dom.state[key].template = 'template_readonly';\n          this.dom.state[key].open = false;\n        }\n      });\n    }\n    this.onBubbleEvent('close');\n    return true;\n  }\n\n\n  /**\n   * A method to remove an additional values from this field\n   * @param id\n   * @param archive\n   */\n  onPatch(event: PopBaseEventInterface, dataKey: number = null, name: string = null): Promise<boolean> {\n    return new Promise(async (resolve) => {\n      event.data_key = dataKey;\n      event.column = name;\n      if (this.field.facade) {\n        this.onBubbleEvent('onPatch', null, event);\n      } else {\n        if (true) {\n          await this.srv.field.updateFieldItem(this.core, this.field, event);\n          this.field.data[dataKey][name] = event.config.control.value;\n          this._triggerUpdateAssetDisplay(dataKey);\n        }\n      }\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * Handle the bubble events that come up\n   * @param event\n   */\n  onBubbleEvent(name: string, extension?: Dictionary<any>, event?: PopBaseEventInterface): boolean {\n    if (!event) event = {source: this.name, type: 'field', name: name};\n    if (extension) event = {...event, ...extension};\n    this.log.event(`bubbleEvent`, event);\n    this.events.emit(event);\n    return true;\n  }\n\n\n  /**\n   * Clean up dom subscribers, interval, timeouts, ..etc\n   */\n  ngOnDestroy() {\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                   Base Protected Methods                                     *\n   *                                    ( Protected Method )                                      *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  /**\n   * Set the initial config\n   * Intended to be overridden per field\n   */\n  protected _setInitialConfig(): void {\n  }\n\n\n  /**\n   * Pass in any session changes\n   * The user may change tabs and the state should be restored\n   */\n  protected _restoreDomSession() {\n    this.field.data_keys.map((dataKey: number, index) => {\n      if (IsObject(this.dom.session[dataKey], true)) {\n        const item = this.field.items[dataKey];\n        const session = this.dom.session[dataKey];\n        if (IsObject(session.entry, ['id'])) {\n          item.entry = session.entry;\n        }\n      }\n    });\n  }\n\n\n  /**\n   * Build the default configs that are across all the fieelds\n   */\n  protected _setAssetConfigs() {\n    this.srv.field.setFieldCustomSetting(this.field, this.custom_setting);\n    delete this.custom_setting;\n    this.field.data_keys.map((dataKey: number, index) => {\n      this._setAssetConfig(+dataKey, index);\n    });\n  }\n\n\n  /**\n   * Labels are a built in method that all fields should need\n   * @param dataKey\n   * @param index\n   * @private\n   */\n  protected _setAssetConfig(dataKey: number, index: number) {\n\n    const customEntries = DeepCopy(this.field.entries).filter((entry) => {\n      return entry.type === 'custom';\n    });\n    const providedEntries = DeepCopy(this.field.entries).filter((entry) => {\n      return entry.type !== 'custom';\n    });\n    const entries = [...providedEntries];\n\n    const item = this.field.items[dataKey];\n\n    if (!item.entry) {\n      item.entry = this.field.entries[0];\n    }\n\n    this._updateDisplayField(dataKey, 'label', item.entry.name);\n\n    const customLabel = this.field.setting.edit_label && this.field.setting.custom_label && item.entry.type === 'custom' ? true : false;\n\n    this._updateState(dataKey, 'custom_label', customLabel);\n\n    if (this.field.setting.custom_label && IsArray(customEntries, true)) entries.push(customEntries[customEntries.length - 1]);\n    // ToDo:: Add api calls to store values for these configs\n    if (!IsObject(this.ui.asset[dataKey], true)) {\n      this.ui.asset[dataKey] = {\n        display: new InputConfig({\n          readonly: true,\n          label: item.entry.name,\n          value: this._getAssetDisplayStr(dataKey),\n          // minimal: true,\n        }),\n\n        entry: new SelectConfig({\n          label: 'Label',\n          value: item.entry ? item.entry.id : null,\n          options: {values: ConvertArrayToOptionList(entries)},\n          minimal: true,\n          facade: true,\n          patch: {\n            field: ``,\n            path: ``,\n            callback: (core: CoreConfig, event: PopBaseEventInterface) => {\n              if (IsValidFieldPatchEvent(core, event)) {\n                this._updateFieldEntry(dataKey, +event.config.control.value);\n              }\n            }\n          }\n        }),\n        customLabel: new InputConfig({\n          label: 'Custom Label',\n          value: this.dom.session[dataKey].customLabel ? this.dom.session[dataKey].customLabel : '',\n          required: true,\n          validators: [Validators.required],\n          maxlength: 24,\n          // minimal: true,\n          facade: true,\n          patch: {\n            field: ``,\n            path: ``,\n            callback: (core: CoreConfig, event: PopBaseEventInterface) => {\n              if (IsValidFieldPatchEvent(core, event)) {\n                this._updateCustomEntryLabel(dataKey, event.config.control.value);\n              }\n            }\n          }\n        })\n      };\n    }\n\n    this._updateCustomLabelState(dataKey, item.entry);\n  }\n\n\n  /**\n   * Updates when a values changes it label/entry\n   * @param dataKey\n   * @param entryId\n   */\n  protected _updateFieldEntry(dataKey: number, entryId: number) {\n    const item = this.field.items[dataKey];\n    if (IsObject(item, true)) {\n      const entryLookup = ArrayMapSetter(this.field.entries, 'id');\n      const entry = this.field.entries[entryLookup[entryId]];\n      item.entry = entry;\n      this.dom.session[dataKey].entry = entry;\n      this.dom.store('session');\n      this._updateCustomLabelState(dataKey, entry);\n    }\n  }\n\n\n  /**\n   * Updates the custom label if the user chooses to make a custom entry label\n   * @param dataKey\n   * @param value\n   */\n  protected _updateCustomEntryLabel(dataKey: number, value: string) {\n    const item = this.field.items[dataKey];\n    if (IsObject(item, true)) {\n      this._updateDisplayField(dataKey, 'label', value);\n      if (IsObject(this.dom.session[dataKey], true)) {\n        this.dom.session[dataKey].customLabel = value;\n        this.dom.store('session');\n\n      }\n\n      this._updateDisplayLabel(dataKey, value);\n      // ToDo:: Figure where to save this\n    }\n  }\n\n\n  /**\n   * Ensure the state of the view matches up according to the stored entry/label\n   * Custom Labels need special handling\n   * @param dataKey\n   * @param entry\n   */\n  protected _updateCustomLabelState(dataKey: number, entry: FieldEntry) {\n    if (dataKey && IsObject(entry, ['id', 'type', 'name'])) {\n      const isCustom = entry.type === 'custom';\n      if (isCustom) {\n        this._updateState(dataKey, 'customLabel', (this.field.setting.edit_label && isCustom ? true : false));\n        if (!this.ui.asset[dataKey].customLabel.control.value) {\n          this.ui.asset[dataKey].customLabel.control.setValue('Custom', {emitEvent: true});\n          this._updateDisplayField(dataKey, 'label', 'Custom');\n        } else {\n          const previousCustomLabel = this.ui.asset[dataKey].customLabel.control.value;\n          this._updateDisplayField(dataKey, 'label', previousCustomLabel);\n          if (this.dom.session.entry) {\n            this.dom.session.entry.name = previousCustomLabel;\n          }\n        }\n        this._updateDisplayLabel(dataKey, this.ui.asset[dataKey].customLabel.control.value);\n      } else {\n        this._updateState(dataKey, 'customLabel', false);\n        this._updateDisplayField(dataKey, 'label', entry.name);\n        this._updateDisplayLabel(dataKey, entry.name);\n      }\n    }\n  }\n\n\n  /**\n   * Update the display label of the value config\n   * Some fields only use a single field item that is defaulted to the value column\n   * @param dataKey\n   * @param value\n   */\n  protected _updateDisplayLabel(dataKey: number, value: string) {\n    const item = this.field.items[dataKey];\n    if (IsObject(item, true)) {\n      const configs = <any>item.config;\n      const valueConfig = IsObject(item.config, ['value']) ? <InputConfig>configs.value : null;\n      if (IsObject(valueConfig, true)) { // this means that it a a simple field,\n        valueConfig.label = value;\n      }\n      this.ui.asset[dataKey].display.label = value;\n    }\n  }\n\n\n  /**\n   * Set the Display of a specific value entry\n   * Sometime a display input is used to combine all the values into one, it appears in the readonly state\n   * @param dataKey\n   */\n  protected _updateAssetDisplay(dataKey: number) {\n    if (this.ui.asset && this.ui.asset[dataKey]) {\n      const display = <InputConfig>this.ui.asset[dataKey].display;\n      display.value = this._getAssetDisplayStr(dataKey);\n      this.dom.setTimeout(`display-update-${dataKey}`, () => {\n        display.control.value = display.value;\n      }, 0);\n    }\n  }\n\n\n  /**\n   * Debounce requests for set phone display\n   * @param dataKey\n   */\n  protected _triggerUpdateAssetDisplay(dataKey: number) {\n    this.dom.setTimeout(`field-display-${dataKey}`, () => {\n      this._updateAssetDisplay(dataKey);\n    }, 100);\n  }\n\n\n  /**\n   * Session the display value for a field item change\n   * In some cases the value that is selected is not necessarily what should be presented, so we track it separately just in case\n   * Ie ... when an id is selected when need to show the appropriate label that should go with it not the id itself\n   * @param dataKey\n   * @param field\n   * @param value\n   */\n  protected _updateDisplayField(dataKey: number, field: string, value: string) {\n    if (IsDefined(dataKey) && IsObject(this.dom.session)) {\n      if (!IsObject(this.dom.session[dataKey])) this.dom.session[dataKey] = {};\n      if (!IsObject(this.dom.session[dataKey].display)) this.dom.session[dataKey].display = {};\n      this.dom.session[dataKey].display[field] = value;\n      // this.dom.store('session');\n    }\n  }\n\n\n  /**\n   * Get the actual data object for a specific key\n   * Pass in a field key if you want a only a certain field value\n   * @param dataKey\n   * @param fieldKey\n   */\n  protected _getDataKey(dataKey: number, fieldKey?: string) {\n    let data = IsObjectThrowError(this.field.data, true, `${this.name}:getDataKey`) ? this.field.data[dataKey] : null;\n    if (data && fieldKey) {\n      data = fieldKey in data ? data[fieldKey] : null;\n    }\n    return data;\n  }\n\n\n  /**\n   * Builds the display string\n   * Override in each field component as necessary\n   * @param dataKey\n   */\n  protected _getAssetDisplayStr(dataKey: number): string {\n    let str = '';\n    const configs = this._getDataKeyItemConfig(dataKey);\n    Object.keys(configs).map((name) => {\n      const config = configs[name];\n      if (config.control && config.control.value) {\n        str += (' ' + config.control.value);\n      }\n    });\n    return String(str).trim();\n  }\n\n\n  /**\n   * This will be different for each type of field group\n   * Intended to be overridden in each class, gives the mutate/transform resources if needed\n   */\n  protected _transformChildren() {\n\n  }\n\n\n  /**\n   * This will be different for each type of field group\n   * Intended to be overridden in each class\n   */\n  protected _setFieldAttributes(): boolean {\n\n    return true;\n  }\n\n\n  /**\n   * This will be different for each type of field group\n   * Intended to be overridden in each class\n   */\n  protected _setFieldItemAttribute(dataKey: number, index: number): boolean {\n\n    return true;\n  }\n\n\n  /**\n   * Get the item configs for a of a dataKey\n   * Pass in a fieldKey if you only want the item config of a certain field\n   * @param dataKey\n   * @param fieldKey\n   */\n  protected _getDataKeyItemConfig(dataKey: number, fieldKey?: string) {\n    const data = IsObjectThrowError(this.field.items[dataKey], true, `${this.name}:_getDataKeyItem`) ? this.field.items[dataKey] : null;\n    if (fieldKey) {\n      const config = IsObjectThrowError(data.config[fieldKey], true, `${this.name}:_getDataKeyItem:${fieldKey}`) ? data.config[fieldKey] : null;\n      return config;\n    }\n    return data.config;\n  }\n\n\n  /**\n   * Resolve a value to the name that goes with it from the option list\n   * @param value\n   * @param index\n   */\n  protected _getTypeOptionName(value: string, index: number): string {\n    const typeConfig = <SelectConfig>this._getDataKeyItemConfig(this.field.data_keys[index], 'type');\n    if (typeConfig.options) {\n      const optionsMap = ArrayMapSetter(typeConfig.options.values, 'value');\n      const option = value in optionsMap ? typeConfig.options.values[optionsMap[value]] : null;\n      if (option) {\n        return option.name;\n      }\n      return value;\n    }\n    return '';\n  }\n\n\n  /**\n   * Resolve a value to the name that goes with it from the option list\n   * @param value\n   * @param index\n   */\n  protected _getEntryOptionName(value: string, index: number): string {\n    const titleConfig = <SelectConfig>this._getDataKeyItemConfig(this.field.data_keys[index], 'title');\n    if (titleConfig.options) {\n      const optionsMap = ArrayMapSetter(titleConfig.options.values, 'value');\n      const option = value in optionsMap ? titleConfig.options.values[optionsMap[value]] : null;\n      if (option) {\n        return option.name;\n      }\n      return value;\n    }\n    return '';\n  }\n\n\n  /**\n   * Get the value entry of a specific index\n   * @param index\n   */\n  protected _getValueEntry(index: number): FieldEntry {\n    if (IsArray(this.field.entries, true)) {\n      return IsObject(this.field.entries[index], true) ? this.field.entries[index] : this.field.entries[0];\n    }\n    return null;\n  }\n\n\n  /**\n   * Helper method to update a state variable, and make sure that a state object exits for each data key\n   * @param dataKey\n   * @param field\n   * @param value\n   */\n  protected _updateState(dataKey: number, field: string, value: string | boolean | number) {\n    if (IsDefined(dataKey) && IsObject(this.dom.state)) {\n      if (!IsObject(this.dom.state[dataKey])) {\n        this.dom.state[dataKey] = {\n          open: false,\n          template: this.field.state,\n          footer_adjust: this.field.state,\n          customLabel: false\n        };\n      }\n      this.dom.state[dataKey][field] = value;\n    }\n  }\n\n}\n\n","import { Component, ElementRef, Input, OnDestroy, OnInit, } from '@angular/core';\nimport { EntityFieldComponentInterface } from '../pop-entity-field.model';\nimport { FieldConfig } from '../../../../pop-common.model';\nimport { PopEntityFieldBoilerComponent as FieldTemplate } from '../pop-entity-field-boiler.component';\nimport { PopDomService } from '../../../../services/pop-dom.service';\nimport { NameFieldSetting } from './name.setting';\n\n\n@Component({\n  selector: 'lib-pop-entity-name',\n  templateUrl: './pop-entity-name.component.html',\n  styleUrls: [ './pop-entity-name.component.scss' ],\n})\nexport class PopEntityNameComponent extends FieldTemplate implements EntityFieldComponentInterface, OnInit, OnDestroy  {\n  @Input() field: FieldConfig;\n\n  public name = 'PopEntityNameComponent';\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService\n  ){\n    super(el, _domRepo, NameFieldSetting);\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { PopExtendComponent } from '../../../../pop-extend.component';\nimport { FieldConfig, PopBaseEventInterface } from '../../../../pop-common.model';\nimport { TimeConfig } from '../../../base/pop-field-item/pop-time/time-config.model';\nimport { DateConfig } from '../../../base/pop-field-item/pop-date/date-config.model';\nimport { ConvertDateFormat, ConvertDateToTimeFormat } from '../../../../pop-common-utility';\n\n\n@Component({\n  selector: 'lib-pop-entity-datetime',\n  templateUrl: './pop-entity-datetime.component.html',\n  styleUrls: [ './pop-entity-datetime.component.scss' ]\n})\nexport class PopEntityDatetimeComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() field: FieldConfig;\n\n  public name ='PopEntityDatetimeComponent';\n\n\n  constructor(\n    public el: ElementRef,\n  ){\n    super();\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        this.id = this.field.id;\n        this.trait.bubble = true;\n        this.dom.state.open = false;\n        this.dom.state.footer_adjust = false;\n        this.dom.state.row1 = {\n          first: true,\n          visible: true,\n        };\n        this.setDateItem();\n        this.setTimeItem();\n        resolve(true);\n      });\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  setDateItem(): void{\n    let dateValue = this.field.items[ 'datetime' ].value ? ConvertDateFormat(this.field.items[ 'datetime' ].value, 'mm/dd/yyyy') : null;\n    dateValue = dateValue === '12/31/1969' ? null : dateValue;\n    // console.log(dateValue, 'dateValue');\n    this.field.items[ 'date' ] = new DateConfig({\n      label: 'Date',\n      value: dateValue,\n    });\n  }\n\n\n  setTimeItem(): void{\n    const timeValue = this.field.items[ 'datetime' ].value ? ConvertDateToTimeFormat(this.field.items[ 'datetime' ].value) : null;\n    this.field.items[ 'time' ] = new TimeConfig({\n      label: 'Time',\n      time: 12,\n      interval: 1,\n      value: timeValue,\n    });\n  }\n\n\n  emitInputEvent(name, config: any, message: string = null, success: boolean = null): void{\n    if( this.field.options.bubble ) this.events.emit({ source: this.name, type: 'field', name: name, config: config, success: success, message: message });\n  }\n\n\n  handleDateEvent(event): void{\n    const items = this.field.items;\n    if( items[ 'datetime' ] && items[ 'time' ] && items[ 'time' ].value ){\n      const datetimeValue = ConvertDateFormat(items[ 'date' ].control.value, 'yyyy-mm-dd') + ' ' + items[ 'time' ].control.value;\n      // console.log(datetimeValue, 'datetimeValue');\n      items[ 'datetime' ].triggerOnChange(datetimeValue);\n    }\n    if( this.field.options.bubble ){\n      this.emitInputEvent(event.name, this.field.items[ 'date' ]);\n    }\n    // this.events.emit(event);\n  }\n\n\n  handleEvent(event: PopBaseEventInterface): void{\n    // console.log(event, 'handleEventEmail');\n\n    this.events.emit(event);\n  }\n\n\n  handleTimeEvent(event){\n    if( event.type === 'field' && event.name === 'onChange' ){\n      const items = this.field.items;\n      if( items[ 'datetime' ] && items[ 'date' ] && items[ 'date' ].value ){\n        const datetimeValue = ConvertDateFormat(items[ 'date' ].control.value, 'yyyy-mm-dd') + ' ' + items[ 'time' ].control.value;\n        console.log(datetimeValue, 'datetimeValue');\n        items[ 'datetime' ].triggerOnChange(datetimeValue);\n      }\n    }\n\n    if( this.field.options.bubble ){\n      this.emitInputEvent(event.name, this.field.items[ 'time' ]);\n    }\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { EntityFieldComponentInterface } from '../pop-entity-field.model';\nimport { FieldConfig } from '../../../../pop-common.model';\nimport { PopEntityFieldBoilerComponent as FieldTemplate } from '../pop-entity-field-boiler.component';\nimport { PopDomService } from '../../../../services/pop-dom.service';\nimport { EmailFieldSetting } from './email.setting';\nimport { ButtonConfig } from '../../../base/pop-field-item/pop-button/button-config.model';\nimport { SelectConfig } from '../../../base/pop-field-item/pop-select/select-config.model';\nimport { InputConfig } from '../../../base/pop-field-item/pop-input/input-config.model';\nimport { Validators } from '@angular/forms';\n\n\n@Component({\n  selector: 'lib-pop-entity-email',\n  templateUrl: './pop-entity-email.component.html',\n  styleUrls: [ './pop-entity-email.component.scss' ],\n})\nexport class PopEntityEmailComponent extends FieldTemplate implements EntityFieldComponentInterface, OnInit, OnDestroy {\n  @Input() field: FieldConfig;\n\n\n  public name = 'PopEntityEmailComponent';\n\n  protected asset = {\n    extensionKeys: [ 'action' ],\n  };\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService\n  ){\n    super(el, _domRepo, EmailFieldSetting);\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /**\n   * This will setup this field to handle changes and transformations\n   */\n  protected _setFieldAttributes(): boolean{\n\n    if( this.field && this.field.items ){\n      Object.keys(this.field.items).map((dataKey, index) => {\n        this._setFieldItemAttribute(+dataKey, index);\n      });\n    }\n    return true;\n  }\n\n\n  /**\n   * This will be different for each type of field group\n   * Intended to be overridden in each class\n   */\n  protected _setFieldItemAttribute(dataKey: number, index: number): boolean{\n\n    const item = this.field.items[ dataKey ];\n    const configKeys = Object.keys(item.config);\n\n    this.dom.state.has_extension = configKeys.some(r => this.asset.extensionKeys.includes(r));\n\n    if( 'action' in item.config ){\n      this.ui.actionBtnWidth = 50;\n      item.config[ 'action' ] = new ButtonConfig({\n        icon: 'email',\n        size: 42,\n        value: null,\n        // disabled: true\n      });\n    }\n\n\n    if( 'address' in item.config ){\n      const child = this.field.children[ 'address' ];\n      const addressConfig = <InputConfig>item.config[ 'address' ];\n      addressConfig.pattern = 'Email';\n      addressConfig.type = 'email';\n      const validators = [];\n      validators.push(Validators.email);\n      if( +child.rule.required ) validators.push(Validators.required);\n      if( +child.rule.maxlength ) validators.push(Validators.maxLength(+child.rule.maxlength));\n      addressConfig.validators = validators;\n      if( this.field.multiple ) addressConfig.label = this.field.entries[ index ].name;\n      addressConfig.patch.callback = () => {\n        this._updateAddress(+dataKey, index);\n      };\n      this._updateAddress(+dataKey, index);\n    }\n\n    return true;\n  }\n\n\n  private _updateAddress(dataKey: number, index: number){\n    const addressConfig = <SelectConfig>this._getDataKeyItemConfig(dataKey, 'address');\n    if( addressConfig.metadata.source ){\n      const value = addressConfig.control.value;\n      addressConfig.value = value;\n\n      this._triggerUpdateAssetDisplay(dataKey);\n    }\n  }\n\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { EntityFieldComponentInterface } from '../pop-entity-field.model';\nimport { InputConfig } from '../../../base/pop-field-item/pop-input/input-config.model';\nimport { FieldConfig, FieldEntry } from '../../../../pop-common.model';\nimport { ArrayMapSetter, IsArray, IsObject, SnakeToPascal, TitleCase } from '../../../../pop-common-utility';\nimport { SelectConfig } from '../../../base/pop-field-item/pop-select/select-config.model';\nimport { PopDomService } from '../../../../services/pop-dom.service';\nimport { ButtonConfig } from '../../../base/pop-field-item/pop-button/button-config.model';\nimport { PopEntityFieldBoilerComponent as FieldTemplate } from '../pop-entity-field-boiler.component';\nimport { PhoneFieldSetting } from './phone.setting';\n\n\n@Component({\n  selector: 'lib-pop-entity-phone',\n  templateUrl: './pop-entity-phone.component.html',\n  styleUrls: [ './pop-entity-phone.component.scss' ]\n})\nexport class PopEntityPhoneComponent extends FieldTemplate implements EntityFieldComponentInterface, OnInit, OnDestroy {\n  @Input() field: FieldConfig;\n  public name = 'PopEntityPhoneComponent';\n\n  protected asset = {\n    extensionKeys: [ 'type', 'voice_button', 'sms_button', 'do_not_call', 'do_not_sms', 'country_id' ],\n  };\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService\n  ){\n    super(el, _domRepo, PhoneFieldSetting);\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                  Override Inherited Methods                                  *\n   *                                    ( Protected Methods )                                     *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  /**\n   * Builds the display string\n   * @param dataKey\n   */\n  protected _getAssetDisplayStr(dataKey: number): string{\n    let str = '';\n    const display = this.dom.session[ dataKey ].display;\n    const items = this._getDataKeyItemConfig(dataKey);\n    if( 'country_id' in items && display[ 'country_id' ] ){\n      str += `+${display[ 'country_id' ]} `;\n    }\n    if( display[ 'number' ] ){\n      str += `${display[ 'number' ]}`;\n    }\n    if( 'extension' in items && display[ 'extension' ] ){\n      str += ` Ext. ${display[ 'extension' ]} `;\n    }\n    return str;\n  }\n\n\n  /**\n   * This will setup this field to handle changes and transformations\n   */\n  protected _setFieldAttributes(): boolean{\n\n\n    if( this.field && this.field.items ){\n      Object.keys(this.field.items).map((dataKey, index) => {\n        this._setFieldItemAttribute(+dataKey, index);\n      });\n\n    }\n    return true;\n  }\n\n\n  protected _setFieldItemAttribute(dataKey: number, index: number): boolean{\n    this.ui.actionBtnWidth = 50;\n\n    let hasCallBtn = false;\n    let hasTextBtn = false;\n\n    const item = this.field.items[ dataKey ];\n    const configKeys = Object.keys(item.config);\n\n    this.dom.state.has_extension = configKeys.some(r => this.asset.extensionKeys.includes(r));\n\n    this.ui.asset[ dataKey ].canCallBtn = new ButtonConfig({\n      icon: 'local_phone',\n      value: null,\n      // disabled: true\n    });\n    this.ui.asset[ dataKey ].canTextBtn = new ButtonConfig({\n      icon: 'textsms',\n      value: null,\n      // disabled: true\n    });\n\n\n    if( 'type' in item.config ){\n      // If type is set, use as the label of the phone number\n      const typeConfig = <SelectConfig>item.config[ 'type' ];\n      this._updateNumberLabel(+dataKey, index);\n      typeConfig.patch.callback = () => {\n        this._updateNumberLabel(+dataKey, index);\n      };\n      // If value entry exists, disable type\n      // if( this.field.multiple && index in this.field.entries ){\n      //   typeConfig.control.disable();\n      // }else{\n      //   typeConfig.control.enable();\n      // }\n    }\n\n\n    if( 'stop_call_at' in item.config ){\n      // ToDo:: Figure out what this button will actually do\n      hasCallBtn = true;\n    }\n    if( 'stop_text_at' in item.config ){\n      // ToDo:: Figure out what this button will actually do\n      hasTextBtn = true;\n    }\n\n    if( 'country_id' in item.config ){\n      const countryConfig = <SelectConfig>item.config[ 'country_id' ];\n      countryConfig.patch.callback = () => {\n        this._updateCountry(+dataKey, index);\n      };\n      this._updateCountry(+dataKey, index);\n    }\n\n\n    if( 'number' in item.config ){\n      const numberConfig = <InputConfig>item.config[ 'number' ];\n      numberConfig.mask = '(000) 000-0000';\n      numberConfig.dropSpecial = false;\n      numberConfig.patch.callback = () => {\n        this._updateNumber(+dataKey, index);\n      };\n      this._updateNumber(+dataKey, index);\n    }\n\n    if( 'extension' in item.config ){\n      const extConfig = <InputConfig>item.config[ 'extension' ];\n      extConfig.mask = '0*00000';\n      extConfig.patch.callback = () => {\n        this._updateExtension(+dataKey, index);\n      };\n      this._updateExtension(+dataKey, index);\n    }\n\n    // if( itemKeys.includes('number') ){\n    // if( itemKeys.includes('country_code') || itemKeys.includes('ext') ){\n    //   this.dom.state.merged = true;\n    //   const items = [ this.field.items[ dataId ][ 'number' ] ];\n    //   if( itemKeys.includes('country_code') ) items.unshift(this.field.items[ dataId ][ 'country_code' ]);\n    //   if( itemKeys.includes('ext') ) items.push(this.field.items[ dataId ][ 'ext' ]);\n    //   this.field.items[ dataId ][ 'number' ] = this._getMergedPhone(items);\n    //\n    //   this.dom.setSubscriber('phone', this.field.items[ dataId ][ 'number' ].control.valueChanges\n    //     .pipe(\n    //       distinctUntilChanged(),\n    //       debounceTime(500),\n    //     )\n    //     .subscribe((value: string) => {\n    //       if( value ) this._validatePhone(dataId, value);\n    //     }));\n    // }\n    // }\n\n    if( hasCallBtn ) this.ui.actionBtnWidth += 50;\n    if( hasTextBtn ) this.ui.actionBtnWidth += 50;\n\n    return true;\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n\n\n  private _updateCountry(dataKey: number, index: number){\n    const countryConfig = <SelectConfig>this._getDataKeyItemConfig(dataKey, 'country_id');\n    if( countryConfig.metadata.source ){\n      const source = countryConfig.metadata.source;\n      const sourceMap = countryConfig.metadata.map.source;\n      const value = countryConfig.control.value;\n      const option = value in sourceMap ? source[ sourceMap[ value ] ] : null;\n      countryConfig.value = value;\n      console.log('_updateCountry option', option);\n      if( IsObject(option, [ 'phone_country_code' ]) ){\n        this._updateDisplayField(dataKey, 'country_id', option.phone_country_code);\n      }\n      this._triggerUpdateAssetDisplay(dataKey);\n    }\n\n  }\n\n\n  private _updateNumber(dataKey: number, index: number){\n    const numberConfig = <SelectConfig>this._getDataKeyItemConfig(dataKey, 'number');\n    const value = numberConfig.control.value;\n    this._updateDisplayField(dataKey, 'number', value);\n    numberConfig.value = value;\n\n    this._triggerUpdateAssetDisplay(dataKey);\n  }\n\n\n  private _updateExtension(dataKey: number, index: number){\n    const extConfig = <SelectConfig>this._getDataKeyItemConfig(dataKey, 'extension');\n    const value = extConfig.control.value;\n    this._updateDisplayField(dataKey, 'extension', value);\n\n    this._triggerUpdateAssetDisplay(dataKey);\n  }\n\n\n  private _updateNumberLabel(dataKey: number, index: number){\n    if( this.field.multiple && IsArray(this.field.entries, true) ){\n      this._updateNumberLabelToMatchEntry(index);\n    }else{\n      this._updateNumberLabelToMatchType(+dataKey);\n    }\n    this._triggerUpdateAssetDisplay(dataKey);\n  }\n\n\n  private _updateNumberLabelToMatchEntry(index: number){\n    const entry = <FieldEntry>this._getValueEntry(index);\n    const typeConfig = <SelectConfig>this._getDataKeyItemConfig(this.field.data_keys[ index ], 'type');\n    const numberConfig = <InputConfig>this._getDataKeyItemConfig(this.field.data_keys[ index ], 'number');\n    const stored = this._getDataKey(this.field.data_keys[ index ], 'type');\n    const display = this.ui.asset[ this.field.data_keys[ index ] ].display;\n\n    if( entry && entry.type && !stored ){\n      typeConfig.control.setValue(entry.type);\n    }\n    const value = entry ? ( entry.name ? entry.name : this._getTypeOptionName(entry.type, index) ) : ( numberConfig.label ? numberConfig.label : '' );\n    if( value ){\n      numberConfig.label = value;\n      display.label = value;\n    }\n  }\n\n\n  /**\n   * The label of value entry should match the type\n   * @param dataKey\n   */\n  private _updateNumberLabelToMatchType(dataKey: number){\n    const typeConfig = <SelectConfig>this._getDataKeyItemConfig(dataKey, 'type');\n    const numberConfig = <InputConfig>this._getDataKeyItemConfig(dataKey, 'number');\n    const optionsMap = ArrayMapSetter(typeConfig.options.values, 'value');\n    const value = typeConfig.control.value;\n    const display = this.ui.asset[ dataKey ].display;\n    const option = value in optionsMap ? typeConfig.options.values[ optionsMap[ value ] ] : null;\n    numberConfig.label = option ? option.name : TitleCase(SnakeToPascal(value));\n    display.label = numberConfig.label;\n  }\n\n\n  // private _validatePhone(dataId, value){\n  //   if( this.field.items[ dataId ][ 'number' ].control.valid ){\n  //     let values = String(value).split(' Ext. ');\n  //     let ext = String(values.pop()).match(/\\d+/g).map(Number).join('');\n  //     if( values.length ){\n  //       values = <any>values.pop();\n  //     }else{\n  //       values = <any>'';\n  //     }\n  //     const countryCode = String(values).substr(0, String(values).indexOf(' ')).match(/\\d+/g).map(Number).join('');\n  //     const number = String(values).substr(String(values).indexOf(' ') + 1).match(/\\d+/g).map(Number).join('');\n  //     if( this.log.repo.enabled('info', this.name) ) console.log(this.log.repo.message(`${this.name}:info`), this.log.repo.color('info'), [ countryCode, number, ext ]);\n  //\n  //     if( number ){\n  //       if( !ext ) ext = null;\n  //       const numberConfig = <InputConfig> this.field.items[ dataId ][ 'number' ];\n  //       if( typeof numberConfig.triggerDirectPatch === 'function' ) numberConfig.triggerDirectPatch(number);\n  //       const countryConfig = <InputConfig> this.field.items[ dataId ][ 'country_code' ];\n  //       if( typeof countryConfig.triggerOnChange === 'function' ) countryConfig.triggerOnChange(countryCode);\n  //       if( typeof countryConfig.triggerDirectPatch === 'function' ) countryConfig.triggerDirectPatch(countryCode);\n  //       const extConfig = <InputConfig> this.field.items[ dataId ][ 'ext' ];\n  //       if( typeof extConfig.triggerOnChange === 'function' ) extConfig.triggerOnChange(ext);\n  //       if( typeof extConfig.triggerDirectPatch === 'function' ) extConfig.triggerDirectPatch(ext);\n  //     }\n  //   }\n  // }\n\n\n  // private _getMergedPhone(items: InputConfig[]){\n  //   const indexItems = [];\n  //   items.forEach((item) => {\n  //     this._setItemMask(item);\n  //     this._disablePhoneItem(item);\n  //     indexItems[ item.column ] = item;\n  //   });\n  //   this._mergePhoneValues(indexItems);\n  //   if( indexItems[ 'number' ] && indexItems[ 'number' ].control.value ){\n  //     if( indexItems[ 'country_code' ] && indexItems[ 'country_code' ].control.value ){\n  //       indexItems[ 'number' ].control.value = ( indexItems[ 'country_code' ].control.value + ' ' + indexItems[ 'number' ].control.value );\n  //     }\n  //     if( indexItems[ 'ext' ] && indexItems[ 'ext' ].control.value ) indexItems[ 'number' ].control.value += ' Ext. ' + indexItems[ 'ext' ].control.value;\n  //   }\n  //   this.dom.store('state');\n  //   return indexItems[ 'number' ];\n  // }\n\n\n  // private _setItemMask(item: InputConfig): void{\n  //   switch( item.column ){\n  //     case 'country_code':\n  //       item.mask = '+0';\n  //       if( !item.mask ) item.mask = '+0';\n  //       break;\n  //     case 'ext':\n  //       item.mask = '09999999';\n  //       if( !item.mask ) item.mask = '09999999';\n  //       if( !item[ 'required' ] ) item.mask = '9' + item.mask;\n  //       break;\n  //     default:\n  //       break;\n  //   }\n  // }\n  //\n  //\n  // private _mergePhoneValues(indexItems: InputConfig[]): void{\n  //   if( indexItems[ 'country_code' ] ){\n  //     indexItems[ 'number' ].mask = indexItems[ 'country_code' ].mask + ' ' + indexItems[ 'number' ].mask;\n  //   }\n  //   if( indexItems[ 'ext' ] ){\n  //     indexItems[ 'number' ].mask += ' Ext. ' + indexItems[ 'ext' ].mask;\n  //     indexItems[ 'number' ].specialChars.push(...[ 'E', 'x', 't' ]);\n  //   }\n  // }\n  //\n  //\n  // private _disablePhoneItem(item: InputConfig): void{\n  //   item.dropSpecial = false;\n  //   item.maxlength = null;\n  //   item.patch.disabled = true;\n  //   item.control.setValidators([]);\n  // }\n\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit, ViewEncapsulation } from '@angular/core';\nimport { EntityFieldComponentInterface } from '../pop-entity-field.model';\nimport { FieldConfig, PopExternalApi, PopRequest } from '../../../../pop-common.model';\nimport { InputConfig } from '../../../base/pop-field-item/pop-input/input-config.model';\nimport { PopDomService } from '../../../../services/pop-dom.service';\nimport { AddressFieldSetting } from './address.setting';\nimport { PopEntityFieldBoilerComponent as FieldTemplate } from '../pop-entity-field-boiler.component';\nimport { SelectConfig } from '../../../base/pop-field-item/pop-select/select-config.model';\nimport { GetHttpArrayResult, IsArray, IsObject, JsonCopy } from '../../../../pop-common-utility';\nimport { Validators } from '@angular/forms';\nimport { ValidateZip } from \"../../../../services/pop-validators\";\n\n@Component({\n  selector: 'lib-pop-entity-address',\n  templateUrl: './pop-entity-address.component.html',\n  styleUrls: ['./pop-entity-address.component.scss'],\n  encapsulation: ViewEncapsulation.None,\n})\nexport class PopEntityAddressComponent extends FieldTemplate implements EntityFieldComponentInterface, OnInit, OnDestroy {\n  @Input() field: FieldConfig;\n\n  public name = 'PopEntityAddressComponent';\n\n  protected asset = {\n    extensionKeys: [],\n    states: []\n  };\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService,\n  ) {\n    super(el, _domRepo, AddressFieldSetting);\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit() {\n    super.ngOnInit();\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy() {\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                  Override Inherited Methods                                  *\n   *                                    ( Protected Methods )                                     *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  /**\n   * Set the initial config\n   * Intended to be overridden per field\n   */\n  protected _setInitialConfig(): void {\n\n    // this.field.modal = PopEntityAddressEditComponent;\n    this.field.modal = null;\n  }\n\n  /**\n   * This will be different for each type of field group\n   * Intended to be overridden in each class, gives the chance to mutate/transform resources if needed\n   */\n  protected _transformChildren() {\n    // const states = IsArray(this.field.children[ 'region_id' ].source, true) ? this.field.children[ 'region_id' ].source : null;\n    // if( states ){\n    //   this.asset.states = JsonCopy(this.field.children[ 'region_id' ].source).map((state: any) => {\n    //     state.long_name = state.name;\n    //     state.name = state.abbr;\n    //   });\n    // }\n  }\n\n\n  /**\n   * This will be different for each type of field group\n   * Intended to be overridden in each class\n   * This will setup this field to handle changes and transformations\n   */\n\n  protected _setFieldAttributes(): boolean {\n\n\n    if (this.field && this.field.items) {\n      Object.keys(this.field.items).map((dataKey, index) => {\n        this._setFieldItemAttribute(+dataKey, index);\n      });\n\n    }\n    return true;\n  }\n\n\n  protected _setFieldItemAttribute(dataKey: number, index: number): boolean {\n    const item = this.field.items[dataKey];\n    const configKeys = Object.keys(item.config);\n\n    this.dom.state.has_extension = configKeys.some(r => this.asset.extensionKeys.includes(r));\n\n    if ('line_1' in item.config) {\n      const line1Config = <SelectConfig>item.config['line_1'];\n      line1Config.patch.callback = (_core, event) => {\n      };\n    }\n\n    if ('line_2' in item.config) {\n      const line2Config = <SelectConfig>item.config['line_2'];\n      line2Config.patch.callback = (core, event) => {\n      };\n    }\n\n    if ('line_3' in item.config) {\n      const line3Config = <SelectConfig>item.config['line_3'];\n      line3Config.patch.callback = (core, event) => {\n      };\n    }\n\n    if ('region_id' in item.config) {\n      const regionConfig = <SelectConfig>item.config['region_id'];\n      const child = this.field.children['zip'];\n      const countryConfig = <SelectConfig>item.config['country_id'];\n      regionConfig.height = 250;\n      if (!child.setting?.allow_canada) {\n        const newOptions =  regionConfig.options.values.filter(region=>region['country_id'] == 1);\n        regionConfig.options.values = newOptions;\n        this._triggerUpdateAssetDisplay(dataKey);\n      }\n      // regionConfig.minimal = true;\n      regionConfig.patch.callback = () => {\n        this._updateRegionId(+dataKey, index);\n      };\n      this._updateRegionId(+dataKey, index);\n    }\n\n    if ('country_id' in item.config) {\n      const countryConfig = <SelectConfig>item.config['country_id'];\n      // countryConfig.minimal = true;\n      countryConfig.patch.callback = () => {\n        this._updateCountry(+dataKey, index);\n      };\n      this._updateCountry(+dataKey, index);\n    }\n    if ('zip' in item.config) {\n      const zipConfig = <InputConfig>item.config['zip'];\n      const countryConfig = <SelectConfig>item.config['country_id'];\n      const child = this.field.children['zip'];\n      zipConfig.validators = [Validators.required, ValidateZip];\n      zipConfig.setControl();\n      zipConfig.facade = true;\n      zipConfig.patch.callback = () => {\n        this._updateZip(+dataKey, index, child.setting);\n      };\n      // this._updateZip(+dataKey, index);\n    }\n    if ('zip_4' in item.config) {\n      const zip4Config = <InputConfig>item.config['zip_4'];\n      const zipConfig = <InputConfig>item.config['zip'];\n      const countryConfig = <SelectConfig>item.config['country_id'];\n      zip4Config.mask = '0000';\n\n      if (this._isUSA(countryConfig)) {\n        zip4Config.readonly = zipConfig.value == '' ? true : false;\n      } else zip4Config.readonly = true;\n\n      // zip4Config.minimal = true;\n      zip4Config.patch.callback = () => {\n        // this._updateZip(+dataKey, index);\n      };\n      // this._updateZip(+dataKey, index);\n    }\n    if ('county' in item.config) {\n      const countyConfig = <InputConfig>item.config['county'];\n      const countryConfig = <SelectConfig>item.config['country_id'];\n      if (!this._isUSA(countryConfig)) countyConfig.readonly = true;\n    }\n\n    return true;\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  private _updateCountry(dataKey: number, index: number) {\n    const countryConfig = <SelectConfig>this._getDataKeyItemConfig(dataKey, 'country_id');\n    const child = this.field.children['country_id'];\n    if (IsArray(child.source, true)) {\n      const value = countryConfig.control.value;\n      const option = value in child.sourceMap ? child.source[child.sourceMap[value]] : null;\n      countryConfig.value = value;\n      if (IsObject(option, ['name'])) {\n        this._updateDisplayField(dataKey, 'country_id', option.name);\n      }\n      this._triggerUpdateAssetDisplay(dataKey);\n    }\n  }\n\n\n  private _updateRegionId(dataKey: number, index: number) {\n    const stateConfig = <SelectConfig>this._getDataKeyItemConfig(dataKey, 'region_id');\n    const child = this.field.children['region_id'];\n    if (IsArray(child.source, true)) {\n      const value = stateConfig.control.value;\n      if (value) {\n        const option = value in child.sourceMap ? child.source[child.sourceMap[value]] : null;\n        stateConfig.value = value;\n\n        if (IsObject(option, ['name'])) {\n          this._updateDisplayField(dataKey, 'region_id', option.name);\n        }\n        this._triggerUpdateAssetDisplay(dataKey);\n      }\n    }\n  }\n\n  private async _updateZip(dataKey: number, index: number, customSettings) {\n    const zipConfig = <InputConfig>this._getDataKeyItemConfig(dataKey, 'zip');\n    const zip4Config = <InputConfig>this._getDataKeyItemConfig(dataKey, 'zip_4');\n    const countyConfig = <InputConfig>this._getDataKeyItemConfig(dataKey, 'county');\n    // check for +4\n    // this._validateZip(dataKey , zipConfig.control.value);\n    // Get location details from zipcode\n    if (zipConfig && zipConfig.control.value && (customSettings.allow_canada?String(zipConfig.control.value).length <= 6:String(zipConfig.control.value).length == 5) ) {\n      zip4Config.readonly = false;\n      if (customSettings?.auto_fill) {\n        this.dom.state[dataKey].loading = true;\n        const details = await this._getAddressFromZip(zipConfig.control.value);\n\n        if (IsObject(details, true)) {\n          let newCountry, newRegion;\n\n          const dataKeyConfig = this.field.items[dataKey]['config'];\n          if ('region_id' in dataKeyConfig) newRegion = this.field.children['region_id'].source.find(state => String(state['abbr']).toLowerCase() == String(details['state_prefix']).toLowerCase());\n          if ('country_id' in dataKeyConfig) newCountry = this.field.children['country_id'].source.find(country => String(country['abbrv']).toLowerCase() == String(details['country']).toLowerCase());\n          // updating location from\n          // this.field.items[dataKey]['config']['zip'].triggerOnChange(zipConfig.control.value);\n          // newCountry.abbrv='CAN'\n          if (newCountry.abbrv == \"CAN\") {\n            zip4Config.triggerOnChange(null);\n            zip4Config.readonly = true;\n\n            countyConfig.readonly = true;\n            countyConfig.triggerOnChange(null);\n          } else {\n            zip4Config.readonly = false;\n            countyConfig.readonly = false;\n          }\n          if ('city' in dataKeyConfig) {\n\n            this.field.items[dataKey]['config']['city'].triggerOnChange(details['city']);\n            this._updateDisplayField(dataKey, 'city', details['city']);\n          }\n          if ('county' in dataKeyConfig && newCountry.abbrv == \"USA\") {\n            this.field.items[dataKey]['config']['county'].triggerOnChange(details['county']);\n            this._updateDisplayField(dataKey, 'county', details['county']);\n          }\n          if ('country_id' in dataKeyConfig) {\n            this.field.items[dataKey]['config']['country_id'].triggerOnChange(newCountry['id']);\n            this._updateDisplayField(dataKey, 'county', newCountry['name']);\n          }\n          if ('region_id' in dataKeyConfig) {\n            if (IsObject(newRegion, true)) {\n              this.field.items[dataKey]['config']['region_id'].triggerOnChange(newRegion['id']);\n            } else {\n              this.field.items[dataKey]['config']['region_id'].triggerOnChange(null);\n            }\n          }\n\n          this.dom.state[dataKey].loading = false;\n          this.dom.state[dataKey].zipError = null;\n        } else {\n          this.dom.state[dataKey].zipError = 'Invalid ZipCode';\n          this.dom.state[dataKey].loading = false;\n        }\n      }\n\n    } else {\n      this.dom.state[dataKey].zipError = 'Invalid ZipCode';\n      if (zip4Config.control.value) {\n        zip4Config.triggerOnChange(null);\n      }\n      zip4Config.readonly = true;\n      zipConfig.triggerOnChange(null);\n    }\n\n    const child = this.field.children['zip'];\n    if (IsArray(child.source, true)) {\n      const value = zipConfig.control.value;\n      // console.log(value);\n      if (value) {\n        const option = value in child.sourceMap ? child.source[child.sourceMap[value]] : null;\n        zipConfig.value = value;\n        if (IsObject(option, ['name'])) {\n          this._updateDisplayField(dataKey, 'zip', option.name);\n        }\n        this._triggerUpdateAssetDisplay(dataKey);\n      }\n    }\n  }\n  /**\n   *\n   * @param countryConfig\n   * @returns\n   */\n  private _isUSA(countryConfig) {\n    if (countryConfig.value && IsArray(countryConfig?.options?.values, true)) {\n      const country = countryConfig.options.values.find(country => country.value == countryConfig.value);\n      if (country.name.toLowerCase().split(' ').join('') != 'unitedstates') return false\n      else return true;\n    } else return true;\n  }\n  private _getAddressFromZip(zipcode: string) {\n    return new Promise((resolve, reject) => {\n      PopRequest.doGet(`legacy/data/zip-codes?zip_code=${zipcode}`).subscribe(res => {\n        res = GetHttpArrayResult(res).pop() || [];\n        return resolve(res);\n\n      });\n    });\n\n  }\n\n  // private _validateZip(dataId, value) {\n  //   console.log(this.field.items, dataId);\n  //\n  //   if (this.field.items[dataId]['config']['zip'].control.valid) {\n  //     const [newZip, newZip_4] = String(value).split('-');\n  //     const zip = newZip;\n  //     let zip_4 = newZip_4;\n  //     if (zip) {\n  //       if (!zip_4) zip_4 = null;\n  //       if (zip_4 && String(+zip_4).length !== 4) {\n  //\n  //         this.field.items[dataId]['config']['zip'].control.setErrors({zip_4: 'The +4 is invalid'});\n  //         this.field.items[dataId]['config']['zip'].message = 'The +4 is invalid';\n  //       } else {\n  //         this.field.items[dataId]['config']['zip'].control.setErrors();\n  //         this.field.items[dataId]['config']['zip'].message = '';\n  //       }\n  //       // const zipConfig = <InputConfig> this.field.items[ dataId ][ 'zip' ];\n  //       // if( typeof zipConfig.triggerDirectPatch === 'function' ) zipConfig.triggerDirectPatch(zip);\n  //       // const zip_4Config = <InputConfig> this.field.items[ dataId ][ 'zip_4' ];\n  //       // if( typeof zip_4Config.triggerOnChange === 'function' ) zip_4Config.triggerOnChange(zip_4);\n  //       // if( typeof zip_4Config.triggerDirectPatch === 'function' ) zip_4Config.triggerDirectPatch(zip_4);\n  //     }\n  //   }\n  // }\n\n  // private _getMergedZip(zip: InputConfig, zip_4: InputConfig) {\n  //   if (!zip_4.mask) zip_4.mask = '90000';\n  //   if (!zip_4['required']) zip_4.mask = '9' + zip_4.mask;\n  //   zip.mask = '00009';\n  //   zip.mask = zip.mask + '-' + zip_4.mask;\n  //   zip.maxlength = null;\n  //   zip.dropSpecial = false;\n  //   zip.patch.disabled = true;\n  //\n  //   zip_4.patch.disabled = true;\n  //   zip.control.setValidators([]);\n  //   zip_4.control.setValidators([]);\n  //   if (zip_4.control.value && zip_4.control.value) {\n  //     zip.control.value = (zip.control.value + '-' + zip_4.control.value);\n  //   }\n  //   this.dom.state.merged = true;\n  //   this.dom.store('state');\n  //   return zip;\n  // }\n\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { EntityFieldComponentInterface } from '../pop-entity-field.model';\nimport { FieldConfig } from '../../../../pop-common.model';\nimport { PopEntityFieldBoilerComponent as FieldTemplate } from '../pop-entity-field-boiler.component';\nimport { PopDomService } from '../../../../services/pop-dom.service';\nimport { StorageGetter } from '../../../../pop-common-utility';\nimport { InputFieldSetting } from './input.settings';\n\n\n@Component( {\n  selector: 'lib-pop-entity-input',\n  templateUrl: './pop-entity-input.component.html',\n  styleUrls: [ './pop-entity-input.component.scss' ]\n} )\nexport class PopEntityInputComponent extends FieldTemplate implements EntityFieldComponentInterface, OnInit, OnDestroy {\n  @Input() field: FieldConfig;\n\n  public name = 'PopEntityInputComponent';\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService\n  ){\n    super( el, _domRepo, InputFieldSetting );\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                  Override Inherited Methods                                  *\n   *                                    ( Protected Methods )                                     *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  /**\n   * This will setup this field to handle changes and transformations\n   */\n  protected _setFieldAttributes(): boolean{\n    const defaultLabel = StorageGetter( this.field, [ 'children', 'value', 'model', 'label' ] );\n    if( this.field && this.field.items ){\n      Object.keys( this.field.items ).map( ( dataKey, index ) => {\n        const item = this.field.items[ dataKey ];\n        item.config.value.label = item.entry ? item.entry.name : defaultLabel;\n      } );\n    }\n    return true;\n  }\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { FieldConfig } from '../../../../pop-common.model';\nimport { EntityFieldComponentInterface } from '../pop-entity-field.model';\nimport { PopEntityFieldBoilerComponent as FieldTemplate } from '../pop-entity-field-boiler.component';\nimport { PopDomService } from '../../../../services/pop-dom.service';\nimport { SelectFieldSetting } from './select.setting';\nimport { StorageGetter } from '../../../../pop-common-utility';\n\n\n@Component({\n  selector: 'lib-pop-entity-select',\n  templateUrl: './pop-entity-select.component.html',\n  styleUrls: [ './pop-entity-select.component.scss' ]\n})\nexport class PopEntitySelectComponent extends FieldTemplate implements EntityFieldComponentInterface, OnInit, OnDestroy {\n  @Input() field: FieldConfig;\n\n  public name = 'PopEntitySelectComponent';\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService\n  ){\n    super(el, _domRepo, SelectFieldSetting);\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n  /**\n   * This will setup this field to handle changes and transformations\n   */\n  protected _setFieldAttributes(): boolean{\n    const defaultLabel = StorageGetter(this.field, [ 'children', 'value', 'model', 'label' ]);\n    const entryLabel = this.field.entries[ 0 ].name;\n    if( this.field && this.field.items ){\n      Object.keys(this.field.items).map((dataKey, index) => {\n        const item = this.field.items[ dataKey ];\n        if( this.field.multiple ){\n          item.config.value.label = this.dom.session[ dataKey ].display.label;\n        }else{\n          item.config.value.label = entryLabel ? entryLabel : defaultLabel;\n        }\n      });\n    }\n    return true;\n  }\n\n\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { FieldConfig } from '../../../../pop-common.model';\nimport { PopEntityFieldBoilerComponent as FieldTemplate } from '../pop-entity-field-boiler.component';\nimport { EntityFieldComponentInterface } from '../pop-entity-field.model';\nimport { PopDomService } from '../../../../services/pop-dom.service';\nimport { StorageGetter } from '../../../../pop-common-utility';\nimport { RadioFieldSetting } from './radio.setting';\n\n\n@Component( {\n  selector: 'lib-pop-entity-radio',\n  templateUrl: './pop-entity-radio.component.html',\n  styleUrls: [ './pop-entity-radio.component.scss' ]\n} )\nexport class PopEntityRadioComponent extends FieldTemplate implements EntityFieldComponentInterface, OnInit, OnDestroy {\n  @Input() field: FieldConfig;\n\n  public name = 'PopEntityRadioComponent';\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService\n  ){\n    super( el, _domRepo, RadioFieldSetting );\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                  Override Inherited Methods                                  *\n   *                                    ( Protected Methods )                                     *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  /**\n   * This will setup this field to handle changes and transformations\n   */\n  protected _setFieldAttributes(): boolean{\n    const defaultLabel = StorageGetter( this.field, [ 'children', 'value', 'model', 'label' ], '' );\n    if( this.field && this.field.items ){\n      Object.keys( this.field.items ).map( ( dataKey, index ) => {\n        const item = this.field.items[ dataKey ];\n        item.config.value.label = item.entry ? item.entry.name : defaultLabel;\n      } );\n    }\n    return true;\n  }\n\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { EntityFieldComponentInterface } from '../pop-entity-field.model';\nimport { FieldConfig } from '../../../../pop-common.model';\nimport { PopEntityFieldBoilerComponent as FieldTemplate } from '../pop-entity-field-boiler.component';\nimport { PopDomService } from '../../../../services/pop-dom.service';\nimport { StorageGetter } from '../../../../pop-common-utility';\nimport { CheckboxFieldSetting } from './checkbox.setting';\n\n\n@Component({\n  selector: 'lib-pop-entity-checkbox',\n  templateUrl: './pop-entity-checkbox.component.html',\n  styleUrls: [ './pop-entity-checkbox.component.scss' ]\n})\nexport class PopEntityCheckboxComponent extends FieldTemplate implements EntityFieldComponentInterface, OnInit, OnDestroy {\n  @Input() field: FieldConfig;\n\n  public name = 'PopEntityCheckboxComponent';\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService\n  ){\n    super(el, _domRepo, CheckboxFieldSetting);\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                  Override Inherited Methods                                  *\n   *                                    ( Protected Methods )                                     *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  /**\n   * This will setup this field to handle changes and transformations\n   */\n  protected _setFieldAttributes(): boolean{\n    const defaultLabel = StorageGetter(this.field, [ 'children', 'value', 'model', 'label' ], '');\n    console.log('defaultLabel', defaultLabel);\n    const entryLabel = this.field.entries[ 0 ].name;\n    console.log('entryLabel', entryLabel);\n    if( this.field && this.field.items ){\n      Object.keys(this.field.items).map((dataKey, index) => {\n        const item = this.field.items[ dataKey ];\n        if( this.field.multiple ){\n          item.config.value.label = this.dom.session[ dataKey ].display.label;\n        }else{\n          item.config.value.label = entryLabel ? entryLabel : defaultLabel;\n        }\n      });\n    }\n    return true;\n  }\n\n\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { FieldConfig } from '../../../../pop-common.model';\nimport { PopDomService } from '../../../../services/pop-dom.service';\nimport { StorageGetter } from '../../../../pop-common-utility';\nimport { PopEntityFieldBoilerComponent as FieldTemplate } from '../pop-entity-field-boiler.component';\nimport { EntityFieldComponentInterface } from '../pop-entity-field.model';\nimport { SwitchFieldSetting } from './switch.setting';\n\n@Component({\n  selector: 'lib-pop-entity-switch',\n  templateUrl: './pop-entity-switch.component.html',\n  styleUrls: ['./pop-entity-switch.component.scss']\n})\nexport class PopEntitySwitchComponent extends FieldTemplate implements EntityFieldComponentInterface, OnInit, OnDestroy {\n\n  @Input() field: FieldConfig;\n\n  public name = 'PopEntitySwitchComponent';\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService\n  ){\n    super(el, _domRepo, SwitchFieldSetting);\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n  /**\n   * This will setup this field to handle changes and transformations\n   */\n  protected _setFieldAttributes(): boolean{\n    const defaultLabel = StorageGetter(this.field, [ 'children', 'value', 'model', 'label' ], '');\n    const entryLabel = this.field.entries[ 0 ].name;\n    if( this.field && this.field.items ){\n      Object.keys(this.field.items).map((dataKey, index) => {\n        const item = this.field.items[ dataKey ];\n        if( this.field.multiple ){\n          item.config.value.label = this.dom.session[ dataKey ].display.label;\n        }else{\n          item.config.value.label = entryLabel ? entryLabel : defaultLabel;\n        }\n      });\n    }\n    return true;\n  }\n\n}\n","import { Dictionary, FieldCustomSettingInterface } from '../../../../pop-common.model';\n\nexport const SelectMultiFieldSetting = <Dictionary<FieldCustomSettingInterface>>{\n  unique_label: {\n    name: 'unique_label',\n    type: 'boolean',\n    defaultValue: true,\n  },\n};\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { FieldConfig } from '../../../../pop-common.model';\nimport { PopDomService } from '../../../../services/pop-dom.service';\nimport { StorageGetter } from '../../../../pop-common-utility';\nimport { PopEntityFieldBoilerComponent as FieldTemplate } from '../pop-entity-field-boiler.component';\nimport { EntityFieldComponentInterface } from '../pop-entity-field.model';\nimport { SelectMultiFieldSetting } from './select-mulit.setting';\n\n@Component({\n  selector: 'lib-pop-entity-select-multi',\n  templateUrl: './pop-entity-select-multi.component.html',\n  styleUrls: ['./pop-entity-select-multi.component.scss']\n})\nexport class PopEntitySelectMultiComponent extends FieldTemplate implements EntityFieldComponentInterface, OnInit, OnDestroy  {\n\n  @Input() field: FieldConfig;\n\n  public name = 'PopEntitySelectMultiComponent';\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService\n  ){\n    super(el, _domRepo, SelectMultiFieldSetting);\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n  /**\n   * This will setup this field to handle changes and transformations\n   */\n  protected _setFieldAttributes(): boolean{\n    const defaultLabel = StorageGetter(this.field, [ 'children', 'value', 'model', 'label' ]);\n    const entryLabel = this.field.entries[ 0 ].name;\n    if( this.field && this.field.items ){\n      Object.keys(this.field.items).map((dataKey, index) => {\n        const item = this.field.items[ dataKey ];\n        if( this.field.multiple ){\n          item.config.value.label = this.dom.session[ dataKey ].display.label;\n        }else{\n          item.config.value.label = entryLabel ? entryLabel : defaultLabel;\n        }\n      });\n    }\n    return true;\n  }\n\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { FieldConfig } from '../../../../pop-common.model';\nimport { PopDomService } from '../../../../services/pop-dom.service';\nimport { StorageGetter } from '../../../../pop-common-utility';\nimport { PopEntityFieldBoilerComponent as FieldTemplate } from '../pop-entity-field-boiler.component';\nimport { EntityFieldComponentInterface } from '../pop-entity-field.model';\nimport { TextareaFieldSetting } from './textarea.setting';\n\n@Component({\n  selector: 'lib-pop-entity-textarea',\n  templateUrl: './pop-entity-textarea.component.html',\n  styleUrls: ['./pop-entity-textarea.component.scss']\n})\nexport class PopEntityTextareaComponent extends FieldTemplate implements EntityFieldComponentInterface, OnInit, OnDestroy{\n\n  @Input() field: FieldConfig;\n\n  public name = 'PopEntityTextareaComponent';\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService\n  ){\n    super( el, _domRepo, TextareaFieldSetting );\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                  Override Inherited Methods                                  *\n   *                                    ( Protected Methods )                                     *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  /**\n   * This will setup this field to handle changes and transformations\n   */\n  protected _setFieldAttributes(): boolean{\n    const defaultLabel = StorageGetter( this.field, [ 'children', 'value', 'model', 'label' ] );\n    if( this.field && this.field.items ){\n      Object.keys( this.field.items ).map( ( dataKey, index ) => {\n        const item = this.field.items[ dataKey ];\n        item.config.content.label = item.entry ? item.entry.name : defaultLabel;\n      } );\n    }\n    return true;\n  }\n\n}\n","import {Injectable, OnDestroy} from '@angular/core';\nimport {PopExtendService} from '../../../services/pop-extend.service';\nimport {\n  CoreConfig, Dictionary,\n  DynamicComponentInterface,\n  FieldConfig,\n  FieldCustomSettingInterface,\n  FieldInterface, FieldItemInterface,\n  PopBaseEventInterface, PopLog, PopRequest,\n} from '../../../pop-common.model';\nimport {\n  ArrayMapSetter,\n  CleanObject, ConvertArrayToOptionList, DynamicSort,\n  GetHttpErrorMsg, GetHttpObjectResult, GetHttpResult,\n  IsArray, IsDefined,\n  IsObject,\n  IsObjectThrowError, IsString, RandomInt,\n  SnakeToPascal, StorageSetter,\n  TitleCase\n} from '../../../pop-common-utility';\nimport {PopDomService} from '../../../services/pop-dom.service';\nimport {EntityFieldSetting} from '../pop-entity-field/pop-entity-field.setting';\nimport {from, Observable} from 'rxjs';\nimport {PopSwitchComponent} from '../../base/pop-field-item/pop-switch/pop-switch.component';\nimport {SwitchConfig} from '../../base/pop-field-item/pop-switch/switch-config.model';\nimport {FieldItemRules, GetCustomFieldSettings, IsValidFieldPatchEvent} from '../pop-entity-utility';\nimport {PopSelectComponent} from '../../base/pop-field-item/pop-select/pop-select.component';\nimport {SelectConfig} from '../../base/pop-field-item/pop-select/select-config.model';\nimport {EntitySchemeSectionInterface} from '../pop-entity-scheme/pop-entity-scheme.model';\nimport {AddressFieldSetting} from '../pop-entity-field/pop-entity-address/address.setting';\nimport {EmailFieldSetting} from '../pop-entity-field/pop-entity-email/email.setting';\nimport {NameFieldSetting} from '../pop-entity-field/pop-entity-name/name.setting';\nimport {PhoneFieldSetting} from '../pop-entity-field/pop-entity-phone/phone.setting';\nimport {SelectMultiFieldSetting} from '../pop-entity-field/pop-entity-select-multi/select-mulit.setting';\nimport * as data from './MOCK_DATA.json';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PopFieldEditorService extends PopExtendService implements OnDestroy {\n  public name = 'PopFieldEditorService';\n\n  protected asset = {\n    data: <any> (data as any).default,\n    core: <CoreConfig>undefined,\n    field: <FieldConfig>undefined,\n    viewParams: { // These are the represent the params that we want to display for a specific form\n      select: {\n        disabled: 1,\n        display: 1,\n        required: 1,\n        // required: 1\n      },\n      select_multi: {\n        disabled: 1,\n        display: 1,\n        helpText: 1,\n        // required: 1\n      },\n      input: {\n        display: 1,\n        readonly: 1,\n        required: 1,\n        pattern: 1,\n        validation: 1,\n        transformation: 1,\n        maxlength: 1,\n        minlength: 1,\n        mask: 1,\n        disabled: 1,\n        allow_canada: 1,\n        auto_fill: 1\n      },\n      phone: {\n        display: 1,\n        readonly: 1,\n        required: 1,\n        mask: 1\n      },\n      checkbox: {\n        display: 1,\n        readonly: 1,\n      },\n      button: {\n        display: 1,\n        disabled: 1,\n      },\n      radio: {\n        display: 1,\n        disabled: 1,\n        layout: 1\n      },\n      switch: {\n        display: 1,\n        disabled: 1,\n        allow_canada: 1,\n        auto_fill: 1\n      }\n    },\n\n    viewLabels: {\n      address: {\n        defaultValue: 'Address',\n      },\n      phone: {\n        defaultValue: 'Phone',\n      },\n    },\n\n    viewMultiple: {\n      address: 1,\n      phone: 1,\n      email: 1,\n      switch: 1\n      // input: 1,\n      // select: 1,\n      // name: 1\n    },\n\n    viewOptions: {\n      select: {\n        enum: false,\n        defaultValue: 1,\n        values: [\n          {value: 1, name: 'Option 1'},\n          {value: 2, name: 'Option 2'},\n          {value: 3, name: 'Option 3'},\n        ]\n      },\n      select_multi: {\n        enum: false,\n        defaultValue: [],\n        values: [\n          {value: 1, name: 'Option 1'},\n          {value: 2, name: 'Option 2'},\n          {value: 3, name: 'Option 3'},\n        ]\n      },\n      radio: {\n        enum: false,\n        defaultValue: 'yes',\n        values: [\n          {value: 'yes', name: 'Yes'},\n          {value: 'no', name: 'No'},\n        ]\n      },\n    },\n\n    viewRequired: { // This represents field items that we want to force to to be always active\n      address: {\n        label: 1,\n        zip: 1\n      },\n      input: {\n        value: 1\n      },\n      select: {\n        value: 1\n      },\n      select_multi: {\n        value: 1\n      },\n      multi_selection: {\n        value: 1\n      },\n      switch: {\n        value: 1\n      },\n      phone: {\n        label: 1,\n        number: 1\n      },\n      email: {\n        address: 1\n      },\n      name: {\n        first: 1,\n        last: 1\n      }\n    },\n\n    viewIgnored: { // This represents field items that we want to force to to be always active\n      address: {\n        street: 1,\n        u_s_state_id: 1\n      },\n    },\n\n    viewTemplate: { // gives user the ability to see data with a different html format\n      selection: 1,\n    },\n\n    labelTypes: {\n      defaultValue: 'provided',\n      options: [{value: 'provided', name: 'Provided'}, {value: 'custom', name: 'Custom'}],\n    },\n  };\n\n\n  constructor() {\n    super();\n  }\n\n\n  /**\n   * Register the field to make sure that any needed attributes are added\n   * @param core\n   * @param dom\n   */\n  register(core: CoreConfig, dom: PopDomService, scheme?: EntitySchemeSectionInterface): Promise<boolean> {\n    return new Promise((resolve) => {\n      if (IsObjectThrowError(core, ['entity'], `Invalid Core`) && IsObjectThrowError(core.entity, true, `Invalid Core`)) {\n        this.asset.core = core;\n        // console.log('field is ', core.entity);\n        this.asset.core.entity.items.map((item) => {\n          FieldItemRules(item);\n        });\n        this._setFieldCustomSettings(core.entity);\n        if (IsObject(core.entity.custom_setting, true)) {\n          if (!dom.ui.customSetting) dom.ui.customSetting = {};\n          Object.keys(core.entity.custom_setting).map((settingName) => {\n            const setting = core.entity.custom_setting[settingName];\n            const component = this.getCustomSettingComponent(core, core.entity, setting, scheme);\n            dom.ui.customSetting[setting.name] = component;\n          });\n        }\n\n        this.asset.core.entity.trait = this.getFieldTraits(this.asset.core.entity.fieldgroup.name);\n        this._setFieldEntryValues(core, scheme).then(() => {\n          return resolve(true);\n        });\n      }\n    });\n  }\n\n\n  // /**\n  //  * When we pull field up in the editor to make changes, clear out the cache of that field so when the field is viewed it will pull in any changes\n  //  * @param internal_name\n  //  * @param fieldId\n  //  */\n  // clearCustomFieldCache( internal_name: string, fieldId: number ){\n  //   this.srv.field.clearCustomFieldCache( fieldId );\n  // }\n\n\n  /**\n   * Get a set of mock data for a given field\n   * @param internal_name\n   */\n  getDefaultValues(internal_name: string) {\n    let defaultValues = <any>{};\n    switch (internal_name) {\n      case 'address':\n        defaultValues = this.getAddressValues();\n        break;\n      case 'phone':\n        defaultValues = this.getPhoneValues();\n        break;\n      case 'name':\n        defaultValues = this.getNameValues();\n        break;\n      default:\n        defaultValues = {value: null};\n        break;\n    }\n    return defaultValues;\n  }\n\n\n  isSchemePrimaryField(scheme: EntitySchemeSectionInterface, field: FieldInterface,) {\n    if (IsObject(scheme, ['id', 'mapping']) && IsObject(field, ['id', 'fieldgroup'])) {\n      const primary = this.getSchemePrimary(scheme);\n      const groupName = field.fieldgroup.name;\n      if (groupName in primary && +primary[groupName] === +field.id) {\n\n      }\n    }\n    return false;\n  }\n\n\n  isSchemeFieldItemDisabled(scheme: EntitySchemeSectionInterface, fieldId: number, itemId: number): boolean {\n    if (IsObject(scheme, ['id', 'mapping']) && +fieldId && +itemId) {\n      const setting = this.getSchemeFieldItemMapping(scheme, fieldId, itemId);\n      if (IsDefined(setting.active, false)) {\n        return +setting.active === 1 ? false : true;\n      }\n    }\n    return false;\n  }\n\n\n  isSchemeFieldEntryDisabled(scheme: EntitySchemeSectionInterface, fieldId: number, entryId: number): boolean {\n    if (IsObject(scheme, ['id', 'mapping']) && +fieldId && +entryId) {\n      const setting = this.getSchemeFieldSetting(scheme, fieldId);\n      return IsArray(setting.disabled_entries, true) && setting.disabled_entries.includes(entryId);\n    }\n    return false;\n  }\n\n\n  getSchemeFieldSetting(scheme: EntitySchemeSectionInterface, fieldId: number): Dictionary<any> {\n    if (IsObject(scheme, true) && +fieldId) {\n      this.ensureSchemeFieldMapping(scheme, fieldId);\n      let storage = this.getSchemeFieldMapping(scheme);\n      if (IsObject(storage, true)) {\n        storage = (<Dictionary<any>>StorageSetter(storage, [`field_${fieldId}`]));\n        return storage;\n      }\n    }\n    return null;\n  }\n\n\n  getSchemeFieldSection(scheme: EntitySchemeSectionInterface, fieldId: number, sectionName: string) {\n    if (IsObject(scheme, true) && +fieldId) {\n\n      const storage = this.getSchemeFieldSetting(scheme, fieldId);\n      if (IsObject(storage)) {\n        return (<FieldItemInterface>StorageSetter(storage, [sectionName]));\n      }\n    }\n    return null;\n  }\n\n\n  ensureSchemeFieldMapping(scheme: EntitySchemeSectionInterface, fieldId: number): void {\n    if (!(IsObject(scheme.mapping))) {\n      scheme.mapping = {};\n    }\n    if (!(IsObject(scheme.mapping.field))) {\n      scheme.mapping.field = {};\n    }\n    if (!(IsObject(scheme.mapping.field[`field_${fieldId}`]))) {\n      scheme.mapping.field[`field_${fieldId}`] = {};\n    }\n    if (!(IsObject(scheme.mapping.field[`field_${fieldId}`].trait_entry))) {\n      scheme.mapping.field[`field_${fieldId}`].trait_entry = {};\n    }\n    if (!(IsArray(scheme.mapping.field[`field_${fieldId}`].disabled_entries))) {\n      scheme.mapping.field[`field_${fieldId}`].disabled_entries = [];\n    }\n  }\n\n\n  getSchemeFieldItemMapping(scheme: EntitySchemeSectionInterface, fieldId: number, itemId: number): Dictionary<any> {\n    if (IsObject(scheme, true) && +fieldId && +itemId) {\n      let storage = <Dictionary<any>>this.getSchemeFieldSetting(scheme, fieldId);\n      if (IsObject(storage, true)) {\n        if (!(IsObject(storage.item))) {\n          storage.item = {};\n        }\n        if (!(IsObject(storage.item[`item_${itemId}`]))) {\n          storage.item[`item_${itemId}`] = {};\n        }\n        storage = <FieldItemInterface>StorageSetter(storage, ['item', `item_${itemId}`]);\n\n        return <Dictionary<any>>storage;\n      }\n    }\n    return null;\n  }\n\n\n  getSchemeFieldItemSection(scheme: EntitySchemeSectionInterface, fieldId: number, itemId: number, sectionName: string) {\n    if (IsObject(scheme, true) && +fieldId && +itemId && IsString(sectionName, true)) {\n      const storage = this.getSchemeFieldItemMapping(scheme, fieldId, itemId);\n      if (storage && IsString(sectionName, true)) {\n        return StorageSetter(storage, [sectionName]);\n      }\n    }\n    return null;\n  }\n\n\n  getFieldTraits(fieldGroupName: string): FieldCustomSettingInterface[] {\n    const traits = [];\n    let setting = {};\n    switch (String(fieldGroupName).toLowerCase()) {\n      case 'address':\n        setting = AddressFieldSetting;\n        break;\n      case 'email':\n        setting = EmailFieldSetting;\n        break;\n      case 'name':\n        setting = NameFieldSetting;\n        break;\n      case 'phone':\n        setting = PhoneFieldSetting;\n        break;\n      case 'select-multi':\n        setting = SelectMultiFieldSetting;\n        break;\n      case 'radio':\n        break;\n    }\n    if (IsObject(setting, true)) {\n      Object.keys(setting).map((settingName: string) => {\n        const tmp = setting[settingName];\n        if (IsObject(tmp, ['type'])) {\n          if (tmp.type === 'trait') {\n            traits.push(tmp);\n          }\n        }\n      });\n    }\n    return traits;\n  }\n\n\n  getSchemePrimary(scheme: EntitySchemeSectionInterface) {\n    return StorageSetter(scheme, ['mapping', 'primary']);\n  }\n\n\n  getSchemeRequired(scheme: EntitySchemeSectionInterface) {\n    return StorageSetter(scheme, ['mapping', 'required']);\n  }\n\n\n  getSchemeFieldMapping(scheme: EntitySchemeSectionInterface) {\n    return StorageSetter(scheme, ['mapping', 'field']);\n  }\n\n\n  updateSchemeFieldMapping(scheme: EntitySchemeSectionInterface) {\n    return new Promise<boolean>(async (resolve) => {\n      if (IsObject(scheme, ['id'])) {\n        const res = await this._updateSchemeFieldMapping(scheme, 'field');\n        return resolve(res);\n      }\n    });\n  }\n\n\n  updateSchemePrimaryMapping(scheme: EntitySchemeSectionInterface) {\n    return new Promise<boolean>(async (resolve) => {\n      if (IsObject(scheme, ['id'])) {\n        const res = await this._updateSchemeFieldMapping(scheme, 'primary');\n        return resolve(res);\n      }\n    });\n  }\n\n\n  updateSchemeRequiredMapping(scheme: EntitySchemeSectionInterface) {\n    if (IsObject(scheme, ['id'])) {\n      this._updateSchemeFieldMapping(scheme, 'required');\n    }\n  }\n\n\n  /**\n   * When a entry is added , we need to set a default type\n   */\n  getDefaultLabelTypeOptions() {\n    return JSON.parse(JSON.stringify(this.asset.labelTypes));\n  }\n\n\n  /**\n   * Check what param options apply to a specific field\n   * @param key\n   */\n  getViewParams(key: string = null) {\n    if (key && key in this.asset.viewParams) {\n      return JSON.parse(JSON.stringify(this.asset.viewParams[key]));\n    }\n    return JSON.parse(JSON.stringify(this.asset.viewParams));\n  }\n\n\n  /**\n   * Check what param options apply to a specific field\n   * @param key\n   */\n  getViewMultiple(key: string = null) {\n    if (key) {\n      if (key in this.asset.viewMultiple) {\n        return this.asset.viewMultiple[key];\n      } else {\n        return null;\n      }\n    }\n    return JSON.parse(JSON.stringify(this.asset.viewMultiple));\n  }\n\n\n  /**\n   * Check what fields items are required under a fieldgroup type\n   * @param fieldGroupName\n   * @param fieldItemName\n   */\n  getViewRequired(fieldGroupName: string, fieldItemName: string) {\n    return fieldGroupName in this.asset.viewRequired && fieldItemName in this.asset.viewRequired[fieldGroupName];\n  }\n\n\n  /**\n   * Check what fields items are ingnored under a fieldgroup type\n   * @param fieldGroupName\n   * @param fieldItemName\n   */\n  getViewIgnored(fieldGroupName: string, fieldItemName: string, scheme?: EntitySchemeSectionInterface) {\n    if (fieldGroupName in this.asset.viewIgnored && fieldItemName in this.asset.viewIgnored[fieldGroupName]) {\n      return true;\n    }\n    return false;\n  }\n\n\n  /**\n   * Get a set of default options to for a specific view , ie.. a radio, select need options\n   * @param key\n   */\n  getViewOptions(key: string = null) {\n    if (key && key in this.asset.viewOptions) {\n      return JSON.parse(JSON.stringify(this.asset.viewOptions[key]));\n    }\n    return JSON.parse(JSON.stringify(this.asset.viewOptions));\n  }\n\n\n  /**\n   * Address Data Factory\n   */\n  getAddressValues() {\n\n    const random = Math.floor(Math.random() * 50);\n    return {\n      // business: company.companyName(),\n      line_1: this.asset.data[random].line_1,\n      line_2: this.asset.data[random].line_2,\n      line_3: 'Attn: ' + this.asset.data[random].line_3,\n      city: this.asset.data[random].city,\n      region_id: this.asset.data[random].region_id,\n      county: 'Ohio',\n      country_id: 1,\n      zip: String(this.asset.data[random].zip).slice(0, 5),\n      zip_4: '0000',\n    };\n  }\n\n\n  /**\n   * Name Data Factory\n   */\n  getNameValues() {\n    const random = Math.floor(Math.random() * 50);\n\n    return {\n      prefix: this.asset.data[random].prefix,\n      first: this.asset.data[random].first,\n      middle: this.asset.data[random].middle,\n      last: this.asset.data[random].last,\n      suffix: this.asset.data[random].suffix,\n    };\n  }\n\n\n  /**\n   * Phone Data Factory\n   */\n  getPhoneValues() {\n    const random = Math.floor(Math.random() * 50);\n\n    return {\n      title: undefined,\n      country_id: 1,\n      number: this.asset.data[random].number,\n      extension: '123456',\n      voice_button: null,\n      sms_button: null,\n      can_call: 1,\n      can_text: 1,\n    };\n  }\n\n\n  /**\n   * This was built for rendering a dynamic list of custom settings, Probably not the right approach since settings so far have been sporadically placed so far\n   * @param core\n   * @param field\n   * @param setting\n   */\n  getCustomSettingComponent(core: CoreConfig, field: FieldInterface, setting: FieldCustomSettingInterface, scheme?: EntitySchemeSectionInterface) {\n    let component;\n    const hasAccess = core.access.can_update && !core.entity.system ? true : false;\n    switch (String(setting.type).toLowerCase()) {\n      case 'boolean':\n        component = <DynamicComponentInterface>{\n          type: PopSwitchComponent,\n          inputs: {\n            core: core,\n            config: new SwitchConfig({\n              name: setting.name,\n              label: setting.label ? setting.label : TitleCase(SnakeToPascal(setting.name)),\n              helpText: setting.helpText ? setting.helpText : null,\n              value: typeof setting.value !== 'undefined' ? <boolean>setting.value : <boolean>setting.defaultValue,\n              facade: true,\n              disabled: !hasAccess,\n              metadata: {\n                setting: setting\n              },\n              patch: {\n                field: ``,\n                path: ``,\n                callback: (ignore: CoreConfig, event: PopBaseEventInterface) => {\n                  if (IsValidFieldPatchEvent(core, event)) {\n                    if (IsObject(scheme, true)) {\n                      const session = this.getSchemeFieldSection(scheme, +field.id, 'setting');\n                      if (IsObject(session)) {\n                        session[setting.name] = event.config.control.value;\n                        this._updateSchemeFieldMapping(scheme, 'field');\n                      }\n\n                    } else {\n                      this.storeCustomSetting(core, event).then(() => {\n                        PopLog.event(this.name, `Custom Setting Saved:`, event);\n                      });\n                    }\n                  }\n                }\n              }\n            }),\n            hidden: 0,\n            when: setting.when ? setting.when : null,\n          },\n          position: field.position,\n          ancillary: true,\n          sort: field.sort,\n        };\n        break;\n      case 'transformation':\n        component = <DynamicComponentInterface>{\n          type: PopSelectComponent,\n          inputs: {\n            core: core,\n            config: new SelectConfig({\n              name: setting.name,\n              label: setting.label ? setting.label : TitleCase(SnakeToPascal(setting.name)),\n              helpText: setting.helpText ? setting.helpText : null,\n              value: setting.value ? <any>setting.value : setting.defaultValue,\n              disabled: !hasAccess,\n              facade: true,\n              options: {\n                values: ConvertArrayToOptionList(setting.options.values, {\n                  empty: setting.options.empty,\n                  sort: true,\n                })\n              },\n              metadata: {\n                setting: setting\n              },\n              patch: {\n                duration: 500,\n                field: ``,\n                path: ``,\n                callback: (core2: CoreConfig, event: PopBaseEventInterface) => {\n                  if (IsValidFieldPatchEvent(core, event)) {\n                    if (IsObject(scheme, true)) {\n                      const session = this.getSchemeFieldSection(scheme, +field.id, 'setting');\n                      if (IsObject(session)) {\n                        session[setting.name] = event.config.control.value;\n                        this._updateSchemeFieldMapping(scheme, 'field');\n                      }\n                    } else {\n                      this.storeCustomSetting(core, event).then(() => {\n                        PopLog.event(this.name, `Custom Setting Saved:`, event);\n                      });\n                    }\n\n                  }\n                }\n              }\n            }),\n            hidden: 0,\n            when: setting.when ? setting.when : null,\n          },\n          position: field.position,\n          ancillary: true,\n          sort: field.sort,\n        };\n        break;\n      case 'trait':\n        break;\n      case 'fixed':\n        break;\n      default:\n        component = <DynamicComponentInterface>{\n          type: PopSwitchComponent,\n          inputs: {\n            core: core,\n            config: new SwitchConfig({\n              name: setting.name,\n              label: setting.label ? setting.label : TitleCase(SnakeToPascal(setting.name)),\n              helpText: setting.helpText ? setting.helpText : null,\n              value: typeof setting.value !== 'undefined' ? <boolean>setting.value : <boolean>setting.defaultValue,\n              facade: true,\n              metadata: {\n                setting: setting\n              },\n            }),\n            hidden: 0,\n            when: setting.when ? setting.when : null,\n          },\n          position: field.position,\n          ancillary: true,\n          sort: field.sort,\n        };\n    }\n\n    return component;\n  }\n\n\n  /**\n   * Store a custom setting\n   * Determine whether the setting already exists in the database, post or patch accordingly\n   * @param core\n   * @param event\n   */\n  storeCustomSetting(core: CoreConfig, event: PopBaseEventInterface): Promise<boolean | string> {\n    return new Promise<boolean | string>((resolve) => {\n      // PopTemplate.buffer();\n      PopLog.event(this.name, `storeCustomSetting`, event);\n      const setting = event.config.metadata.setting;\n      const body = <any>{\n        value: event.config.control.value\n      };\n      if (+setting.field_id) body.field_id = +setting.field_id;\n      if (+setting.field_item_id) body.field_item_id = +setting.field_item_id;\n      const fieldId = +setting.field_id ? +setting.field_id : core.entity.id;\n      let request = <Observable<any>>undefined;\n      if (setting.id) {\n        request = PopRequest.doPatch(`apps/fields/${fieldId}/configs/${setting.id}`, body, 1, false);\n      } else {\n        body.name = setting.name;\n        body.type = setting.type;\n        request = PopRequest.doPost(`apps/fields/${fieldId}/configs`, body, 1, false);\n      }\n\n      request.subscribe((res) => {\n        if (res.data) res = res.data;\n        if (IsObject(res, ['id'])) {\n\n          event.config.metadata.setting = {...event.config.metadata.setting, ...CleanObject(res)};\n          if (setting.item) {\n            // ToDo:: Store a seting on to a field item\n            // console.log('save on item', core.entity);\n            // console.log('setting', res);\n\n          } else {\n            core.entity.custom_setting[setting.name].value = body.value;\n            core.entity.setting[setting.name] = body.value;\n            const nameLookup = ArrayMapSetter(core.entity.configs.field_configs, 'name');\n            if (setting.name in nameLookup) {\n              core.entity.configs.field_configs[nameLookup[setting.name]] = {...event.config.metadata.setting};\n            } else {\n              core.entity.configs.field_configs.push(event.config.metadata.setting);\n            }\n          }\n          this.triggerFieldPreviewUpdate();\n          return resolve(true);\n        }\n      }, (err) => {\n        return resolve(GetHttpErrorMsg(err));\n      });\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * Store a custom setting\n   * Determine whether the setting already exists in the database, post or patch accordingly\n   * @param core\n   * @param event\n   */\n  storeFieldItemRule(core: CoreConfig, fieldItem: FieldItemInterface, event: PopBaseEventInterface): Promise<boolean | string> {\n    return new Promise<boolean | string>((resolve) => {\n      let request = <Observable<any>>undefined;\n      const rule = event.config.metadata.rule;\n      const fieldItemId = fieldItem.id;\n      const value = event.config.control.value;\n\n      const body = <any>{\n        value: value,\n      };\n\n      if (IsObject(rule.validationMap, true)) {\n        rule.validation = rule.validationMap[String(value)];\n      }\n      if (rule.validation) {\n        body.field_validation_id = rule.validation.id;\n        if (rule.validation.fixed) {\n          rule.value = rule.validation.value;\n        }\n      } else {\n        rule.value = value;\n        // pass\n      }\n\n\n      if (rule.field_id) { // patch\n        request = PopRequest.doPatch(`fields/${fieldItemId}/rules/${rule.id}`, body, 1, false);\n      } else {\n        body.field_item_id = null;\n        body.name = rule.name;\n        request = PopRequest.doPost(`fields/${fieldItemId}/rules`, body, 1, false);\n      }\n\n      request.subscribe((res) => {\n        res = GetHttpObjectResult(res);\n        if (IsObject(res, ['value'])) {\n          // event.config.metadata.rule = res;\n          fieldItem.rule[rule.name] = value;\n          this.triggerFieldPreviewUpdate();\n          return resolve(true);\n        }\n        return resolve(true);\n      }, (err) => {\n        return resolve(GetHttpErrorMsg(err));\n      });\n    });\n  }\n\n\n  /**\n   * Trigger the field prview component to update\n   */\n  triggerFieldPreviewUpdate() {\n    if (IsObject(this.asset.core, ['channel'])) {\n      this.dom.setTimeout('trigger-preview', () => {\n        this.asset.core.channel.next({\n          source: this.name,\n          target: 'PopEntityFieldPreviewComponent',\n          type: 'component',\n          name: 'update'\n        });\n      }, 0);\n    }\n  }\n\n\n  /**\n   * Cleanup timeouts, intervals, subscriptions, etc\n   */\n  ngOnDestroy() {\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  // private _updateSchemeFieldMapping( scheme: EntitySchemeSectionInterface, key: string ){\n  //   if( IsObject( scheme, [ 'id', 'mapping' ] ) && IsString( key, true ) && key in scheme.mapping ){\n  //     this.dom.setTimeout( `update-scheme-field-${key}`, () => {\n  //       const body = { mapping: {} };\n  //       // body.mapping[ key ] = scheme.mapping[ key ];\n  //       body.mapping = scheme.mapping;\n  //       this.dom.setSubscriber( `update-scheme-field-${key}`, PopRequest.doPatch( `profile-schemes/${scheme.id}`, body, 1, false ).subscribe( ( res ) => {\n  //         res = GetHttpResult( res );\n  //         console.log( '_updateSchemeFieldMapping', res );\n  //       }, ( err ) => {\n  //         PopLog.error( this.name, `_setFieldEntryValues`, GetHttpErrorMsg( err ) );\n  //       } ) );\n  //     }, 0 );\n  //   }\n  // }\n\n\n  private _updateSchemeFieldMapping(scheme: EntitySchemeSectionInterface, key: string): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      if (IsObject(scheme, ['id', 'mapping']) && IsString(key, true) && key in scheme.mapping) {\n        this.dom.setTimeout(`update-scheme-field-${key}`, () => {\n          const body = {mapping: {}};\n          // body.mapping[ key ] = scheme.mapping[ key ];\n          body.mapping = scheme.mapping;\n          this.dom.setSubscriber(`update-scheme-field-${key}`, PopRequest.doPatch(`profile-schemes/${scheme.id}`, body, 1, false).subscribe((res) => {\n            res = GetHttpResult(res);\n//             console.log( '_updateSchemeFieldMapping', res );\n            return resolve(true);\n          }, (err) => {\n            PopLog.error(this.name, `_setFieldEntryValues`, GetHttpErrorMsg(err));\n            return resolve(false);\n          }));\n        }, 0);\n      } else {\n        return resolve(false);\n      }\n    });\n  }\n\n\n  /**\n   * Assign the custom setting values and config that exist for this field\n   * @param field\n   * @param stored\n   */\n  private _setFieldCustomSettings(field: FieldInterface, scheme?: EntitySchemeSectionInterface) {\n    if (IsObject(field, ['fieldgroup', 'configs'])) {\n      const stored = field.configs;\n      const fieldSettings = GetCustomFieldSettings(field);\n\n      const customSettings = JSON.parse(JSON.stringify({...EntityFieldSetting, ...fieldSettings}));\n\n      // console.log( 'customSettings', customSettings );\n      // console.log('stored', stored);\n\n      if (IsObject(customSettings, true)) {\n        const itemIdLookup = ArrayMapSetter(<any[]>field.items, 'id');\n        const itemNameLookup = ArrayMapSetter(<any[]>field.items, 'name');\n        // console.log('itemNameLookup', itemNameLookup);\n\n        Object.keys(customSettings).map((settingName: string) => {\n          const setting = customSettings[settingName];\n          if (IsObject(setting, true)) {\n            if (setting.item) {\n\n              if (setting.item in itemNameLookup) {\n                // console.log('setting', setting);\n                const item = field.items[itemNameLookup[setting.item]];\n\n                if (!item.custom_setting) item.custom_setting = {};\n                if (!item.setting) item.setting = {};\n                setting.field_item_id = item.field_item_id;\n                setting.field_id = item.id;\n                // console.log('item', item);\n                const value = setting.value ? setting.value : setting.defaultValue;\n                item.custom_setting[settingName] = setting;\n                item.setting[settingName] = value;\n              }\n\n            } else {\n              if (!field.custom_setting) field.custom_setting = {};\n              if (!field.setting) field.setting = {};\n              if (!field.trait) field.trait = {};\n              let value;\n              if (IsObject(scheme, true)) {\n                const storage = this.getSchemeFieldSection(scheme, +field.id, 'setting');\n                if (IsObject(storage, true) && setting.name in storage) {\n                  value = storage[setting.name];\n                } else {\n                  value = setting.value ? setting.value : setting.defaultValue;\n                }\n              } else {\n                value = setting.value ? setting.value : setting.defaultValue;\n              }\n\n              if (setting.type === 'trait') {\n                field.trait[settingName] = value;\n              } else {\n                field.custom_setting[settingName] = setting;\n                field.setting[settingName] = value;\n              }\n\n            }\n          }\n        });\n\n\n        if (IsArray(stored.field_configs, true)) {\n          stored.field_configs.map((setting) => {\n            if (!field.custom_setting[setting.name]) {\n              // ToDo:: Do We want to allow the database to pass in configs that are not local\n              // field.custom_setting[ setting.name ] = setting;\n            } else {\n              field.custom_setting[setting.name].id = setting.id;\n              field.custom_setting[setting.name].value = setting.value;\n            }\n            field.setting[setting.name] = setting.value;\n          });\n        }\n\n        if (IsObject(stored.item_configs, true)) {\n          Object.keys(stored.item_configs).map((fieldItemId) => {\n            const fieldItemConfigs = stored.item_configs[fieldItemId];\n            if (IsArray(fieldItemConfigs, true)) {\n              fieldItemConfigs.map((setting) => {\n                if (setting.field_id in itemIdLookup) {\n                  const item = field.items[itemIdLookup[setting.field_id]];\n\n                  if (!item.custom_setting) item.custom_setting = {};\n                  if (!item.custom_setting[setting.name]) {\n                    item.custom_setting[setting.name] = setting;\n                  } else {\n                    item.custom_setting[setting.name].id = setting.id;\n                    item.custom_setting[setting.name].value = setting.value;\n                  }\n                  if (!item.setting) item.setting = {};\n                  item.setting[setting.name] = setting.value;\n                }\n              });\n            }\n          });\n\n        }\n      }\n      // console.log('stored custom setings', field, stored);\n      // delete field.configs;\n    }\n  }\n\n\n  /**\n   * Ensure that at least 1 label exists\n   * @param field\n   */\n  private _setFieldEntryValues(core: CoreConfig, scheme?: EntitySchemeSectionInterface): Promise<boolean> {\n    return new Promise<boolean>((resolve) => {\n      const field = <FieldInterface>core.entity;\n      if (IsArray(field.entries, true)) {\n        field.entries.sort(DynamicSort('sort_order'));\n      }\n      if (!(IsArray(field.entries, true))) {\n        const entry = {\n          name: TitleCase(`${(field.name ? field.name : field.fieldgroup.name)}`),\n          type: 'provided',\n          sort_order: 0,\n        };\n        PopRequest.doPost(`fields/${field.id}/entries`, entry, 1, false).subscribe((res) => {\n          res = res.data ? res.data : res;\n          field.entries = [res];\n          return resolve(true);\n        }, (err) => {\n          PopLog.error(this.name, `_setFieldEntryValues`, GetHttpErrorMsg(err));\n          return resolve(false);\n        });\n      } else {\n        return resolve(true);\n      }\n    });\n  }\n}\n","import {Injectable} from '@angular/core';\nimport {\n  CoreConfig,\n  Dictionary, DynamicComponentInterface,\n  FieldConfig, FieldEntry,\n  FieldInterface,\n  FieldItemInterface,\n  FieldItemModelInterface,\n  PopEntity, PopLog, PopPipe, PopRequest, ServiceInjector,\n} from '../../../pop-common.model';\n\nimport {PopDomService} from '../../../services/pop-dom.service';\nimport {PopEntityFieldComponent} from '../pop-entity-field/pop-entity-field.component';\nimport {PopSideBySideComponent} from '../../base/pop-side-by-side/pop-side-by-side.component';\nimport {PopSelectComponent} from '../../base/pop-field-item/pop-select/pop-select.component';\nimport {PopSelectMultiComponent} from '../../base/pop-field-item/pop-select-multi/pop-select-multi.component';\nimport {PopInputComponent} from '../../base/pop-field-item/pop-input/pop-input.component';\nimport {PopDateComponent} from '../../base/pop-field-item/pop-date/pop-date.component';\nimport {PopTimeComponent} from '../../base/pop-field-item/pop-time/pop-time.component';\nimport {PopCheckboxComponent} from '../../base/pop-field-item/pop-checkbox/pop-checkbox.component';\nimport {PopSwitchComponent} from '../../base/pop-field-item/pop-switch/pop-switch.component';\nimport {PopRadioComponent} from '../../base/pop-field-item/pop-radio/pop-radio.component';\nimport {PopTextareaComponent} from '../../base/pop-field-item/pop-textarea/pop-textarea.component';\nimport {PopLabelComponent} from '../../base/pop-field-item/pop-label/pop-label.component';\nimport {PopButtonComponent} from '../../base/pop-field-item/pop-button/pop-button.component';\nimport {PopEntityNameComponent} from '../pop-entity-field/pop-entity-name/pop-entity-name.component';\nimport {PopEntityDatetimeComponent} from '../pop-entity-field/pop-entity-datetime/pop-entity-datetime.component';\nimport {PopEntityEmailComponent} from '../pop-entity-field/pop-entity-email/pop-entity-email.component';\nimport {PopEntityPhoneComponent} from '../pop-entity-field/pop-entity-phone/pop-entity-phone.component';\nimport {PopEntityAddressComponent} from '../pop-entity-field/pop-entity-address/pop-entity-address.component';\nimport {PopEntityInputComponent} from '../pop-entity-field/pop-entity-input/pop-entity-input.component';\nimport {PopEntitySelectComponent} from '../pop-entity-field/pop-entity-select/pop-entity-select.component';\nimport {PopEntityRadioComponent} from '../pop-entity-field/pop-entity-radio/pop-entity-radio.component';\nimport {PopEntityCheckboxComponent} from '../pop-entity-field/pop-entity-checkbox/pop-entity-checkbox.component';\nimport {\n  EvaluateWhenConditions, FieldItemModel,\n  FieldItemModelConfig, FieldItemView, GetCustomFieldSettings, ParseModelValue,\n} from '../pop-entity-utility';\n\nimport {\n  ArrayKeyBy,\n  ArrayMapSetter, CleanObject, ConvertArrayToOptionList, DeepCopy,\n  DynamicSort, GetHttpResult,\n  IsArray, IsDefined,\n  IsObject,\n  IsString, JsonCopy, SpaceToSnake, StorageGetter,\n  TitleCase\n} from '../../../pop-common-utility';\nimport {PopMinMaxComponent} from '../../base/pop-field-item/pop-min-max/pop-min-max.component';\nimport {PopNumberComponent} from '../../base/pop-field-item/pop-number/pop-number.component';\nimport {PopCacheService} from '../../../services/pop-cache.service';\nimport {forkJoin} from 'rxjs';\nimport {ComponentType} from '@angular/cdk/portal';\nimport {PopEntitySwitchComponent} from '../pop-entity-field/pop-entity-switch/pop-entity-switch.component';\nimport {PopEntitySelectMultiComponent} from '../pop-entity-field/pop-entity-select-multi/pop-entity-select-multi.component';\nimport {PopEntityTextareaComponent} from '../pop-entity-field/pop-entity-textarea/pop-entity-textarea.component';\nimport {PopSelectFilterComponent} from '../../base/pop-field-item/pop-select-filter/pop-select-filter.component';\nimport {PopTextComponent} from '../../base/pop-field-item/pop-text/pop-text.component';\nimport {EntitySchemeSectionInterface} from '../pop-entity-scheme/pop-entity-scheme.model';\nimport {PopFieldEditorService} from '../pop-entity-field-editor/pop-entity-field-editor.service';\nimport {PopSelectListComponent} from '../../base/pop-field-item/pop-select-list/pop-select-list.component';\nimport {PopDatePickerComponent} from '../../base/pop-field-item/pop-datepicker/pop-datepicker.component';\nimport {PopSelectModalComponent} from \"../../base/pop-field-item/pop-select-modal/pop-select-modal.component\";\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PopEntityUtilFieldService {\n\n  private name = 'PopEntityUtilFieldService';\n\n  private cache = new PopCacheService();\n\n\n  constructor(private field: PopFieldEditorService) {\n  }\n\n\n  /**\n   * Build out the necessary configs for a custom field group and all of this field items involved\n   * Fields may have multiple values , so a unique set of configs mut be created for each data entry\n   * @param core\n   * @param field\n   */\n  buildCustomField(core: CoreConfig, field: FieldInterface) {\n    let items;\n    if (!field.metadata) field.metadata = {};\n    if (!field.multiple_min) field.multiple_min = 1;\n    if (!field.multiple_max || field.multiple_max > 10) field.multiple_max = 10;\n    if (!field.multiple_max_limit) field.multiple_max_limit = 10;\n\n\n    const scheme = StorageGetter(core, ['entity', 'scheme']);\n    const useScheme = IsObject(scheme, ['id', 'mapping']) ? true : false;\n\n    field.primary = useScheme ? this.field.isSchemePrimaryField(scheme, field) : false;\n\n    const fieldCustomSettings = GetCustomFieldSettings(field);\n    const itemCustomModels = {};\n    if (IsObject(fieldCustomSettings, true)) {\n      Object.keys(fieldCustomSettings).map((key: string) => {\n        const setting = fieldCustomSettings[key];\n        if (IsObject(setting, ['item', 'model']) && setting.item && setting.type === 'model') {\n          if (!itemCustomModels[setting.item]) itemCustomModels[setting.item] = {};\n          itemCustomModels[setting.item][setting.model] = setting.value;\n        }\n      });\n    }\n\n    // console.log( itemCustomModels, 'itemCustomModels' );\n\n    field.children = {};\n    // make a copy of the field items to use as a pattern\n    let fieldItemSet = JsonCopy(field.items);\n    fieldItemSet = fieldItemSet.filter((fieldItem: FieldItemInterface) => {\n      return +fieldItem.active;\n    }).filter((fieldItem: FieldItemInterface) => {\n      return useScheme ? !(this.field.isSchemeFieldItemDisabled(scheme, +field.id, +fieldItem.id)) : true;\n    }).map((fieldItem: FieldItemInterface) => {\n      const itemCustomModel = IsObject(itemCustomModels[fieldItem.name]) ? itemCustomModels[fieldItem.name] : {};\n      fieldItem = JsonCopy({...fieldItem, ...itemCustomModel});\n      fieldItem = CleanObject(fieldItem, {\n        blacklist: ['children', 'entries', 'items', 'storage', 'webhook', 'object_name', 'depth_level']\n      });\n\n      // fieldItem.model.value = item.model.options.defaultValue || null;\n      // ToDo:: Inject scheme rule values\n      this.setFieldItemRules(+field.id, fieldItem, scheme);\n\n      // console.log('fieldItem', fieldItem);\n\n\n      const model = FieldItemModel(core, fieldItem);\n\n\n\n      if (IsArray(fieldItem.source, true) && !IsArray(model.options.values, true)) {\n        model.options.rawValues = fieldItem.source;\n        model.options.values = fieldItem.source;\n      }\n\n      // if (IsArray(fieldItem.source)) {\n      //   console.log('fielditem source', fieldItem);\n      //   console.log('options', model.options);\n      // }\n\n      const view = FieldItemView(fieldItem.view);\n      const item = CleanObject({\n        id: fieldItem.id,\n        custom_setting: {},\n        model: model,\n        table: fieldItem.table ? fieldItem.table : {sort: 99, visible: false},\n        view: view,\n        component: view.name,\n        setting: this._getFieldItemSetting(fieldItem),\n        rules: fieldItem.rules,\n        rule: fieldItem.rule,\n        source: IsArray(fieldItem.source, true) ? fieldItem.source : null,\n        sourceMap: IsArray(fieldItem.source, true) ? ArrayMapSetter(fieldItem.source, 'id') : null\n      });\n\n      field.children[fieldItem.name] = item;\n      return item;\n    });\n\n    const dataSort = {};\n    if (IsArray(field.entries, true)) {\n      field.entries.sort(DynamicSort('sort_order'));\n      field.entries.map((entry: FieldEntry, index) => {\n        dataSort[entry.id] = index;\n      });\n\n    }\n\n\n    field.items = <any>{};\n    items = {};\n    field.data = IsObject(field.data, true) ? field.data : {};\n    if (useScheme) {\n      Object.keys(field.data).map((dataKey) => {\n        if (this.field.isSchemeFieldEntryDisabled(scheme, +field.id, +dataKey)) {\n          delete field.data[dataKey];\n        }\n      });\n    }\n\n    // get id of keys from field entries\n    // console.log(field.entries);\n    if (field.multiple) {\n      const dataKeys = field.entries.map(i => i.id);\n      field.data_keys = dataKeys.sort(function (a, b) {\n        const varA = +dataSort[a];\n        const varB = +dataSort[b];\n        if (varA > varB) {\n          return 1;\n        } else if (varA < varB) {\n          return -1;\n        }\n        return 0;\n      });\n    } else {\n      field.data_keys = IsArray(field.entries, true) ? [field.entries[0].id]: [];\n    }\n\n\n    const entryLookup = ArrayMapSetter(field.entries, 'id');\n    field.data_keys.map((dataKey, index) => {\n      items[dataKey] = {\n        entry: dataKey in entryLookup ? field.entries[entryLookup[dataKey]] : this._getFieldItemEntry(field, dataKey, index),\n        config: {}\n      };\n      fieldItemSet.map((fieldItem) => {\n        // ToDo:: Determine whether patch should always be created; A.C.\n        if (IsObject(fieldItem.model, ['name'])) {\n          fieldItem.model.value = this._getModelValue(core, field, fieldItem.model, dataKey);\n          fieldItem.model.facade = 1;\n          const config = FieldItemModelConfig(core, fieldItem.model);\n          items[dataKey].config[fieldItem.model.name] = config;\n        } else {\n          // console.log('fail', fieldItem);\n        }\n      });\n    });\n    const coreField = <any>{\n      id: +field.id,\n      ancillary: field.ancillary ? 1 : 0,\n      canAdd: field.canAdd,\n      canRemove: field.canRemove,\n      configs: field.configs || {},\n      custom_setting: field.custom_setting || {},\n      metadata: field.metadata,\n      multiple: !!field.multiple,\n      multiple_min: field.multiple_min,\n      multiple_max: field.multiple_max,\n      multiple_max_limit: field.multiple_max_limit ? field.multiple_max_limit : 10,\n      data: field.data,\n      data_keys: field.data_keys,\n      facade: !!field.facade,\n      fieldgroup: field.fieldgroup,\n      entries: IsArray(field.entries) ? field.entries : [],\n      hidden: field.hidden ? true : false,\n      internal_name: field.fieldgroup.name,\n      name: String(SpaceToSnake(field.name)).toLowerCase(),\n      label: field.label,\n      position: field.position,\n      setting: field.setting || {},\n      show_name: !!field.show_name,\n      sort: field.sort,\n      state: field.state ? field.state : 'template_edit',\n      when: field.when ? field.when : null,\n      children: field.children,\n      items: items,\n    };\n\n    const formName = field.fieldgroup.name === 'selection' ? field.children.value.view.name : field.fieldgroup.name ? field.fieldgroup.name : 'select';\n\n    coreField.component = this._getEntityFieldComponent(formName);\n\n    return new FieldConfig(coreField);\n  }\n\n\n  private _setSchemeFieldSettings(scheme: EntitySchemeSectionInterface, field: FieldInterface) {\n    if (IsObject(scheme, ['id', 'mapping']) && IsObject(field, true)) {\n      // console.log( '_setSchemeFieldSettings', scheme, field );\n    }\n    return field;\n  }\n\n\n  /**\n   * Build out a config for a field item\n   * @param core\n   * @param model\n   */\n  buildCoreFieldItem(core: CoreConfig, model: FieldItemModelInterface): { model: FieldItemModelInterface, component: ComponentType<any>, config: any } {\n    return {\n      model: model,\n      component: this._getFormComponent(model.form),\n      config: FieldItemModelConfig(core, model)\n    };\n  }\n\n\n  /**\n   * Get the rules that should be applied on this field\n   * @param fieldItem\n   * @private\n   */\n  setFieldItemRules(fieldId: number, fieldItem: any, scheme?: EntitySchemeSectionInterface): void {\n    const RuleSet = {};\n    fieldItem.rule = {};\n    const itemRules = IsArray(fieldItem.itemrules, true) ? fieldItem.itemrules : []; // default rules inherited from the field_item_id\n    // const mapping = this.field.getSchemeFieldItemMapping(scheme, fieldId, +fieldItem.id);\n    // console.log('mapping', mapping);\n    const fieldRules = IsArray(fieldItem.fieldrules, true) ? fieldItem.fieldrules : []; // rules specific to this field item\n    const schemeRules = IsObject(scheme, ['id', 'mapping']) ? this.field.getSchemeFieldItemSection(scheme, fieldId, +fieldItem.id, 'rule') : {};\n    // we want field rules to override items rules when there is overlap ie.. the item might come with a default rule but the items rules should override it\n    itemRules.map((rule) => {\n      if (IsArray(rule.validations, true)) {\n        if (!(IsObject(rule.options))) rule.options = {};\n        rule.options.values = ConvertArrayToOptionList(rule.validations, {\n          nameKey: 'label',\n        });\n        rule.validationMap = ArrayKeyBy(rule.validations, 'id');\n        rule.value = +rule.validation.id;\n      } else {\n        rule.value = rule.raw_value;\n      }\n      if (!rule.value && rule.default_value) rule.value = rule.default_value;\n      RuleSet[rule.name] = rule;\n    });\n\n    fieldRules.map((rule) => {\n      if (IsObject(RuleSet[rule.name])) {\n        RuleSet[rule.name].id = rule.id;\n        RuleSet[rule.name].value = IsArray(RuleSet[rule.name].validations, true) ? rule.validation.id : rule.raw_value;\n        RuleSet[rule.name].field_id = rule.field_id;\n      }\n    });\n\n    fieldItem.rules = Object.values(RuleSet);\n    fieldItem.rules.map((rule: any) => {\n      if (!rule.validation.fixed) {\n        fieldItem.rule[rule.name] = ParseModelValue(rule.value);\n        if (IsObject(schemeRules, [rule.name])) {\n          fieldItem.rule[rule.name] = schemeRules[rule.name];\n        }\n      }\n    });\n\n    // delete fieldItem.fieldrules;\n    // delete fieldItem.itemrules;\n  }\n\n\n  /**\n   * A method that builds entity fieldset from the server models\n   * @param entityConfig\n   * @param fieldPosition\n   */\n  buildDomFields(core: CoreConfig, dom: PopDomService): Promise<boolean> { // a field is wrapper around field items\n    return new Promise(async (resolve) => {\n      let coreField, component;\n      // dom.ui.fields.clear();\n      const baseFields = core.repo.model.field;\n      const baseList = Object.values(baseFields).sort(DynamicSort('sort'));\n      const customFields = <Dictionary<FieldInterface>>await this._getEntityCustomFields(core);\n      PopLog.info(this.name, `buildDomFields`, {\n        base: baseFields,\n        custom: customFields\n      });\n      const customList = Object.values(customFields).sort((function (a, b) {\n        if (a.fieldgroup.id === b.fieldgroup.id) {\n          return b.label < a.label ? 1 : -1;\n        }\n        return a.fieldgroup.id > b.fieldgroup.id ? 1 : -1;\n      }));\n      // Place base field inf front of base fields, and then put custom fields (sorted by type,name)\n      const allFields = [...baseList, ...customList].map((field, index) => {\n        field.sort = index;\n        // return JSON.parse( JSON.stringify( field ) );\n        return DeepCopy(field);\n      });\n\n      if (IsArray(allFields, true)) {\n        allFields.map((field: any) => {\n\n          const name = field.model ? field.model.name : field.name;\n          // console.log(name, field.onLoad);\n          if (+core.entity.scheme_id && !(IsObject(core.entity.scheme_assets))) core.entity.scheme_assets = {};\n          const customFieldAssetLocation = +core.entity.scheme_id && IsObject(core.entity.scheme_assets, false) ? core.entity.scheme_assets : core.entity;\n          if (IsObject(field, true) && name) {\n            if (field.when) {\n              if (IsString(field.when)) field.when = [field.when];\n              field.hidden = !EvaluateWhenConditions(core, field.when, core);\n            }\n            if (IsObject(field, ['fieldgroup']) && name in customFieldAssetLocation) {\n              coreField = this.buildCustomField(core, field);\n              if (coreField) {\n                component = <DynamicComponentInterface>{\n                  type: PopEntityFieldComponent,\n                  inputs: <Dictionary<number | string | boolean | object | any[]>>CleanObject({\n                    core: core,\n                    field: new FieldConfig(coreField),\n                    hidden: field.hidden ? 1 : 0,\n                    when: field.when,\n                    onLoad: field.onLoad,\n                    onEvent: field.onEvent,\n                    onUnload: field.onUnload,\n                  }),\n                  custom: true,\n                  position: field.position ? field.position : 1,\n                  ancillary: field.ancillary,\n                  sort: field.sort,\n                };\n                dom.ui.fields.set(+field.id, component);\n              }\n              // }else if( IsObject( field, [ 'model' ] ) && name in core.entity ){\n            } else if (IsObject(field, ['model']) && ((name in core.entity) || field.preserve)) {\n              field.model.view = {name: field.model.form};\n              if (field.model.transformation) field.model.value = this._getModelValue(core, field, field.model);\n              const model = FieldItemModel(core, field.model);\n\n              const coreItem = {\n                model: model,\n                table: IsObject(field.table, true) ? field.table : {sort: 99, visible: false},\n                component: this._getFormComponent(field.model.view.name),\n                config: FieldItemModelConfig(core, model)\n              };\n\n              if (coreItem && coreItem.config) {\n                if (typeof coreItem.config.setControl === 'function') coreItem.config.setControl(); // build the control now so that the control can be the defacto session value\n                component = <DynamicComponentInterface>{\n                  type: coreItem.component,\n                  inputs: <Dictionary<number | string | boolean | object | any[]>>CleanObject({\n                    core: core,\n                    config: coreItem.config,\n                    hidden: field.hidden ? 1 : 0,\n                    when: field.when,\n                    onLoad: field.onLoad,\n                    onEvent: field.onEvent,\n                    onUnload: field.onUnload,\n                  }),\n                  custom: false,\n                  position: field.position ? field.position : 1,\n                  ancillary: field.ancillary ? true : false,\n                  when: IsArray(field.when, true) ? field.when : null,\n                  sort: field.sort ? field.sort : 99,\n                };\n                dom.ui.fields.set(coreItem.model.name, component);\n              }\n            }\n          }\n        });\n      }\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * A method that builds entity fieldset from the server models\n   * @param entityConfig\n   * @param fieldPosition\n   */\n  getDomFields(fieldPosition: number = 1, dom: PopDomService) { // a field is wrapper around field items\n    const componentList = [];\n    dom.ui.fields.forEach((component: DynamicComponentInterface, key: number | string) => {\n      if (!component.ancillary && component.position === fieldPosition) {\n        componentList.push(component);\n      }\n    });\n    return componentList;\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  /**\n   * Loop through the data for the entity and identify what refers to custom fields\n   * Retrieve the field data for each of the custom fields that exist\n   * @param core\n   * @private\n   */\n  private _getEntityCustomFields(core: CoreConfig): Promise<Dictionary<FieldInterface>> {\n    return new Promise<Dictionary<FieldInterface>>(async (resolve) => {\n      const tmp = {};\n      const customFields = <Dictionary<FieldInterface>>{};\n\n      if (core && core.params.can_extend) {\n\n        if (IsObject(core.entity)) {\n          Object.keys(core.entity).map((key: string) => {\n            if (IsObject(core.entity[key], ['@metadata'])) {\n              tmp[key] = core.entity[key];\n            } else if (IsArray(core.entity[key], true) && IsObject(core.entity[key][0], ['@metadata'])) {\n              tmp[key] = core.entity[key];\n            }\n          });\n        }\n        if (+core.entity.scheme_id && IsObject(core.entity.scheme_assets, true)) {\n          Object.keys(core.entity.scheme_assets).map((key: string) => {\n            if (IsObject(core.entity.scheme_assets[key], ['@metadata'])) {\n              tmp[key] = core.entity.scheme_assets[key];\n            } else if (IsArray(core.entity.scheme_assets[key], true) && IsObject(core.entity.scheme_assets[key][0], ['@metadata'])) {\n              tmp[key] = core.entity.scheme_assets[key];\n            }\n          });\n        }\n        const requests = [];\n        const names = [];\n        let fieldId;\n        const fieldRepo = await PopEntity.getEntityRepo('field');\n        Object.keys(tmp).map((name) => {\n          if (IsObject(tmp[name])) { // field only has a single value\n\n            if (IsObject(tmp[name]['@metadata'], ['@field_id'])) {\n              const record = tmp[name];\n              const metadata = record['@metadata'];\n              // delete record[ '@metadata' ];\n              fieldId = metadata['@field_id'];\n              tmp[name] = [record];\n            }\n          } else if (IsArray(tmp[name], true)) { // field has multiple values\n            const data = [];\n            const firstRecord = tmp[name][0];\n            fieldId = firstRecord['@metadata']['@field_id'];\n            // tmp[ name ].map((record, index) => {\n            //   // const dataKey = field_entry_id ? field_entry_id : ( metadata2[ '@record_id' ] ? +metadata2[ '@record_id' ] : index );\n            //   delete record[ '@metadata' ];\n            //   data.push(record);\n            // });\n            //\n            // tmp[ name ] = data;\n          }\n          if (+fieldId) {\n            names.push(name);\n            requests.push(this.cache.get('custom_field', String(fieldId), fieldRepo.getEntity(fieldId)));\n          }\n        });\n        if (requests.length) {\n          forkJoin(requests).subscribe((results) => {\n            results.map(async (result: any, index: number) => {\n              if (IsDefined(result, false)) {\n                result = GetHttpResult(result);\n                const fieldName = names[index];\n                result.name = fieldName;\n                result.data = fieldName in tmp ? tmp[fieldName] : {};\n                const customField = await this._setFieldEntries(result);\n                const field = await this._setEntityCustomFieldDataStructure(customField);\n                customFields[fieldName] = field;\n                if (index === (results.length - 1)) {\n                  return resolve(customFields);\n                }\n              } else {\n                if (index === (results.length - 1)) {\n                  return resolve(customFields);\n                }\n              }\n            });\n          }, (err) => {\n            return resolve(customFields);\n          });\n        } else {\n          return resolve(customFields);\n        }\n      } else {\n        return resolve(customFields);\n      }\n    });\n  }\n\n\n  clearCustomFieldCache(fieldId: number): void {\n    this.cache.clear('custom_field', String(fieldId));\n  }\n\n\n  /**\n   * Field Entries are a way to define the value structure of a field\n   * By default a field will have a single value, but a field can be configured to have multiple values\n   * Field entries provide a template of a specific amount of values a field should have\n   * @param field\n   * @private\n   */\n  private _setFieldEntries(field: FieldInterface): Promise<FieldInterface> {\n    return new Promise<FieldInterface>(async (resolve) => {\n      // if( IsObject( field, [ 'data' ] ) && IsArray( field.data ) ){\n      //   // console.log('field', field);\n      //   let values = field.data.length;\n      //   const entries = field.entries.filter( ( x ) => x.type !== 'custom' ).length;\n      //   let entriesNeeded = 0;\n      //   if( entries < values ){\n      //     entriesNeeded = +values - +entries;\n      //   }\n      //\n      //   const requests = [];\n      //   let limit = 100;\n      //   while( entriesNeeded > 0 && limit ){\n      //     limit--;\n      //     values++;\n      //     requests.push( PopRequest.doPost( `fields/${field.id}/entries`, {\n      //       name: TitleCase( `${field.fieldgroup.name} ${values}` ),\n      //       type: 'provided'\n      //     }, 1, false ) );\n      //     entriesNeeded--;\n      //   }\n      //   if( requests.length ){\n      //     forkJoin( requests ).subscribe( ( results ) => {\n      //       results.map( ( result: any, index: number ) => {\n      //         if( result.data ) result = result.data;\n      //         field.entries.push( result );\n      //       } );\n      //       return resolve( field );\n      //     }, () => {\n      //       return resolve( field );\n      //     } );\n      //\n      //   }else{\n      //     return resolve( field );\n      //   }\n      // }else{\n      //   return resolve( field );\n      // }\n\n      return resolve(field);\n\n    });\n  }\n\n\n  /**\n   * Field data should come in as an array of records\n   * Ensure that each each record has a unique entry id, and index data by field_entry_id;\n   * @param customField\n   */\n  private _setEntityCustomFieldDataStructure(customField: FieldInterface): Promise<FieldInterface> {\n    return new Promise<FieldInterface>((resolve) => {\n      const data = {};\n      // console.log('customField', customField);\n      if (IsArray(customField.data, true)) {\n        if (IsArray(customField.entries, true)) {\n          customField.data.map((record, index) => {\n            if (!record.field_entry_id) record.field_entry_id = customField.entries[index].id;\n            // console.log(\"is diff ? \", record.field_entry_id , ' - ', customField.entries[index].id);\n            // delete record[ '@metadata' ];\n            data[record.field_entry_id] = record;\n          });\n        }\n\n      } else {\n        if (IsArray(customField.entries)) {\n          customField.entries.map((entry: FieldEntry) => {\n            data[entry.id] = {};\n            const items = <any>customField.items;\n            if (IsArray(customField.items, true)) {\n              items.map((item) => {\n                data[entry.id][item.name] = null;\n              });\n            }\n          });\n        }\n      }\n      customField.data = data;\n\n      return resolve(customField);\n    });\n  }\n\n\n  /**\n   * Get the settings that should be applied on this field item\n   * @param fieldItem\n   * @private\n   */\n  private _getFieldItemSetting(fieldItem: any) {\n    return {};\n  }\n\n\n  /**\n   * A field entry is used to identity a specific value in a set of multiple values\n   * @param field\n   * @param dataKey\n   * @param index\n   * @private\n   */\n  private _getFieldItemEntry(field: FieldInterface, dataKey: number, index: number): FieldEntry {\n    let entry = <FieldEntry>{};\n    const data = field.data[dataKey];\n\n    if (IsArray(field.entries, true)) {\n      const customEntries = field.entries.filter((item) => {\n        return item.type !== 'custom';\n      });\n      const customIdLookup = ArrayMapSetter(customEntries, 'id');\n\n      const providedEntries = field.entries.filter((item) => {\n        return item.type !== 'custom';\n      });\n\n      const entryIndex = index % providedEntries.length;\n      const providedIdLookup = ArrayMapSetter(providedEntries, 'id');\n      if (data.field_entry_id && data.field_entry_id in providedIdLookup) {\n        entry = providedEntries[providedIdLookup[data.field_entry_id]];\n      } else if (data.field_entry_id && data.field_entry_id in customIdLookup) {\n        entry = customEntries[customIdLookup[data.field_entry_id]];\n        // ToDo:: Find the cutstom label that should be inserted here\n      } else if (entryIndex in field.entries) {\n        entry = providedEntries[entryIndex];\n      } else {\n        entry = providedEntries[0];\n      }\n    } else {\n      entry = null;\n    }\n    return entry;\n  }\n\n\n  /**\n   * Map the form in a field model to the angular component that will be used to render the field\n   * @param form\n   * @private\n   */\n  private _getFormComponent(form: string) {\n    let component = null;\n    if (IsString(form, true)) {\n      switch (String(form).toLowerCase()) {\n        case 'sidebyside':\n          component = PopSideBySideComponent;\n          break;\n        case 'select':\n          component = PopSelectComponent;\n          break;\n        case 'select-filter':\n          component = PopSelectFilterComponent;\n          break;\n        case 'select-list':\n          component = PopSelectListComponent;\n          break;\n        case 'select-multi':\n        case 'select_multi':\n          component = PopSelectMultiComponent;\n          break;\n        case 'select-modal':\n          component = PopSelectModalComponent;\n          break;\n        case 'text':\n        case 'input':\n          component = PopInputComponent;\n          break;\n        case 'textstring':\n          component = PopTextComponent;\n          break;\n        case 'number':\n          component = PopNumberComponent;\n          break;\n        case 'date':\n          component = PopDateComponent;\n          break;\n        case 'datepicker':\n          component = PopDatePickerComponent;\n          break;\n        case 'time':\n          component = PopTimeComponent;\n          break;\n        case 'checkbox':\n          component = PopCheckboxComponent;\n          break;\n        case 'switch':\n          component = PopSwitchComponent;\n          break;\n        case 'minmax':\n          component = PopMinMaxComponent;\n          break;\n        case 'radio':\n          component = PopRadioComponent;\n          break;\n        case 'textarea':\n          component = PopTextareaComponent;\n          break;\n        case 'label':\n          component = PopLabelComponent;\n          break;\n        case 'button':\n          component = PopButtonComponent;\n          break;\n        default:\n          PopLog.warn(this.name, `_getFormComponent: fail`, form);\n          break;\n      }\n    }\n    return component;\n  }\n\n\n  /**\n   * Resolve the value that lines up with the column/name of the field item from the data set\n   * The idea here is that a value may have already created for this field item and we need to make sure the field item initializes with the value\n   * @param core\n   * @param field\n   * @param model\n   * @param dataKey\n   * @private\n   */\n  private _getModelValue(core: CoreConfig, field: FieldInterface, model: FieldItemModelInterface, dataKey?: number) {\n    let value = null;\n    if (dataKey) {\n      if (IsObject(field.data, true) && IsObject(model, true)) {\n        if (dataKey in field.data && model.name in field.data[dataKey]) {\n          value = field.data[dataKey][model.name];\n          if (model.transformation) value = PopPipe.transform(value, model.transformation, core);\n        }\n      }\n    } else if (model.name in core.entity) {\n      value = core.entity[model.name];\n\n      if (model.transformation) value = PopPipe.transform(value, model.transformation, core);\n    }\n    return value;\n  }\n\n\n  /**\n   * Get the custom field template that is made for the field group\n   * @param name\n   * @private\n   */\n  private _getEntityFieldComponent(name: string) {\n    let component = null;\n    switch (String(name).toLowerCase()) {\n      case 'name':\n        component = PopEntityNameComponent;\n        break;\n      case 'email':\n        component = PopEntityEmailComponent;\n        break;\n      case 'phone':\n        component = PopEntityPhoneComponent;\n        break;\n      case 'address':\n        component = PopEntityAddressComponent;\n        break;\n      case 'date':\n      case 'datetime':\n        component = PopEntityDatetimeComponent;\n        break;\n      case 'textfield':\n      case 'input':\n        component = PopEntityInputComponent;\n        break;\n      case 'selection':\n      case 'select':\n        component = PopEntitySelectComponent;\n        break;\n      case 'select-multi':\n      case 'select_multi':\n      case 'multi_selection':\n        component = PopEntitySelectMultiComponent;\n        break;\n      case 'radio':\n        component = PopEntityRadioComponent;\n        break;\n      case 'checkbox':\n        component = PopEntityCheckboxComponent;\n        break;\n      case 'toggle':\n      case 'switch':\n        component = PopEntitySwitchComponent;\n        break;\n      case 'texteditor':\n      case 'textarea':\n        component = PopEntityTextareaComponent;\n        break;\n      default: {\n        PopLog.warn(this.name, `_getEntityFieldComponent: fail`, name);\n        break;\n      }\n    }\n    return component;\n  }\n\n}\n","import {forkJoin, Observable, of} from 'rxjs';\nimport {PopBaseService} from '../../../services/pop-base.service';\nimport {Inject} from '@angular/core';\nimport {\n  CoreConfig,\n  Dictionary, Entity, EntityModelInterface,\n  EntityParamsInterface, EntityPreference, PopBusiness, PopFilter, PopPipe,\n  QueryParamsInterface, ResourceConfig,\n  ServiceInjector, ServiceRoutesInterface\n} from '../../../pop-common.model';\nimport {environment} from '../../../../environments/environment';\nimport {Router} from '@angular/router';\nimport {PopLogService} from '../../../services/pop-log.service';\nimport {\n  ArrayGroupBy,\n  InterpolateString, IsArray, IsDefined, IsCallableFunction,\n  IsObject, IsString,\n  SpaceToHyphenLower, StringReplaceAll, TitleCase, DeepMerge, JsonCopy, DeepCopy,\n} from '../../../pop-common-utility';\nimport {PopDisplayService} from '../../../services/pop-display.service';\nimport {PopRequestService} from '../../../services/pop-request.service';\nimport {PopEntityUtilFieldService} from './pop-entity-util-field.service';\nimport {PopResourceService} from '../../../services/pop-resource.service';\nimport {map} from 'rxjs/operators';\nimport {InterpolateEntityRoute} from '../pop-entity-utility';\nimport {PopCacheService} from '../../../services/pop-cache.service';\n\n\nexport class PopEntityRepoService implements PopEntityServiceInterface {\n  private name = 'PopEntityRepoService';\n  private id: string;\n  protected params: EntityParamsInterface;\n  private activated = false;\n  protected apiVersion = 1;\n\n\n  public model: EntityModelInterface;\n\n  protected srv: {\n    base: PopBaseService,\n    cache: PopCacheService,\n    display: PopDisplayService,\n    field: PopEntityUtilFieldService,\n    log: PopLogService,\n    request: PopRequestService,\n    resource: PopResourceService,\n    router: Router,\n  };\n\n  protected routes: ServiceRoutesInterface;\n\n\n  protected setServiceContainer() {\n\n    this.srv = {\n      base: ServiceInjector.get(PopBaseService),\n      cache: new PopCacheService(),\n      display: ServiceInjector.get(PopDisplayService),\n      field: ServiceInjector.get(PopEntityUtilFieldService),\n      log: ServiceInjector.get(PopLogService),\n      request: ServiceInjector.get(PopRequestService),\n      resource: ServiceInjector.get(PopResourceService),\n      router: ServiceInjector.get(Router),\n    };\n  }\n\n\n  constructor(\n    @Inject('env') private readonly env?\n  ) {\n    if (!this.env) this.env = <any>environment;\n    this.setServiceContainer();\n  }\n\n\n  /**\n   * Pass in in the EntityParams to tie this to a specific type of entity\n   * (Moved out of constructor die to build issues)\n   * @param entityParams\n   */\n  register(entityParams: EntityParamsInterface) {\n    if (entityParams && entityParams.internal_name) {\n      this.id = entityParams.internal_name;\n      this.params = entityParams;\n      this.activated = true;\n      this.srv.log.init(this.name, `created:${this.id}`);\n    }\n  }\n\n\n  /**\n   * Pass in a route config for this entity\n   * @param routes\n   */\n  setRoutes(routes: ServiceRoutesInterface) {\n    this.routes = routes;\n  }\n\n\n  /**\n   * A http call to archive a single entity\n   * @param id\n   * @param archive\n   */\n  archiveEntity(id: number | string, archive: boolean): Observable<any> {\n    this.srv.cache.clearAll();\n    let path = InterpolateEntityRoute(this.routes.archive.entity.path, {id: id});\n    let body = {};\n    if (archive) {\n      if (IsObject(this.routes.archive.entity.params, true)) body = DeepMerge(JsonCopy(body), this.routes.archive.entity.params);\n      body = {...body, ...{business_id: PopBusiness.id, archived: -1}};\n      return this.srv.request.doDelete(path, body, this.apiVersion);\n    } else {\n      path = InterpolateEntityRoute(this.routes.restore.entity.path, {id: id});\n      if (IsObject(this.routes.restore.entity.params, true)) body = DeepMerge(JsonCopy(body), this.routes.restore.entity.params);\n      body = {...body, ...{business_id: PopBusiness.id, archived: -1}};\n      return this.srv.request.doPost(path, body, this.apiVersion);\n    }\n\n  }\n\n\n  /**\n   * A http call to archive  multiple entities that passes a  {xx: {archive: 1}, xx: {archive: 1}, } structure\n   * @param ids Primary Keys of the entities .[ 1 or 1,2,3,4,5 ]\n   * @param archive\n   */\n  archiveEntities(ids: string | number, archive: boolean): Observable<any> {\n    this.srv.cache.clearAll();\n    const requests = [];\n    if (archive) {\n      String(ids).split(',').map((id) => {\n        const path = InterpolateEntityRoute(this.routes.archive.entity.path, {id: id});\n        requests.push(this.srv.request.doDelete(path, null, this.apiVersion));\n      });\n    } else {\n      String(ids).split(',').map((id) => {\n        let path = InterpolateString(this.routes.restore.entity.path, {id: id});\n        path = StringReplaceAll(path, '\\\\?', '');\n        path = StringReplaceAll(path, '\\\\/\\\\/', '\\\\/');\n        requests.push(this.srv.request.doPost(path, {archived: -1}, this.apiVersion));\n      });\n    }\n    return forkJoin(requests);\n  }\n\n\n  /**\n   *  A method that returns the configured app\n   */\n  getAppName(): string {\n    return this.params.app;\n  }\n\n\n  /**\n   * A Http call that gets the entity configs\n   * @param id Primary Key of the entity\n   */\n  getConfig(): Observable<any> {\n    const path = `${this.routes.get.config.path}?entity_id=${this.params.id}`;\n    if (this.params.id) {\n      const body = IsObject(this.routes.get.config.params, true) ? this.routes.get.config.params : {};\n      return this.srv.request.doGet(path, body, this.apiVersion).pipe(\n        map((res: any) => {\n          res = res.data ? res.data : res;\n          res = ArrayGroupBy(res, 'type');\n          if (IsObject(res, true)) {\n            Object.keys(res).map((type: string) => {\n              if (IsArray(res[type], true)) {\n                const tmp = {};\n                res[type].map((setting) => {\n                  tmp[setting.name] = setting.config;\n                });\n                res[type] = tmp;\n              }\n            });\n          } else {\n            res = {};\n          }\n          return res;\n        })\n      );\n    } else {\n      return of({});\n    }\n  }\n\n\n  /**\n   *  A http call that gets a list of entities\n   * @param queryParams '?archived=1', '?archived=0'\n   */\n  getEntities(body: Object = {}, queryParams?: QueryParamsInterface): Promise<Entity[]> {\n    return new Promise<Entity[]>((resolve) => {\n      let data = <Entity[]>[];\n      if (!(IsObject(queryParams))) queryParams = {archived: 0};\n      if (!(IsObject(body))) body = {archived: IsDefined(queryParams.archived) ? queryParams.archived : 0};\n\n      if (this.model.table.filter && this.model.table.filter.active && IsObject(this.model.table.filter.query, true)) {\n        if (!queryParams.bypassFilters) {\n          Object.keys(this.model.table.filter.query).map((filterName: string) => {\n            if (filterName in PopFilter && IsArray(PopFilter[filterName], true)) body[this.model.table.filter.query[filterName]] = PopFilter[filterName];\n          });\n          // queryParams.limit = 100;\n        }\n      }\n      const path = `${this.routes.get.entities.path}`;\n      if (IsObject(this.routes.get.entities.params, true) && !queryParams.bypassParams) {\n        body = DeepMerge(JsonCopy(body), this.routes.get.entities.params);\n      }\n      let page = 1;\n      this.srv.request.doGet(`${path}`, body, this.apiVersion).subscribe(\n        (res: any) => {\n          data = <Entity[]>res.data;\n          if (IsObject(res.meta, true)) {\n            const requests = [];\n            const lastPage = res.meta.last_page;\n            while (page < lastPage) {\n              page++;\n              requests.push(this.srv.request.doGet(`${path}?page=${page}`, body, this.apiVersion));\n            }\n            if (requests.length) {\n              forkJoin(requests).subscribe((pages) => {\n                pages.map((nextPage: any) => {\n                  data.push(...nextPage.data);\n                });\n                return resolve(data);\n              });\n            } else {\n              return resolve(data);\n            }\n          } else {\n            return resolve(data);\n          }\n        });\n    });\n  }\n\n\n  /**\n   * A method that clears any cache for this entity type\n   */\n  clearAllCache(caller = ''): void {\n    this.srv.cache.clearAll();\n  }\n\n\n  /**\n   * A method that clears any cache for this entity type\n   */\n  clearCache(cacheType: string, cacheKey?: string, caller = ''): void {\n    this.srv.cache.clear(cacheType, cacheKey);\n  }\n\n\n  setCache(cacheType: string, cacheKey: string, data: any, minutes = 1) {\n    if (IsString(cacheType, true) && IsString(cacheKey) && IsDefined(data)) {\n      if (minutes > 60) minutes = 60;\n      this.srv.cache.set(cacheType, cacheKey, data, (minutes * 60 * 1000));\n    }\n  }\n\n\n  getCache(cacheType: string, cacheKey: string) {\n    return new Promise<Entity[]>((resolve) => {\n      if (IsString(cacheType, true) && IsString(cacheKey)) {\n        this.srv.cache.get(cacheType, cacheKey).subscribe((cacheData) => {\n          if (IsDefined(cacheData)) {\n            return resolve(cacheData);\n          } else {\n            resolve(null);\n          }\n        });\n      } else {\n        resolve(null);\n      }\n    });\n  }\n\n\n  /**\n   *\n   * @param id Primary Key of the entity\n   * @param params '?metadata=1', '?metadata=0', '?metadata=1&filter=id,name'\n   * @return Observable\n   */\n  getEntity(id: number | string, queryParams?: QueryParamsInterface): Observable<any> {\n    if (!queryParams || typeof (queryParams) !== 'object') queryParams = {};\n    let body = {archived: IsDefined(queryParams.archived) ? queryParams.archived : -1};\n    if (+id) {\n      const path = `${InterpolateString(this.routes.get.entity.path, {id: id})}`;\n      if (IsObject(this.routes.get.entity.params, true) && !queryParams.bypassParams) body = DeepMerge(JsonCopy(body), this.routes.get.entity.params);\n      this.srv.log.info(this.name, path, body);\n      const request = this.srv.request.doGet(path, body, this.apiVersion);\n      return queryParams.bypassCache ? request : this.srv.cache.get('entity', String(id), request);\n    }\n    return of(undefined);\n  }\n\n\n  /**\n   * A Http call that gets the entity history\n   * @param id Primary Key of the entity\n   */\n  getHistory(id: number): Observable<any> {\n    return of([]);\n    // const path = InterpolateString(this.routes.get.history, { id: id });\n    // return this.srv.request.doGet(path, {}, this.apiVersion);\n  }\n\n\n  /**\n   * A Http call that gets the entity metadata\n   * @param id Primary Key of the entity\n   */\n  getUiResource(core: CoreConfig): Promise<any> {\n    return new Promise(async (resolve) => {\n      let ui = {};\n      if (IsObject(this.model.resource, true)) {\n        const success = await this.srv.resource.setCollection(this.model.resource, core);\n        if (success) {\n          ui = this.srv.resource.getCollection(this.model.resource);\n          return resolve(ui);\n        } else {\n          resolve(false);\n        }\n      } else {\n        resolve(ui);\n      }\n    });\n  }\n\n\n  /**\n   * A Http call that gets the entity metadata\n   * @param id Primary Key of the entity\n   */\n  reloadResource(core: CoreConfig, resourceName: string): Promise<boolean> {\n    return new Promise(async (resolve) => {\n      if (resourceName && IsObject(this.model.resource, [resourceName])) {\n        if (!IsObject(core.resource)) core.resource = {};\n        core.resource[resourceName] = await this.srv.resource.reloadResource(core, this.model.resource[resourceName]);\n        return resolve(true);\n      } else {\n        return resolve(false);\n      }\n    });\n  }\n\n\n  /**\n   * A Http call that gets the entity metadata\n   * @param id Primary Key of the entity\n   */\n  injectResource(core: CoreConfig, resource: ResourceConfig, reload = false): Promise<boolean> {\n    return new Promise(async (resolve) => {\n      if (IsObject(resource, ['name'])) {\n        if (!(IsObject(this.model.resource[resource.name]))) {\n          if (!IsObject(this.model.resource)) this.model.resource = {};\n          if (!IsObject(core.resource)) core.resource = {};\n\n          this.model.resource[resource.name] = {...DeepCopy(resource)};\n          if (resource.api_path && IsString(resource.api_path, true)) {\n            core.resource[resource.name] = await this.srv.resource.reloadResource(core, resource);\n          } else {\n            core.resource[resource.name] = resource;\n          }\n          return resolve(true);\n        } else if (IsObject(this.model.resource[resource.name], true) && resource.api_path && reload) {\n          await this.reloadResource(core, resource.name);\n          return resolve(true);\n        } else {\n          return resolve(true);\n        }\n      } else {\n        return resolve(false);\n      }\n    });\n  }\n\n\n  /**\n   * A method that gets the entity singular name for entity\n   * @param field\n   */\n  getInternalName(): string {\n    return this.params.internal_name;\n  }\n\n\n  /**\n   * Get the alias display for this entity;\n   * @param alias 'singular | 'plural';\n   */\n  getDisplayName(alias: string = 'singular'): string {\n    return PopPipe.transform(this.params.internal_name, {type: 'entity', arg1: 'alias', arg2: alias});\n  }\n\n\n  /**\n   * A method that gets the base api path for the entity\n   * @param field\n   */\n  getApiPath(): string {\n\n    return this.params.path;\n  }\n\n\n  /**\n   * A http call that gets the preferences of a user\n   */\n  getPreferences(core: CoreConfig, cache = false): Promise<boolean> {\n    return new Promise<boolean>((resolve) => {\n      const buUserId = this.srv.base.getCurrentBusinessUserId();\n      if (buUserId) {\n        const path = `${this.routes.get.preference.path}`;\n        let body = {path: this.params.internal_name, bu_user_id: buUserId};\n        if (IsObject(this.routes.get.preference.params, true)) body = DeepMerge(JsonCopy(body), this.routes.get.preference.params);\n        const request = this.srv.request.doGet(path, body, this.apiVersion, true).pipe(\n          map((res: any) => {\n            const preferences = {};\n            const tmp = res.data ? <Entity>res.data : <Entity>res;\n            if (IsArray(tmp, true)) {\n              tmp.map((preference) => {\n                preferences[preference.type] = {...preference.settings, ...{id: preference.id}};\n              });\n            }\n            return preferences;\n          })\n        );\n        if (cache) {\n          this.srv.cache.get(this.params.internal_name, 'preference', request, 600000).subscribe((res: any) => {\n            if (!IsObject(core.preference)) core.preference = <EntityPreference>{};\n            core.preference = {...core.preference, ...res};\n            return resolve(true);\n          }, (err) => {\n            return resolve(false);\n          });\n        } else {\n          request.subscribe((res: any) => {\n\n            if (!IsObject(core.preference)) core.preference = <EntityPreference>{};\n            core.preference = {...core.preference, ...res};\n            return resolve(true);\n          }, () => {\n            return resolve(false);\n          });\n        }\n      } else {\n        return resolve(false);\n      }\n    });\n  }\n\n\n  /**\n   * A http call that gets the preferences of a user\n   */\n  deletePreference(id: number, type: string): Promise<any> {\n    return new Promise((resolve) => {\n      const path = `${this.routes.get.preference.path}/${id}`;\n      this.srv.request.doDelete(path, null, this.apiVersion, true).pipe(\n      ).subscribe(() => {\n        const defaultPreference = null;\n        return resolve(defaultPreference);\n        // this.srv.cache.clear([ `${this.params.internal_name}:preference` ]);\n        // this.getPreferences(true).subscribe(() => {\n        //   // ToDo:: Check inside entity models to see if a default table settings exist\n        //   const defaultPreference = null;\n        //   return resolve(defaultPreference);\n        // });\n      }, () => {\n        return resolve(false);\n      });\n    });\n  }\n\n\n  /**\n   * An Http call to save a preference\n   * @param id\n   * @param type\n   * @param body\n   */\n  savePreference(id: number = null, type: string, body: Dictionary<any>): Observable<any> {\n    let request;\n    if (+id) {\n      const path = `${this.routes.get.preference.path}/${id}`;\n      if (IsObject(this.routes.get.preference.params, true)) body = DeepMerge(JsonCopy(body), this.routes.get.preference.params);\n      request = this.srv.request.doPatch(path, body, this.apiVersion, true).pipe(\n        map((res: any) => {\n          let preference = {};\n          const tmp = res.data ? <Entity>res.data : <Entity>res;\n          if (IsObject(tmp, true)) {\n            preference = {...tmp.settings, ...{id: tmp.id}};\n          }\n          return preference;\n        })\n      );\n    } else {\n      const buUserId = this.srv.base.getCurrentBusinessUserId();\n      const path = `${this.routes.get.preference.path}`;\n      if (IsObject(this.routes.get.preference.params, true)) body = DeepMerge(JsonCopy(body), this.routes.get.preference.params);\n      body = {\n        ...body, ...{\n          path: this.params.internal_name,\n          type: type,\n          bu_user_id: buUserId,\n          name: `${TitleCase(this.params.name)} ${TitleCase(type)} Setting`\n        }\n      };\n      request = this.srv.request.doPost(path, body, this.apiVersion, true).pipe(\n        map((res: any) => {\n          let preference = {};\n          const tmp = res.data ? <Entity>res.data : <Entity>res;\n          if (IsObject(tmp, true)) {\n            preference = {...tmp.settings, ...{id: tmp.id}};\n          }\n          return preference;\n        })\n      );\n    }\n    return request;\n  }\n\n\n  /**\n   * A method that will navigate the user to the Tab View of an entity\n   * Method should take into consideration the aliases that the entity might have\n   * @param id Primary Key of the entity\n   * @param tab\n   */\n  navigateToEntity(id: number | string, tab?: string): Promise<any> {\n    return this.srv.router.navigateByUrl(`${this.srv.display.alias(SpaceToHyphenLower(this.params.name))}/${id}/${tab}`);\n  }\n\n\n  /**\n   * A method that will navigate the user to the List View of an entity\n   * Method should take into consideration the aliases that the entity might have\n   * @param id Primary Key of the entity\n   * @param tab\n   */\n  navigateToEntities(): Promise<any> {\n    return this.srv.router.navigateByUrl(this.srv.display.alias(SpaceToHyphenLower(this.params.name)));\n  }\n\n\n  /**\n   * A method that update an entity relation\n   * Method should take into consideration the aliases that the entity might have\n   * @param id Primary Key of the entity\n   * @param tab\n   */\n  updateEntity(id: number | string, entity: any, queryParams?: QueryParamsInterface) {\n    const path = InterpolateString(this.routes.patch.entity.path, {id: id});\n\n    return this.srv.request.doPatch(path, entity, this.apiVersion);\n  }\n\n}\n\n\nexport interface PopEntityServiceInterface {\n\n  /**\n   * A http call to archive a single entity\n   * @param id\n   * @param archive\n   */\n  archiveEntity(id: number | string, archive: boolean): Observable<any>;\n\n  /**\n   * A http call to archive  multiple entities that passes a  {xx: {archive: 1}, xx: {archive: 1}, } structure\n   * @param ids Primary Keys of the entities .[ 1 or 1,2,3,4,5 ]\n   * @param archive\n   */\n  archiveEntities(ids: string | number, archive: boolean): Observable<any>;\n\n\n  /**\n   *  A method that returns the configured app\n   */\n  getAppName(): string;\n\n  /**\n   *  A http call that gets a list of entities\n   * @param queryParams '?archived=1', '?archived=0'\n   */\n  getEntities(queryParams?: QueryParamsInterface): Promise<Entity[]>;\n\n  /**\n   *\n   * @param id Primary Key of the entity\n   * @param params '?metadata=1', '?metadata=0', '?metadata=1&filter=id,name'\n   * @return Observable\n   */\n  getEntity(id: number | string, queryParams?: QueryParamsInterface): Observable<any>;\n\n  /**\n   * A Http call that gets the entity history\n   * @param id Primary Key of the entity\n   */\n  getHistory(id: number): Observable<any>;\n\n\n  /**\n   * A Http call that gets the entity metadata\n   */\n  getUiResource(core: CoreConfig): Promise<any>;\n\n  /**\n   * A Http call that gets the entity configs\n   * @param id Primary Key of the entity\n   */\n  getConfig(): Observable<any>;\n\n\n  /**\n   * A method that gets the Intermal name for an entity\n   * @param field\n   */\n  getInternalName(): string;\n\n\n  /**\n   * A method that gets the Display name for a singular entity\n   * @param field\n   */\n  getDisplayName(): string;\n\n\n  /**\n   * A method that gets the base api path for the entity\n   * @param field\n   */\n  getApiPath(): string;\n\n  /**\n   * A http call that gets the user preferences of an Entity\n   */\n  getPreferences(core?: CoreConfig, cache?: boolean): Promise<any>;\n\n  /**\n   * A http call that reloads an existing resource\n   */\n  reloadResource(core: CoreConfig, resourceName: string): Promise<boolean>;\n\n  /**\n   * A method that will navigate the user to the Tab View of an entity\n   * Method should take into consideration the aliases that the entity might have\n   * @param id Primary Key of the entity\n   * @param tab\n   */\n  navigateToEntity(id: number | string, tab?: string): Promise<any>;\n\n  /**\n   * A method that will navigate the user to the List View of an entity\n   * Method should take into consideration the aliases that the entity might have\n   * @param id Primary Key of the entity\n   * @param tab\n   */\n  navigateToEntities(): Promise<any>;\n}\n\n","export const DefaultEntityAction = {\n  new: {\n    description: 'Add A New Record To #name',\n    config: {\n      fields: {\n        name: {\n          required: true,\n          pattern: 'Alpha'\n        },\n      },\n      http: 'POST',\n      label: 'New #internal_name',\n      postUrl: '#path',\n      goToUrl: '#path/:id/general',\n      submit: 'New',\n    },\n    active: 1\n  },\n  advanced_search: {\n    description: 'Advanced Search For #internal_name',\n    config: {\n      fields: {\n        name: {\n          required: true,\n          pattern: 'AlphaNumeric'\n        },\n      },\n      http: 'GET',\n      label: 'Advanced Search',\n      get_url: '#path',\n      goToUrl: null,\n      submit: 'Search',\n    },\n    active: 1\n  }\n};\n","import { EntityModelTableInterface } from '../../../pop-common.model';\n\nexport const DefaultEntityTable = <EntityModelTableInterface>{\n  setting: {\n    columns: {\n      id: {\n        checkbox: { sort_let: 0, visible: true },\n        display: 'ID',\n        sort: 4,\n        visible: true\n      },\n      name: {\n        display: 'Name',\n        sort: 1,\n        visible: true\n      },\n    },\n    options: {\n      display_header: true,\n      column_search: false,\n      column_sort: false,\n      sticky_header: true,\n    }\n  },\n  permission: {\n    allowColumnDisplayToggle: true,\n    allowColumnStickyToggle: true,\n    allowColumnSearchToggle: true,\n    allowColumnSortToggle: true,\n    allowHeaderStickyToggle: true,\n    allowHeaderDisplayToggle: true,\n    allowPaginatorToggle: true,\n  },\n  button: {\n    archived: true,\n    clone: true,\n    new: true,\n    advanced_search: false,\n    custom: []\n  },\n  filter: {\n    active: false,\n    display: 'default'\n  },\n};\n","export const DefaultEntityField = {\n  id: {\n    ancillary: 1,\n    position: 1,\n    table: {\n      checkbox: {\n        visible: true,\n        sort: 0\n      },\n      visible: true,\n      sort: 999\n    },\n    model: {\n      form: 'label',\n      name: 'id',\n      label: 'ID',\n      visible: true,\n      maxlength: 32,\n      copyLabel: true,\n      labelButton: true,\n      valueButton: true,\n      copyLabelBody: '#id',\n      copyLabelDisplay: 'ID #id',\n      valueButtonDisplay: ':archived',\n      valueButtonDisabled: true,\n      valueButtonDisplayTransformation: 'toActiveOrArchived',\n      subLabel: 'Created',\n      subValue: 'created_at'\n    },\n    sort: 0\n  },\n  name: {\n    ancillary: 0,\n    position: 1,\n    table: {\n      visible: true,\n      sort: 2\n    },\n    model: {\n      form: 'input',\n      name: 'name',\n      label: 'Name',\n      bubble: true,\n      pattern: 'Default',\n      visible: true,\n      required: 1,\n      maxlength: 64,\n      patch: {\n        field: 'name',\n        path: '#path/#entityId'\n      }\n    },\n    sort: 2\n  },\n  description: {\n    ancillary: 0,\n    position: 1,\n    table: {\n      visible: true,\n      sort: 3\n    },\n    model: {\n      form: 'textarea',\n      name: 'description',\n      label: 'Description',\n      autoSize: false,\n      height: 70,\n      maxHeight: 150,\n      maxlength: 255,\n      sort: 3,\n      patch: {\n        field: 'description',\n        path: '#path/#entityId'\n      }\n    },\n    sort: 3\n  },\n\n\n  added_by_user: {\n    ancillary: 1,\n    position: 1,\n    table: {\n      visible: false,\n      sort: 99\n    },\n    model: {\n      form: 'label',\n      name: 'added_by_user',\n      label: 'Added By',\n      truncate: 64,\n    },\n    sort: 99,\n  },\n  archived_by_user: {\n    ancillary: 1,\n    position: 1,\n    table: {\n      visible: false,\n      sort: 99\n    },\n    model: {\n      form: 'label',\n      name: 'archived_by_user',\n      label: 'Archived By',\n      truncate: 64,\n    },\n    sort: 99\n  },\n\n\n  created_at: {\n    ancillary: 1,\n    position: 1,\n    table: {\n      visible: false,\n      sort: 99,\n      transformation: {\n        arg1: 'date',\n        type: 'date'\n      },\n    },\n    model: {\n      form: 'label',\n      name: 'created_at',\n      label: 'Added Date',\n      truncate: 64,\n      transformation: {\n        arg1: 'date',\n        type: 'date'\n      },\n    },\n    sort: 99\n  },\n  created_by_user_id: {\n    ancillary: 1,\n    position: 1,\n    table: {\n      visible: false,\n      sort: 99\n    },\n    model: {\n      form: 'label',\n      name: 'created_by_user_id',\n      label: 'Added By ID',\n      truncate: 64,\n    },\n    sort: 99\n  },\n  deleted_at: {\n    ancillary: 1,\n    position: 1,\n    table: {\n      visible: false,\n      sort: 99,\n      transformation: {\n        arg1: 'date',\n        type: 'date'\n      },\n    },\n    model: {\n      form: 'label',\n      name: 'deleted_at',\n      label: 'Deleted At',\n      transformation: {\n        arg1: 'date',\n        type: 'date'\n      },\n      type: 'label',\n      action: 'general'\n    },\n    when: [\n      [\n        [\n          'entity.deleted_at'\n        ]\n      ]\n    ],\n    sort: 99\n  },\n\n  deleted_by_user_id: {\n    ancillary: 1,\n    position: 1,\n    table: {\n      visible: false,\n      sort: 99,\n    },\n\n    model: {\n      form: 'label',\n      name: 'deleted_by_user_id',\n      label: 'Archived',\n      visible: true,\n      maxlength: 32,\n      transformation: {\n        type: 'toYesNoPipe'\n      }\n    },\n    sort: 99\n  },\n  updated_at: {\n    ancillary: 1,\n    position: 1,\n    table: {\n      visible: false,\n      sort: 99,\n      transformation: {\n        arg1: 'date',\n        type: 'date'\n      },\n    },\n    model: {\n      form: 'label',\n      name: 'updated_at',\n      label: 'Last Update',\n      transformation: {\n        arg1: 'date',\n        type: 'date'\n      },\n      type: 'label',\n      action: 'general'\n    },\n    when: [\n      [\n        [\n          'entity.updated_at'\n        ]\n      ]\n    ],\n    sort: 99\n  },\n\n  archived: {\n    ancillary: 1,\n    position: 1,\n    table: {\n      visible: true,\n      sort: 99,\n      transformation: {\n        type: 'toYesNoPipe'\n      },\n    },\n    model: {\n      form: 'label',\n      name: 'archived',\n      label: 'Archived',\n      transformation: {\n        type: 'toYesNoPipe'\n      },\n      type: 'label',\n    },\n    when: [\n      [\n        [\n          'entity.archived'\n        ]\n      ]\n    ],\n    sort: 99\n  }\n};\n","import { Dictionary, ResourceInterface } from '../../../pop-common.model';\n\nexport const DefaultEntityResource = <Dictionary<ResourceInterface>>{\n  // entities: {\n  //   name: 'entities',\n  //   defaultValue: null,\n  //   data_type: 'api_records',\n  //   api_path: 'entities?select=id,name,internal_name&archived=-1',\n  //   api_cache: 1,\n  //   data_filter: {},\n  // },\n};\n","import { EntityModelMenuInterface } from '../../../pop-common.model';\n\nexport const DefaultEntityMenu = <EntityModelMenuInterface>{\n  button: {\n    archive: true,\n    clone: false,\n    custom: [],\n    delete: false,\n    goBack: true\n  },\n  archiveKey: 'archived'\n};\n","import { ServiceRoutesInterface } from '../../../pop-common.model';\n\nexport const DefaultEntityRoute = <ServiceRoutesInterface>{\n  get: {\n    entity: {\n      path: `#path/{id}`,\n      params: {},\n    },\n    entities: {\n      path: `#path`,\n      params: {},\n    },\n    config: {\n      path: `apps/configs`,\n      params: {},\n    },\n    history: {\n      path: `#path/{id}/history`,\n      params: {},\n    },\n    preference: {\n      path: `apps/preferences`,\n      params: {},\n    },\n  },\n  patch: {\n    entity: {\n      path: `#path/{id}`,\n      params: {},\n    },\n  },\n  archive: {\n    entity: {\n      path: `#path/{id}`,\n      params: {},\n    },\n  },\n  restore: {\n    entity: {\n      path: `#path/{id}`,\n      params: {},\n    },\n  }\n};\n","import {EventEmitter, Injectable, OnDestroy} from '@angular/core';\nimport {tap} from 'rxjs/operators';\nimport {forkJoin, Observable, of} from 'rxjs';\n\nimport {PopEntityRepoService} from './pop-entity-repo.service';\nimport {TabConfig} from '../../base/pop-tab-menu/tab-menu.model';\n\nimport {ActivatedRoute} from '@angular/router';\nimport {\n  CoreConfig, DataDecorator, DataFilter, DataSetter,\n  Dictionary,\n  Entity,\n  EntityAccessInterface,\n  EntityExtendInterface,\n  EntityModelInterface,\n  EntityModelMenuInterface,\n  EntityModelTableInterface,\n  EntityParams,\n  EntityParamsInterface,\n  EntityPreference,\n  PopBaseEventInterface, PopHistory, PopLog,\n  QueryParamsInterface,\n  ResourceInterface,\n  ServiceRoutesInterface\n} from '../../../pop-common.model';\nimport {PopEntityUtilFieldService} from './pop-entity-util-field.service';\nimport {\n  DeepMerge,\n  IsArray,\n  IsObject,\n  IsObjectThrowError,\n  IsString,\n  JsonCopy,\n  IsNumber,\n  IsCallableFunction,\n  StorageGetter,\n  GetHttpObjectResult\n} from '../../../pop-common-utility';\nimport {PopDomService} from '../../../services/pop-dom.service';\nimport {PopEntityUtilParamService} from './pop-entity-util-param.service';\nimport {DefaultEntityAction} from '../models/pop-entity-default.action';\nimport {DefaultEntityTable} from '../models/pop-entity-default.table';\nimport {DefaultEntityField} from '../models/pop-entity-default.field';\nimport {DefaultEntityResource} from '../models/pop-entity-default.resource';\nimport {DefaultEntityMenu} from '../models/pop-entity-default.menu';\nimport {DefaultEntityRoute} from '../models/pop-entity-default.route';\nimport {\n  EvaluateWhenConditions,\n  InterpolateEntityRoutes,\n  IsAliasable,\n  SessionEntityFieldUpdate\n} from '../pop-entity-utility';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PopEntityService implements OnDestroy {\n  private name = 'PopEntityService';\n  private id;\n\n  private asset = {\n    access: <Map<string, EntityAccessInterface>>new Map<string, EntityAccessInterface>(),\n    base: <Map<string, CoreConfig>>new Map<string, CoreConfig>(),\n    dataSetter: <Map<string, DataSetter>>new Map<string, DataSetter>(),\n    entryAccess: <Map<string, string[]>>new Map<string, string[]>(),\n    lastDataSetter: <Map<string, DataSetter>>new Map<string, DataSetter>(),\n    decorator: <Map<string, DataDecorator>>new Map<string, DataDecorator>(),\n    filter: <Map<string, DataFilter>>new Map<string, DataFilter>(),\n    params: <Map<string, EntityParams>>new Map<string, EntityParams>(),\n    repo: <Map<string, PopEntityRepoService>>new Map<string, PopEntityRepoService>(),\n    tabs: <Map<string, TabConfig[]>>new Map<string, TabConfig[]>(),\n    resources: <Map<string, Dictionary<ResourceInterface>>>new Map<string, Dictionary<ResourceInterface>>(),\n    actions: <Map<string, Dictionary<any>>>new Map<string, Dictionary<any>>(),\n    fields: <Map<string, Dictionary<any>>>new Map<string, Dictionary<any>>(),\n    tables: <Map<string, EntityModelTableInterface>>new Map<string, EntityModelTableInterface>(),\n    menus: <Map<string, EntityModelMenuInterface>>new Map<string, EntityModelMenuInterface>(),\n    routes: <Map<string, ServiceRoutesInterface>>new Map<string, ServiceRoutesInterface>(),\n  };\n\n\n  /**\n   * This srv is used in the\n   * @param env\n   */\n  constructor(\n    private fieldUtil: PopEntityUtilFieldService,\n    private paramUtil: PopEntityUtilParamService,\n  ) {\n    this.asset.tabs.set('default', []);\n  }\n\n\n  /**\n   * Check a specific crud access against an entity\n   * @param internal_name\n   * @param accessType\n   */\n  checkAccess(internal_name: string, accessType: string) {\n    return this.paramUtil.checkAccess(internal_name, accessType);\n  }\n\n\n  /**\n   * Configure/Extend the default behavior of an entity\n   * @param internal_name\n   * @param extend\n   */\n  configure(internal_name: string, extend: EntityModelInterface) {\n    if (IsArray(extend.tab, true)) this.setEntityTabs(internal_name, extend.tab);\n    if (IsObject(extend.action, true)) this.setEntityAction(internal_name, extend.action);\n    if (IsArray(extend.entryAccess, true)) this.setEntityEntryAccess(internal_name, extend.entryAccess);\n    if (IsObject(extend.resource, true)) this.setEntityResource(internal_name, extend.resource);\n    if (IsCallableFunction(extend.dataSetter)) this.setEntityDataSetter(internal_name, extend.dataSetter);\n    if (IsCallableFunction(extend.lastDataSetter)) this.setLastEntityDataSetter(internal_name, extend.lastDataSetter);\n    if (IsCallableFunction(extend.decorator)) this.setEntityDecorator(internal_name, extend.decorator);\n    if (IsCallableFunction(extend.filter)) this.setEntityFilter(internal_name, extend.filter);\n    if (IsObject(extend.table, true)) this.setEntityTable(internal_name, extend.table);\n    if (IsObject(extend.route, true)) this.setEntityRoute(internal_name, extend.route);\n    if (IsObject(extend.field, true)) this.setEntityField(internal_name, extend.field);\n    if (IsObject(extend.menu, true)) this.setEntityMenu(internal_name, extend.menu);\n  }\n\n\n  /**\n   * A method to get a Core Config for an entity\n   * Uses cache service to improve performance\n   * ALL ENTITY RELATED COMPONENTS RELY ON THIS !!!!\n   * @param entityParams\n   * @param metadata\n   */\n  getCoreConfig(internal_name: string, entityId: number = 0, dom?: PopDomService): Promise<CoreConfig> {\n    return new Promise<CoreConfig>((resolve) => {\n//       console.log('internal_name', entityId);\n      this._getBaseCoreConfig(internal_name).then((baseConfig: CoreConfig) => {\n        if (+entityId > 0) {\n          baseConfig.params.entityId = +entityId;\n\n          baseConfig.repo.getEntity(baseConfig.params.entityId, {}).subscribe(async (res: any) => {\n            baseConfig.entity = res.data ? <Entity>res.data : <Entity>res;\n\n            await this.setCoreDomAssets(baseConfig, dom);\n            // await this.setCoreDomAssets(baseConfig, dom);\n\n            return resolve(baseConfig);\n          }, () => {\n            if (PopHistory.isPreviousHistory()) PopHistory.goBack();\n            return resolve(null);\n          });\n        } else {\n          return resolve(baseConfig);\n        }\n      });\n    });\n  }\n\n\n  /**\n   * Preferences are something that might change in the base configs, keep them there for now since they will not change often\n   * Note: Moved preferences to base configs since they are not playing nice with cache and I want to update them directly\n   * @param internal_name\n   * @param key\n   * @param value\n   */\n  updateBaseCoreConfig(internal_name: string, key: string, value: any) {\n    const base = this.asset.base.get(internal_name);\n    let subKey;\n    if (base) {\n      if (key.includes(':')) {\n        const keys = key.split(':');\n        key = String(keys[0]).trim();\n        subKey = String(keys[1]).trim();\n      }\n      if (key in base) {\n        if (subKey) {\n          if (subKey in base[key]) {\n            base[key][subKey] = value;\n          }\n        } else {\n          base[key] = value;\n        }\n      }\n      this.asset.base.set(internal_name, base);\n    }\n\n    return true;\n  }\n\n\n  /**\n   * Get the base set of the entity definitions\n   * These is the starting point when it comes to entities\n   * @param internal_name\n   * @param entityId\n   */\n  getEntityParams(internal_name: string, entityId: number = null): EntityParams {\n    let entityParams;\n    if (this.asset.params.has(internal_name)) {\n      entityParams = {...this.asset.params.get(internal_name)};\n      entityParams.entity = entityId;\n    } else {\n      entityParams = this.paramUtil.getEntityParams(internal_name);\n      if (entityParams) {\n        this.asset.params.set(internal_name, <EntityParams>{...entityParams});\n      }\n    }\n    return entityParams;\n  }\n\n\n  /**\n   * Get the entity repo\n   * These is the starting point when it comes to entities\n   * @param internal_name\n   * @param entityId\n   */\n  getEntityRepo(internal_name: string): Promise<PopEntityRepoService> {\n    return new Promise<PopEntityRepoService>(async (resolve) => {\n      const baseConfig = await this._getBaseCoreConfig(internal_name);\n      if (IsObject(baseConfig), ['repo']) {\n        return resolve(baseConfig.repo);\n      } else {\n        return resolve(null);\n      }\n    });\n  }\n\n\n  /**\n   * Get the entity params that are associated with a angular route ie.. /admin/accounts should resolve to the account params\n   * @param api_path\n   * @param id\n   */\n  getEntityParamsWithPath(api_path: string, id = null): EntityParams {\n    return this.paramUtil.getEntityParamsWithPath(api_path, id);\n  }\n\n\n  /**\n   * A helper function that fetches an entity internal name from an Active Route\n   * This is a way to ask based of the current route what entity am I dealing with\n   * @param route\n   * @param extension\n   */\n  getRouteInternalName(route: ActivatedRoute, extension?: EntityExtendInterface) {\n    let internal_name = 'user';\n    if (route.snapshot.params && route.snapshot.params.internal_name) {\n      internal_name = route.snapshot.params.internal_name;\n    } else if (extension && IsString(extension.internal_name, true)) {\n      internal_name = extension.internal_name;\n    } else if (IsString(route.snapshot.data.internal_name, true)) {\n      internal_name = route.snapshot.data.internal_name;\n    } else if (IsString(route.snapshot.data.can_read, true)) {\n      internal_name = route.snapshot.data.can_read;\n    } else {\n      let pathEntityParams;\n      if (route.snapshot.routeConfig && route.snapshot.routeConfig.path) {\n        pathEntityParams = this.paramUtil.getEntityParamsWithPath(route.snapshot.routeConfig.path);\n      }\n      if (pathEntityParams) {\n        internal_name = pathEntityParams.internal_name;\n      } else {\n        let attempt;\n        const parts = window.location.pathname.split('/');\n        while (!internal_name || parts.length) {\n          attempt = parts.pop();\n          if (isNaN(attempt) && this.paramUtil.getEntityParams(attempt)) {\n            internal_name = attempt;\n            break;\n          }\n          if (!internal_name && isNaN(attempt) && this.paramUtil.getEntityParamsWithPath(attempt)) {\n            internal_name = attempt;\n            break;\n          }\n        }\n      }\n    }\n    return internal_name;\n  }\n\n\n  /**\n   * A helper function that fetches an entity Id from an Active Route\n   * This is a way to ask based of the current route what entity am I dealing with\n   * @param route\n   * @param extension\n   */\n  getRouteParentId(route: ActivatedRoute, extension?: EntityExtendInterface) {\n    let parentId = null;\n    if (route.snapshot.params && route.snapshot.params.id) {\n      parentId = route.snapshot.params.id;\n    } else {\n      let attempt;\n      const parts = window.location.pathname.split('/');\n      while (!parentId || parts.length) {\n        attempt = parts.pop();\n        if (IsNumber(attempt, true)) {\n          parentId = attempt;\n          break;\n        }\n      }\n    }\n    return parentId;\n  }\n\n\n  /**\n   * Get the set of tab configs that belong to an entity\n   */\n  getEntityTabs(core?: CoreConfig): TabConfig[] {\n    if (IsObject(core, ['params', 'entity']) && this.asset.tabs.has(core.params.internal_name)) {\n      const tabs = this.asset.tabs.get(core.params.internal_name).filter((tab) => {\n        return EvaluateWhenConditions(core, tab.when, core);\n      });\n      return [...tabs];\n    } else {\n      return [...this.asset.tabs.get('default')];\n    }\n  }\n\n\n  /**\n   * A method that refreshes just the entity on an CoreConfig\n   * Will automatically update the entity on the entity config\n   * @param config\n   * @param queryParams\n   */\n  refreshCoreEntity(core: CoreConfig, dom: PopDomService, queryParams: QueryParamsInterface): Promise<Entity> {\n    return new Promise<Entity>((resolve) => {\n      if (core.params.entityId) core.repo.clearCache('entity', String(core.params.entityId), 'PopEntityService:refreshEntity');\n      if (!IsObject(queryParams)) queryParams = {};\n      if (core && core.repo) {\n        queryParams.bypassCache = true;\n        core.repo.getEntity(core.params.entityId, queryParams).subscribe(async (res: any) => {\n          const entity = <Entity>GetHttpObjectResult(res);\n          Object.keys(entity).map((key: string) => {\n            core.entity[key] = entity[key];\n          });\n          await this.setCoreDomAssets(core, dom);\n          PopLog.info(this.name, `refreshCoreEntity`, core.entity);\n          return resolve(entity);\n        }, (err) => {\n          return resolve(null);\n        });\n      } else {\n        return resolve(null);\n      }\n    });\n  }\n\n\n  /**\n   * This function is responsible to make sure the CoreConfig has resources to do its job\n   * IE... If a field request a data set , this function should make sure that it is available\n   * @param core\n   * @param dom\n   * @private\n   */\n  setCoreDomAssets(core: CoreConfig, dom?: PopDomService): Promise<boolean> {\n    return new Promise(async (resolve) => {\n\n\n      core.resource = await core.repo.getUiResource(core);\n      if (IsObject(core.entity, true)) {\n        const dataSetter = StorageGetter(core.repo, ['model', 'dataSetter'], null);\n        if (IsCallableFunction(dataSetter)) {\n          core.entity = dataSetter(core, core.entity, dom);\n        }\n        if (IsObject(dom, true)) {\n          await this.fieldUtil.buildDomFields(core, dom);\n        }\n        const lastDataSetter = StorageGetter(core.repo, ['model', 'lastDataSetter'], null);\n        if (IsCallableFunction(lastDataSetter)) {\n          core.entity = lastDataSetter(core, core.entity, dom);\n        }\n      }\n\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * Set the base definitions for an entity\n   * Each entity needs to define these so we know how to talk to the api in regards to it\n   * The api should provide this details as part of the auth token\n   * @param internal_name\n   * @param entityId\n   */\n  setEntityParams(params: EntityParamsInterface) {\n    PopLog.info(this.name, `Entity Params set for ${params.internal_name}`, params);\n    this.paramUtil.setEntityParams(params);\n  }\n\n\n  /**\n   * Attach a set of tab configs to an entity\n   * @param internal_name\n   * @param tabs\n   */\n  setEntityTabs(internal_name: string, tabs: TabConfig[]) {\n    if (IsString(internal_name, true) && Array.isArray(tabs)) {\n      PopLog.info(this.name, `Entity Tabs set for ${internal_name}`, tabs);\n      this.asset.tabs.set(internal_name, tabs);\n    }\n  }\n\n\n  /**\n   * Attach a set of actions to an entity\n   * @param internal_name\n   * @param tabs\n   */\n  setEntityAction(internal_name: string, action: Dictionary<any>): void {\n    if (IsString(internal_name, true) && IsObject(action)) {\n      PopLog.info(this.name, `Entity Action set for ${internal_name}`, action);\n      this.asset.actions.set(internal_name, action);\n    }\n  }\n\n\n  /**\n   * Attach a set of actions to an entity\n   * @param internal_name\n   * @param tabs\n   */\n  setEntityEntryAccess(internal_name: string, entryAccess: string[]): void {\n    if (IsString(internal_name, true) && IsArray(entryAccess, true)) {\n      PopLog.info(this.name, `Entity entryAccess set for ${internal_name}`, entryAccess);\n      this.asset.entryAccess.set(internal_name, entryAccess);\n    }\n  }\n\n\n  /**\n   * Attach a set of table options for an entity\n   * @param internal_name\n   * @param tabs\n   */\n  setEntityTable(internal_name: string, table: EntityModelTableInterface): void {\n    if (IsString(internal_name, true) && IsObject(table)) {\n      PopLog.info(this.name, `Entity Action set for ${internal_name}`, table);\n      this.asset.tables.set(internal_name, table);\n    }\n  }\n\n\n  /**\n   * Attach a set of table options for an entity\n   * @param internal_name\n   * @param tabs\n   */\n  setEntityRoute(internal_name: string, route: ServiceRoutesInterface): void {\n    if (IsString(internal_name, true) && IsObject(route)) {\n      PopLog.info(this.name, `Entity Route set for ${internal_name}`, route);\n      this.asset.routes.set(internal_name, route);\n    }\n  }\n\n\n  /**\n   * Attach a set of tab menu configs to an entity\n   * @param internal_name\n   * @param tabs\n   */\n  setEntityMenu(internal_name: string, menu: EntityModelMenuInterface): void {\n    if (IsString(internal_name, true) && IsObject(menu, true)) {\n      PopLog.info(this.name, `Entity Menu set for ${internal_name}`, menu);\n      this.asset.menus.set(internal_name, menu);\n    }\n  }\n\n\n  /**\n   * Attach a set of resources to an entity\n   * @param internal_name\n   * @param tabs\n   */\n  setEntityResource(internal_name: string, resource: Dictionary<ResourceInterface>): void {\n    if (IsString(internal_name, true) && IsObject(resource)) {\n      PopLog.info(this.name, `Entity Resource set for ${internal_name}`, resource);\n      this.asset.resources.set(internal_name, resource);\n    }\n  }\n\n\n  /**\n   * Attach a data decorator that mutates entity data response\n   * @param internal_name\n   * @param tabs\n   */\n  setEntityDecorator(internal_name: string, decorator: DataDecorator): void {\n    if (IsString(internal_name, true) && IsCallableFunction(decorator)) {\n      PopLog.info(this.name, `Entity Decorator set for ${internal_name}`, decorator.toString());\n      this.asset.decorator.set(internal_name, decorator);\n    }\n  }\n\n\n  /**\n   * Attach a data decorator that mutates entity data response\n   * @param internal_name\n   * @param tabs\n   */\n  setEntityDataSetter(internal_name: string, dataSetter: DataSetter): void {\n    if (IsString(internal_name, true) && IsCallableFunction(dataSetter)) {\n      PopLog.info(this.name, `Entity Data Setter set for ${internal_name}`, dataSetter.toString());\n      this.asset.dataSetter.set(internal_name, dataSetter);\n    }\n  }\n\n\n  /**\n   * Attach a data decorator that mutates entity data response\n   * @param internal_name\n   * @param tabs\n   */\n  setLastEntityDataSetter(internal_name: string, dataSetter: DataSetter): void {\n    if (IsString(internal_name, true) && IsCallableFunction(dataSetter)) {\n      PopLog.info(this.name, `Entity Last Data Setter  set for ${internal_name}`, dataSetter.toString());\n      this.asset.lastDataSetter.set(internal_name, dataSetter);\n    }\n  }\n\n\n  /**\n   * Attach a data filter to limit the entity data response\n   * @param internal_name\n   * @param tabs\n   */\n  setEntityFilter(internal_name: string, filter: DataFilter): void {\n    if (IsString(internal_name, true) && IsCallableFunction(filter)) {\n      PopLog.info(this.name, `Entity Filter set for ${internal_name}`, filter.toString());\n      this.asset.filter.set(internal_name, filter);\n    }\n  }\n\n\n  /**\n   * Attach a set of fields to an entity\n   * @param internal_name\n   * @param tabs\n   */\n  setEntityField(internal_name: string, field: Dictionary<any>): void {\n    if (IsString(internal_name, true) && IsObject(field)) {\n      PopLog.info(this.name, `Entity Field set for ${internal_name}`, field);\n      this.asset.fields.set(internal_name, field);\n    }\n  }\n\n\n  /**\n   * Get extended fields attached to an entity\n   * @param internal_name\n   * @param tabs\n   */\n  getEntityField(internal_name: string): Dictionary<any> {\n    if (IsString(internal_name, true)) {\n      const field = this.asset.fields.get(internal_name);\n      return field ? field : {};\n    }\n  }\n\n  /**\n   * Get entry access for an entity\n   * @param internal_name\n   * @param tabs\n   */\n  getEntityEntryAccess(internal_name: string): Dictionary<any> {\n    if (IsString(internal_name, true)) {\n      const entryAccess = this.asset.entryAccess.get(internal_name);\n      return IsArray(entryAccess, true) ? entryAccess : [];\n    }\n  }\n\n\n  /**\n   * Get extended fields attached to an entity\n   * @param internal_name\n   * @param tabs\n   */\n  getEntityResource(internal_name: string): Dictionary<ResourceInterface> {\n    if (IsString(internal_name, true)) {\n      const resource = this.asset.resources.get(internal_name);\n      return resource ? resource : {};\n    }\n  }\n\n\n  /**\n   * Get entity data decorator\n   * @param internal_name\n   * @param tabs\n   */\n  getEntityDecorator(internal_name: string): DataDecorator {\n    if (IsString(internal_name, true)) {\n      const decorator = this.asset.decorator.get(internal_name);\n      return IsCallableFunction(decorator) ? decorator : null;\n    }\n  }\n\n\n  /**\n   * Get entity data decorator\n   * @param internal_name\n   * @param tabs\n   */\n  getEntityDataSetter(internal_name: string): DataSetter {\n    if (IsString(internal_name, true)) {\n      const dataSetter = this.asset.dataSetter.get(internal_name);\n      return IsCallableFunction(dataSetter) ? dataSetter : null;\n    }\n  }\n\n\n  /**\n   * Get entity data decorator\n   * @param internal_name\n   * @param tabs\n   */\n  getEntityLastDataSetter(internal_name: string): DataSetter {\n    if (IsString(internal_name, true)) {\n      const lastDataSetter = this.asset.lastDataSetter.get(internal_name);\n      return IsCallableFunction(lastDataSetter) ? lastDataSetter : null;\n    }\n  }\n\n\n  /**\n   * Get entity data decorator\n   * @param internal_name\n   * @param tabs\n   */\n  getEntityFilter(internal_name: string): DataFilter {\n    if (IsString(internal_name, true)) {\n      const filter = this.asset.filter.get(internal_name);\n      return IsCallableFunction(filter) ? filter : null;\n    }\n  }\n\n\n  /**\n   * Get extended actions attached to an entity\n   * @param internal_name\n   * @param tabs\n   */\n  getEntityAction(internal_name: string): Dictionary<any> {\n    if (IsString(internal_name, true)) {\n      const action = this.asset.actions.get(internal_name);\n      return action ? action : {};\n    }\n  }\n\n\n  /**\n   * Get extended table attached to an entity\n   * @param internal_name\n   * @param tabs\n   */\n  getEntityTable(internal_name: string): EntityModelTableInterface {\n    if (IsString(internal_name, true)) {\n      const table = this.asset.tables.get(internal_name);\n      return table ? table : {};\n    }\n  }\n\n\n  /**\n   * Get extended table attached to an entity\n   * @param internal_name\n   * @param tabs\n   */\n  getEntityRoute(internal_name: string): ServiceRoutesInterface {\n    if (IsString(internal_name, true)) {\n      const route = this.asset.routes.get(internal_name);\n      return route ? route : {};\n    }\n  }\n\n\n  /**\n   * Get extended table attached to an entity\n   * @param internal_name\n   * @param tabs\n   */\n  getEntityMenu(internal_name: string): EntityModelMenuInterface {\n    if (IsString(internal_name, true)) {\n      const action = this.asset.menus.get(internal_name);\n      return action ? action : {};\n    }\n  }\n\n\n  bustAllCache() {\n    this.asset.repo.forEach((repo: PopEntityRepoService, key: string) => {\n      PopLog.init(this.name, `Bust cache for ${repo.getInternalName()}`);\n      repo.clearAllCache('bustAllCache');\n    });\n  }\n\n\n  ngOnDestroy() {\n    console.log(this.name, `destroyed:${this.id}`);\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  /**\n   * This will do all of the work of building and storing the base config for each entity\n   * @param internal_name\n   * @param routes\n   * @private\n   */\n  private _getBaseCoreConfig(internal_name: string): Promise<CoreConfig> {\n    return new Promise(async (resolve) => {\n      if (!this.asset.base.has(internal_name)) {\n        const params = this.getEntityParams(internal_name);\n        const core = new CoreConfig({\n          params: IsObjectThrowError(params, true, `Could not resolve params for ${internal_name}`) ? params : null,\n        });\n        core.flag = {routeCheck: IsAliasable(internal_name), assetCheck: true, modalCheck: false, refreshCheck: false};\n        core.access = this._getEntityAccess(core.params);\n        core.channel = new EventEmitter<PopBaseEventInterface>();\n        core.repo = this._getEntityRepo(core.params);\n        core.repo.model = {\n          action: DeepMerge(JsonCopy(DefaultEntityAction), this.getEntityAction(core.params.internal_name)),\n          dataSetter: this.getEntityDataSetter(core.params.internal_name),\n          lastDataSetter: this.getEntityLastDataSetter(core.params.internal_name),\n          decorator: this.getEntityDecorator(core.params.internal_name),\n          filter: this.getEntityFilter(core.params.internal_name),\n          table: DeepMerge(JsonCopy(DefaultEntityTable), this.getEntityTable(core.params.internal_name)),\n          field: {...DeepMerge(DefaultEntityField), ...this.getEntityField(core.params.internal_name)},\n          resource: DeepMerge(JsonCopy(DefaultEntityResource), this.getEntityResource(core.params.internal_name)),\n          route: DeepMerge(JsonCopy(DefaultEntityRoute), this.getEntityRoute(core.params.internal_name)),\n          menu: DeepMerge(JsonCopy(DefaultEntityMenu), this.getEntityMenu(core.params.internal_name))\n        };\n        core.repo.setRoutes(InterpolateEntityRoutes(core.repo.model.route, core.params));\n\n        await forkJoin([this._getEntityConfig(core, internal_name), core.repo.getPreferences(core)]).subscribe(() => {\n          this.asset.base.set(internal_name, core);\n          return resolve({...this.asset.base.get(internal_name)});\n        }, () => {\n          return resolve({...this.asset.base.get(internal_name)});\n        });\n      } else {\n        return resolve({...this.asset.base.get(internal_name)});\n      }\n    });\n  }\n\n\n  /**\n   * Get the an entity repo class for a specific entity\n   * This is intended to be run when a CoreConfig is requested for an entity, once created it will be stored and reused\n   *\n   * @param entityParams\n   * @param routes\n   */\n  private _getEntityRepo(entityParams: EntityParams): PopEntityRepoService {\n    let repo = null;\n    if (IsObject(entityParams, true)) {\n      if (this.asset.repo.has(entityParams.internal_name)) {\n        repo = this.asset.repo.get(entityParams.internal_name);\n      } else {\n\n        repo = new PopEntityRepoService();\n        repo.register(entityParams);\n        this.asset.repo.set(entityParams.internal_name, repo);\n      }\n    }\n\n    return repo;\n  }\n\n\n  /**\n   * Get the crud access that is associated to a specific entity\n   * This is intended to be run when a CoreConfig is requested for an entity, once created it will be stored and reused\n   * @param entityParams\n   */\n\n  private _getEntityAccess(entityParams: EntityParams): EntityAccessInterface {\n    let entityAccess = null;\n    if (IsObject(entityParams, true)) {\n      entityAccess = this.paramUtil.getAccess(entityParams.internal_name);\n      if (this.asset.access.has(entityParams.internal_name)) {\n        entityAccess = {...this.asset.access.get(entityParams.internal_name)};\n      } else {\n        entityAccess = this.paramUtil.getAccess(entityParams.internal_name);\n        if (entityAccess) {\n          this.asset.access.set(entityParams.internal_name, <EntityAccessInterface>{...entityAccess});\n        }\n      }\n    }\n\n    return entityAccess;\n  }\n\n\n  private _getEntityConfig(core: CoreConfig, internal_name: string): Promise<boolean> {\n    return new Promise((resolve) => {\n      core.repo.getConfig().subscribe((res: any) => {\n        // this.getJsonModel(internal_name).then((res: any) => {\n        let ApiModels = res.data ? res.data : res;\n        ApiModels = ApiModels.model ? ApiModels.model : ApiModels;\n        if (!IsObject(ApiModels)) {\n          ApiModels = {};\n        }\n        core.repo.model = {\n          ...core.repo.model,\n          ...ApiModels //  Gives the api the ability to send over data, stub for future features\n        };\n        return resolve(true);\n      }, () => {\n        return resolve(false);\n      });\n    });\n  }\n\n}\n\n\n","import { Injectable } from '@angular/core';\nimport { Resolve, RouterStateSnapshot, ActivatedRouteSnapshot, Router, NavigationEnd } from '@angular/router';\nimport { filter } from 'rxjs/operators';\nimport { GetSessionSiteVar, IsArray, SetSessionSiteVar } from '../pop-common-utility';\n\n\nexport interface RouteHistoryInterface {\n  name: string;\n  base: string;\n  path: string;\n}\n\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class PopRouteHistoryResolver implements Resolve<any> {\n  sessionVar = 'Navigation.history';\n\n\n  constructor(\n    private router: Router,\n  ){\n    // ToDo: Grab enitty map dynamically\n    router.events.pipe(filter(event => event instanceof NavigationEnd)).subscribe((event) => {\n      const path = window.location.pathname.split('/');\n      path.shift();\n      path.pop();\n      SetSessionSiteVar('App.name', path[ 0 ]);\n      SetSessionSiteVar('App.entity', path[ path.length - 1 ]);\n    });\n  }\n\n\n  resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): boolean{\n    const path = window.location.pathname.split('/');\n    path.shift();\n    path.pop();\n    SetSessionSiteVar('App.name', path[ 0 ]);\n    SetSessionSiteVar('App.entity', path[ path[ path.length - 1 ] ]);\n    this.saveNavigationHistory({ name: '', base: path[ 0 ], path: state.url });\n    return true;\n  }\n\n\n  saveNavigationHistory(history: RouteHistoryInterface){\n\n    let historyArray = GetSessionSiteVar(this.sessionVar);\n    if( !historyArray ) historyArray = [];\n\n    // Because a non-existing siteVar returns an object and we need it to be an array.\n    if( typeof historyArray[ 0 ] === 'undefined' ) historyArray = [];\n\n    // Make sure that we don't have two entries in a row of the same thing.\n    if( typeof historyArray[ 0 ] !== 'undefined' && historyArray[ 0 ].path == history.path ) return;\n\n    // Add the new entry and keep the multiple_max to 20 for now.\n    historyArray.unshift(history);\n    if( historyArray.length > 20 ) historyArray.splice(-1, 1);\n\n    SetSessionSiteVar(this.sessionVar, historyArray);\n  }\n\n\n  isPreviousHistory(){\n    const historyArray = GetSessionSiteVar(this.sessionVar);\n    return IsArray(historyArray, true);\n  }\n\n\n  goBack(count: number = 1){\n\n    if( count < 1 ) count = 1;\n\n    const historyArray = GetSessionSiteVar(this.sessionVar);\n    const path = window.location.pathname.split('/');\n\n    // If they came from outside of pop then don't send them back there but instead send them to apps main page.\n    if( typeof historyArray.length === 'undefined' || typeof historyArray[ 1 ] === 'undefined' ){\n      this.router.navigate([ '/' ]);\n      return;\n    }\n\n    // The where they should go back to and also purge that route from the array.\n    const goBackTo = ( historyArray[ count ] !== 'undefined' ? historyArray[ count ] : historyArray.slice(-1)[ 0 ] );\n    if( historyArray.length ) historyArray.shift();\n    SetSessionSiteVar(this.sessionVar, historyArray);\n\n    // If where they are going back to is in the same app then use the router otherwise do reload to sthat route.\n    if( goBackTo.base === path[ 1 ] ){\n      this.router.navigate([ goBackTo.path ]).catch(() => true);\n    }else{\n      window.location.href = window.location.origin + '/' + goBackTo.base + goBackTo.path;\n    }\n  }\n\n}\n","import { TabButtonInterface, TabConfig, TabMenuConfig, TabMenuInterface, } from './tab-menu.model';\nimport { ElementRef, Injectable, OnDestroy } from '@angular/core';\nimport { Subject, Subscription } from 'rxjs';\nimport { PopEntityService } from '../../entity/services/pop-entity.service';\nimport { ActivatedRoute, NavigationEnd, NavigationStart, Router } from '@angular/router';\nimport { MatDialog } from '@angular/material/dialog';\nimport { CoreConfig, Dictionary, Entity, OutletReset, PopLog, QueryParamsInterface, ServiceInjector, SetPopCacheRedirectUrl } from '../../../pop-common.model';\nimport { PopLogService } from '../../../services/pop-log.service';\nimport { ArrayMapSetter, GetSessionSiteVar, IsObject, IsString, PopUid, SetSessionSiteVar, StorageGetter, TitleCase } from '../../../pop-common-utility';\nimport { DetermineEntityName } from '../../entity/pop-entity-utility';\nimport { PopDomService } from '../../../services/pop-dom.service';\nimport { PopExtendService } from '../../../services/pop-extend.service';\n\n\n@Injectable( {\n  providedIn: 'root'\n} )\nexport class PopTabMenuService extends PopExtendService implements OnDestroy {\n  protected id = PopUid();\n  public name = 'PopTabMenuService';\n\n  protected asset = {\n    core: <CoreConfig>undefined,\n    config: <TabMenuConfig>undefined,\n    dom: <PopDomService>undefined,\n    id: <string | number>undefined,\n    map: <Dictionary<any>>{},\n    outlet: <ElementRef>undefined,\n    resetOutlet: <OutletReset>undefined,\n    route: <ActivatedRoute>undefined,\n    path: <string>undefined,\n    clearCache: false\n  };\n\n  protected srv: {\n    dialog: MatDialog,\n    entity: PopEntityService,\n    log: PopLogService,\n    router: Router,\n  } = {\n    dialog: ServiceInjector.get( MatDialog ),\n    entity: ServiceInjector.get( PopEntityService ),\n    log: ServiceInjector.get( PopLogService ),\n    router: ServiceInjector.get( Router ),\n  };\n\n  public ui = {\n    entityParams: <Dictionary<any>>undefined\n  };\n\n  change = new Subject(); // event emitter\n\n  constructor(){\n    super();\n    this._setDomExtensions();\n    this._initSession();\n  }\n\n\n  private _initSession(){\n    this.dom.session = {\n      scroll: {},\n      path: '',\n      fields: {},\n      ...this.dom.session\n    };\n  }\n\n\n  /**\n   * Add Buttons to the Tab Menu\n   * @param buttons Array<TabButtonInterface>)\n   * @returns void\n   */\n  addButtons( buttons: Array<TabButtonInterface> ): void{\n    if( buttons && buttons.length ){\n      this.asset.config.buttons.push( ...buttons );\n      this.asset.map.buttons = ArrayMapSetter( this.asset.config.buttons, 'id' );\n      this._emitChange( 'buttons' );\n    }\n  }\n\n\n  /**\n   * Add Tabs to the Tab Menu\n   * @param tabs Array<TabInterface>\n   * @returns void\n   */\n  addTabs( tabs: Array<TabConfig> ):\n    void{\n    if( tabs && tabs.length\n    ){\n      this.asset.config.tabs.push( ...tabs );\n      this.asset.map.tabs = ArrayMapSetter( this.asset.config.tabs, 'id' );\n    }\n    this._emitChange( 'tabs' );\n  }\n\n\n  /**\n   * This fx will cause this srv to remove the cache when it is destroyed\n   */\n  clearCache(): void{\n    this.asset.clearCache = true;\n  }\n\n\n  /**\n   * Remove all Buttons from the Tab Menu\n   * @param buttons Array<TabButtonInterface>)\n   * @returns void\n   */\n  clearButtons( buttons: Array<TabButtonInterface> ): void{\n    this.asset.config.buttons = [];\n    this.asset.map.buttons = ArrayMapSetter( this.asset.config.buttons, 'id' );\n    this._emitChange( 'buttons' );\n  }\n\n\n  /**\n   * Get latest path\n   */\n  getPathSession(){\n    return GetSessionSiteVar( `Entity.${TitleCase( this.asset.core.params.internal_name )}.Menu.path` );\n  }\n\n\n  /**\n   * Clear the tab system session\n   * Auto called on go back button click\n   * @param name\n   * @returns void\n   */\n  clearSession(): void{\n    if( this.asset.core && this.asset.core.params && this.asset.core.params.internal_name ){\n      SetSessionSiteVar( `Entity.${TitleCase( this.asset.core.params.internal_name )}.Menu`, null );\n    }\n  }\n\n\n  /**\n   * Get Misc Data for each tab\n   * @param path\n   * @returns object\n   */\n  getTab( id ?: string | number ): any{\n    if( !this.asset.id ) id = this.asset.path;\n    if( this.asset.map.tabs && id in this.asset.map.tabs ){\n      return Object.assign( {}, this.asset.config.tabs[ this.asset.map.tabs[ id ] ] );\n    }\n    return null;\n  }\n\n\n  /**\n   * Get the global metadata stored for the Tab Menu\n   * If key is passed, return that specific data else entire object\n   * @param key string\n   * @returns boolean\n   */\n  getCore(){\n    return this.asset.core;\n  }\n\n\n  /**\n   * Set the TabMenuConfig of the Tab Menu\n   * The Tab Menu Component auto calls this on creation\n   * @param config TabMenuConfig\n   * @returns void\n   */\n  registerConfig( core: CoreConfig, config: TabMenuConfig | TabMenuInterface, dom?: PopDomService ): TabMenuConfig{\n    if( config ){\n      this.asset.core = IsObject( core, true ) ? core : null;\n      this.ui.entityParams = IsObject( this.asset.core, [ 'params' ] ) ? this.asset.core.params : null;\n\n      this.asset.config = new TabMenuConfig( <TabMenuInterface>config );\n      // get the users access\n      this.asset.map.tabs = ArrayMapSetter( this.asset.config.tabs, 'path' );\n      this.asset.map.buttons = ArrayMapSetter( this.asset.config.buttons, 'id' );\n      if( this.asset.core && this.asset.core.params ) this.dom.session.scroll = GetSessionSiteVar( `Entity.${TitleCase( this.asset.core.params.internal_name )}.Menu.scroll` );\n      if( !this.dom.session.scroll ) this.dom.session.scroll = {};\n\n\n      // Subscribe to the CRUD events\n      this.asset.path = window.location.pathname.split( '/' ).pop();\n      // bind to router to detect entity change detection .. effective for cloning, navigation changes\n      this.dom.setSubscriber( 'route-change', this.srv.router.events.subscribe( ( e ) => this._navigationHandler( e ) ) );\n      this.dom.state.loaded = true;\n\n      this._resetMenu();\n      this._emitChange( 'config' );\n      if( this.srv.log.enabled( 'config', this.name ) ) console.log( this.srv.log.message( `${this.name}:registerConfig` ), this.srv.log.color( 'config' ), this.asset.config );\n      return this.asset.config;\n    }\n  }\n\n\n  /**\n   * Register an outlet to enable scroll session\n   * @param outlet ElementRef\n   * @returns void\n   */\n  registerOutlet( outlet: ElementRef ): void{\n    this.asset.outlet = outlet;\n    this._emitChange( 'outlet' );\n  }\n\n\n  /**\n   * Register a route to enable entity change detection and enforce the id on the route\n   * @param outlet ElementRef\n   * @returns void\n   */\n  registerRoute( route: ActivatedRoute ){\n    if( !this.asset.route ){\n      this.asset.route = route;\n      this._emitChange( 'route' );\n      if( +this.asset.route.snapshot.params.id ){\n        if( !this.asset.core.entity || +this.asset.core.entity.id !== +this.asset.route.snapshot.params.id ){\n          this.resetTab( true );\n          // this.refreshEntity( this.asset.route.snapshot.params.id, this.asset.dom, null, `${this.name}:registerRoute:conflict` ).then( () => this.resetTab()  );\n        }\n      }\n    }\n  }\n\n\n  /**\n   * Register a outletReset function that you want called when on crud operations\n   * @param outlet ElementRef\n   * @returns void\n   */\n  registerOutletReset( resetOutlet: OutletReset ){\n    this.asset.resetOutlet = resetOutlet;\n    this._emitChange( 'outlet-reset' );\n  }\n\n\n  /**\n   * This fx will refresh the entity that exist on the this.asset.core\n   * @param entityId\n   * @param dom\n   * @param queryParams\n   * @param caller\n   */\n  refreshEntity( entityId: number = null, dom: PopDomService, queryParams: QueryParamsInterface, caller: string ): Promise<boolean>{\n    return new Promise( ( resolve ) => {\n      if( this.asset.core ){\n        this.showAsLoading( false );\n        this.srv.log.warn( this.name, `refreshEntity:${caller}` );\n        if( !this.asset.config ){\n          this.showAsLoading( false );\n          return resolve( false );\n        }\n        this.dom.setTimeout( 'refresh', () => {\n          if( !entityId && this.asset.core.entity && +this.asset.core.entity.id ) entityId = +this.asset.core.entity.id;\n          if( +entityId ){\n            this.asset.core.params.entityId = entityId;\n            this.srv.entity.refreshCoreEntity( this.asset.core, dom, queryParams ).then( ( entity: Entity ) => {\n              this._resetMenu();\n              this.asset.core.params.refresh = false;\n              if( typeof this.asset.resetOutlet === 'function' ){\n                setTimeout( () => {\n                  this.asset.resetOutlet();\n                  this.showAsLoading( false );\n                  return resolve( true );\n                }, 0 );\n              }else{\n                return resolve( true );\n              }\n            } );\n          }else{\n            this.showAsLoading( false );\n            return resolve( false );\n          }\n        }, 0 );\n      }else{\n        this.showAsLoading( false );\n        return resolve( false );\n      }\n    } );\n  }\n\n\n  /**\n   * This fx will reset the current tab\n   * @param clearCache\n   */\n  resetTab( clearCache = false ){\n    if( clearCache ){\n      SetPopCacheRedirectUrl( this.srv.router );\n    }else{\n      this._resetMenu();\n      // this.asset.core.params.refresh = false;\n      if( typeof this.asset.resetOutlet === 'function' ) this.asset.resetOutlet();\n    }\n  }\n\n\n  /**\n   * This fx will reset a specific position of the current tab\n   * @param position\n   */\n  reloadTabPosition( position: number = null ){\n    if( typeof this.asset.resetOutlet === 'function' ) this.asset.resetOutlet( position );\n  }\n\n\n  /**\n   * This will set a flag the the tab will need to refresh\n   */\n  setTabRefresh(){\n    if( this.asset.core && this.asset.core.params ){\n      this.asset.core.params.refresh = true;\n    }\n  }\n\n\n  /**\n   * This fx will set the scroll position of the current tab if was was previously visited\n   */\n  setTabScrollPosition(){\n    if( this.asset.path && this.dom.session.scroll[ this.asset.path ] ){\n      this._setTabScrollPosition( this.dom.session.scroll[ this.asset.path ] );\n    }\n  }\n\n\n  /**\n   * This fx will trigger a loading indicator in the current tab\n   * @param value\n   */\n  showAsLoading( value: boolean ){\n    if( IsObject( this.asset.config, true ) ){\n      this.asset.config.loading = value ? true : false;\n    }\n  }\n\n\n  /**\n   * Store the current tab into session memory\n   * @param name\n   * @returns void\n   */\n  setPathSession( tab: TabConfig ): void{\n    if( this.asset.core && this.asset.core.params ) SetSessionSiteVar( `Entity.${TitleCase( this.asset.core.params.internal_name )}.Menu.path`, tab.path );\n  }\n\n\n  /**\n   * Add Tabs to the Tab Menu\n   * @param path string\n   * @returns void\n   */\n  removeTab( path: string ):\n    void{\n    if( path in this.asset.map.tabs\n    ){\n      this.asset.config.tabs.splice( this.asset.map.tabs[ path ], 1 );\n      this.asset.map.tabs = ArrayMapSetter( this.asset.config.tabs, 'id' );\n    }\n    this._emitChange( 'tabs' );\n  }\n\n\n  /**\n   * Toggle whether a Button is hidden\n   * If value is set to true(show), false(hide), else toggle\n   * @param buttons Array<TabButtonInterface>)\n   * @returns boolean\n   */\n  toggleButton( id: string, value ?: boolean ): boolean{\n    if( id in this.asset.map.buttons ){\n      if( typeof value !== 'undefined' ){\n        this.asset.config.buttons[ this.asset.map.buttons[ id ] ].hidden = value;\n      }else{\n        this.asset.config.buttons[ this.asset.map.buttons[ id ] ].hidden = !this.asset.config.buttons[ this.asset.map.buttons[ id ] ].hidden;\n      }\n      this._emitChange( 'buttons' );\n      return true;\n    }\n    return false;\n  }\n\n\n  /**\n   * This fx will update main header of the current Tab Menu\n   * @param name\n   */\n  updateName( name: string ): void{\n    if( IsString( name, true ) && this.asset && this.asset.config ){\n      this.asset.config.name = name;\n    }\n  }\n\n\n  ngOnDestroy(){\n    if( this.asset.clearCache ){\n      if( IsObject( this.asset.core ) ){\n        this.asset.core.repo.clearAllCache();\n      }\n    }\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  /**\n   * If you do not extend of an extension service these have to be set manually\n   */\n  private _setDomExtensions(){\n    this.dom = {\n      ...this.dom, ...{\n        setSubscriber: ( subscriptionKey: string, subscription: Subscription = null ) => {\n          if( subscriptionKey && this.dom.subscriber && subscriptionKey in this.dom.subscriber && this.dom.subscriber[ subscriptionKey ] && typeof this.dom.subscriber[ subscriptionKey ].unsubscribe === 'function' ){\n            this.dom.subscriber[ subscriptionKey ].unsubscribe();\n          }\n          if( subscription ){\n            this.dom.subscriber[ subscriptionKey ] = subscription;\n          }\n        },\n\n        setTimeout: ( timeoutKey: string, callback = null, delay = 250 ) => {\n          if( timeoutKey && this.dom.delay && timeoutKey in this.dom.delay && this.dom.delay[ timeoutKey ] ){\n            clearTimeout( this.dom.delay[ timeoutKey ] );\n          }\n          if( typeof callback === 'function' ){\n            this.dom.delay[ timeoutKey ] = setTimeout( callback, delay );\n          }\n        },\n      }\n    };\n  }\n\n\n  /**\n   * Return to last active tab\n   * @returns void\n   */\n  private _isPathSession(): boolean{\n    this.dom.session.path = this.getPathSession();\n    if( this.dom.session.path && this.dom.session.path !== this.asset.path && this.dom.session.path in this.asset.map.tabs ){\n      return false;\n    }\n    return true;\n  }\n\n\n  /**\n   * Store current tab scroll position\n   * @returns void\n   */\n  private _storeTabScrollPosition(): void{\n    if( this.asset.core && this.asset.core.params && this.asset.path ){\n      this.dom.session[ this.asset.path ] = this._getTabScrollPosition();\n      SetSessionSiteVar( `Entity.${TitleCase( this.asset.core.params.internal_name )}.Menu.scroll`, this.dom.session.scroll );\n    }\n  }\n\n\n  /**\n   * Set current tab scroll position\n   * @returns void\n   */\n  private _setTabScrollPosition( scrollTop: number ): void{\n    if( this.asset.outlet && this.asset.outlet.nativeElement ) this.asset.outlet.nativeElement.scrollTop = scrollTop;\n  }\n\n\n  /**\n   * Get the current tab scroll position\n   * @returns number\n   */\n  private _getTabScrollPosition(): number{\n    if( this.asset.outlet && this.asset.outlet.nativeElement ) return this.asset.outlet.nativeElement.scrollTop;\n    return 0;\n  }\n\n\n  /**\n   * Verify the id on the route matches the id of the configuration entity\n   * @returns number\n   */\n  private _checkId(){\n    if( this.asset.route && +this.asset.route.snapshot.params.id ){\n      if( !this.asset.config && this.srv.log.enabled( 'error', this.name ) ) console.log( this.srv.log.message( `${this.name}:_checkId:error - Could not find config` ), this.srv.log.color( 'error' ) );\n      if( this.srv.log.enabled( 'info', this.name ) ) console.log( this.srv.log.message( `${this.name}:_checkId route id(${this.asset.route.snapshot.params.id } matches config(${this.asset.core.entity.id}):refresh is ${+this.asset.route.snapshot.params.id !== +this.asset.core.entity.id}` ), this.srv.log.color( 'info' ) );\n      if( !this.asset.core.entity || +this.asset.route.snapshot.params.id !== +this.asset.core.entity.id ){\n        this.resetTab( true );\n      }\n    }\n  }\n\n\n  /**\n   * This fx will track the current scroll position of the current tab when navigating away, and session it\n   * @param event\n   * @private\n   */\n  private _navigationHandler( event ): void | Promise<boolean>{\n    // On a NavigationStart event record the current scroll position of the current tab\n    // On a NavigationEnd check to see if a scroll position for the current tab has been stored and apply it\n    if( event instanceof NavigationStart && this.asset.path ) this._storeTabScrollPosition();\n    if( event instanceof NavigationEnd ){\n\n      this.asset.path = String( event.url ).split( '/' ).pop();\n      if( this.asset.route && this._isPathSession() || !this.asset.route ){\n        this._checkId();\n        if( this.dom.session.scroll[ this.asset.path ] ){\n          setTimeout( () => {\n            this._setTabScrollPosition( this.dom.session.scroll[ this.asset.path ] );\n          }, 0 );\n        }\n      }else{\n        if( this.asset.route ) return this.srv.router.navigate( [ this.dom.session.path ], { relativeTo: this.asset.route } );\n      }\n    }\n  }\n\n\n  /**\n   * This fx will reseet the current menu options\n   * @private\n   */\n  private _resetMenu(){\n    if( this.asset.core && this.asset.config ){\n      if( this.asset.core.entity && this.asset.core.entity.id ) this.asset.config.name = DetermineEntityName( this.asset.core.entity );\n      if( Array.isArray( this.asset.config.buttons ) && this.asset.config.buttons.length && this.asset.core.entity ){\n        const archiveKey = <string>StorageGetter( this.asset.core, [ 'repo', 'model', 'menu', 'archiveKey' ], 'archived' );\n        const btnMap = ArrayMapSetter( this.asset.config.buttons, 'id' );\n        if( 'archive' in btnMap ) this.asset.config.buttons[ btnMap[ 'archive' ] ].hidden = this.asset.core.entity[ archiveKey ] ? true : false;\n        if( 'activate' in btnMap ) this.asset.config.buttons[ btnMap[ 'activate' ] ].hidden = this.asset.core.entity[ archiveKey ] ? false : true;\n        if( 'close' in btnMap ) this.asset.config.buttons[ btnMap[ 'close' ] ].hidden = this.asset.config.portal ? false : true;\n\n      }\n    }\n  }\n\n\n  /**\n   * Change detection Emitter\n   * @param type strings\n   * @returns void\n   */\n  _emitChange( name: string, data: any = '' ){\n    PopLog.info( this.name, name, data );\n    this.change.next( { source: this.name, type: 'tab-menu', name: name, data: data } );\n  }\n}\n","import {\n  Component,\n  OnInit,\n  Input,\n  ViewChild,\n  ElementRef,\n  OnDestroy\n} from '@angular/core';\nimport { TabMenuConfig, TabButtonInterface, TabConfig, TabMenuInterface } from './tab-menu.model';\nimport {\n  ActivatedRoute, Router,\n} from '@angular/router';\nimport { PopTabMenuService } from './pop-tab-menu.service';\nimport { PopExtendComponent } from '../../../pop-extend.component';\nimport { PopBaseEventInterface, PopTemplate, ServiceInjector } from '../../../pop-common.model';\nimport { PopDomService } from '../../../services/pop-dom.service';\nimport { PopRouteHistoryResolver } from '../../../services/pop-route-history.resolver';\nimport { IsObjectThrowError } from '../../../pop-common-utility';\n\n\n@Component({\n  selector: 'lib-pop-tab-menu',\n  templateUrl: './pop-tab-menu.component.html',\n  styleUrls: [ './pop-tab-menu.component.scss' ],\n})\n\nexport class PopTabMenuComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() config: TabMenuConfig;\n  @ViewChild('header', { static: true }) header: ElementRef;\n  @ViewChild('outlet', { static: true }) outletRef: ElementRef;\n\n  public name = 'PopTabMenuComponent';\n\n  protected srv: {\n    history: PopRouteHistoryResolver,\n    router: Router,\n    tab: PopTabMenuService\n  } = {\n    history: ServiceInjector.get(PopRouteHistoryResolver),\n    router: ServiceInjector.get(Router),\n    tab: <PopTabMenuService>undefined\n  };\n\n\n\n  constructor(\n    public el: ElementRef,\n    private route: ActivatedRoute,\n    protected _domRepo: PopDomService,\n    protected _tabRepo: PopTabMenuService,\n  ){\n    super();\n\n    /**\n     * Configure the component tailored to its specific needs\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        PopTemplate.turnOffFilter();\n        this.config = IsObjectThrowError(this.config, true, `${this.name}:configure: - this.config`) ? this.config : null;\n        if( this.config.goBack ) this.config.goBack = this.srv.history.isPreviousHistory();\n        this.dom.setHeight(window.innerHeight - 55, 10);\n        this.log.info(`Determined height:${this.dom.height.inner}`);\n        return resolve(true);\n      });\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        this._registerConfig().then(() => {\n          setTimeout(() => {\n            this.srv.tab.setTabScrollPosition();\n            this.srv.tab.registerOutlet(this.outletRef);\n          });\n          return resolve(true);\n        });\n      });\n    };\n  }\n\n\n  /**\n   * This component should have a purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * Go back in history\n   * @returns void\n   */\n  onBackButtonClick(): void{\n    this.srv.tab.clearSession();\n    this.srv.history.goBack();\n  }\n\n\n  /**\n   * Trigger a menu click event\n   * @returns void\n   */\n  onMenuButtonClick(button: TabButtonInterface): void{\n    this.log.info(`${this.name}:button`, button);\n    this.dom.setTimeout(`stop-loader`, null, 0)\n    this.config.loading = true;\n    const eventData: PopBaseEventInterface = {\n      source: this.name,\n      type: 'button',\n      id: button.id,\n      name: button.name,\n      metadata: ( button.metadata ? button.metadata : false )\n    };\n    this.onBubbleEvent(eventData);\n    this.dom.setTimeout(`stop-loader`, () => {\n      this.config.loading = false;\n    }, 3000);\n  }\n\n\n  /**\n   * Trigger a tab click event\n   * @returns void\n   */\n  onTabMenuClick(tab: TabConfig): void{\n    this.log.info(`onTabMenuClick`, tab);\n    this.srv.tab.setPathSession(tab);\n    const eventData: PopBaseEventInterface = {\n      source: this.name,\n      type: 'tab',\n      id: tab.id,\n      name: tab.name,\n      metadata: ( tab.metadata ? tab.metadata : false )\n    };\n    this.onBubbleEvent(eventData);\n  }\n\n\n  /**\n   * Event Emitter\n   * @returns void\n   */\n  onBubbleEvent(eventData: PopBaseEventInterface): void{\n    this.events.emit(eventData);\n  }\n\n\n  /**\n   * Clean up the dom of this component\n   *\n   * Clear out data stored for this Tab Menu out of the global service\n   */\n  ngOnDestroy(){\n    if( this.core && this.core.params && this.core.params.entityId ) this.core.repo.clearCache('entity', String(this.core.params.entityId), `PopTabMenuComponent:ngOnDestroy`);\n    // this.srv.tab.reset();\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n\n\n  private _registerConfig(): Promise<boolean>{\n    return new Promise((resolve) => {\n      this.config = IsObjectThrowError(this.config, true, `${this.name}:registerConfig: - this.config`) ? this.srv.tab.registerConfig(this.core, <TabMenuInterface>this.config, this.dom.repo) : <TabMenuConfig>{};\n      resolve(true);\n    });\n  }\n\n\n}\n","import { Dictionary, FieldCustomSettingInterface, FieldInterface, FieldItemPatchInterface, KeyMap } from '../../../pop-common.model';\nimport { TitleCase, ToArray } from '../../../pop-common-utility';\n\n\nexport interface EntitySchemeSectionInterface {\n  id?: number;\n  name: string | null;\n  asset_id: number; // the\n  asset_type: string; // the\n  asset?: any;\n  compact?: boolean | number;\n  scheme_id?: number | null;\n  container?: boolean;\n  field_id?: number;\n  flex?: number;\n  menu?: boolean; // show menu\n  expanded?: boolean;\n  label?: string | null;\n  modified?: boolean;\n  position: number;   // Any metadata desired.\n  primary?: boolean;\n  required?: boolean;\n  traits?: FieldCustomSettingInterface[];\n  sort_order: number;\n  children?: EntitySchemeSectionConfig[];\n  startIndex?: number;\n  mapping?: Dictionary<any>;\n}\n\n\nexport interface ProfileSchemeFieldInterface extends EntitySchemeSectionInterface {\n  asset: FieldInterface;\n}\n\n\nexport interface ProfileSchemeAssetPoolInterface {\n  name: string;\n  asset_type: string;\n  display: string;\n  data: KeyMap<any>;\n  list: any[];\n}\n\n\nexport class EntitySchemeSectionConfig {\n  id: number;\n  name: string | null;\n  asset_id: number; // the\n  asset_type: string; // the\n  asset?: any;\n  compact? = true;\n  flex?: number;\n  scheme_id: number | null;\n  field_id?: number;\n  container?: boolean;\n  label?: string | null;\n  menu?: boolean; // show menu\n  expanded?: boolean;\n  position: number;   // Any metadata desired.\n  primary?: boolean;\n  required?: boolean;\n  sort_order: number;\n  children?: EntitySchemeSectionConfig[];\n  mapping?: Dictionary<any> = {};\n  modified = false;\n\n\n  constructor( params?: EntitySchemeSectionInterface ){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n  }\n}\n\n\nexport interface FieldSettingInterface {\n  label: string;\n  name: string;   // the base entityId definitions\n  value: any;\n  params: any;\n  default: any;\n  options?: any;\n  patch?: FieldItemPatchInterface;\n  readonly: boolean;\n}\n","import { Entity, EntityParams, EventPromiseCallback, FieldItemInterface } from '../../../pop-common.model';\n\n\nexport interface FieldItemGroupDialogInterface {\n  submit: string;           // The value that the submit button should display.\n  title?: string;           // The display of the popup pop-table-dialog box.\n  cancel?: boolean;         // If the cancel button should be displayed. Default is true.\n  postUrlVersion?: number;  // The version the form post should use. Default to 1.\n  goToUrl?: string;         // If set, the url to load after successful form post. IE: Add User = users/:entityId\n  postUrl?: string;         // If set, the url to call the api with when creating an entity\n  callback?: EventPromiseCallback;\n}\n\n\nexport interface FieldItemGroupInterface {\n  id: string | number;\n  params: EntityParams;\n  fieldItems: Array<FieldItemInterface>;\n  position?: string;\n  metadata?: object;   // Any metadata desired.\n  http?: 'POST' | 'PATCH';\n  inDialog?: FieldItemGroupDialogInterface;\n  layout?: 'row' | 'column';\n  debug?: boolean;\n}\n\n\nexport class FieldItemGroupConfig {\n  id: string | number;\n  params: EntityParams;\n  fieldItems = <FieldItemInterface[]>[];\n  layout = 'column';\n  metadata;\n  inDialog = <FieldItemGroupDialogInterface>undefined;\n  fieldItemMap;\n  position = 1;\n  getField;\n  resetFields;\n  entity: Entity = null;\n  http = 'POST';\n  debug = false;\n\n\n  constructor( config?: FieldItemGroupInterface ){\n    for( const i in config ) this[ i ] = config[ i ];\n    if( !config.inDialog ) this.inDialog = null;\n    if( config.inDialog && config.inDialog.cancel !== false ) config.inDialog.cancel = true;\n  }\n}\n","import {\n  Component,\n  ComponentRef,\n  ElementRef,\n  Inject,\n  Input,\n  OnDestroy,\n  OnInit,\n  ViewChild,\n  ViewContainerRef\n} from '@angular/core';\nimport {slideInOut} from '../../../../pop-common-animations.model';\nimport {PopExtendDynamicComponent} from '../../../../pop-extend-dynamic.component';\nimport {PopDomService} from '../../../../services/pop-dom.service';\nimport {\n  CoreConfig, Dictionary,\n  DynamicComponentInterface, Entity, EntityActionDataInterface,\n  EntityActionInterface,\n  EntityExtendInterface,\n  FieldInterface, FieldItemInterface,\n  FieldItemPatchInterface, PopBaseEventInterface,\n  PopLog,\n  PopTemplate,\n  ServiceInjector\n} from '../../../../pop-common.model';\nimport {\n  ConvertArrayToOptionList,\n  DeepMerge, GetHttpErrorMsg,\n  GetHttpResult,\n  IsArray, IsCallableFunction,\n  IsDefined,\n  IsObject,\n  IsString,\n  JsonCopy, Sleep, SnakeToPascal, StorageGetter, TitleCase,\n} from '../../../../pop-common-utility';\nimport {\n  EvaluateWhenCondition,\n  EvaluateWhenConditions,\n  FieldItemModel,\n  IsValidFieldPatchEvent,\n  ParseLinkUrl,\n  ParseModelValue\n} from '../../../entity/pop-entity-utility';\nimport {Router} from '@angular/router';\nimport {PopEntityUtilFieldService} from '../../../entity/services/pop-entity-util-field.service';\nimport {CdkPortalOutlet, ComponentPortal, ComponentType} from '@angular/cdk/portal';\nimport {MAT_DIALOG_DATA, MatDialog, MatDialogRef} from '@angular/material/dialog';\nimport {PopRequestService} from '../../../../services/pop-request.service';\nimport {FormGroup} from '@angular/forms';\nimport {PopEntityEventService} from '../../../entity/services/pop-entity-event.service';\nimport {PopSelectComponent} from \"../../pop-field-item/pop-select/pop-select.component\";\n\n\n@Component({\n  selector: 'lib-pop-action-dialog',\n  templateUrl: './pop-action-dialog.component.html',\n  styleUrls: ['./pop-action-dialog.component.scss'],\n  animations: [\n    slideInOut\n  ]\n})\nexport class PopActionDialogComponent extends PopExtendDynamicComponent implements OnInit, OnDestroy {\n  @ViewChild('container', {read: ViewContainerRef, static: true}) private container;\n  @ViewChild(CdkPortalOutlet, {static: true}) portal: CdkPortalOutlet;\n  @Input() action: EntityActionInterface;\n  @Input() actionName: string;\n  @Input() extension: EntityExtendInterface;\n\n  name = 'PopActionDialogComponent';\n\n  protected srv = {\n    dialog: <MatDialog>ServiceInjector.get(MatDialog),\n    events: <PopEntityEventService>ServiceInjector.get(PopEntityEventService),\n    field: <PopEntityUtilFieldService>ServiceInjector.get(PopEntityUtilFieldService),\n    request: <PopRequestService>ServiceInjector.get(PopRequestService),\n    router: <Router>ServiceInjector.get(Router),\n  };\n\n  protected asset = {\n    componentType: <ComponentType<any>>undefined,\n    entity: <Entity>{},\n    facadeDuration: 250,\n    fieldItems: <FieldItemInterface[]>[],\n    fieldItemMap: undefined,\n    submitText: 'Submit',\n    visible: 0,\n    http: <'PATCH' | 'POST' | 'DELETE' | 'GET'>'POST',\n    postUrl: <string>null,\n    goToUrl: <string>null,\n  };\n\n  public ui = {\n    form: new FormGroup({}),\n    submitText: 'Submit',\n    header: 'New'\n  };\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService,\n    public dialog: MatDialogRef<PopActionDialogComponent>,\n    @Inject(MAT_DIALOG_DATA) public data: EntityActionDataInterface,\n  ) {\n    super();\n\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise(async (resolve) => {\n\n        await this._setInitialConfig();\n        await this._setAction();\n        await this._setFieldItems();\n        await this._setAdditionalConfig();\n        await this._buildFormGroup();\n\n        return resolve(true);\n      });\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        this._renderFieldItems();\n        this._renderComponent();\n\n        const hasChild = this.asset.fieldItems.find((fieldItem: FieldItemInterface) => StorageGetter(fieldItem, ['model', 'options', 'child'], null));\n        this._resetComponentListHidden();\n        if (hasChild) {\n          this._triggerParentChildUpdates(hasChild.model.name);\n        } else {\n          this._triggerFormValidation();\n        }\n\n        return resolve(true);\n      });\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit() {\n    super.ngOnInit();\n  }\n\n\n  /**\n   * Intercept the enter press to check if the form can be submitted\n   * @param event\n   */\n  onEnterPress(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    if (this.dom.state.validated) {\n      this.dom.setTimeout(`submit-form`, () => {\n        return this.onFormSubmit();\n      }, 250);\n    }\n  }\n\n\n  /**\n   * The user can click a cancel btn to close the action dialog\n   */\n  onFormCancel() {\n    this.dom.state.loaded = false;\n    this.dom.state.loading = true;\n    this.dom.setTimeout(`close-modal`, () => {\n      this.dialog.close(-1);\n    }, 250);\n  }\n\n\n  /**\n   * The user will press enter or click a submit btn to submit the form\n   */\n  onFormSubmit() {\n    return new Promise<boolean>(async (resolve) => {\n      if (this.dom.state.validated && !this.dom.state.pending) {\n        this._onSubmissionStart();\n        const params = this.ui.form.value; // get form value before disabling form\n\n        // this.dom.asset.form_group.disable(); //bad idea disabled through css\n\n        if (!this.action.facade) {\n          const method = `do${TitleCase(this.asset.http)}`;\n          const request = this.srv.request[method](this.asset.postUrl, params, 1, false);\n          request.subscribe(async (result: any) => {\n              result = GetHttpResult(result);\n              const goToUrl = this.asset.goToUrl;\n              this.asset.entity = result;\n              await this._onSubmissionSuccess();\n              this.dialog.close(this.asset.entity);\n              if (IsString(goToUrl, true)) {\n                const newGoToUrl = ParseLinkUrl(String(goToUrl).slice(), this.asset.entity);\n                this.log.info(`onFormSubmit:goToUrl`, newGoToUrl);\n                this.log.info(`onFormSubmit:entity`, this.asset.entity);\n                this.srv.router.navigate([newGoToUrl]).catch((e) => {\n                  console.log(e);\n                });\n              }\n              return resolve(true);\n            },\n            err => {\n              this._onSubmissionFail();\n              this._setErrorMessage(GetHttpErrorMsg(err));\n              return resolve(false);\n            }\n          );\n        } else {\n          await Sleep(this.asset.facadeDuration);\n          await this._onSubmissionSuccess();\n          let response = IsObject(params) ? params : {};\n          if (this.action.responseType === 'boolean') {\n            response = true;\n          } else if (this.action.responseType === 'store') {\n            response = IsObject(this.action.store) ? this.action.store : {};\n          }\n          this.dialog.close(response);\n\n          return resolve(true);\n        }\n      }\n    });\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy() {\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Protected Method )                                      *\n   *               These are protected instead of private so that they can be overridden          *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  /**\n   * This fx will perform the intial config of this component\n   * @private\n   */\n  protected _setInitialConfig(): Promise<boolean> {\n    return new Promise<boolean>((resolve) => {\n      if (!this.dom.state.loaded) {\n        this.template.attach('container'); // container references the @viewChild('container')\n\n        if (IsObject(this.data.core, true)) this.core = this.data.core;\n        if (IsObject(this.data.action, true)) this.action = this.data.action;\n        if (IsString(this.data.actionName, true)) this.actionName = this.data.actionName;\n        if (IsObject(this.data.extension, true)) this.extension = this.data.extension;\n        if (!IsObject(this.extension, true)) this.extension = {};\n        // actionFieldItems.sort( DynamicSort( 'sort' ) );\n\n        if (!(IsString(this.ui.submitText, true))) this.ui.submitText = 'Submit';\n        this.dom.state.validated = false;\n        this.dom.state.template = 'collection';\n        delete this.data;\n\n        this.dom.handler.bubble = async (core: CoreConfig, event: PopBaseEventInterface) => {\n          this.log.event(`bubble:handler`, event);\n          if (this.action.responseType === 'store') this._handleStoreEvent(event);\n          if (IsCallableFunction(this.action.onEvent)) await this.action.onEvent(core, <PopBaseEventInterface>{\n            ...event, ...{\n              entity: this.asset.entity,\n              form: this.ui.form,\n              metadata: {\n                fieldItems: this.asset.fieldItems\n              }\n            }\n          });\n          // Todo:: Are we seeing this event here, on single input forms submit button is not be activated\n          if (event.name === 'onKeyUp' || event.name === 'onInvalidChange') {\n            this.dom.state.validated = false;\n            this.dom.setTimeout(`trigger-validation`, () => {\n              this._triggerFormValidation();\n            }, 250);\n\n          } else if (IsValidFieldPatchEvent(this.core, event)) {\n\n            if (event.config.name in this.asset.entity) {\n              const newValue = isNaN(event.config.control.value) ? event.config.control.value : +event.config.control.value;\n              this.asset.entity[event.config.name] = newValue;\n              if (this.asset.fieldItems.length > 1) {\n                this._resetComponentListHidden();\n                this.dom.setTimeout(`update-relations`, () => {\n                  this._triggerParentChildUpdates(event.config.name);\n                }, 0);\n              } else {\n                this._triggerFormValidation();\n              }\n            }\n          }\n\n\n          // if( event.config.bubble || [ 'patch' ].includes( event.name ) ){\n          this.events.emit(event);\n          // }\n        };\n      }\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * This fx will perform additional config of this component that has initial config dependencies\n   * @private\n   */\n  protected _setAdditionalConfig(): Promise<boolean> {\n    return new Promise<boolean>((resolve) => {\n      let goToUrl = IsString(this.extension.goToUrl, true) ? this.extension.goToUrl : (this.action.goToUrl ? this.action.goToUrl : null);\n      if (goToUrl) goToUrl = ParseModelValue(goToUrl, this.core, true);\n\n      const storage = IsObject(this.core.entity, ['id', 'name']) && !this.action.blockEntity ? this.core.entity : (IsObject(this.asset.entity, true) ? this.asset.entity : {});\n      let postUrl = IsString(this.extension.postUrl, true) ? this.extension.postUrl : (this.action.postUrl ? ParseLinkUrl(String(this.action.postUrl).slice(), storage) : this.core.params.path);\n      if (postUrl) postUrl = ParseModelValue(postUrl, this.core, true);\n\n      if (+this.action.facadeDuration) this.asset.facadeDuration = this.action.facadeDuration;\n      if (+this.action.facadeDuration > 2000) {\n        this.action.facadeDuration = 2000;\n      }\n      this.asset.goToUrl = goToUrl;\n      this.asset.postUrl = postUrl;\n\n      this.ui.submitText = IsString(this.action.submitText, true) ? this.action.submitText : 'Submit';\n      this.asset.submitText = this.action.submitText;\n\n      if (IsString(this.action.http)) this.asset.http = this.action.http;\n\n      this.ui.header = IsString(this.action.header, true) ? this.action.header : `${TitleCase(this.action.name)} ${SnakeToPascal(this.core.repo.getDisplayName())}`;\n\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * This fx will trigger the form validation\n   * @private\n   */\n  protected _buildFormGroup() {\n    return new Promise<boolean>((resolve) => {\n      if (IsArray(this.asset.fieldItems, true)) {\n        this.asset.fieldItems.map((field: FieldItemInterface) => {\n          if (field.config && field.config.control) {\n            this.ui.form.addControl(field.config.name, field.config.control);\n            this.asset.visible++;\n          }\n        });\n      }\n\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * This fx will take any patch event that occurs and store the key value pair\n   * @param event\n   * @private\n   */\n  protected _handleStoreEvent(event: PopBaseEventInterface) {\n    this.log.event(`_handleStoreEvent`, event);\n    if (IsValidFieldPatchEvent(this.core, event)) {\n      if (!(IsObject(this.action.store))) this.action.store = <Dictionary<any>>{};\n      this.action.store[event.config.name] = event.config.control.value;\n    }\n    this.log.info(`_handleStoreEvent: store`, this.action.store);\n  }\n\n\n  /**\n   * This fx will trigger the form validation\n   * @private\n   */\n  protected _triggerFormValidation() {\n    this.dom.setTimeout(`trigger-form-validation`, () => {\n      this._validateForm().then((valid: boolean) => {\n        this.dom.state.validated = valid;\n      });\n    }, 50);\n  }\n\n\n  /**\n   * The form needs to able to make api calls to verify info for certain fields\n   * ToDo:: Allow the config to be able to pass in api validation calls for certain fields\n   * @private\n   */\n  protected _validateForm(): Promise<boolean> {\n    return new Promise<boolean>((resolve) => {\n      this.dom.state.validated = false;\n      this.dom.setTimeout(`trigger-form-validation`, null);\n      this.dom.setTimeout(`validate-form`, () => {\n        this.ui.form.updateValueAndValidity();\n        setTimeout(() => {\n          this.dom.state.validated = true; // mock stub for now\n          return resolve(this.ui.form.valid);\n        }, 0);\n      }, 0);\n    });\n  }\n\n\n  /**\n   * This fx will handle the error messaging\n   * @param message\n   * @private\n   */\n  protected _setErrorMessage(message: string) {\n    this.dom.error.message = message;\n    // this.dom.setTimeout('message', () => {\n    //   this.dom.error.message = '';\n    //   this.dom.setTimeout('message', null, 0);\n    // }, 3000);\n  }\n\n\n  /**\n   * This hook is called when the form is submitting\n   * @private\n   */\n  protected _onSubmissionStart() {\n    this.dom.setTimeout('message', null, 0);\n    this.dom.error.message = '';\n    this.dom.state.pending = true;\n    this.ui.submitText = '';\n  }\n\n\n  /**\n   * This hook is called when the form submission has failed\n   * @private\n   */\n  protected _onSubmissionFail() {\n    // Re-Enable Form and show error\n    this.dom.state.pending = false;\n    this.dom.state.template = 'fail';\n    this.ui.submitText = IsString(this.action.submitText, true) ? this.action.submitText : 'Submit';\n  }\n\n\n  /**\n   * This hook is called when the form has submitted successfully\n   * @private\n   */\n  protected _onSubmissionSuccess() {\n    return new Promise<boolean>(async (resolve) => {\n      this.dom.state.template = 'success';\n      this.dom.state.pending = false;\n      this.core.repo.clearAllCache(this.name);\n      if (IsCallableFunction(this.action.callback)) {\n        this.dom.setTimeout(`action-callback`, async () => {\n          const actionEvent = <PopBaseEventInterface>{\n            type: 'entity',\n            source: this.name,\n            name: this.action.name,\n            entity: this.asset.entity,\n            action: this.action,\n            data: this.ui.form.value\n          };\n          await this.action.callback(this.core, actionEvent, this.dom);\n        }, 0);\n      }\n\n      const crudEvent = <PopBaseEventInterface>{\n        source: this.name,\n        method: 'create',\n        type: 'entity',\n        name: this.core.params.name,\n        internal_name: this.core.params.internal_name,\n        data: this.asset.entity\n      };\n\n      this.srv.events.sendEvent(crudEvent);\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * This fx will render all of the fields that were passed through in the action config\n   * @private\n   */\n  protected _renderFieldItems() {\n    const componentList = <DynamicComponentInterface[]>[];\n    this.asset.fieldItems.map((fieldItem, index) => {\n      if (fieldItem && IsObject(fieldItem.model, ['name']) && fieldItem.config && fieldItem.component) {\n        const existingValue = 'control' in fieldItem.config ? fieldItem.config.control.value : null;\n\n        this.asset.entity[fieldItem.model.name] = existingValue;\n        if (this.action.bubbleAll) fieldItem.config.bubble = true;\n        const component = <DynamicComponentInterface>{\n          type: fieldItem.component,\n          inputs: {\n            config: fieldItem.config,\n            position: fieldItem.config['metadata'].position ? fieldItem.config['metadata'].position : 1,\n            hidden: IsArray(fieldItem.model.when, true) ? !(EvaluateWhenCondition(this.core, fieldItem.model.when, this.core)) : false,\n            when: IsArray(fieldItem.model.when, true) ? fieldItem.model.when : null\n          }\n        };\n        componentList.push(component);\n      }\n    });\n\n    this.template.render(componentList, [], true);\n  }\n\n\n  /**\n   * This fx will render the a component that was passed in through the action config\n   * @private\n   */\n  protected _renderComponent() {\n    if (IsObject(this.action.component, ['type']) && this.portal) {\n      if (this.portal.attachedRef) this.portal.detach();\n      this.dom.setSubscriber('portal-events', null);\n      const componentRef = this.portal.attach(new ComponentPortal(this.action.component.type));\n      componentRef.instance['core'] = this.core;\n      if (IsObject(this.action.component, ['inputs'])) {\n        Object.keys(this.action.component.inputs).map((key: string) => {\n          componentRef.instance[key] = this.action.component.inputs[key];\n        });\n      }\n      componentRef.changeDetectorRef.detectChanges();\n\n      if (componentRef.instance['events']) {\n        this.dom.setSubscriber('portal-events', componentRef.instance['events'].subscribe(async (event: PopBaseEventInterface) => {\n          if (this.action.responseType === 'store') {\n            this._handleStoreEvent(event);\n          }\n          if (IsCallableFunction(this.action.onEvent)) await this.action.onEvent(this.core, <PopBaseEventInterface>{\n            ...event, ...{\n              entity: this.asset.entity,\n              form: this.ui.form,\n              metadata: {\n                fieldItems: this.asset.fieldItems\n              }\n            }\n          });\n        }));\n      }\n    }\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  /**\n   * This fx will resolve the config of action that pop is suppose to perform\n   * @private\n   */\n  private _setAction(): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      if (IsObject(this.action, true)) {\n        if (!(IsDefined(this.action.responseType))) this.action.responseType = 'form';\n        this.dom.state.hasComponent = IsObject(this.action.component, ['type']);\n        this.dom.state.hasFields = IsObject(this.action.fields, true);\n\n        return resolve(true);\n      } else if (IsString(this.actionName) && IsObject(this.core.repo.model.action, [this.actionName]) && IsObject(this.core.repo.model.action[this.actionName], true)) {\n        this.action = this.core.repo.model.action[this.actionName];\n        if (!(IsDefined(this.action.responseType))) this.action.responseType = 'form';\n        this.dom.state.hasComponent = IsObject(this.action.component, ['type']);\n\n        this.dom.state.hasFields = IsObject(this.action.fields, true);\n        return resolve(true);\n      } else {\n        this.dom.state.hasComponent = false;\n        this.dom.state.hasFields = false;\n\n        return resolve(false);\n      }\n    });\n  }\n\n\n  /**\n   * A helper method that sets build the field item definitions\n   * @param entityConfig\n   * @param goToUrl\n   */\n  private _setFieldItems(): Promise<boolean> {\n\n    return new Promise<boolean>(async (resolve) => {\n      if (IsObject(this.action, ['fields']) && IsObject(this.action.fields, true)) {\n\n        const actionFieldItems = {};\n        this.asset.fieldItems = [];\n        this.asset.fieldItemMap = {};\n        let needsResource = false;\n\n        Object.keys(this.action.fields).map((name) => {\n          let field = <FieldInterface>{};\n          if (!this.action.blockEntity && name in this.core.repo.model.field) {\n            field = <any>this.core.repo.model.field[name];\n          }\n          let model = <any>{};\n\n          if (field.when) model.when = JsonCopy(field.when);\n\n          if (IsObject(field.model, true)) {\n            model = {...model, ...field.model};\n          }\n          let actionTransformation;\n          if (IsObject(this.action.fields[name], true)) {\n            actionTransformation = IsString(this.action.fields[name].transformation, true) ? this.action.fields[name].transformation : null;\n            model = {...model, ...this.action.fields[name]};\n          }\n          // delete model.metadata;\n          delete model.transformation;\n          if (actionTransformation) model.transformation = actionTransformation; // only want to apply transformation if it was set directly on action\n\n          model.value = IsDefined(model.value) ? ParseModelValue(model.value, this.core) : null;\n          // model.value = IsDefined( model.value ) ? ParseModelValue(model.value, core) : null;\n          if (!model.value && IsObject(model.options, ['defaultValue'])) {\n            model.value = ParseModelValue(model.options.defaultValue, this.core);\n          }\n          model.hidden = !EvaluateWhenConditions(this.core, model.when, this.core);\n\n          if (IsObject(this.extension, true) && model.name in this.extension) {\n            model.value = ParseModelValue(this.extension[model.name]);\n            model.readonly = true;\n            this.asset.entity[model.name] = model.value;\n          }\n\n          model.tabOnEnter = true;\n          actionFieldItems[name] = model;\n          if (model.options && model.options.resource) {\n            needsResource = true;\n          }\n        });\n\n\n        // if needsMetadata go grab it before you try to build out the fields\n        if (needsResource) {\n          const resource = await this.core.repo.getUiResource(this.core);\n          if (IsObject(resource, true)) DeepMerge(this.core.resource, resource);\n          PopLog.init(this.name, `doAction:needed resource`, resource);\n          Object.keys(actionFieldItems).map((name) => {\n            const fieldItem = actionFieldItems[name];\n            const actionItemModel = FieldItemModel(this.core, JsonCopy(fieldItem), false);\n            const actionItem = this.srv.field.buildCoreFieldItem(this.core, actionItemModel);\n            if (IsObject(actionItem.config, true)) {\n              actionItem.config.facade = true;\n              if (IsObject(actionItem.config.patch)) {\n                const patch = <FieldItemPatchInterface>actionItem.config.patch;\n                patch.duration = 0;\n                patch.path = null;\n                patch.displayIndicator = false;\n              }\n            }\n            this.asset.fieldItemMap[name] = this.asset.fieldItems.length;\n            this.asset.fieldItems.push(actionItem);\n          });\n\n        } else {\n          // no metadata was needed for any of these fields\n          Object.keys(actionFieldItems).map((name) => {\n            const actionItemModel = FieldItemModel(this.core, actionFieldItems[name], false);\n            const actionItem = this.srv.field.buildCoreFieldItem(this.core, actionItemModel);\n            if (IsObject(actionItem.config, true)) {\n              actionItem.config.facade = true;\n              if (IsObject(actionItem.config.patch)) {\n                const patch = <FieldItemPatchInterface>actionItem.config.patch;\n                patch.duration = 0;\n                patch.path = null;\n                patch.displayIndicator = false;\n              }\n            }\n            this.asset.fieldItemMap[name] = this.asset.fieldItems.length;\n            this.asset.fieldItems.push(actionItem);\n          });\n          PopTemplate.clear();\n        }\n        // console.log('this.asset.fieldItems', this.asset.fieldItems);\n        this.asset.fieldItems.map((fieldItem) => {\n          if (IsArray(StorageGetter(fieldItem, ['config', 'options', 'values']), true)) {\n            // console.log('here', fieldItem);\n            (<any>fieldItem).config.height = 180;\n          }\n\n        });\n        return resolve(true);\n\n      } else {\n\n        return resolve(false);\n      }\n    });\n  }\n\n\n  /**\n   * Determine if field should be auto filled with the first item in the list\n   * @param name\n   */\n  private _fieldHasAutoFill(name: string) {\n    if (name in this.asset.fieldItemMap && this.asset.fieldItems[this.asset.fieldItemMap[name]].model && this.asset.fieldItems[this.asset.fieldItemMap[name]].model.options) {\n      if (this.asset.fieldItems[this.asset.fieldItemMap[name]].model.autoFill) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n\n  /**\n   * Determine if field has a child relation in the list\n   * @param name\n   */\n  private _fieldHasChild(name: string) {\n    if (name in this.asset.fieldItemMap && this.asset.fieldItems[this.asset.fieldItemMap[name]].model && this.asset.fieldItems[this.asset.fieldItemMap[name]].model.options) {\n      if (this.asset.fieldItems[this.asset.fieldItemMap[name]].model.options.child) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n\n  /**\n   * Get a linear list of the parent child relations from a given point\n   * @param self the name to start from (usually the field that has just been changed by user)\n   * @param list\n   */\n  private _getRelationList(name: string, list: any[] = []) { // recursive loop\n    let item;\n    if (name && name in this.asset.fieldItemMap) {\n      item = this.asset.fieldItems[this.asset.fieldItemMap[name]];\n      if (IsObject(item, ['config', 'model'])) {\n        list.push({\n          name: item.config.name,\n          autoFill: this._fieldHasAutoFill(name),\n        });\n        if (this._fieldHasChild(name)) {\n          this._getRelationList(this.asset.fieldItems[this.asset.fieldItemMap[name]].model.options.child, list);\n        }\n      }\n\n    }\n    return list;\n  }\n\n\n  /**\n   * Whenever a update to the entity happens the fields in the group should be re-evaluated if there are when conditionals set\n   * @private\n   */\n  private _resetComponentListHidden() {\n    let name;\n    this.template.refs.filter((componentRef: ComponentRef<any>) => {\n      return IsObject(componentRef.instance.config, true) && IsArray(componentRef.instance.when, true);\n    }).map((componentRef: ComponentRef<any>) => {\n      name = componentRef.instance.config.name;\n      if (name && name in this.asset.fieldItemMap) {\n        componentRef.instance.hidden = !EvaluateWhenCondition(this.asset, componentRef.instance.when);\n      }\n    });\n  }\n\n\n  /**\n   * This fx will manage if the form fields have parent child relations, ie if an account select needs to be filtered by a client select that exists in the form\n   * @param name\n   * @private\n   */\n  private _triggerParentChildUpdates(name: string) {\n    if (this._fieldHasChild(name)) {\n      let values;\n      let child_fk;\n      let childField;\n      let autoFill = false;\n      let set;\n      let resource;\n      const relations = this._getRelationList(name);\n      relations.some((relation) => {\n        if (relation.autoFill) {\n          autoFill = true;\n          return true;\n        }\n      });\n\n\n      if (name && name in this.asset.fieldItemMap) {\n        child_fk = this.asset.fieldItems[this.asset.fieldItemMap[name]].model.options.child;\n        if (child_fk && child_fk in this.asset.fieldItemMap) {\n          childField = this.asset.fieldItems[this.asset.fieldItemMap[child_fk]];\n          if (childField.model.form === 'select') {\n            if (childField.model.options.resource) {\n              if (IsObject(this.core.resource[childField.model.options.resource], ['data_values'])) {\n                resource = this.core.resource[childField.model.options.resource].data_values;\n              }\n            }\n            if (IsArray(resource, true)) {\n              values = ConvertArrayToOptionList(resource, {\n                // ensure that an option shows up in list in case other conditions remove it, aka it has been archived\n                prevent: [], // a list of ids that should not appear in the list for whatever reason\n                // parent means this options should all have a common field trait like client_fk, account_fk ....\n                parent: childField.model.options.parent ? {\n                  field: childField.model.options.parent,\n                  value: this.asset.entity[childField.model.options.parent]\n                } : null,\n                empty: childField.model.options.empty ? childField.model.options.empty : null,\n              });\n            } else {\n              values = [];\n            }\n\n            if (autoFill && values.length) {\n              set = values[values.length - 1].value;\n            } else {\n              set = null;\n            }\n            childField.config.options.values = values;\n            autoFill = autoFill && values.length ? values[0].value : null;\n            if (typeof childField.config.triggerOnChange === 'function') childField.config.triggerOnChange(set);\n\n            this.dom.setTimeout(`clear-message-${child_fk}`, () => {\n              if (typeof childField.config.clearMessage === 'function') {\n                childField.config.clearMessage();\n              }\n            }, 0);\n\n          }\n        }\n      }\n    }\n    this._triggerFormValidation();\n  }\n\n}\n","import { Injectable, OnDestroy } from '@angular/core';\nimport {\n  CoreConfig, Entity, EntityActionDataInterface, EntityActionInterface, EntityExtendInterface,\n  FieldInterface,\n  FieldItemPatchInterface, PopLog,\n  PopTemplate, ServiceInjector,\n} from '../../../pop-common.model';\nimport { EvaluateWhenConditions, FieldItemModel, ParseLinkUrl, ParseModelValue } from '../pop-entity-utility';\nimport { FieldItemGroupConfig, FieldItemGroupDialogInterface } from '../../base/pop-field-item-group/pop-field-item-group.model';\nimport {\n  DeepMerge,\n  DynamicSort,\n  GetHttpResult,\n  IsCallableFunction,\n  IsDefined,\n  IsNumber,\n  IsObject,\n  IsString,\n  JsonCopy,\n  SnakeToPascal,\n  TitleCase\n} from '../../../pop-common-utility';\nimport { PopEntityUtilFieldService } from './pop-entity-util-field.service';\nimport { PopExtendService } from '../../../services/pop-extend.service';\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\nimport { PopActionDialogComponent } from '../../base/pop-dialogs/pop-action-dialog/pop-action-dialog.component';\n\n\n@Injectable( {\n  providedIn: 'root'\n} )\nexport class PopEntityActionService extends PopExtendService implements OnDestroy {\n  name = 'PopEntityActionService';\n\n\n  protected srv = {\n    dialog: <MatDialog>ServiceInjector.get( MatDialog ),\n    field: <PopEntityUtilFieldService>ServiceInjector.get( PopEntityUtilFieldService )\n  };\n\n  protected asset = {\n    dialogRef: <MatDialogRef<PopActionDialogComponent>>undefined,\n    field: <PopEntityUtilFieldService>ServiceInjector.get( PopEntityUtilFieldService )\n  };\n\n\n  constructor(){\n    super();\n  }\n\n\n  do( core: CoreConfig, action: string | EntityActionInterface, extension?: EntityExtendInterface, blockEntity = false ): Promise<Entity>{\n    return new Promise<Entity>( async( resolve ) => {\n      if( !this.asset.dialogRef && this._checkArgs( core, action ) ){\n        this.asset.dialogRef = this.srv.dialog.open( PopActionDialogComponent, {\n          disableClose: true,\n          width: extension && extension.width ? ( IsNumber( extension.width ) ? `${extension.width}px` : `${extension.width}` ) : '400px',\n          data: <EntityActionDataInterface>{\n            core: core,\n            extension: extension,\n            actionName: IsString( action, true ) ? action : null,\n            action: IsObject( action, true ) ? action : null,\n          },\n          panelClass: 'sw-mat-dialog-flex'\n        } );\n\n        this.dom.setSubscriber( 'pop-action-dialog-close', this.asset.dialogRef.beforeClosed().subscribe( ( res: any ) => {\n          res = GetHttpResult( res );\n          this.asset.dialogRef = null;\n          return resolve( res );\n        } ) );\n      }else{\n        return resolve( null );\n      }\n    } );\n\n  }\n\n\n  private _checkArgs( core: CoreConfig, action: string | EntityActionInterface, extension?: EntityExtendInterface ){\n    if( IsObject( core, [ 'params', 'access' ] ) ){\n      if( IsString( action, true ) || IsObject( action, [ 'name' ] ) ){\n        return true;\n      }\n    }\n    return false;\n  }\n\n\n  /**\n   * A helper method that sets up a FieldGroupConfig for a create/new pop-table-dialog\n   * @param entityConfig\n   * @param goToUrl\n   */\n  doAction( core: CoreConfig, actionName: string, extension?: EntityExtendInterface ): Promise<FieldItemGroupConfig>{\n    return new Promise( async( resolve ) => {\n      PopTemplate.buffer();\n      if( IsObject( core.repo.model.action, [ actionName ] ) && IsObject( core.repo.model.action[ actionName ], true ) ){\n\n        const action = core.repo.model.action[ actionName ];\n        PopLog.info( this.name, `doAction`, { core: core, actionName: actionName, action: action, extension: extension } );\n        const actionItems = [];\n        let needsResource = false;\n        let model;\n\n        const actionFieldItems = {};\n\n        // start with getting fields labeled for new doAction\n        if( IsObject( action.fields, true ) ){\n          Object.keys( action.fields ).map( ( name ) => {\n            let field = <FieldInterface>{};\n            if( name in core.repo.model.field ){\n              field = <any>core.repo.model.field[ name ];\n            }\n            model = {};\n            if( field.when ) model.when = JsonCopy( field.when );\n\n            if( IsObject( field.model, true ) ){\n              model = Object.assign( model, field.model );\n            }\n            let actionTransformation;\n            if( IsObject( action.fields[ name ], true ) ){\n              actionTransformation = IsString( action.fields[ name ].transformation, true ) ? action.fields[ name ].transformation : null;\n              model = Object.assign( model, action.fields[ name ] );\n            }\n            // delete model.metadata;\n            delete model.transformation;\n            if( actionTransformation ) model.transformation = actionTransformation; // only want to apply transformation if it was set directly on action\n\n            model.value = IsDefined( model.value ) ? ParseModelValue( model.value, core ) : null;\n            // model.value = IsDefined( model.value ) ? ParseModelValue(model.value, core) : null;\n            if( !model.value && IsObject( model.options, [ 'defaultValue' ] ) ){\n              model.value = ParseModelValue( model.options.defaultValue, core );\n            }\n            model.hidden = !EvaluateWhenConditions( core, model.when, core );\n\n            if( IsObject( extension, true ) && model.name in extension ){\n              model.value = ParseModelValue( extension[ model.name ] );\n              model.readonly = true;\n            }\n\n            model.tabOnEnter = true;\n            actionFieldItems[ name ] = model;\n            if( model.options && model.options.resource ){\n              needsResource = true;\n            }\n          } );\n        }\n\n        // if needsMetadata go grab it before you try to build out the fields\n        if( needsResource ){\n          const resource = await core.repo.getUiResource( core );\n          if( IsObject( resource, true ) ) DeepMerge( core.resource, resource );\n          PopLog.init( this.name, `doAction:needed resource`, resource );\n          Object.keys( actionFieldItems ).map( ( name ) => {\n            const actionItemModel = FieldItemModel( core, actionFieldItems[ name ], false );\n            const actionItem = this.srv.field.buildCoreFieldItem( core, actionItemModel );\n            if( IsObject( actionItem.config, true ) ){\n              actionItem.config.facade = true;\n              if( IsObject( actionItem.config.patch ) ){\n                const patch = <FieldItemPatchInterface>actionItem.config.patch;\n                patch.duration = 0;\n                patch.path = null;\n                patch.displayIndicator = false;\n              }\n            }\n            actionItems.push( actionItem );\n          } );\n\n          PopTemplate.clear();\n          console.log('actionItems', actionItems);\n          return resolve( this.getActionDialogConfig( core, action, actionItems, core.resource, ) );\n\n        }else{\n          // no metadata was needed for any of these fields\n          Object.keys( actionFieldItems ).map( ( name ) => {\n            const actionItemModel = FieldItemModel( core, actionFieldItems[ name ], false );\n            const actionItem = this.srv.field.buildCoreFieldItem( core, actionItemModel );\n\n            if( IsObject( actionItem.config, true ) ){\n              actionItem.config.facade = true;\n              if( IsObject( actionItem.config.patch ) ){\n                const patch = <FieldItemPatchInterface>actionItem.config.patch;\n                patch.duration = 0;\n                patch.path = null;\n                patch.displayIndicator = false;\n              }\n            }\n            actionItems.push( actionItem );\n          } );\n          PopTemplate.clear();\n          console.log('actionItems', actionItems);\n          const actionConfig = this.getActionDialogConfig( core, action, actionItems, ( IsObject( core.entity, true ) ? core.entity.ui : {} ) )\n          PopLog.info( this.name, `doAction: config`, actionConfig );\n          return resolve( actionConfig );\n        }\n      }else{\n        PopTemplate.clear();\n        PopTemplate.error( { message: `${TitleCase( actionName )} not configured.`, code: 500 } );\n        return resolve( null );\n      }\n    } );\n  }\n\n\n  /**\n   * Callback helper to newEntity\n   * @param entityConfig\n   * @param fields\n   * @param metadata\n   * @param goToUrl\n   */\n  getActionDialogConfig( core: CoreConfig, action: EntityActionInterface, actionFieldItems, metadata, extension?: EntityExtendInterface ): FieldItemGroupConfig{\n    if( !IsObject( extension ) ) extension = {};\n    actionFieldItems.sort( DynamicSort( 'sort' ) );\n    let goToUrl = IsString( extension.goToUrl, true ) ? extension.goToUrl : ( action.goToUrl ? action.goToUrl : null );\n    if( goToUrl ) goToUrl = ParseModelValue( goToUrl, core, true );\n\n    let postUrl = IsString( extension.postUrl, true ) ? extension.postUrl : ( action.postUrl ? ParseLinkUrl( String( action.postUrl ).slice(), ( IsObject( core.entity, true ) ? core.entity : {} ) ) : core.params.path );\n    if( postUrl ) postUrl = ParseModelValue( postUrl, core, true );\n\n    const dialogConfig = new FieldItemGroupConfig( {\n      id: action.name,\n      params: core.params,\n      fieldItems: actionFieldItems,\n      metadata: metadata,\n      inDialog: <FieldItemGroupDialogInterface>{\n        postUrl: postUrl,\n        postUrlVersion: 1,\n        submit: TitleCase( action.submitText ),\n        title: action.header ? action.header : `${TitleCase( action.name )} ${ SnakeToPascal( core.repo.getDisplayName() ) }`,\n        goToUrl: goToUrl,\n        callback: IsCallableFunction( action.callback ) ? action.callback : null\n      }\n    } );\n\n    PopLog.init( this.name, `ActionDialog`, dialogConfig );\n\n    return dialogConfig;\n  }\n\n\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n}\n\n\n","import {Component, ElementRef, Input, OnDestroy, OnInit, ViewChild, ViewContainerRef} from '@angular/core';\nimport {EntitySchemeSectionInterface} from '../pop-entity-scheme.model';\nimport {PopExtendDynamicComponent} from \"../../../../pop-extend-dynamic.component\";\nimport {MatDialog, MatDialogRef} from \"@angular/material/dialog\";\nimport {\n  Dictionary,\n  DynamicComponentInterface,\n  EntityActionInterface, PopBaseEventInterface,\n  PopSchemeComponent,\n  SchemeComponentConfig,\n  SchemeComponentConfigInterface,\n  ServiceInjector\n} from \"../../../../pop-common.model\";\nimport {PopEntityActionService} from \"../../services/pop-entity-action.service\";\nimport {PopTabMenuService} from \"../../../base/pop-tab-menu/pop-tab-menu.service\";\nimport {PopDomService} from \"../../../../services/pop-dom.service\";\nimport {IsObject, IsString, JsonCopy, PopUid, StorageGetter} from \"../../../../pop-common-utility\";\n\n@Component({\n  selector: 'lib-entity-scheme-custom-component',\n  templateUrl: './pop-entity-scheme-custom.component.html',\n  styleUrls: ['./pop-entity-scheme-custom.component.scss']\n})\nexport class PopEntitySchemeCustomComponent extends PopExtendDynamicComponent implements OnInit, OnDestroy {\n  @ViewChild('container', {read: ViewContainerRef, static: true}) private container;\n  @Input() componentId: number;\n  @Input() config: SchemeComponentConfig;\n  @Input() section: EntitySchemeSectionInterface;\n\n  public name = 'PopEntitySchemeCustomComponent';\n\n  protected srv = {\n    dialog: <MatDialog>ServiceInjector.get(MatDialog),\n    action: <PopEntityActionService>ServiceInjector.get(PopEntityActionService),\n    tab: <PopTabMenuService>undefined,\n  };\n\n  protected asset = {\n    dialogRef: <MatDialogRef<any>>undefined\n  };\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService,\n    protected _tabRepo: PopTabMenuService\n  ) {\n    super();\n\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise(async (resolve) => {\n        this.template.attach('container');\n\n        await this._setInitialConfig();\n        await this._setInitialState();\n\n        return resolve(true);\n      });\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise(async (resolve) => {\n\n        if (IsObject(this.config, true)) {\n          await this._setInitialProceed();\n          await this._renderComponent();\n        }\n\n        return resolve(true);\n      });\n    };\n  }\n\n  /**\n   * INit\n   */\n  ngOnInit() {\n    super.ngOnInit();\n  }\n\n  /**\n   * This fx will present a pop up for the user to configure the options of this widget\n   */\n  onEditComponentOptions() {\n\n    // TODO implement like edit popup\n    this.dom.setTimeout(`edit-item`, async () => {\n      if (StorageGetter(this.config, ['option', 'component', 'type'], null)) {\n\n        const actionConfig: EntityActionInterface = {\n          name: 'widgets',\n          header: 'Edit Widget',\n          component: <DynamicComponentInterface>{\n            type: this.config.option.component.type,\n            inputs: {\n              config: JsonCopy(this.config)\n            }\n          },\n          // onEvent: (core: CoreConfig, event: PopBaseEventInterface): Promise<boolean> => {\n          //   return new Promise(async(resolve) => {\n          //     return resolve(true);\n          //   });\n          // },\n          submitText: 'SAVE',\n          facade: true,\n          postUrl: null,\n          blockEntity: true, // implies that fields should not be inherited from the original field.ts file\n          responseType: 'store', // track all the key-value pairs that are updated\n        };\n        const result = await this.srv.action.do(this.core, actionConfig);\n        console.log('result', result);\n        if (IsObject(result, true)) {\n          this.dom.setTimeout(`reset-component`, async () => {\n            await this._renderComponent();\n            this.log.info(`options-reset:complete`);\n          }, 0);\n\n        }\n      } else {\n        // ToDo:: handle this case\n      }\n    });\n  }\n\n  /**\n   * This user can click on a refresh icon to refresh the widget\n   */\n  onRefreshComponent() {\n    this.dom.state.loaded = false;\n    this.dom.state.loader = true;\n    this.template.clear();\n    this.dom.setTimeout(`refresh-component`, async () => {\n      await this._renderComponent();\n    }, 500);\n  }\n\n  /**\n   * Handle the bubble events that come up\n   * @param event\n   */\n  onBubbleEvent(name: string, extension?: Dictionary<any>, event?: PopBaseEventInterface): boolean {\n    if (!event) event = {source: this.name, type: 'field', name: name};\n    if (extension) event = {...event, ...extension};\n    this.log.event(`bubbleEvent`, event);\n    this.events.emit(event);\n    return true;\n  }\n\n  /**\n   * Clean up the dom of this component\n   */\n  ngOnDestroy() {\n    super.ngOnDestroy();\n  }\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                   Base Protected Methods                                     *\n   *                                    ( Protected Method )                                      *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  /**\n   * Set the initial config\n   * Intended to be overridden per field\n   */\n  protected _setInitialConfig(): Promise<boolean> {\n    return new Promise((resolve) => {\n      this.id = IsObject(this.config, ['id']) ? this.config.id : PopUid();\n      if (!IsString(this.internal_name)) this.internal_name = 'profile_specialist_1';\n      if (!IsObject(this.config, true)) {\n        const params = PopSchemeComponent.getParams(this.internal_name);\n        this.config = new SchemeComponentConfig(<SchemeComponentConfigInterface>{\n          name: params.name ? params.name : 'Custom Component',\n          internal_name: this.internal_name,\n          component_id: this.componentId,\n          component: PopSchemeComponent.getComponent(this.internal_name),\n          option: PopSchemeComponent.getOption(this.internal_name),\n          setting: PopSchemeComponent.getOption(this.internal_name),\n          resource: PopSchemeComponent.getResource(this.internal_name),\n          param: PopSchemeComponent.getResource(this.internal_name),\n        });\n      }\n\n      return resolve(true);\n    });\n  }\n\n  /**\n   * Set the initial config\n   * Intended to be overridden per field\n   */\n  protected _setInitialState(): Promise<boolean> {\n    return new Promise((resolve) => {\n\n      const isOptionComponent = StorageGetter(this.config, ['option', 'component']);\n      this.dom.state.hasOptions = this.config.setting.edit && isOptionComponent && isOptionComponent.type ? true : false;\n      this.dom.state.hasRefresh = this.config.setting.refresh;\n      this.dom.state.isEditable = this.config.setting.edit ? true : false;\n\n\n      // const userPreferences = StorageGetter( this.core, ['preference', this.config.id], {} );\n      // if( IsObject( userPreferences, true ) ){\n      //   this.config.option = { ...this.config.option, ...userPreferences.option };\n      // }\n\n\n      return resolve(true);\n    });\n  }\n\n  /**\n   * Set the initial config\n   * Intended to be overridden per field\n   */\n  protected _setInitialProceed(): Promise<boolean> {\n    return new Promise((resolve) => {\n\n\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * This fx will render the custom component for this widget\n   * @private\n   */\n  private _renderComponent(): Promise<boolean> {\n    return new Promise((resolve) => {\n      this.dom.setTimeout(`render-widget`, () => {\n        if (IsObject(this.config.component, ['type'])) {\n          this.template.render([this.config.component], ['core', 'position', 'config']);\n        }\n        this.dom.ready();\n      }, 0);\n      return resolve(true);\n    });\n  }\n\n\n}\n","import {\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  HostListener,\n  Input,\n  OnDestroy,\n  OnInit,\n  ViewEncapsulation\n} from '@angular/core';\nimport {ActivatedRoute, Router} from '@angular/router';\nimport {MatDialog} from '@angular/material/dialog';\nimport {Subject} from 'rxjs';\n\nimport {PopEntityEventService} from '../services/pop-entity-event.service';\nimport {PopEntityService} from '../services/pop-entity.service';\nimport {PopTabMenuService} from '../../base/pop-tab-menu/pop-tab-menu.service';\nimport {TabConfig} from '../../base/pop-tab-menu/tab-menu.model';\nimport {\n  CoreConfig, DynamicComponentInterface,\n  EntityExtendInterface,\n  FieldInterface,\n  PopBaseEventInterface,\n  PopPortal, PopSchemeComponent, SchemeComponentConfig,\n  ServiceInjector\n} from '../../../pop-common.model';\nimport {PopExtendComponent} from '../../../pop-extend.component';\nimport {PopDomService} from '../../../services/pop-dom.service';\nimport {IsValidFieldPatchEvent, ParseModelValue, SessionEntityFieldUpdate} from '../pop-entity-utility';\nimport {\n  CleanObject,\n  IsArray,\n  IsDefined,\n  IsObject,\n  IsObjectThrowError,\n  IsString, SpaceToHyphenLower, SpaceToSnake,\n  StorageGetter,\n  TitleCase\n} from '../../../pop-common-utility';\nimport {EntitySchemeSectionConfig, EntitySchemeSectionInterface} from '../pop-entity-scheme/pop-entity-scheme.model';\nimport {PopEntitySchemeCustomComponent} from '../pop-entity-scheme/pop-entity-scheme-custom-component/pop-entity-scheme-custom.component';\n\n\n@Component({\n  selector: 'lib-pop-entity-tab',\n  templateUrl: './pop-entity-tab.component.html',\n  styleUrls: ['./pop-entity-tab.component.scss'],\n\n})\nexport class PopEntityTabComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() tab: TabConfig;\n  @Input() extension: EntityExtendInterface; // allows the route to override certain settings\n\n  public name = 'PopEntityTabComponent';\n\n  protected srv = {\n    dialog: <MatDialog>ServiceInjector.get(MatDialog),\n    router: <Router>ServiceInjector.get(Router),\n    events: <PopEntityEventService>ServiceInjector.get(PopEntityEventService),\n    entity: <PopEntityService>ServiceInjector.get(PopEntityService),\n    tab: <PopTabMenuService>undefined,\n  };\n\n  protected asset = {\n    scheme: <EntitySchemeSectionInterface>undefined,\n  };\n\n\n  /**\n   * @param el\n   * @param cdr\n   * @param route\n   * @param _tabRepo - transfer\n   * @param _domRepo - transfer\n   */\n  constructor(\n    public el: ElementRef,\n    public cdr: ChangeDetectorRef,\n    public route: ActivatedRoute,\n    protected _tabRepo: PopTabMenuService,\n    protected _domRepo: PopDomService,\n  ) {\n    super();\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise(async (resolve) => {\n        // Require a CoreConfig\n        // Pull in the route extension settings\n        if (!this.extension) this.extension = {};\n        if (this.route.snapshot.data && Object.keys(this.route.snapshot.data).length) {\n          Object.keys(this.route.snapshot.data).map((key) => {\n            this.extension[key] = this.route.snapshot.data[key];\n          });\n        }\n        return resolve(true);\n      });\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise(async (resolve) => {\n        // Require a CoreConfig\n        this._setCore().then(() => {\n          if (!(IsObject(this.core.entity, ['id']))) this.srv.router.navigate(['/system/route'], {skipLocationChange: true});\n          // #1: Enforce a CoreConfig && TabConfig\n          // this.core = IsObjectThrowError(this.core, true, `${this.name}:configureDom: - this.core`) ? this.core : null;\n          this._setTab().then(() => {\n            // set the outer height boundary of this component\n            this.dom.overhead = this.tab.wrap ? 40 : 10;\n            this.dom.overhead = this.tab.overhead ? this.dom.overhead + this.tab.overhead : this.dom.overhead;\n            this.dom.height.default = window.innerHeight - 70;\n            this.dom.setHeight(this.dom.height.default, 150);\n\n            // #3: Set tab group container\n            this.tab.groups = {};\n            // #4: Transfer in the ui rescources\n            // if( IsObject(this.core.entity, true) && IsObject(this.core.entity.ui, true) ){\n            //   Object.keys(this.core.entity.ui).map((key: string) => {\n            //     this.ui.resource[ key ] = this.core.entity.ui[ key ]; // ? maybe this should make a copy\n            //   });\n            // }\n            // #5: Build a view with a scheme or a model\n            this.asset.scheme = IsObject(this.core.entity, true) && this.core.entity.scheme_id && IsObject(this.core.resource.scheme, ['data']) ? <EntitySchemeSectionInterface>CleanObject(this.core.resource.scheme.data) : null;\n            // console.log( 'this.asset.scheme', this.asset.scheme );\n            // #6: Bind Event handlers\n            this.dom.handler.core = (core: CoreConfig, event: PopBaseEventInterface) => this._coreEventHandler(event);\n            // #7: Build the view\n            this.tab.view = this._buildTabView();\n            // #8: Register the outlet so the tabRepo can reset the view if needed\n            if (true || this.tab.syncPositions) this.srv.tab.registerOutletReset((position: number = null) => this.onResetView(position));\n            this._callOnLoadEvent();\n\n            this.dom.setTimeout(`determine-layout`, () => {\n              this._determineLayout();\n            }, 0);\n\n            return resolve(true);\n          });\n        });\n      });\n    };\n\n    this.dom.unload = (): Promise<boolean> => {\n      return new Promise(async (resolve) => {\n        this.srv.tab.showAsLoading(false);\n        return resolve(true);\n      });\n    };\n  }\n\n\n  /**\n   * Setup this component\n   */\n  ngOnInit() {\n    super.ngOnInit();\n  }\n\n\n  /**\n   * Bubble event handler\n   * @param event\n   */\n  onBubbleEvent(event: PopBaseEventInterface) {\n    this.log.event(`onBubbleEvent`, event);\n    if (event.type === 'field_group' && event.name === 'init') {\n      this.tab.groups[event.id] = event.group;\n      this._callOnEvent(event, {reset: true});\n    } else if (event.type === 'sidebyside' && event.name === 'portal') {\n      const entityParams = this.srv.entity.getEntityParamsWithPath(String(event.data).split('/')[0], +String(event.data).split('/')[1]);\n      if (entityParams) {\n        this.onViewEntityPortal(entityParams.internal_name, entityParams.entityId);\n      }\n    } else if (IsValidFieldPatchEvent(this.core, event)) {\n      this.log.event(`IsValidFieldPatchEvent`, event);\n      if (event.config.name === 'name' || event.config.name === 'label') {\n        this.srv.tab.updateName(event.config.control.value);\n      }\n      const reset = this._needsPositionReset(event);\n      if (!reset) {\n        if (typeof this.tab.onEvent === 'function') {\n          this._callOnEvent(event);\n        }\n      } else {\n        if (typeof this.tab.onEvent === 'function') {\n          this._callOnEvent(event);\n        }\n        this.srv.events.sendEvent(event);\n      }\n    } else if (event.type === 'context_menu') {\n      if (event.name === 'portal' && event.internal_name && event.id) {\n        setTimeout(() => {\n          this.onViewEntityPortal(event.internal_name, +event.id);\n        }, 0);\n\n      }\n    } else if (event.type === 'dom') {\n      if (event.name === 'refresh') {\n        setTimeout(() => {\n          this.onResetView(+event.position);\n        }, 0);\n      }\n    }\n  }\n\n\n  /**\n   * Triggers when the window is resized\n   */\n  onWindowResize() {\n    this.dom.setTimeout('window-resize', () => {\n      this._determineLayout();\n      this.srv.tab.resetTab();\n\n    }, 500);\n  }\n\n\n  /**\n   * Triggers when a user clicks on an entityId link to see the details of that entityId in a modal\n   * @param internal_name\n   * @param id\n   */\n  onViewEntityPortal(internalName: string, entityId: number) {\n    // ToDo:: Due to circular injection errors, the portals are not working\n    this.tab.view.map((column) => {\n      column.reset.next('scrollTop');\n    });\n\n    // this.srv.router.navigateByUrl(`entities/fields/${entityId}`).catch(e => true);\n    PopPortal.view(internalName, entityId).then((changed: boolean) => {\n      if (changed) {\n        this.dom.refreshing();\n        this.srv.tab.refreshEntity(this.core.params.entityId, this.dom.repo, {}, 'PopEntityTabComponent:viewEntityPortal').then((res) => {\n          this.dom.ready();\n        });\n      }\n    });\n  }\n\n\n  /**\n   * Trigger to reset the view\n   * @param position\n   */\n  onResetView(position: number = null): void {\n    if (this.dom.state.loaded) {\n      if (position === null) {\n        this.tab.view.map((section) => {\n          section.reset.next(true);\n        });\n      } else {\n        this.tab.view[position].reset.next(true);\n      }\n      setTimeout(() => {\n        this.dom.ready();\n      }, 0);\n    }\n  }\n\n\n  /**\n   * Clean up the dom of this component\n   */\n  ngOnDestroy() {\n    this._callUnloadEvent();\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Protected Method )                                      *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  /**\n   * Tie in hook that is called when ever a event if fired\n   *\n   */\n  private _callOnEvent(event: PopBaseEventInterface, options: { reset?: boolean, entityConfig?: boolean } = {}) {\n    if (this.tab && typeof this.tab.onEvent === 'function') {\n      event.tab = this.tab;\n      // event.component = component;\n      // event.core = this.core;\n      if (options.reset) event.cdr = this.cdr;\n      this.tab.onEvent.bind(this)(this.core, event);\n    }\n  }\n\n\n  /**\n   * Tie in hook that is called when the tab is initialized\n   *\n   */\n  private _callOnLoadEvent() {\n    if (this.tab && typeof this.tab.onLoad === 'function') {\n      this.tab.onLoad.bind(this)(this.core, this.tab);\n    }\n  }\n\n\n  /**\n   * Tie in hook that is called when the tab is destroyed\n   *\n   */\n  private _callUnloadEvent() {\n    if (this.tab && typeof this.tab.onUnload === 'function') {\n      this.tab.onUnload.bind(this)(this.core, this.tab);\n    }\n  }\n\n\n  /**\n   * Helper funtion to determine the correct header to display\n   * @param header\n   */\n  private _getHeaderText(header: string) {\n    if (IsString(header, true)) {\n      return TitleCase(ParseModelValue(header, this.core).replace(/_/g, ' ')).trim();\n    }\n    return null;\n  }\n\n\n  /**\n   * Core Event Handler\n   * @param event\n   */\n  private _coreEventHandler(event: PopBaseEventInterface) {\n    this.log.event(`_coreEventHandler`, event);\n    if (this.tab.wrap && event.type === 'component') {\n      if (event.name === 'start-refresh') {\n        this.dom.state.refresh = 1;\n      } else if (event.name === 'stop-refresh') {\n        this.dom.state.refresh = 0;\n      } else if (event.name === 'reset-view') {\n        this.onResetView();\n      }\n    }\n  }\n\n\n  /**\n   * Detects if a mobile layout should be used based on the width of the screen\n   */\n  private _determineLayout() {\n\n    const client = this.el.nativeElement.getBoundingClientRect();\n    this.dom.width.inner = client.width;\n    this.dom.state.mobile = this.dom.width.inner <= 1340 ? true : false;\n    if (this.dom.state.mobile) {\n      this.tab.view.map((column) => {\n        column.maxHeight = null;\n        column.minHeight = null;\n      });\n    } else {\n      this.tab.view.map((column) => {\n        column.minHeight = column.header ? this.dom.height.inner - 50 : this.dom.height.inner;\n        column.maxHeight = column.header ? this.dom.height.inner - 50 : this.dom.height.inner;\n      });\n    }\n    // if( this.log.repo.enabled('dom', this.name) || this.extension.debug ) console.log(this.log.repo.message(`${this.name}:${this.tab.entityId}:_determineLayout:width:${this.dom.width.inner}: mobile: ${this.dom.state.mobile}`), this.log.repo.color('dom'));\n  }\n\n\n  /**\n   * Determines if an event should cause a view reset\n   * @param event\n   */\n  private _needsPositionReset(event: PopBaseEventInterface): boolean {\n    let position;\n    if (this.tab.syncPositions) {\n      // console.log('pass 1');\n      if (event.config && event.config.metadata && event.config.metadata.position) {\n        // console.log('pass 2');\n        position = event.config.metadata.position;\n        if (event.name === 'patch' && ['field', 'sidebyside', 'permissions'].includes(event.type)) {\n          // console.log('pass 3');\n          if (!this.tab.syncPositionFields || this.tab.syncPositionFields.includes(event.config.column)) {\n            // console.log('pass 4');\n            if (!IsObject(this.tab.syncPositionMap, true) || (position in this.tab.syncPositionMap && IsArray(this.tab.syncPositionMap[position]))) {\n              // console.log('pass 5');\n              if (IsObject(this.tab.syncPositionMap, true)) {\n                // console.log('pass 6');\n                if (IsArray(this.tab.syncPositionMap[position])) {\n                  // console.log('pass 7');\n                  this.tab.syncPositionMap[position].map((pos) => {\n                    this.onResetView(+pos);\n                  });\n                }\n                return true;\n              } else {\n                this.onResetView();\n              }\n              return true;\n            }\n          }\n        }\n      }\n    }\n\n    return false;\n  }\n\n\n  /**\n   * Allows for a pre built core to be passed in else it will build the core itself\n   */\n  _setCore(): Promise<boolean> {\n    return new Promise((resolve) => {\n      if (!(IsObject(this.core, true))) {\n\n        const tabCore = this.srv.tab.getCore();\n        if (IsObject(tabCore, ['entity'])) {\n          this.core = tabCore;\n          this.log.info(`_setCore: initial`);\n          return resolve(true);\n        }\n\n        if (this.route.snapshot.data.core) {\n          this.core = IsObjectThrowError(this.route.snapshot.data.core, true, `${this.name}:: - this.route.snapshot.data.core`) ? <CoreConfig>this.route.snapshot.data.core : <CoreConfig>{};\n          this.log.info(`_setCore: route`);\n          return resolve(true);\n        }\n\n        const coreParams = this.srv.tab && this.srv.tab.ui && this.srv.tab.ui.entityParams ? this.srv.tab.ui.entityParams : {};\n        if (IsObject(coreParams, true)) {\n          this.srv.entity.getCoreConfig(coreParams.internal_name, +coreParams.entity).then((core: CoreConfig) => {\n            this.core = IsObjectThrowError(core, true, `${this.name}:: - core`) ? core : <CoreConfig>{};\n            this.log.info(`_setCore: tab params`);\n            return resolve(true);\n          });\n        } else {\n          this.srv.entity.getCoreConfig(this.srv.entity.getRouteInternalName(this.route, this.extension), this.route.snapshot.params.entity).then((core: CoreConfig) => {\n            this.core = IsObjectThrowError(core, true, `${this.name}:: - core`) ? core : null;\n            this.log.info(`_setCore: route internal _name`);\n            return resolve(true);\n          });\n        }\n      } else {\n        return resolve(true);\n      }\n    });\n  }\n\n\n  /**\n   * Allows for a pre built tab to be passed in else it will find try to find one\n   */\n  _setTab(): Promise<boolean> {\n    return new Promise((resolve) => {\n      if (!(IsObject(this.tab, true))) {\n        const tab = this.srv.tab.getTab();\n        this.tab = IsObjectThrowError(tab, true, `${this.name}:_setTab: - tab`) ? tab : {};\n        return resolve(true);\n      } else {\n        return resolve(true);\n      }\n    });\n  }\n\n\n  /**\n   * Determine the structure of the tab view\n   *\n   */\n  _buildTabView(): any[] {\n    const view = [];\n//     console.log('this.tab.scheme', this.tab.scheme);\n    if (this.tab.scheme && IsObject(this.asset.scheme, ['children'])) {\n//       console.log('should use the scheme provided', this.asset.scheme);\n      const sections = this.asset.scheme.children;\n      const sectionKeys = Object.keys(sections);\n      const lastSectionKey = sectionKeys[sectionKeys.length - 1];\n      let section;\n      sectionKeys.map((sectionKey) => {\n        section = sections[sectionKey];\n        section.position = +sectionKey + 1;\n        if (typeof section.flex === 'undefined') {\n          section.flex = +lastSectionKey === +sectionKey ? 2 : 1;\n        }\n        let height = +this.dom.height.outer;\n        height = section.header ? (height - 50) : height;\n\n        this.dom.repo.position[sectionKey] = {\n          height: height,\n        };\n\n        view.push({\n          id: sectionKey,\n          position: section.position,\n          reset: new Subject(),\n          components: this._getSchemeSectionAssetComponents(this.core, this.asset.scheme, section),\n          header: this._getHeaderText(section.name),\n          flex: section.flex,\n          minWidth: +sectionKey < 3 ? 350 : null,\n          maxWidth: +sectionKey < 2 ? 450 : null,\n          maxHeight: height,\n          active: true,\n        });\n      });\n    } else {\n      const positions = IsObjectThrowError(this.tab.positions, true, `${this.name}:configureDom: - this.tab.positions`) ? this.tab.positions : {};\n      Object.keys(positions).map((position) => {\n        let height = +this.dom.height.outer;\n        height = this.tab.positions[position].header ? (height - 50) : height;\n\n        this.dom.repo.position[position] = {\n          height: height,\n        };\n\n        view.push({\n          id: position,\n          position: position,\n          reset: new Subject(),\n          components: this.tab.positions[position].components,\n          extension: this.extension,\n          header: this._getHeaderText(this.tab.positions[position].header),\n          flex: this.tab.positions[position].flex,\n          maxWidth: this.tab.positions[position].max,\n          minWidth: this.tab.positions[position].min,\n          maxHeight: height,\n          active: true,\n        });\n      });\n    }\n\n    return view;\n  }\n\n\n  /**\n   * Gather all the assets that should be rendered in a specific section\n   * @param core\n   * @param assets\n   */\n  private _getSchemeSectionAssetComponents(core: CoreConfig, scheme: EntitySchemeSectionInterface, section: EntitySchemeSectionInterface) {\n\n    const componentList = [];\n    const Field = this.dom.repo.ui.fields;\n    // console.log('Field', Field);\n    const tableFields = this._getSectionTableFieldsAssets(section);\n    section.children = [...tableFields, ...(IsArray(section.children) ? section.children : [])];\n    if(IsObject(section.mapping, ['sort_order'])){\n      section.children = section.children.sort(function (a, b) {\n        const a1 = section.mapping.sort_order.indexOf(a.id);\n        const a2 = section.mapping.sort_order.indexOf(b.id);\n        if (a1 < a2) return -1;\n        if (a1 > a2) return 1;\n        return 0;\n      });\n    }\n\n\n\n    section.children.map((child) => {\n      if (String(String(child.asset_type).toLowerCase()).includes('field')) {\n        child.asset_type = 'field';\n      } else if (String(String(child.asset_type).toLowerCase()).includes('component')) {\n        child.asset_type = 'component';\n      } else if (String(String(child.asset_type).toLowerCase()).includes('widget')) {\n        child.asset_type = 'widget';\n      }\n      if (child.asset_type && IsDefined(child.asset_id)) {\n        switch (child.asset_type) {\n          case 'table': {\n            // console.log( 'table', child );\n            // const fieldItem = child.name ? Field.get( child.name ) : null;\n            // if( fieldItem ){\n            //   componentList.push( fieldItem );\n            // }\n            break;\n          }\n          case 'field': {\n            const field = Field.get(+child.asset_id);\n\n            if (field) {\n              componentList.push(scheme, field);\n            }\n            break;\n          }\n          case 'component': {\n            // ToDo:: Figure how custom components are going to be managed\n\n            const internalName = StorageGetter(child, ['asset', 'internal_name'], String(SpaceToSnake(child.name)).toLowerCase() + '_1');\n            const component = <DynamicComponentInterface>{\n              type: PopEntitySchemeCustomComponent,\n              inputs: {\n                core: core,\n                config: <SchemeComponentConfig>undefined,\n                componentId: child.asset_id,\n                internal_name: internalName\n              }\n            };\n            componentList.push(component);\n            break;\n          }\n          default:\n            // if( this.srv.log.enabled('error', this.name) ) console.log(this.srv.log.message(`${this.name}:getSchemeSectionAssetComponents`), this.srv.log.color('error'), asset);\n            break;\n        }\n      }\n\n    });\n\n    return componentList;\n  }\n\n\n  /**\n   * Retrieve the default columns tht exist on an entity table\n   * @param section\n   */\n  private _getSectionTableFieldsAssets(section: EntitySchemeSectionInterface) {\n    const tableAssets = [];\n    if (this.core) {\n      const Field = StorageGetter(this.core, 'repo.model.field'.split('.'));\n      if (IsObject(Field, true)) {\n        Object.values(Field).map((field: FieldInterface) => {\n          if (!field.ancillary && field.position === section.position) {\n            tableAssets.push(new EntitySchemeSectionConfig({\n              id: 0,\n              name: field.model.name,\n              label: field.model.label,\n              asset_type: 'table',\n              asset_id: 0,\n              asset: field,\n              scheme_id: +section.id,\n              sort_order: field.sort,\n              position: section.position,\n            }));\n          }\n        });\n      }\n    }\n\n    section.startIndex = tableAssets.length;\n    return tableAssets.sort((a, b) => {\n      if (a.sort < b.sort) return -1;\n      if (a.sort > b.sort) return 1;\n      return 0;\n    });\n  }\n}\n","import {\n  Component, ElementRef,\n  Input,\n  OnDestroy,\n  OnInit,\n  ViewChild,\n} from '@angular/core';\nimport { CdkPortalOutlet, ComponentPortal } from '@angular/cdk/portal';\nimport { PopBaseEventInterface, PopEntity, ServiceInjector } from '../../../../pop-common.model';\nimport { TabButtonInterface, TabConfig, TabMenuConfig } from '../../../base/pop-tab-menu/tab-menu.model';\nimport { PopEntityTabComponent } from '../../pop-entity-tab/pop-entity-tab.component';\nimport { PopTabMenuService } from '../../../base/pop-tab-menu/pop-tab-menu.service';\nimport { PopDomService } from '../../../../services/pop-dom.service';\nimport { PopExtendComponent } from '../../../../pop-extend.component';\nimport { IsArray, IsObjectThrowError } from '../../../../pop-common-utility';\nimport { PopEntityEventService } from '../../services/pop-entity-event.service';\nimport { IsValidCoreSignature, IsValidFieldPatchEvent } from '../../pop-entity-utility';\n\n\n@Component( {\n  selector: 'lib-pop-entity-portal-menu',\n  templateUrl: './pop-entity-portal-menu.component.html',\n  styleUrls: [ './pop-entity-portal-menu.component.scss' ],\n  providers: [ PopTabMenuService, PopDomService ],\n} )\nexport class PopEntityPortalMenuComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() config: TabMenuConfig;\n  @ViewChild( 'outlet', { static: true } ) outlet: ElementRef;\n  @ViewChild( CdkPortalOutlet, { static: true } ) portal: CdkPortalOutlet;\n\n  public name = 'PopTabMenuComponent';\n\n\n  protected srv: {\n    crud: PopEntityEventService,\n    tab: PopTabMenuService,\n  } = {\n    crud: ServiceInjector.get( PopEntityEventService ),\n    tab: <PopTabMenuService>undefined\n  };\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService,\n    protected _tabRepo: PopTabMenuService\n  ){\n    super();\n\n    this.id = 2;\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n        // set the outer height boundary\n        await this.dom.setHeightWithParent( 'cdk-overlay-pane', 100, window.innerHeight - 180 );\n        // #1: Enforce a CoreConfig\n        this.core = IsObjectThrowError( this.core, true, `${this.name}:configureDom: - this.core` ) ? this.core : null;\n        // #2: Enforce a TabMenuConfig\n        this.config = IsObjectThrowError( this.config, true, `${this.name}:configureDom: - this.core` ) ? this.config : <TabMenuConfig>{};\n        await PopEntity.setCoreDomAssets( this.core, this.dom.repo );\n        // #3: Register the outlet with the tabRepo, gives the tabRepo the ability to reset the view if needed\n        this.srv.tab.registerOutlet( <ElementRef>this.outlet );\n        // #4: Preset a default tab so the view will have something to render\n        if( IsArray( this.config.tabs, true ) ) this.onSetPortal( this.config.tabs[ 0 ] );\n\n        this.dom.setSubscriber( 'events', this.srv.crud.events.subscribe( ( event: PopBaseEventInterface ) => {\n          if( IsValidCoreSignature( this.core, event ) ){\n            if(IsValidFieldPatchEvent(this.core, event)){\n              if( event.config.name === 'name' || event.config.name === 'label' ){\n                this.config.name = ( event.config.control.value );\n              }\n            }\n          }\n        } ) );\n\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * Setup this component\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * Trigger a portal tab click event\n   * @returns void\n   */\n  onMenuClick( tab: TabConfig ): void{\n    this.onSetPortal( tab );\n    this.onBubbleEvent( {\n      source: this.name,\n      type: 'menu',\n      id: tab.id,\n      name: tab.name,\n    } );\n  }\n\n\n  /**\n   * Whenever a user click on tab av button, the portal needs reset to that tab\n   * Has specific render so does not use the built-in render intentionally\n   * @param tab\n   */\n  onSetPortal( tab: TabConfig ){\n    if( this.log.repo.enabled( 'config', this.name ) ) console.log( this.log.repo.message( `${this.name}:setPortal:tab` ), this.log.repo.color( 'config' ), tab );\n    if( tab && tab.id ){\n      if( this.portal && this.portal.attachedRef ) this.portal.detach();\n      this.dom.state.tab = tab;\n      Object.keys( this.dom.subscriber ).map( ( name ) => {\n        if( this.dom.subscriber[ name ] ){\n          this.dom.subscriber[ name ].unsubscribe();\n        }\n      } );\n      const componentRef = this.portal.attach( new ComponentPortal( PopEntityTabComponent ) );\n      componentRef.instance[ 'core' ] = this.core;\n      componentRef.instance.tab = tab;\n      componentRef.changeDetectorRef.detectChanges();\n\n      if( componentRef.instance[ 'events' ] ){\n        this.dom.setSubscriber( 'portal', componentRef.instance[ 'events' ].subscribe( ( event: PopBaseEventInterface ) => {\n          this.onBubbleEvent( event );\n        } ) );\n      }\n    }\n  }\n\n\n  /**\n   * Trigger a button click event\n   * @returns void\n   */\n  onButtonClick( button: TabButtonInterface ): void{\n    this.onBubbleEvent( {\n      source: this.name,\n      type: 'button',\n      id: button.id,\n      name: button.name,\n    } );\n  }\n\n\n  /**\n   * This will bubble a event up to a parent component\n   * @param event\n   */\n  onBubbleEvent( event: PopBaseEventInterface ){\n    this.events.emit( event );\n  }\n\n\n  /**\n   * Clean up the dom of this component\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n    this.portal.detach();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  private _onCrudEvent(event: PopBaseEventInterface){\n\n  }\n}\n","import { ChangeDetectorRef, Component, ElementRef, HostListener, Inject, Input, OnDestroy, OnInit, Optional, ViewChild, ViewContainerRef } from '@angular/core';\nimport { TabMenuConfig, TabMenuPortalInterface } from '../../base/pop-tab-menu/tab-menu.model';\nimport { PopTabMenuService } from '../../base/pop-tab-menu/pop-tab-menu.service';\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\nimport { ActivatedRoute, Route } from '@angular/router';\nimport { AppGlobalInterface, CoreConfig, EntityExtendInterface, PopBaseEventInterface, PopEntity, PopTemplate, ServiceInjector } from '../../../pop-common.model';\nimport { PopEntityEventService } from '../services/pop-entity-event.service';\nimport { PopDomService } from '../../../services/pop-dom.service';\nimport { PopExtendDynamicComponent } from '../../../pop-extend-dynamic.component';\nimport { PopTabMenuComponent } from '../../base/pop-tab-menu/pop-tab-menu.component';\nimport { PopEntityPortalMenuComponent } from './pop-entity-portal-menu/pop-entity-portal-menu.component';\nimport { PopEntityActionService } from '../services/pop-entity-action.service';\nimport { GetRouteAlias, IsObject, IsObjectThrowError, IsString, TitleCase } from '../../../pop-common-utility';\nimport { PopCacFilterBarService } from '../../app/pop-cac-filter/pop-cac-filter.service';\nimport { GetSingularName, GetTabMenuConfig, IsAliasable, IsEntity, IsValidFieldPatchEvent } from '../pop-entity-utility';\n\n\n@Component( {\n  selector: 'lib-pop-entity-tab-menu',\n  templateUrl: './pop-entity-tab-menu.component.html',\n  styleUrls: [ './pop-entity-tab-menu.component.scss' ],\n  providers: [ PopTabMenuService, PopDomService ],\n} )\nexport class PopEntityTabMenuComponent extends PopExtendDynamicComponent implements OnInit, OnDestroy {\n  @Input() config: TabMenuConfig;\n  @Input() extension: EntityExtendInterface;\n  @Input() portal: TabMenuPortalInterface;\n  @ViewChild( 'container', { read: ViewContainerRef, static: true } ) private container;\n\n\n  public name = 'PopEntityTabMenuComponent';\n\n  protected srv = {\n    action: <PopEntityActionService>ServiceInjector.get( PopEntityActionService ),\n    dialog: <MatDialog>ServiceInjector.get( MatDialog ),\n    events: <PopEntityEventService>ServiceInjector.get( PopEntityEventService ),\n    tab: <PopTabMenuService>undefined\n  };\n\n\n  constructor(\n    public el: ElementRef,\n    public cdr: ChangeDetectorRef,\n    public route: ActivatedRoute,\n    protected _domRepo: PopDomService,\n    protected _tabRepo: PopTabMenuService,\n    @Inject( 'APP_GLOBAL' ) public APP_GLOBAL: AppGlobalInterface,\n    @Optional() public dialogRef: MatDialogRef<PopEntityTabMenuComponent>\n  ){\n    super();\n\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n        await this.APP_GLOBAL.isVerified();\n        if( !IsObject( this.extension, true ) ) this.extension = {};\n        if( !this.extension.goToUrl ) this.extension.goToUrl = null;\n        if( this.route.snapshot.data && Object.keys( this.route.snapshot.data ).length ){\n          Object.keys( this.route.snapshot.data ).map( ( key ) => {\n            this.extension[ key ] = this.route.snapshot.data[ key ];\n          } );\n        }\n        return resolve( true );\n      } );\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n        // Require a CoreConfig\n        await this._setCore();\n        this.core = IsObjectThrowError( this.core, true, `${this.name}:configureDom: - this.core` ) ? this.core : null;\n        if( this.core.flag.routeCheck ){ // check this child routes for any aliasing\n          this.route.routeConfig.children.map( ( childRoute: Route ) => {\n            const internal_name = GetSingularName( childRoute.path );\n            if( IsAliasable( childRoute.path ) && IsEntity( TitleCase( internal_name ) ) ){\n              childRoute.path = GetRouteAlias( internal_name );\n            }\n          } );\n          this.core.flag.routeCheck = false;\n        }\n\n        this.log.info( 'tab-menu config', this.config );\n        this.dom.height.default = window.innerHeight - 100;\n        this.dom.setHeight( this.dom.height.default, 100 );\n        // this component set the outer height boundary\n        this.log.info( `Determined height:${this.dom.height.inner}` );\n        // Bind events to handlers\n        this.dom.handler.bubble = ( core: CoreConfig, event: PopBaseEventInterface ) => this.onBubbleEvent( event );\n        // Require a TabMenuConfig, and pull in extension params from the route\n        await this._setTabMenuConfig();\n        if( this.config.portal ) this.dom.height.inner = this.dom.height.inner - 50;\n        //  Attach Template Container\n        this.template.attach( 'container' );\n        //  Render the dynamic list of components\n        this._templateRender();\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * Helper function that renders the list of dynamic components\n   *\n   */\n  private _templateRender(){\n    if( this.config.portal ){\n      this.asset.component = this.template.render( [ {\n        type: PopEntityPortalMenuComponent,\n        inputs: {\n          config: this.config\n        }\n      } ] );\n      // componentRef.instance.events.subscribe((event: PopBaseEventInterface) => {\n      //   if( typeof this.dom.handler.bubble === 'function' ){\n      //     this.dom.handler.bubble(event);\n      //   }else{\n      //     if( this.trait.bubble ) this.events.emit(event);\n      //   }\n      // })\n    }else{\n      this.template.render( [ {\n        type: PopTabMenuComponent,\n        inputs: {\n          config: this.config\n        }\n      } ] );\n    }\n  }\n\n\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * Tie in for a parent component to pass in a TabMenuConfig\n   * @param config\n   */\n  registerTabMenuConfig( config: TabMenuConfig ){ // use for programmatic/dynamic implementations\n    this.config = IsObjectThrowError( config, true, `${this.name}:registerTabMenuConfig: - config` ) ? config : <TabMenuConfig>{};\n    this.dom.setSubscriber( 'config-change', this.srv.tab.change.subscribe( ( event ) => {\n    } ) );\n    try{\n      this.cdr.detectChanges();\n    }catch( e ){\n    }\n    this._registerTabMenuConfig();\n  }\n\n\n  /**\n   * A TabMenu  will generate a slew of action and event triggers\n   * @param event\n   */\n  onBubbleEvent( event: PopBaseEventInterface ): void{\n    this.log.event( `onBubbleEvent`, event );\n    if( IsValidFieldPatchEvent( this.core, event ) ){\n      if( event.config.name === 'name' || event.config.name === 'label' ){\n        this.config.name = event.config.control.value;\n      }\n    }else{\n      switch( event.type ){\n        case 'button':\n          switch( event.id ){\n            case 'reset':\n              this.srv.tab.refreshEntity( null, this.dom.repo, {}, 'PopEntityTabMenuComponent:handleMenuEvent:reset' ).then( () => true );\n              break;\n            // case 'archive':\n            //   this.onArchiveButtonClicked(true);\n            //   break;\n            // case 'activate':\n            //   this.onArchiveButtonClicked(false);\n            //   break;\n            case 'clone':\n              this.onCloneButtonClicked();\n              break;\n            case 'close':\n              if( this.dialogRef ) this.dialogRef.close();\n              break;\n            default:\n              this.events.emit( event );\n              break;\n          }\n          break;\n        case 'portal':\n          break;\n        case 'default':\n          break;\n      }\n    }\n  }\n\n\n  /**\n   * A user can click on an archive/active button to change the status of this active entity\n   * @param archive\n   */\n  onArchiveButtonClicked( archive: boolean ){\n    if( this.dom.subscriber.entity ) this.dom.subscriber.entity.unsubscribe();\n    this.dom.subscriber.entityId = this.core.repo.archiveEntity( this.core.params.entityId, archive ).subscribe( () => {\n      PopEntity.bustAllCache();\n      this.srv.events.sendEvent( {\n        source: this.name,\n        method: 'archive',\n        type: 'entity',\n        name: this.core.params.name,\n        internal_name: this.core.params.internal_name,\n        id: this.core.params.entityId,\n        data: archive\n      } );\n      if( archive && !this.config.portal ){\n        if( false ){ // Disabled navigation back to the entity list for now\n          this.core.repo.navigateToEntities().catch( e => {\n            this.srv.tab.refreshEntity( null, this.dom.repo, {}, 'PopEntityTabMenuComponent:setArchived' ).then( () => PopTemplate.clear() );\n          } );\n        }else{\n          this.srv.tab.refreshEntity( null, this.dom.repo, {}, 'PopEntityTabMenuComponent:setArchived' ).then( () => PopTemplate.clear() );\n        }\n      }else{\n        this.srv.tab.refreshEntity( null, this.dom.repo, {}, 'PopEntityTabMenuComponent:setArchived' ).then( () => PopTemplate.clear() );\n      }\n    }, err => {\n      this.dom.error.code = err.error.code;\n      this.dom.error.message = err.error.message;\n    } );\n  }\n\n\n  /**\n   * A user can click a clone button to trigger this active entity to be cloned\n   */\n  onCloneButtonClicked(){\n    // this.dom.setTimeout( `clone-action`, async() => {\n    //   const actionConfig = await this.srv.action.doAction( <CoreConfig>this.core, 'clone', this.extension );\n    //   this.ui[ 'actionModal' ] = IsObject( actionConfig, true ) ? actionConfig : null;\n    // }, 0 );\n    this.dom.setTimeout(`do-action`, async()=>{\n      await this.srv.action.do(this.core, 'clone', this.extension);\n    }, 0);\n\n  }\n\n\n  /**\n   * When the modal to clone the active entity is closed the asset needs to be cleared\n   */\n  onActionModalClose(){\n    this.ui[ 'actionModal' ] = null;\n  }\n\n\n  /**\n   * Cleanup the do of this component\n   */\n  ngOnDestroy(){\n    if( this.core && this.core.params && this.core.params.entityId ) this.core.repo.clearCache( 'entity', String( this.core.params.entityId ), 'PopEntityTabMenuComponent:ngOnDestroy' );\n    // this.srv.tab.reset();\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  /**\n   * This allows a CoreConfig to be passed in else it will generate one\n   *\n   */\n  private _setCore(): Promise<boolean>{\n    return new Promise( async( resolve ) => {\n      if( !( IsObject( this.core, true ) ) ){\n        if( IsObject( this.portal, [ 'internal_name', 'entity_id' ] ) ){\n          this.core = await PopEntity.getCoreConfig( this.portal.internal_name, this.portal.entity_id );\n          return resolve( true );\n        }else if( IsObject( this.route.snapshot.data.core, true ) ){\n          this.core = this.route.snapshot.data.core;\n          await PopEntity.setCoreDomAssets( this.core, this.dom.repo );\n          return resolve( true );\n        }else{\n          this.core = await PopEntity.getCoreConfig( PopEntity.getRouteInternalName( this.route, this.extension ), this.route.snapshot.params.id, this.dom.repo );\n          return resolve( true );\n        }\n      }else{\n        return resolve( true );\n      }\n    } );\n  }\n\n\n  /**\n   * This allows a TabMenuConfig to be passed in else it will generate one\n   *\n   */\n  private _setTabMenuConfig(): Promise<boolean>{\n    return new Promise( async( resolve ) => {\n      if( !IsObject( this.config, true ) ){\n        this.config = GetTabMenuConfig( this.core, PopEntity.getEntityTabs( this.core ) );\n        this.config = IsObjectThrowError( this.config, true, `${this.name}:configureDom: - this.config` ) ? this.config : <TabMenuConfig>{};\n        this._registerTabMenuConfig();\n        return resolve( true );\n      }else{\n        this._registerTabMenuConfig();\n        return resolve( true );\n      }\n    } );\n  }\n\n\n  /**\n   * This will transfer the TabMenuConfig up to the tabRepo so other components can communicate with it\n   *\n   */\n  private _registerTabMenuConfig(){\n    if( this.core && this.config ){\n      // turn off the filter bar (unless a portal dialog) since it is wasted space\n      if( IsObject( this.portal, [ 'internal_name' ] ) ){\n        this.config.portal = true;\n      }\n      if( !this.config.portal ) ServiceInjector.get( PopCacFilterBarService ).setActive( false );\n\n      if( typeof this.extension === 'object' && Object.keys( this.extension ).length ){\n        Object.keys( this.extension ).map( ( key ) => {\n          if( key in this.config ){\n            this.config[ key ] = this.extension[ key ];\n          }\n        } );\n      }\n      // Register the config on the Tab Menu Service since it is the master control\n      // We store the config of the Tab Menu since other components(Tabs,...) interact with it\n      this.config = this.srv.tab.registerConfig( this.core, <TabMenuConfig>this.config, this.dom.repo );\n      this.srv.tab.registerRoute( this.route );\n      try{\n        this.cdr.detectChanges();\n      }catch( e ){\n      }\n    }\n  }\n\n}\n\n","import { Injectable } from '@angular/core';\nimport { PopEntityTabMenuComponent } from '../pop-entity-tab-menu/pop-entity-tab-menu.component';\nimport { MatDialog } from '@angular/material/dialog';\n\n\n@Injectable( { providedIn: 'root' } )\nexport class PopEntityUtilPortalService {\n\n\n  state = {\n    blockModal: false,\n  };\n\n\n  constructor(\n    private dialogRepo: MatDialog,\n  ){\n  }\n\n\n  view( internal_name: string, id: number ): Promise<boolean>{\n    return new Promise( async( resolve ) => {\n      if( !this.state.blockModal ){\n        this.state.blockModal = true;\n        if( internal_name && id ){\n          let dialogRef = this.dialogRepo.open( PopEntityTabMenuComponent, {\n            width: `${window.innerWidth - 20}px`,\n            height: `${window.innerHeight - 50}px`,\n            panelClass: 'sw-portal'\n          } );\n          let component = <PopEntityTabMenuComponent>dialogRef.componentInstance;\n          component.portal = { internal_name: internal_name, entity_id: id };\n          component.cdr.detectChanges();\n          dialogRef.afterClosed().subscribe( ( changed ) => {\n            this.state.blockModal = false;\n            component.core.repo.clearAllCache();\n            dialogRef = null;\n            component = null;\n            resolve( true );\n          } );\n        }else{\n          resolve( false );\n        }\n      }else{\n        console.log( 'blockModal' );\n        resolve( false );\n      }\n    } );\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n}\n","import { Component, ComponentRef, ElementRef, Input, OnDestroy, OnInit, ViewChild, ViewContainerRef } from '@angular/core';\nimport { PopExtendDynamicComponent } from '../../../pop-extend-dynamic.component';\nimport {\n  CoreConfig,\n  DynamicComponentInterface,\n  FieldGroupInterface,\n  FieldInterface,\n  PopBaseEventInterface,\n  ServiceInjector\n} from '../../../pop-common.model';\nimport { PopEntityUtilFieldService } from '../services/pop-entity-util-field.service';\nimport { EvaluateWhenCondition, IsValidFieldPatchEvent } from '../pop-entity-utility';\nimport { ConvertArrayToOptionList, IsArray, IsObject, IsObjectThrowError, StorageGetter } from '../../../pop-common-utility';\nimport { PopDomService } from '../../../services/pop-dom.service';\nimport { PopTabMenuService } from '../../base/pop-tab-menu/pop-tab-menu.service';\n\n\n@Component( {\n  selector: 'lib-pop-entity-field-group',\n  templateUrl: './pop-entity-field-group.component.html',\n  styleUrls: [ './pop-entity-field-group.component.scss' ]\n} )\nexport class PopEntityFieldGroupComponent extends PopExtendDynamicComponent implements OnInit, OnDestroy {\n  public name = 'PopEntityFieldGroupComponent';\n  @Input() position = 1;\n  @Input() fieldType: 'custom' | 'table' = null;\n  @Input() public interface: FieldGroupInterface; // relies on top level component to set\n  @ViewChild( 'container', { read: ViewContainerRef, static: true } ) private container;\n\n\n  protected srv = {\n    field: <PopEntityUtilFieldService>ServiceInjector.get( PopEntityUtilFieldService ),\n    tab: <PopTabMenuService>undefined\n  };\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService,\n    protected _tabRepo: PopTabMenuService,\n  ){\n    super();\n\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n        this.core = IsObjectThrowError( this.core, true, `${this.name}:configure: - this.core` ) ? this.core : null;\n        // handles events\n        this.trait.bubble = true;\n        this.dom.handler.bubble = ( core: CoreConfig, event: PopBaseEventInterface ) => this.onBubbleEvent( event );\n        // this.dom.handler.core = ( core: CoreConfig, event: PopBaseEventInterface ) => this._coreEventHandler( event );\n        this.id = this.position;\n        return resolve( true );\n      } );\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n        this.dom.overhead = this.interface && this.interface.header ? 60 : 0;\n        this.dom.setHeightWithParent( null, this.dom.overhead, 600 ).then( () => true );\n        // Get the list of fields and render them into the view\n\n        const fieldComponentList = await this._getFieldComponentList();\n        this.template.attach( 'container' );\n        this.template.render( fieldComponentList );\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * This component receives a list of fields to render\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n\n  /**\n   * Clean up the dom of this component\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n  /**\n   * This will retrieve any fields that have been marked for the position of this field group\n   */\n  private _getFieldComponentList(): Promise<DynamicComponentInterface[]>{\n    return new Promise( ( resolve ) => {\n      let fields = this.srv.field.getDomFields( this.position, this.dom.repo );\n      if( this.fieldType === 'custom' ){\n        fields = fields.filter( ( field ) => {\n          return field.custom;\n        } );\n      }else if( this.fieldType === 'table' ){\n        fields = fields.filter( ( field ) => {\n          return !( field.custom );\n        } );\n      }\n      this.asset.fields = {};\n      fields.map( ( field: FieldInterface ) => {\n        const config = StorageGetter( field, [ 'inputs', 'config' ], null );\n        if( config ){\n          this.asset.fields[ config.name ] = config;\n        }\n      } );\n      const componentList: DynamicComponentInterface[] = fields;\n\n      return resolve( componentList );\n    } );\n  }\n\n\n  /**\n   * The fields will trigger a slew of events\n   * @param event\n   */\n  onBubbleEvent( event: PopBaseEventInterface ){\n    this.log.event( `onBubbleEvent`, event );\n    if( IsValidFieldPatchEvent( this.core, event ) || event.type === 'context_menu' ){\n      this.log.info( `IsValidFieldPatchEvent`, event );\n\n      if( event.type === 'field' && event.config.name in this.core.entity ){\n        const newValue = isNaN( event.config.control.value ) ? event.config.control.value : +event.config.control.value;\n        this.core.entity[ event.config.name ] = newValue;\n        if( Object.keys( this.asset.fields ).length > 1 ){\n          this.dom.setTimeout( 'reset-hidden', () => {\n            this._triggerParentChildUpdates( event.config.name );\n            // this._resetComponentListHidden();\n\n          }, 0 );\n        }else{\n          this.dom.setTimeout( 'reset-hidden', () => {\n            // this._resetComponentListHidden();\n          }, 0 );\n        }\n      }\n\n      this.events.emit( event );\n      this.srv.tab.clearCache();\n    }\n  }\n\n  //\n  // /**\n  //  * This handler handles any events that come across the core cross channel\n  //  * @param event\n  //  * @private\n  //  */\n  // private _coreEventHandler( event: PopBaseEventInterface ){\n  //   this.log.event(`_coreEventHandler`, event);\n  //   if( IsValidFieldPatchEvent( this.core, event ) ){\n  //     // A values has been patched recheck the list of fields to see if any of them should be hidden\n  //\n  //   }\n  // }\n\n\n  /**\n   * Whenever a _update to the core entity happens the fields in the group should be re-evaluated if there are when conditionals set\n   * @private\n   */\n  private _resetComponentListHidden(){\n    let name, def;\n    const Fields = this.dom.repo.ui.fields;\n    this.template.refs.filter( ( componentRef: ComponentRef<any> ) => {\n      return IsObject( componentRef.instance.config, true ) && IsArray( componentRef.instance.when, true );\n    } ).map( ( componentRef: ComponentRef<any> ) => {\n      name = componentRef.instance.config.name;\n      if( name ){\n        def = Fields.get( name );\n        if( def ){\n          componentRef.instance.hidden = def.inputs.hidden = !EvaluateWhenCondition( this.core, componentRef.instance.when, this.core );\n          Fields.set( name, def );\n        }\n      }\n    } );\n  }\n\n\n  /**\n   * This will update the option values of related parent/child fields\n   * @param name\n   * @private\n   */\n  private _triggerParentChildUpdates( name: string ){\n    this.log.info(`_triggerParentChildUpdates`, name);\n    if( this._fieldHasChild( name ) ){\n      let values;\n      let child_fk;\n      let childField;\n      let autoFill = false;\n      let set;\n      const relations = this._getRelationList( name );\n      relations.some( ( relation ) => {\n        if( relation.autoFill ){\n          autoFill = true;\n          return true;\n        }\n      } );\n\n\n      if( name && name in this.asset.fields ){\n        child_fk = this.asset.fields[ name ].options.child;\n        if( child_fk && child_fk in this.asset.fields ){\n          childField = this.asset.fields[ child_fk ];\n          if( IsArray( childField.options.rawValues ) ){\n\n            values = ConvertArrayToOptionList( childField.options.rawValues, {\n              // ensure that an option shows up in list in case other conditions remove it, aka it has been archived\n              prevent: [], // a list of ids that should not appear in the list for whatever reason\n              // parent means this options should all have a common field trait like client_fk, account_fk ....\n              parent: childField.options.parent ? {\n                field: childField.options.parent,\n                value: this.core.entity[ childField.options.parent ]\n              } : null,\n              empty: childField.options.empty ? childField.options.empty : null,\n            } );\n\n            if( autoFill && values.length ){\n              set = values[ values.length - 1 ].value;\n            }else{\n              set = null;\n            }\n            childField.options.values = values;\n            autoFill = autoFill && values.length ? values[ 0 ].value : null;\n\n            this.dom.setTimeout( `clear-message-${child_fk}`, () => {\n              if( typeof childField.triggerOnChange === 'function' ) childField.triggerOnChange( set );\n              if( typeof childField.clearMessage === 'function' ){\n                childField.clearMessage();\n              }\n            }, 0 );\n          }\n        }\n      }\n    }\n  }\n\n\n  /**\n   * Get a linear list of the parent child relations from a given point\n   * @param self the name to start from (usually the field that has just been changed by user)\n   * @param list\n   */\n  private _getRelationList( name: string, list: any[] = [] ){ // recursive loop\n    let item;\n    if( name && name in this.asset.fields ){\n      item = this.asset.fields[ name ];\n      if( IsObject( item, true ) ){\n        list.push( {\n          name: item.name,\n          autoFill: this._fieldHasAutoFill( name ),\n        } );\n        if( this._fieldHasChild( name ) ){\n          this._getRelationList( item.options.child, list );\n        }\n      }\n\n    }\n    return list;\n  }\n\n\n  /**\n   * Determine if field has a child relation in the list\n   * @param name\n   */\n  private _fieldHasChild( name: string ){\n    if( name in this.asset.fields && this.asset.fields[ name ].options ){\n      if( this.asset.fields[ name ].options.child ){\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n\n  /**\n   * Determine if field should be auto filled with the first item in the list\n   * @param name\n   */\n  private _fieldHasAutoFill( name: string ){\n    if( name in this.asset.fields && this.asset.fields[ name ] ){\n      if( this.asset.fields[ name ].autoFill ){\n        return true;\n      }\n    }\n    return false;\n  }\n\n}\n","import { MatTableDataSource } from '@angular/material/table';\nimport { Subject } from 'rxjs';\nimport { PopBaseEventInterface } from '../../../pop-common.model';\n\nexport interface ColumnDefinitionInterface {\n  checkbox?: boolean | { order?: number, sticky?: boolean, visible?: boolean };\n  display?: string;  // The actual name display to be shown. If not passed then will map name through fieldMap.\n  helper?: string | { text?: string, position?: string }; // Any helper text (on hover) this name should have\n  icon?: { type: string, name: string }; // If this name should display an icon instead of the value.\n  link?: boolean | string;      // Highlight name text, and fire route event\n  order?: number;     // The order this name should be in.\n  route?: string;     // The path that will jump to if set. IE: /admin/users/:user_fk\n  internal_name?: string; // portal param\n  sticky?: boolean;   // If this name should be sticky on horizontal scrolling.\n  visible?: boolean;  // If this name should be visible.\n}\n\n\nexport interface TableButtonInterface {\n  id?: string | number;           // For setting the 'type' in table events. If not passed, name will be used.\n  name: string;                   // The name of the button.\n  accessType?: string;             // Requires user to have level of permissons to see button\n  requireSelected?: boolean;      // Makes button available when at least one item in table is selected.\n  requireOneSelected?: boolean;   // Makes button available when only one item is selected.\n  requireNoneSelected?: boolean;  // Makes button available when no items are selected.\n  hidden?: boolean;\n  disabled?: boolean;\n}\n\n\n\n\nexport interface TableOptionsInterface {\n  columns?: Array<string>; // Array of all name names.\n  currentOptions?: {\n    columnDefinitions: { [ key: string ]: ColumnDefinitionInterface };\n    headerDisplay: boolean,\n    headerSticky: boolean,\n    paginator: boolean,\n    search: boolean,\n    searchColumns: boolean,\n    sort: boolean,\n  };\n  defaultOptions: {\n    columnDefinitions: { [ key: string ]: ColumnDefinitionInterface };\n    headerDisplay?: boolean,\n    headerSticky?: boolean,\n    paginator?: number,\n    search?: boolean,\n    searchColumns?: boolean,\n    sort?: boolean,\n  };\n\n  allowColumnDisplayToggle?: boolean; // User is allowed to toggle which columns can be displayed.\n  allowColumnStickyToggle?: boolean;  // User is allowed to toggle which columns are sticky.\n  allowColumnSearchToggle?: boolean;  // User is allowed to toggle name search on/off.\n  allowColumnSortToggle?: boolean;    // User is allowed to toggle name sort on/off.\n  allowHeaderStickyToggle?: boolean;  // User is allowed to toggle sticky header.\n  allowHeaderDisplayToggle?: boolean; // User is allowed to toggle display of header.\n  allowPaginatorToggle?: boolean;     // User is allowed to toggle pagination sizes/on/off.\n}\n\n\nexport class TableOptionsConfig {\n\n  columns = [];\n  currentOptions;\n  defaultOptions;\n\n  allowColumnDisplayToggle = true;\n  allowColumnStickyToggle = true;\n  allowColumnSearchToggle = true;\n  allowColumnSortToggle = true;\n  allowHeaderStickyToggle = true;\n  allowHeaderDisplayToggle = true;\n  allowPaginatorToggle = true;\n\n\n  constructor(params: TableOptionsInterface){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n\n    if( this.defaultOptions.headerDisplay !== false ) this.defaultOptions.headerDisplay = true;\n    if( this.defaultOptions.headerSticky !== false ) this.defaultOptions.headerSticky = true;\n    if( !this.defaultOptions.paginator ) this.defaultOptions.paginator = 0;\n    if( this.defaultOptions.search !== false ) this.defaultOptions.search = true;\n    if( this.defaultOptions.searchColumns !== true ) this.defaultOptions.searchColumns = false;\n    if( this.defaultOptions.sort !== true ) this.defaultOptions.sort = false;\n  }\n}\n\n\n\nexport interface TableInterface {\n  id?: string | number;\n  columnDefinitions?: { [ key: string ]: ColumnDefinitionInterface }; // object of name names and their definitions.\n  buttons?: Array<TableButtonInterface>;  // Array of table buttons.\n  data?: Array<object>;                   // Data set - array of objects.\n  height?: number;                        // static height\n  parentHeight?: string;                  // the height that the table should match\n  headerDisplay?: boolean;                // If header should be displayed.\n  headerSticky?: boolean;                 // If header should be sticky. Can not be on if pagination is on.\n  internal_name?: string;\n  initialSort?: string;                   // Initial name to sort on any time the dataset is updated.\n  initialSortDirection?: 'asc' | 'desc';\n  linkBehavior?: string;                  // Set the default behavior of clicking on links, route, modal, custom\n  metadata?: object;                      // Any metadata object to be returned on all events.\n  advanced_search?: boolean;                  // Set true if you want to override default search functionality. Search event will be triggered instead;\n  options?: TableOptionsConfig;\n  paginator?: boolean;                     // Items per page in pagination. false = off. Can not be on with sticky header.\n  search?: boolean;                       // If main search should be turned on. If on, will over-ride name search.\n  searchValue?:string;                    // Init the search value\n  searchColumns?: boolean;                // Individual name search. Overridden by searchMain\n  sort?: boolean;                         // Column Sort option\n  route?: string;                          // general route to redirect on a name click if the route parameter on the name definition hasn't been set.\n}\n\n\nexport class TableConfig {\n  id;\n  matDataPaginator;\n  selection;\n  // General Params\n  buttons: TableButtonInterface[] = [];\n  columnDefinitions = {};\n  dealWithAngularChangeDetectionFailure = false;\n  data = [];\n  height = 500; // static height px\n  parentHeight?: string; // class name of the outer div that table should match\n  initialSort = null;\n  initialSortDirection:'asc' | 'desc' = 'asc';\n  internal_name?: string;\n  loading = false;\n  metadata = null;\n  options = null;\n  sort = false;\n  route = '';\n  linkBehavior = 'route';\n\n  // Optionable Params\n  //  - These can be toggled in options so if any default are changed here make sure to also subject them in TableOptionsConfig\n  headerDisplay = true;\n  headerSticky = false;\n  paginator = false;\n  search = true;\n  searchValue = '';\n  searchColumns = false;\n  advanced_search = false;\n\n  onEvent: Subject<PopBaseEventInterface>;\n\n  // Built through updates.\n  matData = new MatTableDataSource();\n  columnConfig = { visible: [], templates: {} };\n  updateColumnDefinitions;\n  updateData;\n  applyFilter;\n  clearSelected;\n  reset;\n  setLayout;\n  setHeight;\n\n\n  constructor(params?: TableInterface){\n    if( params ) for( const i in params ) this[ i ] = params[ i ];\n    if( !( [ 'route', 'portal' ].includes(this.linkBehavior) ) ) this.linkBehavior = 'route';\n    // Run these in case params had conflicting info.\n    if( this.paginator ){\n      this.headerSticky = false;\n    }\n  }\n\n}\n","import { ChangeDetectorRef, Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { TableConfig, TableInterface } from '../../base/pop-table/pop-table.model';\nimport { PopEntityService } from '../services/pop-entity.service';\nimport { PopExtendComponent } from '../../../pop-extend.component';\nimport { CoreConfig, PopBaseEventInterface, PopPipe, PopTemplate, ServiceInjector } from '../../../pop-common.model';\nimport { PopPipeService } from '../../../services/pop-pipe.service';\nimport { IsArray, StorageGetter } from '../../../pop-common-utility';\nimport { GetObjectTransformations } from '../pop-entity-utility';\n\n\n@Component( {\n  selector: 'lib-pop-entity-history',\n  templateUrl: './pop-entity-history.component.html',\n  styleUrls: [ './pop-entity-history.component.scss' ]\n} )\nexport class PopEntityHistoryComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() config: TableConfig;\n\n\n  public name = 'PopEntityHistoryComponent';\n\n\n  constructor(\n    public el: ElementRef,\n    public cdr: ChangeDetectorRef,\n  ){\n    super();\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n        this.dom.setHeight( PopTemplate.getContentHeight(), 100 );\n        await this.buildTable();\n        this.dom.state.hasData = IsArray(StorageGetter(this.config, ['matData', 'data'], []), true);\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  buildTable(): Promise<boolean>{\n    return new Promise( ( resolve ) => {\n      this.dom.setSubscriber( 'history-api-call', this.core.repo.getHistory( +this.core.params.entityId ).subscribe(\n        history => {\n          // Build the config.\n          // Prepare and load the data.\n          history = this._prepareTableData( history, this.core.repo.model.field );\n          const tableConfig: TableInterface = {\n            height: this.dom.height.inner,\n            search: true,\n            columnDefinitions: {\n              user: { visible: true, order: 1, internal_name: 'user', route: '/admin/users/:user_fk' },\n              action: { visible: true, order: 2 },\n              message: { visible: true, order: 3 },\n              timestamp: { visible: true, order: 4 },\n            },\n            data: Array.isArray( history ) ? history : [],\n          };\n          this.config = new TableConfig( tableConfig );\n          try{\n            this.cdr.detectChanges();\n          }catch( e ){\n          }\n          return resolve( true );\n\n        },\n        err => {\n          this.dom.error = {\n            code: ( err.error ? err.error.code : err.status ),\n            message: ( err.error ? err.error.message : err.statusText )\n          };\n          try{\n            this.cdr.detectChanges();\n          }catch( e ){\n          }\n          return resolve( false );\n        }\n      ) );\n    } );\n  }\n\n\n  eventHandler( event: PopBaseEventInterface ){\n    if( event.type === 'table' ){\n    }\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  /**\n   * A method that preps entityId list data for tables\n   * @param dataSet\n   * @param fieldMap\n   */\n  private _prepareTableData( dataSet: Array<any>, fieldMap: {} = {}, entityConfig: CoreConfig = null ){\n    // Determine which fields should be acted upon.\n    const transformations = GetObjectTransformations( fieldMap );\n    return IsArray( dataSet, true ) ? dataSet.map( row => PopPipe.transformObjectValues( { ...row }, transformations, entityConfig ) ) : dataSet;\n  }\n}\n","import { Component, Inject, OnDestroy, OnInit } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialog, MatDialogRef } from '@angular/material/dialog';\nimport { PopBaseService } from '../../../../services/pop-base.service';\nimport { PopEntityService } from '../../services/pop-entity.service';\nimport { Subscription } from 'rxjs';\nimport { TableConfig } from '../../../base/pop-table/pop-table.model';\nimport { PopEntityEventService } from '../../services/pop-entity-event.service';\nimport { PopEntityUtilPortalService } from '../../services/pop-entity-util-portal.service';\nimport { CoreConfig, Entity, PopBaseEventInterface, ServiceInjector } from '../../../../pop-common.model';\n\n\nexport interface PopEntityProviderDialogInterface {\n  display?: string;\n  config: CoreConfig;\n  table: TableConfig;\n  resource: Entity;\n}\n\n\n@Component({\n  selector: 'lib-pop-entity-provider-dialog',\n  templateUrl: './pop-entity-provider-dialog.component.html',\n  styleUrls: [ './pop-entity-provider-dialog.component.scss' ]\n})\nexport class PopEntityProviderDialogComponent implements OnInit, OnDestroy {\n  display: string;\n  config: CoreConfig;\n  table: TableConfig;\n  resource: Entity;\n\n\n  constructor(\n    @Inject(MAT_DIALOG_DATA) data: PopEntityProviderDialogInterface,\n    private entityUtilRepo: PopEntityService,\n    private entityPortalRepo: PopEntityUtilPortalService,\n    private baseRepo: PopBaseService,\n    private dialogRepo: MatDialog,\n    public dialog: MatDialogRef<PopEntityProviderDialogComponent>){\n    this.display = data.display;\n    this.config = data.config;\n    this.table = data.table;\n    this.resource = data.resource;\n  }\n\n\n  state = {\n    blockModal: false,\n    assignmentChange: false,\n    changed: false\n  };\n\n  subscriber = {\n    crud: <Subscription>undefined,\n    dialog: <Subscription>undefined,\n  };\n\n\n  ngOnInit(){\n    if( !this.display ) this.display = this.getDisplay();\n    this.subscriber.crud = ServiceInjector.get(PopEntityEventService).events.subscribe((event) => this.crudEventHandler(event));\n    this.subscriber.dialog = this.dialog.beforeClosed().subscribe(_ => {\n      this.dialog.close(this.state.changed);\n    });\n  }\n\n\n  getDisplay(){\n    const entityName = this.config.entity.display_name ? this.config.entity.display_name : this.config.entity.name;\n    const resourceType = this.resource.entity ? this.resource.entity : 'Entity';\n    const resourceName = this.resource.name ? this.resource.name : 'Resource';\n    return `${entityName} - (${resourceName} - ${resourceType} ) - Provider List`;\n  }\n\n\n  crudEventHandler(event: PopBaseEventInterface){\n    console.log('crudEventHandler', event);\n    if( event.method === 'create' || event.method === 'delete' ){\n      this.state.changed = true;\n    }else{\n      if( event.type === 'entity' ){\n        if( event.name === 'archive' ){\n          this.state.changed = true;\n        }\n      }else if( event.type === 'field' && event.name === 'patch' ){\n        const patch = {};\n        patch[ event.config.column ] = event.config.control.value;\n        const signature = event.config.metadata;\n        const signatureMatches = this.table.matData.data.filter(function(row, i){\n          return ( ( row[ 'internal_name' ] === signature.internal_name && +row[ 'id' ] === +signature.id ) );\n        });\n        if( Array.isArray(signatureMatches) && signatureMatches.length ){\n          signatureMatches.map((row) => {\n            Object.keys(patch).map((column) => {\n              if( column in row ){\n                row[ column ] = patch[ column ];\n                this.state.changed = true;\n              }\n            });\n          });\n        }\n      }else if( event.type === 'sidebyside' && event.name === 'patch' ){\n        const signature = { ...event.config.metadata };\n        const signatureMatches = this.table.matData.data.filter(function(row, i){\n          return ( ( row[ 'internal_name' ] === signature.internal_name && +row[ 'id' ] === +signature.id ) );\n        });\n        if( Array.isArray(signatureMatches) && signatureMatches.length ){\n          this.state.changed = true;\n          this.state.assignmentChange = true;\n        }\n      }\n    }\n  }\n\n\n  eventHandler(event: PopBaseEventInterface){\n    if( event.type === 'table' ){\n      switch( event.data.link ){\n        case 'provider':\n          this.viewEntityPortal(event.data.row.internal_name, +event.data.row.id);\n          break;\n        default:\n          break;\n      }\n    }\n  }\n\n\n  viewEntityPortal(internal_name: string, id: number){\n    // placeholder\n    this.entityPortalRepo.view(internal_name, id);\n  }\n\n\n  cancel(){\n    this.dialog.close(this.state.changed);\n  }\n\n\n  ngOnDestroy(){\n    Object.keys(this.subscriber).map((name) => {\n      if( this.subscriber[ name ] ){\n        this.subscriber[ name ].unsubscribe();\n      }\n    });\n  }\n\n}\n","import { ChangeDetectorRef, Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { TableConfig } from '../../base/pop-table/pop-table.model';\nimport { PopBaseService } from '../../../services/pop-base.service';\nimport { PopEntityTabMenuComponent } from '../pop-entity-tab-menu/pop-entity-tab-menu.component';\nimport { PopEntityService } from '../services/pop-entity.service';\nimport { PopTabMenuService } from '../../base/pop-tab-menu/pop-tab-menu.service';\nimport { PopEntityProviderDialogComponent, PopEntityProviderDialogInterface } from './pop-entity-provider-dialog/pop-entity-provider-dialog.component';\nimport { CoreConfig, Dictionary, Entity, EntityParams, PopBaseEventInterface, PopPipe, PopTemplate, ServiceInjector } from '../../../pop-common.model';\nimport { PopEntityEventService } from '../services/pop-entity-event.service';\nimport { MatDialog } from '@angular/material/dialog';\nimport { PopExtendComponent } from '../../../pop-extend.component';\nimport { PopDomService } from '../../../services/pop-dom.service';\nimport {\n  ArrayOnlyUnique,\n  ArrayRemoveDupliates,\n  DeepCopy,\n  IsArray,\n  IsObject,\n  IsObjectThrowError,\n  IsString,\n  SnakeToPascal,\n  StorageGetter,\n  TitleCase\n} from '../../../pop-common-utility';\nimport { GetTabMenuConfig } from '../pop-entity-utility';\n\n\n@Component( {\n  selector: 'lib-pop-entity-assignments',\n  templateUrl: './pop-entity-assignments.component.html',\n  styleUrls: [ './pop-entity-assignments.component.scss' ],\n\n} )\nexport class PopEntityAssignmentsComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() private fieldType: string;\n  @Input() public header: string;\n\n  public name = 'PopEntityAssignmentsComponent';\n\n  protected srv = {\n    base: <PopBaseService>ServiceInjector.get( PopBaseService ),\n    dialog: <MatDialog>ServiceInjector.get( MatDialog ),\n    events: <PopEntityEventService>ServiceInjector.get( PopEntityEventService ),\n    entity: <PopEntityService>ServiceInjector.get( PopEntityService ),\n    tab: <PopTabMenuService>undefined,\n  };\n\n  protected asset = {\n    entityParamsMap: <Dictionary<EntityParams>>{},\n    assignedUserMap: undefined\n  };\n\n\n  constructor(\n    public el: ElementRef,\n    public  cdr: ChangeDetectorRef,\n    protected _domRepo: PopDomService,\n    protected _tabRepo: PopTabMenuService,\n  ){\n    super();\n    /**\n     * This should transformValue and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n\n\n        // #1: Enforce a CoreConfig\n        this.core = IsObjectThrowError( this.core, true, `${this.name}:configureDom: - this.core` ) ? this.core : null;\n        this.dom.state = {\n          ...this.dom.state, ...{\n            directBaseline: false,\n            dataHasDirect: false,\n            dataHasParent: false,\n            dataHasProviders: false,\n            dataHasType: false,\n            blockModal: false,\n            loaded: false,\n            loading: true,\n            error: { code: 0, message: '' },\n          }\n        };\n        this.ui.table = {\n          config: <TableConfig>undefined,\n        };\n        this.dom.setHeight( PopTemplate.getContentHeight(), 100 );\n        this.buildTable();\n        this.dom.state.hasData = IsArray(StorageGetter(this.ui.table.config, ['matData', 'data'], []), true);\n        return resolve( true );\n      } );\n    };\n\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  buildTable(){\n    let parentLabel;\n    const isDialogLimit = this.srv.dialog.openDialogs.length > 3;\n    if( this.core && this.core.params ) this.core.params.refresh = false;\n    const columnDefinitions = {};\n    // this.subscribers.entity = this.entityRepo.events.subscribe((e) => this.crudEventHandler(e));\n    if( this.fieldType && String( this.fieldType ).includes( 'assigned_' ) === false ) this.fieldType = `assigned_${this.fieldType}`;\n    // this.fieldType should reference a entity.metadata key <'assigned_XXXXXX'> if not this.fieldType grab anything with the 'assigned_' prefix in entity.metadata;\n    const data = this.getTableData();\n    if( this.fieldType && this.dom.state.dataHasParent ){\n      parentLabel = TitleCase( SnakeToPascal( PopPipe.transform( data[ 0 ].parent.internal_name, { type: 'entity', arg1: 'alias', arg2: 'singular' } ) ) ).trim();\n    }\n\n    this.ui.table.config = new TableConfig( {\n      height: this.dom.height.outer,\n      paginator: false,\n      search: data.length >= 10 ? true : false,\n      searchColumns: false,\n      columnDefinitions: {\n        name: {\n          visible: true,\n          helper: isDialogLimit ? null : { text: 'Jump To: <name>', position: 'right' },\n          link: isDialogLimit ? false : 'entity',\n          order: 0,\n        },\n        entity: {\n          visible: !this.fieldType ? true : false,\n          order: 1,\n        },\n\n        direct: {\n          visible: this.dom.state.dataHasDirect ? true : false,\n          order: 2,\n        },\n        type: {\n          visible: this.dom.state.dataHasType ? true : false,\n          order: 3,\n        },\n        parent_name: {\n          visible: this.fieldType && this.dom.state.dataHasParent && parentLabel ? true : false,\n          display: parentLabel,\n          link: 'parent',\n          order: 4,\n        },\n        has_providers: {\n          display: 'Provider',\n          visible: this.dom.state.dataHasProviders ? true : false,\n          link: 'providers',\n          // helper: { text: 'Jump To: <name>', position: 'right' },\n          order: 5,\n        },\n        // assigned: {\n        //   visible: true,\n        //   link: 'section_users',\n        //   // helper: { text: 'Jump To: <name>', position: 'right' },\n        //   order: 4,\n        // },\n        // id: {\n        //   visible: this.fieldType ? true : false,\n        //   order: 100,\n        // },\n      },\n      data: data,\n    } );\n    this.dom.state.loading = false;\n    this.dom.state.loaded = true;\n    try{\n      this.cdr.detectChanges();\n    }catch( e ){\n    }\n  }\n\n\n  crudEventHandler( event: PopBaseEventInterface ){\n    if( this.dom.subscriber.dialog ){\n      if( event.method === 'create' || event.method === 'delete' ){\n        if( this.core && this.core.params ) this.core.params.refresh = true;\n      }else if( event.method === 'update' ){\n        if( event.type === 'entity' ){\n          if( event.name === 'archive' ){\n            if( this.core && this.core.params ) this.core.params.refresh = true;\n          }\n        }else if( ( event.type === 'field' || event.type === 'sidebyside' ) && event.name === 'patch' ){\n          if( this.core && this.core.params ) this.core.params.refresh = true;\n        }\n      }\n    }\n  }\n\n\n  getKeyInternalName( key: string ){\n    return String( key ).replace( /(pt_leader|pt_member|_fk|assigned_)/g, '' );\n  }\n\n\n  getEntityParams( key: string, id: number = null ): EntityParams{\n    let entityParams;\n    key = this.getKeyInternalName( key );\n    if( key in this.asset.entityParamsMap ){\n      return this.asset.entityParamsMap[ key ];\n    }\n    if( key === 'user' ){\n      entityParams = <EntityParams>{\n        app: 'admin',\n        internal_name: 'user',\n        api: 'user',\n      };\n    }else{\n      entityParams = this.srv.entity.getEntityParams( key );\n    }\n    if( !entityParams ){\n      entityParams = this.srv.entity.getEntityParamsWithPath( key );\n    }\n    this.asset.entityParamsMap[ key ] = entityParams;\n\n    if( this.log.repo.enabled() ) console.log( this.log.repo.message( 'PopEntityAssignmentsComponent:entityParams' ), this.log.repo.color( 'info' ), DeepCopy( this.asset.entityParamsMap[ key ] ) );\n    return DeepCopy( this.asset.entityParamsMap[ key ] );\n  }\n\n\n  getTableData(){\n    this.asset.assignedUserMap = {};\n    const data = [];\n    let rows;\n    let userRows = [];\n    let user;\n    if( this.core && this.core.entity && IsObject( this.core.entity.metadata, true ) ){\n      if( IsString( this.fieldType, true ) ){\n        if( IsArray( this.core.entity.metadata[ this.fieldType ], true ) ){\n          rows = this.core.entity.metadata[ this.fieldType ].map( ( row ) => {\n            return this.transformRow( this.fieldType, row );\n          } );\n          if( this.fieldType.includes( 'user' ) === false ){ // users are handled special because they inherit assignments from multiple sources\n            data.push( ...rows );\n          }else{\n            userRows = rows;\n          }\n        }\n      }else{\n        Object.keys( this.core.entity.metadata ).map( ( key: string ) => {\n          if( key && String( key ).includes( 'assigned_' ) && this.getEntityParams( key ) && IsArray( this.core.entity.metadata[ key ], true ) ){\n            rows = this.core.entity.metadata[ key ].map( ( row ) => {\n              return this.transformRow( key, row );\n            } );\n            if( key.includes( 'user' ) === false ){ // users are handled special because they inherit assignments from multiple sources\n              data.push( ...rows );\n            }else{\n              userRows = rows;\n            }\n          }\n        } );\n      }\n    }\n    if( IsArray( userRows, true ) ){\n      userRows.map( ( row ) => {\n        if( row.id in this.asset.assignedUserMap ) this.asset.assignedUserMap[ row.id ].direct = true;\n      } );\n    }\n\n    if( IsObject( this.asset.assignedUserMap, true ) ){\n      rows = Object.keys( this.asset.assignedUserMap ).map( ( id ) => {\n        user = this.asset.assignedUserMap[ id ];\n        return {\n          id: +id,\n          internal_name: 'user',\n          name: user.name,\n          entity: 'User',\n          direct: user.direct,\n          providers: user.providers,\n\n        };\n      } );\n      data.push( ...rows );\n\n    }\n\n    data.sort( function( a, b ){\n      // Sort by Entity\n      if( a.entity > b.entity ) return 1;\n      if( a.entity < b.entity ) return -1;\n      // Sort by Title\n      if( a.name > b.name ) return 1;\n      if( a.name < b.name ) return -1;\n    } );\n    data.map( ( row ) => {\n      if( !this.dom.state.directBaseline ) this.dom.state.directBaseline = row.direct;\n      if( row.direct !== this.dom.state.directBaseline ) this.dom.state.dataHasDirect = true;\n      if( row.parent ){\n        row.parent_name = row.parent.name;\n        this.dom.state.dataHasParent = true;\n      }\n      row.has_providers = IsArray( row.providers, true ) ? 'Yes' : null;\n      if( row.has_providers ){\n        this.dom.state.dataHasProviders = true;\n        row.providers = ArrayRemoveDupliates( row.providers, 'uid' );\n        row.has_providers = this.getProvidersName( row.providers );\n        row.providers.map( ( provider ) => {\n          if( provider.internal_name ) provider.entityId = TitleCase( SnakeToPascal( PopPipe.transform( provider.internal_name, {\n            type: 'entity',\n            arg1: 'alias',\n            arg2: 'singular'\n          } ) ) ).trim();\n          if( provider.type ) provider.type = TitleCase( SnakeToPascal( provider.type ) ).trim();\n          if( provider.direct ) row.direct = true;\n        } );\n      }\n      row.direct = row.direct ? 'Yes' : 'No';\n      if( row.type ){\n        this.dom.state.dataHasType = true;\n        row.type = TitleCase( SnakeToPascal( row.type ) ).trim();\n      }\n    } );\n    if( this.log.repo.enabled() ) console.log( this.log.repo.message( 'PopEntityAssignmentsComponent:data' ), this.log.repo.color( 'data' ), data );\n    return data;\n  }\n\n\n  assignUsers( users: Entity[], provider: object ){\n    if( IsArray( users, true ) ){\n      users.map( ( user ) => {\n        if( +user.id && user.name ){\n          if( !this.asset.assignedUserMap[ user.id ] ) this.asset.assignedUserMap[ user.id ] = { id: user.id, name: user.name, direct: false, providers: [] };\n          this.asset.assignedUserMap[ user.id ].providers.push( provider );\n        }\n      } );\n    }\n  }\n\n\n  getProvidersName( providers: any[] ){\n    let types = [];\n    if( IsArray( providers, true ) ){\n      providers.map( ( provider ) => {\n        if( provider.internal_name ) types.push( TitleCase( SnakeToPascal( PopPipe.transform( provider.internal_name, {\n          type: 'entity',\n          arg1: 'alias',\n          arg2: 'singular'\n        } ) ) ).trim() );\n      } );\n      types = ArrayOnlyUnique( types );\n      types.sort();\n    }\n    if( this.log.repo.enabled() ) console.log( this.log.repo.message( 'PopEntityAssignmentsComponent:providersName' ), this.log.repo.color( 'info' ), IsArray( types, true ) ? types.join( ', ' ) : 'Yes' );\n    return IsArray( types, true ) ? types.join( ', ' ) : 'Yes';\n  }\n\n\n  transformRow( key: string, row: Entity ){\n    const entityParams = this.getEntityParams( key );\n    // entityParams.entity = row.id;\n    // console.log('entityParams', entityParams);\n    let direct = row.direct ? true : false;\n\n    let providers = IsArray( row.providers, true ) ? row.providers : [];\n    let provider;\n    const keyInternalName = this.getKeyInternalName( key );\n    row.internal_name = keyInternalName;\n    const entity = TitleCase( SnakeToPascal( PopPipe.transform( keyInternalName, { type: 'entity', arg1: 'alias', arg2: 'singular' } ) ) ).trim();\n    let type = row.type ? row.type : '';\n    if( entityParams.internal_name ){\n      const matches = Object.keys( row ).filter( ( field: string ) => {\n        if( field.includes( this.core.params.internal_name ) && +row[ field ] === +this.core.params.entityId ){\n          return true;\n        }\n      } );\n\n      switch( row.internal_name ){\n        case 'pod_type':\n          if( IsArray( matches, true ) ){\n            direct = true;\n          }\n          if( IsArray( row.pods ) ){\n            row.pods.map( ( pod ) => {\n              if( pod.assigned_leaders ) this.assignUsers( pod.assigned_leaders, {\n                id: +pod.id,\n                name: pod.name,\n                entity: entity,\n                type: 'Leader',\n                internal_name: 'pod',\n                uid: `pod_${pod.id}_leader`\n              } );\n              if( pod.assigned_members ) this.assignUsers( pod.assigned_members, {\n                id: +pod.id,\n                name: pod.name,\n                entity: entity,\n                type: 'Member',\n                internal_name: 'pod',\n                uid: `pod_${pod.id}_member`\n              } );\n            } );\n          }\n          break;\n        case 'pod':\n          matches.map( ( matchFieldName ) => {\n            if( IsArray( matches, true ) ){\n              if( this.core.params.internal_name === 'security_profile' ){\n                type = String( matchFieldName ).includes( 'leader' ) ? 'Leader' : 'Member';\n                if( String( matchFieldName ).includes( 'pt_' ) ){\n                  provider = { id: row.pod_type_fk, name: row.pod_type, internal_name: 'pod_type', type: type, uid: `pod_type_${row.pod_type_fk}_${type}` };\n                  providers = [ provider ];\n                }else{\n                  direct = true;\n                }\n              }\n            }\n\n            if( row.assigned_leaders ) this.assignUsers( row.assigned_leaders, {\n              id: row.id,\n              name: row.name,\n              entity: entity,\n              type: 'Leader',\n              internal_name: 'pod',\n              uid: `pod_${row.id}_leader`\n            } );\n            if( row.assigned_members ) this.assignUsers( row.assigned_members, {\n              id: row.id,\n              name: row.name,\n              entity: entity,\n              type: 'Member',\n              internal_name: 'pod',\n              uid: `pod_${row.id}_member`\n            } );\n          } );\n          break;\n        case 'role':\n          if( IsArray( matches, true ) ){\n            direct = true;\n            if( row.assigned_user ) this.assignUsers( row.assigned_user, {\n              id: +row.id,\n              name: row.name,\n              entity: entity,\n              internal_name: 'role',\n              uid: `role_${row.id}`\n            } );\n          }\n\n          break;\n        case 'user':\n          if( IsArray( matches, true ) ){\n            direct = true;\n            this.assignUsers( [ row ], { id: +row.id, name: row.name, entity: entity, internal_name: 'user', type: 'User', uid: `user_${row.id}_${type}` } );\n          }\n          break;\n        default:\n          break;\n      }\n    }\n\n    return {\n      id: row.id,\n      internal_name: row.internal_name,\n      name: row.display_name ? row.display_name : row.name,\n      parent: row.parent,\n      entity: TitleCase( SnakeToPascal( PopPipe.transform( keyInternalName, { type: 'entity', arg1: 'alias', arg2: 'singular' } ) ) ).trim(),\n      direct: direct,\n      type: type,\n      providers: providers,\n      uid: type ? `${keyInternalName}_${row.id}_${type}` : `${keyInternalName}_${row.id}`\n    };\n  }\n\n\n  eventHandler( event: PopBaseEventInterface ){\n    if( event.type === 'table' ){\n      if( this.log.repo.enabled() ) console.log( this.log.repo.message( 'PopEntityAssignmentsComponent:event' ), this.log.repo.color( 'event' ), event );\n      switch( event.data.link ){\n        case 'entity':\n          this.viewEntityPortal( event.data.row.internal_name, +event.data.row.id );\n          break;\n        case 'parent':\n          if( event.data.row && event.data.row.parent ){\n            this.viewEntityPortal( event.data.row.parent.internal_name, +event.data.row.parent.id );\n          }\n          break;\n        case 'providers':\n          this.viewRowProviders( event.data.row );\n          break;\n        default:\n          break;\n      }\n    }\n  }\n\n\n  viewEntityPortal( internal_name: string, id: number ){\n    // placeholder\n    if( !this.dom.state.blockModal ){\n      this.dom.state.blockModal = true;\n      if( internal_name && +id ){\n        this.srv.entity.getCoreConfig( internal_name, +id ).then( ( entityConfig: CoreConfig ) => {\n          let tabMenuConfig = this._buildTabMenuConfig( entityConfig );\n          tabMenuConfig.portal = true;\n          let dialogRef = this.srv.dialog.open( PopEntityTabMenuComponent, {\n            width: `${window.innerWidth - 20}px`,\n            height: `${window.innerHeight - 50}px`,\n            data: entityConfig,\n            panelClass: 'sw-relative'\n          } );\n          let component = <PopEntityTabMenuComponent>dialogRef.componentInstance;\n          component.registerTabMenuConfig( tabMenuConfig );\n          this.dom.subscriber.dialog = dialogRef.beforeClosed().subscribe( () => {\n            this.dom.state.blockModal = false;\n            this.srv.tab.refreshEntity( this.core.params.entityId, null, {}, 'PopEntityAssignmentsComponent:viewEntityPortal' ).then( () => {\n              dialogRef = null;\n              tabMenuConfig = null;\n              component = null;\n            } );\n          } );\n        } );\n      }\n    }\n  }\n\n\n  viewRowProviders( row: any ){\n    if( !this.dom.state.blockModal ){\n      this.dom.state.blockModal = true;\n      const data = [];\n      const tableConfig = new TableConfig( {\n        search: false,\n        searchColumns: false,\n        headerSticky: true,\n        // paginator: 5,\n        columnDefinitions: {\n          name: {\n            visible: true,\n            helper: { text: 'Jump To: <name>', position: 'right' },\n            link: 'provider',\n            order: 0,\n          },\n\n          entity: {\n            visible: true,\n            // link: 'assigned',\n            // helper: { text: 'Jump To: <name>', position: 'right' },\n            order: 1,\n          },\n\n          type: {\n            visible: true,\n            // link: 'assigned',\n            // helper: { text: 'Jump To: <name>', position: 'right' },\n            order: 2,\n          },\n          id: {\n            visible: true,\n            order: 100,\n          },\n        },\n        data: row.providers\n      } );\n\n\n      const dialogRef = this.srv.dialog.open( PopEntityProviderDialogComponent, {\n        data: <PopEntityProviderDialogInterface>{\n          table: tableConfig,\n          config: this.core,\n          resource: row,\n        }\n      } );\n\n      this.dom.setSubscriber( 'pop-table-dialog-close', dialogRef.beforeClosed().subscribe( ( changed ) => {\n        this.dom.state.blockModal = false;\n        if( true ){\n          this.srv.tab.refreshEntity( null, this.dom.repo, {}, 'PopEntityAssignmentsComponent:viewRowProviders' ).then( () => true );\n        }\n      } ) );\n    }\n  }\n\n\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  private _buildTabMenuConfig( core: CoreConfig ){\n    return GetTabMenuConfig( core, this.srv.entity.getEntityTabs( core ) );\n  }\n\n\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { PopExtendComponent } from '../../../../pop-extend.component';\nimport { PopDomService } from '../../../../services/pop-dom.service';\nimport { PopFieldEditorService } from '../pop-entity-field-editor.service';\nimport { IsObject, IsObjectThrowError, StorageGetter, StorageSetter } from '../../../../pop-common-utility';\nimport { Dictionary, FieldInterface, PopBaseEventInterface } from '../../../../pop-common.model';\nimport { EntitySchemeSectionInterface } from '../../pop-entity-scheme/pop-entity-scheme.model';\n\n\n@Component( {\n  selector: 'lib-pop-entity-field-settings',\n  templateUrl: './pop-entity-field-settings.component.html',\n  styleUrls: [ './pop-entity-field-settings.component.scss' ],\n} )\nexport class PopEntityFieldSettingsComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() field: FieldInterface;\n  @Input() scheme: EntitySchemeSectionInterface;\n  public name = 'PopEntityFieldSettingsComponent';\n\n\n  protected srv = {\n    field: <PopFieldEditorService>undefined,\n  };\n\n  protected asset = {\n    schemeFieldSetting: <Dictionary<any>>{},\n  };\n\n\n  /**\n   * @param el\n   * @param _domRepo - transfer\n   * @param _fieldRepo - transfer\n   */\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService,\n    protected _fieldRepo: PopFieldEditorService,\n  ){\n    super();\n\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n        this.core = IsObjectThrowError( this.core, true, `${this.name}:configure: - this.core` ) ? this.core : null;\n        this.field = <FieldInterface>this.core.entity;\n        if( StorageGetter( this.dom, [ 'repo', 'position', String( this.position ), 'height' ], false ) ){\n          this.dom.overhead = 60;\n          this.dom.height.outer = +this.dom.repo.position[ this.position ].height - 300;\n          this.dom.setHeight( this.dom.repo.asset[ this.dom.height.outer ], this.dom.overhead );\n        }\n        if( IsObject( this.scheme ) ){\n          this.asset.schemeFieldSetting = this.srv.field.getSchemeFieldSetting( this.scheme, +this.field.id );\n//           console.log( 'scheme field', this.asset.schemeFieldSetting );\n        }\n        this.dom.state.hasScheme = IsObject( this.scheme, true ) ? true : false;\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n}\n","import { Component, ElementRef, HostListener, Input, OnDestroy, OnInit, ViewChild, ViewContainerRef } from '@angular/core';\nimport { PopExtendDynamicComponent } from '../../../../pop-extend-dynamic.component';\nimport { PopDomService } from '../../../../services/pop-dom.service';\nimport { EntitySchemeSectionInterface } from '../pop-entity-scheme.model';\nimport { InputConfig } from '../../../base/pop-field-item/pop-input/input-config.model';\nimport { CoreConfig, Dictionary, FieldCustomSettingInterface, FieldInterface, PopBaseEventInterface, PopEntity, PopPipe } from '../../../../pop-common.model';\nimport { PopFieldEditorService } from '../../pop-entity-field-editor/pop-entity-field-editor.service';\nimport { SwitchConfig } from '../../../base/pop-field-item/pop-switch/switch-config.model';\nimport { IsArray, IsNumber, IsObject, IsString, StorageGetter, StorageSetter } from '../../../../pop-common-utility';\nimport { PopEntitySchemeService } from '../pop-entity-scheme.service';\nimport { MatDialogRef } from '@angular/material/dialog';\nimport { PopEntityFieldSettingsComponent } from '../../pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-settings.component';\nimport { PopEntityUtilFieldService } from '../../services/pop-entity-util-field.service';\n\n\n@Component( {\n  selector: 'lib-pop-entity-scheme-field-setting',\n  templateUrl: './pop-entity-scheme-field-setting.component.html',\n  styleUrls: [ './pop-entity-scheme-field-setting.component.scss' ],\n  providers: [ PopFieldEditorService, PopDomService ],\n} )\nexport class PopEntitySchemeFieldSettingComponent extends PopExtendDynamicComponent implements OnInit, OnDestroy {\n  @ViewChild( 'container', { read: ViewContainerRef, static: true } ) public container;\n  @Input() config: EntitySchemeSectionInterface = <EntitySchemeSectionInterface>{};\n\n  public name = 'PopEntitySchemeFieldSettingComponent';\n\n\n  protected srv = {\n    field: <PopFieldEditorService>undefined,\n    utilField: <PopEntityUtilFieldService>undefined,\n  };\n\n  protected asset = {\n    currentFieldTraitEntryMapping: <any>undefined,\n    currentPrimary: <any>undefined,\n    fieldTraitEntryMapping: <any>undefined,\n    fieldCore: <CoreConfig>undefined,\n    field: <FieldInterface>undefined,\n    scheme: <EntitySchemeSectionInterface>undefined,\n    storage: <any>undefined,\n  };\n\n  public ui = {\n    name: <InputConfig>undefined,\n\n    makePrimary: <SwitchConfig>undefined,\n\n    showName: <SwitchConfig>undefined,\n    showNameCore: <CoreConfig>undefined,\n    profileRequired: <SwitchConfig>undefined,\n  };\n\n\n  @HostListener( 'document:keydown.escape', [ '$event' ] ) onEscapeHandler( event: KeyboardEvent ){\n    console.log( 'esc', event );\n    this.onFormClose();\n  }\n\n\n  constructor(\n    public el: ElementRef,\n    public dialog: MatDialogRef<PopEntitySchemeFieldSettingComponent>,\n    protected _domRepo: PopDomService,\n    protected _fieldRepo: PopFieldEditorService,\n    protected _utilFieldRepo: PopEntityUtilFieldService,\n  ){\n    super();\n\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n\n        await this._setInitialConfig();\n        this.template.attach( 'container' );\n\n\n        this._templateRender();\n\n\n        return resolve( true );\n      } );\n    };\n\n\n  }\n\n\n  onFormClose(){\n    if( IsObject( this.dialog ) ){\n      this.dialog.close( this.core.entity );\n    }\n  }\n\n\n  onOutsideCLick(){\n    console.log( 'onOutsideCLick' );\n    // if( IsObject( this.dialog ) ){\n    //   this.dialog.close(this.config);\n    // }\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  private _setInitialConfig(): Promise<boolean>{\n    return new Promise( async( resolve ) => {\n\n      this.asset.fieldCore = await PopEntity.getCoreConfig( 'field', this.config.asset_id );\n      this.asset.field = <FieldInterface>this.asset.fieldCore.entity;\n      this.asset.scheme = <EntitySchemeSectionInterface>this.core.entity;\n      // this.asset.scheme.traits = this.srv.field.getFieldTraits( this.asset.field.fieldgroup.name );\n      this.dom.state.isMultipleValues = +this.asset.field.multiple === 1;\n      await this.srv.field.register( this.asset.fieldCore, this.dom.repo, this.asset.scheme );\n      this.ui.showName = StorageGetter( this.dom.repo, 'ui.customSetting.show_name.inputs.config'.split( '.' ), null );\n      this.ui.showNameCore = StorageGetter( this.dom.repo, 'ui.customSetting.show_name.inputs.core'.split( '.' ), null );\n\n      this.srv.utilField.clearCustomFieldCache( +this.core.entity.id );\n\n\n      this.ui.name = new InputConfig( {\n        name: 'label',\n        label: 'Name',\n        value: this.config.asset.label,\n        readonly: true,\n        facade: true,\n        patch: {\n          field: 'label',\n          path: ''\n        }\n      } );\n\n      if( 'make_primary' in this.asset.field.setting ){\n        const primary = this.srv.field.getSchemePrimary( this.asset.scheme );\n        const fieldGroupName = StorageGetter( this.asset.field, [ 'fieldgroup', 'name' ] );\n        const isPrimary = +primary[ fieldGroupName ] === +this.asset.field.id;\n        this.asset.currentPrimary = IsNumber( primary[ fieldGroupName ] ) ? +primary[ fieldGroupName ] : null;\n        this.asset.currentFieldTraitEntryMapping = this.srv.field.getSchemeFieldSection( this.asset.scheme, +this.asset.field.id, 'trait_entry' );\n        this.asset.storage = this.srv.field.getSchemeFieldSetting( this.asset.scheme, +this.asset.field.id );\n        // console.log( 'currentPrimary', this.asset.currentPrimary );\n        // console.log( 'currentFieldEntityMapping', this.asset.currentFieldTraitEntryMapping );\n\n\n        this.asset.fieldTraitEntryMapping = {};\n        if( IsArray( this.asset.field.trait, true ) ){\n          this.asset.field.trait.map( ( trait ) => {\n            this.asset.fieldTraitEntryMapping[ trait.name ] = this.asset.field.entries[ 0 ].id;\n          } );\n        }\n        // console.log( 'fieldTraitEntryMapping', this.asset.fieldTraitEntryMapping );\n        if( IsObject( primary ) && IsString( fieldGroupName, true ) ){\n          this.ui.makePrimary = new SwitchConfig( {\n            label: `Primary ${this.asset.field.fieldgroup.label}`,\n            value: isPrimary,\n            disabled: isPrimary,\n            facade: true,\n            patch: {\n              field: '',\n              path: '',\n              callback: async( core: CoreConfig, event: PopBaseEventInterface ) => {\n                this.dom.setTimeout( `update-primary`, async() => {\n                  if( event.config.control.value ){\n                    primary[ fieldGroupName ] = +this.asset.field.id;\n                    this.asset.storage.entity_trait = this.asset.fieldTraitEntryMapping;\n                  }else{\n                    primary[ fieldGroupName ] = this.asset.currentPrimary;\n                    this.asset.storage.entity_trait = this.asset.currentFieldTraitEntryMapping;\n                  }\n                  await this.srv.field.updateSchemePrimaryMapping( this.asset.scheme );\n                  this._templateRender();\n                } );\n\n              }\n            }\n          } );\n        }\n      }\n      const required = <number[]>this.srv.field.getSchemeRequired( this.asset.scheme );\n      const isRequired = required.includes( +this.asset.field.id );\n      this.ui.profileRequired = new SwitchConfig( {\n        label: `Required To Save ${PopPipe.transform( 'profile', { type: 'entity', arg1: 'alias', arg2: 'singular' } )}`,\n        value: isRequired,\n        facade: true,\n        patch: {\n          field: '',\n          path: '',\n          callback: ( core: CoreConfig, event: PopBaseEventInterface ) => {\n            if( event.config.control.value ){\n              required.push( +this.asset.field.id );\n            }else{\n              required.splice( required.indexOf( +this.asset.field.id ) );\n            }\n            this.srv.field.updateSchemeRequiredMapping( this.asset.scheme );\n          }\n        }\n      } );\n\n      return resolve( true );\n    } );\n\n  }\n\n\n  /**\n   * Helper function that renders the list of dynamic components\n   *\n   */\n  private _templateRender(){\n    this.template.render( [ {\n      type: PopEntityFieldSettingsComponent,\n      inputs: {\n        core: this.asset.fieldCore,\n        field: this.asset.field,\n        scheme: this.asset.scheme\n      }\n    } ], [], true );\n  }\n\n}\n","import {Injectable, OnDestroy} from '@angular/core';\nimport {CdkDrag, CdkDragDrop, moveItemInArray, transferArrayItem} from '@angular/cdk/drag-drop';\nimport {MatDialog} from '@angular/material/dialog';\n\nimport {PopDomService} from '../../../services/pop-dom.service';\nimport {PopTabMenuService} from '../../base/pop-tab-menu/pop-tab-menu.service';\nimport {TabConfig} from '../../base/pop-tab-menu/tab-menu.model';\nimport {CheckboxConfig} from '../../base/pop-field-item/pop-checkbox/checkbox-config.model';\n\nimport {PopExtendService} from '../../../services/pop-extend.service';\nimport {\n  CoreConfig,\n  Dictionary,\n  FieldInterface,\n  KeyMap,\n  PopBusiness,\n  PopLog,\n  PopRequest,\n  ServiceInjector\n} from '../../../pop-common.model';\nimport {\n  ArrayKeyBy, ArrayOnlyUnique,\n  CleanObject,\n  DeepCopy,\n  DynamicSort,\n  IsArray, IsArrayThrowError,\n  IsDefined,\n  IsObject,\n  IsObjectThrowError,\n  IsString, JsonCopy,\n  PopUid,\n  StorageGetter, StorageSetter\n} from '../../../pop-common-utility';\nimport {EntitySchemeSectionConfig, EntitySchemeSectionInterface} from './pop-entity-scheme.model';\nimport {forkJoin, Subject} from 'rxjs';\nimport {ParseModelValue} from '../pop-entity-utility';\nimport {PopEntitySchemeFieldSettingComponent} from './pop-entity-scheme-field-setting/pop-entity-scheme-field-setting.component';\nimport {PopEntityActionService} from '../services/pop-entity-action.service';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PopEntitySchemeService extends PopExtendService implements OnDestroy {\n  public name = 'PopEntitySchemeService';\n\n  protected srv: {\n    action: PopEntityActionService,\n    dialog: MatDialog,\n    tab: PopTabMenuService,\n  };\n\n  public ui = {\n    refresh: new Subject<string>(),\n    attachedMap: {}, // the map of assets that are already attached to a section of the scheme\n    assetPool: <Dictionary<any>>{},\n    assignableConfigs: {}, // a collection map of checkbox configs that are used to move an asset into the attaching state\n    primary: <Dictionary<number>>{},\n    primaryIds: <number[]>[],\n    sections_keys: [],\n    sections: <any[]>undefined\n  };\n\n  protected asset = {\n    attachingSet: {}, // the map of assets that are in a state of being attached\n    assetMap: {\n      field: <Map<number, FieldInterface>>new Map<number, FieldInterface>(),\n      component: <Map<number, any>>new Map<number, any>(),\n    },// the actually DataObject that an asset represents\n    core: <CoreConfig>undefined,\n    tab: <TabConfig>undefined,\n  };\n\n\n  private _setServiceContainer() {\n    this.srv = {\n      action: ServiceInjector.get(PopEntityActionService),\n      dialog: ServiceInjector.get(MatDialog),\n      tab: this.tabRepo\n    };\n    delete this.tabRepo;\n  }\n\n\n  constructor( // This service is unique to every component, provided in the PopEntityTabComponent\n    private tabRepo: PopTabMenuService,\n  ) {\n    super();\n    this._setServiceContainer();\n    PopLog.init(this.name, `created:${this.id}`);\n  }\n\n\n  /**\n   * This fx takes the initial data and configures it to the expected structure and sets up all the ancillary assets needed\n   * @param core\n   * @param tab\n   */\n  init(core: CoreConfig, tab: TabConfig): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      this.asset.core = IsObjectThrowError(core, true, `${this.name}:core`) ? <CoreConfig>core : null;\n      this.asset.tab = IsObjectThrowError(tab, true, `${this.name}:init: - tab`) ? <TabConfig>tab : <TabConfig>{};\n      // this.asset.attach = { fields: {}, components: {} };\n      // let value;\n\n      this.ui.sections_keys = [];\n\n      if (!(IsObject(core.entity.mapping))) {\n        core.entity.mapping = <Dictionary<any>>{};\n      }\n      if (!(IsObject(core.entity.mapping.field))) {\n        core.entity.mapping.field = <Dictionary<any>>{};\n      }\n      if (!(IsObject(core.entity.mapping.primary))) {\n        core.entity.mapping.primary = <Dictionary<boolean>>{};\n      }\n      if (!(IsArray(core.entity.mapping.required))) {\n        core.entity.mapping.required = [];\n      } else {\n        core.entity.mapping.required = ArrayOnlyUnique(core.entity.mapping.required);\n      }\n      // if( !( IsObject( core.entity.mapping.field ) ) ){\n      //   core.entity.mapping.field = <KeyMap<any>>{};\n      // }\n\n      // console.log('orig scheme', core.entity.name, core.entity.mapping);\n\n      this.ui.primary = StorageGetter(core, ['entity', 'mapping', 'primary'], {});\n      this.ui.primaryIds = Object.values(this.ui.primary).map((i => +i)).sort();\n\n\n      const fields = ArrayKeyBy(StorageGetter(this.asset.core, 'resource.custom_fields.data_values'.split('.'), []), 'id');\n      Object.keys(fields).map((fieldId) => {\n        const field = fields[fieldId];\n        field.primary = this.ui.primaryIds.includes(+fieldId);\n      });\n\n      const components = ArrayKeyBy(StorageGetter(this.asset.core, 'resource.custom_components.data_values'.split('.'), []), 'id');\n      Object.keys(components).map((componentId) => {\n        components[componentId].primary = false;\n      });\n\n      this.ui.assetPool = {\n        field: fields,\n        component: components\n      };\n\n      PopLog.init(this.name, `ui.assetPool`, this.ui.assetPool);\n\n      Object.keys(this.ui.assetPool).map((assetType) => {\n        this._ensureAssetTypeContainers(assetType);\n        Object.keys(this.ui.assetPool[assetType]).map((assetId) => {\n          this.asset.assetMap[assetType].set(+assetId, CleanObject(this.ui.assetPool[assetType][assetId]));\n          this.ui.assetPool[assetType][assetId].compact = typeof this.ui.assetPool[assetType][assetId].compact !== 'undefined' ? +this.ui.assetPool[assetType][assetId].compact : 1;\n        });\n      });\n\n      const defaultSections = [\n        {\n          id: 0,\n          name: ``,\n          business_id: PopBusiness.id,\n          scheme_id: +core.entity.id,\n          sort_order: 0,\n          container: true,\n          children: [],\n          mapping: {},\n          modified: true\n        },\n        {\n          id: 0,\n          name: ``,\n          business_id: PopBusiness.id,\n          scheme_id: +core.entity.id,\n          sort_order: 1,\n          container: true,\n          children: [],\n          mapping: {},\n          modified: true\n        },\n        {\n          id: 0,\n          name: ``,\n          business_id: PopBusiness.id,\n          scheme_id: +core.entity.id,\n          sort_order: 2,\n          container: true,\n          children: [],\n          mapping: {},\n          modified: true\n        }\n      ];\n\n\n      this.ui.sections = IsArrayThrowError(core.entity.children, false, `Entity did not contain children`) ? core.entity.children.slice(0, 3) : []; // turned off copy for now since other components are looking at the _server_sections for looping\n\n      if (!(IsArray(this.ui.sections, true))) this.ui.sections = defaultSections;\n\n\n      const remainingFlex = 4 - this.ui.sections.length;\n      this.ui.sections.map((section, index) => {\n        section = this._transformSection(section, index);\n        // const tableAssets = this._getSectionTableFieldsAssets( section );\n        // section.children = [ ...tableAssets, ...section.children ];\n        section.predicate = (item: CdkDrag<number>) => {\n          const data = <any>item.data;\n          return data.compact;\n        };\n        this.ui.sections_keys.push(section.position);\n      });\n      if (this.ui.sections && this.ui.sections.length > 1) {\n        const lastSection = this.ui.sections[this.ui.sections.length - 1];\n        lastSection.predicate = (item: CdkDrag<number>) => {\n          return true;\n        };\n        if (remainingFlex) lastSection.flex += remainingFlex;\n      }\n\n      Object.keys(this.ui.assetPool).map((assetType) => {\n        let value;\n        Object.keys(this.ui.assetPool[assetType]).map((assetId) => {\n          value = this.ui.attachedMap[assetType].has(+assetId);\n          this.ui.assignableConfigs[assetType][assetId] = new CheckboxConfig({\n            bubble: true,\n            value: value,\n            disabled: value,\n          });\n        });\n      });\n\n      const requests = [];\n      this.ui.sections.map((section) => {\n        requests.push(this._resolveSectionId(section).then((id: number) => {\n          section.id = id;\n        }));\n      });\n      await forkJoin(requests);\n      let primaryIds = JsonCopy(this.ui.primaryIds);\n      this.ui.sections.sort(DynamicSort('sort_order'));\n      primaryIds = this._checkForTraits(core, this.ui.sections, primaryIds);\n      if (IsArray(this.ui.sections, true) && primaryIds.length) {\n        primaryIds.map((fieldId: number) => {\n          this.onAssetAttaching('field', +fieldId, true);\n        });\n        this.ui.sections[0].children = await this.onAttachingAssetsToPosition(this.ui.sections[0]);\n      }\n      return resolve(true);\n    });\n\n  }\n\n\n  /**\n   * This fx is used to remove an asset/child from the scheme\n   * @param position\n   * @param asset\n   */\n  onRemoveChildFromLayout(position: number, child: EntitySchemeSectionInterface): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      const positionIndex = position - 1;\n      if (this.asset.core.entity.children[positionIndex]) {\n        const container = this.ui.sections[positionIndex];\n        if (child && typeof child.sort_order === 'number') {\n          this.srv.tab.showAsLoading(true);\n          await this._removeSection(child);\n          container.children = container.children.filter((section: EntitySchemeSectionInterface) => {\n            return section.id !== child.id;\n          });\n          // transferArrayItem( container.children, [], child.sort_order, 0 );\n          container.mapping.sort_order = [];\n          container.children.map((item, index) => {\n            if (item.id) container.mapping.sort_order.push(item.id);\n            item.sort_order = index;\n          });\n          this._setChildAsAttachable(child);\n          this.srv.tab.showAsLoading(false);\n          // this.onTriggerUpdate(1000);\n          return resolve(true);\n        }\n      } else {\n        return resolve(true);\n      }\n\n    });\n  }\n\n\n  /**\n   * A user can dragSort aassets from one column to another in the scheme layout\n   * @param event\n   */\n  onAssetSortDrop(event: CdkDragDrop<string[]>) {\n    // console.log( 'onAssetSortDrop', event );\n    let data;\n    let prev;\n    if (event.previousContainer === event.container) {\n      data = this._getEventContainerData(event.container);\n      if (+event.currentIndex < +data.startIndex) event.currentIndex = +data.startIndex;\n      moveItemInArray(event.container.data, event.previousIndex, event.currentIndex);\n      this._storePositionSortOrder(this._getSectionByPosition(data.position));\n    } else {\n      data = this._getEventContainerData(event.container);\n      prev = this._getEventContainerData(event.previousContainer);\n      if (+event.currentIndex < +data.startIndex) event.currentIndex = +data.startIndex;\n      transferArrayItem(event.previousContainer.data, event.container.data, event.previousIndex, event.currentIndex);\n      this._storePositionSortOrder(this._getSectionByPosition(prev.position));\n      this._storePositionSortOrder(this._getSectionByPosition(data.position));\n    }\n    const droppedItem = event.item.data;\n    let section = <any>event.container.data.find((i: any) => {\n      return +i.id === +droppedItem.id;\n    });\n    if (IsObject(section, ['id'])) {\n      section = <EntitySchemeSectionInterface>section;\n      if (+data.id !== +section.scheme_id) {\n        section.scheme_id = +data.id;\n        PopRequest.doPatch(`profile-schemes/${section.id}`, {scheme_id: +data.id}, 1, false).subscribe(() => true);\n      }\n    }\n  }\n\n\n  /**\n   * This fx used to register that a user has check an asset in the asset poll intending to attach it to a column in the scheme\n   * @param asset_type\n   * @param itemId\n   * @param value\n   */\n  onAssetAttaching(asset_type, itemId: number, value: boolean) {\n    if (this.asset.attachingSet[asset_type]) {\n      if (value) {\n        this.asset.attachingSet[asset_type].add(+itemId);\n      } else {\n        this.asset.attachingSet[asset_type].delete(+itemId);\n      }\n    }\n  }\n\n\n  /**\n   * This fx is used to attach assets to a column in the scheme\n   * The user will select which assets from a pool and then click a button representing the column where the assets should be pushed into\n   * @param section\n   */\n  onAttachingAssetsToPosition(section: EntitySchemeSectionInterface): Promise<EntitySchemeSectionConfig[]> {\n    return new Promise<EntitySchemeSectionConfig[]>(async (resolve) => {\n      section.id = await this._resolveSectionId(section);\n      if (section.id) {\n        const items = this._getAssetsToAttach();\n        let child, asset;\n        let children = [];\n        const requests = [];\n        if (IsObject(items, true)) {\n          Object.keys(items).map((assetType: string) => {\n            Object.keys(items[assetType]).map((itemId) => {\n              asset = this.asset.assetMap[assetType].get(+itemId);\n              child = <EntitySchemeSectionInterface>{\n                id: null,\n                name: asset.name,\n                scheme_id: +section.id,\n                asset_type: assetType,\n                asset_id: +itemId,\n                asset: asset,\n                compact: assetType === 'component' ? asset.compact ? 1 : 0 : 1,\n                position: section.position,\n              };\n              this._setChildAsAttached(child);\n              children.push(child);\n              requests.push(this._resolveSectionId(child).then((id) => {\n                child.id = id;\n              }));\n            });\n          });\n        }\n        forkJoin(requests).subscribe(() => {\n          const tmp = IsArray(section.children, true) ? section.children : [];\n          section.mapping.sort_order = [];\n          children = [...tmp, ...children];\n          children.map((x, i) => {\n            if (x.id) section.mapping.sort_order.push(x.id);\n            x.sort_order = i;\n          });\n          // this.onTriggerUpdate();\n          this._resetAssetAttachingData();\n          return resolve(children);\n        });\n\n      } else {\n        return resolve(null);\n      }\n    });\n  }\n\n\n  /**\n   * This fx will take an array of sections an update any of the modified sections\n   * @param sections\n   */\n  onUpdate(sections: EntitySchemeSectionInterface[]): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      if (IsArray(sections, true)) {\n        await this._update(sections, true);\n        return resolve(true);\n      } else {\n        return resolve(false);\n      }\n    });\n  }\n\n\n  /**\n   * This fx is used to trigger an api call to save the current state of the scheme\n   * @param delay\n   */\n  onTriggerUpdate(delay = 500) {\n    this.dom.setTimeout('update-api', () => {\n      // this._update();\n    }, delay);\n  }\n\n\n  /**   * A user can click on an edit button an edit the config settings of an asset\n\n   * @param asset\n   */\n  onEditAsset(asset): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      if (!this.dom.state.blockModal) {\n        this.dom.state.blockModal = true;\n        let componentType = null;\n        // console.log('asset', asset);\n        if (asset.asset_type === 'field') {\n          componentType = PopEntitySchemeFieldSettingComponent;\n        } else if (asset.asset_type === 'component') {\n          // console.log('here');\n        }\n\n\n        if (componentType) {\n          const dialogRef = this.srv.dialog.open(PopEntitySchemeFieldSettingComponent, {\n            width: `900px`,\n            height: `1080px`,\n            panelClass: 'sw-mar-sm',\n            disableClose: true\n          });\n          let component = <any>dialogRef.componentInstance;\n          component.core = this.asset.core;\n          component.config = asset;\n\n          this.dom.setSubscriber('asset-modal', dialogRef.beforeClosed().subscribe((scheme) => {\n            if (scheme) {\n              this.init(this.asset.core, this.asset.tab);\n              component = null;\n            } else {\n              component = null;\n            }\n            this.dom.state.blockModal = false;\n            return resolve(true);\n          }));\n        } else {\n          this.dom.state.blockModal = false;\n          return resolve(false);\n        }\n      } else {\n        this.dom.state.blockModal = false;\n        return resolve(false);\n      }\n    });\n  }\n\n\n  getFieldMapping(fieldId: number) {\n    const storage = this.asset.core.entity.mapping.field;\n    return StorageSetter(storage, [`field_${fieldId}`]);\n  }\n\n\n  ngOnDestroy() {\n    PopLog.warn(this.name, `destroyed:${this.id}`);\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  /**\n   * There a by default 3 columns, 1,2,3, this fx allows to find the section that represent one of those columns with\n   * @param position number 1,2,3\n   * @private\n   */\n  private _getSectionByPosition(position: number): EntitySchemeSectionInterface {\n    let section = <EntitySchemeSectionInterface>{};\n    // console.log( 'position', position );\n    if (+position) {\n      const sectionIndex = position - 1;\n      // console.log( 'sectionIndex', sectionIndex, this.ui.sections );\n      if (sectionIndex in this.ui.sections) {\n        section = this.ui.sections[sectionIndex];\n      }\n    }\n    return section;\n  }\n\n\n  /**\n   * This fx is used to map the the sort_order of all a section's children\n   * @param section\n   * @private\n   */\n  private _storePositionSortOrder(section: EntitySchemeSectionInterface) {\n    // console.log( '_storePositionSortOrder', section );\n    if (IsObject(section, ['id', 'children'])) {\n      section.mapping.sort_order = [];\n      if (IsArray(section.children)) {\n        section.children.map((item, index) => {\n          // console.log('item', item);\n          if (item.id) section.mapping.sort_order.push(item.id);\n          item.sort_order = index;\n        });\n        const patch = {\n          mapping: {\n            sort_order: section.mapping.sort_order\n          }\n        };\n        PopRequest.doPatch(`profile-schemes/${section.id}`, patch, 1, false).subscribe(() => true);\n      }\n    }\n\n  }\n\n\n  /**\n   * This fx will extract the data attributes stored on a html element\n   * @param container\n   * @private\n   */\n  private _getEventContainerData(container: any): Dictionary<any> {\n    const data = DeepCopy(StorageGetter(container, 'element.nativeElement.dataset'.split('.'), {}));\n    if (IsObject(data, true)) {\n      Object.keys(data).map((key) => {\n        data[key] = ParseModelValue(data[key]);\n      });\n    }\n    return data;\n  }\n\n\n  /**\n   * Ensure that a section has an id that is stored int the api database\n   * @param section\n   */\n  private _resolveSectionId(section: EntitySchemeSectionInterface): Promise<number> {\n    return new Promise<number>(async (resolve) => {\n      if (IsObject(section, true)) {\n        if (+section.id) {\n          return resolve(+section.id);\n        } else {\n          const data = this._extractSectionData(section);\n          this.dom.setSubscriber(PopUid(), PopRequest.doPost(`profile-schemes`, data, 1, false).subscribe((res: any) => {\n            if (res.data) res = res.data;\n            return resolve(+res.id);\n          }, () => {\n            return resolve(0);\n          }));\n        }\n      } else {\n        return resolve(0);\n      }\n    });\n\n  }\n\n\n  /**\n   * This fx will make the api call to remove a section in the api database\n   * @param section\n   */\n  private _removeSection(section: EntitySchemeSectionInterface): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      if (IsObject(section, ['id'])) {\n        this.dom.setSubscriber(PopUid(), PopRequest.doDelete(`profile-schemes/${section.id}`, {}, 1, false).subscribe((res: any) => {\n          if (res.data) res = res.data;\n          // console.log( '_removeSection', res );\n          return resolve(true);\n        }, () => {\n          return resolve(false);\n        }));\n      } else {\n        return resolve(true);\n      }\n    });\n  }\n\n\n  /**\n   * This fx is used to make api call to the backend to save the scheme\n   * @param store\n   * @private\n   */\n  private _update(sections: EntitySchemeSectionInterface[], store = true): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      if (this.asset.core) {\n        const modified = this._extractModifiedSections(sections, []);\n        if (store && IsArray(modified, true)) {\n          const request = [];\n          modified.map((section: EntitySchemeSectionInterface) => {\n            if (+section.id) {\n              request.push(PopRequest.doPatch(`profile-schemes/${section.id}`, section, 1, false));\n            } else {\n              request.push(PopRequest.doPost(`profile-schemes`, section, 1, false));\n            }\n          });\n          await forkJoin(request);\n          return resolve(true);\n        }\n      } else {\n        return resolve(true);\n      }\n\n    });\n\n  }\n\n\n  /**\n   * This fx is used to pull out all the scheme sections that need to be saved\n   * @param sections\n   * @private\n   */\n  private _extractModifiedSections(sections: EntitySchemeSectionInterface[], extracted = []): any[] {\n    if (IsArray(sections, true)) {\n      sections.map((section, index) => {\n        section.sort_order = index;\n        if (section.modified) {\n          extracted.push(this._extractSectionData(section));\n          section.modified = false;\n        }\n        if (IsArray(section.children, true)) {\n          section.children.map((child, childIndex) => {\n            child.sort_order = childIndex;\n            if (child.modified) {\n              extracted.push(this._extractSectionData(child));\n              child.modified = false;\n            }\n            if (IsArray(child.children, true)) {\n              extracted = this._extractModifiedSections(child.children, extracted);\n            }\n          });\n        }\n      });\n    }\n    return extracted;\n  }\n\n\n  /**\n   * This fx extracts the data off a section that should be store in the api database\n   * @param section\n   * @private\n   */\n  private _extractSectionData(section: EntitySchemeSectionInterface) {\n    return CleanObject({\n      id: section.id,\n      entity_id: 111,\n      name: section.name ? section.name : null,\n      asset_type: section.asset_type ? section.asset_type : null,\n      asset_id: section.asset_type ? section.asset_id : null,\n      scheme_id: section.scheme_id ? section.scheme_id : null,\n      mapping: IsObject(section.mapping) ? section.mapping : {children: {}},\n      sort_order: IsDefined(section.sort_order) ? section.sort_order : 99\n    });\n  }\n\n\n  /**\n   * Determine what assets have been set from the asset pool\n   * This fx is called when a user click on a <column button> intending to attach assets into a specific column of the scheme\n   */\n  _getAssetsToAttach(): Dictionary<KeyMap<any>> {\n    const attaching = {};\n    Object.keys(this.asset.attachingSet).map((assetTypeKey) => {\n      this.asset.attachingSet[assetTypeKey].forEach((assetId) => {\n        if (!attaching[assetTypeKey]) attaching[assetTypeKey] = {};\n        const assetable = this.asset.assetMap[assetTypeKey].get(assetId);\n        if (assetTypeKey === 'component') {\n          attaching[assetTypeKey][assetId] = {compact: assetable.compact ? 1 : 0};\n        } else {\n          attaching[assetTypeKey][assetId] = {compact: 1};\n        }\n      });\n    });\n    return attaching;\n  }\n\n\n  /**\n   * Retrieve the default columns tht exist on an entity table\n   * @param section\n   */\n  private _getSectionTableFieldsAssets(section) {\n    const tableAssets = [];\n    if (this.asset.core) {\n      const Field = StorageGetter(this.asset.core, 'repo.model.field'.split('.'));\n      if (IsObject(Field, true)) {\n        Object.values(Field).map((field: FieldInterface) => {\n          if (!field.ancillary && field.position === section.position) {\n            tableAssets.push(new EntitySchemeSectionConfig({\n              id: 0,\n              name: field.model.label,\n              asset_type: 'table',\n              asset_id: 0,\n              asset: field,\n              scheme_id: +section.id,\n              sort_order: field.sort,\n              position: section.position,\n            }));\n          }\n        });\n      }\n    }\n\n    section.startIndex = tableAssets.length;\n    return tableAssets.sort((a, b) => {\n      if (a.sort < b.sort) return -1;\n      if (a.sort > b.sort) return 1;\n      return 0;\n    });\n  }\n\n\n  /**\n   * Convert child sections to the expected structure\n   * @param child\n   * @private\n   */\n  private _transformSection(section: EntitySchemeSectionInterface, index: number): EntitySchemeSectionInterface {\n    section = <EntitySchemeSectionInterface>CleanObject(section, {blacklist: ['flattened']}); // first level are only containers\n    section.container = true;\n    section.position = index + 1;\n    section.flex = 1;\n    section.sort_order = index;\n    if (!(IsObject(section.mapping))) section.mapping = {};\n    if (!(IsArray(section.mapping.sort_order))) section.mapping.sort_order = [];\n    if (!(IsArray(section.children))) section.children = [];\n    section.children = section.children.filter((child: EntitySchemeSectionInterface) => { // sub level maybe an actual asset or a container\n      if (String(String(child.asset_type).toLowerCase()).includes('field')) {\n        child.asset_type = 'field';\n      }else if (String(String(child.asset_type).toLowerCase()).includes('component')) {\n        child.asset_type = 'component';\n      } else  if (String(String(child.asset_type).toLowerCase()).includes('widget')) {\n        child.asset_type = 'widget';\n      }\n      // console.log('type', child.asset_type);\n      if (child.asset_type && child.asset_type != 'table') {\n        if (+child.asset_id) {\n          return this.asset.assetMap[child.asset_type].has(child.asset_id);\n        } else {\n          return true;\n        }\n      }\n\n      return child.asset_type != 'table';\n    });\n\n    section.children.map((child: EntitySchemeSectionInterface) => {\n      child = this._transformChild(child);\n      child.sort_order = section.mapping.sort_order.includes(child.id) ? +section.mapping.sort_order.indexOf(child.id) : 99;\n      if (IsObject(child.asset, true)) {\n        if (IsString(child.asset_type, true)) {\n          child.compact = <boolean>(IsObject(child.asset, ['compact']) && IsDefined(child.asset.compact) ? child.asset.compact : false);\n          this._ensureAssetTypeContainers(child.asset_type);\n          this.ui.attachedMap[child.asset_type].set(+child.asset_id, section.position);\n        } else {\n          this._transformSection(child, index);\n        }\n      }\n    });\n\n    section.children.sort(DynamicSort('sort_order'));\n\n\n    return section;\n  }\n\n\n  /**\n   * Convert child of a section to the expected structure\n   * @param child\n   */\n\n  private _transformChild(child: EntitySchemeSectionInterface): EntitySchemeSectionInterface {\n    child = <EntitySchemeSectionInterface>CleanObject(child);\n    if (!(IsObject(child.mapping))) child.mapping = {};\n    if (IsDefined(child.asset_id) && +child.asset_id) {\n      delete child.children;\n      if (String(String(child.asset_type).toLowerCase()).includes('field')) child.asset_type = 'field';\n      if (child.asset_type === 'field' && this.asset.assetMap.field.has(child.asset_id)) {\n        child.asset = this.asset.assetMap.field.get(child.asset_id);\n        child.name = child.asset.name;\n        child.compact = true;\n      } else if (child.asset_type === 'component' && this.asset.assetMap.component.has(child.asset_id)) {\n        child.asset_type = 'component';\n        child.asset = this.asset.assetMap.component.get(child.asset_id);\n        child.name = child.asset.name;\n      }\n      child.container = false;\n    } else {\n      child.container = true;\n    }\n    return child;\n  }\n\n\n  /**\n   * This fx is used ensures that an asset type has the all ancillary assets needed\n   * @param assetType\n   */\n  private _ensureAssetTypeContainers(assetType: string) {\n    if (!this.asset.attachingSet[assetType]) this.asset.attachingSet[assetType] = new Set();\n    if (!this.asset.assetMap[assetType]) this.asset.assetMap[assetType] = new Map();\n    if (!this.ui.attachedMap[assetType]) this.ui.attachedMap[assetType] = new Map();\n    if (!this.ui.assignableConfigs[assetType]) this.ui.assignableConfigs[assetType] = {};\n  }\n\n\n  /**\n   * Clear out all the attaching set data\n   */\n  private _resetAssetAttachingData() {\n    Object.keys(this.asset.attachingSet).map((key) => {\n      this.asset.attachingSet[key].clear();\n    });\n  }\n\n\n  /**\n   * Refresh the core entity\n   * @param dom\n   */\n  private _refreshEntity(dom: PopDomService = null) {\n    this.asset.core.channel.emit({\n      source: this.name,\n      target: 'PopEntityTabComponent',\n      type: 'component',\n      name: 'start-refresh'\n    });\n    this.srv.tab.refreshEntity(null, dom, {}, `${this.name}:viewEntityPortal`).then((res) => {\n      this.init(this.asset.core, this.asset.tab);\n      this.dom.state.blockModal = false;\n      this.asset.core.channel.emit({\n        source: this.name,\n        target: 'PopEntityTabComponent',\n        type: 'component',\n        name: 'stop-refresh'\n      });\n    });\n  }\n\n\n  /**\n   * This fx is used to mark an asset in the asset pool as attachable\n   * @param asset\n   */\n  private _setChildAsAttachable(child: EntitySchemeSectionInterface) {\n    if (!child.container) {\n      this.ui.attachedMap[child.asset_type].delete(child.asset_id);\n      this.ui.assignableConfigs[child.asset_type][child.asset_id].control.setValue(0);\n      this.ui.assignableConfigs[child.asset_type][child.asset_id].control.enable();\n    }\n  }\n\n\n  /**\n   * This fx is used to mark an asset in as attached, setting it up to be transferred to a column in the scheme\n   * @param asset\n   */\n  private _setChildAsAttached(child: EntitySchemeSectionInterface, position: number = 1) {\n    if (!child.container) {\n      this.ui.attachedMap[child.asset_type].set(child.asset_id, position);\n      this.ui.assignableConfigs[child.asset_type][child.asset_id].control.setValue(1);\n      this.ui.assignableConfigs[child.asset_type][child.asset_id].control.disable();\n    }\n  }\n\n\n  /**\n   * This fx is used to pull out all the scheme sections that need to be saved\n   * @param sections\n   * @private\n   */\n  private _checkForTraits(core: CoreConfig, sections: EntitySchemeSectionInterface[], primaryIds = []): any[] {\n    if (IsArray(sections, true)) {\n      sections.map((section) => {\n        if (IsArray(section.children, true)) {\n          section.children.map((child) => {\n            if (child.asset_type === 'field') {\n              child.asset.required = IsArray(core.entity.mapping.required) ? core.entity.mapping.required.includes(child.asset_id) : false;\n              if (primaryIds.includes(child.asset_id)) {\n                primaryIds.splice(primaryIds.indexOf(child.asset_id), 1);\n                child.asset.primary = true;\n              } else {\n                child.asset.primary = false;\n              }\n            }\n            if (IsArray(child.children, true)) {\n              this._checkForTraits(core, child.children, primaryIds);\n            }\n          });\n        }\n      });\n    }\n    return primaryIds;\n  }\n}\n","import { Component, ElementRef, OnDestroy, OnInit } from '@angular/core';\nimport { PopEntitySchemeService } from '../pop-entity-scheme.service';\nimport { ButtonConfig } from '../../../base/pop-field-item/pop-button/button-config.model';\nimport { PopExtendComponent } from '../../../../pop-extend.component';\nimport { PopDomService } from '../../../../services/pop-dom.service';\nimport { IsArray, IsArrayThrowError, IsObject, IsObjectThrowError, ObjectContainsTagSearch, TitleCase, ToArray } from '../../../../pop-common-utility';\nimport { EntitySchemeSectionConfig, EntitySchemeSectionInterface, ProfileSchemeAssetPoolInterface } from '../pop-entity-scheme.model';\nimport { Dictionary, KeyMap, PopEntity, PopPortal, ServiceInjector } from '../../../../pop-common.model';\nimport { CheckboxConfig } from '../../../base/pop-field-item/pop-checkbox/checkbox-config.model';\nimport { PopTabMenuService } from '../../../base/pop-tab-menu/pop-tab-menu.service';\nimport { Router } from '@angular/router';\n\n\n@Component( {\n  selector: 'lib-entity-scheme-asset-pool',\n  templateUrl: './pop-entity-scheme-asset-pool.component.html',\n  styleUrls: [ './pop-entity-scheme-asset-pool.component.scss' ]\n} )\nexport class PopEntitySchemeAssetPoolComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  public name = 'PopEntitySchemeAssetPoolComponent';\n\n\n  public ui = {\n    sections: <EntitySchemeSectionInterface[]>undefined,\n    assignBtnConfigs: <ButtonConfig[]>undefined,\n    assignableConfigs: <Dictionary<KeyMap<CheckboxConfig>>>undefined,\n    assetPool: <ProfileSchemeAssetPoolInterface[]>undefined,\n    section_keys: <number[]>undefined\n  };\n\n  protected asset = {\n    primaryIds: <number[]>[]\n  };\n\n\n  protected srv = {\n    scheme: <PopEntitySchemeService>undefined,\n    tab: <PopTabMenuService>undefined,\n    router: <Router>ServiceInjector.get( Router )\n  };\n\n\n  /**\n   *\n   * @param el\n   * @param _domRepo - transfer\n   * @param _schemeRepo - transfer\n   * @param _tabRepo - transfer\n   */\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService,\n    protected _schemeRepo: PopEntitySchemeService,\n    protected _tabRepo: PopTabMenuService\n  ){\n    super();\n\n\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n        this.dom.session.searchValue = '';\n        // #1: Transfer in misc assets from the schemeRepo\n        this.dom.state.searching = false;\n\n        this.asset.primaryIds = this.srv.scheme.ui.primaryIds;\n\n        await this.dom.setWithComponentInnerHeight( 'PopEntityTabColumnComponent', this.position, 230, 600 );\n        this.dom.height.content = this.dom.height.inner - 95;\n        this._setUiAssets();\n        return resolve( true );\n      } );\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n        // #5: Reapply any onSession search that may have existed\n        this.onApplyUiSearch( this.dom.session.searchValue );\n\n        // #6: Disable the ui assign buttons for the initial view\n        this.onDisableUiAssignButtons();\n\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * The purpose of this component is to provide the user with lists of all available types that they can assign into a scheme layout\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  private _setUiAssets(){\n    this.ui.sections = this.srv.scheme.ui.sections;  // transfer sections from schemeRepo\n    this.ui.assignableConfigs = this.srv.scheme.ui.assignableConfigs;  // transfer assignableConfigs for attaching assets from pools\n    // #2: Build the config for the buttons that the user will push to assign items to a layout position\n    this.ui.assignBtnConfigs = []; // create a button for each section to assign assets from the pools with\n    this.ui.sections.map( ( section ) => {\n      this.ui.assignBtnConfigs[ section.position ] = new ButtonConfig( {\n        bubble: true,\n        event: 'assign',\n        value: 'Column ' + ( +section.position ),\n        size: 30,\n        text: 16,\n        icon: null,\n      } );\n    } );\n\n\n    // #4: Configure the asset ppol items that a user can choose from to position in the layout\n    let assetPool = IsObjectThrowError( this.srv.scheme.ui.assetPool, true, `${this.name}:configureDom: - this.srv.scheme.asset.asset_pool` ) ? JSON.parse( JSON.stringify( this.srv.scheme.ui.assetPool ) ) : {}; // transfer asset_pools from schemeRepo and mutate\n    assetPool = Object.keys( assetPool ).map( ( assetTypeKey ) => {\n      this.dom.state[ assetTypeKey ] = {\n        expanded: true,\n        visible: {}, // used with the search mechanism\n        attach: {}, // used with the search mechanism\n      };\n      return <ProfileSchemeAssetPoolInterface>{\n        name: assetTypeKey,\n        asset_type: assetTypeKey,\n        display: TitleCase( assetTypeKey ),\n        data: assetPool[ assetTypeKey ],\n        list: ToArray( assetPool[ assetTypeKey ] )\n      };\n    } );\n\n    this.ui.assetPool = IsArrayThrowError( assetPool, true, `${this.name}:configureDom: - pools` ) ? assetPool : [];\n  }\n\n\n  /**\n   * Cear the search input and reset the asset pool list\n   */\n  onUiSearchValueClear(){\n    this.dom.session.searchValue = '';\n    this.onApplyUiSearch( this.dom.session.searchValue );\n  }\n\n\n  /**\n   * Apply the search value the user entered to the asset pool list\n   * @param searchValue\n   * @param col\n   */\n  onApplyUiSearch( searchValue: string, col = '' ){\n    if( this.dom.delay.search ) clearTimeout( this.dom.delay.search );\n    this.dom.delay.search = setTimeout( () => {\n      if( searchValue.length ){\n        this.ui.assetPool.map( ( pool ) => {\n          if( IsObject( this.dom.state[ pool.name ] ) ){\n            pool.list.map( ( item ) => {\n              this.dom.state[ pool.name ].visible[ item.id ] = ObjectContainsTagSearch( {\n                id: item.id,\n                name: item.name,\n              }, searchValue ) === true;\n            } );\n          }\n        } );\n        setTimeout( () => {\n          this.dom.state.searching = true;\n        } );\n\n      }else{\n        this.ui.assetPool.map( ( pool ) => {\n\n          if( IsObject( this.dom.state[ pool.name ] ) ){\n            pool.list.map( ( item ) => {\n              this.dom.state[ pool.name ].visible[ item.id ] = 1;\n            } );\n          }\n        } );\n        this.dom.state.searching = false;\n      }\n    }, 200 );\n  }\n\n\n  /**\n   * The user can expand an asset pool type to be open or closed\n   * @param pool\n   */\n  onTogglePoolExpansion( pool ){\n    if( pool && pool.name in this.dom.state ){\n      this.dom.state[ pool.name ].expanded = !this.dom.state[ pool.name ].expanded;\n    }\n  }\n\n\n  /**\n   * This is triggered when a user selects a checkbox indicating that it will be assigned to a position of the layout\n   * @param asset_type\n   * @param itemId\n   * @param value\n   */\n  onAssetPoolItemAttaching( asset_type: string, itemId: number, value: boolean ){\n    this.srv.scheme.onAssetAttaching( asset_type, itemId, value );\n    this.onEnableUiAssignButtons();\n  }\n\n\n  /**\n   * This is triggered when a user selects a position button indicating they want the selected asset pool items moved to a position of the layout\n   * @param section\n   * @param $event\n   */\n  onSectionAttachingItems( section: EntitySchemeSectionInterface, $event ){\n    this.onDisableUiAssignButtons();\n    section.modified = true;\n    this.srv.tab.showAsLoading( true );\n    this.srv.scheme.onAttachingAssetsToPosition( section ).then( ( children: EntitySchemeSectionConfig[] ) => {\n      if( IsArray( children, true ) ){\n        section.children = children;\n        this.srv.scheme.onUpdate( [ section ] ).then( () => {\n          // console.log( 'done with add ', section );\n          this.srv.tab.showAsLoading( false );\n          this.onDisableUiAssignButtons();\n        } );\n      }else{\n        // console.log( 'update section failed', section );\n        this.srv.tab.showAsLoading( false );\n        this.onDisableUiAssignButtons();\n      }\n    } );\n  }\n\n\n  /**\n   * This is triggered every time the user selects a checkbox of an asset pool item\n   * This should determine which positions of the layout are eligible base on the set of the items selected\n   * Asset Pool items should be designated as compact or not, the last position of the layout is reserved for larger modules and compact items should not go in it\n   */\n  onEnableUiAssignButtons(){\n    if( !this.ui.section_keys ){\n      this.ui.section_keys = this.ui.sections.map( ( s, i ) => s.position );\n    }\n    if( this.dom.delay.configure_buttons ) clearTimeout( this.dom.delay.configure_buttons );\n    this.dom.delay.configure_buttons = setTimeout( () => {\n      const items = this.srv.scheme._getAssetsToAttach();\n      let notCompact;\n      const assetTypes = Object.keys( items );\n      assetTypes.some( ( assetType: string ) => {\n        notCompact = Object.keys( items[ assetType ] ).filter( ( assetID ) => {\n          if( assetType === 'component' ){\n            return !items[ assetType ][ assetID ].compact;\n          }\n          return false;\n        } ).length;\n        if( notCompact ) return true;\n      } );\n      const positionKeys = this.ui.section_keys.slice();\n      if( notCompact ){\n        let lastPositionKey;\n        if( positionKeys.length ){\n          lastPositionKey = positionKeys.pop();\n        }\n        positionKeys.map( ( positionKey ) => {\n          this.ui.assignBtnConfigs[ positionKey ].disabled = true;\n        } );\n        if( lastPositionKey ) this.ui.assignBtnConfigs[ lastPositionKey ].disabled = false;\n      }else{\n        positionKeys.map( ( positionKey ) => {\n          this.ui.assignBtnConfigs[ positionKey ].disabled = false;\n          this.ui.assignBtnConfigs[ positionKey ].color = 'accent';\n        } );\n      }\n    }, 100 );\n  }\n\n\n  /**\n   * This will disable or clear the position assign buttons\n   */\n  onDisableUiAssignButtons(){\n    this.core.entity.children.map( ( section ) => {\n      if( section.position ){\n        this.ui.assignBtnConfigs[ section.position ].disabled = true;\n        this.ui.assignBtnConfigs[ section.position ].color = 'default';\n      }\n    } );\n  }\n\n\n  onAssetLink( type: string, id: number ){\n    if( type === 'field' ){\n      this.srv.router.navigateByUrl( `/cis/fields/${id}` ).catch( ( e ) => {\n        console.log( 'e', e );\n      } );\n    }\n  }\n\n\n  /**\n   * A user can click on an item in the asset pool to view a modal of that specific entityId item\n   * @param internal_namea\n   * @param id\n   */\n  onViewEntityPortal( internal_name: string, id: number ){\n    if( internal_name === 'field' ){\n      this.core.channel.emit( { source: this.name, target: 'PopEntityTabColumnComponent', type: 'component', name: 'scrollTo' } );\n      PopPortal.view( internal_name, id ).then( () => {\n        this.srv.scheme.ui.refresh.next( 'reload' );\n      } );\n    }\n  }\n\n\n  /**\n   * Clean up the dom of this component\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n}\n","import { Component, ElementRef, OnDestroy, OnInit, ViewEncapsulation } from '@angular/core';\nimport { PopEntitySchemeService } from '../pop-entity-scheme.service';\nimport { PopExtendComponent } from '../../../../pop-extend.component';\nimport { PopDomService } from '../../../../services/pop-dom.service';\n\n\n// https://medium.com/codetobe/learn-how-to-drag-drop-items-in-angular-7-20395c262ab0\n\n@Component( {\n  selector: 'lib-entity-scheme-asset-layout',\n  templateUrl: './pop-entity-scheme-asset-layout.component.html',\n  styleUrls: [ './pop-entity-scheme-asset-layout.component.scss' ],\n  encapsulation: ViewEncapsulation.None\n} )\nexport class PopEntitySchemeAssetLayoutComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  public name = 'PopEntitySchemeAssetLayoutComponent';\n\n\n  protected srv = {\n    scheme: <PopEntitySchemeService>undefined\n  };\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService,\n    protected _schemeRepo: PopEntitySchemeService,\n  ){\n    super();\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n        await this.dom.setWithComponentInnerHeight( 'PopEntityTabColumnComponent', this.position, 210, 600 );\n        this.ui.sections = this.srv.scheme.ui.sections;\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * Setup this component\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * Clean up the dom of this component\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n}\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { PopExtendComponent } from '../../../../pop-extend.component';\nimport { PopDomService } from '../../../../services/pop-dom.service';\nimport { PopEntitySchemeService } from '../pop-entity-scheme.service';\nimport { ButtonConfig } from '../../../base/pop-field-item/pop-button/button-config.model';\nimport { PopTabMenuService } from '../../../base/pop-tab-menu/pop-tab-menu.service';\nimport { PopBaseEventInterface } from '../../../../pop-common.model';\nimport { IsValidFieldPatchEvent } from '../../pop-entity-utility';\n\n\n@Component( {\n  selector: 'lib-entity-scheme-details',\n  templateUrl: './pop-entity-scheme-details.component.html',\n  styleUrls: [ './pop-entity-scheme-details.component.scss' ]\n} )\nexport class PopEntitySchemeDetailsComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  public name = 'PopEntitySchemeDetailsComponent';\n\n\n  protected srv = {\n    scheme: <PopEntitySchemeService>undefined,\n    tab: <PopTabMenuService>undefined\n  };\n\n  public ui = {\n  };\n\n\n  constructor(\n    protected _domRepo: PopDomService,\n    protected _tabRepo: PopTabMenuService,\n    protected _schemeRepo: PopEntitySchemeService,\n  ){\n    super();\n  }\n\n\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  onBubbleEvent( event: PopBaseEventInterface ){\n    this.log.event( `onBubbleEvent`, event );\n    if( IsValidFieldPatchEvent( this.core, event ) || event.type === 'context_menu' ){\n      this.log.info( `IsValidFieldPatchEvent`, event );\n      this.events.emit( event );\n    }\n  }\n\n\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n}\n","import { Component, ElementRef, OnDestroy, OnInit } from '@angular/core';\nimport { TabConfig } from '../../base/pop-tab-menu/tab-menu.model';\nimport { PopEntitySchemeService } from './pop-entity-scheme.service';\nimport { CoreConfig, PopBaseEventInterface } from '../../../pop-common.model';\n\nimport { PopExtendComponent } from '../../../pop-extend.component';\nimport { PopDomService } from '../../../services/pop-dom.service';\nimport { PopEntitySchemeAssetPoolComponent } from './pop-entity-scheme-asset-pool/pop-entity-scheme-asset-pool.component';\nimport { PopEntitySchemeAssetLayoutComponent } from './pop-entity-scheme-asset-layout/pop-entity-scheme-asset-layout.component';\nimport { PopEntitySchemeDetailsComponent } from './pop-entity-scheme-details/pop-entity-scheme-details.component';\nimport { PopTabMenuService } from '../../base/pop-tab-menu/pop-tab-menu.service';\n\n@Component( {\n  selector: 'lib-customer-scheme',\n  template: `\n    <lib-main-spinner *ngIf=\"dom.state.loader\"></lib-main-spinner>\n    <lib-pop-entity-tab *ngIf=\"dom.state.loaded\" [tab]=ui.tab [core]=\"core\"></lib-pop-entity-tab>`,\n  providers: [ PopEntitySchemeService ],\n} )\nexport class PopEntitySchemeComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  public name = 'PopEntitySchemeComponent';\n\n  protected srv = {\n    scheme: <PopEntitySchemeService>undefined,\n    tab: <PopTabMenuService>undefined\n  };\n\n\n  /**\n   *\n   * @param el\n   * @param _domRepo - transfer\n   * @param _schemeRepo - transfer\n   * @param _tabRepo - transfer\n   */\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService,\n    protected _schemeRepo: PopEntitySchemeService,\n    protected _tabRepo: PopTabMenuService\n  ){\n    super();\n\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n        this.ui.tab = new TabConfig( {\n          id: 'general',\n          positions: {\n            1: {\n              header: 'Details',\n              flex: 1,\n              components: [\n                {\n                  type: PopEntitySchemeDetailsComponent,\n                  inputs: {\n                    id: 1\n                  },\n                },\n              ]\n            },\n            2: {\n              flex: 1,\n              header: 'Available Fields & Components',\n              components: [\n                {\n                  type: PopEntitySchemeAssetPoolComponent,\n                  inputs: {\n                    id: 2\n                  },\n                },\n              ]\n            },\n            3: {\n              flex: 2,\n              header: 'Profile Layout',\n              components: [\n                {\n                  type: PopEntitySchemeAssetLayoutComponent,\n                  inputs: {\n                    id: 3\n                  },\n                },\n              ]\n            },\n          },\n          wrap: false,\n          columnWrap: true,\n          overhead: 0,\n          onLoad: ( config: CoreConfig, tab: TabConfig ) => {\n            // console.log('config', config);\n            // console.log('tab', tab);\n          },\n\n          onEvent: ( core: CoreConfig, event: PopBaseEventInterface ) => {\n            // console.log('event', event);\n          },\n        } );\n\n        await this.srv.scheme.init( this.core, this.ui.tab );\n\n        return resolve( true );\n      } );\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n        this.dom.setSubscriber(`refresh`, this.srv.scheme.ui.refresh.subscribe((val: string)=>{\n          if(val === 'reload'){\n            this.srv.tab.resetTab(true);\n            // this.srv.tab.refreshEntity(this.core.params.entityId, this.dom.repo, { bypassCache: true }, this.name).then(async()=>{\n            //   await this.srv.scheme.init( this.core, this.ui.tab );\n            //   this.srv.tab.resetTab();\n            // });\n          }\n        }));\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { PopDomService } from '../../../../services/pop-dom.service';\nimport { PopExtendComponent } from '../../../../pop-extend.component';\nimport { PopFieldEditorService } from '../pop-entity-field-editor.service';\nimport { CoreConfig, Dictionary, FieldInterface, PopBaseEventInterface, ServiceInjector } from '../../../../pop-common.model';\nimport { FieldItemModel, FieldItemModelConfig, IsValidFieldPatchEvent, SessionEntityFieldUpdate } from '../../pop-entity-utility';\nimport { IsObject, IsObjectThrowError, JsonCopy, StorageGetter } from '../../../../pop-common-utility';\nimport { SwitchConfig } from '../../../base/pop-field-item/pop-switch/switch-config.model';\n\n\n@Component( {\n  selector: 'lib-pop-entity-field-details',\n  templateUrl: './pop-entity-field-details.component.html',\n  styleUrls: [ './pop-entity-field-details.component.scss' ]\n} )\nexport class PopEntityFieldDetailsComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() field: FieldInterface;\n\n  public name = 'PopEntityFieldDetailsComponent';\n\n\n  protected srv: {\n    field: PopFieldEditorService,\n  };\n\n  protected asset = {};\n\n  public ui = {\n    field: <FieldInterface>undefined,\n    customSetting: <Dictionary<any>>{},\n    multiple: <SwitchConfig>undefined,\n  };\n\n\n  protected extendServiceContainer(){\n    this.srv = {\n      field: this.fieldRepo,\n    };\n    delete this.fieldRepo;\n  }\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService,\n    private fieldRepo: PopFieldEditorService,\n  ){\n    super();\n\n    this.extendServiceContainer();\n\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n        this.core = IsObjectThrowError( this.core, true, `${this.name}:configureDom: - this.core` ) ? this.core : null;\n        if( !this.field ) this.field = IsObjectThrowError( this.core, [ 'entity' ], `Invalid Core` ) && IsObjectThrowError( this.core.entity, [ 'id', 'fieldgroup' ], `Invalid Field` ) ? <FieldInterface>this.core.entity : null;\n        this._buildCustomSettings();\n        return resolve( true );\n      } );\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n        return resolve( true );\n      } );\n    };\n\n\n  }\n\n\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * Event handler for the parent tab to tell this name to reset itself\n   * @param reset\n   */\n  onBubbleEvent( event: PopBaseEventInterface ){\n    this.log.event( `onBubbleEvent`, event );\n    if( IsValidFieldPatchEvent( this.core, event ) ){\n      this.events.emit( event );\n    }\n  }\n\n\n  // /**\n  //  * Catch changes on custom setting fields and update them\n  //  * @param event\n  //  */\n  // onCustomSettingEvent(event: PopBaseEventInterface){\n  //   if( IsValidFieldPatchEvent(this.core, event) ){\n  //     this.dom.setTimeout(event.config.name, () => {\n  //       this.srv.field.storeCustomSetting(this.core, event).then(() => true);\n  //     }, 250);\n  //   }\n  // }\n\n\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  private _buildCustomSettings(){\n    const allowMultiple = this.srv.field.getViewMultiple( this.field.fieldgroup.name );\n    if( allowMultiple ){\n      let multiple = StorageGetter( this.core.repo, [ 'model', 'field', 'multiple' ] );\n      if( IsObject( multiple, [ 'model' ] ) ){\n        multiple = JsonCopy( multiple );\n        this.ui.multiple = new SwitchConfig( FieldItemModelConfig( this.core, FieldItemModel( this.core, multiple.model ) ) );\n        this.ui.multiple.patch.callback = ( core: CoreConfig, event: PopBaseEventInterface ) => {\n          SessionEntityFieldUpdate( this.core, event );\n          this.srv.field.triggerFieldPreviewUpdate();\n        };\n      }\n    }\n\n    // if( IsObject(this.ui.field.custom_setting, true) ){\n    //   Object.keys(this.ui.field.custom_setting).map((settingName) => {\n    //     const setting = this.ui.field.custom_setting[ settingName ];\n    //     const component = this.srv.field.getCustomSettingComponent(this.core, this.ui.field, setting);\n    //     component.position = this.position;\n    //     this.ui.customSetting[ setting.name ] = component;\n    //   });\n    // }\n  }\n\n\n}\n","import {Component, ElementRef, Input, OnDestroy, OnInit, ViewChild, ViewContainerRef} from '@angular/core';\nimport {PopExtendDynamicComponent} from '../../../../pop-extend-dynamic.component';\nimport {PopEntityService} from '../../services/pop-entity.service';\nimport {PopFieldEditorService} from '../pop-entity-field-editor.service';\nimport {\n  CoreConfig,\n  DynamicComponentInterface,\n  Entity,\n  FieldConfig, FieldEntry,\n  FieldInterface,\n  FieldItemInterface,\n  PopBaseEventInterface, PopLog, PopTemplate,\n  ServiceInjector\n} from '../../../../pop-common.model';\nimport {PopEntityFieldComponent} from '../../pop-entity-field/pop-entity-field.component';\nimport {SelectConfig} from '../../../base/pop-field-item/pop-select/select-config.model';\nimport {PopDomService} from '../../../../services/pop-dom.service';\nimport {DynamicSort, IsArray, IsObject, IsObjectThrowError, SpaceToSnake} from '../../../../pop-common-utility';\nimport {IsValidFieldPatchEvent} from '../../pop-entity-utility';\nimport {PopEntityUtilFieldService} from '../../services/pop-entity-util-field.service';\n\n\n@Component({\n  selector: 'lib-field-editor-preview',\n  templateUrl: './pop-entity-field-preview.component.html',\n  styleUrls: ['./pop-entity-field-preview.component.scss']\n})\nexport class PopEntityFieldPreviewComponent extends PopExtendDynamicComponent implements OnInit, OnDestroy {\n  @Input() field: FieldInterface;\n  @ViewChild('container', {read: ViewContainerRef, static: true}) private container;\n  public name = 'PopEntityFieldPreviewComponent';\n\n  protected asset = {\n    field: <FieldInterface>undefined,\n    fieldgroup: <Entity>undefined,\n    columnKeys: <string[]>undefined,\n  };\n\n  public ui = {\n    stateSelector: new SelectConfig({\n      label: 'State',\n      value: 'template_edit',\n      options: {\n        values: [\n          {value: 'template_edit', name: 'Template Access'},\n          {value: 'template_readonly', name: 'Template Readonly'},\n          {value: 'text_single', name: 'Text Single'},\n          {value: 'text_format', name: 'Text Format'},\n        ]\n      }\n    }),\n    field: <FieldConfig>undefined\n  };\n\n  protected srv = {\n    entity: <PopEntityService>ServiceInjector.get(PopEntityService),\n    editor: <PopFieldEditorService>ServiceInjector.get(PopFieldEditorService),\n    field: <PopEntityUtilFieldService>ServiceInjector.get(PopEntityUtilFieldService),\n  };\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService\n  ) {\n    super();\n\n\n    this.dom.configure = (): Promise<boolean> => {\n\n      return new Promise((resolve) => {\n\n\n        this.dom.handler.bubble = (core: CoreConfig, event: PopBaseEventInterface) => this.onBubbleEvent(event);\n\n        //  Verify configs\n        this.core = IsObjectThrowError(this.core, ['entity'], `${this.name}:configureDom: - this.core`) ? this.core : null;\n        this.field = IsObjectThrowError(this.core.entity, ['fieldgroup', 'entries'], `${this.name}:configureDom: - this.core`) ? <FieldInterface>this.core.entity : null;\n        this.asset.fieldgroup = this.field.fieldgroup;\n        // Create form session container to persist use input values\n        this.dom.session.form = {};\n        // Attach the container for the preview html\n        this.template.attach('container');\n        // Get a default set of data to populate the preview field items with\n        this.asset.columnKeys = this.core.entity.items.map((item) => {\n          return String(SpaceToSnake(item.name)).toLowerCase();\n        });\n        // this.asset.defaultData = this.srv.field.getDefaultValues(String(this.core.entityId.corefield.internal_name).toLowerCase(), this.asset.columnKeys);\n\n        if (this.dom.session.stateSelector) this.ui.stateSelector.control.setValue(this.dom.session.stateSelector, {emitEvent: true});\n\n        // Handle events\n        this.dom.handler.core = (core: CoreConfig, event: PopBaseEventInterface) => {\n          this.log.event(`_coreEventHandler`, event);\n          if (IsValidFieldPatchEvent(this.core, event) || (event.type === 'component' && (event.name === 'active-item' || event.name === 'update'))) {\n            this._triggerFieldPreview();\n          } else {\n            PopLog.warn(this.name, `Preview did not recognize event`, event);\n          }\n        };\n\n\n        this._triggerFieldPreview(250);\n        return resolve(true);\n      });\n    };\n\n\n    /**\n     * This function will call after the dom registration\n     */\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        this._setDataSession();\n        return resolve(true);\n      });\n    };\n  }\n\n\n  /**\n   * We expect the core to represent a field\n   * This component represents what the view of the current field will look like\n   * The component relies upon the FieldBuilderItemsComponent && FieldBuilderItemSettingsComponent to communicate when settings are changed so that the view can render the changes\n   */\n  ngOnInit() {\n    super.ngOnInit();\n  }\n\n\n  /**\n   * This handler manages events that come up from the preview fields, mostly just to session any values that the user enters, and simulate adding removing value entries\n   * The field input is saved because the setFieldPreview destroys the component and is called often, and the user should not have to re-enter test data every time a setting is changed\n   * @param event\n   */\n  onBubbleEvent(event: PopBaseEventInterface) {\n    this.log.event(`onBubbleEvent`, event);\n    if (IsObject(event, ['type', 'name']) && event.type === 'field') {\n      if (event.name === 'onFocus') {\n        // stub\n      } else if (event.name === 'onBlur' || event.name === 'patch') { // whenever a user blurs out of field save the data that is in it\n        if (event.config && event.config.control && event.config.control.value) {\n          this.dom.session.form[event.config.name] = event.config.control.value;\n          this.dom.store('onSession'); // dom.store must be called to for the dom to transfer its data up to the domRepo\n        }\n      } else if (event.name === 'add') { // whenever a user blurs out of field save the data that is in it\n        this._addFieldValue();\n      } else if (event.name === 'remove') { // whenever a user blurs out of field save the data that is in it\n        this._removeFieldValue();\n      }\n    }\n  }\n\n\n  /**\n   * Clean up the dom of this component\n   */\n  ngOnDestroy() {\n    this.template.destroy();\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  /**\n   * Create a new field label\n   */\n  private _addFieldValue() {\n    if (IsObject(this.ui.field, true)) {\n      if (this.dom.session.records < this.ui.field.multiple_max_limit) {\n        this.dom.session.records++;\n        this._triggerFieldPreview(0);\n      }\n\n    }\n  }\n\n\n  /**\n   * Remove an existing label\n   */\n  private _removeFieldValue() {\n    if (IsObject(this.ui.field, true)) {\n      if (this.dom.session.records > this.ui.field.multiple_min) {\n        this.dom.session.records--;\n        this._triggerFieldPreview(0);\n      }\n    }\n  }\n\n\n  /**\n   * Create sets of mock data for the fields entries\n   */\n  private _setDataSession() {\n    if (!this.dom.session.records) this.dom.session.records = this.field.multiple_min;\n    let index = 0;\n    if (!this.dom.session.data) {\n      this.dom.session.data = new Map();\n      while (index < 10) {\n        const defaultValues = this.srv.editor.getDefaultValues(String(this.asset.fieldgroup.name).toLowerCase());\n        this.dom.session.data.set(index, defaultValues);\n        index++;\n      }\n      this.dom.store('session');\n    }\n  }\n\n\n  /**\n   * Debounce the requests to reset the preview\n   * @param delay\n   */\n  private _triggerFieldPreview(delay = 250) {\n    this.dom.setTimeout('field-preview', () => {\n      this._setFieldPreview();\n    }, delay);\n  }\n\n\n  /**\n   * This will create a facade field that will a dynamically try to replicate how the field will look when it is in use\n   */\n  private _setFieldPreview() {\n    if (this.dom.repo.ui.activeItems) {\n\n      PopTemplate.clear();\n\n      const items = <any[]>this.field.items;\n\n      const entries = IsArray(this.field.entries, true) ? this.field.entries.filter((entry: FieldEntry) => {\n        return !entry.orphaned_at;\n      }).sort(DynamicSort('sort_order')) : [];\n\n      const fieldInterface = {\n        id: 1,\n        facade: true, // set to trigger demo like actions\n        canAdd: false,\n        canRemove: false,\n        configs: this.field.configs,\n        name: this.field.name,\n        label: this.field.label,\n        entries: entries,\n        fieldgroup: this.asset.fieldgroup,\n        internal_name: String(this.asset.fieldgroup.name).toLowerCase(),\n        multiple: this.field.multiple,\n        // multiple_min: this.field.multiple_min,\n        multiple_min: entries.length,\n        // multiple_max: this.field.multiple_max,\n        multiple_max: entries.length,\n        multiple_max_limit: 4,\n\n        data: {},\n        show_name: !!this.core.entity.show_name,\n        sort: 0,\n        state: this.ui.stateSelector.control.value,\n        items: <FieldItemInterface[]>[]\n      };\n\n      if (fieldInterface.multiple) {\n        // if( !fieldInterface.multiple_min ) fieldInterface.multiple_min = 1;\n        if (!fieldInterface.multiple_min) fieldInterface.multiple_min = entries.length;\n        // let valueIndex = 0;\n        let records = this.dom.session.records;\n        if (records < +fieldInterface.multiple_min) records = +fieldInterface.multiple_min;\n        if (+fieldInterface.multiple_max && records > fieldInterface.multiple_max) records = fieldInterface.multiple_max;\n        // while( valueIndex < records ){\n        //   fieldInterface.data[ valueIndex ] = this.dom.session.data.get( valueIndex );\n        //   valueIndex++;\n        // }\n        entries.map((entry, index) => {\n          fieldInterface.data[entry.id] = this.dom.session.data.get(index);\n        });\n      } else {\n        const singleEntry = entries[0];\n        fieldInterface.data[singleEntry.id] = this.dom.session.data.get(0);\n      }\n\n\n      fieldInterface.items = items.filter((item) => {\n        return +this.dom.repo.ui.activeItems[item.id] === 1;\n      }).map((item) => {\n        item.facade = true;\n        item.showMask = true;\n        item.bubble = true;\n        delete item.api;\n        return item;\n      });\n\n      this.ui.field = this.srv.field.buildCustomField(this.core, fieldInterface);\n\n\n      if (this.ui.field) {\n        const previewComponentList: DynamicComponentInterface[] = [];\n        const component = <DynamicComponentInterface>{\n          type: PopEntityFieldComponent,\n          inputs: {\n            core: this.core,\n            field: this.ui.field,\n          }\n        };\n        previewComponentList.push(component);\n        this.template.render(previewComponentList, [], true);\n      }\n    }\n    this.dom.ready();\n  }\n\n\n}\n","import { Component, ElementRef, OnDestroy, OnInit, ViewEncapsulation } from '@angular/core';\nimport { PopExtendComponent } from '../../../pop-extend.component';\nimport { PopFieldEditorService } from './pop-entity-field-editor.service';\nimport { PopDomService } from '../../../services/pop-dom.service';\nimport { TabConfig } from '../../base/pop-tab-menu/tab-menu.model';\nimport { CoreConfig, PopBaseEventInterface, PopHref, ServiceInjector } from '../../../pop-common.model';\nimport { PopEntityFieldSettingsComponent } from './pop-entity-field-settings/pop-entity-field-settings.component';\nimport { PopEntityFieldDetailsComponent } from './pop-entity-field-details/pop-entity-field-details.component';\nimport { PopTabMenuService } from '../../base/pop-tab-menu/pop-tab-menu.service';\nimport { IsObject, StorageGetter } from '../../../pop-common-utility';\nimport { PopEntityFieldPreviewComponent } from './pop-entity-field-preview/pop-entity-field-preview.component';\nimport { PopRouteHistoryResolver } from '../../../services/pop-route-history.resolver';\nimport { PopEntityUtilFieldService } from '../services/pop-entity-util-field.service';\n\n\n@Component( {\n  selector: 'lib-field-editor',\n  template: `\n    <lib-pop-entity-tab *ngIf=\"dom.state.loaded\" [tab]=ui.tab [core]=\"core\"></lib-pop-entity-tab>`,\n  styleUrls: [ './pop-entity-field-editor.scss' ],\n  providers: [ PopFieldEditorService ],\n  encapsulation: ViewEncapsulation.None,\n} )\nexport class PopEntityFieldEditorComponent extends PopExtendComponent implements OnInit, OnDestroy {\n\n  public name = 'PopEntityFieldEditorComponent';\n\n\n  protected srv = {\n    field: <PopFieldEditorService>undefined,\n    utilField: <PopEntityUtilFieldService>undefined,\n    history: <PopRouteHistoryResolver>ServiceInjector.get( PopRouteHistoryResolver ),\n    tab: <PopTabMenuService>undefined,\n  };\n\n\n  /**\n   * @param el\n   * @param _domRepo\n   * @param _fieldRepo\n   * @param _tabRepo\n   */\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService,\n    protected _fieldRepo: PopFieldEditorService,\n    protected _utilFieldRepo: PopEntityUtilFieldService,\n    protected _tabRepo: PopTabMenuService,\n  ){\n    super();\n\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n        if( !( IsObject( this.core, true ) ) ) this.core = this.srv.tab.getCore();\n        const fieldgroup = StorageGetter( this.core, [ 'entity', 'fieldgroup', 'name' ] );\n        if( fieldgroup ){\n          this.ui.tab = new TabConfig( {\n            id: 'general',\n            positions: {\n              1: {\n                header: 'Details',\n                flex: 1,\n                components: [\n                  {\n                    type: PopEntityFieldDetailsComponent,\n                    inputs: {\n                      id: 1\n                    },\n                  },\n                ]\n              },\n              2: {\n                flex: 2,\n                components: [\n                  {\n                    type: PopEntityFieldSettingsComponent,\n                    inputs: {\n                      id: 2\n                    },\n                  },\n                ]\n              },\n              3: {\n                flex: 1,\n                components: [\n                  {\n                    type: PopEntityFieldPreviewComponent,\n                    inputs: {\n                      id: 3\n                    },\n                  },\n                ]\n              },\n            },\n            wrap: true,\n            columnWrap: true,\n            overhead: 0,\n            onLoad: ( config: CoreConfig, tab: TabConfig ) => {\n              // console.log('config', config);\n              // console.log('tab', tab);\n            },\n\n            onEvent: ( core: CoreConfig, event: PopBaseEventInterface ) => {\n              // console.log('event', event);\n            },\n          } );\n          this.srv.field.register( this.core, this.dom.repo ).then( () => {\n            this.srv.utilField.clearCustomFieldCache( +this.core.entity.id );\n            return resolve( true );\n          } );\n\n        }else{\n          window.location.href = window.location.origin + '/' + PopHref;\n        }\n      } );\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n}\n","import { PopDatetimeService } from './../../../services/pop-datetime.service';\nimport { Component, OnInit, OnDestroy } from '@angular/core';\nimport { PopExtendComponent } from '../../../pop-extend.component';\nimport { SwitchConfig } from '../../base/pop-field-item/pop-switch/switch-config.model';\nimport { PopBaseEventInterface, PopEntity, PopTemplate, ServiceInjector } from '../../../pop-common.model';\nimport { PopEntityEventService } from '../services/pop-entity-event.service';\nimport { PopTabMenuService } from '../../base/pop-tab-menu/pop-tab-menu.service';\nimport { PopDomService } from '../../../services/pop-dom.service';\nimport { ButtonConfig } from '../../base/pop-field-item/pop-button/button-config.model';\nimport { IsValidChangeEvent } from '../pop-entity-utility';\nimport { GetHttpErrorMsg } from '../../../pop-common-utility';\n\n@Component( {\n  selector: 'lib-pop-entity-status',\n  templateUrl: './pop-entity-status.component.html',\n  styleUrls: [ './pop-entity-status.component.scss' ],\n} )\nexport class PopEntityStatusComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  name = 'PopEntityStatusComponent';\n\n  public ui = {\n    archive: <SwitchConfig>undefined,\n    valueButton: <ButtonConfig>undefined,\n    createdDate: <string>undefined,\n    showCopied: false\n  };\n\n  protected srv: {\n    events: PopEntityEventService,\n    tab: PopTabMenuService,\n    date: PopDatetimeService,\n  } = {\n    events: ServiceInjector.get( PopEntityEventService ),\n    tab: <PopTabMenuService>undefined,\n    date: ServiceInjector.get( PopDatetimeService )\n  };\n\n\n  constructor(\n    protected _domRepo: PopDomService,\n    protected _tabRepo: PopTabMenuService,\n  ){\n    super();\n    this.dom.configure = (): Promise<boolean> => {\n\n      // this component set the outer height boundary of this view\n      return new Promise( async( resolve ) => {\n        // Ensure that a CoreConfig exists for this component\n        this.dom.state.archived = this.core.entity.archived ? true : false;\n        this._setDate( this.core.entity.created_at );\n        this._setArchiveSwitch();\n        this.srv.tab.showAsLoading( false );\n\n        this.id = this.core.params.internal_name;\n        return resolve( true );\n\n      } );\n    };\n  }\n\n\n  ngOnInit(): void{\n    super.ngOnInit();\n  }\n\n\n  onLabelCopy(): void{\n    const nav = <any>navigator;\n    const body = String( this.core.entity.id ).slice();\n    nav.clipboard.writeText( body );\n\n    this.ui.showCopied = true;\n\n    setTimeout(()=>{\n      this.ui.showCopied = false;\n    },3000);\n  }\n\n\n  onArchiveChange( event: PopBaseEventInterface ){\n    if( IsValidChangeEvent( this.core, event ) ){\n      this._handleArchive( !event.config.control.value );\n    }\n  }\n\n\n  ngOnDestroy(): void{\n    super.ngOnDestroy();\n  }\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  private _setDate( date ){\n    this.ui.createdDate = this.srv.date.transform( date, 'date' );\n  }\n\n\n  private _setArchiveSwitch(){\n    this.ui.valueButton = new ButtonConfig( {\n      icon: 'file_copy',\n      value: `ID ${ this.core.entity.id }`,\n      size: 20,\n      radius: 5,\n      text: 12,\n      bubble: true,\n      event: 'click',\n      type: 'mat-flat-button'\n    } );\n    this.ui.archive = new SwitchConfig( {\n      name: 'archived',\n      bubble: true,\n      label: this.core.entity.archived ? 'ACTIVE' : 'ACTIVE',\n      labelPosition: 'before',\n      value: !this.core.entity.archived ? true : false,\n      patch: {\n        duration: 0,\n        field: '',\n        path: '',\n      },\n    } );\n  }\n\n\n  private _handleArchive( archive: boolean ){\n    console.log('_handleArchive', archive);\n    this.dom.state.archived = archive;\n    this.ui.archive.label = archive ? 'ACTIVE' : 'ACTIVE';\n    this.core.entity.archived = archive;\n    this.ui.archive.control.disable();\n    this.srv.tab.showAsLoading( true );\n    this.dom.setSubscriber( 'archive-entity', this.core.repo.archiveEntity( this.core.params.entityId, archive ).subscribe( () => {\n      this.srv.events.sendEvent( {\n        source: this.name,\n        method: 'archive',\n        type: 'entity',\n        name: this.core.params.name,\n        internal_name: this.core.params.internal_name,\n        id: this.core.params.entityId,\n        data: archive\n      } );\n      this.srv.tab.showAsLoading( false );\n      this.ui.archive.control.enable();\n      this.srv.tab.resetTab(true);\n      // this.srv.tab.refreshEntity( null, this.dom.repo, {}, `${this.name}:setArchived` ).then( () => PopTemplate.clear() );\n\n    }, err => {\n      this.dom.error.code = err.error.code;\n      this.dom.error.message = GetHttpErrorMsg(err);\n      this.ui.archive.control.enable();\n      this.srv.tab.showAsLoading( false );\n    } ) );\n\n  }\n}\n","import { TabComponentInterface, TabConfig, TabInterface } from '../../base/pop-tab-menu/tab-menu.model';\nimport { PopEntityFieldGroupComponent } from '../pop-entity-field-group/pop-entity-field-group.component';\nimport { PopEntityHistoryComponent } from '../pop-entity-history/pop-entity-history.component';\nimport { PopEntityAssignmentsComponent } from '../pop-entity-assignments/pop-entity-assignments.component';\nimport { CoreConfig, PopBaseEventInterface } from '../../../pop-common.model';\nimport { PopEntitySchemeComponent } from '../pop-entity-scheme/pop-entity-scheme.component';\nimport { PopEntityFieldEditorComponent } from '../pop-entity-field-editor/pop-entity-field-editor.component';\nimport { PopEntityStatusComponent } from '../pop-entity-status/pop-entity-status.component';\n\n\nexport const EntityGeneralTab =\n  new TabConfig( <TabInterface>{\n    id: 'general',\n    positions: {\n      1: {\n        flex: 1,\n        components: [\n          {\n            type: PopEntityStatusComponent,\n            inputs: {\n              position: 1\n            },\n          },\n          {\n            type: PopEntityFieldGroupComponent,\n            inputs: {\n              position: 1\n            },\n          },\n        ]\n      },\n      2: {\n        flex: 1,\n        components: [\n          {\n            type: PopEntityFieldGroupComponent,\n            inputs: {\n              position: 2\n            },\n          },\n        ]\n      },\n      3: {\n        flex: 2,\n        components: [\n          {\n            type: PopEntityFieldGroupComponent,\n            inputs: {\n              position: 2\n            },\n          },\n        ]\n      }\n    },\n  } );\n\n\nexport const EntityAssignmentTab =\n  new TabConfig( <TabInterface>{\n    id: 'assignments',\n    positions: {\n      1: {\n        header: null,\n        flex: 1,\n        components: <TabComponentInterface[]>[\n          { type: PopEntityAssignmentsComponent, inputs: {} }\n        ]\n      },\n    },\n  } );\n\n\nexport const EntitySchemeTab =\n  new TabConfig( {\n    id: 'general',\n    positions: {\n      1: {\n        flex: 1,\n        components: [\n          {\n            type: PopEntitySchemeComponent,\n            inputs: {\n              id: '1',\n            },\n          },\n        ]\n      },\n    },\n    columnWrap: false,\n    // wrap: false, // turn wrapper off ie. margin,  since  PopProfileSchemeComponent is another tab instance\n    onLoad: ( config: CoreConfig, tab: TabConfig ) => {\n      // console.log('config', config);\n      // console.log('tab', tab);\n    },\n\n    onEvent: ( core: CoreConfig, event: PopBaseEventInterface ) => {\n      // console.log('event', event);\n    },\n  } );\n\n\nexport const EntityHistoryTab =\n  new TabConfig( <TabInterface>{\n    id: 'history',\n    positions: {\n      1: {\n        header: null,\n        flex: 1,\n        components: <TabComponentInterface[]>[\n          {\n            type: PopEntityHistoryComponent,\n            inputs: {},\n          }\n        ]\n      }\n    },\n  } );\n\n\nexport const FieldEditorTab =\n  new TabConfig( {\n    id: 'general',\n    syncPositions: false,\n    positions: {\n      1: {\n        flex: 1,\n        components: [\n          {\n            type: PopEntityFieldEditorComponent,\n            inputs: {}\n          },\n        ]\n      },\n    },\n    onLoad: ( config: CoreConfig, tab: TabConfig ) => {\n      //       console.log('config', this);\n      // console.log('tab', tab);\n    },\n\n    onEvent: ( core: CoreConfig, event: PopBaseEventInterface ) => {\n      // console.log('event', event);\n    },\n  } );\n\n\n","import {Injectable, isDevMode} from '@angular/core';\nimport {\n  HttpEvent,\n  HttpInterceptor,\n  HttpHandler,\n  HttpRequest,\n  HttpErrorResponse,\n  HttpHeaders\n} from '@angular/common/http';\nimport {PopBaseService} from './pop-base.service';\nimport {Observable} from 'rxjs';\nimport {tap, catchError} from 'rxjs/operators';\nimport {PopHref, PopTemplate, SetPopMessage} from '../pop-common.model';\nimport {GetHttpErrorMsg, IsObject, SetSiteVar} from '../pop-common-utility';\nimport {Router} from '@angular/router';\n\n\n@Injectable()\nexport class HeaderInterceptor implements HttpInterceptor {\n\n  constructor(private base: PopBaseService) {\n  }\n\n\n  intercept(request: HttpRequest<any>, next: HttpHandler) {\n\n    let headers;\n    // If SkipHeaderInterceptor has been set then skip this interceptor\n    if (request.headers.has('SkipAuthHeaderInterceptor')) {\n      headers = request.headers.delete('SkipAuthHeaderInterceptor');\n      return next.handle(request.clone({headers}));\n    }\n\n    headers = new HttpHeaders({\n      'Authorization': this.base.getBearerToken(),\n      'X-Popcx-Business': request.headers.get('x-popcx-business'),\n      'Content-Type': request.headers.get('content-type') || 'application/json',\n      'Api-Version': request.headers.get('api-version') || '1',\n    });\n    const newReq = request.clone({headers});\n\n    // send cloned request with header to the next handler.\n    return next.handle(newReq);\n  }\n}\n\n\n@Injectable()\nexport class Response401Interceptor implements HttpInterceptor {\n\n  constructor(\n    private baseService: PopBaseService,\n    private router: Router\n  ) {\n  }\n\n\n  intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n\n    // If SkipResponse401Interceptor has been set then skip this interceptor.\n    if (request && request.headers && request.headers.has('SkipResponse401Interceptor')) {\n      const headers = request.headers.delete('SkipResponse401Interceptor');\n      return next.handle(request.clone({headers}));\n    }\n\n    return next.handle(request).pipe(\n      tap(() => {\n        this.baseService.setAuthTime();\n      }),\n      catchError((err: HttpErrorResponse) => {\n        const currentPath = window.location.href.split(PopHref)[1];\n        if (err.status >= 500) {\n          const message = GetHttpErrorMsg(err);\n          if (currentPath && !currentPath.includes('error/500')) {\n            SetPopMessage((isDevMode() ? message : 'Something went wrong!'));\n            this.router.navigate(['system/error/500'], {skipLocationChange: true});\n          }\n        } else if (err.status === 403) {\n          const message = GetHttpErrorMsg(err);\n\n          if (message === 'Your email address is not verified.') {\n            if (currentPath && !currentPath.includes('/user/email/resend')) {\n              window.location.href = window.location.protocol + '//' + window.location.host + '/user/email/resend';\n            }\n          } else {\n            if (currentPath && !currentPath.includes('error/403')) {\n              SetPopMessage(isDevMode() ? message : 'Access Denied!');\n              this.router.navigate(['system/error/403'], {skipLocationChange: true});\n            }\n          }\n        } else if (err.status === 404) {\n          const message = GetHttpErrorMsg(err);\n          if (currentPath && !currentPath.includes('error/404')) {\n            SetPopMessage(isDevMode() ? message : 'Something went wrong!');\n            this.router.navigate(['system/error/404'], {skipLocationChange: true});\n          }\n        } else if (err.status === 401) {\n          if (isDevMode()) {\n            if (IsObject(PopTemplate)) {\n              PopTemplate.error({code: 401, message: 'UNAUTHENTICATED'});\n            }\n          } else {\n            SetSiteVar('redirectAfterLogin', window.location.href);\n            this.baseService.clearAuthTime();\n            this.baseService.clearLocalStorage();\n            window.location.href = window.location.protocol + '//' + window.location.host + '/user/legacy/auth/clear';\n          }\n        } else {\n          return next.handle(request);\n        }\n      })\n    );\n  }\n}\n\n","import { NativeDateAdapter } from '@angular/material/core';\nimport { Injectable } from \"@angular/core\";\n\n/** Adapts the native JS Date for use with cdk-based modules that work with dates. */\n\n@Injectable()\nexport class CustomDateAdapter extends NativeDateAdapter {\n\n  // parse the date from input component as it only expect dates in\n  // mm-dd-yyyy format\n  // parse(value: any): Date | null {\n  //   if ((typeof value === 'string') && (value.indexOf('/') > -1)) {\n  //     const str = value.split('/');\n  //\n  //     const year = Number(str[2]);\n  //     const month = Number(str[1]) - 1;\n  //     const date = Number(str[0]);\n  //\n  //     return new Date(year, month, date);\n  //   }\n  //   const timestamp = typeof value === 'number' ? value : Date.parse(value);\n  //   return isNaN(timestamp) ? null : new Date(timestamp);\n  // }\n\n  getFirstDayOfWeek(): number {\n    return 1;\n  }\n}\n","import { Component, ElementRef, isDevMode, OnDestroy, OnInit } from '@angular/core';\nimport { PopExtendComponent } from '../../../../pop-extend.component';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { PopMessage, PopTemplate, ServiceInjector, SetPopMessage } from '../../../../pop-common.model';\nimport { PopDomService } from '../../../../services/pop-dom.service';\n\n@Component({\n  selector: 'lib-pop-error-redirect',\n  templateUrl: './pop-error-redirect.component.html',\n  styleUrls: ['./pop-error-redirect.component.scss']\n})\nexport class PopErrorRedirectComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  public name = 'PopErrorRedirectComponent';\n\n  protected srv = {\n    router: <Router>ServiceInjector.get( Router ),\n  };\n\n  public ui = {\n    code: <number>undefined,\n    message: <string>undefined\n  };\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService,\n    private route: ActivatedRoute\n  ){\n    super();\n\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n        this.dom.state.isDevMode = isDevMode();\n        this.dom.setHeight(PopTemplate.getContentHeight(), 120);\n        this._setRoute();\n        resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n    \n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    SetPopMessage(null);\n    super.ngOnDestroy();\n  }\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  private _setRoute(){\n    this.ui.code = this.route.snapshot.params.code || 404;\n    this.ui.message = PopMessage;\n  }\n\n}\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { PopCacheRedirectUrl, PopTemplate, ServiceInjector, SetPopCacheRedirectUrl, SetPopMessage } from '../../../../pop-common.model';\nimport { PopEntityService } from '../../../entity/services/pop-entity.service';\nimport { PopExtendComponent } from '../../../../pop-extend.component';\nimport { Router } from '@angular/router';\nimport { IsString } from '../../../../pop-common-utility';\n\n\n@Component( {\n  selector: 'lib-pop-cache-redirect',\n  templateUrl: './pop-cache-redirect.component.html',\n  styleUrls: [ './pop-cache-redirect.component.scss' ]\n} )\nexport class PopCacheRedirectComponent extends PopExtendComponent implements OnInit, OnDestroy {\n\n  public name = 'PopCacheRedirectComponent';\n\n  protected srv = {\n    router: <Router>ServiceInjector.get( Router ),\n    entity: <PopEntityService>ServiceInjector.get( PopEntityService ),\n  };\n\n  public ui = {\n    code: <number>undefined,\n    message: <string>undefined\n  };\n\n\n  constructor(){\n    super();\n\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n        this.dom.setHeight( PopTemplate.getContentHeight(), 120 );\n        PopTemplate.clear();\n        this.srv.entity.bustAllCache();\n        return resolve( true );\n      } );\n    };\n\n    this.dom.proceed = () => {\n      return new Promise( async( resolve ) => {\n        this.dom.setTimeout( `cache-redirect`, () => {\n          if(IsString(PopCacheRedirectUrl, true)){\n            this.srv.router.navigate( [ PopCacheRedirectUrl ], {skipLocationChange: true} ).then(()=>{\n              // console.log('cache redirect success');\n              return true;\n            });\n          } else{\n            this.srv.router.navigate(['system/route']);\n          }\n\n        }, 250 );\n\n        return resolve( true );\n      } );\n    };\n\n  }\n\n\n  /**\n   * This component allows a redirect that will clear all cache and then return back to the url\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    SetPopCacheRedirectUrl( null );\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n}\n","import {Component, isDevMode, OnDestroy, OnInit} from '@angular/core';\nimport {IsObject, IsString, RandomArrayElement, Sleep} from '../../../../pop-common-utility';\nimport {PopExtendComponent} from '../../../../pop-extend.component';\nimport {PopBusiness, PopHref} from '../../../../pop-common.model';\nimport {Route, Router} from '@angular/router';\nimport {PopBaseService} from \"../../../../services/pop-base.service\";\nimport {MainSpinner} from \"../../pop-indicators/pop-indicators.model\";\n\n\n@Component({\n  selector: 'lib-pop-guard-redirect',\n  templateUrl: './pop-guard-redirect.component.html',\n  styleUrls: ['./pop-guard-redirect.component.scss']\n})\nexport class PopGuardRedirectComponent extends PopExtendComponent implements OnInit, OnDestroy {\n\n  protected srv = {\n    base: <PopBaseService>undefined,\n    router: <Router>undefined\n  };\n\n  protected asset = {\n    sentimentIndex: 0,\n    sentiments: [\n      'sentiment_very_dissatisfied',\n      'sentiment_dissatisfied',\n      'sentiment_satisfied',\n      'sentiment_satisfied_alt',\n      'sentiment_very_satisfied',\n    ],\n    exclamations: [\n      `DUH!`,\n      `THIS SUCKS!`,\n      `TRY AGAIN!`,\n      `WASN'T ME!`,\n      `SHOOT!`,\n      `GO HOME, I'M DRUNK!`,\n      `Y U NO FIND ROUTE!`,\n      `WHERE AM I!`,\n    ],\n    route: <Route>undefined\n  };\n\n  public ui = {\n    exclamation: <string>undefined,\n    sentiment: <string>undefined,\n    spinner: <MainSpinner>undefined,\n  };\n\n\n  constructor(\n    protected _baseRepo: PopBaseService,\n    protected _routerRepo: Router,\n  ) {\n    super();\n\n    this.dom.configure = () => {\n      return new Promise<boolean>(async (resolve) => {\n\n        await Promise.all([\n          this.setInitialConfig()\n        ]);\n\n        // this._improveSentiment();\n        // this._routeApp();\n\n        return resolve(true);\n      });\n    };\n\n  }\n\n\n  ngOnInit(): void {\n    super.ngOnInit();\n  }\n\n\n  ngOnDestroy(): void {\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  private setInitialConfig(): Promise<boolean> {\n    return new Promise<boolean>((resolve) => {\n      this.dom.state.isDevMode = isDevMode();\n      this.ui.sentiment = this.asset.sentiments[this.asset.sentimentIndex];\n      this.ui.exclamation = RandomArrayElement(this.asset.exclamations);\n      this.asset.route = this.srv.router.config.find((r: Route) => {\n        return IsString(r.path, true) && !r.canActivate && !r.redirectTo;\n      });\n\n      this.ui.spinner = <MainSpinner>{\n        color: 'accent'\n      };\n      return resolve(true);\n    });\n  }\n\n  private _improveSentiment() {\n    this.dom.setTimeout(`improve-sentiment`, () => {\n      if (this.asset.sentiments[this.asset.sentimentIndex + 1]) {\n        this.asset.sentimentIndex++;\n        this.ui.sentiment = this.asset.sentiments[this.asset.sentimentIndex];\n        this._improveSentiment();\n      } else {\n        this.dom.setTimeout(`improve-sentiment`, null);\n        this.ui.exclamation = 'ALL GOOD!';\n        this._routeApp();\n      }\n    }, 400);\n  }\n\n  /**\n   *\n   * @private\n   */\n  private _routeApp() {\n    this.dom.setTimeout(`re-route`, () => {\n      if (IsObject(PopBusiness, ['id'])) {\n        if (IsObject(this.asset.route, ['path'])) {\n          console.log('DIAGNOSE Redirect ISSUE: Redirect Path', this.asset.route.path);\n          if (this.srv.base.checkAppAccess(PopHref, true)) {\n            this.srv.router.navigateByUrl(this.asset.route.path).catch((e) => console.log('e', e));\n          }\n        } else {\n          if (!this.dom.state.isDevMode && IsString(PopHref, true) && PopHref !== 'home') window.location.href = window.location.protocol + '//' + window.location.host + '/home';\n        }\n      } else {\n        if (!this.dom.state.isDevMode && IsString(PopHref, true) && PopHref !== 'user') window.location.href = window.location.protocol + '//' + window.location.host + '/user/profile';\n      }\n    }, 400);\n  }\n\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MaterialModule } from '../../material/material.module';\nimport { PopErrorRedirectComponent } from './pop-error-redirect/pop-error-redirect.component';\nimport { PopCacheRedirectComponent } from './pop-cache-redirect/pop-cache-redirect.component';\nimport { PopIndicatorsModule } from '../pop-indicators/pop-indicators.module';\nimport { PopGuardRedirectComponent } from './pop-guard-redirect/pop-guard-redirect.component';\n\n\n@NgModule({\n  declarations: [\n    PopErrorRedirectComponent,\n    PopCacheRedirectComponent,\n    PopGuardRedirectComponent\n  ],\n  imports: [\n    CommonModule,\n    MaterialModule,\n    PopIndicatorsModule\n  ],\n  providers: [],\n  exports: [\n    PopErrorRedirectComponent,\n    PopCacheRedirectComponent,\n    PopGuardRedirectComponent\n  ]\n})\nexport class PopRedirectsModule {\n}\n","import { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, CanActivate, Router } from '@angular/router';\nimport { PopMessage } from '../../../pop-common.model';\nimport { IsString } from '../../../pop-common-utility';\n\n\n@Injectable( {\n  providedIn: 'root',\n} )\nexport class PopRedirectGuard implements CanActivate {\n  constructor(\n    private router: Router\n  ){\n  }\n\n\n  canActivate( route: ActivatedRouteSnapshot ): Promise<boolean>{\n    return new Promise<boolean>( async(resolve) => {\n      if( IsString( PopMessage, true ) ){\n        return resolve(true);\n      }else{\n        return this.router.navigateByUrl('system/route');\n      }\n    } );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, CanActivate, Router } from '@angular/router';\nimport { PopCacheRedirectUrl } from '../../../pop-common.model';\nimport { IsString } from '../../../pop-common-utility';\n\n\n@Injectable( {\n  providedIn: 'root',\n} )\nexport class PopCacheRedirectGuard implements CanActivate {\n  constructor( private router: Router ){\n\n  }\n\n\n  canActivate( route: ActivatedRouteSnapshot ): Promise<boolean>{\n    return new Promise<boolean>( async( resolve ) => {\n      if( IsString( PopCacheRedirectUrl, true ) ){\n        return resolve( true );\n      }else{\n        return this.router.navigateByUrl( 'system/route' );\n      }\n    } );\n  }\n}\n","import { HttpBackend, HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';\nimport { Inject, Injectable, isDevMode } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { ConvertObjectToUri, IsArray, IsObject, IsString } from '../pop-common-utility';\nimport { PopBusiness } from '../pop-common.model';\nimport { PopExtendService } from './pop-extend.service';\n\n\n@Injectable( {\n  providedIn: 'root'\n} )\nexport class PopRequestExternalService extends PopExtendService {\n  protected name = 'PopRequestExternalService';\n  private baseUrl: string;\n  private http: HttpClient;\n\n  private urlRegex = new RegExp( '^(https?:\\\\/\\\\/)?' + // protocol\n    '((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.)+[a-z]{2,}|' + // domain name\n    '((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))' + // OR ip (v4) address\n    '(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+]*)*' + // port and path\n    '(\\\\?[;&a-z\\\\d%_.~+=-]*)?' + // query string\n    '(\\\\#[-a-z\\\\d_]*)?$', 'i' );\n\n\n  constructor(\n    private httpBackend: HttpBackend\n  ){\n    super();\n    this.http = new HttpClient( this.httpBackend );\n  }\n\n\n  public getBaseUrl(){\n    return this.baseUrl.slice();\n  }\n\n\n  public setBaseUrl( baseUrl: string ): void{\n    if( IsString( baseUrl, true ) ){\n      this.baseUrl = baseUrl;\n    }\n  }\n\n\n  doGet( url: string, params: object = {}, headers: { [ name: string ]: string | string[] } = {} ): Observable<any>{\n    if( this._checkUrl( url ) ){\n      const options = {\n        headers: new HttpHeaders( headers ),\n        params: this._setParams( params )\n      };\n\n      return this.http.get<any>( `${ url }`, options );\n    }else{\n      return of( null );\n    }\n  }\n\n\n  doDelete( url: string, body: object = null, headers: { [ name: string ]: string | string[] } = {} ): Observable<any>{\n    if( this._checkUrl( url ) ){\n      const options = {\n        headers: new HttpHeaders( headers ),\n        body: body,\n      };\n      return this.http.delete<any>( url, options );\n    }else{\n      return of( null );\n    }\n  }\n\n\n  doPatch( url: string, data: object, headers: { [ name: string ]: string | string[] } = {} ): Observable<any>{\n    if( this._checkUrl( url ) ){\n      const options = {\n        headers: new HttpHeaders( headers ),\n      };\n      return this.http.patch( url, JSON.stringify( data ), options );\n    }else{\n      return of( null );\n    }\n  }\n\n\n  doPost( url: string, data: object, headers: { [ name: string ]: string | string[] } = {} ): Observable<any>{\n    if( this._checkUrl( url ) ){\n      const options = {\n        headers: new HttpHeaders( headers ),\n      };\n      return this.http.post<any>( url, JSON.stringify( data ), options );\n    }else{\n      return of( null );\n    }\n\n  }\n\n\n  private _setParams( body ){\n    let params: HttpParams = new HttpParams();\n    for( const key of Object.keys( body ) ){\n      if( body[ key ] ){\n        if( body[ key ] instanceof Array ){\n          body[ key ].forEach( ( item ) => {\n            params = params.append( `${key.toString()}[]`, item );\n          } );\n        }else{\n          params = params.append( key.toString(), body[ key ] );\n        }\n      }\n    }\n    return params;\n  }\n\n\n  private _checkUrl( url: string ): boolean{\n    const valid = !!this.urlRegex.test( url );\n    if( !valid ){\n      throw new Error( `Invalid Url: ${url}` );\n    }\n    return true;\n  }\n}\n\n","import {Inject, Injectable, OnDestroy} from '@angular/core';\n\nimport {PopExtendService} from \"../../../services/pop-extend.service\";\nimport {\n  AppGlobalInterface,\n  Dictionary,\n  DynamicComponentInterface,\n  PopLog,\n  ResourceInterface,\n  SchemeComponentConfig,\n  SchemeComponentModelInterface,\n  SchemeComponentOptionInterface,\n  SchemeComponentParamInterface,\n  SchemeComponentSettingInterface\n} from \"../../../pop-common.model\";\nimport {TabConfig} from \"../../base/pop-tab-menu/tab-menu.model\";\nimport {PopResourceService} from \"../../../services/pop-resource.service\";\nimport {DeepMerge, IsArray, IsObject, IsString, SnakeToPascal, TitleCase} from \"../../../pop-common-utility\";\nimport {EvaluateWhenConditions} from \"../pop-entity-utility\";\nimport {PopEntitySchemeCustomComponent} from \"../pop-entity-scheme/pop-entity-scheme-custom-component/pop-entity-scheme-custom.component\";\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PopEntitySchemeComponentService extends PopExtendService implements OnDestroy {\n\n  protected asset = {\n    action: <Map<string, Dictionary<any>>>new Map<string, Dictionary<any>>(),\n    base: <Map<string, SchemeComponentConfig>>new Map<string, SchemeComponentConfig>(),\n    setting: <Map<string, SchemeComponentSettingInterface>>new Map<string, SchemeComponentSettingInterface>(),\n    component: <Map<string, DynamicComponentInterface>>new Map<string, DynamicComponentInterface>(),\n    param: <Map<string, SchemeComponentParamInterface>>new Map<string, SchemeComponentParamInterface>(),\n    resource: <Map<string, Dictionary<ResourceInterface>>>new Map<string, Dictionary<ResourceInterface>>(),\n    option: <Map<string, SchemeComponentOptionInterface>>new Map<string, SchemeComponentOptionInterface>(),\n    tabs: <Map<string, TabConfig[]>>new Map<string, TabConfig[]>(),\n    baseImageUrl: '',\n  };\n\n\n  /**\n   * This srv is used in the\n   * @param env\n   */\n  constructor(\n    private resource: PopResourceService,\n    @Inject('APP_GLOBAL') private APP_GLOBAL: AppGlobalInterface,\n    @Inject('env') private env?\n  ) {\n    super();\n\n    setTimeout(async () => {\n      await APP_GLOBAL.isVerified();\n      this.asset.baseImageUrl = IsString(this.env.s3BucketUrl, true) ? this.env.s3BucketUrl : 'https://popcx-dev-public.s3-us-west-2.amazonaws.com';\n    }, 0);\n  }\n\n\n  /**\n   * Configure/Extend the default behavior of an entity\n   * @param internal_name\n   * @param extend\n   */\n  configure(internal_name: string, extend: SchemeComponentModelInterface) {\n    if (IsObject(extend.component, ['type'])) this.setComponent(internal_name, extend.component);\n    if (IsArray(extend.tab, true)) this.setTab(internal_name, extend.tab);\n    if (IsObject(extend.action, true)) this.setAction(internal_name, extend.action);\n    if (IsObject(extend.resource, true)) this.setResource(internal_name, extend.resource);\n    if (IsObject(extend.setting, true)) this.setSetting(internal_name, extend.setting);\n    if (IsObject(extend.option, true)) this.setOption(internal_name, extend.option);\n  }\n\n\n  /**\n   * A method to get a Core Config for an entity\n   * Uses cache service to improve performance\n   * ALL ENTITY RELATED COMPONENTS RELY ON THIS !!!!\n   * @param entityParams\n   * @param metadata\n   */\n  getConfig(internal_name: string, item: SchemeComponentParamInterface): Promise<SchemeComponentConfig> {\n    return new Promise<SchemeComponentConfig>(async (resolve) => {\n      let config = await this._getBaseConfig(internal_name);\n      if (item && item.id) {\n        config.id = item.id;\n        config.param.id = item.id;\n        config.preferences = await this._getPreferences(config.param);\n        const settingComponent = config.setting.component;\n        config = DeepMerge(config, item);\n        config.setting.component = settingComponent ? settingComponent : null;\n      }\n      await this.getResources(config);\n\n      return resolve(config);\n    });\n  }\n\n\n  /**\n   * This will do all of the work of building and storing the base config for each entity\n   * @param internal_name\n   * @param routes\n   * @private\n   */\n  private _getBaseConfig(internal_name: string): Promise<SchemeComponentConfig> {\n    return new Promise((resolve) => {\n      if (!this.asset.base.has(internal_name)) {\n        const param = this.getParams(internal_name);\n        const base = new SchemeComponentConfig({\n          param: param,\n          component: this.getComponent(internal_name),\n          setting: this.getSetting(internal_name),\n          option: this.getOption(internal_name),\n          resource: this.getResource(internal_name),\n        });\n        this.asset.base.set(internal_name, base);\n        return resolve(base);\n      } else {\n        return resolve({...this.asset.base.get(internal_name)});\n      }\n    });\n  }\n\n\n  /**\n   * Get the base set of the entity definitions\n   * These is the starting point when it comes to entities\n   * @param internal_name\n   * @param entityId\n   */\n  getParams(internal_name: string): SchemeComponentParamInterface {\n    let widgetParams = null;\n    if (this.asset.param.has(internal_name)) {\n      widgetParams = {...this.asset.param.get(internal_name)};\n    } else {\n      // temporary\n      widgetParams = {internal_name: internal_name, name: TitleCase(SnakeToPascal(internal_name))};\n    }\n    return widgetParams;\n  }\n\n\n  /**\n   * Get the set of tab configs that belong to an entity\n   */\n  getTabs(widget?: SchemeComponentConfig): TabConfig[] {\n    if (IsObject(widget, ['param']) && this.asset.tabs.has(widget.param.internal_name)) {\n      const tabs = this.asset.tabs.get(widget.param.internal_name).filter((tab) => {\n        return EvaluateWhenConditions(widget, tab.when);\n      });\n      return [...tabs];\n    } else {\n      return [];\n    }\n  }\n\n\n  /**\n   * A Http call that gets the entity metadata\n   * @param id Primary Key of the entity\n   */\n  getResources(widget: SchemeComponentConfig): Promise<boolean> {\n    return new Promise(async (resolve) => {\n      if (IsObject(widget.resource, true)) {\n        const success = await this.resource.setCollection(widget.resource);\n        if (success) {\n          this.resource.getCollection(widget.resource);\n          return resolve(true);\n        } else {\n          resolve(false);\n        }\n      } else {\n        resolve(false);\n      }\n    });\n  }\n\n\n  /**\n   * Set the base definitions for an entity\n   * Each entity needs to define these so we know how to talk to the api in regards to it\n   * The api should provide this details as part of the auth token\n   * @param internal_name\n   * @param entityId\n   */\n  setParam(param: SchemeComponentParamInterface) {\n    if (IsObject(param, ['internal_name', 'name'])) {\n      PopLog.info(this.name, `Params set for ${param.internal_name}`, param);\n      this.asset.param.set(param.internal_name, param);\n    }\n  }\n\n\n  /**\n   * Attach a set of tab configs to an entity\n   * @param internal_name\n   * @param tabs\n   */\n  setTab(internal_name: string, tabs: TabConfig[]) {\n    if (IsString(internal_name, true) && Array.isArray(tabs)) {\n      PopLog.info(this.name, `Entity Tabs set for ${internal_name}`, tabs);\n      this.asset.tabs.set(internal_name, tabs);\n    }\n  }\n\n\n  /**\n   * Attach a component to a widget\n   * @param internal_name\n   * @param tabs\n   */\n  setComponent(internal_name: string, component: DynamicComponentInterface) {\n    if (IsString(internal_name, true) && IsObject(component, ['type'])) {\n      PopLog.info(this.name, `Component set for ${internal_name}`, component);\n      this.asset.component.set(internal_name, component);\n    }\n  }\n\n\n  /**\n   * Attach a set of actions to an entity\n   * @param internal_name\n   * @param tabs\n   */\n  setAction(internal_name: string, action: Dictionary<any>): void {\n    if (IsString(internal_name, true) && IsObject(action)) {\n      PopLog.info(this.name, `Action set for ${internal_name}`, action);\n      this.asset.action.set(internal_name, action);\n    }\n  }\n\n\n  /**\n   * Attach a set of resources to an entity\n   * @param internal_name\n   * @param tabs\n   */\n  setResource(internal_name: string, resource: Dictionary<ResourceInterface>): void {\n    if (IsString(internal_name, true) && IsObject(resource)) {\n      PopLog.info(this.name, `Entity Resource set for ${internal_name}`, resource);\n      this.asset.resource.set(internal_name, resource);\n    }\n  }\n\n\n  /**\n   * Attach a set of options to widget\n   * @param internal_name\n   * @param tabs\n   */\n  setOption(internal_name: string, option: SchemeComponentOptionInterface): void {\n    if (IsString(internal_name, true) && IsObject(option)) {\n      PopLog.info(this.name, `Option set for ${internal_name}`, option);\n      this.asset.option.set(internal_name, option);\n    }\n  }\n\n\n  /**\n   * Attach a set of options to widget\n   * @param internal_name\n   * @param tabs\n   */\n  setSetting(internal_name: string, setting: SchemeComponentSettingInterface): void {\n    if (IsString(internal_name, true) && IsObject(setting)) {\n      PopLog.info(this.name, `Setting set for ${internal_name}`, setting);\n      this.asset.setting.set(internal_name, setting);\n    }\n  }\n\n\n  /**\n   * Get extended fields attached to an entity\n   * @param internal_name\n   * @param tabs\n   */\n  getResource(internal_name: string): Dictionary<ResourceInterface> {\n    if (IsString(internal_name, true)) {\n      const resource = this.asset.resource.get(internal_name);\n      return resource ? resource : {};\n    }\n  }\n\n\n  /**\n   * Get extended actions attached to an entity\n   * @param internal_name\n   * @param tabs\n   */\n  getAction(internal_name: string): Dictionary<any> {\n    if (IsString(internal_name, true)) {\n      const action = this.asset.action.get(internal_name);\n      return action ? action : {};\n    }\n  }\n\n\n  /**\n   * Get extended actions attached to an entity\n   * @param internal_name\n   * @param tabs\n   */\n  getSetting(internal_name: string): SchemeComponentSettingInterface {\n    if (IsString(internal_name, true)) {\n      const setting = this.asset.setting.get(internal_name);\n      return setting ? setting : {};\n    }\n  }\n\n\n  /**\n   * Get extended actions attached to an entity\n   * @param internal_name\n   * @param tabs\n   */\n  getOption(internal_name: string): SchemeComponentOptionInterface {\n    if (IsString(internal_name, true)) {\n      const option = this.asset.option.get(internal_name);\n      return option ? option : {};\n    }\n  }\n\n\n  /**\n   * Get extended actions attached to an entity\n   * @param internal_name\n   * @param tabs\n   */\n  getComponent(internal_name: string): DynamicComponentInterface {\n    if (IsString(internal_name, true)) {\n      const component = this.asset.component.get(internal_name);\n      return component ? component : null;\n    }\n  }\n\n\n  ngOnDestroy() {\n    console.log(this.name, `destroyed:${this.id}`);\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n\n\n\n  private _getPreferences(param: SchemeComponentParamInterface): Promise<Dictionary<any>> {\n    return new Promise<Dictionary<any>>((resolve) => {\n      return resolve(<Dictionary<any>>{});\n    });\n\n  }\n\n\n  getDefaultComponentSetting(internalName: string): SchemeComponentSettingInterface {\n    const setting = <SchemeComponentSettingInterface>{\n      client_id: [],\n      account_id: [],\n      campaign_id: [],\n      edit: true,\n      refresh: true\n    };\n\n    return setting;\n  }\n\n\n  getDefaultComponentOption(internalName: string): SchemeComponentOptionInterface {\n    const option = <SchemeComponentOptionInterface>{\n      client_id: [],\n      account_id: [],\n      campaign_id: [],\n      edit: true,\n      refresh: true\n    };\n\n    return option;\n  }\n\n\n}\n","import {\n  ComponentFactoryResolver,\n  Inject,\n  Injector,\n  isDevMode,\n  ModuleWithProviders,\n  NgModule,\n  OnDestroy,\n  Renderer2\n} from '@angular/core';\nimport {BehaviorSubject, forkJoin, Subject, Subscription} from 'rxjs';\nimport {PopBaseService} from '../services/pop-base.service';\nimport {PopCacFilterBarService} from './app/pop-cac-filter/pop-cac-filter.service';\nimport {PopDatetimeService} from '../services/pop-datetime.service';\nimport {PopEntityService} from './entity/services/pop-entity.service';\nimport {PopLogService} from '../services/pop-log.service';\nimport {PopRouteHistoryResolver} from '../services/pop-route-history.resolver';\nimport {PopPipeService} from '../services/pop-pipe.service';\nimport {PopEntityUtilPortalService} from './entity/services/pop-entity-util-portal.service';\nimport {PopRequestService} from '../services/pop-request.service';\nimport {PopTemplateService} from './app/pop-template.service';\nimport {PlatformLocation} from '@angular/common';\nimport {\n  SetServiceInjector,\n  SetPopApp,\n  SetPopAuth,\n  SetPopBusiness,\n  SetPopDate,\n  SetPopEntity,\n  SetPopHistory,\n  SetPopHref,\n  SetPopLogger,\n  SetPopPipe,\n  SetPopPortal,\n  SetPopRequest,\n  SetPopUser,\n  PopBusiness,\n  PopEntity,\n  PopHref,\n  PopLog,\n  PopTask,\n  AppMenusInterface,\n  SetPopRouteAliasMap,\n  Entity,\n  AppGlobalInterface,\n  AppWidgetsInterface,\n  PopUser,\n  AppGlobalParamInterface,\n  PopAuth,\n  PopPipe,\n  SetPopTemplate,\n  AppThemeInterface,\n  SetPopExternalApi,\n  SetPopSchemeComponent,\n  SetPopComponentResolver,\n  SetPopEnv, PopApp, PopTemplate,\n} from '../pop-common.model';\nimport {\n  GetSessionSiteVar,\n  GetSiteVar,\n  IsArray,\n  IsCallableFunction, IsDefined,\n  IsObject, IsString,\n  IsUndefined, SetSessionSiteVar, Sleep,\n  SpaceToHyphenLower, StorageGetter,\n  StringReplaceAll\n} from '../pop-common-utility';\nimport {App, AuthDetails} from '../pop-common-token.model';\n\nimport {EntityGeneralTab, EntityHistoryTab} from './entity/pop-entity-tab/pop-entity-tab.model';\nimport {Router} from '@angular/router';\nimport {HTTP_INTERCEPTORS} from '@angular/common/http';\nimport {HeaderInterceptor, Response401Interceptor} from '../services/pop-base.interceptors';\nimport {DateAdapter} from '@angular/material/core';\nimport {CustomDateAdapter} from './base/pop-field-item/custom-date-adapter';\nimport {MatIconRegistry} from '@angular/material/icon';\nimport {DomSanitizer} from '@angular/platform-browser';\nimport {PopCredentialService} from '../services/pop-credential.service';\nimport {EntityMenu} from './app/pop-left-menu/entity-menu.model';\nimport {ParseModuleRoutesForAliases} from './entity/pop-entity-utility';\nimport {PopErrorRedirectComponent} from './base/pop-redirects/pop-error-redirect/pop-error-redirect.component';\nimport {PopRedirectsModule} from './base/pop-redirects/pop-redirects-module';\nimport {PopRedirectGuard} from './base/pop-redirects/pop-redirect.guard';\nimport {PopCacheRedirectComponent} from './base/pop-redirects/pop-cache-redirect/pop-cache-redirect.component';\nimport {PopCacheRedirectGuard} from './base/pop-redirects/pop-cache-redirect.guard';\nimport {PopGuardRedirectComponent} from './base/pop-redirects/pop-guard-redirect/pop-guard-redirect.component';\nimport {PopRequestExternalService} from '../services/pop-request-external.service';\nimport {PopEntitySchemeComponentService} from \"./entity/services/pop-entity-scheme-component.service\";\n\n\nexport class AppMenus implements AppMenusInterface {\n  private _menus = [];\n\n\n  get(): EntityMenu[] {\n    return this._menus;\n  }\n\n\n  set(menus: EntityMenu[]) {\n    this._menus = menus;\n  }\n\n\n  init(menus: EntityMenu[]): EntityMenu[] {\n    return menus;\n  }\n}\n\n\nexport class AppWidgets implements AppWidgetsInterface {\n  private _widgets = [];\n\n\n  get(): any[] {\n    return this._widgets;\n  }\n\n\n  set(widgets: any[]) {\n    this._widgets = widgets;\n  }\n}\n\n\nexport class AppTheme implements AppThemeInterface {\n  private _theme = 'default';\n  private _contrast: 'light' | 'dark' = 'light';\n  private _name = 'default-light.css';\n  public init = new BehaviorSubject<boolean>(false);\n\n\n  get(): string {\n    return this._name;\n  }\n\n\n  set(theme: string = 'default', contrast: 'light' | 'dark' = 'light') {\n    this._theme = theme;\n    this._contrast = contrast;\n    this._name = `${this._theme}-${this._contrast}.css`;\n    const themeLink = (document.getElementById('themeFileEle') as HTMLLinkElement);\n    if (themeLink) {\n      const existingTheme = StringReplaceAll(themeLink.href.split(PopHref).pop(), '/', '');\n      if (this._name !== existingTheme) {\n        themeLink.href = this._name;\n      }\n    } else {\n      const themeFile = document.createElement('link');\n      themeFile.setAttribute('rel', 'stylesheet');\n      themeFile.setAttribute('type', 'text/css');\n      themeFile.setAttribute('href', this._name);\n      themeFile.setAttribute('id', 'themeFileEle');\n      themeFile.onload = () => {\n        this.init.next(true);\n      };\n      if (typeof themeFile != 'undefined') document.getElementsByTagName('head')[0].appendChild(themeFile);\n    }\n  }\n\n\n  isLoaded() {\n    return this.init.getValue();\n  }\n}\n\n\nexport class AppGlobal implements AppGlobalInterface {\n  private _verified = false;\n  private _modals = 0;\n  private _filter;\n  private _pipes;\n  private _aliases;\n  private _entities;\n  private _security;\n  private _permissions;\n  private _open = false;\n  public init = new BehaviorSubject<boolean>(false);\n  public verification = new Subject<boolean>();\n  public _unload = new Subject<boolean>();\n\n\n  isVerified(): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      const wait = setInterval(() => {\n        if (this._verified) {\n          clearInterval(wait);\n          return resolve(true);\n        }\n      }, 5, 5);\n    });\n  }\n\n\n  setVerified(): void {\n    this._verified = true;\n  }\n\n\n  setModal(): void {\n    this._modals++;\n  }\n\n\n  isModal(): number {\n    return this._modals;\n  }\n\n\n  removeModal(): void {\n    if (this._modals) {\n      this._modals--;\n    }\n  }\n\n\n  isFilterBar(): boolean {\n    return this._filter;\n  }\n\n\n  setFilterBar(value: boolean): void {\n    this._filter = value;\n  }\n\n\n  isPipes(): boolean {\n    return this._pipes;\n  }\n\n\n  setPipes(value: boolean): void {\n    this._pipes = value;\n  }\n\n\n  isAliases(): boolean {\n    return this._aliases;\n  }\n\n\n  setAliases(value: boolean): void {\n    this._aliases = value;\n  }\n\n\n  isEntities(): boolean {\n    return this._entities;\n  }\n\n\n  setEntities(value: boolean): void {\n    this._entities = value;\n  }\n\n\n  setSecurity(value: boolean): void {\n    this._security = value;\n  }\n\n\n  isSecurity(): boolean {\n    return this._security;\n  }\n\n  isPermissions(): boolean {\n    return this._permissions;\n  }\n\n  setPermissions(value: boolean): void {\n    this._permissions = value;\n  }\n\n\n  isOpen(): boolean {\n    return this._open;\n  }\n\n\n  setOpen(value: boolean): void {\n    this._open = value;\n  }\n}\n\n\n@NgModule({\n  imports: [\n    PopRedirectsModule\n  ],\n  declarations: [],\n  exports: [],\n  providers: [PopCredentialService]\n})\n\n\nexport class PopInitializerModule {\n\n  private name = `PopInitializerModule`;\n\n  private businessId;\n\n  private verification = {\n    pending: false,\n    subscription: <Subscription>undefined,\n    debouncer: undefined,\n    trigger: () => {\n      if (this.verification.debouncer) clearTimeout(this.verification.debouncer);\n      this.verification.debouncer = setTimeout(() => {\n        return this._verifyAuthStorage();\n      }, 5);\n    },\n    unload: () => {\n      if (this.verification.subscription) {\n        this.verification.subscription.unsubscribe();\n      }\n      if (this.verification.debouncer) {\n        clearTimeout(this.verification.debouncer);\n      }\n    }\n  };\n\n  private unload = {\n    pending: false,\n    subscription: <Subscription>undefined,\n    debouncer: undefined,\n    trigger: () => {\n      if (this.unload.debouncer) clearTimeout(this.unload.debouncer);\n      this.unload.debouncer = setTimeout(() => {\n        this.unload.run();\n      }, 0);\n    },\n    run: () => {\n      if (this.unload.subscription) {\n        this.unload.subscription.unsubscribe();\n      }\n      this.verification.unload();\n    }\n  };\n\n\n  static forRoot(tasks: PopTask[] = [], appGlobalsParams: AppGlobalParamInterface = {}): ModuleWithProviders<PopInitializerModule> {\n    return {\n      ngModule: PopInitializerModule,\n\n      providers: [\n        {\n          provide: 'APP_GLOBAL',\n          useClass: AppGlobal\n        },\n        {\n          provide: 'APP_GLOBAL_PARAMS',\n          useValue: appGlobalsParams\n        },\n        {provide: HTTP_INTERCEPTORS, useClass: HeaderInterceptor, multi: true},\n        {provide: HTTP_INTERCEPTORS, useClass: Response401Interceptor, multi: true},\n        {provide: DateAdapter, useClass: CustomDateAdapter},\n        {\n          provide: 'APP_INITIALIZER_TASKS',\n          useValue: tasks\n        },\n        {\n          provide: 'APP_MENUS',\n          useClass: AppMenus\n        },\n\n        {\n          provide: 'APP_WIDGETS',\n          useClass: AppWidgets\n        },\n\n        {\n          provide: 'APP_THEME',\n          useClass: AppTheme\n        },\n\n      ]\n    };\n  }\n\n\n  constructor(\n    private base: PopBaseService,\n    private cacFilter: PopCacFilterBarService,\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private credential: PopCredentialService,\n    private date: PopDatetimeService,\n    private entity: PopEntityService,\n    private externalApi: PopRequestExternalService,\n    private log: PopLogService,\n    private history: PopRouteHistoryResolver,\n    private iconRegistry: MatIconRegistry,\n    private pipe: PopPipeService,\n    private portal: PopEntityUtilPortalService,\n    private request: PopRequestService,\n    private router: Router,\n    private sanitizer: DomSanitizer,\n    private schemeComponent: PopEntitySchemeComponentService,\n    private template: PopTemplateService,\n    private platform: PlatformLocation,\n    @Inject(Injector) private injector,\n    @Inject('APP_INITIALIZER_TASKS') public tasks: PopTask[],\n    @Inject('APP_GLOBAL') public APP_GLOBAL: AppGlobalInterface,\n    @Inject('APP_GLOBAL_PARAMS') public APP_GLOBAL_PARAMS: AppGlobalParamInterface,\n    @Inject('APP_THEME') public APP_THEME: AppThemeInterface,\n    @Inject('env') private env?,\n  ) {\n    this.iconRegistry.addSvgIcon('admin', this.sanitizer.bypassSecurityTrustResourceUrl('assets/images/admin.svg'));\n\n    const setup = new Promise<boolean>(async (resolve) => {\n      const auth = this.base.getAuthDetails();\n      const login = GetSessionSiteVar('Login.time', 0);\n\n      try {\n        this._setBusinessId(auth);\n      } catch (e) {\n        console.log(e);\n      }\n\n      const publicFacingApp = this.APP_GLOBAL_PARAMS.open ? true : false;\n      if (!publicFacingApp && IsObject(auth, ['id', 'businesses', 'users', 'token', 'email_verified_at']) && !(this.base.isAuthExpired())) {\n        await this._loadAppTheme();\n        await this._init(auth);\n        PopLog.init(this.name, `:publicFacingApp`, publicFacingApp);\n        /** This is experimental testing if app can be speed up  **/\n        if (this.businessId && StorageGetter(auth, ['businesses', this.businessId, 'apps']) && !login) {\n          PopLog.init(this.name, `:fire app early?`);\n          this.APP_GLOBAL.setVerified();\n          this.APP_GLOBAL.init.next(true);\n        }\n        /** *********************** **/\n\n        const verified = await this._verifyAuthStorage();\n        if (!verified) {\n          if (!isDevMode()) {\n            if (false) {\n              this.base.clearAuthDetails(`PopInitializerModule:setup`);\n              window.location.href = window.location.protocol + '//' + window.location.host + '/user/legacy/auth/clear';\n            } else {\n              PopLog.init(this.name, `:verification failed`);\n              this.APP_GLOBAL.setVerified();\n              this.APP_GLOBAL.init.next(true);\n              return resolve(true);\n            }\n\n          } else {\n            PopLog.init(this.name, `:verification failed`);\n            this.APP_GLOBAL.init.next(true);\n            return resolve(true);\n          }\n        } else {\n          this._welcome();\n\n          return resolve(true);\n        }\n\n        // if(this.APP_GLOBAL.isSecurity() && IsString(PopHref, true)) {\n        //   this.base.checkAppAccess(PopHref, true);\n        // }\n      } else {\n        SetSessionSiteVar('App.theme', null);\n        SetSessionSiteVar('App.themeContrast', null);\n        await this._loadAppTheme();\n        await this._setDependencies(false, null);\n        if (this.APP_GLOBAL.isOpen()) {\n          this.APP_GLOBAL.setVerified();\n          this.APP_GLOBAL.init.next(true);\n          return resolve(true);\n        } else {\n          this.APP_GLOBAL.init.next(true);\n          return resolve(true);\n        }\n      }\n    });\n\n    setup.catch((e) => {\n      if (isDevMode()) console.log('e', e);\n      this.APP_GLOBAL.init.next(true);\n    });\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  /**\n   * Load the app dependencies\n   * @param business\n   */\n  private _setDependencies(authenticated: boolean, auth: AuthDetails): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      this.APP_GLOBAL.setAliases(IsDefined(this.env.aliases) ? this.env.aliases : (IsDefined(this.APP_GLOBAL_PARAMS.aliases) ? this.APP_GLOBAL_PARAMS.aliases : true));\n      this.APP_GLOBAL.setFilterBar(IsDefined(this.env.filter) ? this.env.filter : (IsDefined(this.APP_GLOBAL_PARAMS.filter) ? this.APP_GLOBAL_PARAMS.aliases : true));\n      this.APP_GLOBAL.setPipes(IsDefined(this.env.pipes) ? this.env.pipes : (IsDefined(this.APP_GLOBAL_PARAMS.pipes) ? this.APP_GLOBAL_PARAMS.pipes : true));\n      this.APP_GLOBAL.setEntities(IsDefined(this.env.entities) ? this.env.entities : (IsDefined(this.APP_GLOBAL_PARAMS.entities) ? this.APP_GLOBAL_PARAMS.entities : true));\n      this.APP_GLOBAL.setOpen(IsDefined(this.env.open) ? this.env.open : (IsDefined(this.APP_GLOBAL_PARAMS.open) ? this.APP_GLOBAL_PARAMS.open : false));\n      this.APP_GLOBAL.setSecurity(IsDefined(this.env.security) ? this.env.security : (IsDefined(this.APP_GLOBAL_PARAMS.security) ? this.APP_GLOBAL_PARAMS.security : false));\n      this.APP_GLOBAL.setPermissions(IsDefined(this.env.permissions) ? this.env.permissions : (IsDefined(this.APP_GLOBAL_PARAMS.permissions) ? this.APP_GLOBAL_PARAMS.permissions : false));\n\n      SetServiceInjector(this.injector);\n      SetPopEnv(this.env ? this.env : {});\n      SetPopExternalApi(this.externalApi);\n      SetPopHref(StringReplaceAll(this.platform.getBaseHrefFromDOM(), '/', ''));\n      SetPopLogger(this.log);\n      SetPopRequest(this.request);\n      SetPopTemplate(this.template);\n      SetPopComponentResolver(this.componentFactoryResolver);\n      if (authenticated) {\n        SetPopDate(this.date);\n        SetPopHistory(this.history);\n        SetPopEntity(this.entity);\n        SetPopPipe(this.pipe);\n        SetPopPortal(this.portal);\n        SetPopSchemeComponent(this.schemeComponent);\n        this._setAuthGlobal(auth);\n        this._setBusinessId(auth);\n        await Promise.all([\n          this._setRouteCacheClear(),\n          this._setRouteErrorHandling(),\n          this._setBusinessAssets(auth),\n          this._loadPipeResources(),\n        ]);\n        await this._loadFilterData();\n\n      }\n      return resolve(true);\n    });\n  }\n\n\n  private _init(auth: AuthDetails): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      await this._setDependencies(true, auth);\n      await this._setAncillary(auth);\n      await this._configure(auth);\n      this.APP_GLOBAL.init.next(true);\n      if (!this.unload.subscription) {\n        PopLog.init(this.name, `registering unload request subscription`);\n        this.unload.subscription = this.APP_GLOBAL._unload.subscribe(() => {\n          PopLog.init(this.name, `unload: requested`);\n          this.unload.trigger();\n        });\n      }\n      return resolve(true);\n    });\n  }\n\n\n  private _setAncillary(auth: AuthDetails): Promise<boolean> {\n    return new Promise(async (resolve) => {\n      await this._tasks();\n      return resolve(true);\n    });\n  }\n\n\n  private _configure(auth: AuthDetails) {\n    return new Promise<boolean>(async (resolve) => {\n      if (IsObject(auth, ['id', 'businesses', 'users', 'token']) && !(this.base.isAuthExpired()) && PopHref) {\n        if (IsObject(PopBusiness, ['id'])) {\n          await Promise.all([\n            this._setBusinessUserSettings(),\n            this._setFilterAliases(),\n            this._setRouteAliasMap(),\n            this._setDefaultTabs(),\n          ]);\n          return resolve(true);\n        } else {\n          PopLog.init(this.name, `No Business Found`);\n          return resolve(true);\n        }\n      } else {\n        return resolve(true);\n      }\n    });\n  }\n\n\n  private _tasks() {\n    return new Promise<boolean>(async (resolve) => {\n      if (IsObject(PopBusiness, true)) {\n        if (IsArray(this.tasks, true)) {\n          this.tasks.map((task) => {\n            if (IsCallableFunction(task)) {\n              task();\n            }\n          });\n        }\n      }\n      return resolve(true);\n    });\n  }\n\n\n  private _setAuthGlobal(auth: AuthDetails) {\n    SetPopAuth({\n      id: auth.id,\n      name: auth.name,\n      first_name: auth.first_name,\n      last_name: auth.last_name,\n      initials: auth.initials,\n      email: auth.email,\n      email_verified_at: auth.email_verified_at,\n      avatarLink: StorageGetter(auth, ['profile', 'avatar_link'], null),\n      username: auth.username,\n      created_at: auth.created_at\n    });\n  }\n\n\n  private _setBusinessId(auth: AuthDetails) {\n    if (IsUndefined(this.businessId)) this.businessId = 0;\n    if (IsObject(auth.businesses, true)) {\n      if (!this.businessId) this.businessId = String(GetSiteVar('Business.last', 0));\n      if (!(+this.businessId && this.businessId in auth.businesses)) {\n        this.businessId = this.base.getCurrentBusinessId();\n      }\n      if (+this.businessId && this.businessId in auth.businesses) {\n        this.businessId = +this.businessId;\n      } else if (+auth.business_fk && auth.business_fk in auth.businesses) {\n        this.businessId = +auth.business_fk;\n      } else {\n        this.businessId = IsObject(auth.businesses, true) ? +Object.keys(auth.businesses)[0] : 0;\n      }\n    }\n  }\n\n\n  /**\n   * Verify that the current auth storage is still relevant\n   * @private\n   */\n  private _verifyAuthStorage(): Promise<boolean> {\n    return new Promise(async (resolve) => {\n      if (IsObject(PopAuth, ['created_at']) && IsDefined(PopAuth.email_verified_at, false) && !this.verification.pending) {\n        PopLog.init(this.name, `Verification: In Progress`);\n        if (!this.businessId) {\n          PopLog.init(this.name, `Verification:Complete - no business`);\n          this.APP_GLOBAL.setVerified();\n          return resolve(true);\n        }\n        this.verification.pending = true;\n        const auth = await this.credential.verify(this.businessId);\n        if (auth) {\n          this._setAuthGlobal(auth);\n          this._setBusinessId(auth);\n          await Promise.all([\n            this._setBusinessAssets(auth),\n            this._loadAppTheme(),\n            this._setAncillary(auth),\n            this._configure(auth),\n            this._setRouteAliases()\n          ]);\n\n          this.APP_GLOBAL.setVerified();\n          PopLog.init(this.name, `Verification: Complete`);\n          this.verification.pending = false;\n          this.APP_GLOBAL.init.next(true);\n          if (!this.verification.subscription) {\n            PopLog.init(this.name, `registering verification request subscription`);\n            this.verification.subscription = this.APP_GLOBAL.verification.subscribe(() => {\n              PopLog.init(this.name, `_verifyAuthStorage: requested`);\n              this.verification.trigger();\n            });\n          }\n          return resolve(true);\n        } else {\n          return resolve(false);\n        }\n      } else {\n        return resolve(false);\n      }\n\n    });\n  }\n\n\n  /**\n   * This fx will set up all the necessary business assets that are needed\n   * @param auth\n   * @private\n   */\n  private _setBusinessAssets(auth: AuthDetails) {\n    return new Promise(async (resolve) => {\n      if (+this.businessId && IsObject(auth, ['id', 'businesses', 'users', 'token'])) {\n        this.base.setCurrentBusinessId(+this.businessId);\n        SetPopUser(IsObject(auth.users, true) && this.businessId in auth.users ? auth.users[this.businessId] : null);\n        SetPopBusiness(IsObject(auth.businesses, true) && this.businessId in auth.businesses ? auth.businesses[this.businessId] : null);\n        SetPopApp(IsObject(PopBusiness.apps, [PopHref]) ? PopBusiness.apps[PopHref] : null);\n        // if (!IsObject(PopApp, ['id', 'name'])) {\n        //   if (!isDevMode()) {\n        //     window.location.href = window.location.protocol + '//' + window.location.host + '/home';\n        //   }\n        // }\n        await this._setBusinessAppEntities();\n      }\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * This fx will loop through all the apps in the current business, and for each entity in that business register the details\n   */\n  private _setBusinessAppEntities() {\n    return new Promise(async (resolve) => {\n      const auth = this.base.getAuthDetails();\n      if (IsObject(PopBusiness, ['id', 'apps']) && IsObject(PopBusiness.apps, true)) {\n        const inaccessibleApps = [];\n        const permanentApps = ['library', 'home'];\n        // console.log('PopUser', PopUser);\n        Object.keys(PopBusiness.apps).map((appName) => {\n          const app = PopBusiness.apps[appName];\n          app.hasCreateAccess = false;\n          if (IsObject(app, true) && IsObject(app.entities, true)) {\n            Object.keys(app.entities).map((name: string) => {\n              if (IsObject(app.entities[name], ['id', 'name', 'internal_name'])) {\n                const entity = app.entities[name];\n                entity.access = {};\n\n                if (IsObject(PopUser, ['permissions']) && IsObject(PopUser.permissions, true) && entity.internal_name in PopUser.permissions) {\n                  entity.access = PopUser.permissions[entity.internal_name];\n                  // console.log(entity.internal_name, entity.access.can_read);\n                }\n                if (entity.access.can_create) app.hasCreateAccess = true;\n                PopEntity.setEntityParams(entity);\n                PopPipe.updateEntityAlias(entity.id, entity.alias);\n              }\n            });\n          }\n          if (this.APP_GLOBAL.isEntities() && !app.hasCreateAccess) {\n\n            if (!(permanentApps.includes((app.name)))) {\n              inaccessibleApps.push(app.name);\n            }\n\n          }\n        });\n        // console.log('inaccessibleApps', inaccessibleApps);\n        if (IsArray(inaccessibleApps, true)) {\n          inaccessibleApps.map((appName2: string) => {\n            delete PopBusiness.apps[appName2];\n            delete auth.businesses[PopBusiness.id].apps[appName2];\n          });\n        }\n        this.base.setAuthDetails(auth);\n      }\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * Load the client,account,campaign data required for the filter bar\n   * @param business\n   */\n  private _setBusinessUserSettings(): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      if (IsObject(PopBusiness, ['id'])) {\n        this.date.setCurrentBusinessUnitSettings();\n        PopLog.init(this.name, `:BusinessUserSettings`);\n        return resolve(true);\n      } else {\n        return resolve(true);\n      }\n    });\n  }\n\n\n  private _welcome() {\n    if (IsObject(PopAuth, ['created_at'])) {\n      const now = new Date().getTime() / 1000;\n      const loginTime = new Date(PopAuth.created_at).getTime() / 1000;\n      const secondsSinceLogin = (now - loginTime);\n      const welcome = +secondsSinceLogin && +secondsSinceLogin < 20;\n      if (welcome) {\n        this.template.welcome();\n      }\n    }\n  }\n\n\n  /**\n   * Load the client,account,campaign data required for the filter bar\n   * @param business\n   */\n  private _loadFilterData() {\n    return new Promise(async (resolve) => {\n\n      if (this.APP_GLOBAL.isFilterBar() && IsObject(PopBusiness, ['id'])) {\n        if (PopEntity.checkAccess('client', 'can_read')) {\n          await this.cacFilter.setData(this.name);\n          PopLog.init(this.name, `:Filter Data Set`);\n        } else {\n          PopTemplate.turnOffFilter();\n        }\n        return resolve(true);\n      } else {\n        return resolve(true);\n      }\n    });\n  }\n\n\n  /**\n   * Load the resources needed for the PopPipe service\n   * @param business\n   */\n  private _loadPipeResources() {\n    return new Promise(async (resolve) => {\n      if (this.APP_GLOBAL.isPipes() && IsObject(PopBusiness, ['id'])) {\n        this.pipe.loadResources().then(() => {\n          PopLog.init(this.name, `:Pipe Resources Set`);\n          return resolve(true);\n        });\n      } else {\n        return resolve(false);\n      }\n    });\n  }\n\n\n  /**\n   * Set any aliases on the filter columns\n   * @private\n   */\n  private _setFilterAliases(): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      if (this.APP_GLOBAL.isFilterBar() && this.APP_GLOBAL.isEntities() && this.APP_GLOBAL.isAliases()) this.cacFilter.setConfigAliases();\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * Create a map lookup for route aliases\n   * @private\n   */\n  private _setRouteAliasMap(): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      const aliasMap: { client?: string; account?: string, campaign?: string, profile?: string } = {};\n      if (this.APP_GLOBAL.isEntities() && this.APP_GLOBAL.isAliases()) {\n        const auth = <AuthDetails>GetSiteVar('Auth.details', {});\n        if (+this.businessId && IsObject(auth, ['businesses']) && IsObject(auth.businesses[this.businessId], ['apps'])) {\n          if (IsObject(auth.businesses[this.businessId].apps, true)) {\n            Object.keys(auth.businesses[this.businessId].apps).map((appName) => {\n              const app = <App>auth.businesses[this.businessId].apps[appName];\n              if (IsObject(app.entities, true)) {\n                Object.keys(app.entities).map((key) => {\n                  const entity = <Entity>app.entities[key];\n                  if (IsObject(app.entities[key], true) && IsObject(app.entities[key].alias, ['plural'])) {\n                    aliasMap[entity.internal_name] = {\n                      singular: SpaceToHyphenLower(app.entities[key].alias.name),\n                      plural: SpaceToHyphenLower(app.entities[key].alias.plural)\n                    };\n                  }\n                });\n              }\n            });\n          }\n        }\n      }\n      SetPopRouteAliasMap(aliasMap);\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * Get the router.config and load all lazy module using the configLoader\n   */\n  private _setRouteAliases() {\n    return new Promise<boolean>(async (resolve) => {\n      if (this.APP_GLOBAL.isEntities() && this.APP_GLOBAL.isAliases()) {\n        this.router.config = ParseModuleRoutesForAliases(this.router.config);\n        this.router.config.reduce(\n          (acc, route: any) => {\n            if (route.loadChildren && route.data && route.data.routeAliases) {\n              (<any>this.router).configLoader.load(this.injector, route).subscribe({\n                next: (moduleConf) => {\n                  route._loadedConfig = moduleConf;\n                  ParseModuleRoutesForAliases(moduleConf.routes);\n                  return route.path;\n                }\n              });\n            }\n            return acc;\n          }, []\n        );\n        await Sleep(5);\n        return resolve(true);\n      } else {\n        await Sleep(5);\n        return resolve(true);\n      }\n    });\n  }\n\n  /**\n   * Get the router.config and load all lazy module using the configLoader\n   */\n  private _setRouteCacheClear() {\n    return new Promise<boolean>(async (resolve) => {\n      if (true) {\n        const cacheRoute = this.router.config.find((route) => route.path === 'system/cache/clear');\n        if (!cacheRoute) {\n          this.router.config = [...this.router.config, ...[{\n            path: 'system/cache/clear',\n            pathMatch: 'full',\n            canActivate: [PopCacheRedirectGuard],\n            component: PopCacheRedirectComponent\n          }]];\n        }\n        return resolve(true);\n      } else {\n        return resolve(true);\n      }\n    });\n  }\n\n\n  /**\n   * Get the router.config and load all lazy module using the configLoader\n   */\n  private _setRouteErrorHandling() {\n    return new Promise<boolean>(async (resolve) => {\n      if (true) {\n        const guardBlockRoute = this.router.config.find((route) => route.path === 'system/route');\n        if (!guardBlockRoute) {\n          this.router.config = [...this.router.config, ...[{\n            path: 'system/route',\n            pathMatch: 'full',\n            component: PopGuardRedirectComponent\n          }]];\n        }\n\n        const errorRoute = this.router.config.find((route) => route.path === 'system/error/:code');\n        if (!errorRoute) {\n          this.router.config = [...this.router.config, ...[{\n            path: 'system/error/:code',\n            pathMatch: 'full',\n            canActivate: [PopRedirectGuard],\n            component: PopErrorRedirectComponent\n          }]];\n        }\n        return resolve(true);\n      } else {\n        return resolve(true);\n      }\n    });\n  }\n\n\n  /**\n   * Load the theme of the business and apply the theme contrast the user has specified\n   * @param business\n   */\n  private _loadAppTheme() {\n    return new Promise(async (resolve) => {\n\n      let businessTheme = IsObject(PopUser, ['id']) ? StorageGetter(PopUser, ['setting', 'theme'], null) : null;\n      if (!businessTheme) businessTheme = GetSessionSiteVar(`App.theme`, 'default');\n      let userThemeContrast = IsObject(PopUser, ['id']) ? StorageGetter(PopUser, ['setting', 'theme_contrast'], null) : null;\n      if (!userThemeContrast) userThemeContrast = GetSessionSiteVar(`App.themeContrast`, 'light');\n      SetSessionSiteVar('App.theme', businessTheme);\n      SetSessionSiteVar('App.themeContrast', userThemeContrast);\n\n      this.APP_THEME.set(businessTheme, userThemeContrast);\n\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * Set a default set of tabs that an entity should have, intended to be overridden\n   * @param business\n   */\n  private _setDefaultTabs() {\n    return new Promise(async (resolve) => {\n      if (this.APP_GLOBAL.isEntities()) PopEntity.setEntityTabs('default', [EntityGeneralTab, EntityHistoryTab]);\n      return resolve(true);\n    });\n  }\n}\n","import { Inject, Injectable } from '@angular/core';\nimport { PopBaseService } from '../../../../services/pop-base.service';\nimport { PopBusiness } from '../../../../pop-common.model';\nimport { GetSessionSiteVar, SetSessionSiteVar, TitleCase } from '../../../../pop-common-utility';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PopTabMenuSectionBarService {\n\n  constructor(\n    private baseRepo: PopBaseService,\n    @Inject('env') private readonly env?\n  ){\n  }\n\n  /**\n   * Store the current tab into onSession memory\n   * @param name\n   * @returns void\n   */\n  setSectionSession(internal_name: string, slug: string): void{\n    if( internal_name ) SetSessionSiteVar(`Business.${PopBusiness.id}.Entity.${TitleCase(internal_name)}.TabMenu.Main.section`, slug);\n  }\n\n\n  /**\n   * Get latest path\n   */\n  getPathSession(internal_name: string){\n    return GetSessionSiteVar(`Business.${PopBusiness.id}.Entity.${TitleCase(internal_name)}.TabMenu.Main.section`);\n  }\n\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit, ViewChild, ViewContainerRef } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Location } from '@angular/common';\nimport { Dictionary, DynamicComponentInterface, SectionConfig, SectionInterface, ServiceInjector } from '../../../../pop-common.model';\nimport { PopExtendDynamicComponent } from '../../../../pop-extend-dynamic.component';\nimport { TabConfig } from '../tab-menu.model';\nimport { PopDomService } from '../../../../services/pop-dom.service';\nimport { PopTabMenuService } from '../pop-tab-menu.service';\nimport { PopTabMenuSectionBarService } from './pop-tab-menu-section-bar.service';\nimport { ArrayMapSetter, IsArray } from '../../../../pop-common-utility';\n\n\n@Component( {\n  selector: 'lib-pop-tab-section-bar',\n  templateUrl: './pop-tab-menu-section-bar.component.html',\n  styleUrls: [ './pop-tab-menu-section-bar.component.scss' ],\n} )\nexport class PopTabMenuSectionBarComponent extends PopExtendDynamicComponent implements OnInit, OnDestroy {\n  @Input() sections: SectionConfig[];\n  @Input() overflow = false;\n  @ViewChild( 'container', { read: ViewContainerRef, static: true } ) public container;\n\n  public name = 'PopTabMenuSectionBarComponent';\n\n  protected srv = {\n    location: <Location>ServiceInjector.get( Location ),\n    router: <Router>ServiceInjector.get( Router ),\n    route: <ActivatedRoute>undefined,\n    section: <PopTabMenuSectionBarService>ServiceInjector.get( PopTabMenuSectionBarService ),\n    tab: <PopTabMenuService>undefined\n  };\n\n  public ui = {};\n\n  protected asset = {\n    tab: <TabConfig>undefined,\n    baseUrl: <string>undefined,\n    urlSection: <string>undefined,\n    map: <Dictionary<any>>{}\n  };\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService,\n    protected _routeRepo: ActivatedRoute,\n    protected _tabRepo: PopTabMenuService,\n  ){\n    super();\n\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n\n        await this._setCore();\n        await this._setRoute();\n        await this._setSections();\n        await this._setHeight();\n        await this._attachContainer();\n\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * Setup this component\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * This will load the comonent of the selected section into the view container\n   * @param section\n   */\n  onViewSection( section: SectionInterface ){\n\n    this.dom.active.section = section.id;\n    this.srv.section.setSectionSession( 'profile', section.id );\n    this.srv.location.go( this.asset.baseUrl + '?section=' + section.id );\n    this.dom.setTimeout( `view-section`, () => {\n      this.template.render( [ <DynamicComponentInterface>{\n        type: section.component,\n        inputs: section.inputs,\n        position: this.position,\n      } ] );\n    }, 0 );\n  }\n\n\n  /**\n   * Clean up the dom of this component\n   */\n  ngOnDestroy(): void{\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Protected Method )                                      *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  protected _setCore(): Promise<boolean>{\n    return new Promise( async( resolve ) => {\n      return resolve( true );\n    } );\n  }\n\n\n  protected _setRoute(): Promise<boolean>{\n    return new Promise( async( resolve ) => {\n      const url = String( this.srv.router.url ).split( '?' )[ 0 ];\n      const slugs = url.split( '/' );\n      this.asset.baseUrl = slugs.join( '/' );\n      if( this.srv.section.getPathSession( this.core.params.internal_name ) ) this.asset.urlSection = <string>this.srv.section.getPathSession( this.core.params.internal_name );\n      this.dom.setSubscriber( 'query-params', this.srv.route.queryParams.subscribe( params => {\n        if( params.section ) this.asset.urlSection = params.section;\n      } ) );\n      return resolve( true );\n    } );\n\n  }\n\n\n  protected _setSections(): Promise<boolean>{\n    return new Promise( async( resolve ) => {\n      this.asset.tab = <TabConfig>this.srv.tab.getTab();\n      this.dom.active.section = undefined;\n      if( !this.sections && this.asset.tab.sections ){\n        this.sections = <SectionConfig[]>this.asset.tab.sections;\n      }\n      this.asset.map.sections = ArrayMapSetter( this.sections, 'id' );\n      return resolve( true );\n    } );\n  }\n\n\n  protected _setHeight(): Promise<boolean>{\n    return new Promise( async( resolve ) => {\n\n      const defaultHeight = window.innerHeight - 230;\n      this.dom.setHeight( defaultHeight, 60 );\n\n      return resolve( true );\n    } );\n\n  }\n\n\n  protected _attachContainer(): Promise<boolean>{\n    return new Promise( async( resolve ) => {\n\n      this.template.attach( 'container' );\n      if( IsArray( this.sections, true ) ){\n        if( this.asset.urlSection in this.asset.map.sections ){\n          this.onViewSection( this.sections[ this.asset.map.sections [ this.asset.urlSection ] ] );\n        }else{\n          this.onViewSection( this.sections[ 0 ] );\n        }\n      }\n\n      return resolve( true );\n    } );\n\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport { HttpClientModule } from '@angular/common/http';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatTabsModule } from '@angular/material/tabs';\nimport { MatButtonModule } from '@angular/material/button';\nimport { PopTabMenuComponent } from './pop-tab-menu.component';\nimport { PopIndicatorsModule } from '../pop-indicators/pop-indicators.module';\nimport { MatProgressBarModule } from '@angular/material/progress-bar';\nimport { PopTabMenuSectionBarComponent } from './pop-tab-menu-section-bar/pop-tab-menu-section-bar.component';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    HttpClientModule,\n    RouterModule,\n    MatIconModule,\n    MatTabsModule,\n    MatButtonModule,\n    MatProgressBarModule,\n    PopIndicatorsModule,\n  ],\n  declarations: [\n    PopTabMenuComponent,\n    PopTabMenuSectionBarComponent\n  ],\n  exports: [\n    PopTabMenuComponent\n  ],\n  providers: [],\n\n})\nexport class PopTabMenuModule {\n}\n","import { Component, Inject } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport { PopRouteHistoryResolver } from '../../../../services/pop-route-history.resolver';\n\n\n@Component({\n  selector: 'lib-pop-error',\n  templateUrl: './error.component.html',\n  styles: []\n})\nexport class ErrorComponent{\n\n  constructor(\n    @Inject(MAT_DIALOG_DATA) public data,\n    private dialog: MatDialogRef<ErrorComponent>,\n    private history: PopRouteHistoryResolver\n  ){}\n\n  goBack(){\n    this.history.goBack();\n    this.dialog.close();\n  }\n}\n","import { AfterViewInit, Component, Input } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { ErrorComponent } from './error/error.component';\n\n@Component({\n  selector: 'lib-pop-errors',\n  templateUrl: './pop-errors.component.html',\n  styleUrls: ['./pop-errors.component.scss']\n})\nexport class PopErrorsComponent implements AfterViewInit{\n\n  @Input() error: { code:number, message:string };\n\n  constructor(public dialog: MatDialog){}\n\n  ngAfterViewInit(){\n    setTimeout(()=>{\n      this.loadErrorDialog();\n    }, 500);\n  }\n\n  loadErrorDialog(){\n    this.dialog.open(ErrorComponent, { data: { code: this.error.code, message: this.error.message } } );\n  }\n}\n","import { NgModule } from \"@angular/core\";\nimport { MaterialModule } from '../../material/material.module';\nimport { PopErrorsComponent } from './pop-errors.component';\nimport { ErrorComponent } from './error/error.component';\n\n\n@NgModule({\n    declarations: [\n        PopErrorsComponent,\n        ErrorComponent,\n    ],\n    imports: [MaterialModule],\n    exports: [\n        PopErrorsComponent,\n    ],\n})\nexport class PopErrorsModule {\n}\n","import { Component, ElementRef, EventEmitter, Inject, Input, OnDestroy, OnInit, Output } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialog, MatDialogRef } from '@angular/material/dialog';\nimport { FormGroup } from '@angular/forms';\nimport { PopBaseEventInterface, ServiceInjector } from '../../../../pop-common.model';\nimport { PopExtendComponent } from '../../../../pop-extend.component';\nimport { PopEntityEventService } from '../../../entity/services/pop-entity-event.service';\nimport { PopRequestService } from '../../../../services/pop-request.service';\nimport { Router } from '@angular/router';\nimport { slideInOut } from '../../../../pop-common-animations.model';\nimport { IsValidFieldPatchEvent, ParseLinkUrl } from '../../../entity/pop-entity-utility';\nimport { FieldItemGroupConfig } from '../pop-field-item-group.model';\nimport { GetHttpErrorMsg, IsCallableFunction, IsString } from '../../../../pop-common-utility';\n\n\n@Component( {\n  selector: 'lib-in-dialog',\n  templateUrl: './in-dialog.component.html',\n  styleUrls: [ './in-dialog.component.scss' ],\n  animations: [\n    slideInOut\n  ]\n} )\nexport class InDialogComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Output() events: EventEmitter<PopBaseEventInterface> = new EventEmitter<PopBaseEventInterface>();\n  @Input() http = 'POST';\n  public name = 'InDialogComponent';\n\n  protected srv: {\n    events: PopEntityEventService,\n    request: PopRequestService,\n    router: Router\n  } = {\n    events: ServiceInjector.get( PopEntityEventService ),\n    request: ServiceInjector.get( PopRequestService ),\n    router: ServiceInjector.get( Router ),\n  };\n\n  public asset = {\n    visible: 0\n  };\n\n  public ui = {\n    form: <FormGroup>undefined\n  };\n\n\n  constructor(\n    public el: ElementRef,\n    public dialog: MatDialogRef<InDialogComponent>,\n    @Inject( MAT_DIALOG_DATA ) public config: FieldItemGroupConfig,\n  ){\n    super();\n\n    /**\n     * This should transformValue and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n        const fieldItems = {};\n        this.dom.state.validated = false;\n        if( !this.config.inDialog.submit ) this.config.inDialog.submit = 'Submit';\n        this.config.fieldItems.map( ( field ) => {\n          if( field.config && field.config.control ){\n            fieldItems[ field.config.name ] = field.config.control;\n            this.asset.visible++;\n          }\n        } );\n        this.dom.setHeight( this.asset.visible * 40, 0 );\n        this.ui.form = new FormGroup( fieldItems );\n\n        resolve( true );\n      } );\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n\n        this._triggerFormValidation();\n\n        resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * Intercept the enter press to check if the form can be submitted\n   * @param event\n   */\n  onEnterPress( event ){\n    event.preventDefault();\n    event.stopPropagation();\n    if( this.dom.state.validated ){\n      this.dom.setTimeout( `submit-form`, () => {\n        return this.onFormSubmit();\n      }, 500 );\n\n    }\n  }\n\n\n  /**\n   * The user will press enter or click a submit btn to submit the form\n   */\n  onFormSubmit(){\n    return new Promise<boolean>( async( resolve ) => {\n      if( this.dom.state.validated && !this.dom.state.pending ){\n        this._onSubmissionStart();\n        const params = this.ui.form.value; // get form value before disabling form\n        // this.dom.asset.form_group.disable(); //bad idea disabled through css\n        const request = this.http === 'POST' ? this.srv.request.doPost( this.config.inDialog.postUrl, params, ( this.config.inDialog.postUrlVersion !== null ? this.config.inDialog.postUrlVersion : 1 ) ) : this.srv.request.doPatch( this.config.inDialog.postUrl, params, ( this.config.inDialog.postUrlVersion !== null ? this.config.inDialog.postUrlVersion : 1 ) );\n        request.subscribe( async( result: any ) => {\n            const goToUrl = this.config.inDialog.goToUrl;\n            result = result.data ? result.data : result;\n            this.config.entity = result;\n            await this._onSubmissionSuccess();\n            this.dialog.close( this.config.entity );\n            if( IsString( goToUrl, true ) ){\n              const newGoToUrl = ParseLinkUrl( String( goToUrl ).slice(), this.config.entity );\n              this.srv.router.navigate( [ newGoToUrl ] ).catch( ( e ) => {\n                console.log( e );\n              } );\n            }\n            return resolve( true );\n          },\n          err => {\n            this._onSubmissionFail();\n            this._setErrorMessage( err );\n            return resolve( false );\n          }\n        );\n      }\n    } );\n  }\n\n\n  /**\n   * The user can click a canel btn to close the form dialog\n   */\n  onFormCancel(){\n    this.dom.state.loaded = false;\n    this.dom.setTimeout( `close-modal`, () => {\n      this.config.entity = null;\n      this.dialog.close( -1 );\n    }, 500 );\n  }\n\n\n  /**\n   * Handle the form events to trigger the form validation\n   * @param event\n   */\n  onBubbleEvent( event ){\n    if( event.name === 'onKeyUp' ){\n      this.dom.state.validated = false;\n      this.dom.setTimeout( `trigger-validation`, () => {\n        this._triggerFormValidation();\n      }, 500 );\n\n    }\n    if( IsValidFieldPatchEvent( this.core, event ) || event.name === 'onBlur' ){\n      this.dom.setTimeout( `trigger-validation`, () => {\n        this._triggerFormValidation();\n      }, 500 );\n    }else{\n      // if a field is focused we want a chance to validate again\n      // this.dom.state.validated = false;\n    }\n    // if( event.type === 'field' && event.name === 'onChange' ) event.form = this.ui.form;\n    this.events.emit( event );\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  /**\n   * This fx will trigger the form validation\n   * @private\n   */\n  private _triggerFormValidation(){\n    this.dom.setTimeout( `trigger-form-validation`, () => {\n      this._validateForm().then( ( valid: boolean ) => {\n        this.dom.state.validated = valid;\n      } );\n    }, 50 );\n  }\n\n\n  /**\n   * The form needs to able to make api calls to verify info for certain fields\n   * ToDo:: Allow the config to be able to pass in api validation calls for certain fields\n   * @private\n   */\n  private _validateForm(): Promise<boolean>{\n    return new Promise<boolean>( ( resolve ) => {\n      this.dom.state.validated = false;\n      this.dom.setTimeout( `trigger-form-validation`, null );\n      this.dom.setTimeout( `validate-form`, () => {\n        this.ui.form.updateValueAndValidity();\n        setTimeout( () => {\n          this.dom.state.validated = true; // mock stub for now\n          return resolve( this.ui.form.valid );\n        }, 0 );\n      }, 0 );\n    } );\n  }\n\n\n  /**\n   * This hook is called when the form is submitting\n   * @private\n   */\n  private _onSubmissionStart(){\n    this.dom.state.pending = true;\n    this.dom.setTimeout( `submit-form`, null );\n    this.dom.setTimeout( `trigger-validation`, null );\n    this.dom.setTimeout( `trigger-form-validation`, null );\n    this.dom.setTimeout( `validate-form`, null );\n    this.dom.error.message = '';\n    this.dom.setTimeout( `set-error`, null );\n  }\n\n\n  /**\n   * This hook is called when the form submission has failed\n   * @private\n   */\n  private _onSubmissionFail(){\n    this.dom.state.pending = false;\n    // this.dom.state.validated = false;\n\n  }\n\n\n  /**\n   * This hook is called when the form has submitted successfully\n   * @private\n   */\n  private _onSubmissionSuccess(){\n    return new Promise<boolean>( async( resolve ) => {\n      this.dom.state.pending = false;\n      this.dom.state.validated = false;\n      this.dom.state.success = ( this.config.entity.message !== null ? this.config.entity.message : 'Created' );\n      const event = <PopBaseEventInterface>{\n        source: this.name,\n        method: 'create',\n        type: 'entity',\n        name: this.config.params.name,\n        internal_name: this.config.params.internal_name,\n        data: this.config.entity\n      };\n      if( IsCallableFunction( this.config.inDialog.callback ) ){\n        await this.config.inDialog.callback( this.core, event );\n      }\n      this.srv.events.sendEvent( event );\n\n      return resolve( true );\n    } );\n  }\n\n\n  /**\n   * This fx will handle errors\n   * @param message\n   * @private\n   */\n  private _setErrorMessage( err: any ){\n    this.dom.setTimeout( `set-err-msg`, () => {\n      this.dom.state.pending = false;\n      this.dom.error.message = GetHttpErrorMsg( err );\n      this.ui.form.markAsPristine();\n\n      // this.dom.setTimeout( `clear-err-msg`, () => {\n      //   this.dom.error.message = '';\n      // }, 5000 );\n    }, 500 );\n  }\n\n\n}\n","import { Component, ComponentFactory, ComponentFactoryResolver, ComponentRef, ElementRef, Input, OnDestroy, OnInit, ViewChild, ViewContainerRef } from '@angular/core';\nimport { FieldItemGroupConfig } from '../pop-field-item-group.model';\nimport { Subscription } from 'rxjs';\nimport { CoreConfig, DynamicComponentInterface, PopBaseEventInterface } from '../../../../pop-common.model';\nimport { ConvertArrayToOptionList, IsArray, IsObject } from '../../../../pop-common-utility';\nimport { EvaluateWhenCondition, IsValidFieldPatchEvent } from '../../../entity/pop-entity-utility';\nimport { PopExtendDynamicComponent } from '../../../../pop-extend-dynamic.component';\n\n\n@Component({\n  selector: 'lib-group',\n  templateUrl: './group.component.html',\n  styleUrls: [ './group.component.scss' ]\n})\nexport class GroupComponent extends PopExtendDynamicComponent implements OnInit, OnDestroy {\n  @ViewChild('container', { read: ViewContainerRef, static: true }) private container;\n  @Input() config: FieldItemGroupConfig;\n\n  subscribers: Subscription[] = [];\n\n  public name = 'GroupComponent';\n\n\n  constructor(\n    public el: ElementRef,\n  ){\n    super();\n\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n\n        // Attach the container for of the field item list element\n        this.template.attach('container'); // container references the @viewChild('container')\n\n        this.core.entity = {\n          id: 0,\n          name: null\n        };\n\n        this.config.fieldItemMap = {};\n        const fieldItemComponentList = <DynamicComponentInterface[]>[];\n        this.config.fieldItems.map((fieldItem) => {\n          const existingValue = 'control' in fieldItem.config ? fieldItem.config.control.value : null;\n          this.core.entity[ fieldItem.model.name ] = existingValue;\n        });\n\n        this.config.fieldItems.map((fieldItem, index) => {\n          if( fieldItem && IsObject(fieldItem.model, [ 'name' ]) && fieldItem.config && fieldItem.component ){\n            this.config.fieldItemMap[ fieldItem.model.name ] = index;\n\n            if(this.config.inDialog) fieldItem.config.bubble = true;\n\n\n            const component = <DynamicComponentInterface>{\n              type: fieldItem.component,\n              inputs: {\n                config: fieldItem.config,\n                position: fieldItem.config[ 'metadata' ].position ? fieldItem.config[ 'metadata' ].position : 1,\n                hidden: IsArray(fieldItem.model.when, true) ? !( EvaluateWhenCondition(this.core, fieldItem.model.when, this.core) ) : false,\n                when: IsArray(fieldItem.model.when, true) ? fieldItem.model.when : null\n              }\n            };\n            fieldItemComponentList.push(component);\n          }\n        });\n\n        this.template.render(fieldItemComponentList, [], true);\n\n\n        this.dom.handler.bubble = (core: CoreConfig, event: PopBaseEventInterface) => {\n          if( IsValidFieldPatchEvent(this.core, event) ){\n            if( event.config.name in this.core.entity ){\n              const newValue = isNaN(event.config.control.value) ? event.config.control.value : +event.config.control.value;\n              this.core.entity[ event.config.name ] = newValue;\n              if( this.config.fieldItems.length > 1 ){\n                this._resetComponentListHidden();\n                this.dom.setTimeout(`update-relations`, () => {\n                  this._triggerParentChildUpdates(event.config.name);\n                }, 0);\n              }\n            }\n          }\n          if( event.config.bubble || [ 'patch', 'portal' ].includes(event.name) ){\n            this.events.emit(event);\n          }\n        };\n\n\n        this.config.getField = (name: string) => {\n          if( name && name in this.config.fieldItemMap ){\n            return this.config.fieldItems[ this.config.fieldItemMap[ name ] ];\n          }\n          return null;\n        };\n\n        this.events.emit({ source: 'GroupComponent', type: 'field_group', name: 'init', id: this.config.id, group: this.config });\n        resolve(true);\n      });\n    };\n\n    this.dom.proceed = ()=> {\n      return new Promise( ( resolve ) => {\n        this.dom.setTimeout(`parent-child`, ()=>{\n          this._triggerParentChildUpdates('client_id');\n        })\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    this.subscribers.map(function(subscription: Subscription){\n      if( subscription ) subscription.unsubscribe();\n    });\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  /**\n   * Get a linear list of the parent child relations from a given point\n   * @param self the name to start from (usually the field that has just been changed by user)\n   * @param list\n   */\n  private _getRelationList(name: string, list: any[] = []){ // recursive loop\n    let item;\n    if( name && name in this.config.fieldItemMap ){\n      item = this.config.fieldItems[ this.config.fieldItemMap[ name ] ];\n      if( IsObject(item, [ 'config', 'model' ]) ){\n        list.push({\n          name: item.config.name,\n          autoFill: this._fieldHasAutoFill(name),\n        });\n        if( this._fieldHasChild(name) ){\n          this._getRelationList(this.config.fieldItems[ this.config.fieldItemMap[ name ] ].model.options.child, list);\n        }\n      }\n\n    }\n    return list;\n  }\n\n\n  /**\n   * Determine if field has a child relation in the list\n   * @param name\n   */\n  private _fieldHasChild(name: string){\n    if( name in this.config.fieldItemMap && this.config.fieldItems[ this.config.fieldItemMap[ name ] ].model && this.config.fieldItems[ this.config.fieldItemMap[ name ] ].model.options ){\n      if( this.config.fieldItems[ this.config.fieldItemMap[ name ] ].model.options.child ){\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n\n  /**\n   * Determine if field should be auto filled with the first item in the list\n   * @param name\n   */\n  private _fieldHasAutoFill(name: string){\n    if( name in this.config.fieldItemMap && this.config.fieldItems[ this.config.fieldItemMap[ name ] ].model && this.config.fieldItems[ this.config.fieldItemMap[ name ] ].model.options ){\n      if( this.config.fieldItems[ this.config.fieldItemMap[ name ] ].model.autoFill ){\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n\n  private _triggerParentChildUpdates(name: string){\n    console.log('triggerParentChildUpdates', name);\n\n    if( this._fieldHasChild(name) ){\n      let values;\n      let child_fk;\n      let childField;\n      let autoFill = false;\n      let set;\n      let resource;\n      const relations = this._getRelationList(name);\n      // console.log('relations', relations);\n      relations.some((relation) => {\n        if( relation.autoFill ){\n          autoFill = true;\n          return true;\n        }\n      });\n\n      if( name && name in this.config.fieldItemMap ){\n        child_fk = this.config.fieldItems[ this.config.fieldItemMap[ name ] ].model.options.child;\n        if( child_fk && child_fk in this.config.fieldItemMap ){\n          childField = this.config.fieldItems[ this.config.fieldItemMap[ child_fk ] ];\n          // console.log('child field', childField);\n          if( childField.model.form === 'select' ){\n            if( childField.model.options.resource ){\n              // console.log('has resource', childField.model.options.resource, this.config.metadata[ childField.model.options.resource ]);\n              if( IsObject(this.config.metadata[ childField.model.options.resource ], [ 'data_values' ]) ){\n                resource = this.config.metadata[ childField.model.options.resource ].data_values;\n              }\n            }\n            // console.log('resource', resource);\n            if( IsArray(resource, true) ){\n              values = ConvertArrayToOptionList(resource, {\n                // ensure that an option shows up in list in case other conditions remove it, aka it has been archived\n                prevent: [], // a list of ids that should not appear in the list for whatever reason\n                // parent means this options should all have a common field trait like client_fk, account_fk ....\n                parent: childField.model.options.parent ? {\n                  field: childField.model.options.parent,\n                  value: this.core.entity[ childField.model.options.parent ]\n                } : null,\n                empty: childField.model.options.empty ? childField.model.options.empty : null,\n              });\n            }else{\n              values = [];\n            }\n            // console.log('values', values);\n\n            if( autoFill && values.length ){\n              set = values[ values.length - 1 ].value;\n            }else{\n              set = null;\n            }\n            childField.config.options.values = values;\n            autoFill = autoFill && values.length ? values[ 0 ].value : null;\n            if( typeof childField.config.triggerOnChange === 'function' ) childField.config.triggerOnChange(set);\n\n            this.dom.setTimeout(`clear-message-${child_fk}`, () => {\n              if( typeof childField.config.clearMessage === 'function' ){\n                childField.config.clearMessage();\n              }\n            }, 0);\n\n          }\n        }\n      }\n    }\n\n  }\n\n\n  /**\n   * Whenever a update to the core entity happens the fields in the group should be re-evaluated if there are when conditionals set\n   * @private\n   */\n  private _resetComponentListHidden(){\n//     console.log('_resetComponentListHidden', this.template.refs);\n    let name;\n    this.template.refs.filter((componentRef: ComponentRef<any>) => {\n      return IsObject(componentRef.instance.config, true) && IsArray(componentRef.instance.when, true);\n    }).map((componentRef: ComponentRef<any>) => {\n      name = componentRef.instance.config.name;\n      if( name && name in this.config.fieldItemMap ){\n        componentRef.instance.hidden = !EvaluateWhenCondition(this.core, componentRef.instance.when, this.core);\n      }\n    });\n  }\n}\n","import { Component, OnInit, Input, ViewChild } from '@angular/core';\nimport { MatMenuTrigger } from '@angular/material/menu';\nimport { PopContextMenuConfig, PopContextMenuOption } from './pop-context-menu.model';\n\n\n@Component({\n  selector: 'lib-pop-context-menu',\n  templateUrl: './pop-context-menu.component.html',\n  styleUrls: [ './pop-context-menu.component.scss' ]\n})\nexport class PopContextMenuComponent implements OnInit {\n  @Input() config: PopContextMenuConfig;\n  @ViewChild(MatMenuTrigger, { static: true }) trigger: MatMenuTrigger;\n\n\n  constructor(){\n  }\n\n\n  ngOnInit(){\n    this.config.toggle.subscribe(active => {\n      if( active ) this.trigger.openMenu();\n      if( !active ) this.trigger.closeMenu();\n    });\n  }\n\n\n  public onMenuClick(option: PopContextMenuOption){\n    if( option.type === 'new_tab' ) window.open(option.url, '_blank');\n    if( option.type === 'portal' ) this.config.emitter.emit({\n      source: 'PopContextMenuComponent',\n      type: 'context_menu',\n      name: 'portal',\n      open: true,\n      internal_name: option.metadata.internal_name,\n      id: option.metadata.id,\n      option: option\n    });\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { MaterialModule } from '../../material/material.module';\nimport { CommonModule } from '@angular/common';\nimport { PopContextMenuComponent } from './pop-context-menu.component';\n\n\n@NgModule({\n  declarations: [\n      PopContextMenuComponent\n  ],\n  imports: [\n    MaterialModule,\n    CommonModule\n  ],\n  exports: [\n      PopContextMenuComponent\n  ],\n})\nexport class PopContextMenuModule {}\n\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({ name: 'characterIcon' , pure: true })\nexport class CharacterIconPipe implements PipeTransform {\n\n  \n  transform(name:string):string{\n    let character_icon = \"\";\n    const nameArray = name.split(\" \");\n    if( nameArray.length >= 2 ){\n      character_icon += nameArray[ 0 ].charAt(0).toLocaleUpperCase();\n      character_icon += nameArray[ 1 ].charAt(0).toLocaleUpperCase();\n    }\n    else{\n        character_icon += name.charAt(0).toLocaleUpperCase();\n        character_icon += name.charAt(1).toLocaleLowerCase();\n    } \n    return(character_icon)\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { PopSideBySideComponent } from './pop-side-by-side.component';\nimport { MaterialModule } from '../../material/material.module';\nimport { PopFieldItemModule } from '../pop-field-item/pop-field-item.module';\nimport { PopIndicatorsModule } from '../pop-indicators/pop-indicators.module';\nimport { RouterModule } from '@angular/router';\nimport { PopContextMenuModule } from '../pop-context-menu/pop-context-menu.module';\nimport { CharacterIconPipe } from '../../../pipes/characterIcon.pipe';\n\n@NgModule({\n  declarations: [\n    PopSideBySideComponent,\n    CharacterIconPipe\n  ],\n  imports: [\n    CommonModule,\n    MaterialModule,\n    RouterModule,\n    PopFieldItemModule,\n    PopIndicatorsModule,\n    PopContextMenuModule,\n\n  ],\n  exports: [\n    PopSideBySideComponent\n  ]\n})\nexport class PopSideBySideModule {\n}\n","import { AfterViewInit, Component, ElementRef, EventEmitter, Input, OnDestroy, OnInit, Output } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { InDialogComponent } from './in-dialog/in-dialog.component';\nimport { FieldItemGroupConfig } from './pop-field-item-group.model';\nimport { PopExtendComponent } from '../../../pop-extend.component';\nimport { Entity, PopBaseEventInterface, ServiceInjector } from '../../../pop-common.model';\n\n\n@Component( {\n  selector: 'lib-pop-field-item-group',\n  template: '<lib-group *ngIf=\"config && config.inDialog === null\"  (events)=\"onBubbleEvent($event);\" [config]=config></lib-group>',\n  styleUrls: []\n} )\nexport class PopFieldItemGroupComponent extends PopExtendComponent implements OnInit, OnDestroy, AfterViewInit {\n  @Input() config: FieldItemGroupConfig;\n  @Output() close = new EventEmitter<Entity>();\n\n  public name = 'PopFieldItemGroupComponent';\n\n\n  protected srv: {\n    dialog: MatDialog\n  } = {\n    dialog: ServiceInjector.get( MatDialog ),\n  };\n\n\n  constructor(\n    public el: ElementRef,\n  ){\n    super();\n\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n        resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * This component will take a list of field item configs and render them in a column list\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  ngAfterViewInit(){\n    if( this.config.inDialog ){\n      this.dom.setTimeout( `load-modal`, () => {\n        this._loadGroupInDialogBox();\n      }, 0 );\n    }\n  }\n\n\n  /**\n   * This fx will bubble events up the pipeline\n   * @param event\n   */\n  onBubbleEvent( event: PopBaseEventInterface ){\n    this.events.emit( event );\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n  /**\n   * This fx will load the field item list in a dialog modal, this is for typically for creating entities and such actions.\n   * This will allow all the fields items to be placed in an angular form so all the data can be validated collectively.\n   * @private\n   */\n  private _loadGroupInDialogBox(){\n    const dialogBox = this.srv.dialog.open(\n      InDialogComponent,\n      {\n        data: this.config,\n        disableClose: true\n      }\n    );\n    dialogBox.componentInstance[ 'http' ] = this.config.http;\n    dialogBox.componentInstance[ 'debug' ] = this.config.debug;\n    dialogBox.componentInstance.events.subscribe( ( event: PopBaseEventInterface ) => {\n      event.group = this.config;\n      this.events.emit( event );\n    } );\n    dialogBox.afterClosed().subscribe( ( result: any ) => {\n      this.close.emit( result );\n    } );\n  }\n\n\n}\n","import { NgModule } from \"@angular/core\";\nimport { MaterialModule } from '../../material/material.module';\nimport { InDialogComponent } from './in-dialog/in-dialog.component';\nimport { CommonModule } from '@angular/common';\nimport { PopIndicatorsModule } from '../pop-indicators/pop-indicators.module';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { PopFieldItemModule } from '../pop-field-item/pop-field-item.module';\nimport { GroupComponent } from './group/group.component';\nimport { PopSideBySideModule } from '../pop-side-by-side/pop-side-by-side.module';\nimport { PopFieldItemGroupComponent } from './pop-field-item-group.component';\n\n\n@NgModule({\n  declarations: [\n    PopFieldItemGroupComponent,\n    InDialogComponent,\n    GroupComponent\n  ],\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    MaterialModule,\n    PopIndicatorsModule,\n    PopFieldItemModule,\n    PopSideBySideModule,\n  ],\n  exports: [\n    PopFieldItemGroupComponent,\n  ],\n})\nexport class PopFieldItemGroupModule {\n}\n","import { Injectable } from '@angular/core';\nimport { HttpErrorResponse } from '@angular/common/http';\nimport {\n  ArrayContainsAll,\n  ArrayMapSetter,\n  ArrayOnlyUnique,\n  ArraysMatch,\n  ConvertDateFormat, ConvertDateToDateTimeFormat,\n  ConvertObjectToUri, DeepCopy,\n  DynamicSort, GetHttpErrorMsg, HyphenToPascal,\n  IsArray,\n  IsNumber,\n  IsObject,\n  IsString, ObjectContainsTagSearch,\n  PopUid, SnakeToPascal, SpaceToSnake, StorageGetter, StringReplaceAll, TitleCase,\n  ToArray, ToObject\n} from '../pop-common-utility';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PopCommonService {\n\n  public name = 'PopCommonService';\n\n\n  arrayContainsAll(needles: Array<string>, haystack: Array<string>, strict: boolean = false){\n    return ArrayContainsAll(needles, haystack, strict);\n  }\n\n\n  // function for dynamic sorting an array of objects.\n  // - Usage: someArray.sort(dynamicSort('key'));\n  // @param key: The name of the key in each object to sort on.\n  // @param order: asc (Ascending) or desc (Descending)\n  // @return: sorted array.\n  dynamicSort(key, order = 'asc'){\n    return DynamicSort(key, order);\n  }\n\n\n  /**\n   * Sorts on sort\n   * @param a\n   * @param b\n   * returns int\n   */\n  sortBySort(a, b){\n    if( a.sort < b.sort ) return -1;\n    if( a.sort > b.sort ) return 1;\n    return 0;\n  }\n\n\n  /**\n   * Sorts on name field\n   * @param a\n   * @param b\n   * returns int\n   */\n  sortByName(a, b){\n    if( a.name < b.name ) return -1;\n    if( a.name > b.name ) return 1;\n    return 0;\n  }\n\n\n  /**\n   * Sorts on position field\n   * @param a\n   * @param b\n   * returns int\n   */\n  sortByPosition(a, b){\n    if( +a.position < +b.position ) return -1;\n    if( +a.position > +b.position ) return 1;\n    return 0;\n  }\n\n\n  /**\n   * Sorts on entityId field\n   * @param a\n   * @param b\n   * returns int\n   */\n\n  sortById(a, b){\n    if( a.id < b.id ) return -1;\n    if( a.id > b.id ) return 1;\n    return 0;\n  }\n\n\n  /**\n   * Checks if two arrays match\n   *\n   * @param arr1\n   * @param arr2\n   * @param field -optional\n   *\n   * - if field is passed - check to see if the field is the same in both arrays\n   *\n   * @returns boolean\n   */\n  arraysMatch(arr1: any[], arr2: any[], field: string){\n    return ArraysMatch(arr1, arr2, field);\n  }\n\n\n  /**\n   * Convert an object into an array\n   * @param obj\n   * @returns array\n   */\n  toArray(obj: object){\n    return ToArray(obj);\n  }\n\n\n  /**\n   * A helper function to determine if a variable is numreric\n   * @param value\n   */\n  isNumber(value: any, requireTruthy?: boolean): boolean{\n    return IsNumber(value, requireTruthy);\n  }\n\n\n  isArray(arr: any, requireLength = false): boolean{\n    return IsArray(arr, requireLength);\n  }\n\n\n  /**\n   * A helper function to determine if a variable is a qualified object\n   *\n   * @param value\n   * @param requireKeys\n   * @param throwError\n   */\n  isObject(value: any, requireKeys = false): boolean{\n    return IsObject(value, requireKeys);\n  }\n\n\n  /**\n   *\n   * A helper function to determine if a variable is a qualified string\n   * @param value\n   * @param requireLength\n   * @param throwError\n   */\n  isString(value: any, requireLength = false): boolean{\n    return IsString(value, requireLength);\n  }\n\n\n  /**\n   * Helper method to remove duplicate items from a  flat array [1,2,3,1,1], [['a','b','c','a']\n   * @param arr\n   */\n  onlyArrayUnique(arr: any[]){\n    return ArrayOnlyUnique(arr);\n  }\n\n\n  /**\n   * Helper method to remove duplicate objects in an array that share a specific property [{entityId:1, ...},{entityId:2, ...},{entityId:3, ...},{entityId:1, ...}, ]\n   * @param arr\n   */\n  removeArrayDuplicates(array: object[], prop){\n    return array.filter((obj, pos, arr) => {\n      return arr.map(mapObj => mapObj[ prop ]).indexOf(obj[ prop ]) === pos;\n    });\n  }\n\n\n  /**\n   * Map an array by a array key field\n   * @param obj\n   * @returns array\n   */\n  mapArrayWithKey(array, array_key_field: string){\n    return ArrayMapSetter(array, array_key_field);\n  }\n\n\n  /**\n   * Convert an Array to Object\n   * @param arr\n   * @returns Object\n   */\n  toObject(arr: any[]){\n    return ToObject(arr);\n  }\n\n\n  /**\n   * Convert an Array of objects  to Dictionary(object)\n   * @param arr\n   * @returns Object\n   */\n  toDictionary(arr: any[], key: string){\n    const dictionary = {};\n    if( arr && Array.isArray(arr) && arr.length ){\n      arr.map((item) => {\n        if( typeof item[ key ] !== undefined ) dictionary[ item[ key ] ] = item;\n      });\n    }\n    return dictionary;\n  }\n\n\n  toUri(obj: object | any[]){\n    return ConvertObjectToUri(obj);\n  }\n\n\n  /**\n   * Capitalize the first Letter of every word in a string\n   * @param str\n   * @returns str\n   */\n  toTitleCase(str: string){\n    return TitleCase(str);\n  }\n\n\n  /**\n   * Convert a date to yyyy:mm:dd 00:00:00\n   * @param value date\n   */\n  dateTimeFormat(value){\n    return ConvertDateToDateTimeFormat(value);\n  }\n\n\n  /**\n   * Convert a date to yyyy:mm:dd\n   * @param value date\n   */\n  dateFormat(value, format = 'yyyy-mm-dd'){\n    return ConvertDateFormat(value, format);\n  }\n\n\n  today(format = 'yyyy-mm-dd'): string{\n    const today = new Date();\n    const dd = String(today.getDate()).padStart(2, '0');\n    const mm = String(today.getMonth() + 1).padStart(2, '0');\n    const yyyy = today.getFullYear();\n\n    return this.dateFormat(mm + '/' + dd + '/' + yyyy);\n  }\n\n\n  addDays(date, days){\n    const copy = new Date(Number(date));\n    copy.setDate(date.getDate() + days);\n    return copy;\n  }\n\n\n  /**\n   * Replace all occurrences of an sequence within a string\n   * @param str\n   * @param find\n   * @param replace\n   */\n  replaceAll(str: string, find: string, replace: string){\n    return StringReplaceAll(str, find, replace);\n  }\n\n\n  /**\n   * Convert a string from snake case to Pascal Case\n   * @param field\n   * @returns string\n   */\n  snakeToPascal(field: string): string{\n    return SnakeToPascal(field);\n\n  }\n\n\n  /**\n   * Convert a string with hyphens to Pascal Case\n   * @param field\n   * @returns string\n   */\n  hyphenToPascal(field: string): string{\n    return HyphenToPascal(field);\n  }\n\n\n  /**\n   * Convert a string with spaces to snake case .. 'this is snake case' to 'this_is_snake_case'\n   * @param field\n   * @returns string\n   */\n  spaceToSnake(pascal: string): string{\n    return SpaceToSnake(pascal);\n  }\n\n\n  /**\n   * A complex fuzzy search to determine if an object's values contains a series of filter \"tags\"\n   * @param object obj: The Object that you want to see if the fieldItems match the filter\n   * @param string tags: The filter string you want to match against obj.\n   *                       Uses (!)not, (&)and, (,)or syntax for complex chaining.\n   *                       example: 'john' returns true if a field value contains 'john'\n   *                       example: 'john,jane,doe' returns true if a field value contains any of the values\n   *                       example: 'john&doe' returns true only if obj contains 'john' and  contains 'doe'\n   *                       example: 'john,!doe' returns true only if obj contains 'john' and does not contain 'doe'\n   *\n   *\n   * @returns boolean\n   */\n  hasFilter(obj: object, tags: string){\n    return ObjectContainsTagSearch(obj, tags);\n  }\n\n\n  deepCopy(obj: object){\n    return DeepCopy(obj);\n  }\n\n\n  getHttpErrorMsg(err: HttpErrorResponse){\n    return GetHttpErrorMsg(err);\n\n  }\n\n\n  getStoragePath(storage: object, steps: string[], defaultValue = null): any{\n    return StorageGetter(storage, steps, defaultValue);\n  }\n\n\n  uid(){\n    return PopUid();\n  }\n\n\n}\n","import {Component, Inject, OnInit, OnDestroy} from '@angular/core';\n\nimport {CdkDragDrop, moveItemInArray} from '@angular/cdk/drag-drop';\n\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\nimport {PopCommonService} from '../../../../services/pop-common.service';\nimport {TableOptionsConfig} from '../pop-table.model';\nimport {SwitchConfig} from '../../pop-field-item/pop-switch/switch-config.model';\nimport {Dictionary, FieldItemOption} from '../../../../pop-common.model';\nimport {PopDisplayService} from '../../../../services/pop-display.service';\nimport {SelectConfig} from \"../../pop-field-item/pop-select/select-config.model\";\n\nexport interface Toggles {\n  allowColumnDisplayToggle?: SwitchConfig;\n  allowColumnStickyToggle?: SwitchConfig;\n  allowColumnSearchToggle?: SwitchConfig;\n  allowColumnSortToggle?: SwitchConfig;\n  allowHeaderStickyToggle?: SwitchConfig;\n  allowHeaderDisplayToggle?: SwitchConfig;\n  allowPaginatorToggle?: SwitchConfig;\n}\n\n@Component({\n  selector: 'lib-dialog',\n  templateUrl: 'pop-table-dialog.component.html',\n  styleUrls: ['pop-table-dialog.component.scss']\n})\nexport class PopTableDialogComponent implements OnInit, OnDestroy {\n\n  options: TableOptionsConfig;\n  toggles: Toggles;\n  columns;\n\n  lockedColumns: SelectConfig;\n\n\n  public dom = {\n    state: <Dictionary<string | number | boolean>>{},\n    asset: <Dictionary<string | number | boolean>>{},\n    height: <Dictionary<number>>{\n      outer: null,\n      inner: null,\n      default: null\n    }\n  };\n\n  constructor(\n    private tableDialogRef: MatDialogRef<PopTableDialogComponent>,\n    private cs: PopCommonService,\n    private ds: PopDisplayService,\n    @Inject(MAT_DIALOG_DATA) public data\n  ) {\n    this.options = data.options;\n  }\n\n  ngOnInit() {\n    this.dom.height.outer = window.innerHeight - 300;\n    this.dom.height.inner = this.dom.height.outer - 150;\n    this.buildToggles();\n    this.buildColumns();\n    this.buildLockedColumns();\n\n    this.lockedColumns.control.valueChanges.subscribe((value) => this.updateLockedColumns(value));\n\n  }\n\n  buildLockedColumns(){\n    let lockedColumns = 0;\n\n    this.columns.forEach( (col, index) =>{\n      if(col.sticky === true){\n        lockedColumns = ++index;\n      }\n    });\n\n    this.lockedColumns = new SelectConfig({\n      label: 'Locked columns',\n      options: {\n        values: [\n          {value: 0, name: 'No columns locked'},\n          {value: 1, name: 'Lock first column'},\n          {value: 2, name: 'Lock first 2 columns'},\n          {value: 3, name: 'Lock first 3 columns'},\n        ]\n      },\n      value: lockedColumns\n    });\n  }\n\n  updateLockedColumns(value) {\n    this.clearColSticky();\n    if (value > 0) {\n      this.updateStickyColumns(value);\n    }\n  }\n\n  clearColSticky() {\n    this.columns.forEach(col => col.sticky = false);\n  }\n\n  updateStickyColumns(value) {\n    this.columns.forEach((col, index) => {\n      if (index < value) {\n        col.sticky = true;\n      }\n    });\n  }\n\n  handleInputEvents(event) {\n    console.log('event', event);\n  }\n\n  buildToggles() {\n    this.toggles = {\n      allowColumnSearchToggle: new SwitchConfig({\n        bubble: true,\n        label: 'Column Search',\n        value: this.options.currentOptions.searchColumns,\n        metadata: {option: 'searchColumns'}\n      }),\n      allowColumnSortToggle: new SwitchConfig({\n        bubble: true,\n        label: 'Column Sort',\n        value: this.options.currentOptions.sort,\n        metadata: {option: 'sort'}\n      }),\n      allowHeaderStickyToggle: new SwitchConfig({\n        bubble: true,\n        label: 'Sticky Header',\n        value: this.options.currentOptions.headerSticky,\n        metadata: {option: 'headerSticky'}\n      }),\n      allowHeaderDisplayToggle: new SwitchConfig({\n        bubble: true,\n        label: 'Display Header',\n        value: this.options.currentOptions.headerDisplay,\n        metadata: {option: 'headerDisplay'}\n      }),\n      allowPaginatorToggle: new SwitchConfig({\n        bubble: true,\n        label: 'Pagination',\n        value: this.options.currentOptions.paginator,\n        metadata: {option: 'paginator'}\n      }),\n    };\n  }\n\n  setAllShow(checked) {\n    this.columns.map(c => c.visible = checked);\n  }\n\n  buildColumns() {\n    // Display column order: Current order of visible items then alphabetized list of non visible items.\n    const currentColumns = [];\n    const otherColumns = [];\n\n    // Account for current column def set.\n    for (const col in this.options.currentOptions.columnDefinitions) {\n\n      this.options.currentOptions.columnDefinitions[col].display = this.ds.set(col, this.options.currentOptions.columnDefinitions[col]);\n\n      if (!this.options.currentOptions.columnDefinitions[col].name) this.options.currentOptions.columnDefinitions[col].name = col;\n\n      if (this.options.currentOptions.columnDefinitions[col].visible) {\n        currentColumns.push(this.options.currentOptions.columnDefinitions[col]);\n      } else {\n        otherColumns.push(this.options.currentOptions.columnDefinitions[col]);\n      }\n\n      // If this column has a checkbox then account for it in the list.\n      if (this.options.currentOptions.columnDefinitions[col].checkbox) {\n        if (this.options.currentOptions.columnDefinitions[col].checkbox.visible) {\n          currentColumns.push({\n            ...{name: col + '_checkbox', ref: col, display: this.ds.set(col + '_checkbox')},\n            ...this.options.currentOptions.columnDefinitions[col].checkbox\n          });\n        } else {\n          otherColumns.push({\n            ...{name: col + '_checkbox', ref: col, display: this.ds.set(col + '_checkbox')},\n            ...this.options.currentOptions.columnDefinitions[col].checkbox\n          });\n        }\n      }\n\n      // Remove from columns so we don't have duplicates.\n      if (this.options.columns.indexOf(col) !== -1) this.options.columns.splice(this.options.columns.indexOf(col), 1);\n    }\n\n    // Account for other columns in the dataset.\n    if (!otherColumns.length) {\n      for (const col of this.options.columns) {\n        otherColumns.push({name: col, display: this.ds.set(col), visible: false, sticky: false, sort: 0});\n      }\n    }\n\n    // Sort current columns by their sort number and sort other columns by their name.\n    currentColumns.sort(this.cs.dynamicSort('sort'));\n    otherColumns.sort(this.cs.dynamicSort('name'));\n\n    // Update the sort to reflect the new order.\n    let order = 0;\n    for (const col of currentColumns) col.sort = ++order;\n    for (const col of otherColumns) col.sort = ++order;\n\n    this.columns = [...currentColumns, ...otherColumns];\n  }\n\n  handleToggleEvents(event) {\n    if (event.name === 'onChange') {\n      const option = event.config.metadata.option;\n      const value = event.config.control.value;\n\n      this.options.currentOptions[event.config.metadata.option] = event.config.control.value;\n      switch (option) {\n        case 'headerDisplay':\n          if (!value) {\n            this.options.currentOptions.sort = false;\n            this.toggles.allowColumnSortToggle.switchRef.checked = false;\n            this.toggles.allowColumnSortToggle.control.setValue(false);\n\n            this.toggles.allowHeaderStickyToggle.switchRef.checked = false;\n            this.toggles.allowHeaderStickyToggle.control.setValue(false);\n            this.options.currentOptions.headerSticky = false;\n\n            this.toggles.allowColumnSearchToggle.switchRef.checked = false;\n            this.toggles.allowColumnSearchToggle.control.setValue(false);\n            this.options.currentOptions.searchColumns = false;\n          }\n          break;\n        default:\n          break;\n      }\n    }\n  }\n\n  onSave(): void {\n\n    // Set our order to be the same as the index in the array.\n    let order = 0;\n    for (const col of this.columns) col.sort = ++order;\n\n    // Build the column definitions based on user selection.\n    const columnDefinitions = {};\n    for (const col of this.columns) {\n      if (col.ref) continue; // Ignore checkboxes for now as they belong under a specific field.\n      columnDefinitions[col.name] = {\n        display: col.display,\n        helper: (col.helper ? col.helper : null),\n        icon: (col.icon ? col.icon : null),\n        sort: col.sort,\n        route: (col.route ? col.route : null),\n        sticky: col.sticky,\n        visible: col.visible,\n      };\n    }\n\n    // Account for checkboxes\n    for (const col of this.columns) {\n      if (!col.ref) continue;\n      columnDefinitions[col.ref] = {\n        ...columnDefinitions[col.ref],\n        ...{checkbox: {sort: col.sort, sticky: col.sticky, visible: col.visible}}\n      };\n    }\n\n    this.options.currentOptions.columnDefinitions = columnDefinitions;\n\n    this.tableDialogRef.close({type: 'save', options: this.options});\n  }\n\n  onResetToDefault(): void {\n    this.tableDialogRef.close({type: 'reset', options: this.options});\n  }\n\n  onCancel(): void {\n    this.tableDialogRef.close({type: 'cancel', options: this.options});\n  }\n\n  drop(event: CdkDragDrop<string[]>) {\n    moveItemInArray(this.columns, event.previousIndex, event.currentIndex);\n  }\n\n  ngOnDestroy() {\n  }\n\n}\n","import {OnInit, Component, ViewChild, OnDestroy, ViewEncapsulation, ElementRef, ChangeDetectorRef} from '@angular/core';\nimport {Input} from '@angular/core';\nimport {ColumnDefinitionInterface, TableConfig, TableOptionsInterface} from './pop-table.model';\nimport {MatPaginator} from '@angular/material/paginator';\nimport {Subject} from 'rxjs';\nimport {Entity, PopBaseEventInterface, PopHref, PopPipe, PopTemplate, ServiceInjector} from '../../../pop-common.model';\nimport {PopBaseService} from '../../../services/pop-base.service';\nimport {MatDialog} from '@angular/material/dialog';\nimport {Router} from '@angular/router';\nimport {PopExtendComponent} from '../../../pop-extend.component';\nimport {PopDomService} from '../../../services/pop-dom.service';\nimport {ParseLinkUrl} from '../../entity/pop-entity-utility';\nimport {\n  DynamicSort,\n  IsArray,\n  IsDefined,\n  IsNumber,\n  IsObject,\n  IsObjectThrowError,\n  IsString,\n  IsUndefined,\n  ObjectContainsTagSearch,\n  SetSiteVar,\n  Sleep\n} from '../../../pop-common-utility';\nimport {PopTableDialogComponent} from './pop-table-dialog/pop-table-dialog.component';\nimport {PopPipeService} from \"../../../services/pop-pipe.service\";\n\n\n@Component({\n  selector: 'lib-pop-table',\n  templateUrl: './pop-table.component.html',\n  styleUrls: ['./pop-table.component.scss'],\n  encapsulation: ViewEncapsulation.Emulated,\n})\nexport class PopTableComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() config: TableConfig;\n  @ViewChild('wrapper', {static: true}) wrapper: ElementRef;\n  @ViewChild('footer') footer: ElementRef;\n  @ViewChild(MatPaginator, {static: true}) matPaginator: MatPaginator;\n  public name = 'PopTableComponent';\n\n  srv = {\n    base: <PopBaseService>undefined,\n    dialog: <MatDialog>undefined,\n    router: <Router>undefined,\n    pipe: <PopPipeService>undefined,\n  };\n\n\n  asset = {\n    data: undefined,\n    filter: {\n      column: {},\n      predicate: undefined,\n      search: undefined\n    }\n  };\n\n\n  /**\n   * @param el\n   * @param cdr\n   * @param _baseRepo\n   * @param _dialogRepo\n   * @param _domRepo\n   * @param _routerRepo\n   * @param _pipeRepo\n   */\n  constructor(\n    public el: ElementRef,\n    public cdr: ChangeDetectorRef,\n    protected _baseRepo: PopBaseService,\n    protected _dialogRepo: MatDialog,\n    protected _domRepo: PopDomService,\n    protected _routerRepo: Router,\n    protected _pipeRepo: PopPipeService,\n  ) {\n    super();\n    /**\n     * Configure the specifics of this component\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise(async (resolve) => {\n\n        await Promise.all([\n          this._setInitialConfig(), // set default configs\n          this._setHeight(), // Determine the height of the table\n          this._updateButtonControl(),\n          this._attachPaginator(), // Attach the paginator to the config\n          this._handleConfigEvents(), //  Manage Config Events\n          this._setConfigHooks(), // attach hooks on to the config that let other components tie in to this component\n          this._initSearchFilter(), // sets the search abilities\n          this._configureTable() // Prep the table for display.\n        ]);\n\n        return resolve(true);\n      });\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise(async (resolve) => {\n        this._setFilterPredicate(this.dom.session.searchValue); // Set up the filter predicates to use with this table\n        return resolve(true);\n      });\n    };\n  }\n\n\n  /**\n   * This component should have a purpose\n   */\n  ngOnInit() {\n    super.ngOnInit();\n  }\n\n\n  /**\n   * The table will generate a slew of action and event triggers that need passed up the chain\n   * @param name\n   * @param event\n   */\n  onBubbleEvent(name, event): void {\n    // All selections of table rows should come through here so _update the buttonControls.\n    const tableEvent: PopBaseEventInterface = {\n      source: this.name,\n      type: 'table',\n      name: name,\n      data: event,\n      metadata: this.config.metadata\n    };\n    this.log.event(`onBubbleEvent`, tableEvent);\n    // We want a copy being emitted not the actual objects.\n    this.events.emit(JSON.parse(JSON.stringify(tableEvent)));\n  }\n\n\n  /**\n   * This will apply the search value that the user enters behind a debouncer\n   * @param searchValue\n   * @param col\n   */\n  onApplySearchValue(searchValue: string, col: string) {\n    this.dom.setTimeout('apply-search', () => {\n      this.asset.filter.search(searchValue, col);\n      this.onBubbleEvent('search', searchValue);\n    }, 250);\n  }\n\n\n  /**\n   * The user can click on a button to edit their preferences for this table in a modal\n   */\n  onEditTablePreferencesClick(): void {\n\n    // Get a copy of the current options.\n    const searchColumns = this.config.searchColumns;\n    const options: TableOptionsInterface = JSON.parse(JSON.stringify(this.config.options));\n\n    // Defaults and allowables should be set by the coder but if not they will use the TableOptionsConfig defaults.\n    // But we still need to set the current options.\n    options.currentOptions = {\n      columnDefinitions: this.config.columnDefinitions,\n      headerDisplay: this.config.headerDisplay,\n      headerSticky: this.config.headerSticky,\n      paginator: this.config.paginator,\n      search: this.config.search,\n      searchColumns: this.config.searchColumns,\n      sort: this.config.sort,\n    };\n\n    // If the coder didn't pass into options the available columns then get a list of all possible columns from the data.\n    if (!options.columns.length && this.asset.data && this.asset.data[0]) {\n      for (const col in this.asset.data[0]) {\n        if (!this.asset.data[0].hasOwnProperty(col)) continue;\n        if (IsString(this.asset.data[0][col]) || IsNumber(this.asset.data[0][col])) {\n          options.columns.push(col);\n        }\n      }\n    }\n\n    this.onBubbleEvent('options_open', options);\n\n    const dialogRef = this.srv.dialog.open(PopTableDialogComponent, {\n      data: {options: options}\n    });\n\n    dialogRef.afterClosed().subscribe(dialog => {\n      if (dialog) {\n        console.log('here', dialog);\n        if (dialog.type === 'save') {\n          this.dom.refreshing();\n          try {\n            this.cdr.detectChanges();\n          } catch (e) {\n          }\n          const newOptions = JSON.parse(JSON.stringify(dialog.options));\n          this.onBubbleEvent('options_save', newOptions);\n          // Build a new config object instead of updating the old one so that Angular's change detection will auto _update the view.\n          // - Certain things (column sort / search) wont auto-_update otherwise.\n          // - Requires the updating of the column defs in the setTimeout.\n          // - Might be an Angular bug: https://github.com/angular/material2/issues/13030\n\n          this.config.headerDisplay = newOptions.currentOptions.headerDisplay;\n          this.config.headerSticky = newOptions.currentOptions.headerSticky;\n          this.config.paginator = newOptions.currentOptions.paginator;\n          this.config.searchColumns = newOptions.currentOptions.searchColumns;\n          this.config.sort = newOptions.currentOptions.sort;\n\n          this.config.updateColumnDefinitions(newOptions.currentOptions.columnDefinitions);\n          if (searchColumns !== this.config.searchColumns) this._setFilterPredicate();\n          try {\n            this.cdr.detectChanges();\n          } catch (e) {\n          }\n          this._resetTable();\n\n        } else if (dialog.type === 'reset') {\n          this.dom.refreshing();\n          try {\n            this.cdr.detectChanges();\n          } catch (e) {\n          }\n\n          // Build a new config object instead of updating the old one so that Angular's change detection will auto _update the view.\n          // - Certain things (column sort / search) wont auto-_update otherwise.\n          // - Requires the updating of the column defs in the setTimeout.\n          // - Might be an Angular bug: https://github.com/angular/material2/issues/13030\n\n\n          this.onBubbleEvent('options_reset', dialog.options);\n          this.config.headerDisplay = this.config.options.defaultOptions.headerDisplay;\n          this.config.headerSticky = this.config.options.defaultOptions.headerSticky;\n          // this.config.paginator = this.config.options.defaultOptions.paginator;\n          this.config.searchColumns = this.config.options.defaultOptions.searchColumns;\n          this.config.sort = this.config.options.defaultOptions.sort;\n          this.config.dealWithAngularChangeDetectionFailure = false;\n\n          const columnDefinitions = JSON.parse(JSON.stringify(dialog.options.defaultOptions.columnDefinitions));\n          this.config.updateColumnDefinitions(columnDefinitions);\n          if (searchColumns !== this.config.searchColumns) this._setFilterPredicate();\n          try {\n            this.cdr.detectChanges();\n          } catch (e) {\n          }\n          this._resetTable();\n\n        } else if (dialog.type === 'cancel') {\n          this.onBubbleEvent('options_cancel', {});\n        }\n      } else {\n        this.onBubbleEvent('options_cancel', {});\n      }\n    });\n  }\n\n\n  /**\n   * Clean up the dom of this component\n   */\n  ngOnDestroy() {\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Protected Method )                                      *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  /**\n   * Setup an intial config for this component here\n   * @private\n   */\n  protected _setInitialConfig(): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      // Ensure config\n      this.config = IsObjectThrowError(this.config, true, `${this.name}:configure: - this.config`) ? this.config : null;\n      // Set a data container to hold raw data\n      this.asset.data = <any[]>[];\n      if (IsDefined(this.config.id)) this.id = this.config.id;\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * Handle table events\n   * @param event\n   */\n  protected _onTableEvent(event: PopBaseEventInterface) {\n    let goToUrl;\n    let routeApp;\n    if (event.type === 'table') {\n      switch (event.name) {\n        case 'columnStandardClick':\n          // If global route was set then let the table handle the routing else emit the event.\n          if (this.config.route) {\n            goToUrl = this._parseGoToUrl(this.config.route, event.data.row);\n            routeApp = String(goToUrl).split('/');\n            if (routeApp[1] && routeApp[1] === PopHref) {\n              // Since we are in the same app then use Angular to route.\n              const route = routeApp.slice(2).join('/');\n              this.srv.router.navigate([route]).catch((e) => {\n                PopTemplate.error({message: `Invalid Client Route: ${route}`, code: 500});\n                console.log(e);\n              });\n            } else {\n              // do a hard reload if we aren't.\n              SetSiteVar('redirect', goToUrl);\n              this.srv.base.redirect();\n            }\n          } else {\n            this.onBubbleEvent('row_clicked', event.data.row);\n          }\n          break;\n\n        case 'columnRouteClick':\n          if (this.config.linkBehavior === 'route') {\n            goToUrl = this._parseGoToUrl(this.config.columnDefinitions[event.data.name].route, event.data.row);\n            if (!goToUrl) return false;\n            routeApp = String(goToUrl).split('/');\n            if (routeApp[1] && routeApp[1] === PopHref) {\n              const route = routeApp.slice(2).join('/');\n              this.srv.router.navigate([route]).catch((e) => {\n                console.log(e);\n                PopTemplate.error({message: `Invalid Client Route: ${route}`, code: 500});\n              });\n            } else {\n              SetSiteVar('redirect', goToUrl);\n              this.srv.base.redirect();\n            }\n          } else {\n            this.onBubbleEvent(event.name, event.data);\n          }\n          break;\n\n        case 'columnLinkClick':\n          this.onBubbleEvent('columnLinkClick', {\n            link: this.config.columnDefinitions[event.data.name].link,\n            row: event.data.row,\n            col: event.data.name\n          });\n          break;\n        case 'filter':\n          this.onApplySearchValue(event.data.filter, event.data.col);\n          break;\n        default:\n          this.onBubbleEvent(event.name, event.data);\n          break;\n      }\n    }\n    if (event.type === 'context_menu') {\n      this.events.emit(event);\n    }\n  }\n\n\n  /**\n   * This determine what the height of the table should be\n   * @param height\n   */\n  protected _setHeight(height: number = null): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      this.dom.overhead = 0;\n      if (this.config) {\n        if (height) this.config.height = height;\n        if (this.config.height) {\n          if (this.config.options || this.config.buttons.length || (this.config.search && !this.config.searchColumns)) this.dom.overhead = this.dom.overhead + 55;\n          if (this.config.paginator) this.dom.overhead = this.dom.overhead + 65;\n          this.dom.setHeight(this.config.height, this.dom.overhead);\n          return resolve(true);\n        }\n      } else {\n        this.dom.setHeight(0, 0);\n        this.dom.height.outer = null;\n        this.dom.height.inner = null;\n      }\n      return resolve(false);\n    });\n  }\n\n\n  /**\n   * The user can choose from a global search or a column search\n   */\n  private _setFilterPredicate(searchValue: string = null) {\n    if (this.config.searchColumns) {\n      this.config.matData.filter = '';\n      this.config.matData.filterPredicate = this.asset.filter.predicate.column;\n    } else {\n      this.config.matData.filterPredicate = this.asset.filter.predicate.tag;\n      this.onApplySearchValue((searchValue ? searchValue : ''), '');\n    }\n  }\n\n\n  protected _updateData(data: Array<object>) {\n    this.dom.refreshing();\n    if (!this.config.matData.paginator) this.config.matData.paginator = this.matPaginator;\n    if (IsObject(this.config.columnDefinitions, true)) {\n      if (IsArray(data)) {\n        this.asset.data = data;\n        this.config.matData.data = this.asset.data.slice();\n        if (!this.config.searchColumns && this.dom.session.searchValue) {\n          this.asset.filter.search(this.dom.session.searchValue, '');\n        }\n\n        this._setTableLayout();\n      }\n    } else if (IsArray(data, true)) {\n      this.config.data = data;\n      this.onBubbleEvent('column_definitions', data[0]);\n    }\n  }\n\n\n  protected _resetTable(data: Array<object> = null) {\n    this.log.info(`_resetTable`);\n    this.dom.setTimeout(`reset-table`, async () => {\n      this.dom.refreshing();\n      await this._configureTable();\n      await this._updateButtonControl();\n      if (Array.isArray(data)) {\n        this._updateData(data);\n      } else {\n        this.dom.setTimeout(`view-ready`, async () => {\n          this.dom.ready();\n        }, 200);\n      }\n    }, 0);\n  }\n\n\n  /**\n   * This will bring in the table config,user preferences,data set and tie it all together\n   * The structure of the data set is important to what the table will render\n   */\n  protected _configureTable(): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      this.log.info(`_configureTable`);\n      this.config.matData.data.length = 0;\n      const templates = {};\n      const visible = [];\n      let visibleOrdered = [];\n      let validDefinition = false;\n\n      if(!IsObject(this.config.columnDefinitions, true)){\n        this.dom.state.hasColumnDefinitions = true;\n        this.config.columnDefinitions = {\n          description: { name: \"description\", label: \"Description\", visible: true, sort: 3 },\n          id: { name: \"id\", label: \"ID\", checkbox: { visible: true, sort: 0 }, visible: true, sort: 999 },\n          name: { name: \"name\", label: \"Name\", visible: true, sort: 2 }\n        }\n      } else {\n\n        this.dom.state.hasColumnDefinitions = IsObject(this.config.columnDefinitions, true);\n      }\n\n      for (const col in this.config.columnDefinitions) {\n        if (!this.config.columnDefinitions.hasOwnProperty(col)) continue;\n\n        // Marking this as true so that the auto config does not run.\n        validDefinition = true;\n\n        // Figure out the template to use.\n        let template = 'Standard';\n        if (this.config.columnDefinitions[col].route) {\n          if (this.config.columnDefinitions[col].icon) {\n            template = this.config.columnDefinitions[col].helper ? 'RouteIconHelper' : 'RouteIcon';\n          } else {\n            template = this.config.columnDefinitions[col].helper ? 'RouteHelper' : 'Route';\n          }\n        } else if (this.config.columnDefinitions[col].link) {\n          if (this.config.columnDefinitions[col].icon) {\n            template = this.config.columnDefinitions[col].helper ? 'LinkIconHelper' : 'LinkIcon';\n          } else {\n            template = this.config.columnDefinitions[col].helper ? 'LinkHelper' : 'Link';\n          }\n        } else if (this.config.columnDefinitions[col].icon) {\n          template = this.config.columnDefinitions[col].helper ? 'IconHelper' : 'Icon';\n        } else if (this.config.columnDefinitions[col].helper) {\n          template = 'StandardHelper';\n        }\n\n        // Populate the template with anything it may need.\n        templates[col] = {\n          template: template,\n          name: col,\n          display: this.srv.pipe.label.transform(col, this.config.columnDefinitions[col]),\n          icon: this.config.columnDefinitions[col].icon,\n          helper: {\n            text: (!this.config.columnDefinitions[col].helper ? '' : (typeof this.config.columnDefinitions[col].helper === 'string' ? this.config.columnDefinitions[col].helper : this.config.columnDefinitions[col].helper.text)),\n            position: (!this.config.columnDefinitions[col].helper ? 'left' : (typeof this.config.columnDefinitions[col].helper === 'string' ? 'left' : this.config.columnDefinitions[col].helper.position)),\n          },\n          sticky: !this.config.columnDefinitions[col].sticky ? false : this.config.columnDefinitions[col].sticky\n        };\n\n        // If Visible\n        if (this.config.columnDefinitions[col].visible) visible.push({\n          name: col,\n          sort: this.config.columnDefinitions[col].sort\n        });\n\n        // Check if this column should also have a checkbox.\n        if (this.config.columnDefinitions[col].checkbox) {\n          const cbName = 'checkbox_' + col;\n          templates[cbName] = {\n            template: 'Checkbox',\n            name: col,\n            helper: {text: '', position: 'left'},\n            sticky: !this.config.columnDefinitions[col].checkbox.sticky ? false : this.config.columnDefinitions[col].checkbox.sticky\n          };\n          if (this.config.columnDefinitions[col].checkbox.visible) {\n            visible.push({\n              name: cbName,\n              sort: this.config.columnDefinitions[col].checkbox.sort ? this.config.columnDefinitions[col].checkbox.sort : 0\n            });\n          }\n        }\n      }\n\n      // Put the visible columns are in the correct order.\n      visible.sort(DynamicSort('sort'));\n      for (const i in visible) visibleOrdered.push(visible[i].name);\n\n      // If no column configs were passed in then use the data set and just display all the columns.\n      if (!validDefinition && this.asset.data && this.asset.data[0]) {\n        for (const col in this.asset.data[0]) {\n          if (!this.asset.data[0].hasOwnProperty(col)) continue;\n          visibleOrdered.push(col);\n          templates[col] = {\n            template: 'Standard',\n            name: col,\n            display: PopPipe.label.transform(col)\n          };\n        }\n      }\n\n      // Just in case, remove any columns in the visibleOrdered that do not exist in the data set.\n      if (Array.isArray(this.asset.data) && this.asset.data.length) {\n        const availableFields = Object.keys(this.asset.data[0]);\n        visibleOrdered = visibleOrdered.filter((col) => {\n          return (col.includes('checkbox_') ? true : availableFields.includes(col));\n        });\n      }\n\n      // Set the config.\n      this.config.columnConfig = {templates: templates, visible: visibleOrdered};\n\n\n      // Clear previous selections.\n      if (this.config.selection) this.config.selection.clear();\n\n\n      // Set the data.\n      if (IsArray(this.config.data, false)) {\n        this._updateData(this.config.data);\n      }\n      setTimeout(() => {\n        this.dom.ready();\n        this.onBubbleEvent('ready', 1);\n      });\n\n      return resolve(true);\n    });\n  }\n\n\n  protected _setTablePagination() {\n    if (this.config && this.config.height) {\n      let viewableRows;\n      if (this.config.paginator && this.matPaginator && IsArray(this.asset.data, false)) {\n        this.dom.state.hasPagination = this.asset.data.length > 50;\n        // viewableRows = this.asset.data ? this.asset.data.length : 0;\n        // if( this.dom.state.hasPagination ){\n        // viewableRows = parseInt(String(( ( this.dom.height.inner - 25 ) / 50 )), 10);\n        viewableRows = 50;\n        // if( this.config.headerSticky ) viewableRows--;\n        // }\n        setTimeout(() => {\n          this.config.matData.paginator.pageSize = 50;\n          this.config.matData.paginator.pageSizeOptions = [50];\n          this.config.matData.paginator.pageIndex = 0;\n          this.config.matData.paginator.page.next({pageIndex: 0, pageSize: 50, length: 50});\n        });\n      }\n    }\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  private _updateColumnDefinitions(definitions: { [key: string]: ColumnDefinitionInterface }) {\n    this.config.columnDefinitions = definitions;\n    this._configureTable().then(() => true);\n  }\n\n\n  /**\n   * This function will attach and configure a paginator if it is needed\n   */\n  private _attachPaginator(): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      if (this.matPaginator) {\n        this.matPaginator.hidePageSize = true;\n        if (this.config && this.config.matData) this.config.matData.paginator = this.matPaginator;\n      }\n      return resolve(false);\n    });\n  }\n\n\n  /**\n   * This will manage the button interface\n   * Buttons can have a dependency on what the user has currently selected(list items have a checkbox selection)\n   */\n  private _updateButtonControl(): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      // Initialize the ui button control\n      if (IsUndefined(this.ui.buttonControl)) {\n        this.ui.buttonControl = {\n          requireSelected: false,\n          requireOneSelected: false,\n          requireNoneSelected: true\n        };\n      }\n      if (this.config.selection) {\n        const selectCount = this.config.selection.selected.length;\n        this.ui.buttonControl.requireSelected = +selectCount > 0;\n        this.ui.buttonControl.requireOneSelected = +selectCount === 1;\n        this.ui.buttonControl.requireNoneSelected = +selectCount === 0;\n      } else {\n        this.ui.buttonControl.requireSelected = false;\n        this.ui.buttonControl.requireOneSelected = false;\n        this.ui.buttonControl.requireNoneSelected = true;\n      }\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * The table config has its own event emitter that need to be handled\n   */\n  private _handleConfigEvents(): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      if (!this.config.onEvent) this.config.onEvent = new Subject<PopBaseEventInterface>();\n      this.dom.setSubscriber('config-events', this.config.onEvent.subscribe((event: PopBaseEventInterface) => {\n        this._updateButtonControl().then(() => true);\n        this._onTableEvent(event);\n      }));\n      return resolve(false);\n    });\n  }\n\n\n  /**\n   * This will allow an outside component to trigger specific functionality through the config of this component\n   */\n  private _setConfigHooks(): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n\n      this.config.setHeight = (height: number) => {\n        this._setTableHeight(height);\n      };\n\n      this.config.clearSelected = (): Promise<boolean> => {\n        return new Promise<boolean>(async (clearResolver) => {\n          this.config.selection.clear();\n          await Sleep(250);\n          this._updateButtonControl().then(() => {\n            return clearResolver(true);\n          });\n        });\n      };\n\n      this.config.updateColumnDefinitions = (definitions) => {\n        this._updateColumnDefinitions(definitions);\n      };\n\n      this.config.updateData = (data) => {\n        this._updateData(data);\n      };\n\n      this.config.setLayout = (height: number) => {\n        this._setTableLayout(height);\n      };\n\n      this.config.reset = (data: Array<object> = null) => {\n        this._resetTable(data);\n      };\n\n      this.config.applyFilter = (searchValue: string, col: string) => {\n        if (!this.config.searchColumns) {\n          this.onApplySearchValue(searchValue, col);\n        }\n      };\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * Initialize and manage the filter predicates that this table will use\n   */\n  private _initSearchFilter(): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      this.dom.session.searchValue = this.dom.session.searchValue ? this.dom.session.searchValue : (this.config.searchValue ? this.config.searchValue : '');\n      this.asset.filter.predicate = {\n        default: this.config.matData.filterPredicate, // Store a copy of this for resetting when options toggle search/column search.\n        column: (data, filter: string): boolean => {\n          let exists = true;\n          for (const i in this.asset.filter.column) {\n            if (data[i] && data[i].toLowerCase) {\n              exists = data[i].toLowerCase().includes(this.asset.filter.column[i]);\n            } else {\n              // Cast numbers to strings.\n              exists = String(data[i]).includes(this.asset.filter.column[i]);\n            }\n            if (!exists) return false;\n          }\n          return true;\n        },\n        tag: (data: any, filter: string): boolean => {\n          return ObjectContainsTagSearch(data, filter);\n        }\n      };\n      this.asset.filter.search = (searchValue: string, col: string) => {\n        searchValue = searchValue.trim().toLocaleLowerCase();\n        if (!col) {\n          this.config.matData.filter = searchValue;\n        } else {\n          if (searchValue) {\n            // Make sure that this column is in the list.\n            this.asset.filter.column[col] = searchValue;\n          } else if (this.asset.filter.column[col]) {\n            // Since filter is empty this column shouldn't be considered.\n            delete (this.asset.filter.column[col]);\n          }\n          this.config.matData.filter = searchValue;\n        }\n\n        if (this.config.paginator && this.config.matData.paginator) this.config.matData.paginator.firstPage();\n      };\n      return resolve(true);\n    });\n  }\n\n\n  private _setTableLayout(height: number = null) {\n    this.dom.setTimeout('table-layout', () => {\n      this.dom.loading();\n      if (this.config && IsArray(this.asset.data, false)) {\n        this._setHeight(height).then(() => {\n\n        });\n        setTimeout(() => {\n          this.dom.ready();\n          this._setTablePagination();\n        }, 0);\n      }\n    }, 0);\n  }\n\n\n  private _setTableHeight(height: number = null) {\n    if (this.config && IsArray(this.asset.data, false)) {\n      this._setHeight(height);\n      setTimeout(() => {\n        this.dom.ready();\n        this._setTablePagination();\n      }, 0);\n    }\n  }\n\n\n  private _parseGoToUrl(goToUrl = '', row: Entity): string {\n    if (!goToUrl) return goToUrl;\n\n    // Check for alias\n    if (goToUrl.includes('alias:')) {\n      const start = goToUrl.indexOf('alias:');\n      const end = goToUrl.indexOf('/', start) !== -1 ? goToUrl.indexOf('/', start) : goToUrl.length;\n      const aliasString = goToUrl.substring(start, end);\n      const aliasArray = aliasString.split(':');\n      aliasArray.shift();\n      const alias = PopPipe.label.getAlias(aliasArray.shift());\n      goToUrl = goToUrl.replace(aliasString, alias);\n    }\n\n    // Check for other id.\n    if (goToUrl.includes(':') && row) {\n      goToUrl = ParseLinkUrl(goToUrl, row);\n    }\n\n    return goToUrl;\n  }\n\n}\n\n\n\n\n\n","import {Component, ElementRef, Input, OnDestroy, OnInit, ViewChild} from '@angular/core';\nimport {MatCheckbox} from '@angular/material/checkbox';\nimport {MatSort, SortDirection} from '@angular/material/sort';\nimport {SelectionModel} from '@angular/cdk/collections';\nimport {TableConfig} from '../pop-table.model';\nimport {PopContextMenuConfig} from '../../pop-context-menu/pop-context-menu.model';\nimport {PopBaseEventInterface} from '../../../../pop-common.model';\nimport {PopExtendComponent} from '../../../../pop-extend.component';\nimport {PopDomService} from '../../../../services/pop-dom.service';\nimport {fadeInOut} from '../../../../pop-common-animations.model';\nimport {ParseLinkUrl} from '../../../entity/pop-entity-utility';\nimport {PopDisplayService} from '../../../../services/pop-display.service';\n\n\n@Component({\n  selector: 'lib-pop-table-view',\n  templateUrl: './pop-table-view.component.html',\n  styleUrls: ['./pop-table-view.component.scss'],\n  animations: [\n    fadeInOut,\n  ]\n})\nexport class PopTableViewComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() config: TableConfig;\n  @ViewChild(MatSort, {static: true}) tableSort: MatSort;\n  @ViewChild('checkbox') checkbox: MatCheckbox;\n\n  public name = 'PopTableViewComponent';\n\n  srv = {\n    display: <PopDisplayService>undefined,\n  };\n\n  public ui = {\n    helperText:<any[]> []\n  };\n\n\n  /**\n   * @param el\n   * @param _displayRepo\n   * @param _domRepo\n   */\n  constructor(\n    public el: ElementRef,\n    protected _displayRepo: PopDisplayService,\n    protected _domRepo: PopDomService,\n  ) {\n    super();\n    /**\n     * Configure the specifics of this component\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        this._attachContextMenu();\n\n        // Assign this so it is available inside the filterBarConfig.\n        this.config.matData.sort = this.tableSort;\n        // Create a container for helper texts\n        this.ui.helperText = [];\n        // Add to the config so it's available to prepTable.\n        this.config.selection = new SelectionModel(true, []);\n        this.config.headerSticky = true;\n        setTimeout(() => {\n          this.config.matData.sort = this.tableSort;\n          if (this.config.initialSort) this.tableSort.sort({\n            id: this.config.initialSort,\n            start: this.config.initialSortDirection,\n            disableClear: true\n          });\n        }, 500);\n\n        resolve(true);\n      });\n    };\n  }\n\n\n  sortDisplay(col) {\n\n    const isActive = this.tableSort.active === col ? true : false;\n    let display = 'arrow_drop_down';\n\n    if (isActive) {\n      if (this.tableSort.direction === 'asc') {\n        display = 'arrow_drop_up';\n      }\n    }\n\n    return display;\n\n  }\n\n  // sort(column,direction){\n  //   // console.log(this.tableSort);\n  //   this.tableSort.direction = direction === 'asc' ? 'desc' : 'asc';\n  //   this.tableSort.sort({ id: column, start: direction, disableClear: true });\n  // }\n\n  sort(col) {\n    const isActive = this.tableSort.active === col ? true : false;\n    let direction: SortDirection = 'asc';\n    if (isActive) {\n      direction = this.tableSort.direction === 'asc' ? 'desc' : 'asc';\n    } else {\n      direction = 'asc';\n    }\n    this.tableSort.direction = direction === 'asc' ? 'desc' : 'asc';\n    this.tableSort.sort({id: col, start: direction, disableClear: true});\n  }\n\n  /**\n   * This component is a child component of pop table\n   * This component specifically handles the view that renders the data\n   */\n  ngOnInit() {\n    super.ngOnInit();\n  }\n\n\n  /**\n   * Trigger an event when the user click on a name\n   * @param name\n   * @param row\n   */\n  onColumnStandardClick(name, row) {\n    this.config.onEvent.next({\n      source: this.name,\n      type: 'table',\n      name: 'columnStandardClick',\n      data: {\n        name: name,\n        row: row\n      }\n    });\n  }\n\n\n  /**\n   * Trigger an event when the user click on a name that is linked to a route\n   * @param name\n   * @param row\n   */\n  onColumnRouteClick(name, row) {\n    this.config.onEvent.next({\n      source: this.name,\n      type: 'table',\n      name: 'columnRouteClick',\n      data: {\n        name: name,\n        row: row\n      }\n    });\n  }\n\n\n  /**\n   * Create a helper text for a name\n   * @param index\n   * @param col\n   * @param row\n   */\n  onHelperText(index, col, row) {\n    \n    if (!row[col]) return '';\n    let text = this.config.columnConfig.templates[col].helper.text;\n\n    // Check for alias\n    if (text.includes('alias:')) {\n      const start = text.indexOf('alias:');\n      const end = text.indexOf(' ', start) !== -1 ? text.indexOf(' ', start) : text.length;\n      const aliasString = text.substring(start, end);\n      const aliasArray = aliasString.split(':');\n      aliasArray.shift();\n      const alias = this.srv.display.alias(aliasArray.shift());\n      text = text.replace(aliasString, alias);\n    }\n\n    // If no text is wrapped in < > then this is the text we want.\n    if (text.indexOf('<') === -1) {\n      this.ui.helperText[index] = text;\n      return text;\n    }\n\n    // Replace any text between < > with the corresponding name data.\n    const textArray = text.split('<');\n    text = '';\n    for (let i = 0; i < textArray.length; i++) {\n      if (!textArray[i]) continue;\n      if (textArray[i].indexOf('>') === -1) {\n        text += textArray[i];\n      } else {\n        const fieldArray = textArray[i].split('>');\n        for (let ii = 0; ii < fieldArray.length; ii++) {\n          if (!fieldArray[ii]) continue;\n          if (ii === 0) {\n            text += (row[fieldArray[ii]] ? row[fieldArray[ii]] : '');\n          } else {\n            text += fieldArray[ii];\n          }\n        }\n      }\n    }\n    \n    this.ui.helperText[index] = text;\n\n    return text;\n    \n  }\n\n\n  /**\n   * Trigger an doAction when a name link is clicked\n   * @param name\n   * @param row\n   */\n  onColumnLinkClick(name, row) {\n    this.config.onEvent.next({\n      source: this.name,\n      type: 'table',\n      name: 'columnLinkClick',\n      data: {\n        name: name,\n        row: row\n      }\n    });\n  }\n\n\n  /**\n   * Selects all rows if they are not all selected; otherwise clear all row selections.\n   */\n  onMasterRowToggleClick() {\n    if (this.config.selection.hasValue() && !this.isAllRowsSelected()) {\n      this.config.selection.clear();\n      this.checkbox.checked = false;\n    } else {\n      this.isAllRowsSelected() ? this.config.selection.clear() : this.config.matData.filteredData.forEach(row => this.config.selection.select(row));\n      this.config.onEvent.next({\n        source: this.name,\n        type: 'table',\n        name: 'rows_selected',\n        data: this.config.selection.selected\n      });\n    }\n  }\n\n\n  /**\n   * This will pass up to the table component\n   * @param filter\n   * @param col\n   */\n  onApplySearchValue(filter: string, col: string) {\n    this.config.onEvent.next({\n      source: this.name,\n      type: 'table',\n      name: 'filter',\n      data: {\n        filter: filter,\n        col: col,\n      }\n    });\n  }\n\n\n  /**\n   * Asks whether the number of selected elements matches the total number of rows.\n   */\n  isAllRowsSelected() {\n    const numSelected = this.config.selection.selected.length;\n    const numRows = this.config.matData.filteredData.length;\n    return numSelected === numRows;\n  }\n\n\n  /**\n   * This will bubble events with the table signature\n   * @param name\n   * @param event\n   */\n  onBubbleEvent(name, event) {\n    this.config.onEvent.next({\n      source: this.name,\n      type: 'table',\n      name: name,\n      data: event\n    });\n  }\n\n\n  /**\n   * *ngFor track by for columns\n   * Prevents columns from re-rendering when the item is the same\n   * @param index\n   * @param item\n   */\n  trackColumnByItem(index, item) {\n    if (!item) return null;\n    return item;\n  }\n\n\n  /**\n   * *ngFor track by for rows\n   * Prevents rows from re-rendering when the item entityId is still the same\n   * @param index\n   * @param item\n   */\n  trackRowByItemId(index, item) {\n    if (!item) return null;\n    return item.id;\n  }\n\n\n  /**\n   * Clean up the dom of this component\n   */\n  ngOnDestroy() {\n    super.ngOnDestroy();\n  }\n\n\n  /**\n   * This will a build a context-menu that can used when user right clicks a certain element\n   */\n  private _attachContextMenu() {\n    this.dom.contextMenu.config = new PopContextMenuConfig();\n    //\n    this.dom.contextMenu.configure = (name, row, event: MouseEvent) => {\n      let goToUrl = '';\n      let internal_name;\n      // check if it is a route, get the url from the route given from name definition\n      if (this.config.columnDefinitions[name].route) {\n        goToUrl = ParseLinkUrl(this.config.columnDefinitions[name].route, row);\n      } else if (this.config.route) {\n        // else check if a global route exists on the table config. If it does, route to that\n        // this will most likely be used to route to an entityId by their entityId\n        goToUrl = ParseLinkUrl(this.config.route, row);\n      }\n\n      if (this.config.columnDefinitions[name].internal_name) {\n        internal_name = this.config.columnDefinitions[name].internal_name;\n      } else {\n        internal_name = row.internal_name ? row.internal_name : this.config.internal_name ? this.config.internal_name : null;\n      }\n      if (!goToUrl && !internal_name) return false;\n\n      // if we haven't returned, prevent the default behavior of the right click.\n      event.preventDefault();\n\n      // reset the context menu, and configure it to load at the position clicked.\n      this.dom.contextMenu.config.resetOptions();\n\n\n      if (internal_name) {\n        this.dom.contextMenu.config.addPortalOption(internal_name, row.id ? +row.id : +row[internal_name + '_fk']);\n      }\n      if (goToUrl) this.dom.contextMenu.config.addNewTabOption(goToUrl);\n\n      this.dom.contextMenu.config.x = event.clientX;\n      this.dom.contextMenu.config.y = event.clientY;\n      this.dom.contextMenu.config.toggle.next(true);\n    };\n    this.dom.setSubscriber('context-menu', this.dom.contextMenu.config.emitter.subscribe((event: PopBaseEventInterface) => {\n      this.config.onEvent.next(event);\n    }));\n  }\n}\n","import { NgModule } from '@angular/core';\n\nimport {DragDropModule} from '@angular/cdk/drag-drop';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { MaterialModule } from '../../material/material.module';\n\nimport { MatDialogModule } from '@angular/material/dialog';\nimport { MatPaginatorModule } from '@angular/material/paginator';\nimport { MatSortModule } from '@angular/material/sort';\nimport { MatTableModule } from '@angular/material/table';\nimport { PopTableComponent } from './pop-table.component';\nimport { PopFieldItemModule } from '../pop-field-item/pop-field-item.module';\nimport { PopContextMenuModule } from '../pop-context-menu/pop-context-menu.module';\nimport { PopTableViewComponent } from './pop-table-view/pop-table-view.component';\nimport { PopTableDialogComponent } from './pop-table-dialog/pop-table-dialog.component';\n\n\n@NgModule({\n  declarations: [\n    PopTableComponent,\n    PopTableDialogComponent,\n    PopTableViewComponent,\n  ],\n  imports: [\n    CommonModule,\n    FormsModule,\n    MaterialModule,\n    MatTableModule,\n    MatDialogModule,\n    MatSortModule,\n    MatPaginatorModule,\n    PopFieldItemModule,\n    PopContextMenuModule,\n    DragDropModule\n  ],\n  exports: [\n    PopTableComponent,\n    PopTableViewComponent,\n    DragDropModule\n  ],\n})\nexport class PopTableModule {\n}\n","import { Component, OnInit, Inject } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport { PopAjaxDialogComponent } from '../pop-ajax-dialog.component';\nimport { PopRouteHistoryResolver } from '../../../../services/pop-route-history.resolver';\nimport { PopAjaxDialogConfigInterface } from '../pop-ajax-dialog.model';\nimport { MainSpinner } from '../../pop-indicators/pop-indicators.model';\nimport { PopRequestService } from '../../../../services/pop-request.service';\n\n\n@Component({\n  selector: 'lib-dialog',\n  templateUrl: './dialog.component.html',\n  styleUrls: [ './dialog.component.scss' ]\n})\nexport class DialogComponent implements OnInit {\n  mainSpinner: MainSpinner;\n  loading: boolean;\n  httpError: { error: string, code: number };\n\n\n  constructor(\n    @Inject(MAT_DIALOG_DATA) public data: PopAjaxDialogConfigInterface,\n    private dialog: MatDialogRef<PopAjaxDialogComponent>,\n    private history: PopRouteHistoryResolver,\n    private requestService: PopRequestService,\n  ){\n  }\n\n\n  ngOnInit(){\n    this.setSpinnerOptions();\n    if( this.data.patch ) this.makeRequest();\n    else this.closeDialogAfterDelay();\n  }\n\n\n  private makeRequest(): void{\n    this.loading = true;\n    switch( this.data.patch.type ){\n      case 'delete':\n        this.doDelete();\n        break;\n      case 'get':\n        this.doGet();\n        break;\n      case 'patch':\n        this.doPatch();\n        break;\n      case 'post':\n        this.doPost();\n        break;\n    }\n  }\n\n\n  private doPatch(): void{\n    this.requestService.doPatch(this.data.patch.path, this.data.patch.body, this.data.patch.version, false).subscribe(res => {\n      this.data.response = res;\n      this.loading = false;\n      this.closeDialogAfterDelay();\n    }, err => {\n      this.loading = false;\n      this.httpError = {\n        error: typeof err.error !== 'undefined' ? err.error.message : err.statusText,\n        code: err.status\n      };\n    });\n  }\n\n\n  private doDelete(): void{\n    this.requestService.doDelete(this.data.patch.path, this.data.patch.body, this.data.patch.version, false).subscribe(res => {\n      this.data.response = res;\n      this.loading = false;\n      this.closeDialogAfterDelay();\n    }, err => {\n      this.loading = false;\n      this.httpError.error = typeof err.error !== 'undefined' ? err.error.message : err.statusText;\n      this.httpError.code = err.status;\n    });\n\n  }\n\n\n  private doPost(): void{\n    this.requestService.doPost(this.data.patch.path, this.data.patch.body, this.data.patch.version, false).subscribe(res => {\n      this.data.response = res;\n      this.loading = false;\n      this.closeDialogAfterDelay();\n    }, err => {\n      this.loading = false;\n      this.httpError.error = typeof err.error !== 'undefined' ? err.error.message : err.statusText;\n      this.httpError.code = err.status;\n    });\n\n  }\n\n\n  private doGet(): void{\n    this.requestService.doGet(this.data.patch.path, {},this.data.patch.version, false).subscribe(res => {\n      this.loading = false;\n      this.data.response = res;\n      this.closeDialogAfterDelay();\n    }, err => {\n      this.loading = false;\n      this.httpError.error = typeof err.error !== 'undefined' ? err.error.message : err.statusText;\n      this.httpError.code = err.status;\n    });\n\n  }\n\n\n  public close(): void{\n    this.dialog.close();\n  }\n\n\n  private closeDialogAfterDelay(): void{\n    setTimeout(() => {\n      this.dialog.close();\n    }, this.data.timeDelay ? this.data.timeDelay : 1000);\n  }\n\n\n  private setSpinnerOptions(): void{\n    this.mainSpinner = {\n      diameter: 100,\n      strokeWidth: 10,\n    };\n  }\n}\n","import { Component, Input, AfterViewInit, OnInit, Output, EventEmitter, } from '@angular/core';\nimport { PopAjaxDialogConfigInterface } from './pop-ajax-dialog.model';\nimport { MatDialog } from '@angular/material/dialog';\nimport { DialogComponent } from './dialog/dialog.component';\nimport { PopBaseService } from '../../../services/pop-base.service';\nimport { Router } from '@angular/router';\nimport { SetSiteVar } from '../../../pop-common-utility';\nimport { PopHref } from '../../../pop-common.model';\n\n\n@Component({\n  selector: 'lib-pop-ajax-dialog',\n  template: '',\n})\nexport class PopAjaxDialogComponent implements OnInit, AfterViewInit {\n  @Input() ajaxDialogConfig: PopAjaxDialogConfigInterface;\n  @Output() close: EventEmitter<any> = new EventEmitter<any>();\n\n\n  constructor(\n    public dialog: MatDialog,\n    private baseService: PopBaseService,\n    private router: Router,\n  ){\n  }\n\n\n  ngOnInit(){\n  }\n\n\n  ngAfterViewInit(){\n    setTimeout(() => {\n      this.loadDialog();\n    }, 250);\n  }\n\n\n  private loadDialog(): void{\n    const dialogBox = this.dialog.open(DialogComponent, {\n      width:'500px',\n      data: this.ajaxDialogConfig\n    });\n    dialogBox.afterClosed().subscribe(() => {\n      this.close.emit(this.ajaxDialogConfig.response);\n      if( this.ajaxDialogConfig.redirect ) this.redirect();\n    });\n  }\n\n\n  private redirect(): void{\n    if( this.ajaxDialogConfig.redirect.app == PopHref){\n      this.router.navigateByUrl(`${this.ajaxDialogConfig.redirect.path}`).catch(e => {\n      });\n    }\n    else{\n      SetSiteVar('redirect', `/${this.ajaxDialogConfig.redirect.app}/${this.ajaxDialogConfig.redirect.path}`);\n      this.baseService.redirect();\n    }\n  }\n\n\n}\n","import { NgModule } from \"@angular/core\";\nimport { MaterialModule } from '../../material/material.module';\nimport { PopAjaxDialogComponent } from \"./pop-ajax-dialog.component\";\nimport { DialogComponent } from \"./dialog/dialog.component\";\nimport { PopIndicatorsModule } from \"../pop-indicators/pop-indicators.module\";\nimport { CommonModule } from \"@angular/common\";\n\n\n@NgModule({\n  imports: [\n    MaterialModule,\n    PopIndicatorsModule,\n    CommonModule\n  ],\n    declarations: [\n        PopAjaxDialogComponent,\n        DialogComponent,\n    ],\n    exports: [\n        PopAjaxDialogComponent,\n    ],\n})\nexport class PopAjaxDialogModule {\n}\n","import { Component, Inject, OnInit } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport { PopNavigationDialogDataInterface, PopNavigationDialogItemInterface } from '../pop-dialogs.model';\nimport { Router } from '@angular/router';\n\n\n@Component({\n  selector: 'lib-pop-navigation-dialog',\n  templateUrl: './pop-navigation-dialog.component.html',\n  styleUrls: [ './pop-navigation-dialog.component.scss' ]\n})\nexport class PopNavigationDialogComponent implements OnInit {\n\n  constructor(\n    @Inject(MAT_DIALOG_DATA) public data: PopNavigationDialogDataInterface,\n    public dialog: MatDialogRef<PopNavigationDialogComponent>,\n    private router: Router\n  ){\n  }\n\n\n  ngOnInit(){\n    if( !this.data.display ) this.data.display = 'Navigation List';\n    if( !this.data.list || !Array.isArray(this.data.list) ) this.data.list = [];\n    if( !this.data.basePath || !( typeof this.data.basePath === 'string' ) ) this.data.basePath = null;\n  }\n\n\n  navigate(item: PopNavigationDialogItemInterface){\n    this.dialog.close();\n    if( item.path ){\n      this.router.navigateByUrl(item.path).catch(e => false);\n    }else if( this.data.basePath && item.id ){\n      this.router.navigateByUrl(`${this.data.basePath}/${item.id}/general`).catch(e => false);\n    }\n  }\n\n\n  cancel(){\n    this.dialog.close(null);\n  }\n}\n","import { Component, ElementRef, Inject, OnDestroy, OnInit } from '@angular/core';\nimport {\n  EntitySuccessDataInterface,\n  ServiceInjector\n} from '../../../../pop-common.model';\n\nimport { MAT_DIALOG_DATA, MatDialog, MatDialogRef } from '@angular/material/dialog';\n\nimport { PopExtendComponent } from '../../../../pop-extend.component';\n\n\n@Component( {\n  selector: 'lib-pop-success-dialog',\n  templateUrl: './pop-success-dialog.component.html',\n  styleUrls: [ './pop-success-dialog.component.scss' ]\n} )\nexport class PopSuccessDialogComponent extends PopExtendComponent implements OnInit, OnDestroy {\n\n\n  name = 'PopSuccessDialogComponent';\n\n  protected srv = {\n    dialog: <MatDialog>ServiceInjector.get( MatDialog ),\n  };\n\n  protected asset = {};\n\n  public ui = {\n    submitText: 'Ok',\n    header: 'Success',\n    message: 'Action was Successful'\n  };\n\n\n  constructor(\n    public el: ElementRef,\n    public dialog: MatDialogRef<PopSuccessDialogComponent>,\n    @Inject( MAT_DIALOG_DATA ) public data: EntitySuccessDataInterface,\n  ){\n    super();\n\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n\n        this.ui = { ...this.ui, ...this.data };\n\n        return resolve( true );\n      } );\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n\n\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * The user can click a cancel btn to close the action dialog\n   */\n  onFormClose(){\n    this.dom.setTimeout( `close-modal`, () => {\n      this.dialog.close( -1 );\n    }, 250 );\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Protected Method )                                      *\n   *               These are protected instead of private so that they can be overridden          *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n}\n","import { Component, Inject, OnInit } from '@angular/core';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { PopMessageDialogDataInterface } from '../pop-dialogs.model';\n\n@Component({\n  selector: 'lib-pop-message-dialog',\n  templateUrl: './pop-message-dialog.component.html',\n  styleUrls: ['./pop-message-dialog.component.scss']\n})\nexport class PopMessageDialogComponent implements OnInit {\n\n  constructor(\n    @Inject(MAT_DIALOG_DATA) public config:PopMessageDialogDataInterface ,\n    public dialog: MatDialogRef<PopMessageDialogComponent>\n  ) { }\n\n  ngOnInit(): void {\n  }\n\n  onCancel(){\n    this.dialog.close(null);\n  }\n  \n}\n","import { NgModule } from '@angular/core';\nimport { MaterialModule } from '../../material/material.module';\nimport { PopIndicatorsModule } from '../pop-indicators/pop-indicators.module';\nimport { CommonModule } from '@angular/common';\nimport { PopConfirmationDialogComponent } from './pop-confirmation-dialog/pop-confirmation-dialog.component';\nimport { PopNavigationDialogComponent } from './pop-navigation-dialog/pop-navigation-dialog.component';\nimport { PopTableModule } from '../pop-table/pop-table.module';\nimport { PopErrorsModule } from '../pop-errors/pop-errors.module';\nimport { PopFieldItemGroupModule } from '../pop-field-item-group/pop-field-item-group.module';\nimport { PopTableDialogComponent } from './pop-table-dialog/pop-table-dialog.component';\nimport { PopActionDialogComponent } from './pop-action-dialog/pop-action-dialog.component';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { PopSuccessDialogComponent } from './pop-success-dialog/pop-success-dialog.component';\nimport { PopMessageDialogComponent } from './pop-message-dialog/pop-message-dialog.component';\nimport { PortalModule } from '@angular/cdk/portal';\n\n\n@NgModule({\n  imports: [\n    MaterialModule,\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    PortalModule,\n    PopIndicatorsModule,\n    PopTableModule,\n    PopErrorsModule,\n    PopFieldItemGroupModule\n  ],\n  declarations: [\n    PopConfirmationDialogComponent,\n    PopNavigationDialogComponent,\n    PopTableDialogComponent,\n    PopActionDialogComponent,\n    PopSuccessDialogComponent,\n    PopMessageDialogComponent\n  ],\n  exports: [\n    PopConfirmationDialogComponent,\n    PopNavigationDialogComponent,\n    PopTableDialogComponent,\n    PopActionDialogComponent,\n    PopSuccessDialogComponent,\n    PopMessageDialogComponent\n  ],\n})\nexport class PopDialogsModule {}\n","import { NgModule } from '@angular/core';\nimport { PopExtendComponent } from '../../pop-extend.component';\nimport { PopExtendDynamicComponent } from '../../pop-extend-dynamic.component';\n\nimport { PopTabMenuModule } from './pop-tab-menu/pop-tab-menu.module';\nimport { PopFieldItemModule } from './pop-field-item/pop-field-item.module';\nimport { PopMenuModule } from '../app/pop-menu/pop-menu.module';\nimport { PopIndicatorsModule } from './pop-indicators/pop-indicators.module';\nimport { PopErrorsModule } from './pop-errors/pop-errors.module';\nimport { PopFieldItemGroupModule } from './pop-field-item-group/pop-field-item-group.module';\nimport { PopSideBySideModule } from './pop-side-by-side/pop-side-by-side.module';\nimport { PopTableModule } from './pop-table/pop-table.module';\nimport { PopAjaxDialogModule } from './pop-ajax-dialog/pop-ajax-dialog.module';\nimport { PopDialogsModule } from './pop-dialogs/pop-dialogs.module';\nimport { PopContextMenuModule } from './pop-context-menu/pop-context-menu.module';\nimport { DialogComponent } from './pop-ajax-dialog/dialog/dialog.component';\n\n@NgModule({\n  imports: [],\n  declarations: [\n    PopExtendComponent,\n    PopExtendDynamicComponent,\n  ],\n  exports: [\n    PopTabMenuModule,\n    PopFieldItemModule,\n    PopMenuModule,\n    PopTableModule,\n    PopIndicatorsModule,\n    PopErrorsModule,\n    PopFieldItemGroupModule,\n    PopSideBySideModule,\n    PopAjaxDialogModule,\n    PopDialogsModule,\n    PopContextMenuModule,\n  ],\n})\nexport class PopBaseModule {\n\n}\n","import { Component, ElementRef, Inject, Input, OnDestroy, OnInit } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport { ActivatedRoute } from '@angular/router';\nimport { PopExtendComponent } from '../../../../pop-extend.component';\nimport { Entity, PopEntity } from '../../../../pop-common.model';\nimport { IsObject } from '../../../../pop-common-utility';\n\n\n@Component({\n  selector: 'lib-pop-entity-advanced-search',\n  templateUrl: './pop-entity-advanced-search.component.html',\n  styleUrls: [ './pop-entity-advanced-search.component.scss' ]\n})\nexport class PopEntityAdvancedSearchComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  public name ='PopEntityAdvancedSearchComponent';\n  @Input() internal_name: string;\n\n\n  constructor(\n    public el: ElementRef,\n    private advancedSearchDialogRef: MatDialogRef<PopEntityAdvancedSearchComponent>,\n    private route: ActivatedRoute,\n    @Inject(MAT_DIALOG_DATA) public data,\n  ){\n    super();\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        this.internal_name = 'role';\n\n        this.ui.fields = [];\n        const searchFields = {};\n        let needsMetadata = false;\n        let model;\n        if( !this.internal_name ) this.internal_name = PopEntity.getRouteInternalName(this.route);\n\n        this.dom.setHeightWithParent(null, 145, 600).then((res) => true);\n\n        PopEntity.getCoreConfig(this.internal_name).then((entityConfig: any) => {\n          this.asset.entityId = entityConfig;\n          if(IsObject(this.asset.entity.repo.model.field, true)){\n            Object.keys(this.asset.entity.repo.model.field).map((column) => {\n              if( column in this.asset.entity.repo.model.field[ column ][ 'itemMap' ] ){\n                model = Object.assign({}, this.asset.entity.repo.model.field[ column ].items[ entityConfig.fields[ column ][ 'itemMap' ][ column ] ].model);\n                delete model.api; // doAction fields don't patch\n                delete model.metadata;\n                delete model.transformation;\n                searchFields[ column ] = model;\n                if( model.options && model.options.metadata ){\n                  needsMetadata = true;\n                }\n              }\n            });\n          }\n\n          // if needsMetadata go grab it before you try to build out the fields\n          if( needsMetadata ){\n            this.asset.entity.repo.getUiResources(this.core).subscribe((metadata) => {\n              if( !this.asset.entity.entity ) this.asset.entity.entityId = <Entity>{};\n              this.asset.entity.entity.metadata = metadata;\n              Object.keys(searchFields).map((field) => {\n                // this.ui.fields.push(this.config.getCoreFieldItem(this.asset.entity, field, searchFields[ field ]));\n              });\n              this.ui.fields.sort(function(a, b){\n                if( a.model.sort_top < b.model.sort_top ) return -1;\n                if( a.model.sort_top > b.model.sort_top ) return 1;\n                return 0;\n              });\n              console.log('fields', this.ui.fields);\n            });\n          }else{\n            // no metadata was needed for any of these fields\n            Object.keys(searchFields).map((field) => {\n              // this.ui.fields.push(this.config.getCoreFieldItem(this.asset.entity, field, searchFields[ field ]));\n            });\n            this.ui.fields.sort(function(a, b){\n              if( a.model.sort_top < b.model.sort_top ) return -1;\n              if( a.model.sort_top > b.model.sort_top ) return 1;\n              return 0;\n            });\n            console.log('fields', this.ui.fields);\n          }\n        });\n\n        resolve(true);\n      });\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  onSearch(): void{\n    this.advancedSearchDialogRef.close(this.data);\n  }\n\n\n  onCancel(): void{\n    this.advancedSearchDialogRef.close(null);\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n}\n","import {Component, ElementRef, Inject, Input, OnDestroy, OnInit, ViewChild} from '@angular/core';\nimport {ActivatedRoute, Router} from '@angular/router';\nimport {\n  TableButtonInterface,\n  TableConfig,\n  TableInterface,\n  TableOptionsConfig\n} from '../../base/pop-table/pop-table.model';\nimport {MainSpinner} from '../../base/pop-indicators/pop-indicators.model';\nimport {FieldItemGroupConfig} from '../../base/pop-field-item-group/pop-field-item-group.model';\nimport {PopTableComponent} from '../../base/pop-table/pop-table.component';\nimport {PopEntityAdvancedSearchComponent} from './pop-entity-advanced-search/pop-entity-advanced-search.component';\nimport {PopEntityUtilPortalService} from '../services/pop-entity-util-portal.service';\nimport {PopDomService} from '../../../services/pop-dom.service';\nimport {\n  AppGlobalInterface,\n  CoreConfig, DataFactory,\n  DataFilter,\n  Dictionary,\n  Entity,\n  EntityExtendInterface,\n  PopBaseEventInterface,\n  PopBusiness,\n  PopHref,\n  PopTemplate,\n  ServiceInjector,\n} from '../../../pop-common.model';\nimport {PopExtendComponent} from '../../../pop-extend.component';\nimport {MatDialog} from '@angular/material/dialog';\nimport {PopEntityEventService} from '../services/pop-entity-event.service';\nimport {ParseLinkUrl, ParseModelValue} from '../pop-entity-utility';\nimport {PopEntityActionService} from '../services/pop-entity-action.service';\nimport {PopPipeService} from '../../../services/pop-pipe.service';\nimport {PopEntityService} from '../services/pop-entity.service';\nimport {\n  CleanObject,\n  DynamicSort, GetRouteAlias, GetSessionSiteVar,\n  IsArray, IsCallableFunction,\n  IsObject,\n  IsObjectThrowError,\n  IsString,\n  SetSessionSiteVar, Sleep,\n  StorageGetter,\n  TitleCase\n} from '../../../pop-common-utility';\nimport {PopCacFilterBarService} from '../../app/pop-cac-filter/pop-cac-filter.service';\nimport {PopEntityUtilParamService} from '../services/pop-entity-util-param.service';\nimport {forkJoin} from 'rxjs';\n\n\n@Component({\n  selector: 'lib-pop-entity-list',\n  styleUrls: ['./pop-entity-list.component.scss'],\n  templateUrl: './pop-entity-list.component.html',\n  providers: [PopDomService]\n})\nexport class PopEntityListComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() internal_name: string;\n  @Input() extension: EntityExtendInterface;\n  @ViewChild('list') list: PopTableComponent;\n  @Input() dataFactory: DataFactory = null;\n\n  public name = 'PopEntityListComponent';\n\n\n  public readonly table = {\n    data: <Entity[]>[],\n    buttons: <TableButtonInterface[]>[\n      // { id: 'custom', name: 'Custom', accessType: 'can_read', requireSelected: true },\n      // { id: 'advanced_search', name: 'Advanced Search', accessType: 'can_read', requireSelected: false },\n      {id: 'archive', name: 'Archive', accessType: 'can_create', requireSelected: true},\n      {id: 'restore', name: 'Activate', accessType: 'can_create', requireSelected: true},\n      {id: 'show_archived', name: 'Show Archived', accessType: 'can_read', requireSelected: false},\n      {id: 'show_active', name: 'Show Active', accessType: 'can_read', requireSelected: false},\n      {id: 'new', name: 'New', accessType: 'can_create', requireSelected: false},\n    ],\n    interface: <TableInterface>undefined,\n    spinner: <MainSpinner>{diameter: 0, strokeWidth: 0},\n    config: <TableConfig>null,\n  };\n\n  protected srv = {\n    action: <PopEntityActionService>ServiceInjector.get(PopEntityActionService),\n    dialog: <MatDialog>ServiceInjector.get(MatDialog),\n    entity: <PopEntityService>ServiceInjector.get(PopEntityService),\n    events: <PopEntityEventService>ServiceInjector.get(PopEntityEventService),\n    filter: <PopCacFilterBarService>ServiceInjector.get(PopCacFilterBarService),\n    pipe: <PopPipeService>ServiceInjector.get(PopPipeService),\n    param: <PopEntityUtilParamService>ServiceInjector.get(PopEntityUtilParamService),\n    portal: <PopEntityUtilPortalService>ServiceInjector.get(PopEntityUtilPortalService),\n    router: <Router>ServiceInjector.get(Router),\n    tab: undefined\n  };\n\n  public ui = {\n    actionModal: <FieldItemGroupConfig>undefined,\n  };\n\n  protected asset = {\n    blueprintData: <Dictionary<string>>{},\n    fieldKeys: <Dictionary<1>>undefined,\n    blueprint: <Dictionary<any>>undefined,\n    transformations: <Dictionary<any>>undefined,\n    tableInterface: <TableInterface>undefined,\n    tabMenuSessionPath: '',\n    showArchivedSessionPath: '',\n    searchValueSessionPath: ''\n  };\n\n\n  constructor(\n    public el: ElementRef,\n    protected route: ActivatedRoute,\n    protected _domRepo: PopDomService,\n    @Inject('APP_GLOBAL') public APP_GLOBAL: AppGlobalInterface,\n  ) {\n    super();\n\n    this.dom.configure = (): Promise<boolean> => {\n      // this component set the outer height boundary of this view\n      return new Promise(async (resolve) => {\n        // Ensure that a CoreConfig exists for this component\n        await this.APP_GLOBAL.isVerified();\n        await this._setCoreConfig();\n\n        this.id = this.core.params.internal_name;\n        // #1: Enforce a CoreConfig\n        this.core = IsObjectThrowError(this.core, true, `${this.name}:configureDom: - this.core`) ? this.core : <CoreConfig>{};\n        await forkJoin([\n          this._transformRouteExtension(), // pull in settings passed in through the route\n          this._setConfig(), // validate the passed arguments\n          this._setSessionSettings(), // determine when and what settings should be sessionStorage\n          this._configureFilterBar(), // Enable/Disable the filter bar\n          this._setCrudHandler(), // Determine cache actions on crud operations\n          this._configureTable(), // Build out the table config for the view\n          this._setHeight(), // account for the filter bar , and determine the height of this table try to fill all vertical height\n        ]);\n\n        return resolve(true);\n      });\n    };\n\n    /**\n     * This function will call after the dom registration\n     */\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        this.dom.setTimeout(`height-adjustment-check`, () => {\n          this._setHeight().then(() => {\n            return resolve(true);\n          });\n        }, 250);\n      });\n    };\n  }\n\n\n  /**\n   * This component will display a list of entities that the user can interact with\n   */\n  ngOnInit() {\n    super.ngOnInit();\n  }\n\n\n  /**\n   * Trigger the table to reset itself\n   */\n  onResetTable() {\n    this.dom.setTimeout('reset', () => {\n      this.dom.state.loading = true;\n      const overhead = (+this.core.repo.model.table.filter.active ? this.srv.filter.getHeight() : 25);\n      this.dom.setHeightWithParent('sw-target-outlet', overhead, window.innerHeight - 65).then((res) => {\n        if (this.table.config && typeof this.table.config.setLayout === 'function') this.table.config.setLayout(this._getTableHeight());\n      });\n    }, 0);\n  }\n\n\n  /**\n   * Trigger the table to reset itself\n   */\n  onResetHeight() {\n    this._setHeight().then(() => {\n      if (this.table.config && typeof this.table.config.setHeight === 'function') this.table.config.setHeight(this._getTableHeight());\n    });\n  }\n\n\n  /**\n   * A table will generate a slew of event and action triggers\n   * @param event\n   */\n  onTableEvent(event: PopBaseEventInterface) {\n//     console.log( this.name, event );\n\n    if (event.type === 'table') {\n      let ids;\n      if (event && Array.isArray(event.data)) {\n        ids = event.data.map((row) => row.id).join();\n      }\n      switch (event.name) {\n        case 'search':\n          if (IsString(this.asset.searchValueSessionPath)) SetSessionSiteVar(this.asset.searchValueSessionPath, event.data);\n          // console.log('this.asset.searchValueSessionPath', this.asset.searchValueSessionPath);\n          break;\n        case 'row_clicked':\n          this.onTableRowClicked(event.data);\n          break;\n        case 'columnRouteClick':\n          this.onTableColumnClicked(event.data);\n          break;\n        case 'options_save':\n          this.onSaveOptions(event.data);\n          break;\n        case 'options_reset':\n          this.onOptionsReset();\n          break;\n        case 'new':\n          this.onActionButtonClicked('new');\n          break;\n        case 'show_archived':\n          this.onShowArchivedButtonClicked();\n          break;\n        case 'show_active':\n          this.onShowArchivedButtonClicked();\n          break;\n        case 'archive':\n          this.onArchiveButtonClicked(ids, true);\n          break;\n        case 'restore':\n          this.onArchiveButtonClicked(ids, false);\n          break;\n        case 'advanced_search':\n          this.onViewAdvancedSearch();\n          break;\n        case 'column_definitions':\n          if (IsObject(event.data, true)) {\n            this.dom.setTimeout('build-columns', async () => {\n              this._setFieldKeys(event.data);\n              const columns = await this._getDefaultColumns();\n              // this.table.config.columnDefinitions=columns;\n              this.table.config.updateColumnDefinitions(columns);\n            }, 0);\n          }\n          break;\n        case 'ready':\n          // if( this.table.config && this.table.config.matData && !this.table.config.matData.data.length ) this._configureTable();\n          break;\n        default:\n          break;\n      }\n      if (!['search', 'ready'].includes(event.name)) {\n        // console.log('kill trigger refresh');\n        this.dom.setTimeout(`lazy-load-fresh-data`, null);\n      }\n    }\n    if (event.type === 'context_menu') {\n      if (event.name === 'portal' && event.internal_name && event.id) {\n        this.onViewEntityPortal(event.internal_name, +event.id);\n      }\n    }\n  }\n\n\n  /**\n   * This is exploratory??? Idea is to pop a modal to make the user create an advanced search before we fetch the data for the table\n   */\n  onViewAdvancedSearch() {\n    if (!this.dom.state.blockModal && this.srv.dialog.openDialogs.length == 0) {\n      this.dom.state.blockModal = true;\n      if (true) {\n        const dialogRef = this.srv.dialog.open(PopEntityAdvancedSearchComponent, {\n          width: `${window.innerWidth * .50}px`,\n          height: `${window.innerHeight * .75}px`,\n          panelClass: 'sw-relative',\n          data: {test: 'yo yo'}\n        });\n\n\n        this.dom.subscriber.dialog = dialogRef.beforeClosed().subscribe((changed) => {\n          if (changed || this.dom.state.refresh) {\n            // this._configureTable();up\n          }\n          this.dom.state.blockModal = false;\n        });\n      }\n    }\n  }\n\n\n  /**\n   * A user can click on a row in a table to navigate the a view for that entity\n   * @param row\n   */\n  onTableRowClicked(row) {\n    if (!this.dom.state.blockModal && this.srv.dialog.openDialogs.length == 0) {\n      // custom function\n      this.onViewEntityPortal(this.core.params.internal_name, +row['id']);\n    }\n  }\n\n\n  /**\n   * A user can click on a specific column of a table and get a default action\n   * @param data\n   */\n  onTableColumnClicked(data) {\n    // placeholder\n    if (!this.dom.state.blockModal && this.srv.dialog.openDialogs.length == 0) {\n      this.dom.state.blockModal = true;\n      if (data && data.name && data.row[data.name] && +data.row[data.name + '_id']) {\n        this.onViewEntityPortal(data.row[data.name], +data.row[data.name + '_id']);\n      }\n    }\n  }\n\n\n  /**\n   * A user can click a link to view a specific entity details in a modal\n   * @param internal_name\n   * @param id\n   */\n  onViewEntityPortal(internal_name: string, id: number) {\n    if (!this.dom.state.blockModal && this.srv.dialog.openDialogs.length == 0) {\n      this.dom.state.blockModal = true;\n      if (internal_name && id) {\n        this.srv.portal.view(internal_name, id).then((changed: boolean) => {\n          this.core.repo.clearCache('entity', String(id), 'PopEntityListComponent:onViewEntityPortal');\n          if (changed || this.dom.state.refresh) {\n            this.core.repo.clearAllCache('PopEntityListComponent:onViewEntityPortal');\n            this._configureTable().then(() => true);\n          }\n          this.dom.state.blockModal = false;\n        });\n      }\n    }\n  }\n\n\n  /**\n   * A user can save custom settings for how they want to view this table\n   * @param options\n   */\n  onSaveOptions(options) {\n    // We only want to save the current column defs and options.\n    const preferences = {\n      settings: {\n        columns: options.currentOptions.columnDefinitions,\n        options: options.currentOptions\n      },\n\n    };\n    const existingID = StorageGetter(this.core.preference, ['table', 'id'], 0);\n    this.dom.setSubscriber('save-preferences', this.core.repo.savePreference(+existingID, 'table', preferences).subscribe((preference) => {\n        // console.log('saved-preferences', preference);\n        this.srv.entity.updateBaseCoreConfig(this.core.params.internal_name, 'preference:table', preference);\n        console.log('this.core', this.core);\n        if (StorageGetter(this.core, ['preference'])) {\n          this.core.preference.table = preference;\n        }\n        // console.log('this.core.preference.table', this.core.preference.table);\n      }\n    ));\n  }\n\n\n  /**\n   * A user can reset their preferences for this table to default\n   */\n  onOptionsReset() {\n    this.dom.setTimeout(`lazy-load-fresh-data`, null);\n    if (IsObject(this.core.preference, ['table']) && this.core.preference.table.id) {\n      this.core.repo.deletePreference(this.core.preference.table.id, 'table').then((defaultPreference) => {\n        if (defaultPreference) {\n          this.core.preference.table = defaultPreference;\n        } else {\n          this.core.preference.table = {};\n        }\n        this.srv.entity.updateBaseCoreConfig(this.core.params.internal_name, 'preference:table', this.core.preference.table);\n      });\n    }\n  }\n\n\n  /**\n   * A user can archive a list of entities\n   * @param ids\n   * @param archive\n   */\n  onArchiveButtonClicked(ids, archive: boolean) {\n    this.table.config.loading = true;\n    this.dom.setSubscriber('archive-entities', this.core.repo.archiveEntities(ids, archive).subscribe(() => {\n      this.table.config.loading = false;\n      this.core.repo.clearCache('table', 'data');\n      this._triggerDataFetch(1);\n      this.srv.events.sendEvent({\n        source: this.name,\n        method: 'archive',\n        type: 'entity',\n        name: this.core.params.name,\n        internal_name: this.core.params.internal_name,\n        id: ids,\n        data: archive\n      });\n    }, err => {\n      this.table.config.loading = false;\n      this.dom.error.code = err.error.code;\n      this.dom.error.message = err.error.message;\n      this.dom.setTimeout(`reset-selected-items`, () => {\n        if (typeof this.table.config.clearSelected === 'function') this.table.config.clearSelected();\n      }, 0);\n    }));\n  }\n\n\n  /**\n   * The user can click on a btn to show active, archived, or both?\n   */\n  onShowArchivedButtonClicked() {\n    this.dom.state.showArchived = !this.dom.state.showArchived;\n    this.core.repo.clearCache('table');\n    this._configureTable().then(() => true);\n    this.dom.setTimeout(`reset-selected-items`, () => {\n      if (typeof this.table.config.clearSelected === 'function') this.table.config.clearSelected();\n      this.table.config.buttons = this._buildTableButtons();\n      if (IsString(this.asset.showArchivedSessionPath)) SetSessionSiteVar(this.asset.showArchivedSessionPath, this.dom.state.showArchived);\n    }, 0);\n  }\n\n\n  /**\n   * This will open a modal to create a new entity when the user clicks on the new button\n   */\n  onActionButtonClicked(actionName: string) {\n    // if( IsString( actionName, true ) ){\n    //   this.srv.action.doAction( this.core, actionName, this.extension ).then( ( config: FieldItemGroupConfig ) => {\n    //     console.log( 'action config', config );\n    //     if( config ){\n    //       this.ui.actionModal = config;\n    //     }else{\n    //       this.ui.actionModal = null;\n    //     }\n    //\n    //     this.log.config( `onNewButtonClicked`, this.ui.actionModal );\n    //   } );\n    // }\n    if (IsString(actionName, true)) {\n      this.dom.setTimeout(`do-action`, async () => {\n        await this.srv.action.do(this.core, actionName, this.extension);\n      }, 0);\n    }\n\n  }\n\n\n  /**\n   * When the modal for creating a new entity is closed, the config needs to be cleared\n   */\n  onActionModalClose() {\n    this.ui.actionModal = null;\n  }\n\n\n  /**\n   * Clean up the dom of this component\n   */\n  ngOnDestroy() {\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Protected Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n  /**\n   * Allow for a CoreConfig to be passed in\n   * If a CoreConfig does not exits this component needs to be able to create it for itself, uses the internal_name that comes directly for the route\n   * or tries to extrapolate it from the current url of the app\n   *\n   */\n  protected _setCoreConfig(): Promise<boolean> {\n    return new Promise(async (resolve) => {\n      // #1: Grab Route Extension settings\n      this._setRouteExtension();\n      if (!this.internal_name) this.internal_name = this.srv.entity.getRouteInternalName(this.route, this.extension);\n\n      if (!IsObject(this.core, true)) {\n        this.srv.entity.getCoreConfig(this.internal_name, 0, this.dom.repo).then((core: CoreConfig) => {\n          this.core = core;\n          return resolve(true);\n        });\n      } else {\n        return resolve(true);\n      }\n    });\n  }\n\n\n  /**\n   * Setup basic config\n   * Intended to be overridden\n   * @private\n   */\n  protected _setConfig(): Promise<boolean> {\n    return new Promise(async (resolve) => {\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * Attach a handler to handle an crud events\n   * @private\n   */\n  protected _setCrudHandler(): Promise<boolean> {\n    return new Promise(async (resolve) => {\n      this.dom.setSubscriber('entity', this.srv.events.events.subscribe((event) => this._crudEventHandler(event)));\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * Determine the height of the table\n   * @private\n   */\n  protected _setHeight(): Promise<boolean> {\n    return new Promise(async (resolve) => {\n      // Determine height of the table - have to account if filter bar is enabled\n      const menu = 48;\n      const filterHeight = this.dom.state.filter ? this.srv.filter.getHeight() : 25;\n      const overhead = 25;\n      const defaultHeight = window.innerHeight - menu - filterHeight;\n      this.dom.setHeight(defaultHeight, overhead);\n\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * Manage the sessionStorage settings\n   * @private\n   */\n  protected _setSessionSettings(): Promise<boolean> {\n    return new Promise(async (resolve) => {\n      // Set session path for variables\n      this.asset.tabMenuSessionPath = `Entity.${TitleCase(this.core.params.internal_name)}.Menu`;\n      this.asset.showArchivedSessionPath = `Business.${PopBusiness.id}.Entity.${TitleCase(this.core.params.internal_name)}.Table.Main.showArchived`;\n      this.asset.searchValueSessionPath = `Business.${PopBusiness.id}.Entity.${TitleCase(this.core.params.internal_name)}.Table.Main.searchValue`;\n\n      // Set any session variables\n      SetSessionSiteVar(this.asset.tabMenuSessionPath, null); // remove any menu session data for this entity\n      this.dom.state.showArchived = GetSessionSiteVar(this.asset.showArchivedSessionPath, false);\n\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * Determine how to fetch the data for this table\n   * @param update\n   * @private\n   */\n  protected _fetchData(update = false): Promise<any> {\n    return new Promise(async (resolve, reject) => {\n      const params = {};\n      if (!update) this.dom.setTimeout(`lazy-load-fresh-data`, null);\n      if (IsObject(this.table, ['config']) && IsObject(this.table.config, ['clearSelected']) && typeof this.table.config.clearSelected === 'function') this.table.config.clearSelected();\n      if (this.dataFactory) {\n        this.dataFactory(null, this.dom.state.showArchived ? 1 : 0).then((data) => {\n          // console.log('data', data);\n          data = this._transformData(data);\n          if (update && this.table.config && typeof this.table.config.updateData === 'function') {\n            this.table.config.updateData(data);\n          }\n          PopTemplate.clear();\n          return resolve(data);\n        }, () => {\n          reject([]);\n        });\n      } else {\n        this.core.repo.getEntities({archived: (this.dom.state.showArchived ? 1 : 0), ...params}).then((data: Entity[]) => {\n          data = this._transformData(data);\n          this.core.repo.setCache('table', 'data', data, 5);\n          if (update && typeof this.table.config.updateData === 'function') {\n            this.table.config.updateData(data);\n          }\n          PopTemplate.clear();\n          return resolve(data);\n        }, err => {\n          reject(err);\n        });\n      }\n    });\n  }\n\n\n  protected _transformData(data: any[]) {\n    if (!(IsObject(this.asset.fieldKeys, true))) this._setFieldKeys(data[0]);\n    if (!(IsObject(this.asset.transformations, true))) this._setFieldTableTransformations();\n    data = this._prepareTableData(data);\n    this.core.repo.setCache('table', 'data', data, 5);\n\n    return data;\n  }\n\n\n  /**\n   * Cleans the row data to remove any unwanted fields\n   * @param row\n   * @private\n   */\n  protected _setFieldKeys(row: Dictionary<any>): void {\n    this.asset.fieldKeys = {};\n    const Decorator = StorageGetter(this.core, ['repo', 'model', 'decorator'], null);\n    if (IsCallableFunction(Decorator)) {\n      row = Decorator(this.core, row);\n    }\n    if (IsObject(row, true)) {\n      const allowedTypes = ['string', 'number', 'boolean'];\n      const blacklist = StorageGetter(this.core.repo, ['model', 'table', 'blacklist'], {});\n      const whitelist = StorageGetter(this.core.repo, ['model', 'table', 'whitelist'], {});\n      const appendlist = StorageGetter(this.core.repo, ['model', 'table', 'appendlist'], {});\n      Object.keys(row).map((key) => {\n        if (!(key in blacklist)) {\n          if (key in whitelist || allowedTypes.includes(typeof row[key])) {\n            this.asset.fieldKeys[key] = 1;\n          } else if (IsObject(row[key], ['id', 'name'])) {\n            this.asset.fieldKeys[key] = 1;\n          }\n        }\n      });\n      if (IsObject(appendlist, true)) {\n        Object.keys(appendlist).map((key) => {\n          this.asset.fieldKeys[key] = 1;\n        });\n      }\n    }\n  }\n\n\n  /**\n   * Apply the transformations to the dataset\n   * @private\n   */\n  protected _setFieldTableTransformations(): void {\n    this.asset.transformations = {};\n    const fields = this.core.repo.model.field;\n    Object.keys(this.asset.fieldKeys).map((key) => {\n      const field = fields[key];\n      if (IsObject(field, ['table', 'model'])) {\n        if (field.model.name && field.table.transformation) {\n          this.asset.transformations[field.model.name] = CleanObject({\n            type: field.table.transformation.type,\n            arg1: field.table.transformation.arg1 ? field.table.transformation.arg1 : null,\n            arg2: field.table.transformation.arg2 ? field.table.transformation.arg2 : null,\n            arg3: field.table.transformation.arg3 ? field.table.transformation.arg3 : null,\n          });\n        }\n      }\n\n    });\n  }\n\n\n  /**\n   * A method that preps entity list data for tables\n   * @param dataSet\n   * @param fieldMap\n   */\n  protected _prepareTableData(dataSet: Array<any>) {\n    this.log.info(`_prepareTableData: this.asset.fieldKeys`, this.asset.fieldKeys);\n    const Decorator = StorageGetter(this.core, ['repo', 'model', 'decorator'], null);\n    const Filter = <DataFilter>StorageGetter(this.core, ['repo', 'model', 'filter'], null);\n    const appendlist = StorageGetter(this.core.repo, ['model', 'table', 'appendlist'], {});\n    if (IsArray(dataSet, true)) {\n      if (Filter) dataSet = dataSet.filter(Filter);\n      dataSet.sort(DynamicSort('id', 'desc'));\n      return dataSet.map(row => {\n        row = Object.keys(row).reduce((obj, k) => {\n          if (k in this.asset.fieldKeys) obj[k] = row[k];\n          return obj;\n        }, {});\n        if (IsObject(appendlist, true)) {\n          Object.keys(appendlist).map((name: string) => {\n            const value = appendlist[name];\n            row[name] = ParseModelValue(value, row);\n          });\n        }\n        if (Decorator) row = Decorator(this.core, row);\n        return this.srv.pipe.transformObjectValues(row, this.asset.transformations, this.core);\n      });\n    } else {\n      return dataSet;\n    }\n  }\n\n\n  /**\n   * Retrieves the data set that this view will represent\n   * @param hardReset\n   *\n   */\n  protected _getTableData(hardReset = false) {\n    return new Promise((resolve, reject) => {\n      if (this.dom.delay.data) clearTimeout(this.dom.delay.data);\n      this.core.repo.getCache('table', 'data').then((cache) => {\n        if (IsArray(cache, true)) {\n          this._triggerDataFetch();\n          return resolve({data: cache});\n        } else {\n          this._fetchData(false).then((data) => {\n            return resolve({data: data});\n          });\n        }\n      });\n    });\n  }\n\n\n  /**\n   * Trigger the table to re-fetch the data\n   * @param seconds\n   * @private\n   */\n  protected _triggerDataFetch(seconds: number = 5) {\n    this.dom.setTimeout(`lazy-load-fresh-data`, () => {\n      // PopTemplate.buffer(`Loading Fresh Data`);\n      this._fetchData(true).catch(() => true);\n    }, (seconds * 1000)); // allows for cached data to be presented for x amount of seconds before refreshed data is triggered\n  }\n\n\n  /**\n   * The table need to know when new entities are created or update so that they can be updated in its view\n   * @param event\n   *\n   */\n  protected _crudEventHandler(event: PopBaseEventInterface) {\n    this.core.repo.clearCache('table', null, `PopEntityListComponent:crudEventHandler`);\n    this.core.repo.clearCache('entity', null, `PopEntityListComponent:crudEventHandler`);\n    if (event.method === 'create' || event.method === 'delete') {\n      this.dom.state.refresh = true;\n      this.core.params.refresh = true;\n    } else if (event.method === 'update') {\n      if (event.type === 'entity') {\n        if (event.name === 'archive') {\n          this._configureTable(true).then(() => true);\n        }\n      } else if (event.type === 'field' && event.name === 'patch') {\n        this.dom.state.refresh = true;\n        this.core.params.refresh = true;\n      }\n    } else if (event.method === 'read') {\n      if (event.type === 'dialog') {\n        if (event.name === 'close') {\n          this.core.repo.clearCache('table', 'data', `PopEntityListComponent:crudEventHandler`);\n          this._configureTable().then(() => true);\n        }\n      }\n    }\n  }\n\n\n  /**\n   * THe filter bar needs to be configured for this specific entity\n   *\n   */\n  protected _configureFilterBar(): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      // return this.srv.filter.setActive(false);\n      if (+this.core.repo.model.table.filter.active) {\n        this.dom.state.filter = true;\n\n        // this.srv.filter.setArchived(this.dom.state.showArchived);\n        this.srv.filter.setView(this.core.repo.model.table.filter.view);\n        this.srv.filter.setActive(true);\n\n        this.dom.setSubscriber('filters', this.srv.filter.event.bubble.subscribe((event: PopBaseEventInterface) => {\n          this._filterEventHandler(event);\n        }));\n        return resolve(true);\n      } else {\n        this.srv.filter.setActive(false);\n        this.dom.state.filter = false;\n        return resolve(true);\n      }\n    });\n\n  }\n\n\n  /**\n   * Generates a table config that will be used by the nested view component\n   * @param reset\n   *\n   */\n  protected _configureTable(reset = false): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      if (!this.table.config) {\n        const tableData = <any>await this._getTableData(reset);\n        if (IsArray(tableData.data, true)) {\n          this.asset.blueprintData = tableData.data[0];\n          this.asset.blueprint = tableData.data[0];\n        }\n        await this._getTableInterface();\n        this.table.config = new TableConfig({...this.asset.tableInterface, ...tableData});\n      } else {\n        this.table.config.loading = true;\n        this._getTableData().then(async (result: { data: Entity[] }) => {\n          if (IsArray(result.data, true)) {\n            this.asset.blueprintData = result.data[0];\n            this.asset.blueprint = result.data[0];\n          }\n          this.table.config.buttons = this._buildTableButtons();\n          await Sleep(10);\n          if (reset && typeof this.table.config.reset === 'function') {\n            this.table.config.reset(result.data);\n          } else {\n            if (typeof this.table.config.updateData === 'function') this.table.config.updateData(result.data);\n          }\n          this.table.config.loading = false;\n          this.dom.state.refresh = false;\n          this.core.params.refresh = false;\n\n        });\n      }\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * Allows route to have a resolvable syntax\n   *\n   */\n  protected _transformRouteExtension(): Promise<boolean> {\n    return new Promise<boolean>(async (resolve) => {\n      if (!IsObject(this.extension)) this.extension = {};\n      if (IsString(this.extension.goToUrl, true)) {\n        this.extension.goToUrl = ParseLinkUrl(this.extension.goToUrl, this.core.params, [':id']);\n      }\n      if (IsObject(this.extension.table, true)) {\n        if (this.extension.table.route) {\n          this.extension.table.route = ParseLinkUrl(this.extension.table.route, this.core.params, [':id']);\n        }\n      }\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * Generates a table config interface to produce a config\n   * @param row\n   *\n   */\n  protected _getTableInterface(): Promise<boolean> {\n    return new Promise(async (resolve, reject) => {\n      // this.loading = true;\n      // Clear any session for previous viewing history\n      if (IsObject(this.asset.tableInterface, true)) {\n        return resolve(true);\n      } else {\n        await this._getDefaultFieldKeys();\n        const defaultColumns = <Dictionary<any>>await this._getDefaultColumns();\n        let userColumns;\n        if (IsObject(this.core.preference, ['table']) && IsObject(this.core.preference.table.columns, true)) {\n          userColumns = this.core.preference.table.columns;\n        }\n\n        if (!userColumns) userColumns = defaultColumns;\n\n        // console.log('defaultColumns', defaultColumns);\n        // console.log('userColumns', userColumns);\n\n        // console.log('get', this.asset.searchValueSessionPath);\n\n        let baseApp = (this.core.params.app ? this.core.params.app : PopHref);\n        baseApp = baseApp ? `/${baseApp}/` : '/';\n\n        let tableInterface: TableInterface = {\n          id: this.core.params.internal_name,\n          internal_name: this.core.params.internal_name,\n          paginator: true,\n          height: this._getTableHeight(),\n          buttons: this._buildTableButtons(),\n          route: `${baseApp}${GetRouteAlias(this.core.params.internal_name)}/:id/general`,\n          data: [],\n          searchValue: GetSessionSiteVar(this.asset.searchValueSessionPath, ''),\n          options: new TableOptionsConfig({...{defaultOptions: {columnDefinitions: defaultColumns}}, ...this.core.repo.model.table.permission}),\n          columnDefinitions: userColumns\n        };\n\n        if (this.extension.goToUrl) this.extension.goToUrl = ParseModelValue(this.extension.goToUrl, this.core, true);\n        if (this.extension.table && this.extension.table.route) this.extension.table.route = ParseModelValue(this.extension.table.route, this.core, true);\n        if (this.extension.table && Object.keys(this.extension.table).length) tableInterface = {...tableInterface, ...this.extension.table};\n        if (IsObject(this.core.preference, ['table'])) {\n          // console.log('this.core.preference.table.options', this.core.preference.table.options);\n          if (this.core.preference.table.options) {\n            tableInterface = {...tableInterface, ...this.core.preference.table.options};\n          }\n        }\n        this.asset.tableInterface = tableInterface;\n        return resolve(true);\n      }\n    });\n  }\n\n\n  /**\n   * A table will have a set of actions that it will need a button set to achieve\n   *\n   */\n  protected _buildTableButtons() {\n    let buttons = [];\n    if (IsObject(this.core.repo.model.table.button, true)) {\n      buttons = this.table.buttons.filter((button) => {\n        // if( button.id === 'custom' && !this.core.repo.model.table.button.custom ) return false; // allow custom actions to be performed on a set of entities\n        // if( button.id === 'advanced_search' && !this.core.repo.model.table.button.advanced_search ) return false; // allow for a advanced search on the entity data set\n        if (button.id === 'archive' && (!this.core.repo.model.table.button.archived || this.dom.state.showArchived)) return false;\n        if (button.id === 'restore' && (!this.core.repo.model.table.button.archived || !this.dom.state.showArchived)) return false;\n        if (button.id === 'show_active' && (!this.core.repo.model.table.button.archived || !this.dom.state.showArchived)) return false;\n        if (button.id === 'show_archived' && (!this.core.repo.model.table.button.archived || this.dom.state.showArchived)) return false;\n        if (button.id === 'new' && !this.core.repo.model.table.button.new) return false;\n        if (!button.accessType) return true;\n        if (!this.srv.entity.checkAccess(this.core.params.internal_name, button.accessType)) return false;\n        return true;\n      });\n    }\n\n    return buttons;\n  }\n\n\n  /**\n   * The filter bar and the table view need to be in sync\n   * @param event\n   *\n   */\n  protected _filterEventHandler(event: PopBaseEventInterface) {\n    this.log.event(`_filterEventHandler`, event);\n    if (event.type === 'filter') {\n      switch (event.name) {\n        case 'clear':\n        case 'apply':\n          this.srv.entity.bustAllCache();\n          this.dom.setTimeout('reconfigure-table', () => {\n            this._configureTable().then(() => true);\n          }, 0);\n          break;\n        case 'init':\n        case 'state':\n          if (event.model === 'open') {\n            this.onResetHeight();\n          }\n          break;\n        default:\n          break;\n      }\n    }\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  /**\n   * Allows the route to set/override specific settings\n   *\n   */\n  private _setRouteExtension() {\n    if (!this.extension) this.extension = {};\n    if (!this.extension.table) this.extension.table = {};\n    if (!this.extension.goToUrl) this.extension.goToUrl = null;\n    if (this.route.snapshot.data && Object.keys(this.route.snapshot.data).length) {\n      Object.keys(this.route.snapshot.data).map((key) => {\n        this.extension[key] = this.route.snapshot.data[key];\n      });\n    }\n  }\n\n\n  private _getDefaultFieldKeys(): Promise<boolean> {\n    return new Promise<boolean>((resolve) => {\n      if (IsObject(this.asset.fieldKeys, true)) {\n        return resolve(true);\n      } else {\n        this.core.repo.getCache('table', 'fieldKeys').then((fieldKeys) => {\n          if (IsObject(fieldKeys, true)) {\n            this.asset.fieldKeys = <any>fieldKeys;\n          } else {\n            this._setFieldKeys(this.asset.blueprint);\n\n          }\n          return resolve(true);\n        }, () => {\n          this._setFieldKeys(this.asset.blueprint);\n          return resolve(true);\n        });\n      }\n    });\n  }\n\n\n  private _getDefaultColumns(): Promise<Dictionary<any>> {\n    return new Promise<Dictionary<any>>((resolve) => {\n      let defaultColumns = {};\n      this.core.repo.getCache('table', 'columns').then((columns) => {\n        if (IsObject(columns, true)) {\n          return resolve(columns);\n        } else {\n          defaultColumns = {};\n          const fields = IsObjectThrowError(this.core.repo.model.field, true, `Repo contained no field model`) ? this.core.repo.model.field : null;\n          if (IsObject(this.asset.fieldKeys, true)) {\n            Object.keys(this.asset.fieldKeys).map((fieldName) => {\n              if (fieldName in fields) {\n                const field = fields[fieldName];\n                if (IsObject(field.model, ['route'])) {\n                  field.model.route = ParseModelValue(field.model.route, this.core);\n                }\n                if (field.table.visible) defaultColumns[fieldName] = {\n                  ...{\n                    name: field.model.name,\n                    label: field.model.label,\n                  },\n                  ...field.table\n\n                };\n              }\n            });\n          } else {\n            // console.log('cache redirect');\n            // console.log(this.asset.blueprintData);\n\n            // SetPopCacheRedirectUrl(this.srv.router.url);\n            // this.srv.router.navigateByUrl('system/cache/clear',{skipLocationChange:true});\n\n          }\n          if (IsObject(defaultColumns, true)) {\n            this.core.repo.setCache('table', 'columns', defaultColumns, 60);\n          }\n\n          return resolve(defaultColumns);\n        }\n      });\n    });\n  }\n\n\n  /**\n   * Helper function that sets the height of the child view\n   *\n   */\n  private _getTableHeight() {\n    let height = this.dom.height.inner;\n    if (this.srv.filter.isActive()) {\n      height -= 20;\n    }\n    return height;\n  }\n}\n\n","import { Component, ElementRef, OnDestroy, OnInit } from '@angular/core';\nimport { PopExtendComponent } from '../../../pop-extend.component';\nimport { PopRequestService } from '../../../services/pop-request.service';\nimport { Entity, PopBaseEventInterface, ServiceInjector } from '../../../pop-common.model';\nimport { CheckboxConfig } from '../../base/pop-field-item/pop-checkbox/checkbox-config.model';\nimport { GetServiceContainer } from '../../../pop-common-dom.models';\nimport { ArrayMapSetter, DeepCopy, IsArray, IsArrayThrowError } from '../../../pop-common-utility';\n\n\n@Component({\n  selector: 'lib-pop-entity-access',\n  templateUrl: './pop-entity-access.component.html',\n  styleUrls: [ './pop-entity-access.component.scss' ]\n})\nexport class PopEntityAccessComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  protected srv = GetServiceContainer();\n  public name = 'PopEntityAccessComponent';\n\n\n  protected extendServiceContainer(){\n    this.srv.request = ServiceInjector.get(PopRequestService);\n  }\n\n\n  constructor(\n    public el: ElementRef,\n  ){\n    super();\n\n    this.extendServiceContainer();\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n\n      return new Promise((resolve) => {\n\n\n        this.dom.state.expansion = 'compact';\n        this.core.repo.getEntity(this.core.params.entityId, { select: 'permissions' }).subscribe((res: any) => {\n          const entity = res.data ? <Entity>res.data : <Entity>res.data;\n          let appDisabled;\n          let appHasEntitiesAccess, appEntitiesWithAccess;\n          this.ui.access = IsArrayThrowError(entity.permissions, true, `${this.name}:configure: - entity.permissions`) ? DeepCopy(entity.permissions) : [];\n\n          this.ui.access.forEach((app) => {\n            app.expanded = false;\n            appDisabled = this.core.entity.system || !this.core.access.can_update || app.entities.length === 0 ? true : false\n            app.can_read = { all: app.entities.length ? true : false, disabled: appDisabled, indeterminate: app.entities.length ? true : false };\n            app.can_create = { all: app.entities.length ? true : false, disabled: appDisabled, indeterminate: app.entities.length ? true : false };\n            app.can_update = { all: app.entities.length ? true : false, disabled: appDisabled, indeterminate: app.entities.length ? true : false };\n            app.can_delete = { all: app.entities.length ? true : false, disabled: appDisabled, indeterminate: app.entities.length ? true : false };\n            appHasEntitiesAccess = { can_read: 0, can_create: 0, can_update: 0, can_delete: 0 };\n            appEntitiesWithAccess = { can_read: 0, can_create: 0, can_update: 0, can_delete: 0 };\n            app.entities.forEach((entityToken) => {\n              entityToken.field = {};\n              Object.keys(entityToken.access).forEach((entityAccess) => {\n                entityToken.field[ entityAccess ] = new CheckboxConfig({\n                  align: 'left',\n                  // patch: { path: `admin/security-profiles/${this.tab.securityProfile.id}/entities/add`, field: access, metadata: { access: 1, entity_fk: entity.id } },\n                  bubble: true,\n                  value: +entityToken.access[ entityAccess ],\n                  disabled: this.core.entity.system || !entityToken[ entityAccess ] ? true : false,\n                  metadata: {\n                    app: app,\n                    entity: entityToken,\n                    access: entityAccess,\n                  },\n                });\n                if( entityToken[ entityAccess ] ) appHasEntitiesAccess[ entityAccess ]++;\n                if( entityToken.access[ entityAccess ] ) appEntitiesWithAccess[ entityAccess ]++;\n                if( +entityToken.access[ entityAccess ] === 0 ){\n                  if( entityAccess in app ){\n                    app[ entityAccess ].all = false;\n                  }\n                }\n              });\n            });\n            // if none of the entities are able to use an access just disable the all checkbox\n            Object.keys(appHasEntitiesAccess).forEach((entityAccess) => {\n              if( !appHasEntitiesAccess[ entityAccess ] && entityAccess in app ) app[ entityAccess ].disabled = true;\n              if( app[ entityAccess ].all ) app[ entityAccess ].indeterminate = false;\n              if( appEntitiesWithAccess[ entityAccess ] && !app[ entityAccess ].all ) app[ entityAccess ].indeterminate = true;\n              if( !appEntitiesWithAccess[ entityAccess ] && !app[ entityAccess ].all ) app[ entityAccess ].indeterminate = false;\n            });\n          });\n\n          this.setExpansionState(this.dom.state.expansion);\n\n          resolve(true);\n\n        }, err => {\n          this.dom.error = {\n            code: err.error ? err.error.code : err.status,\n            message: err.error ? err.error.message : err.statusText\n          };\n          resolve(false);\n        });\n      });\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  checkAll(app, access): void{\n    if( app && access in app ){\n      let all = true, indeterminate = false;\n      const entity_fks = [];\n      const value = +app[ access ].all;\n      if( app.entities.length ){\n        all = +value === 1;\n        app.entities.forEach((entity) => {\n          if( !this.core.entity.system && this.core.access.can_update && entity[ access ] ){\n            if( +entity.field[ access ].control.value !== value ){\n              // entity.field[ access ].patch.running = true;\n              entity.access[ access ] = value;\n              entity.field[ access ].control.setValue(value);\n              entity.field[ access ].message = '';\n              entity.field[ access ].startPatch();\n              entity_fks.push(entity.id);\n            }\n          }else{\n            if( +entity.field[ access ].control.value !== value ){\n              indeterminate = true;\n              all = !value;\n            }\n          }\n        });\n        if( entity_fks.length ){\n          const patch = { access: 1, entity_fk: entity_fks.join() };\n          patch[ access ] = value;\n          const method = patch[ access ] === 1 ? 'add' : 'remove';\n          this.srv.request.doPatch(`${this.core.params.path}/${this.core.params.entityId}/entities/${method}`, patch, 1).subscribe(res => {\n            app.entities.forEach((entity) => {\n              entity.field[ access ]._patchSuccess();\n            });\n            setTimeout(() => {\n              app[ access ].all = all;\n              app[ access ].indeterminate = indeterminate;\n            });\n            const sendEvent = {\n              source: this.name,\n              type: 'permissions',\n              model: 'entity',\n              name: 'patch',\n              method: 'update',\n              success: true,\n              config: this.core,\n              data: app,\n              ids: entity_fks,\n              access: access,\n              value: patch[ access ]\n            };\n            this.sessionChanges(sendEvent);\n            if( this.log.repo.enabled('event', this.name) ) console.log(this.log.repo.message(`${this.name}:event`), this.log.repo.color('event'), sendEvent);\n          }, err => {\n            app.entities.forEach((entity) => {\n              entity.patchFail(( err.error && err.error.message ) ? err.error.message : err.message);\n            });\n            setTimeout(() => {\n              app[ access ].all = all;\n              app[ access ].indeterminate = indeterminate;\n            });\n            this.dom.error = {\n              code: ( err.error ? err.error.code : err.status ),\n              message: ( err.error ? err.error.message : err.statusText )\n            };\n          });\n        }else{\n          setTimeout(() => {\n            // app[ access ].all = all;\n            app[ access ].indeterminate = true;\n          });\n        }\n      }else{\n        setTimeout(() => {\n          app[ access ].all = false;\n          app[ access ].indeterminate = false;\n        });\n      }\n    }\n  }\n\n\n  setExpansionState(state?: string){\n    if( state ){\n      this.dom.state.expansion = state;\n    }\n    switch( this.dom.state.expansion ){\n      case 'none':\n        this.ui.access.forEach(function(app){\n          app.expanded = false;\n        });\n        break;\n      case 'compact':\n        this.ui.access.forEach(function(app){\n          app.expanded = app.can_read.indeterminate || app.can_update.indeterminate || app.can_create.indeterminate || app.can_delete.indeterminate ? true : false;\n        });\n        break;\n      case 'full':\n        this.ui.access.forEach(function(app){\n          app.expanded = true;\n        });\n        break;\n      default:\n        break;\n\n    }\n  }\n\n\n  handleInputEvents(event){\n    if( event.type === 'field' ){\n      if( this.log.repo.enabled() ) console.log(this.log.repo.message('PopEntityAccessComponent:event'), this.log.repo.color('event'), event);\n      switch( event.name ){\n        case 'onChange':\n          const patch = { access: 1, entity_fk: event.config.metadata.entity.id };\n          patch[ event.config.metadata.access ] = +event.config.control.value;\n          const method = +event.config.control.value === 1 ? 'add' : 'remove';\n          event.config.startPatch();\n          this.srv.request.doPatch(`${this.core.params.path}/${this.core.params.entityId}/entities/${method}`, patch, 1).subscribe(() => {\n            event.config._patchSuccess();\n            this.checkAppAll(event.config.metadata.app, event.config.metadata.access, +event.config.control.value);\n            const sendEvent = {\n              source: this.name,\n              method: 'update',\n              model: 'entity',\n              type: 'permissions',\n              name: 'patch',\n              success: true,\n              config: this.core,\n              data: event.config.metadata.app,\n              ids: [ event.config.metadata.entity.id ],\n              access: event.config.metadata.access,\n              value: patch[ event.config.metadata.access ]\n            };\n            setTimeout(() => {\n              this.sessionChanges(sendEvent);\n            }, 0);\n          }, err => {\n            event.config.patchFail(( err.error && err.error.message ) ? err.error.message : err.message);\n          });\n          break;\n        case patch:\n          if( event.success ){\n            this.checkAppAll(event.config.metadata.app, event.config.metadata.access, event.config.control.value);\n          }\n          break;\n        default:\n          break;\n      }\n    }\n  }\n\n\n  checkAppAll(app, access, val){\n    val = +val;\n    let indeterminate = false;\n    let all = true;\n    if( !val ){\n      all = false;\n      app.entities.some(entity => {\n        if( entity.field[ access ].control.value ){\n          indeterminate = true;\n          return true;\n        }\n      });\n    }else{\n      app.entities.some(entity => {\n        if( !entity.field[ access ].control.value ){\n          all = false;\n          indeterminate = true;\n          return true;\n        }\n      });\n    }\n    setTimeout(() => {\n      app[ access ].all = all;\n      app[ access ].indeterminate = indeterminate;\n    });\n  }\n\n\n  sessionChanges(event: PopBaseEventInterface){\n    let appId;\n    let storedPermissions;\n    let storedApp;\n    let storedEntity;\n    if( event.type === 'permissions' && event.name === 'patch' && event.success && event.config && +event.config.params.id === +this.core.entity.id ){\n      if( this.log.repo.enabled('event', this.name) ) console.log(`${this.name} made an access permissions patch session`, this.log.repo.color('event'), event);\n      if( this.core.entity.metadata && this.core.entity.metadata.permissions ){\n        storedPermissions = this.core.entity.metadata.permissions;\n        appId = event.data.id;\n        const appMap = ArrayMapSetter(storedPermissions, 'id');\n        if( appId in appMap ){\n          if( IsArray(storedPermissions[ appMap[ appId ] ].entities, true) ){\n            storedApp = storedPermissions[ appMap[ appId ] ];\n            const entityMap = ArrayMapSetter(storedApp.entities, 'id');\n            if( IsArray(event.ids, true) ){\n              event.ids.map((entityID: number) => { // the ids that need to be updated in session\n                if( entityID in entityMap ){\n                  storedEntity = storedApp.entities[ entityMap[ entityID ] ];\n                  if( storedEntity.access && event.access in storedEntity.access ) storedEntity.access[ event.access ] = event.value;\n                }\n              });\n            }\n          }\n        }\n      }\n      return true;\n    }\n  }\n\n\n  toggleApp(app){\n    app.expanded = !app.expanded;\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n}\n","import {\n  Component, EventEmitter,\n  Inject,\n  Input,\n  OnDestroy,\n  OnInit, Output,\n} from '@angular/core';\nimport { FieldConfig, PopBaseEventInterface } from '../../../../pop-common.model';\nimport { TitleCase } from '../../../../pop-common-utility';\n\n\n@Component({\n  selector: 'lib-pop-field-btn',\n  template: `\n    <div class=\"field-action-btn\" *ngIf=\"field.multiple\">\n      <mat-icon class=\"sw-pointer\" matTooltip=\"{{tooltip}}\" matTooltipPosition=\"above\" (click)=\"callAction();\">{{action}}</mat-icon>\n    </div>\n  `,\n  styles: [ '.field-doAction-btn {background: var(--bg-1);border-radius: 50%;width: 14px;height: 14px; mar-top:2px; color: var(--accent);border-width: 1px;border-style: solid;border-color: var(--bg-3);box-shadow: 0 2px 5px 0 var(--darken18), 0 2px 10px 0 var(--darken12) !important; } .field-doAction-btn mat-icon {position:relative; top:-2px; left:1px; width: 12px;height: 12px;font-size: 12px;line-height: 16px;}' ]\n})\nexport class PopEntityFieldActionBtnComponent implements OnInit, OnDestroy {\n  @Input() field: FieldConfig;\n  @Input() action: 'add' | 'remove';\n  @Output() events: EventEmitter<PopBaseEventInterface> = new EventEmitter<PopBaseEventInterface>();\n\n  icon: string;\n  tooltip: string;\n\n\n  constructor(\n    @Inject('env') readonly env?\n  ){\n  }\n\n\n  ngOnInit(){\n    if( !this.action ) this.action = 'add';\n    this.tooltip = TitleCase(this.action);\n  }\n\n\n  callAction(){\n    this.events.emit({ source: 'PopEntityFieldActionBtnComponent', type: 'field', name: this.action, field: this.field });\n  }\n\n\n  ngOnDestroy(){\n  }\n}\n\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { FieldConfig, PopBaseEventInterface } from '../../../../../pop-common.model';\n\n\n@Component({\n  selector: 'lib-pop-entity-field-edit-icon',\n  templateUrl: './pop-entity-field-edit-icon.component.html',\n  styleUrls: [ './pop-entity-field-edit-icon.component.scss' ]\n})\nexport class PopEntityFieldEditIconComponent implements OnInit {\n  @Input() dom;\n  @Input() field: FieldConfig;\n  @Output() events: EventEmitter<PopBaseEventInterface> = new EventEmitter<PopBaseEventInterface>();\n\n\n  constructor(){\n  }\n\n\n  ngOnInit(){\n  }\n\n\n  onEdit(){\n    this.dom.state.open = true;\n    this.field.state = 'template_edit';\n    this.events.emit({ source: 'PopEntityFieldEditIconComponent', type: 'field', name: 'edit', field: this.field });\n  }\n\n}\n","import { Component } from '@angular/core';\n\n\n@Component({\n  selector: 'lib-pop-entity-field-dash',\n  template: `\n    <div class=\"entity-field-dash\">\n      <mat-icon>\n        remove\n      </mat-icon>\n    </div>\n  `,\n  styles: [ ':host ::ng-deep mat-icon {width: auto; height: auto; font-size: .9em;} .entityId-field-dash { display: flex;align-items: center; justify-content: center; box-sizing: border-box; height: 100%; }' ],\n})\nexport class PopEntityFieldDashComponent {\n}\n\n\n","import { Component, OnInit } from '@angular/core';\n\n\n@Component({\n  selector: 'lib-pop-entity-field-spacer',\n  template: '<div class=\"entityId-field-spacer sw-clear\"></div>',\n  styles: [ '.entityId-field-spacer { display: flex; height: 10px; clear:both; }' ]\n})\nexport class PopEntityFieldSpacerComponent implements OnInit {\n\n  constructor(){\n  }\n\n\n  ngOnInit(){\n  }\n\n}\n","import {\n  Component,\n  ElementRef,\n  Input,\n  OnDestroy,\n  OnInit,\n  ViewChild,\n  ViewContainerRef\n} from '@angular/core';\nimport { TabPositionInterface } from '../../base/pop-tab-menu/tab-menu.model';\nimport { CoreConfig, DynamicComponentInterface, EntityExtendInterface, PopBaseEventInterface } from '../../../pop-common.model';\nimport { PopTabMenuService } from '../../base/pop-tab-menu/pop-tab-menu.service';\nimport { PopExtendDynamicComponent } from '../../../pop-extend-dynamic.component';\nimport { PopDomService } from '../../../services/pop-dom.service';\nimport { IsArray, IsObject, IsObjectThrowError, StorageGetter } from '../../../pop-common-utility';\nimport { EvaluateWhenConditions, IsValidFieldPatchEvent } from '../pop-entity-utility';\n\n\n@Component( {\n  selector: 'lib-pop-entity-tab-column',\n  template: '<ng-template #container></ng-template>',\n} )\nexport class PopEntityTabColumnComponent extends PopExtendDynamicComponent implements OnInit, OnDestroy {\n  @Input() column: TabPositionInterface;\n  @ViewChild( 'container', { read: ViewContainerRef, static: true } ) public container;\n  @Input() extension: EntityExtendInterface; // allows the route to override certain settings\n\n  public name = 'PopEntityTabColumnComponent';\n  protected srv: {\n    tab: PopTabMenuService,\n  } = {\n    tab: <PopTabMenuService>undefined\n  };\n\n\n  public ui = {\n    tabId: <number>undefined,\n  };\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService,\n    protected _tabRepo: PopTabMenuService,\n  ){\n    super();\n\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n        //  Enforce CoreConfig\n        this.core = IsObjectThrowError( this.core, true, `${this.name}:: - this.core` ) ? this.core : null;\n        //  Set Attributes\n        this.position = +this.column.id;\n        this.id = this.column.id;\n        // Event Handlers\n        this.trait.bubble = true; // passes bubble events up to parent\n\n        this.dom.handler.bubble = ( core: CoreConfig, event: PopBaseEventInterface ) => {\n          this.onBubbleEvent( event );\n        };\n\n        const tab = this.srv.tab.getTab();\n        if( tab && tab.id ){\n          this.ui.tabId = tab.id;\n        }\n\n        return resolve( true );\n      } );\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n\n\n        this.dom.setSubscriber( 'name-reset', this.column.reset.subscribe( ( e: string | boolean ) => this._onColumnResetEvent( e ) ) );\n\n        this._determineHeight();\n        // Attach Template Container\n        this.template.attach( 'container' );\n        //  Render the dynamic list of components\n        this._templateRender();\n\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * The component should take a specific section/column of a defined tab, and dynamically render all of the components that belong in that section\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * Event handler for the parent tab to tell this column to reset itself\n   * @param reset\n   */\n  onBubbleEvent( event: PopBaseEventInterface ){\n    this.log.event( `onBubbleEvent`, event );\n    if( IsValidFieldPatchEvent( this.core, event ) || event.type === 'context_menu' ){\n      this.events.emit( event );\n    }\n  }\n\n\n  /**\n   * Clean up the dom of this component\n   */\n  ngOnDestroy(){\n    this._setScrollTop();\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n  /**\n   * Event handler for the parent tab to tell this column to reset itself\n   * @param reset\n   */\n  private _onColumnResetEvent( reset: string | boolean ){\n    if( reset && typeof reset === 'boolean' ){\n      if( this.dom.delay.render ) clearTimeout( this.dom.delay.render );\n      this.dom.delay.render = setTimeout( () => {\n        this._templateRender();\n      }, 250 );\n    }else if( typeof reset === 'string' ){\n      if( reset === 'scrollTop' ){\n        this._setScrollTop();\n      }\n    }\n  }\n\n\n  /**\n   * Helper function that determines what the height of this component should be\n   *\n   */\n  private _determineHeight(){\n    this.dom.state.hasHeader = this.column.header ? true : false;\n    const columnHeight = StorageGetter( this.dom.repo, [ 'position', String( this.column.id ), 'height' ], 650 );\n    this.dom.height.outer = +columnHeight;\n    this.dom.height.inner = this.dom.height.outer - 30;\n  }\n\n\n  /**\n   * Helper function that renders the list of dynamic components\n   *\n   */\n  private _templateRender(){\n    const transfer = [ 'core', 'position' ];\n    if( IsObject( this.column.extension, true ) ){\n      this.extension = this.column.extension;\n      transfer.push( 'extension' );\n    }\n    const components = IsArray( this.column.components, true ) ? this.column.components : [];\n    this.template.render( components, transfer );\n    this._applyScrollTop();\n  }\n\n\n  /**\n   * Reaches up to the parent container and sets the current scroll position\n   * The parent container component uses an *ngIf that prevents using @viewChild to do this\n   */\n  private _applyScrollTop(){\n    setTimeout( () => {\n      if( this.dom.session.scroll && this.ui.tabId && this.dom.session.scroll[ this.ui.tabId ] ){\n        this.el.nativeElement.parentElement.scrollTop = this.dom.session.scroll[ this.ui.tabId ];\n      }\n    }, 0 );\n  }\n\n\n  /**\n   * Reaches up to the parent container and stores the current scroll position\n   * The parent container component uses an *ngIf that prevents using @viewChild to do this\n   */\n  private _setScrollTop(){\n    if( !this.dom.session.scroll ) this.dom.session.scroll = {};\n    if( this.ui.tabId ){\n      this.dom.session.scroll[ this.ui.tabId ] = this.el.nativeElement.parentElement.scrollTop;\n    }\n  }\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { InputConfig } from '../../../../base/pop-field-item/pop-input/input-config.model';\nimport { FieldParamInterface, PopBaseEventInterface } from '../../../../../pop-common.model';\nimport { PopExtendComponent } from '../../../../../pop-extend.component';\nimport { IsDefined } from '../../../../../pop-common-utility';\n\n\n@Component({\n  selector: 'lib-field-asset-param',\n  template: `\n    <lib-pop-input (events)=\"onBubbleEvent($event);\" [config]=ui.param></lib-pop-input><div class=\"sw-mar-vrt-sm sw-clear\"></div>`,\n})\nexport class FieldInputSettingComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() config: FieldParamInterface;\n\n  public name = 'FieldInputSettingComponent';\n\n\n  constructor(\n    public el: ElementRef,\n  ){\n    super();\n    /**\n     * Configure the specifics of this component\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        this.ui.param = new InputConfig({\n          label: this.config.label,\n          name: this.config.name,\n          value: IsDefined(this.config.value) ? this.config.value : this.config.defaultValue,\n          readonly: this.config.readonly,\n          patch: this.config.patch\n        });\n\n        return resolve(true);\n      });\n    };\n  }\n\n\n  /**\n   * This component will product an html field to capture a field item setting value\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * Handle events from the data capture\n   * @param event\n   */\n  onBubbleEvent(event: PopBaseEventInterface){\n    this.events.emit(event);\n  }\n\n\n  /**\n   * Clean up the dom of this component\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n}\n","import { ChangeDetectorRef, Component, Input, OnInit, Output } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { PopCommonService } from '../../../../../services/pop-common.service';\nimport { FieldSettingInterface } from '../../pop-entity-scheme.model';\n\n\n@Component({\n  selector: 'lib-field-asset-param',\n  template: `\n    <div class=\"field-builder-param-container\">\n      <div class=\"field-builder-param-title-container mat-h2\">\n        <div class=\"field-builder-param-title\">{{config.name}}</div>\n      </div>\n    </div>`,\n})\nexport class FieldLabelSettingComponent implements OnInit {\n\n  @Input() config: FieldSettingInterface;\n\n  state = {\n    selected: 0,\n    system: false,\n    loaded: false,\n    loading: false,\n    error: { code: 0, message: '' },\n  };\n\n  subscriber = {\n    data: <Subscription>undefined,\n  };\n\n  field = {\n    type: '',\n    items: undefined,\n    active: {},\n  };\n\n  active ={\n    item: undefined\n  };\n\n  models = {};\n\n  configs = {};\n\n\n  constructor(private commonRepo: PopCommonService,\n              private changeDetectorRef: ChangeDetectorRef){\n  }\n\n\n  ngOnInit(){\n\n  }\n}\n","import { ChangeDetectorRef, Component, EventEmitter, Input, OnDestroy, OnInit, Output } from '@angular/core';\nimport { RadioConfig } from '../../../../base/pop-field-item/pop-radio/radio-config.model';\nimport { PopCommonService } from '../../../../../services/pop-common.service';\nimport { FieldSettingInterface } from '../../pop-entity-scheme.model';\nimport { PopBaseEventInterface } from '../../../../../pop-common.model';\n\n\n@Component({\n  selector: 'lib-field-radio-param',\n  template: `<lib-pop-radio (events)=\"events.emit($event);\" [config]=param></lib-pop-radio><div class=\"sw-mar-vrt-sm sw-clear\"></div>`,\n})\nexport class FieldRadioSettingComponent implements OnInit, OnDestroy {\n  @Input() config: FieldSettingInterface;\n  @Output() events: EventEmitter<PopBaseEventInterface> = new EventEmitter<PopBaseEventInterface>();\n\n  param: RadioConfig;\n\n\n  constructor(private commonRepo: PopCommonService,\n              private changeDetectorRef: ChangeDetectorRef){\n  }\n\n\n  ngOnInit(){\n    this.param = new RadioConfig({\n      label: this.config.label,\n      name: this.config.name,\n      layout: 'row',\n      value: this.config.value,\n      patch: this.config.patch,\n      options: this.config.options\n    });\n  }\n\n\n  ngOnDestroy(){\n  }\n\n}\n","import { ChangeDetectorRef, Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { SelectConfig } from '../../../../base/pop-field-item/pop-select/select-config.model';\nimport { Subscription } from 'rxjs';\nimport { PopCommonService } from '../../../../../services/pop-common.service';\nimport { FieldSettingInterface } from '../../pop-entity-scheme.model';\nimport { PopBaseEventInterface } from '../../../../../pop-common.model';\nimport { ConvertArrayToOptionList } from '../../../../../pop-common-utility';\n\n\n@Component({\n  selector: 'lib-field-select-setting',\n  template: `\n    <lib-pop-select (events)=\"events.emit($event);\" [config]=param></lib-pop-select><div class=\"sw-mar-vrt-sm sw-clear\"></div>`,\n})\nexport class FieldSelectSettingComponent implements OnInit {\n\n  @Input() config: FieldSettingInterface;\n  @Output() events: EventEmitter<PopBaseEventInterface> = new EventEmitter<PopBaseEventInterface>();\n\n  param: SelectConfig;\n\n  state = {\n    selected: 0,\n    system: false,\n    loaded: false,\n    loading: false,\n    error: { code: 0, message: '' },\n  };\n\n  subscriber = {\n    data: <Subscription>undefined,\n  };\n\n  field = {\n    type: '',\n    items: undefined,\n    active: {},\n  };\n\n  active = {\n    item: undefined\n  };\n\n  models = {};\n\n  configs = {};\n\n\n  ngOnInit(){\n    this.param = new SelectConfig({\n      label: this.config.label,\n      name: this.config.name,\n      value: this.config.value ? this.config.value : this.config.default,\n      options: {values: ConvertArrayToOptionList(this.config.options.values)},\n      patch: this.config.patch\n    });\n  }\n}\n","import { ChangeDetectorRef, Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { SwitchConfig } from '../../../../base/pop-field-item/pop-switch/switch-config.model';\nimport { PopCommonService } from '../../../../../services/pop-common.service';\nimport { FieldSettingInterface } from '../../pop-entity-scheme.model';\nimport { PopBaseEventInterface } from '../../../../../pop-common.model';\n\n\n@Component({\n  selector: 'lib-field-switch-setting',\n  template: `<lib-pop-switch (events)=\"events.emit($event);\" [config]=param></lib-pop-switch>`,\n})\nexport class FieldSwitchSettingComponent implements OnInit {\n\n  @Input() config: FieldSettingInterface;\n  @Output() events: EventEmitter<PopBaseEventInterface> = new EventEmitter<PopBaseEventInterface>();\n\n  param: SwitchConfig;\n\n\n  constructor(private commonRepo: PopCommonService,\n              private changeDetectorRef: ChangeDetectorRef){\n  }\n\n\n  ngOnInit(){\n    this.param = new SwitchConfig({\n      label: this.config.label,\n      name: this.config.name,\n      value: this.config.value,\n      patch: this.config.patch\n    });\n  }\n\n\n}\n","import { ChangeDetectorRef, Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { TextareaConfig } from '../../../../base/pop-field-item/pop-textarea/textarea-config.model';\nimport { FieldSettingInterface } from '../../pop-entity-scheme.model';\nimport { PopBaseEventInterface } from '../../../../../pop-common.model';\n\n@Component({\n  selector: 'lib-field-textarea-setting',\n  template: `<lib-pop-textarea (events)=\"events.emit($event);\" [config]=param></lib-pop-textarea>`,\n})\nexport class FieldTextareaSettingComponent implements OnInit {\n\n  @Input() config: FieldSettingInterface;\n  @Output() events: EventEmitter<PopBaseEventInterface> = new EventEmitter<PopBaseEventInterface>();\n\n  param: TextareaConfig;\n\n\n  constructor(private changeDetectorRef: ChangeDetectorRef){\n  }\n\n\n  ngOnInit(){\n    this.param = new TextareaConfig({\n      label: this.config.label,\n      name: this.config.name,\n      value: this.config.value ? this.config.value : this.config.default,\n      height: 70,\n    });\n  }\n\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { EntitySchemeSectionInterface } from '../pop-entity-scheme.model';\nimport { PopExtendComponent } from '../../../../pop-extend.component';\n\n\n@Component({\n  selector: 'lib-pop-entity-asset-component-modal',\n  templateUrl: './pop-entity-asset-component-modal.component.html',\n  styleUrls: [ './pop-entity-asset-component-modal.component.scss' ]\n})\nexport class PopEntityAssetComponentModalComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() config: EntitySchemeSectionInterface = <EntitySchemeSectionInterface>{};\n\n  public name = 'PopEntityAssetComponentModalComponent';\n\n\n  constructor(\n    public el: ElementRef,\n  ){\n    super();\n    /**\n     * Configure the specifics of this component\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        resolve(true);\n      });\n    };\n  }\n\n\n  /**\n   * This component should have a purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * Clean up the dom of this component\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit, ViewContainerRef } from '@angular/core';\nimport {\n  Dictionary,\n  DynamicComponentInterface,\n  FieldInterface,\n  FieldItemInterface,\n  PopBaseEventInterface,\n  SectionInterface,\n  ServiceInjector\n} from '../../../../pop-common.model';\nimport { CheckboxConfig } from '../../../base/pop-field-item/pop-checkbox/checkbox-config.model';\nimport { InputConfig } from '../../../base/pop-field-item/pop-input/input-config.model';\nimport { MatDialogRef } from '@angular/material/dialog';\nimport { Validators } from '@angular/forms';\nimport { FieldInputSettingComponent } from './params/field-input-setting.component';\nimport { FieldLabelSettingComponent } from './params/field-label-setting.component';\nimport { FieldSelectSettingComponent } from './params/field-select-setting.component';\nimport { FieldSwitchSettingComponent } from './params/field-switch-setting.component';\nimport { FieldRadioSettingComponent } from './params/field-radio-setting.component';\nimport { FieldTextareaSettingComponent } from './params/field-textarea-setting.component';\nimport { CdkDragDrop, moveItemInArray } from '@angular/cdk/drag-drop';\nimport { PopContainerService } from '../../../../services/pop-container.service';\nimport { PopExtendDynamicComponent } from '../../../../pop-extend-dynamic.component';\nimport { PopFieldEditorService } from '../../pop-entity-field-editor/pop-entity-field-editor.service';\nimport { PopDomService } from '../../../../services/pop-dom.service';\nimport {\n  ArrayKeyBy,\n  ArrayMapSetter,\n  CleanObject,\n  IsArrayThrowError,\n  IsObject,\n  IsObjectThrowError,\n  IsStringError,\n  SnakeToPascal,\n  TitleCase\n} from '../../../../pop-common-utility';\nimport { EntitySchemeSectionInterface } from '../pop-entity-scheme.model';\n\n\n@Component({\n  selector: 'lib-pop-entity-asset-field-modal',\n  templateUrl: './pop-entity-asset-field-modal.component.html',\n  styleUrls: [ './pop-entity-asset-field-modal.component.scss' ],\n  providers: [ PopContainerService ]\n})\nexport class PopEntityAssetFieldModalComponent extends PopExtendDynamicComponent implements OnInit, OnDestroy {\n  @Input() config: EntitySchemeSectionInterface = <EntitySchemeSectionInterface>{};\n  public name = 'PopEntityAssetFieldModalComponent';\n\n  protected srv: {\n    container: PopContainerService,\n    field: PopFieldEditorService,\n  } = {\n    container: <PopContainerService>undefined,\n    field: ServiceInjector.get(PopFieldEditorService),\n  };\n\n  protected asset = {\n    defaultContentHeight: <number>undefined,\n    model: new Map(),\n    config: new Map(),\n    coreField: <FieldInterface>undefined,\n    coreFields: <Dictionary<FieldInterface>>undefined,\n    coreFieldItems: <Dictionary<FieldItemInterface>>undefined,\n    params: <Dictionary<any>>undefined,\n    map: <Dictionary<any>>{}\n  };\n\n  public ui = {\n    activeConfigs: <Dictionary<any>>{},\n    field: <FieldInterface>undefined,\n    name: <InputConfig>undefined,\n    items: <any[]>[],\n    sections: <SectionInterface[]>[],\n    map: {\n      items: <Dictionary<number>>{}\n    }\n  };\n\n\n  protected extendServiceContainer(){\n    this.srv.container = this._containerRepo;\n    delete this._containerRepo;\n  }\n\n\n  constructor(\n    public el: ElementRef,\n    public dialogRef: MatDialogRef<PopEntityAssetFieldModalComponent>,\n    protected _containerRepo: PopContainerService,\n    protected _domRepo: PopDomService,\n  ){\n    super();\n    this.extendServiceContainer();\n\n    this.srv.container.onContainerCreated((container: ViewContainerRef) => {\n      this.template.attach(container);\n      this._setActiveItemParamConfiguration();\n    });\n\n\n    /**\n     * Configure the specifics of this component\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        this.internal_name = IsStringError(this.config.asset.fieldgroup.name, true, `${this.name}:configureDom - internal_name`) ? this.config.asset.fieldgroup.name : '';\n        const defaultHeight = +(window.innerHeight * .75) - 60;\n        this.dom.setHeight(defaultHeight, 50);\n          this.dom.height.content = this.dom.height.inner - 200;\n          this.dom.active.items = {};\n          this.asset.defaultContentHeight = this.dom.height.content;\n          this.asset.coreFields = IsArrayThrowError(this.core.resource.fields.data_values, true, `${this.name}: - this.core.entity.resource.fields`) ? ArrayKeyBy(this.core.resource.fields.data_values, 'name') : {};\n          this.asset.params = this.srv.field.getViewParams();\n          this.asset.coreField = IsObjectThrowError(this.asset.coreFields[ this.internal_name ], true, `${this.name}: - this.asset.coreFields[ this.internal_name ]`) ? this.asset.coreFields[ this.internal_name ] : {};\n          this.asset.coreFieldItems = IsArrayThrowError(this.asset.coreField.items, true, `${this.name}: - this.asset.coreField.items`) ? ArrayKeyBy(<any>this.asset.coreField.items, 'name') : {};\n\n\n          this.ui.field = <FieldInterface>this.config.asset;\n          this.ui.sections = [];\n          this.ui.name = new InputConfig({\n            value: this.ui.field.name,\n            readonly: true\n          });\n\n          this.ui.map.items = {};\n          const items = IsArrayThrowError(this.config.asset.items, true, `${this.name}:configureDom: - this.config.asset.items`) ? JSON.parse(JSON.stringify(this.config.asset.items)) : [];\n          // const items = this.srv.common.isArray(this.config.asset.items, true, `${this.name}:configureDom - items`) ? JSON.parse(JSON.stringify(this.asset.coreField.items)) : {};\n          items.map((item, index) => {\n            item = CleanObject(item, {\n              blacklist: [ 'entries', 'object_name', 'depth_level', 'storage' ]\n            });\n            const coreFieldItem = <any>this.asset.coreFieldItems[ item.name ];\n            coreFieldItem.rules = ArrayKeyBy(coreFieldItem.itemrules, 'name');\n            // console.log('coreFieldItem', coreFieldItem);\n            item.required = this.srv.field.getViewRequired(this.asset.coreField.name, item.name);\n\n            if( item.required ) item.active = 1;\n            if( +item.active ){\n              item.name = SnakeToPascal(item.name);\n              item.model = {\n                id: item.id,\n                name: item.name,\n                label: item.label,\n              };\n              item.config = {\n                options: {\n                  values: item.options\n                }\n              };\n\n              if( IsObject(item.view, [ 'name' ]) ) item.model.form = item.view.name;\n              if( IsObject(item.rules, true) ) item.model = { ...item.model, ...item.rules };\n              if( IsObject(item.settings, true) ) item.model = { ...item.model, ...item.settings };\n              this.dom.active.items[ item.name ] = item.active;\n              this.asset.model.set(item.name, item.model);\n              this.asset.config.set(item.name, item.config);\n              this.ui.activeConfigs[ item.name ] = new CheckboxConfig({\n                id: item.id,\n                name: 'active',\n                disabled: item.required ? true : false,\n                value: +item.active,\n                // patch: column.required ? null : {\n                //   field: 'active',\n                //   path: `cis/fields/${this.config.id}/item/${column.id}`,\n                //   displayIndicator: false,\n                // }\n              });\n              this.ui.items.push(item);\n            }\n            this.ui.map.items[ item.name ] = index;\n          });\n\n          this.ui.sections = <SectionInterface[]>[\n            {\n              id: 'params',\n              name: 'Params',\n              inputs: {},\n              component: null,\n              metadata: {},\n              requireRefresh: false,        // require an api call to refresh the entity on every load\n              active: true,\n            },\n            {\n              id: 'options',\n              name: 'Options',\n              inputs: {},\n              component: null,\n              metadata: {},\n              requireRefresh: false,        // require an api call to refresh the entity on every load\n              active: true,\n            },\n            // {\n            //   id: 'defaultValues',\n            //   name: 'Default Values',\n            //   inputs: {},\n            //   component: DemoTwoComponent,\n            //   metadata: {},\n            //   requireRefresh: false,        // require an api call to refresh the entity on every load\n            // }\n          ];\n\n\n          if( this.ui.items[ 0 ] ){\n            // this.onSelection(this.ui.items[ 0 ]);\n            // if( this.dom.active.item ){\n            // setTimeout(() => {\n            this.onActiveItemSelection(this.ui.items[ 0 ]);\n            // });\n            // }\n          }\n          return resolve(true);\n        });\n    };\n  }\n\n\n  /**\n   * This component will allow a user to configure custom settings for each of items that it holds\n   * The CoreConfig of this component will be a specific scheme\n   * The config of this component is expected to be a scheme asset that is of type field\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * The user will be able to active/deactive a specific item in the list of items for this field\n   * @param item\n   */\n  onItemStatusChange(event: PopBaseEventInterface){\n    if( event.type === 'field' && event.name === 'patch' && event.success ){\n      this.log.event('onItemStatusChange', event);\n      this.dom.active.items[ event.config.id ] = +event.config.control.value;\n    }\n  }\n\n\n  /**\n   * The user will be able to select from a list of item an active item in which to configure settings\n   * @param item\n   */\n  onActiveItemSelection(item){\n    console.log('onActiveItemSelection', item);\n    this.dom.active.item = item;\n    if( this.dom.active.item.options ) this._setActiveItemOptionConfiguration();\n    this.dom.active.model = IsObjectThrowError(this.dom.active.item.model, true, `${this.name}:onSelection - model`) ? JSON.parse(JSON.stringify(this.dom.active.item.model)) : {};\n    // this.dom.active.params = IsObjectThrowError(this.dom.active.item.config, true, `${this.name}:onSelection - config`) ? JSON.parse(JSON.stringify(this.dom.active.item.config)) : {};\n    // this.dom.active.config = IsObjectThrowError(this.config.asset.items[ this.ui.map.items[ item.name ] ].config, true, `${this.name}:onSelection - config`) ? JSON.parse(JSON.stringify(this.config.asset.items[ this.ui.map.items[ item.name ] ].config)) : {};\n    if( this.dom.active.item.id && this.dom.session[ this.dom.active.item.id ] ){\n      this.onActiveItemSettingSectionSelection(this.dom.session[ this.dom.active.item.id ]);\n    }else{\n      this.onActiveItemSettingSectionSelection(this.ui.sections[ 0 ]); // params\n    }\n    this._setActiveItemParamConfiguration();\n  }\n\n\n  /**\n   * The user needs the changes it active item options to be saved to the database\n   * @param event\n   */\n  onSaveActiveItemOptions(event: PopBaseEventInterface){\n    console.log('triggerSaveFieldOptions:stub', event);\n  }\n\n\n  /**\n   * There might be multiple tab sections to the setting of this active item\n   * @param section\n   */\n  onActiveItemSettingSectionSelection(section: SectionInterface){\n    this.dom.active.section = section.id;\n    this.dom.session[ this.dom.active.item.id ] = section;\n  }\n\n\n  /**\n   * The user is able to sort the options that should be used to populate the field, if applicable\n   */\n  onActiveItemOptionSortDrop(event: CdkDragDrop<string[]>){\n    moveItemInArray(this.dom.active.options, event.previousIndex, event.currentIndex);\n    this.onSaveActiveItemOptions(<PopBaseEventInterface>{ name: 'onChange' });\n  }\n\n\n  /**\n   * The user should be able to click a button to close the modal\n   */\n  onModalClose(){\n    this.dialogRef.close(0);\n  }\n\n\n  /**\n   * Clean up the dom of this component\n   */\n  ngOnDestroy(){\n    this.template.destroy();\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  private _setActiveItemParamConfiguration(){\n    if( IsObject(this.dom.active.config, true) && IsObject(this.dom.active.params, true) ){\n      this._getParamConfigurationComponentList(this.dom.active.config, this.dom.active.params).then((paramComponentList: DynamicComponentInterface[]) => {\n        this.template.render(paramComponentList, [], true);\n      });\n    }\n  }\n\n\n  private _getParamConfigurationComponentList(fieldItem: Dictionary<any>, params: Dictionary<any>): Promise<DynamicComponentInterface[]>{\n    return new Promise((resolve) => {\n      const paramComponentList: DynamicComponentInterface[] = [];\n      let component;\n      let configInterface;\n      if( this.dom.active.model.form in this.asset.params ){\n        Object.keys(params).map((paramKey) => {\n          if( paramKey in this.asset.params[ this.dom.active.model.form ] ){\n            configInterface = {\n              ...{\n                name: TitleCase(SnakeToPascal(paramKey)),\n                value: fieldItem[ paramKey ],\n                column: paramKey,\n                readonly: [ 'api', 'column' ].includes(paramKey) ? true : false,\n                patch: { field: paramKey, path: `${fieldItem.api_path}/config` }\n              }, ...params[ paramKey ]\n            };\n            configInterface.patch.path = ''; // ToDo: need to be the correct path to save setting to profile_scheme setting storage????\n            // console.log('configInterface', configInterface);\n            component = <DynamicComponentInterface>{\n              type: this._determineParamSettingComponent(paramKey),\n              inputs: {\n                config: configInterface,\n              }\n            };\n            paramComponentList.push(component);\n          }\n        });\n      }\n\n      resolve(paramComponentList);\n    });\n  }\n\n\n  /**\n   * Determine the correct component for the form type\n   * @param form\n   */\n  private _determineParamSettingComponent(form){\n    switch( form ){\n      case 'label':\n        return FieldLabelSettingComponent;\n        break;\n      case 'display':\n      case 'api':\n      case 'column':\n      case 'sort_top':\n      case 'sort':\n      case 'helpText':\n        return FieldInputSettingComponent;\n        break;\n      case 'select':\n      case 'mask':\n      case 'pattern':\n      case 'maxlength':\n      case 'transformation':\n        return FieldSelectSettingComponent;\n        break;\n      case 'hidden':\n      case 'visible':\n      case 'disabled':\n      case 'readonly':\n      case 'required':\n        return FieldSwitchSettingComponent;\n        break;\n      case 'layout':\n        return FieldRadioSettingComponent;\n        break;\n      case 'metadata':\n        return FieldTextareaSettingComponent;\n        break;\n      default:\n        return FieldLabelSettingComponent;\n    }\n  }\n\n\n  private _setActiveItemOptionConfiguration(){\n    this.dom.active.options = [];\n    if( this.dom.active.item.options && Array.isArray(this.dom.active.item.options.values) ){\n      this.dom.active.item.options.values.map((option, index) => {\n        option.sort = index;\n        if( typeof option.active !== 'boolean' ) option.active = true;\n        if( typeof option.name !== 'string' ) option.name = '';\n        if( typeof option.value !== 'string' ) option.value = '';\n        this.dom.active.options.push({\n          active: new CheckboxConfig({\n            label: null,\n            value: +option.active,\n            bubble: true,\n          }),\n          name: new InputConfig({\n            label: null,\n            value: option.name,\n            validators: [ Validators.required ],\n            transformation: 'title',\n            bubble: true,\n            pattern: 'AlphaNoSpaceOnlyDash',\n            maxlength: 12,\n            readonly: true\n          }),\n          value: new InputConfig({\n            label: null,\n            value: option.value || 0,\n            bubble: true,\n            pattern: 'AlphaNumeric',\n            transformation: 'lower',\n            maxlength: 128,\n            readonly: true\n          }),\n          sort: new InputConfig({\n            label: null,\n            value: option.sort || 0,\n            bubble: true,\n          }),\n        });\n      });\n\n    }else{\n      this.onActiveItemSettingSectionSelection(this.ui.sections[ 0 ]); // params\n    }\n  }\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit, ViewEncapsulation } from '@angular/core';\nimport { PopEntitySchemeService } from '../../pop-entity-scheme.service';\nimport { CdkDragDrop, moveItemInArray, transferArrayItem } from '@angular/cdk/drag-drop';\nimport { PopExtendComponent } from '../../../../../pop-extend.component';\nimport { PopDomService } from '../../../../../services/pop-dom.service';\nimport { fadeInOut, slideInOut } from '../../../../../pop-common-animations.model';\nimport { IsObjectThrowError } from '../../../../../pop-common-utility';\nimport { EntitySchemeSectionInterface } from '../../pop-entity-scheme.model';\nimport { InputConfig } from '../../../../base/pop-field-item/pop-input/input-config.model';\n\n\n@Component( {\n  selector: 'lib-entity-scheme-layout-section',\n  templateUrl: './entity-scheme-layout-section.component.html',\n  styleUrls: [ './entity-scheme-layout-section.component.scss' ],\n  animations: [\n    fadeInOut,\n    slideInOut\n  ],\n} )\nexport class EntitySchemeLayoutSectionComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() section: any = <any>{};\n\n  public name = 'EntitySchemeLayoutSectionComponent';\n\n  protected srv: {\n    scheme: PopEntitySchemeService\n  } = {\n    scheme: <PopEntitySchemeService>undefined\n  };\n\n  public ui = {\n    header: <InputConfig>undefined,\n    primaryIds: <number[]>[]\n  };\n\n\n  /**\n   * @param el\n   * @param _domRepo - transfer\n   * @param _schemeRepo - transfer\n   */\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService,\n    protected _schemeRepo: PopEntitySchemeService\n  ){\n    super();\n\n    this.dom.session.expanded = {};\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n\n        // #1: Enforce a CoreConfig\n        this.core = IsObjectThrowError( this.core, true, `${this.name}:configureDom: - this.core` ) ? this.core : null;\n        this.id = this.section.position;\n\n        this.ui.primaryIds = this.srv.scheme.ui.primaryIds;\n\n        this._buildHeader();\n        await this.dom.setWithComponentInnerHeight( 'PopEntityTabColumnComponent', this.section.position, 75, 700 );\n\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * The purpose of this component is to manage a specific section of the scheme layout\n   * A user should be able to drag as sort assets, and apply custom settings to an asset\n   * An asset is basically refers to something that the user can position in the scheme layout, field, component, etc\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * A user can dragSort assets from one column to another in the scheme layout\n   * @param event\n   */\n  onAssetSortDrop( event: CdkDragDrop<string[]> ){\n    this.srv.scheme.onAssetSortDrop( event );\n  }\n\n\n  /**\n   * A user can click on an edit button an edit the config settings of an asset\n   * @param asset\n   */\n  onEditAsset( asset ){\n    this.dom.setTimeout( 'edit-asset', async() => {\n      await this.srv.scheme.onEditAsset( asset );\n      if( this.dom.session.expanded[ asset.id ] ){\n        this.onExpandAssetContent( asset );\n        this.dom.setTimeout( 'reset-asset', async() => {\n          this.onExpandAssetContent( asset );\n        }, 0 );\n      }\n    }, 0 );\n\n  }\n\n\n  /**z\n   * A user can click on a toggle to expand/close the content section of an asset\n   * @param asset\n   */\n  onExpandAssetContent( asset: EntitySchemeSectionInterface ){\n    if( asset.id ){\n      this.dom.session.expanded[ asset.id ] = !this.dom.session.expanded[ asset.id ];\n    }\n  }\n\n\n  /**\n   * Triggers when user mouseleaves an asset\n   * @param asset\n   */\n  onHideAssetMenu( asset: EntitySchemeSectionInterface ){\n    asset.menu = false;\n  }\n\n\n  /**\n   * Triggers when user mouseenters an asset\n   * @param asset\n   */\n  onShowAssetMenu( asset: EntitySchemeSectionInterface ){\n    if( asset.asset_type != 'table' ){\n      asset.menu = true;\n    }\n  }\n\n\n  /**\n   * A user can click a remove button to remove an asset/child from the scheme layout\n   * @param position\n   * @param asset\n   */\n  onRemoveChildFromLayout( position: number, child: EntitySchemeSectionInterface ){\n    // console.log( 'onRemoveChildFromLayout', position, child );\n    this.srv.scheme.onRemoveChildFromLayout( position, child ).then( () => {\n    } );\n  }\n\n\n  /**\n   * Clean up the dom of this component\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  private _buildHeader(){\n    this.ui.header = new InputConfig( {\n      value: this.section.name,\n      label: `Column ${this.section.position}`,\n      pattern: 'AlphaNumeric',\n      maxlength: 24,\n      // hint: true,\n      // transformation: 'toTitleCase',\n      // hintText: 'This text will appear as a Header',\n      patch: {\n        field: 'name',\n        path: `profile-schemes/${this.section.id}`\n      }\n    } );\n  }\n\n\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { EntitySchemeSectionInterface, ProfileSchemeFieldInterface } from '../../../pop-entity-scheme.model';\nimport { PopExtendComponent } from '../../../../../../pop-extend.component';\nimport { ArrayMapSetter, DynamicSort, IsArray, IsObject, SnakeToPascal, TitleCase } from '../../../../../../pop-common-utility';\nimport { PopEntitySchemeService } from '../../../pop-entity-scheme.service';\nimport { PopFieldEditorService } from '../../../../pop-entity-field-editor/pop-entity-field-editor.service';\nimport { Dictionary, FieldCustomSettingInterface, FieldEntry, FieldInterface, KeyMap } from '../../../../../../pop-common.model';\n\n\n@Component( {\n  selector: 'lib-entity-scheme-field-content',\n  templateUrl: './entity-scheme-field-content.component.html',\n  styleUrls: [ './entity-scheme-field-content.component.scss' ]\n} )\nexport class EntitySchemeFieldContentComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() config: ProfileSchemeFieldInterface = <ProfileSchemeFieldInterface>{};\n\n  public name = 'EntitySchemeFieldContentComponent';\n\n  protected srv = {\n    scheme: <PopEntitySchemeService>undefined,\n    field: <PopFieldEditorService>undefined,\n  };\n\n  protected asset = {\n    field: <FieldInterface>undefined,\n    groupName: <string>undefined,\n    mapping: <any>undefined,\n    primary: <any>undefined,\n    traits: <FieldCustomSettingInterface[]>undefined,\n    traitMap: <Dictionary<number>>{},\n    entryTraitMap: <KeyMap<string[]>>{},\n  };\n\n  public ui = {\n    entries: <FieldEntry[]>[],\n    traits: <FieldCustomSettingInterface[]>[],\n  };\n\n\n  /**\n   * @param el\n   * @param _schemeRepo - transfer\n   * @param _fieldRepo - transfer\n   */\n  constructor(\n    public el: ElementRef,\n    protected _schemeRepo: PopEntitySchemeService,\n    protected _fieldRepo: PopFieldEditorService\n  ){\n    super();\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n\n        await this._setInitialConfig();\n        await this._setEntryTraitMap();\n        await this._setEntries();\n\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * This component is responsible to render the inner contents of field asset\n   * A field asset is custom field that has been created on an entity in the business unit\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * Clean up the dom of this component\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  /**\n   * Set the initial config of this component\n   * @private\n   */\n  private _setInitialConfig(): Promise<boolean>{\n    return new Promise( ( resolve ) => {\n\n      this.asset.field = this.config.asset;\n      this.asset.groupName = this.config.asset.fieldgroup.name;\n      this.asset.mapping = this.srv.scheme.getFieldMapping( +this.config.asset_id );\n      this.asset.primary = this.srv.field.getSchemePrimary( <EntitySchemeSectionInterface>this.core.entity );\n      this.dom.state.isPrimary = +this.config.asset_id === this.asset.primary[ this.asset.groupName ];\n      this.asset.traits = this.srv.field.getFieldTraits( this.asset.field.fieldgroup.name ).sort( DynamicSort( 'name' ) );\n      this.asset.traitMap = ArrayMapSetter( this.asset.traits, 'name' );\n\n      return resolve( true );\n    } );\n  }\n\n\n  /**\n   * Organizes the trait that should be assigned on this field\n   * @private\n   */\n  private _setEntryTraitMap(): Promise<boolean>{\n    return new Promise( ( resolve ) => {\n      this.asset.entryTraitMap = {};\n      if( IsArray( this.asset.traits, true ) && IsObject( this.asset.mapping.trait_entry, true ) ){\n        Object.keys( this.asset.mapping.trait_entry ).map( ( traitName: string ) => {\n          const entryId = +this.asset.mapping.trait_entry[ traitName ];\n          if( +entryId ){\n            if( !( IsArray( this.asset.entryTraitMap[ entryId ] ) ) ){\n              this.asset.entryTraitMap[ entryId ] = [];\n            }\n            this.asset.entryTraitMap[ entryId ].push( traitName );\n          }\n        } );\n      }\n      return resolve( true );\n    } );\n  }\n\n\n  /**\n   * Set the entries of this field\n   * @private\n   */\n  private _setEntries(): Promise<boolean>{\n    return new Promise( ( resolve ) => {\n      this.ui.entries = [];\n      this.ui.entries.push( ...this.asset.field.entries );\n      if( IsObject( this.config, [ 'asset' ] ) ){\n        if( IsArray( this.ui.entries, true ) ){\n          this.ui.entries.map( ( entry:FieldEntry ) => {\n            entry.disabled = IsArray( this.asset.mapping.disabled_entries, true ) && this.asset.mapping.disabled_entries.includes( +entry.id );\n            entry.traits = this._getEntryTraits( entry );\n          } );\n          this.ui.entries.sort( DynamicSort( 'sort_order' ) );\n        }\n      }\n      return resolve( true );\n    } );\n  }\n\n\n  /**\n   * Set the traits that belong to a field entry\n   * @param entry\n   * @private\n   */\n  private _getEntryTraits( entry: FieldEntry ): FieldCustomSettingInterface[]{\n    const traits = [];\n    if( IsObject( entry, [ 'id' ] ) && IsArray( this.asset.traits, true ) && this.dom.state.isPrimary ){\n      if( entry.id in this.asset.entryTraitMap && IsArray( this.asset.entryTraitMap[ entry.id ], true ) ){\n        this.asset.entryTraitMap[ entry.id ].map( ( traitName: string ) => {\n          if( traitName in this.asset.traitMap ){\n            const trait = this.asset.traits[ this.asset.traitMap[ traitName ] ];\n            if( IsObject( trait, [ 'icon', 'name' ] ) ){\n              if( !trait.label ) trait.label = TitleCase( SnakeToPascal( trait.name ) );\n              traits.push( trait );\n            }\n          }\n        } );\n      }\n    }\n\n    return traits;\n  }\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { ProfileSchemeFieldInterface } from '../../../pop-entity-scheme.model';\nimport { PopExtendComponent } from '../../../../../../pop-extend.component';\n\n\n@Component({\n  selector: 'lib-entity-scheme-table-content',\n  templateUrl: './entity-scheme-table-content.component.html',\n  styleUrls: [ './entity-scheme-table-content.component.scss' ]\n})\nexport class EntitySchemeTableContentComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() config: ProfileSchemeFieldInterface = <ProfileSchemeFieldInterface>{};\n\n  public name ='EntitySchemeTableContentComponent';\n\n  constructor(\n    public el: ElementRef,\n  ){\n    super();\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        return resolve(true);\n      });\n    };\n  }\n\n\n  /**\n   * This component is responsible to render the inner contents of table asset\n   * A table asset is basically a column that exists on the base table of an entity, ..ie: id, name, description ...\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n\n  /**\n   * Clean up the dom of this component\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { PopExtendComponent } from '../../../../../../pop-extend.component';\n\n\n@Component({\n  selector: 'lib-entity-scheme-component-content',\n  templateUrl: './entity-scheme-component-content.component.html',\n  styleUrls: [ './entity-scheme-component-content.component.scss' ]\n})\nexport class EntitySchemeComponentContentComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() config: any = {};\n\n  public name ='EntitySchemeComponentContentComponent';\n\n\n  constructor(\n    public el: ElementRef,\n  ){\n    super();\n\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        resolve(true);\n      });\n    };\n  }\n\n\n  /**\n   * This component is responsible to render the inner contents of component asset\n   * A component asset is custom widget that has been created for the entityId\n   */\n  ngOnInit(){\n    super.ngOnInit();\n    this.dom.configure().then(() => {\n      this.dom.register();\n      this.dom.ready();\n    });\n  }\n\n\n  /**\n   * Clean up the dom of this component\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { PopExtendComponent } from '../../../../../pop-extend.component';\nimport { CoreConfig, Dictionary, Entity, FieldGroupInterface, FieldInterface, FieldItemInterface, PopBaseEventInterface, PopRequest } from '../../../../../pop-common.model';\n\nimport { CheckboxConfig } from '../../../../base/pop-field-item/pop-checkbox/checkbox-config.model';\nimport { PopDomService } from '../../../../../services/pop-dom.service';\nimport {\n  ArrayMapSetter,\n  CleanObject,\n  GetHttpResult,\n  IsArrayThrowError,\n  IsDefined,\n  IsObject,\n  IsObjectThrowError,\n  IsString,\n  StorageSetter\n} from '../../../../../pop-common-utility';\nimport { PopFieldEditorService } from '../../pop-entity-field-editor.service';\nimport { EntitySchemeSectionInterface } from '../../../pop-entity-scheme/pop-entity-scheme.model';\n\n\n@Component( {\n  selector: 'lib-field-builder-items',\n  templateUrl: './pop-entity-field-items.component.html',\n  styleUrls: [ './pop-entity-field-items.component.scss' ]\n} )\nexport class PopEntityFieldItemsComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() field: FieldInterface;\n  @Input() scheme: EntitySchemeSectionInterface = null;\n  public name = 'PopEntityFieldItemsComponent';\n\n  protected srv = {\n    field: <PopFieldEditorService>undefined\n  };\n\n  protected asset = {\n    fieldgroup: <Entity>undefined,\n  };\n\n  public ui = {\n    field: <FieldInterface>undefined,\n    coreItems: <any[]>undefined,\n    items: <any[]>undefined,\n    fieldItemHelper: '',\n    map: <Dictionary<any>>{},\n    customSetting: <Dictionary<any>>{}\n  };\n\n\n  /**\n   * @param el\n   * @param _domRepo - transfer\n   * @param _fieldRepo - transfer\n   */\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService,\n    protected _fieldRepo: PopFieldEditorService\n  ){\n    super();\n\n    /**\n     * This should transformValue and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n        // #1: Enforce a CoreConfig\n        this.core = IsObjectThrowError( this.core, [ 'entity' ], `${this.name}:configureDom: - this.core` ) ? this.core : null;\n        // Set the height boundary\n\n        if( !this.field ) this.field = this.core.entity;\n\n        this._setHeight();\n\n        // Set event Handlers\n        this.dom.handler.core = ( core: CoreConfig, event: PopBaseEventInterface ) => this._coreEventHandler( event );\n        // Create a container to track the active items\n        this.dom.active.items = {};\n\n\n        // Transfer any resources for the entityId data\n        this.asset.fieldgroup = IsObjectThrowError( this.core.entity, [ 'fieldgroup' ], `${this.name}:: - this.core.entity.fieldgroup` ) ? <Entity>CleanObject( this.core.entity.fieldgroup ) : null;\n        // this.asset.coreRules = {};  // the settings that can be changed\n        // this.asset.coreItemModels = {}; // where the settings that can be changed are stored\n        this.ui.coreItems = IsArrayThrowError( this.core.resource.items.data_values, true, `${this.name}:configureDom: - this.core.resource.items` ) ? this.core.resource.items.data_values.filter( ( item ) => {\n          return !( this.srv.field.getViewIgnored( this.asset.fieldgroup.name, item.name, this.scheme ) );\n        } ).map( ( value ) => CleanObject( value ) ) : [];\n\n        this.ui.map.coreItems = ArrayMapSetter( this.ui.coreItems, 'name' );\n\n\n        this.ui.fieldItemHelper = `Select which attributes will be part of this ${this.asset.fieldgroup.name} field. Click on a field to edit individual field item settings.`;\n        this.ui.items = IsArrayThrowError( this.core.entity.items, true, `${this.name}:: - this.core.entity.items` ) ? this.core.entity.items.map( ( item ) => CleanObject( item ) ) : null;\n        if( IsObject( this.scheme ) ){\n          this.ui.items = this.ui.items.filter( ( item: FieldItemInterface ) => {\n            return +item.active === 1;\n          } );\n\n        }\n        this.ui.map.items = ArrayMapSetter( this.ui.items, 'name' );\n\n        // Build the custom settings\n        this._buildCustomSettings();\n        // Build the Active Items for this field\n        this._buildActiveItems();\n        this._selectDefaultItem();\n        // Select the first field attribute item so that the view will have something to render\n\n\n        return resolve( true );\n      } );\n\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n        if( this.dom.active.labelSettings ){\n          this.onActiveLabelSelection();\n          setTimeout( () => {\n            this.onActiveLabelSelection();\n          } );\n        }else if( IsObject( this.dom.active.item, [ 'id' ] ) ){\n          this.onActiveItemSelection( this.dom.active.item );\n          setTimeout( () => {\n            this.onActiveItemSelection( this.dom.active.item );\n          } );\n        }else if( true ){\n          this.onActiveLabelSelection();\n          setTimeout( () => {\n            this.onActiveLabelSelection();\n          } );\n        }else{\n          this._selectDefaultItem();\n        }\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * We expect the core to represent a field\n   * This component lists out all of the field attributes that this field has, and allows for the user to active/deactivate specific items.\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * This handles when a user click on a checkbox to activate/deactivate a specific field attribute\n   * @param event\n   */\n  onItemActiveChange( event: PopBaseEventInterface ){\n    // #1: Make sure that change was stored in the database\n    if( event.type === 'field' && event.name === 'patch' && event.success ){\n      if( this.log.repo.enabled( 'event', this.name ) ) console.log( this.log.repo.message( `${this.name}:itemActiveHandler` ), this.log.repo.color( 'event' ), event );\n      // #2: Update the change on the domRepo so other components can now about the change\n      this.dom.repo.ui.activeItems[ event.config.id ] = +event.config.control.value;\n      // #3: Send an event to the FieldBuilderPreviewComponent to update that this field attribute was activated/deactivated\n      this.core.channel.next( { source: this.name, target: 'PopEntityFieldPreviewComponent', type: 'component', name: 'update' } );\n    }\n  }\n\n\n  /**\n   * This handles when a user click on a checkbox to activate/deactivate a specific field attribute\n   * @param event\n   */\n  onEditLabelChange( event: PopBaseEventInterface ){\n    console.log( 'onCustomSettingChange', event );\n  }\n\n\n  /**\n   * On selection is an event when a user click on a specific field attribute to manage its settings\n   * @param item\n   */\n  onActiveItemSelection( item ){\n    this.log.info( `onActiveItemSelection`, item );\n    if( !this.dom.state.saving && IsObject( item, [ 'id' ] ) ){\n      this.dom.active.labelSettings = false;\n      // #1. Build a data package to send to the FieldBuilderItemSettingsComponent component\n      this.dom.active.item = item;\n      // #2: Send an event with the data package to the FieldBuilderItemSettingsComponent component\n      const event = <PopBaseEventInterface>{\n        type: 'component',\n        name: 'active-item',\n        source: this.name,\n        target: 'PopEntityFieldItemParamsComponent', // target specifies that specific component that should act on this event\n        data: item\n        // data: { item: item, models: itemModels, config: itemConfig }\n      };\n      this.dom.store( 'active' );\n      this.core.channel.emit( event ); // core channel is the shared radio between all components on the core\n    }\n  }\n\n\n  /**\n   * On selection is an event when a user click on a specific field attribute to manage its settings\n   * @param item\n   */\n  onActiveLabelSelection(){\n    this.log.info( `onActiveLabelSelection` );\n    this.dom.active[ 'item' ] = null;\n    this.dom.active.labelSettings = true;\n    const event = <PopBaseEventInterface>{\n      type: 'component',\n      name: 'label-settings',\n      source: this.name,\n      target: 'PopEntityFieldItemParamsComponent', // target specifies that specific component that should act on this event\n      data: {}\n    };\n    this.core.channel.emit( event ); // core channel is the shared radio between all components on the core\n    this.dom.store( 'active' );\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  /**\n   * Select the the first field item available\n   */\n  private _selectDefaultItem(){\n    if( this.ui.coreItems[ 0 ] ){\n      const coreItem = this.ui.coreItems[ 0 ];\n      const realItem = this.ui.items[ this.ui.map.items[ coreItem.name ] ];\n      this.onActiveItemSelection( realItem );\n      if( this.dom.active.item ){ // seems to need a double tap  to be consistent\n        setTimeout( () => {\n          this.onActiveItemSelection( realItem );\n        } );\n      }\n    }\n  }\n\n\n  /**\n   * This handler is for managing an cross-communication between components on the core channel\n   * @param event\n   */\n  private _coreEventHandler( event: PopBaseEventInterface ){\n    this.log.event( `_coreEventHandler`, event );\n    // if( IsValidFieldPatchEvent(this.core, event) ){\n    //   if( event.config.name === 'multiple' && !event.config.control.value && this.dom.active.labelSettings ){\n    //     this._selectDefaultItem();\n    //     // this._setHeight();\n    //   }\n    // }\n  }\n\n\n  /**\n   * Build configs that control the active state for each field item\n   */\n  private _buildActiveItems(){\n    this.dom.repo.ui.activeItems = {}; // stored on domRepo so that other components can use it\n\n    const isScheme = IsObject( this.scheme, true );\n\n    this.ui.coreItems.map( ( coreItem, index ) => {\n      const realItem = this.ui.items[ this.ui.map.items[ coreItem.name ] ];\n\n      if( IsObject( realItem, [ 'id', 'name' ] ) ){\n        // item.required = typeof coreItem.required !== 'undefined' ? +coreItem.required : 1;\n        // console.log('item', item);\n        // console.log('coreItem', coreItem);\n        // ToDo:: coreFieldItem needs to have required attribute\n\n        // this.ui.map.items[ item.name ] = index;\n\n        // item.name = SnakeToPascal(item.name);\n        coreItem.required = this.srv.field.getViewRequired( this.asset.fieldgroup.name, realItem.name );\n        if( coreItem.required ) realItem.active = 1;\n\n        let itemActive = +realItem.active;\n        if( isScheme ){\n          const schemeFieldItemSession = this.srv.field.getSchemeFieldItemMapping( this.scheme, +this.field.id, realItem.id );\n          console.log( 'schemeFieldItemSession', realItem.id, schemeFieldItemSession );\n          if( IsDefined( schemeFieldItemSession.active ) ){\n            itemActive = +schemeFieldItemSession.active;\n          }\n        }\n        this.dom.active.items[ realItem.id ] = new CheckboxConfig( {\n          id: realItem.id,\n          name: 'active',\n          align: 'left',\n          disabled: coreItem.required || !this.core.access.can_update ? true : false,\n          value: itemActive,\n          facade: isScheme,\n          patch: coreItem.required ? null : {\n            field: 'active',\n            path: isScheme ? null : `fields/customs/${realItem.id}`,\n            displayIndicator: true,\n            callback: isScheme ? async( core: CoreConfig, event ) => {\n              const session = this.srv.field.getSchemeFieldItemMapping( this.scheme, +this.field.id, realItem.id );\n              if( IsObject( session ) ){\n                session.active = event.config.control.value;\n                await this.srv.field.updateSchemeFieldMapping( this.scheme );\n              }\n            } : null\n          },\n        } );\n\n        this.dom.repo.ui.activeItems[ realItem.id ] = +realItem.active;\n      }\n    } );\n  }\n\n\n  /**\n   * Build the configs for any relevant custom settings\n   * @private\n   */\n  private _buildCustomSettings(){\n    if( IsObject( this.field.custom_setting, [ 'edit_label' ] ) ){\n      const setting = this.field.custom_setting.edit_label;\n\n      this.ui.customSetting[ 'edit_label' ] = new CheckboxConfig( {\n        id: setting.id,\n        align: 'left',\n        name: 'edit_label',\n        disabled: true,\n        value: true,\n        metadata: { setting: setting },\n        facade: true,\n        patch: {\n          field: ``,\n          path: ``,\n          callback: ( core: CoreConfig, event: PopBaseEventInterface ) => {\n            this.dom.state.saving = true;\n            if( IsObject( this.scheme, true ) ){\n              console.log( 'save setting to a scheme' );\n              console.log( 'event', event );\n              console.log( 'setting', setting );\n            }else{\n              this.srv.field.storeCustomSetting( core, event ).then( ( res ) => {\n                if( IsString( res, true ) ){\n                  this.ui.customSetting[ 'edit_label' ].message = res;\n                }\n                this.dom.setTimeout( 'allow-save', () => {\n                  this.dom.state.saving = false;\n                }, 500 );\n              } );\n            }\n          }\n\n        }\n      } );\n    }\n  }\n\n\n  /**\n   * Determine the layout height to control overflow\n   *\n   */\n  private _setHeight(){\n    this.dom.overhead = 135;\n    // this.dom.height.outer = +this.dom.repo.position[ this.position ].height - 121;\n    // const field = <FieldInterface>this.core.entity;\n    //\n    // if( false && field.multiple ){\n    //   this.dom.height.outer -= 20;\n    //   this.dom.height.outer -= ( +field.multiple_min * 60 );\n    // }\n    // if( this.dom.height.outer < 400 ) this.dom.height.outer = 400;\n    this.dom.setHeight( 400, this.dom.overhead );\n  }\n\n}\n","import { Component, ElementRef, OnDestroy, OnInit } from '@angular/core';\nimport { PopExtendComponent } from '../../../../../pop-extend.component';\nimport { PopDomService } from '../../../../../services/pop-dom.service';\nimport { SelectConfig } from '../../../../base/pop-field-item/pop-select/select-config.model';\nimport { InputConfig } from '../../../../base/pop-field-item/pop-input/input-config.model';\nimport { GetHttpErrorMsg, IsArray, IsObject, IsObjectThrowError, StorageGetter } from '../../../../../pop-common-utility';\nimport { CoreConfig, Dictionary, FieldEntry, FieldInterface, FieldItemOption, PopBaseEventInterface, PopLog, ServiceInjector } from '../../../../../pop-common.model';\nimport { IsValidFieldPatchEvent } from '../../../pop-entity-utility';\nimport { PopRequestService } from '../../../../../services/pop-request.service';\nimport { forkJoin, Observable } from 'rxjs';\nimport { PopFieldEditorService } from '../../pop-entity-field-editor.service';\nimport {FieldEntrySession} from \"../pop-entity-field-entries/pop-entity-field-entries.component\";\n\n\n@Component({\n  selector: 'lib-pop-entity-field-values',\n  templateUrl: './pop-entity-field-values.component.html',\n  styleUrls: [ './pop-entity-field-values.component.scss' ]\n})\nexport class PopEntityFieldValuesComponent extends PopExtendComponent implements OnInit, OnDestroy {\n\n  public name = 'PopEntityFieldValuesComponent';\n\n  protected srv: {\n    field: PopFieldEditorService,\n    request: PopRequestService\n  } = {\n    field: <PopFieldEditorService>undefined,\n    request: ServiceInjector.get(PopRequestService),\n  };\n\n  protected asset = {\n    basePath: <string>undefined,\n    field: <FieldInterface>undefined,\n    type: <string>undefined,\n    typeOption: <Dictionary<{ defaultValue: string | number, options: FieldItemOption[] }>>undefined,\n  };\n\n\n  /**\n   * Nest all service related classes under srv\n   */\n  protected transformSrvContainer(){\n    this.srv.field = this.fieldRepo;\n    this.dom.repo = this.domRepo;\n    delete this.fieldRepo;\n    delete this.domRepo;\n  }\n\n\n  constructor(\n    public el: ElementRef,\n    private domRepo: PopDomService,\n    private fieldRepo: PopFieldEditorService\n  ){\n    super();\n\n    this.transformSrvContainer();\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n\n        this.dom.handler.core = (core: CoreConfig, event:PopBaseEventInterface) => this._coreEventHandler(event);\n\n        this.asset.field = IsObjectThrowError(this.core, true, `Invalid Core`) && IsObjectThrowError(this.core.entity, [ 'id', 'fieldgroup' ], `Invalid Field`) ? <FieldInterface>this.core.entity : null;\n        this.asset.type = this.asset.field.fieldgroup.name; // the field group name , ie.. address, phone\n        this.asset.typeOption = this.srv.field.getDefaultLabelTypeOptions(); // the select options that belong to the types\n\n        this.asset.basePath = `fields/${this.asset.field.id}/entries`; // api endpoint to hit for field entries\n\n        this.ui.asset = <{ entries: { type: SelectConfig, display: InputConfig, increment: number }[], map: Dictionary<any> }>{\n          entries: [], // list of configs for each entry record\n        };\n        this.dom.session.controls = new Map(); // store the entry configs so that changes are not lost when the tabs are changed\n\n        return resolve(true);\n      });\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise((resolve) => {\n        this.dom.setTimeout('show-entries', () => {\n          this._showEntries();\n        }, 0);\n\n        return resolve(true);\n      });\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * When the type of an entry is changed in the database, make sure the changes is updated locally\n   * @param index\n   * @param event\n   */\n  onEntryTypeChange(index: number, event: PopBaseEventInterface){\n    if( IsValidFieldPatchEvent(this.core, event) ){\n      const config = this.ui.entries[ index ];\n      const entry = this.asset.field.entries[ index ];\n      const session = this.dom.session.controls.get(index);\n      if( entry && session ){\n        entry.type = config.type.control.value;\n        this._updateEntryTypeSession(session.type, entry);\n        this.dom.session.controls.set(index, session);\n        this.setDomSession(index, session);\n      }\n      setTimeout(() => {\n        this._triggerFieldPreviewUpdate();\n      }, 0);\n    }\n  }\n\n\n  /**\n   * When the display/label of an entry is changed in the database, make sure the changes is updated locally\n   * @param index\n   * @param event\n   */\n  onEntryDisplayChange(index: number, event: PopBaseEventInterface){\n    if( IsValidFieldPatchEvent(this.core, event) ){\n      const config = this.ui.entries[ index ];\n      const entry = this.asset.field.entries[ index ];\n      const session = this.dom.session.controls.get(index);\n      if( entry && session ){\n        entry.name = config.display.control.value;\n        this._updateEntryDisplaySession(session.display, entry);\n        this.dom.session.controls.set(index, session);\n        this.setDomSession(index, session);\n      }\n    }\n    setTimeout(() => {\n      this._triggerFieldPreviewUpdate();\n    }, 0);\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  /**\n   * Listen for when the min_multiple && max_multiple values change\n   * @param event\n   * @private\n   */\n  private _coreEventHandler(event: PopBaseEventInterface){\n    this.log.info(`_coreEventHandler`, event);\n    if( IsValidFieldPatchEvent(this.core, event) ){\n      if( event.source === 'PopMinMaxComponent' ){\n        this.dom.setTimeout('show-entries', () => {\n          this._showEntries();\n        }, 250);\n      }\n    }\n  }\n\n\n  /**\n   * Produce a list of the entry values for this field\n   * @private\n   */\n  private _showEntries(){\n    this.dom.state.pending = true;\n    this._setValueEntries().then((entries: FieldEntry[]) => {\n      this._setEntrySessionControls(entries).then(() => {\n        this._setEntries().then(() => {\n          this.dom.state.pending = false;\n          setTimeout(() => {\n            this._triggerFieldPreviewUpdate();\n          }, 0);\n        });\n      });\n    });\n  }\n\n\n  /**\n   * Ensure that the database records match the min/max settings\n   * This will remove any excess records in the database that exceed the multiple_min\n   * This will create records for an entries that are needed in the database\n   * @param patch\n   * @private\n   */\n  private _setValueEntries(): Promise<FieldEntry[]>{\n    return new Promise<FieldEntry[]>((resolve) => {\n      const storedEntries = JSON.parse(JSON.stringify(this.asset.field.entries));\n      const excess = storedEntries.splice(this.asset.field.multiple_min);\n      let index = 0;\n\n      const needed = [];\n      while( index < this.asset.field.multiple_min ){\n        const existing = index in storedEntries ? storedEntries[ index ] : null;\n        if( !existing ) needed.push(index);\n        index++;\n      }\n      const requests = []; // contains all the create/remove api/requests\n      // delete any excess entries from database\n      excess.map((entry) => {\n        requests.push(this.srv.request.doDelete(`${this.asset.basePath}/${entry.id}`));\n      });\n      // create any needed entries in database\n      needed.map((sessionIndex: number) => {\n        const session = this.dom.session.controls.get(sessionIndex);\n        requests.push(this.srv.request.doPost(`${this.asset.basePath}`, {\n          name: session ? session.display.value : null,\n          type: session ? session.type.value : this.asset.type in this.asset.typeOption ? this.asset.typeOption[ this.asset.type ].defaultValue : 'n/a'\n        }, 1, false));\n      });\n\n      if( requests.length ){ // need to update the data base to match min/max settings\n        this._makeApiRequests(requests).then((serverEntries: FieldEntry[]) => {\n\n          return resolve(serverEntries);\n        });\n      }else{ // stored entries already match min/max settings\n        return resolve(storedEntries);\n      }\n    });\n  }\n\n\n  /**\n   * Will make all of the needed api requests\n   * @param requests\n   * @private\n   */\n  private _makeApiRequests(requests: Observable<any>[]): Promise<FieldEntry[]>{\n    return new Promise<FieldEntry[]>((resolve) => {\n      forkJoin(requests).subscribe(() => {\n        this.srv.request.doGet(this.asset.basePath).subscribe((res) => {\n          res = res.data ? res.data : res;\n          this.asset.field.entries = IsArray(res, true) ? <FieldEntry[]>res : [];\n          this.core.entity.entries = JSON.parse(JSON.stringify(this.asset.field.entries))\n          resolve(res);\n        });\n      }, (err) => {\n        PopLog.error(this.name, `_makeApiRequests`, GetHttpErrorMsg(err));\n        resolve([]);\n      });\n    });\n  }\n\n\n  /**\n   * Store a set of controls that can store values as the user changes the settings\n   * @private\n   */\n  private _setEntrySessionControls(entries: FieldEntry[]): Promise<boolean>{\n    return new Promise((resolve) => {\n      let index = 0;\n      while( index < this.asset.field.multiple_min ){\n        const entry = index in entries ? entries[ index ] : null;\n        const session = this.dom.session.controls.has(index) ? this.dom.session.controls.get(index) : {\n          id: entry ? entry.id : null,\n          type: this._getTypeConfig(),\n          display: this._getDisplayConfig(),\n          increment: index + 1,\n        };\n        this._updateSessionControl(index, session, entry);\n        index++;\n      }\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * Update the entry config to use the stored record, and update the sessions for it\n   * @param index\n   * @param session\n   * @param entry\n   * @private\n   */\n  private _updateSessionControl(index: number, session: FieldEntrySession, entry: FieldEntry = null){\n    session.increment = index + 1;\n    session.id = entry ? entry.id : null;\n    this._updateEntryTypeSession(session.type, entry);\n    this._updateEntryDisplaySession(session.display, entry);\n    this.dom.session.controls.set(index, session);\n    this.setDomSession(index, session);\n    return session;\n  }\n\n\n  /**\n   * Update the entry type config to use correct value and path\n   * @param config\n   * @param entry\n   * @private\n   */\n  private _updateEntryTypeSession(config: SelectConfig, entry: FieldEntry = null){\n    config.value = entry ? entry.type : this.asset.type in this.asset.typeOption ? this.asset.typeOption[ this.asset.type ].defaultValue : 'n/a';\n    config.control.setValue(config.value, { emitEvent: false });\n    config.patch.path = entry ? `${this.asset.basePath}/${entry.id}` : null;\n  }\n\n\n  /**\n   * Update the entry display config to use correct value and path\n   * @param config\n   * @param entry\n   * @private\n   */\n  private _updateEntryDisplaySession(config: InputConfig, entry: FieldEntry = null){\n    config.value = entry ? entry.name : '';\n    config.control.setValue(config.value, { emitEvent: false });\n    config.patch.path = entry ? `${this.asset.basePath}/${entry.id}` : null;\n  }\n\n\n  /**\n   * Store each entry config in a dom session so that it can be restored when the users is switching tabs\n   * @param index\n   * @param session\n   */\n  private setDomSession(index: number, session: FieldEntrySession){\n    const domStorage = <any>StorageGetter(this.dom.repo, [ 'components', this.name, this.id + '', 'session' ]);\n    if( IsObject(domStorage, [ 'controls' ]) ){\n      const controls = <Map<number, FieldEntrySession>>domStorage.controls;\n      controls.set(index, session);\n    }\n  }\n\n\n  /**\n   * Set entry config objects that will be used in the html template\n   * @private\n   */\n  private _setEntries(): Promise<boolean>{\n    return new Promise<boolean>((resolve) => {\n      this.ui.entries = [];\n      if( this.dom.session.controls ){\n        let index = 0;\n        while( index < this.asset.field.multiple_min ){\n          this.ui.entries.push(this.dom.session.controls.get(index));\n          index++;\n        }\n      }\n      return resolve(true);\n    });\n  }\n\n\n  /**\n   * Manage the type of each entry\n   * @param ind\n   * @private\n   */\n  private _getTypeConfig(){\n    let disabled = false;\n    let options = this.asset.type in this.asset.typeOption ? this.asset.typeOption[ this.asset.type ].options : [];\n    if( !IsArray(options, true) ){\n      options = [ { value: 'n/a', name: 'N/A' } ];\n      disabled = true;\n    }\n    return new SelectConfig({\n      label: 'Type',\n      options: { values: options },\n      disabled: disabled,\n      patch: {\n        field: 'type',\n        path: null,\n      }\n    });\n  }\n\n\n  /**\n   * Manage the display of each entry\n   * @param index\n   * @private\n   */\n  private _getDisplayConfig(){\n    return new InputConfig({\n      label: 'Display Name',\n      patch: {\n        field: 'name',\n        path: null\n      }\n    });\n  }\n\n\n  private _triggerFieldPreviewUpdate(){\n    this.core.channel.next({ source: this.name, target: 'PopEntityFieldPreviewComponent', type: 'component', name: 'update' });\n  }\n}\n\n\n// export interface FieldEntrySession {\n//   id: number;\n//   type: SelectConfig;\n//   display: InputConfig;\n//   increment: number;\n// }\n","import { Component, Input, OnInit } from '@angular/core';\nimport { FieldParamInterface } from '../../../../../../pop-common.model';\n\n@Component({\n  selector: 'lib-field-label-param',\n  template: `\n    <div class=\"field-builder-param-container\">\n      <div class=\"field-builder-param-title-container mat-h2\">\n        <div class=\"field-builder-param-title\">{{config.name}}</div>\n      </div>\n    </div>`,\n})\nexport class FieldLabelParamComponent implements OnInit {\n  @Input() config: FieldParamInterface;\n\n\n  /**\n   * This component expects config to be a Label config\n   */\n  ngOnInit(){\n\n  }\n}\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { FieldParamInterface, PopBaseEventInterface } from '../../../../../../pop-common.model';\nimport { TextareaConfig } from '../../../../../base/pop-field-item/pop-textarea/textarea-config.model';\nimport { IsDefined } from '../../../../../../pop-common-utility';\n\n\n@Component({\n  selector: 'lib-field-textarea-param',\n  template: `\n    <lib-pop-textarea (events)=\"events.emit($event);\" [config]=param></lib-pop-textarea>`,\n})\nexport class FieldTextareaParamComponent implements OnInit {\n  @Input() config: FieldParamInterface;\n  @Output() events: EventEmitter<PopBaseEventInterface> = new EventEmitter<PopBaseEventInterface>();\n\n  param: TextareaConfig;\n\n\n  ngOnInit(){\n    this.param = new TextareaConfig({\n      name: this.config.name,\n      label: this.config.label,\n      column: this.config.column,\n      value: IsDefined(this.config.value) ? this.config.value : this.config.defaultValue,\n      height: 70,\n      facade: this.config.facade,\n      patch: this.config.patch,\n      metadata: this.config.metadata ? this.config.metadata : {}\n    });\n  }\n}\n","import { ChangeDetectorRef, Component, EventEmitter, Input, OnDestroy, OnInit, Output } from '@angular/core';\nimport { PopCommonService } from '../../../../../../services/pop-common.service';\nimport { FieldParamInterface, PopBaseEventInterface } from '../../../../../../pop-common.model';\nimport { RadioConfig } from '../../../../../base/pop-field-item/pop-radio/radio-config.model';\n\n\n@Component({\n  selector: 'lib-field-radio-param',\n  template: `<lib-pop-radio (events)=\"events.emit($event);\" [config]=param></lib-pop-radio>`,\n})\nexport class FieldRadioParamComponent implements OnInit, OnDestroy {\n  @Input() config: FieldParamInterface;\n  @Output() events: EventEmitter<PopBaseEventInterface> = new EventEmitter<PopBaseEventInterface>();\n\n  param: RadioConfig;\n\n\n  constructor(private commonRepo: PopCommonService,\n              private changeDetectorRef: ChangeDetectorRef){\n  }\n\n\n  ngOnInit(){\n    this.param = new RadioConfig({\n      label: (this.config.label ? this.config.label: this.config.name),\n      name: this.config.name,\n      layout: 'row',\n      value: this.config.value ? this.config.value: this.config.defaultValue,\n      patch: this.config.patch,\n      options: this.config.options,\n      facade: this.config.facade,\n      metadata: this.config.metadata ? this.config.metadata : {}\n    });\n  }\n\n\n  ngOnDestroy(){\n  }\n\n}\n","import { Component, EventEmitter, HostBinding, Input, OnInit, Output } from '@angular/core';\nimport { FieldParamInterface, PopBaseEventInterface } from '../../../../../../pop-common.model';\nimport { SelectConfig } from '../../../../../base/pop-field-item/pop-select/select-config.model';\nimport { ConvertArrayToOptionList, IsObject } from '../../../../../../pop-common-utility';\n\n\n@Component( {\n  selector: 'lib-field-select-param',\n  template: `\n    <lib-pop-select *ngIf=\"param\" (events)=\"events.emit($event);\" [config]=param></lib-pop-select>`,\n} )\nexport class FieldSelectParamComponent implements OnInit {\n  @Input() config: FieldParamInterface;\n  @Output() events: EventEmitter<PopBaseEventInterface> = new EventEmitter<PopBaseEventInterface>();\n  @HostBinding( 'class.sw-hidden' ) @Input() hidden = false;\n\n  param: SelectConfig;\n\n\n  ngOnInit(){\n    if( IsObject( this.config, true ) ){\n      this.param = new SelectConfig( {\n        label: ( this.config.label ? this.config.label : this.config.name ),\n        name: this.config.name,\n        value: this.config.value ? this.config.value : this.config.defaultValue,\n        options: {\n          values: IsObject( this.config.options, [ 'values' ] ) ? ConvertArrayToOptionList( this.config.options.values ) : []\n        },\n        facade: this.config.facade,\n        patch: this.config.patch,\n        metadata: this.config.metadata ? this.config.metadata : {}\n      } );\n    }\n    this.hidden = this.param.options.values.length === 0 ? true : false;\n  }\n}\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { FieldParamInterface, PopBaseEventInterface } from '../../../../../../pop-common.model';\nimport { InputConfig } from '../../../../../base/pop-field-item/pop-input/input-config.model';\nimport { Validators } from '@angular/forms';\n\n\n@Component({\n  selector: 'lib-field-input-param',\n  template: `\n    <lib-pop-input (events)=\"events.emit($event);\" [config]=param></lib-pop-input>`,\n})\nexport class FieldInputParamComponent implements OnInit {\n  @Input() config: FieldParamInterface;\n  @Output() events: EventEmitter<PopBaseEventInterface> = new EventEmitter<PopBaseEventInterface>();\n\n  param: InputConfig;\n\n\n  constructor(){\n  }\n\n\n  ngOnInit(){\n    const validators = [];\n    if( this.config.required ) validators.push(Validators.required);\n    this.param = new InputConfig({\n      name: this.config.name,\n      label: this.config.label,\n      value: this.config.value ? this.config.value : this.config.defaultValue,\n      readonly: this.config.readonly,\n      validators: validators,\n      patch: this.config.patch,\n      facade: this.config.facade,\n      metadata: this.config.metadata ? this.config.metadata : {}\n    });\n  }\n}\n","import { Component, EventEmitter, Input, OnDestroy, OnInit, Output } from '@angular/core';\nimport { FieldParamInterface, PopBaseEventInterface } from '../../../../../../pop-common.model';\nimport { NumberConfig } from '../../../../../base/pop-field-item/pop-number/number-config.model';\nimport { IsDefined } from '../../../../../../pop-common-utility';\n\n\n@Component( {\n  selector: 'lib-field-number-param',\n  template: `\n    <lib-pop-number (events)=\"events.emit($event);\" [config]=param></lib-pop-number>`,\n} )\nexport class FieldNumberParamComponent implements OnInit, OnDestroy {\n  @Input() config: FieldParamInterface;\n  @Output() events: EventEmitter<PopBaseEventInterface> = new EventEmitter<PopBaseEventInterface>();\n\n  param: NumberConfig;\n\n\n  constructor(){\n  }\n\n\n  ngOnInit(){\n    const defaultValue = IsDefined( this.config.default_value ) ? +this.config.default_value : 255;\n    const configInterface = <FieldParamInterface>{\n      label: this.config.label,\n      name: this.config.name,\n      value: this.config.value ? this.config.value : this.config.default_value,\n      patch: this.config.patch,\n      facade: this.config.facade,\n      min: 1,\n      max: defaultValue,\n      metadata: this.config.metadata ? this.config.metadata : {}\n    };\n    if( this.config.name === 'maxlength' ){\n      configInterface.helpText = `Limit: ${defaultValue}`;\n    }\n\n    this.param = new NumberConfig( configInterface );\n  }\n\n\n  ngOnDestroy(){\n  }\n\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit, ViewChild, ViewContainerRef } from '@angular/core';\nimport { CdkDragDrop, moveItemInArray } from '@angular/cdk/drag-drop';\nimport { PopExtendDynamicComponent } from '../../../../../pop-extend-dynamic.component';\nimport { PopEntityService } from '../../../services/pop-entity.service';\nimport { PopFieldEditorService } from '../../pop-entity-field-editor.service';\nimport { PopRequestService } from '../../../../../services/pop-request.service';\nimport { FieldLabelParamComponent } from './params/field-label-param.component';\nimport { FieldTextareaParamComponent } from './params/field-textarea-param.component';\nimport { FieldRadioParamComponent } from './params/field-radio-param.component';\nimport { FieldSwitchParamComponent } from './params/field-switch-param.component';\nimport { FieldSelectParamComponent } from './params/field-select-param.component';\nimport { FieldInputParamComponent } from './params/field-input-param.component';\nimport {\n  CoreConfig,\n  Dictionary,\n  DynamicComponentInterface,\n  FieldConfig,\n  FieldInterface,\n  PopBaseEventInterface,\n  PopLog,\n  ServiceInjector\n} from '../../../../../pop-common.model';\nimport { InputConfig } from '../../../../base/pop-field-item/pop-input/input-config.model';\nimport { CheckboxConfig } from '../../../../base/pop-field-item/pop-checkbox/checkbox-config.model';\nimport { PopDomService } from '../../../../../services/pop-dom.service';\nimport {\n  CleanObject,\n  DynamicSort,\n  IsArray,\n  IsDefined,\n  IsObject,\n  IsObjectThrowError, IsString,\n  SnakeToPascal,\n  TitleCase\n} from '../../../../../pop-common-utility';\nimport { FieldItemView, IsValidFieldPatchEvent } from '../../../pop-entity-utility';\nimport { Validators } from '@angular/forms';\nimport { FieldNumberParamComponent } from './params/field-number-param.component';\nimport { EntitySchemeSectionInterface } from '../../../pop-entity-scheme/pop-entity-scheme.model';\n\n\n@Component( {\n  selector: 'lib-field-builder-items-params',\n  templateUrl: './pop-entity-field-item-params.component.html',\n  styleUrls: [ './pop-entity-field-item-params.component.scss' ],\n} )\nexport class PopEntityFieldItemParamsComponent extends PopExtendDynamicComponent implements OnInit, OnDestroy {\n  @Input() field: FieldInterface;\n  @Input() scheme: EntitySchemeSectionInterface = null;\n  @ViewChild( 'container', { read: ViewContainerRef, static: true } ) private container;\n  public name = 'PopEntityFieldItemParamsComponent';\n\n  protected asset = {\n    field: <FieldConfig>undefined,\n    viewParams: <Dictionary<any>>undefined,\n    viewOptions: <Dictionary<any>>undefined,\n    viewTemplate: <Dictionary<any>>undefined,\n  };\n\n  protected srv = {\n    entity: <PopEntityService>ServiceInjector.get( PopEntityService ),\n    field: <PopFieldEditorService>undefined,\n    request: <PopRequestService>ServiceInjector.get( PopRequestService ),\n  };\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService,\n    protected _fieldRepo: PopFieldEditorService,\n  ){\n    super();\n\n    /**\n     * This should transformValue and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n        // #1: Enforce a CoreConfig\n        this.core = IsObjectThrowError( this.core, true, `${this.name}:configureDom: - this.core` ) ? this.core : null;\n        this.field = IsObjectThrowError( this.core.entity, true, `` ) ? <FieldInterface>this.core.entity : null;\n        // Set the outer height boundary of the component\n        this._setHeight();\n\n\n        // Set the template container for the field item list\n        this.template.attach( 'container' );\n\n        // Set event Handlers\n        this.dom.handler.core = ( core: CoreConfig, event: PopBaseEventInterface ) => this.coreEventHandler( event );\n        this.dom.handler.bubble = ( core: CoreConfig, event: PopBaseEventInterface ) => this.onBubbleEvent( event );\n\n        this.dom.state.showOptions = false;\n\n        this.asset.viewParams = this.srv.field.getViewParams();\n        this.asset.viewOptions = this.srv.field.getViewOptions();\n\n\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * We expect the core to represent a field\n   * This component allows the user to configure the settings of the specific field attribute item\n   * The FieldBuilderItemsComponent is responsible to communicate which field attribute item is active\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * This handler handles any events that come up from the settings fields\n   * @param event\n   */\n  onBubbleEvent( event: PopBaseEventInterface ){\n    PopLog.event( this.name, `onBubbleEvent`, event );\n    if( event.type === 'field' && event.name === 'patch' && event.success ){\n      if( IsDefined( event.config.name ) ){\n        const field = this.dom.active.item;\n        const value = event.config.control.value;\n        if( event.config.name === 'active' ){\n          field.active = +value;\n        }else if( IsObject( event.config.metadata, [ 'session' ] ) ){\n          if( IsArray( event.config.metadata.session ) ){\n            event.config.metadata.session.map( ( storage ) => {\n              if( IsObject( storage ) ){\n                storage[ event.config.name ] = value;\n              }\n            } );\n          }else if( IsObject( event.config.metadata.session ) ){\n            event.config.metadata.session[ event.config.name ] = value;\n          }\n        }\n      }\n      this.dom.setTimeout( 'update-preview', () => {\n        this.core.channel.next( { source: this.name, type: 'component', name: 'update', target: 'PopEntityFieldPreviewComponent' } );\n      }, 250 );\n    }\n  }\n\n\n  /**\n   * This is action that initiates setting up the preview\n   */\n  setActiveFieldItem(): void{\n    if( this.dom.active.item ){\n      this._setFieldItemOptions();\n      this._setFieldItemParams();\n    }\n  }\n\n\n  /**\n   * This is action that initiates setting up the preview\n   */\n  setLabelSettings(): void{\n    this.dom.active.item = null;\n    this.dom.state.showOptions = false;\n    this._configureLabelList().then( ( paramComponentList: DynamicComponentInterface[] ) => {\n      this.template.render( paramComponentList, [], true );\n    } );\n  }\n\n\n  /**\n   * The user can add entries in to the options that this field should use\n   */\n  addFieldItemOption(): void{\n    this.dom.active.options.push( {\n      active: new CheckboxConfig( {\n        label: null,\n        value: 1,\n        bubble: true,\n      } ),\n      name: new InputConfig( {\n        label: null,\n        value: '',\n        pattern: 'AlphaNumeric',\n        bubble: true,\n        maxlength: 128,\n        minimal: true,\n      } ),\n      value: new InputConfig( {\n        label: null,\n        value: '',\n        pattern: 'AlphaNumericNoSpace',\n        bubble: true,\n        maxlength: 128,\n        minimal: true,\n      } ),\n      sort: new InputConfig( {\n        label: null,\n        minimal: true,\n        value: this.dom.active.options.length,\n        bubble: true,\n      } ),\n    } );\n  }\n\n\n  /**\n   * The user can remove an existing option that this field is using\n   * @param index\n   */\n  removeFieldItemOption( index: number ): void{\n    if( index in this.dom.active.options ){\n      this.dom.active.options.splice( index, 1 );\n      this.dom.active.options.map( ( option, i ) => {\n        option.sort.control.setValue( i );\n      } );\n    }\n    this.triggerSaveFieldOptions( <PopBaseEventInterface>{ name: 'onChange' } );\n  }\n\n\n  /**\n   * This will allow the user to make consecutive changes with minimal api calls\n   * @param event\n   */\n  triggerSaveFieldOptions( event: PopBaseEventInterface ): void{\n    if( event && ( event.name === 'onKeyUp' || event.name === 'onChange' ) ){\n      if( this.dom.delay.saveFieldOptions ){\n        clearTimeout( this.dom.delay.saveFieldOptions );\n      }\n      this.dom.delay.saveFieldOptions = setTimeout( () => {\n        this.saveFieldItemOptions();\n      }, 500 );\n    }\n  }\n\n\n  /**\n   * Reset the option values with the root source\n   * @param event\n   */\n  onOptionSourceReset( event: PopBaseEventInterface ): void{\n    const field = this.dom.active.item;\n    if( IsArray( field.source, true ) ){\n      field.options.values = [];\n      field.source.map( ( item, index ) => {\n        field.options.values.push( {\n          active: item.active ? +item.active : 1,\n          name: item.name ? item.name : item.label ? item.label : 'Item ' + ( index + 1 ),\n          value: item.id ? item.id : item.value ? item.value : ( index + 1 ),\n          sort: index\n        } );\n      } );\n      this._setFieldItemOptions();\n      this.triggerSaveFieldOptions( <PopBaseEventInterface>{ name: 'onChange' } );\n    }\n  }\n\n\n  /**\n   * This will store the option changes that the user makes\n   */\n  saveFieldItemOptions(): void{\n    // #1: Create the payload structure\n    this.dom.state.saving = true;\n    const field = this.dom.active.item;\n    const json = JSON.parse( JSON.stringify( field.options ) );\n    json.values = [];\n    let opt;\n    this.dom.active.options.map( ( option ) => {\n      opt = {};\n      Object.keys( option ).map( ( key ) => {\n        opt[ key ] = option[ key ].control.value;\n      } );\n      json.values.push( opt );\n    } );\n\n    const ignore401 = null;\n    const version = 1;\n    const patch = {\n      'options': json\n    };\n    // #2: Clear/Store the subscriber so that it can be ignored if needed\n    this.dom.setSubscriber( 'options-api-call', this.srv.request.doPatch( `/fields/customs/${field.id}`, patch, version, ignore401 ).subscribe(\n      res => {\n        this.dom.active.item.options.values = json.values;\n        this.dom.state.saving = false;\n        // #3: Inform the FieldBuilderPreviewComponent to update the new settings\n        this.core.channel.next( { source: this.name, type: 'component', name: 'update', target: 'PopEntityFieldPreviewComponent' } );\n        if( this.dom.subscriber.api ) this.dom.subscriber.api.unsubscribe();\n      },\n      err => {\n        this.dom.state.saving = false;\n      }\n    ) );\n  }\n\n\n  /**\n   * This allows the user to sort the list of options that this field uses\n   * @param event\n   */\n  onOptionSortDrop( event: CdkDragDrop<string[]> ){\n    moveItemInArray( this.dom.active.options, event.previousIndex, event.currentIndex );\n    this.triggerSaveFieldOptions( <PopBaseEventInterface>{ name: 'onChange' } );\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    this.template.destroy();\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  /**\n   * This handler is for managing any cross-communication between components on the core channel\n   * @param event\n   */\n  private coreEventHandler( event: PopBaseEventInterface ){\n    this.log.event( `coreEventHandler`, event );\n    if( event.type === 'component' ){\n      if( event.source === 'PopEntityFieldItemsComponent' ){\n        if( event.name === 'active-item' ){\n          // #1: An event has triggered that the view needs to change the active item,  debounce this trigger so that this action does not get called on top of itself\n          this.dom.setTimeout( 'reset-view', () => {\n            this.dom.loading();\n            // #2: Transfer in the data package from the event\n            this.dom.active.item = event.data;\n            // this.asset.viewParams = event.data.config;\n            // this.asset.model = event.data.model;\n            // #3: Render the Active Item settings that are available\n            this.setActiveFieldItem();\n            setTimeout( () => {\n              this.dom.ready();\n            }, 0 );\n          }, 100 );\n        }else if( event.name === 'label-settings' ){\n          // #1: An event has triggered that the view needs to change the active item,  debounce this trigger so that this action does not get called on top of itself\n          if( this.dom.delay.reset ) clearTimeout( this.dom.delay.reset );\n          this.dom.delay.reset = setTimeout( () => {\n            this.dom.loading();\n            this.setLabelSettings();\n            setTimeout( () => {\n              this.dom.ready();\n            }, 0 );\n          }, 100 );\n        }\n      }\n    }else if( IsValidFieldPatchEvent( this.core, event ) ){\n      this._setHeight();\n    }\n  }\n\n\n  /**\n   * This handles rendering the dynamic list of  param settings into the view\n   * @param form\n   * @param fieldItem\n   * @param params\n   */\n  private _setFieldItemParams(){\n    if( IsObject( this.dom.active.item, true ) ){\n      this._configureParamList().then( ( paramComponentList: DynamicComponentInterface[] ) => {\n        this.template.render( paramComponentList, [], true );\n      } );\n    }\n  }\n\n\n  /**\n   * This will return a list of all the inputs that the settings require\n   * @param fieldItem\n   * @param params\n   */\n  _configureParamList(): Promise<DynamicComponentInterface[]>{\n    return new Promise( ( resolve ) => {\n\n      const paramComponentList: DynamicComponentInterface[] = [];\n      let component;\n      let configInterface;\n      const fieldItem = this.dom.active.item;\n      const view = fieldItem.view;\n      const rules = fieldItem.rules.sort( DynamicSort( 'name' ) ).map( ( rule ) => CleanObject( rule ) );\n      const allowed = this.asset.viewParams[ view.name ];\n      const group = this.field.fieldgroup.name;\n      const itemCustomSettings = fieldItem.custom_setting;\n      // ToDo: Put the custom Settings into the paramList\n      // console.log('itemCustomSettings', itemCustomSettings);\n\n      const isScheme = IsObject( this.scheme, [ 'id' ] ) ? true : false;\n\n      this.log.config( `activeItem`, {\n        item: fieldItem,\n        rules: rules,\n        group: group,\n        allowed: allowed,\n        settings: itemCustomSettings,\n        view: view\n      } );\n\n      if( this.dom.active.item.name !== 'value' ){\n        let labelValue = fieldItem.label;\n        if( isScheme ){\n          const mapping = this.srv.field.getSchemeFieldItemMapping( this.scheme, +this.field.id, this.dom.active.item.id );\n          if( IsString( mapping.label, true ) ){\n            labelValue = mapping.label;\n          }\n        }\n        const display = <DynamicComponentInterface>{\n          type: this._getParamComponent( 'display' ),\n          inputs: {\n            config: configInterface = {\n              ...{\n                value: labelValue,\n                defaultValue: '',\n              },\n              ...{\n                label: 'Label',\n                name: 'label',\n                readonly: false,\n                required: true,\n                metadata: {\n                  session: fieldItem\n                },\n                facade: isScheme,\n                patch: {\n                  field: 'label',\n                  path: `fields/customs/${fieldItem.id}`,\n                  callback: isScheme ? async( core: CoreConfig, event: PopBaseEventInterface ) => {\n                    const session = this.srv.field.getSchemeFieldItemMapping( this.scheme, +this.field.id, this.dom.active.item.id );\n                    session.label = event.config.control.value;\n                    await this.srv.field.updateSchemeFieldMapping( this.scheme );\n                    // console.log( 'session', session );\n                    // console.log( 'facade', event.config.name, event.config.control.value );\n                  } : null,\n                }\n              }\n            }\n          }\n        };\n        paramComponentList.push( display );\n      }\n\n      if( group === 'selection' ){\n        const display = <DynamicComponentInterface>{\n          type: this._getParamComponent( 'view' ),\n          inputs: {\n            config: configInterface = {\n              ...{\n                value: view.id,\n                defaultValue: '',\n              },\n              ...{\n                label: 'Template View',\n                name: 'field_view_id',\n                readonly: false,\n                required: true,\n                options: {\n                  defaultValue: 2,\n                  values: [\n                    { value: 2, name: 'Select', sort_order: 0 },\n                    { value: 10, name: 'Radio', sort_order: 1 },\n                  ]\n                },\n                metadata: {\n                  session: fieldItem\n                },\n                patch: {\n                  field: 'field_view_id',\n                  path: `fields/${fieldItem.id}`,\n                  callback: ( core: CoreConfig, event: PopBaseEventInterface ) => {\n                    const session = event.config.metadata.session;\n                    session.view = FieldItemView( event.response.view );\n                  }\n                }\n              }\n            }\n          }\n        };\n        paramComponentList.push( display );\n      }\n\n\n      // if(!this.field.multiple){\n      //   const helpText = <DynamicComponentInterface>{\n      //     type: this._getParamComponent('helpText'),\n      //     inputs: {\n      //       config: configInterface = {\n      //         ...{\n      //           value: fieldItem.helpText ? fieldItem.helpText : null,\n      //           defaultValue: '',\n      //         },\n      //         ...{\n      //           label: 'Help Text',\n      //           name: 'helpText',\n      //           readonly: false,\n      //           metadata: {\n      //             session: fieldItem\n      //           },\n      //           patch: { field: 'helpText', path: `fields/customs/${fieldItem.id}` }\n      //         }\n      //       }\n      //     }\n      //   };\n      //   paramComponentList.push(helpText);\n      // }\n\n      if( view.name in this.asset.viewParams ){\n\n        const ruleSchemeSession = this.srv.field.getSchemeFieldItemSection( this.scheme, +this.field.id, this.dom.active.item.id, 'rule' );\n        rules.map( ( rule ) => {\n//           console.log('rule', rule);\n          let ruleValue = rule.value;\n          if( isScheme ){\n            if( IsDefined( ruleSchemeSession[ rule.name ] ) ){\n              ruleValue = ruleSchemeSession[ rule.name ];\n            }\n          }\n          if( rule.name in allowed ){\n            configInterface = {\n              ...rule,\n              ...{\n                value: ruleValue,\n                name: rule.name,\n                label: TitleCase( SnakeToPascal( rule.name ) ),\n                metadata: { rule: rule },\n                facade: true,\n                patch: {\n                  duration: 0,\n                  field: ``,\n                  path: ``,\n                  callback: async( core: CoreConfig, event: PopBaseEventInterface ) => {\n                    if( IsObject( this.scheme, true ) ){\n                      if( IsObject( ruleSchemeSession ) ){\n                        ruleSchemeSession[ rule.name ] = event.config.control.value;\n                        await this.srv.field.updateSchemeFieldMapping( this.scheme );\n                      }\n                    }else{\n                      this.srv.field.storeFieldItemRule( core, fieldItem, event ).then( () => true );\n                    }\n                  }\n                }\n              }\n            };\n\n            if( IsObject( rule.options, true ) ){\n              configInterface.options = rule.options;\n            }\n            component = <DynamicComponentInterface>{\n              type: this._getParamComponent( rule.name ),\n              inputs: {\n                config: configInterface,\n              }\n            };\n            paramComponentList.push( component );\n          }\n        } );\n      }\n\n\n      if( IsObject( itemCustomSettings, true ) ){\n\n        Object.keys( itemCustomSettings ).map( ( settingName ) => {\n\n            const setting = itemCustomSettings[ settingName ];\n            // console.log('setting', setting);\n            if( setting.type !== 'model' ){\n              paramComponentList.push( this.srv.field.getCustomSettingComponent( this.core, this.core.entity, setting, this.scheme ) );\n            }\n\n        } );\n      }\n\n      resolve( paramComponentList );\n    } );\n  }\n\n\n  /**\n   * This will return a list of all the inputs that the label settings require\n   * @param fieldItem\n   * @param params\n   */\n  _configureLabelList(): Promise<DynamicComponentInterface[]>{\n    return new Promise( ( resolve ) => {\n      // const paramComponentList: DynamicComponentInterface[] = [];\n      //\n      // const values = <DynamicComponentInterface>{\n      //   type: PopEntityFieldLabelComponent,\n      //   inputs: {\n      //     core: this.core\n      //   }\n      // };\n      // paramComponentList.push(values);\n      //\n      //\n      resolve( [] );\n    } );\n  }\n\n\n  private _setHeight(){\n    this.dom.overhead = 125;\n    // this.dom.height.outer = +this.dom.repo.position[ this.position ].height - 121;\n    // const field = <FieldInterface>this.core.entity;\n    // if( false && field.multiple ){\n    //   this.dom.height.outer -= 20;\n    //   this.dom.height.outer -= ( +field.multiple_min * 60 );\n    // } // values box\n    //\n    // if( this.dom.height.outer < 400 ) this.dom.height.outer = 400;\n    // this.dom.height.outer -= 2;\n    this.dom.setHeight( 399, this.dom.overhead );\n  }\n\n\n  /**\n   * Return the the field input component that should be used for the type of setting param;\n   * @param form\n   */\n  private _getParamComponent( form ){\n    switch( form ){\n      case 'label':\n        return FieldLabelParamComponent;\n        break;\n      case 'display':\n      case 'api':\n      case 'sort_top':\n      case 'regex':\n      case 'sort':\n      case 'helpText':\n        return FieldInputParamComponent;\n        break;\n      case 'select':\n      case 'mask':\n      case 'pattern':\n      case 'validation':\n      case 'transformation':\n        return FieldSelectParamComponent;\n        break;\n      case 'hidden':\n      case 'visible':\n      case 'disabled':\n      case 'readonly':\n      case 'required':\n        return FieldSwitchParamComponent;\n        break;\n      case 'layout':\n        return FieldRadioParamComponent;\n        break;\n      case 'minlength':\n      case 'maxlength':\n        return FieldNumberParamComponent;\n      case 'metadata':\n        return FieldTextareaParamComponent;\n        break;\n      case 'view':\n        return FieldRadioParamComponent;\n        break;\n      default:\n        return FieldLabelParamComponent;\n    }\n  }\n\n\n  /**\n   * This will make sure the options will get set up properly if the active items uses them\n   * @param form\n   * @param options\n   * @param params\n   */\n  private _setFieldItemOptions(){\n    this.dom.state.showOptions = false;\n    const field = this.dom.active.item;\n    const form = field.view ? field.view.name : null;\n    if( !form ) PopLog.warn( this.name, `_setFieldItemOptions: Invalid Form`, field );\n\n\n    this.dom.active.options = [];\n    if( form && form in this.asset.viewOptions ){\n\n      // if( field.options.fixed ){\n      //   field.options.enum = true;\n      // }\n\n      if( IsArray( field.source, true ) ){\n        field.options.enum = true;\n        this.dom.state.isOptionSource = true;\n      }\n\n      if( !( IsObject( field.options, [ 'values' ] ) ) && !( field.source ) ){\n        field.options = this.asset.viewOptions[ form ];\n      }\n\n      if( IsObject( field.options, [ 'values' ] ) && Array.isArray( field.options.values ) ){\n        field.options.values.map( ( option, index ) => {\n          option.name = option.name ? String( option.name ) : 'Item ' + ( index + 1 );\n          option.value = option.id ? String( option.id ) : option.value ? String( option.value ) : String( ( index + 1 ) );\n          option.sort = index;\n          if( typeof option.active !== 'boolean' ) option.active = true;\n          this.dom.active.options.push( {\n            active: new CheckboxConfig( {\n              label: null,\n              value: +option.active,\n              bubble: true,\n            } ),\n            name: new InputConfig( {\n              label: null,\n              value: option.name,\n              transformation: 'title',\n              bubble: this.dom.state.isOptionSource ? false : true,\n              pattern: 'AlphaNumeric',\n              validators: [ Validators.required ],\n              maxlength: 32,\n              readonly: this.dom.state.isOptionSource ? true : false,\n            } ),\n            value: new InputConfig( {\n              label: null,\n              value: option.value,\n              bubble: field.options.enum ? false : true,\n              validators: [ Validators.required ],\n              pattern: 'AlphaNumericNoSpace',\n              transformation: 'lower',\n              maxlength: 32,\n              readonly: field.options.enum ? true : false,\n            } ),\n            sort: new InputConfig( {\n              label: null,\n              value: option.sort || 0,\n              bubble: true,\n            } ),\n          } );\n        } );\n        this.dom.state.showOptions = true;\n      }\n    }\n  }\n}\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { FieldParamInterface, PopBaseEventInterface, PopLog } from '../../../../../../pop-common.model';\nimport { SliderConfig, SliderConfigInterface } from '../../../../../base/pop-field-item/pop-slider/pop-slider.model';\n\n\n@Component({\n  selector: 'lib-field-slider-param',\n  template: `\n    <lib-pop-slider (events)=\"events.emit($event);\" [config]=param></lib-pop-slider>\n  `,\n})\nexport class FieldSliderParamComponent implements OnInit {\n  @Input() config: FieldParamInterface;\n  @Output() events: EventEmitter<PopBaseEventInterface> = new EventEmitter<PopBaseEventInterface>();\n  public name = 'FieldSliderParamComponent';\n\n  param: SliderConfig;\n\n\n  /**\n   * This component expects config to be a Label config\n   */\n  ngOnInit(){\n    if( !this.config.value ) this.config.value = this.config.defaultValue;\n    this.param = new SliderConfig(<SliderConfigInterface>{\n      name: this.config.name,\n      label: this.config.label,\n      column: this.config.column,\n      value: this.config.value ? this.config.value : this.config.defaultValue,\n      min: this.config.min ? this.config.min : 1,\n      max: this.config.defaultValue,\n      facade: this.config.facade,\n      patch: this.config.patch,\n      metadata: this.config.metadata ? this.config.metadata : {}\n    });\n    PopLog.init(this.name, `init`, this);\n  }\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { PopFieldEditorService } from '../../pop-entity-field-editor.service';\nimport {\n  CoreConfig,\n  Dictionary, EntityActionInterface, FieldCustomSettingInterface,\n  FieldEntry,\n  FieldInterface,\n  FieldItemOption, KeyMap,\n  PopBaseEventInterface, PopDate,\n  PopLog, PopRequest,\n  ServiceInjector\n} from '../../../../../pop-common.model';\nimport { PopExtendComponent } from '../../../../../pop-extend.component';\nimport { PopDomService } from '../../../../../services/pop-dom.service';\nimport { MinMaxConfig } from '../../../../base/pop-field-item/pop-min-max/min-max.models';\nimport {\n  ArrayMapSetter,\n  DeepCopy,\n  GetHttpErrorMsg, GetHttpObjectResult,\n  IsArray, IsArrayThrowError, IsDefined,\n  IsObject,\n  IsObjectThrowError,\n  IsString, IsUndefined, SnakeToPascal,\n  StorageGetter,\n  TitleCase\n} from '../../../../../pop-common-utility';\nimport { forkJoin, Observable } from 'rxjs';\nimport { SelectConfig } from '../../../../base/pop-field-item/pop-select/select-config.model';\nimport { InputConfig } from '../../../../base/pop-field-item/pop-input/input-config.model';\nimport { PopRequestService } from '../../../../../services/pop-request.service';\nimport { CheckboxConfig } from '../../../../base/pop-field-item/pop-checkbox/checkbox-config.model';\nimport { SwitchConfig } from '../../../../base/pop-field-item/pop-switch/switch-config.model';\nimport { IsValidFieldPatchEvent } from '../../../pop-entity-utility';\nimport { PopConfirmationDialogComponent } from '../../../../base/pop-dialogs/pop-confirmation-dialog/pop-confirmation-dialog.component';\nimport { MatDialog } from '@angular/material/dialog';\nimport { PopEntityActionService } from '../../../services/pop-entity-action.service';\nimport { PopTabMenuService } from '../../../../base/pop-tab-menu/pop-tab-menu.service';\nimport { CdkDragDrop, moveItemInArray } from '@angular/cdk/drag-drop';\nimport { EntitySchemeSectionInterface } from '../../../pop-entity-scheme/pop-entity-scheme.model';\n\n\n@Component( {\n  selector: 'lib-pop-entity-field-entries',\n  templateUrl: './pop-entity-field-entries.component.html',\n  styleUrls: [ './pop-entity-field-entries.component.scss' ]\n} )\nexport class PopEntityFieldEntriesComponent extends PopExtendComponent implements OnInit, OnDestroy {\n  @Input() field: FieldInterface;\n  @Input() scheme: EntitySchemeSectionInterface = null;\n  public name = 'PopEntityFieldEntriesComponent';\n\n  protected srv = {\n    action: <PopEntityActionService>ServiceInjector.get( PopEntityActionService ),\n    dialog: <MatDialog>ServiceInjector.get( MatDialog ),\n    field: <PopFieldEditorService>undefined,\n    request: <PopRequestService>ServiceInjector.get( PopRequestService ),\n    tab: <PopTabMenuService>ServiceInjector.get( PopTabMenuService ),\n  };\n\n  protected asset = {\n    basePath: <string>undefined,\n    entries: <FieldEntry[]>[],\n    entriesMap: <KeyMap<number>>{},\n    schemeFieldStorage: <any>undefined,\n    type: <string>undefined,\n    typeOption: <Dictionary<{ defaultValue: string | number, options: FieldItemOption[] }>>undefined,\n  };\n\n  public ui = {\n    label: <InputConfig>undefined,\n    minMax: <MinMaxConfig>undefined,\n    editLabel: <SwitchConfig>undefined,\n    uniqueLabel: <CheckboxConfig>undefined,\n    customLabel: <CheckboxConfig>undefined,\n    entries: <FieldEntrySession[]>[],\n    map: < Dictionary<any>>{},\n    entryLimit: 4\n  };\n\n\n  protected extendServiceContainer(){\n    this.srv.field = this._fieldRepo;\n    // delete this._fieldRepo;\n  }\n\n\n  constructor(\n    public el: ElementRef,\n    protected _domRepo: PopDomService,\n    protected _fieldRepo: PopFieldEditorService,\n    protected _tabRepo: PopTabMenuService\n  ){\n    super();\n\n    this.extendServiceContainer();\n    /**\n     * This should transform and validate the data. The view should try to only use data that is stored on ui so that it is not dependent on the structure of data that comes from other sources. The ui should be the source of truth here.\n     */\n    this.dom.configure = (): Promise<boolean> => {\n      return new Promise( ( resolve ) => {\n        this.core = IsObjectThrowError( this.core, true, `${this.name}:configureDom: - this.core` ) ? this.core : null;\n        if( !this.field ) this.field = IsObjectThrowError( this.core, [ 'entity' ], `Invalid Core` ) && IsObjectThrowError( this.core.entity, [ 'id', 'fieldgroup' ], `Invalid Field` ) ? <FieldInterface>this.core.entity : null;\n        this.asset.type = this.field.fieldgroup.name; // the field group name , ie.. address, phone\n        this.asset.typeOption = this.srv.field.getDefaultLabelTypeOptions(); // the select options that belong to the types\n        this.asset.basePath = `fields/${this.field.id}/entries`; // api endpoint to hit for field entries\n\n        this._setCustomTraits();\n\n        this.ui.entries = IsArrayThrowError( this.core.entity.entries, false, `Invalid Field Entries` ) ? this.core.entity.entries : null;\n\n\n        this.dom.session.controls = new Map(); // store the entry configs so that changes are not lost when the tabs are changed\n\n        this._buildCustomSettings();\n\n\n        return resolve( true );\n      } );\n    };\n\n    this.dom.proceed = (): Promise<boolean> => {\n      return new Promise( async( resolve ) => {\n\n        if( IsObject( this.scheme, true ) ){\n          this.asset.schemeFieldStorage = this.srv.field.getSchemeFieldSetting( this.scheme, +this.field.id );\n          this.dom.state.hasScheme = IsObject( this.scheme, true ) ? true : false;\n          const primary = this.srv.field.getSchemePrimary( this.scheme );\n\n          this.dom.state.isPrimary = this.field.fieldgroup.name in primary && +primary[ this.field.fieldgroup.name ] == this.field.id ? true : false;\n        }else{\n          this.dom.state.hasScheme = false;\n          this.dom.state.isPrimary = false;\n        }\n        await this._showEntries();\n\n        return resolve( true );\n      } );\n    };\n  }\n\n\n  /**\n   * This component should have a specific purpose\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * This allows the user to sort the list of options that this field uses\n   * @param event\n   */\n  onOptionSortDrop( event: CdkDragDrop<string[]> ){\n    moveItemInArray( this.ui.entries, event.previousIndex, event.currentIndex );\n    this.dom.setTimeout( `update-sort-order`, async() => {\n      const requests = [];\n      this.ui.entries.map( ( entry: FieldEntrySession, index ) => {\n        requests.push( PopRequest.doPatch( `${this.asset.basePath}/${entry.id}`, { sort_order: index, orphaned: -1 }, 1, false ) );\n        const session = this.field.entries.find( ( e: FieldEntry ) => +e.id === +entry.id );\n        if( IsObject( session, true ) ){\n          session.sort_order = index;\n        }\n        entry.increment = index + 1;\n      } );\n      if( requests.length ){\n        this.srv.tab.showAsLoading( true );\n        this.dom.setSubscriber( `update-sort-order`, forkJoin( requests ).subscribe( ( res ) => {\n          this.srv.field.triggerFieldPreviewUpdate();\n          this.srv.tab.showAsLoading( false );\n        }, ( err ) => {\n          this.dom.setError( err, true );\n          this.srv.tab.showAsLoading( false );\n        } ) );\n      }\n    }, 0 );\n\n    // this.triggerSaveFieldOptions( <PopBaseEventInterface>{ name: 'onChange' } );\n  }\n\n\n  /**\n   * When the type of an entry is changed in the database, make sure the changes is updated locally\n   * This is will  be removed since we don't want to do types\n   * @param index\n   * @param event\n   */\n  onEntryTypeChange( index: number, event: PopBaseEventInterface ){\n    if( IsValidFieldPatchEvent( this.core, event ) ){\n      const config = this.ui.entries[ index ];\n      const entry = this.field.entries[ index ];\n      const session = this.dom.session.controls.get( index );\n      if( entry && session ){\n        entry.type = config.type.control.value;\n        this._updateEntryTypeSession( session.type, entry );\n        this.dom.session.controls.set( index, session );\n        this.setDomSession( index, session );\n      }\n      setTimeout( () => {\n        this.srv.field.triggerFieldPreviewUpdate();\n      }, 0 );\n    }\n  }\n\n\n  /**\n   * When the display/label of an entry is changed in the database, make sure the changes is updated locally\n   * @param index\n   * @param event\n   */\n  onEntryDisplayChange( index: number, event: PopBaseEventInterface ){\n    if( index === 0 ) this.ui.label.control.setValue( event.config.control.value, { emitEvent: false } );\n    if( IsValidFieldPatchEvent( this.core, event ) ){\n      // PopTemplate.buffer();\n      const entry = this.field.entries[ index ];\n      const session = this.dom.session.controls.get( index );\n      if( entry && session ){\n        entry.name = event.config.control.value;\n        this._updateEntryDisplaySession( session.display, entry );\n        this.dom.session.controls.set( index, session );\n        this.setDomSession( index, session );\n      }\n    }\n    setTimeout( () => {\n      this.srv.field.triggerFieldPreviewUpdate();\n    }, 0 );\n  }\n\n\n  /**\n   * When the display/label of an entry is changed in the database, make sure the changes is updated locally\n   * @param index\n   * @param event\n   */\n  onEntryActiveChange( index: number, event: PopBaseEventInterface ){\n    if( IsObject( this.scheme, [ 'id' ] ) ){\n      // here\n    }else{\n      const entry = this.field.entries[ index ];\n      if( entry ){\n        if( event.config.control.value ){\n          entry.orphaned = false;\n          entry.orphaned_at = null;\n        }else{\n          entry.orphaned = true;\n          entry.orphaned_at = PopDate.toIso( new Date() );\n        }\n      }\n      setTimeout( () => {\n        this._handleMultipleEntries();\n        this.srv.field.triggerFieldPreviewUpdate();\n      }, 0 );\n      this.log.info( `onEntryActiveChange`, event );\n    }\n  }\n\n\n  onEntryTraitChange( index: number, trait: { name: string, selected: boolean } ){\n    this.dom.setTimeout( `entry-trait-${index}`, async() => {\n      this.ui.entries.map( ( entry: FieldEntrySession, entryIndex: number ) => {\n        const entryTrait = entry.traits.find( ( t ) => t.name === trait.name );\n        if( IsObject( entryTrait, true ) ){\n          if( +entryIndex !== +index ){\n            entryTrait.selected = false;\n          }else{\n            entryTrait.selected = true;\n            if( IsObject( this.scheme, [ 'mapping' ] ) ){\n              if( IsObject( this.asset.schemeFieldStorage, [ 'trait_entry' ] ) ){\n                this.asset.schemeFieldStorage.trait_entry[ entryTrait.name ] = entry.id;\n              }\n            }\n          }\n        }\n      } );\n\n      await this.srv.field.updateSchemeFieldMapping( this.scheme );\n\n      this.log.info( `onEntryTraitChange` );\n    } );\n\n  }\n\n\n  private _handleMultipleEntries(){\n    this.log.info( `_handleMultipleEntries` );\n    this.dom.session.multipleActiveEntries = this._isMultipleActiveEntries();\n    if( !( this.dom.session.multipleActiveEntries ) ){\n      this._disableActiveEntries();\n    }else{\n      this._enableActiveEntries();\n    }\n  }\n\n\n  /**\n   * A User will be able to add as many labels as they like\n   */\n  onAddEntryValue(){\n    this.dom.setTimeout( `add-entry`, async() => {\n      const action = <EntityActionInterface>{\n        name: 'entry',\n        header: 'Add Entry',\n        facade: true,\n        // component: {\n        //   type: DemoOneComponent\n        // },\n        fields: {\n          name: {\n            form: 'input',\n            pattern: 'Default',\n            name: 'name',\n            hint: true,\n            label: 'Name',\n            required: true,\n            bubble: false,\n            noInitialValue: true,\n            transformation: 'toTitleCase',\n            maxlength: 32,\n            prevent: this.ui.entries.map( ( entry: FieldEntrySession ) => {\n              return StorageGetter( entry, [ 'display', 'control', 'value' ], 'Undefined' );\n            } )\n          }\n        },\n        // onEvent: (core: CoreConfig, event: PopBaseEventInterface):Promise<boolean>=>{\n        //   return new Promise<boolean>((onEventResolver)=>{\n        //     return onEventResolver(true);\n        //   });\n        // },\n        bubbleAll: true,\n        blockEntity: true\n      };\n      const res = await this.srv.action.do( this.core, action );\n      if( IsObject( res, [ 'name' ] ) ){\n        await this._addEntry( res.name );\n      }\n    }, 0 );\n\n  }\n\n\n  private _addEntry( name?: string ): Promise<boolean>{\n    return new Promise<boolean>( ( resolve ) => {\n      this.srv.tab.showAsLoading( true );\n      this.dom.state.pending = true;\n      const sessionIndex = this.field.entries.filter( ( x ) => x.type !== 'custom' ).length;\n      const increment = sessionIndex + 1;\n      const session = this.dom.session.controls.get( sessionIndex );\n      if( !name ){\n        name = session ? session.display.value : TitleCase( `${( this.field.name ? this.field.name : this.asset.type )} ${increment}` )\n      }\n      const entry = {\n        name: name,\n        type: this.asset.typeOption.defaultValue,\n        orphaned_at: null,\n        sort_order: sessionIndex\n      };\n      this._makeApiRequests( [\n        this.srv.request.doPost( `${this.asset.basePath}`, entry, 1, false ),\n        this.srv.request.doPatch( `fields/${this.field.id}`, { multiple_min: increment, multiple_max: increment }, 1, false ),\n      ] ).then( ( res ) => {\n        this._setEntrySessionControls( this.field.entries.filter( ( x ) => x.type !== 'custom' ) ).then( ( entries: FieldEntry[] ) => {\n          this._setEntries( entries ).then( () => {\n            this.dom.state.pending = false;\n            setTimeout( () => {\n              // For now I want the amount of field entries to dictate what min/max should be\n              this.field.multiple_min = increment;\n              this.field.multiple_max = increment;\n\n              this.ui.minMax.minConfig.max = this.field.entries.length;\n              this.ui.minMax.minConfig.min = this.field.entries.length;\n              this.ui.minMax.minConfig.control.setValue( this.field.entries.length );\n\n\n              this.ui.minMax.maxConfig.max = this.field.entries.length;\n              this.ui.minMax.maxConfig.min = this.field.entries.length;\n              this.ui.minMax.maxConfig.control.setValue( this.field.entries.length );\n\n              // this.ui.minMax.triggerOnChange();\n              this.srv.field.triggerFieldPreviewUpdate();\n              this.srv.tab.showAsLoading( false );\n              return resolve( true );\n            }, 0 );\n          } );\n        } );\n      }, ( err ) => {\n        this.dom.setError( err, true );\n        this.srv.tab.showAsLoading( false );\n        return resolve( false );\n      } );\n    } );\n  }\n\n\n  private _collectNewEntryName(){\n    const fields = {\n      client_id: {\n        form: 'select',\n        name: 'client_id',\n        label: 'Client',\n        bubble: true,\n        disabled: false,\n        required: true,\n        options: {\n          resource: 'clients',\n          child: 'account_id'\n        },\n      },\n    };\n\n    const actionConfig: EntityActionInterface = {\n      header: 'Add New Field Entry',\n      name: 'campaign',\n      fields: {\n        ...fields\n      },\n      submitText: 'Submit',\n      postUrl: null,\n      blockEntity: true, // implies that fields should not be inherited from the original field.ts file\n    };\n\n    this.dom.setTimeout( `collect-name`, async() => {\n      const setCampaign = await this.srv.action.do( this.core, actionConfig );\n      this.log.info( 'setCampaign', setCampaign );\n\n      this.srv.tab.showAsLoading( false );\n    }, 0 );\n  }\n\n\n  /**\n   * A User will be able to remove labels as they like\n   */\n  onRemoveEntryValue( entry: FieldEntrySession ){\n    if( entry && entry.id ){\n      this.srv.dialog.open( PopConfirmationDialogComponent, {\n        width: '500px',\n        data: {\n          option: null,\n          body: `Deleting ${entry.display.control.value} will result in any collected values on this entry being permanently removed.<br><br>Do you wish to continue?`,\n          align: 'left'\n        }\n      } ).afterClosed().subscribe( res => {\n        if( res && res.confirmed ){\n          // PopTemplate.buffer();\n          this.dom.state.pending = true;\n          const decrement = this.field.entries.length - 1;\n          this.srv.request.doDelete( `${this.asset.basePath}/${entry.id}` );\n          this._makeApiRequests( [\n            this.srv.request.doDelete( `${this.asset.basePath}/${entry.id}` ),\n            this.srv.request.doPatch( `fields/${this.field.id}`, { multiple_min: decrement, multiple_max: decrement }, 1, false ),\n          ] ).then( () => {\n            this._setEntrySessionControls( this.field.entries.filter( ( x ) => x.type !== 'custom' ) ).then( ( entries: FieldEntry[] ) => {\n              this._setEntries( entries ).then( () => {\n                this.dom.state.pending = false;\n                setTimeout( () => {\n                  // For now I want the amount of field entries to dictate what min/max should be\n                  this.field.multiple_min = decrement;\n                  this.field.multiple_max = decrement;\n\n                  this.ui.minMax.minConfig.max = this.field.entries.length;\n                  this.ui.minMax.minConfig.min = this.field.entries.length;\n                  this.ui.minMax.minConfig.control.setValue( this.field.entries.length );\n\n\n                  this.ui.minMax.maxConfig.max = this.field.entries.length;\n                  this.ui.minMax.maxConfig.min = this.field.entries.length;\n                  this.ui.minMax.maxConfig.control.setValue( this.field.entries.length );\n                  // Tmp Block ^\n\n                  this.srv.field.triggerFieldPreviewUpdate();\n                }, 0 );\n              } );\n            } );\n          } );\n        }\n      } );\n\n    }\n  }\n\n\n  onMinMaxSetting( event: PopBaseEventInterface ){\n    if( IsValidFieldPatchEvent( this.core, event ) ){\n      this.srv.field.triggerFieldPreviewUpdate();\n    }\n  }\n\n\n  /**\n   * The dom destroy function manages all the clean up that is necessary if subscriptions, timeouts, etc are stored properly\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n  private _setCustomTraits(){\n    this.field.trait.map( ( trait: FieldCustomSettingInterface ) => {\n      if( !trait.label ) trait.label = TitleCase( SnakeToPascal( trait.name ) );\n    } );\n  }\n\n\n  /**\n   * Build the configs for the set of custom settings that this component uses\n   * @private\n   */\n  private _buildCustomSettings(){\n\n    this.ui.minMax = new MinMaxConfig(\n      {\n        bubble: true,\n        helpText: 'Set the minimum values that this field should have, the maximum amount of values will be the total entries defined.',\n        label: 'Entry Values',\n        minRequired: true,\n        maxRequired: true,\n        minValue: this.field.entries.length,\n        maxValue: this.field.entries.length,\n        min: this.field.entries.length,\n        max: this.field.entries.length,\n        limit: 10,\n        minLabel: 'Minimum',\n        maxLabel: 'Maximum',\n        maxColumn: 'multiple_max',\n        minColumn: 'multiple_min',\n        maxReadonly: true,\n        patch: {\n          field: 'n/a',\n          path: `fields/${this.field.id}`,\n          callback: ( core: CoreConfig, event: PopBaseEventInterface ) => {\n            const newValue = event.config.control.value;\n            Object.keys( newValue ).map( ( key: string ) => {\n              this.field[ key ] = newValue[ key ];\n            } );\n\n          }\n        }\n      } );\n\n\n    this.ui.label = new InputConfig(// Piggy back off of the first entry label\n      {\n        label: 'Label',\n        value: this.field.entries[ 0 ].name,\n        facade: false,\n        maxlength: 24,\n        patch: {\n          field: `name`,\n          path: `fields/${this.field.id}/entries/${this.field.entries[ 0 ].id}`,\n          callback: ( core: CoreConfig, event: PopBaseEventInterface ) => {\n            this.onEntryDisplayChange( 0, event );\n          }\n        }\n      } );\n\n    // The edit label setting will determine if the end-user is able to change the the label\n    const editLabelSetting = IsObject( this.field.custom_setting.edit_label, true ) ? this.field.custom_setting.edit_label : null;\n    if( editLabelSetting ){\n      this.ui.editLabel = new SwitchConfig(\n        {\n          name: 'edit_label',\n          helpText: editLabelSetting.helpText,\n          label: editLabelSetting.label,\n          labelPosition: 'after',\n          value: <boolean>editLabelSetting.value,\n          metadata: {\n            setting: editLabelSetting,\n          },\n          facade: true,\n          patch: {\n            field: 'value',\n            path: ``,\n            callback: ( core: CoreConfig, event: PopBaseEventInterface ) => {\n              this.srv.field.storeCustomSetting( this.core, event ).then( ( res ) => {\n                if( IsString( res ) ){\n                  this.ui.editLabel.message = <string>res;\n                }else{\n                  this.srv.field.triggerFieldPreviewUpdate();\n                }\n              } );\n            }\n          }\n        } );\n    }\n\n    // The custom label setting will allow the user to add their own custom label to fit their needs, should only show if edit label setting is true\n    const customLabelSetting = IsObject( this.field.custom_setting.custom_label, true ) ? this.field.custom_setting.custom_label : null;\n    if( customLabelSetting ){\n      this.ui.customLabel = new CheckboxConfig(\n        {\n          name: 'custom_label',\n          facade: true,\n          helpText: customLabelSetting.helpText,\n          label: customLabelSetting.label,\n          labelPosition: 'after',\n          value: <boolean>customLabelSetting.value,\n          metadata: {\n            setting: customLabelSetting,\n          },\n          patch: {\n            field: 'value',\n            path: ``,\n            callback: ( core: CoreConfig, event: PopBaseEventInterface ) => {\n              this.srv.field.storeCustomSetting( this.core, event ).then( ( res ) => {\n                if( IsString( res ) ){\n                  this.ui.customLabel.message = <string>res;\n                }else{\n                  this._onCustomLabelChange( this.ui.customLabel.control.value ).then( () => {\n                    this.srv.field.triggerFieldPreviewUpdate();\n                  } );\n                }\n              } );\n            }\n          }\n        } );\n    }\n\n    // The unique label setting will force all of the field values to use a unique label, should only show if edit label setting is true\n    const uniqueLabelSetting = IsObject( this.field.custom_setting.unique_label, true ) ? this.field.custom_setting.unique_label : null;\n    if( uniqueLabelSetting ){\n\n      this.ui.uniqueLabel = new CheckboxConfig(\n        {\n          name: 'unique_label',\n          facade: true,\n          helpText: uniqueLabelSetting.helpText,\n          label: uniqueLabelSetting.label,\n          labelPosition: 'after',\n          value: <boolean>uniqueLabelSetting.value,\n          metadata: {\n            setting: uniqueLabelSetting,\n          },\n          patch: {\n            field: 'value',\n            path: ``,\n            callback: ( core: CoreConfig, event: PopBaseEventInterface ) => {\n              this.srv.field.storeCustomSetting( this.core, event ).then( ( res ) => {\n                if( IsString( res ) ){\n                  this.ui.uniqueLabel.message = <string>res;\n                }else{\n                  this.srv.field.triggerFieldPreviewUpdate();\n                }\n              } );\n            }\n          }\n        } );\n    }\n\n  }\n\n\n  /**\n   * A User will be able to add as many labels as they like\n   */\n  private _onCustomLabelChange( value: boolean ): Promise<boolean>{\n    return new Promise<boolean>( ( resolve ) => {\n      this.dom.state.pending = true;\n\n      if( value ){\n        let hasCustom = false;\n        this.field.entries.map( ( item: FieldEntry ) => {\n          if( item.type == 'custom' ) hasCustom = true;\n        } );\n        if( !hasCustom ){\n          const entry = {\n            name: 'Custom',\n            type: 'custom'\n          };\n          this._makeApiRequests( [ this.srv.request.doPost( `${this.asset.basePath}`, entry, 1, false ) ] ).then( ( res ) => {\n            this._setEntrySessionControls( this.field.entries.filter( ( x ) => x.type !== 'custom' ) ).then( ( entries: FieldEntry[] ) => {\n              this._setEntries( entries ).then( () => {\n                this.dom.state.pending = false;\n                setTimeout( () => {\n                  this.srv.field.triggerFieldPreviewUpdate();\n                  return resolve( true );\n                }, 0 );\n              } );\n            } );\n          } );\n        }else{\n          setTimeout( () => {\n            this.dom.state.pending = false;\n            this.srv.field.triggerFieldPreviewUpdate();\n            return resolve( true );\n          }, 0 );\n        }\n\n      }else{\n        const requests = [];\n        this.field.entries.filter( ( entry ) => {\n          if( entry.type === 'custom' ){\n            requests.push( this.srv.request.doDelete( `${this.asset.basePath}/${entry.id}`, null, 1, false ) );\n            return false;\n          }else{\n            return true;\n          }\n        } );\n        if( requests.length ){\n          this._makeApiRequests( requests ).then( ( res ) => {\n            this._setEntrySessionControls( this.field.entries.filter( ( x ) => x.type !== 'custom' ) ).then( ( entries: FieldEntry[] ) => {\n              this._setEntries( entries ).then( () => {\n                this.dom.state.pending = false;\n                setTimeout( () => {\n                  this.srv.field.triggerFieldPreviewUpdate();\n                }, 0 );\n              } );\n            } );\n          } );\n        }\n\n\n        return resolve( true );\n      }\n    } );\n  }\n\n\n  /**\n   * Produce a list of the entry values for this field\n   */\n  private _showEntries(): Promise<boolean>{\n    return new Promise<boolean>( async( resolve ) => {\n      this._setValueEntries().then( ( entries: FieldEntry[] ) => {\n        this._setEntrySessionControls( entries ).then( ( res: FieldEntry[] ) => {\n          this._setEntries( res ).then( () => {\n            this.dom.state.pending = false;\n            return resolve( true );\n          } );\n        } );\n      } );\n\n    } );\n\n  }\n\n\n  /**\n   * Ensure that the database records match the min/max settings\n   * This will remove any excess records in the database that exceed the multiple_min\n   * This will create records for an entries that are needed in the database\n   * @param patch\n   */\n  private _setValueEntries(): Promise<FieldEntry[]>{\n    return new Promise<FieldEntry[]>( ( resolve ) => {\n      const provided = DeepCopy( this.field.entries ).filter( ( entry ) => {\n        return entry.type !== 'custom';\n      } );\n      const entries = [ ...provided ];\n      return resolve( entries );\n    } );\n  }\n\n\n  /**\n   * Will make all of the needed api requests\n   * @param requests\n   * @private\n   */\n  private _makeApiRequests( requests: Observable<any>[] ): Promise<FieldEntry[]>{\n    return new Promise<FieldEntry[]>( ( resolve ) => {\n      // PopTemplate.buffer();\n      forkJoin( requests ).subscribe( () => {\n        this.srv.request.doGet( this.asset.basePath ).subscribe( ( res ) => {\n          res = res.data ? res.data : res;\n          this.field.entries = IsArray( res, true ) ? <FieldEntry[]>res : [];\n          this.core.entity.entries = JSON.parse( JSON.stringify( this.field.entries ) )\n          resolve( res );\n        } );\n      }, ( err ) => {\n        PopLog.error( this.name, `_makeApiRequests`, GetHttpErrorMsg( err ) );\n        resolve( [] );\n      } );\n    } );\n  }\n\n\n  /**\n   * Store a set of controls that can store values as the user changes the settings\n   * @private\n   */\n  private _setEntrySessionControls( entries: FieldEntry[] ): Promise<FieldEntry[]>{\n    return new Promise( ( resolve ) => {\n      let index = 0;\n      entries.map( ( entry: FieldEntry ) => {\n        if( entry.type !== 'custom' ){\n          if( !( IsDefined( entry.orphaned ) ) ) entry.orphaned = IsDefined( entry.orphaned_at, false );\n          const session = this.dom.session.controls.has( index ) ? this.dom.session.controls.get( index ) : {\n            id: entry ? entry.id : null,\n            type: this._getEntryTypeConfig( entry ),\n            display: this._getEntryDisplayConfig( entry ),\n            active: this._getEntryActiveConfig( entry ),\n            increment: index + 1,\n          };\n          this._updateSessionControl( index, session, entry );\n          index++;\n        }\n      } );\n\n\n      return resolve( entries );\n    } );\n  }\n\n\n  /**\n   * Update the entry config to use the stored record, and update the sessions for it\n   * @param index\n   * @param session\n   * @param entry\n   * @private\n   */\n  private _updateSessionControl( index: number, session: FieldEntrySession, entry: FieldEntry = null ){\n    session.increment = index + 1;\n    session.id = entry ? entry.id : null;\n    this._updateEntryTypeSession( session.type, entry );\n    this._updateEntryDisplaySession( session.display, entry );\n    this.dom.session.controls.set( index, session );\n    this.setDomSession( index, session );\n    return session;\n  }\n\n\n  /**\n   * Update the entry type config to use correct value and path\n   * @param config\n   * @param entry\n   * @private\n   */\n  private _updateEntryTypeSession( config: SelectConfig, entry: FieldEntry = null ){\n    // config.value = entry ? entry.type : this.asset.type in this.asset.typeOption ? this.asset.typeOption[ this.asset.type ].defaultValue : 'n/a';\n    // config.control.setValue( config.value, { emitEvent: false } );\n    // config.patch.path = entry ? `${this.asset.basePath}/${entry.id}` : null;\n  }\n\n\n  /**\n   * Update the entry display config to use correct value and path\n   * @param config\n   * @param entry\n   * @private\n   */\n  private _updateEntryDisplaySession( config: InputConfig, entry: FieldEntry = null ){\n    // config.value = entry ? entry.name : '';\n    // config.control.setValue( config.value, { emitEvent: false } );\n    // config.patch.path = entry ? `${this.asset.basePath}/${entry.id}` : null;\n  }\n\n\n  /**\n   * Update the entry active config to use correct value and path\n   * @param config\n   * @param entry\n   * @private\n   */\n  private _updateEntryActiveSession( config: InputConfig, entry: FieldEntry = null ){\n\n  }\n\n\n  /**\n   * Store each entry config in a dom session so that it can be restored when the users is switching tabs\n   * @param index\n   * @param session\n   */\n  private setDomSession( index: number, session: FieldEntrySession ){\n    const domStorage = <any>StorageGetter( this.dom.repo, [ 'components', this.name, this.id + '', 'session' ] );\n    if( IsObject( domStorage, [ 'controls' ] ) ){\n      const controls = <Map<number, FieldEntrySession>>domStorage.controls;\n      controls.set( index, session );\n    }\n  }\n\n\n  /**\n   * Set entry config objects that will be used in the html template\n   * @private\n   */\n  private _setEntries( entries: FieldEntry[] ): Promise<boolean>{\n    return new Promise<boolean>( async( resolve ) => {\n      this.ui.entries = [];\n      this.asset.entries = IsArray( entries, true ) ? entries.filter( ( e ) => e.type !== 'custom' ) : [];\n      this.asset.entriesMap = ArrayMapSetter( this.asset.entries, 'id' );\n      this.dom.state.hasMultipleEntries = this.asset.entries.length > 1;\n      await this._checkFieldEntryTraits();\n\n      return resolve( true );\n    } );\n\n  }\n\n\n  /**\n   * Manage the type of each entry\n   * @param ind\n   * @private\n   */\n  private _getEntryTypeConfig( entry: FieldEntry ){\n    let disabled = false;\n    let options = this.asset.type in this.asset.typeOption ? this.asset.typeOption[ this.asset.type ].options : [];\n    if( !IsArray( options, true ) ){\n      options = [ { value: 'n/a', name: 'N/A' } ];\n      disabled = true;\n    }\n    return new SelectConfig( {\n      label: 'Type',\n      options: { values: options },\n      disabled: disabled,\n      patch: {\n        field: 'type',\n        path: entry && entry.id ? `${this.asset.basePath}/${entry.id}` : null,\n      }\n    } );\n  }\n\n\n  /**\n   * Manage the type of each entry\n   * @param ind\n   * @private\n   */\n  private _getSessionEntryTraits( entry: FieldEntry ){\n    const traits = [];\n    if( IsObject( this.scheme, [ 'id', 'mapping' ] ) ){\n      const traitEntryMapping = this.asset.schemeFieldStorage.trait_entry;\n      const disabledEntries = this.asset.schemeFieldStorage.disabled_entries;\n      if( IsObject( this.field, true ) && IsArray( this.field.trait, true ) ){\n        this.field.trait.map( ( trait: FieldCustomSettingInterface ) => {\n          traits.push( {\n            name: trait.name,\n            disabled: disabledEntries.includes(entry.id),\n            selected: +traitEntryMapping[ trait.name ] === entry.id\n          } );\n        } );\n\n      }\n    }\n    return traits;\n  }\n\n\n  private _checkFieldEntryTraits(): Promise<boolean>{\n    return new Promise( async( resolve ) => {\n      if( this.dom.state.isPrimary && IsArray( this.field.trait, true ) ){\n        let updateNeeded = false;\n        const disabledEntries = this.asset.schemeFieldStorage.disabled_entries;\n        const activeEntry = IsArray( this.asset.entries, true ) ? this.asset.entries.find( entry => {\n          return !( disabledEntries.includes( entry.id ) ) && !entry.orphaned_at;\n        } ) : null;\n        if( IsObject( activeEntry, [ 'id' ] ) ){\n\n          const traitEntryMapping = this.asset.schemeFieldStorage.trait_entry;\n          this.field.trait.map( ( trait ) => {\n            if( IsUndefined( traitEntryMapping[ trait.name ] ) || !( traitEntryMapping[ trait.name ] in this.asset.entriesMap ) || disabledEntries.includes( +traitEntryMapping[ trait.name ] ) ){\n              traitEntryMapping[ trait.name ] = activeEntry.id;\n              updateNeeded = true;\n            }\n          } );\n          if( updateNeeded ){\n            await this.srv.field.updateSchemeFieldMapping( this.scheme );\n          }\n        }\n\n        if( this.dom.session.controls ){\n          this.ui.entries = [];\n          // this.dom.setTimeout( `reset-entries`, () => {\n          this.asset.entries.map( ( entry, index ) => {\n            const sessionEntry = this.dom.session.controls.get( index );\n            if( this.dom.state.isPrimary ) sessionEntry.traits = this._getSessionEntryTraits( entry );\n            if( !this.scheme || !entry.orphaned_at ) this.ui.entries.push( sessionEntry );\n          } );\n          this._handleMultipleEntries();\n          return resolve( true );\n          // }, 0 );\n\n        }\n      }else{\n        if( this.dom.session.controls ){\n          this.ui.entries = [];\n          this.asset.entries.map( ( entry, index ) => {\n            const sessionEntry = this.dom.session.controls.get( index );\n            if( !this.scheme || !entry.orphaned_at ) this.ui.entries.push( sessionEntry );\n          } );\n          this._handleMultipleEntries();\n        }\n        return resolve( true );\n      }\n\n    } );\n  }\n\n\n  /**\n   * Manage the type of each entry\n   * @param ind\n   * @private\n   */\n  private _getEntryActiveConfig( entry: FieldEntry ){\n    let value = !entry.orphaned;\n    if( IsObject( this.scheme, true ) ){\n      if( this.asset.schemeFieldStorage.disabled_entries.includes( entry.id ) ){\n        value = false;\n      }\n    }\n    return new SwitchConfig( {\n      label: '',\n      value: value,\n      empty: 'ConvertEmptyToNull',\n      tooltip: 'Toggle Visibility',\n      facade: true,\n      metadata: {\n        entry: entry\n      },\n      // disabled: this.dom.state.hasScheme ? true : false,\n      patch: {\n        field: 'orphaned_at',\n        path: '',\n        duration: 0,\n        displayIndicator: false,\n        callback: async( core: CoreConfig, event: PopBaseEventInterface ) => {\n          this.srv.tab.showAsLoading( true );\n          if( IsObject( this.scheme, [ 'id' ] ) ){\n            if( event.config.control.value ){ // remove from disabled\n              this.asset.schemeFieldStorage.disabled_entries.splice( ( <number[]>this.asset.schemeFieldStorage.disabled_entries ).indexOf( +entry.id ), 1 );\n\n            }else{ // add to disabled\n              this.asset.schemeFieldStorage.disabled_entries.push( +entry.id );\n            }\n            console.log( 'here', entry.id, this.asset.schemeFieldStorage.disabled_entries );\n            await this._checkFieldEntryTraits();\n            await this.srv.field.updateSchemeFieldMapping( this.scheme );\n            this.srv.tab.showAsLoading( false );\n\n          }else{\n            const orphaned = event.config.control.value ? null : true;\n            this.dom.setTimeout( `update-orphaned-at-${entry.id}`, PopRequest.doPatch( `${this.asset.basePath}/${entry.id}`, { orphaned: orphaned }, 1, false ).subscribe( ( res ) => {\n              res = GetHttpObjectResult( res );\n              this.log.info( `_getEntryActiveConfig`, res );\n              this.srv.tab.showAsLoading( false );\n            }, ( err ) => {\n              this.dom.setError( err, true );\n              this.srv.tab.showAsLoading( false );\n            } ) );\n          }\n\n        }\n      }\n    } );\n  }\n\n\n  /**\n   * Manage the display of each entry\n   * @param index\n   * @private\n   */\n  private _getEntryDisplayConfig( entry: FieldEntry ){\n//     console.log( '_getEntryDisplayConfig', entry );\n    return new InputConfig( {\n      label: 'Entry Name',\n      value: entry && entry.name ? entry.name : '',\n      transformation: 'toTitleCase',\n      disabled: this.dom.state.hasScheme ? true : false,\n      patch: {\n        field: 'name',\n        path: entry && entry.id ? `${this.asset.basePath}/${entry.id}` : null,\n        metadata: {\n          orphaned: -1\n        }\n      },\n      maxlength: 20,\n      // validators: [ Validators.required ],\n      // minimal: true\n    } );\n  }\n\n\n  private _isMultipleActiveEntries(): boolean{\n    let active = 0;\n    this.ui.entries.map( ( entry ) => {\n      if( StorageGetter( entry, [ 'active', 'control', 'value' ], false ) ){\n        active++;\n      }\n    } );\n    this.log.info( `_isMultipleActiveEntries`, active );\n    return active > 1;\n  }\n\n\n  private _disableActiveEntries(){\n    this.log.info( `_disableActiveEntries` );\n    this.ui.entries.map( ( entry: FieldEntrySession ) => {\n      if( StorageGetter( entry, [ 'active', 'control', 'value' ], false ) ){\n        entry.active.disabled = true;\n        entry.active.control.disable();\n      }\n    } );\n  }\n\n\n  private _enableActiveEntries(){\n    this.log.info( `_enableActiveEntries` );\n    this.ui.entries.map( ( entry: FieldEntrySession ) => {\n      if( StorageGetter( entry, [ 'active', 'control', 'value' ], false ) ){\n        entry.active.disabled = false;\n        entry.active.control.enable();\n      }\n    } );\n  }\n}\n\n\nexport interface FieldEntrySession {\n  id: number;\n  type: SelectConfig;\n  display: InputConfig;\n  active: SwitchConfig;\n  traits?: { name: string, selected: boolean }[];\n  increment: number;\n}\n","import { Component, ElementRef, Inject, Input, OnDestroy, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { TableConfig } from '../../base/pop-table/pop-table.model';\nimport { EntityTabListExtendInterface } from './pop-entity-tab-list.model';\nimport { PopDomService } from '../../../services/pop-dom.service';\nimport { AppGlobalInterface, CoreConfig, Entity, PopBusiness, PopEntity, PopPipe, PopTemplate } from '../../../pop-common.model';\nimport {\n  GetHttpObjectResult,\n  GetSessionSiteVar,\n  IsArray,\n  IsObject,\n  TitleCase\n} from '../../../pop-common-utility';\nimport { PopEntityListComponent } from '../pop-entity-list/pop-entity-list.component';\nimport { PopTabMenuService } from '../../base/pop-tab-menu/pop-tab-menu.service';\n\n\n@Component( {\n  selector: 'lib-pop-entity-tab-list',\n  styleUrls: [ './pop-entity-tab-list.component.scss' ],\n  templateUrl: './pop-entity-tab-list.component.html',\n} )\nexport class PopEntityTabListComponent extends PopEntityListComponent implements OnInit, OnDestroy {\n  @Input() internal_name: string;\n  @Input() parentId: number;\n  @Input() parent: string;\n  @Input() param: string;\n  @Input() extension: EntityTabListExtendInterface;\n\n  public name = 'PopEntityTabListComponent';\n\n\n  constructor(\n    public el: ElementRef,\n    protected route: ActivatedRoute,\n    protected _domRepo: PopDomService,\n    protected _tabRepo: PopTabMenuService,\n    @Inject( 'APP_GLOBAL' ) public APP_GLOBAL: AppGlobalInterface,\n  ){\n    super( el, route, _domRepo, APP_GLOBAL );\n  }\n\n\n  /**\n   * This component will display a list of entities that the user can interact with\n   */\n  ngOnInit(){\n    super.ngOnInit();\n  }\n\n\n  /**\n   * Clean up the dom of this component\n   */\n  ngOnDestroy(){\n    super.ngOnDestroy();\n\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Protected Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n  /**\n   * Allow for a CoreConfig to be passed in\n   * If a CoreConfig does not exits this component needs to be able to create it for itself, uses the internal_name that comes directly for the route\n   * or tries to extrapolate it from the current url of the app\n   *\n   */\n  protected _setCoreConfig(): Promise<boolean>{\n    // console.log(this.route);\n    return new Promise( async( resolve ) => {\n      this.srv.entity.getCoreConfig( this.internal_name, 0 ).then( ( core: CoreConfig ) => {\n        this.core = core;\n        this.id = `${this.parent}_${this.core.params.internal_name}`;\n        this.log.info( `_setCore: initial`, core );\n        return resolve( true );\n      }, () => {\n        return resolve( false );\n      } );\n    } );\n  }\n\n\n  /**\n   * Setup basic config\n   * Intended to be overridden\n   * @private\n   */\n  protected _setConfig(): Promise<boolean>{\n    return new Promise( async( resolve ) => {\n\n      if( !this.parentId ) this.parentId = this.srv.entity.getRouteParentId( this.route );\n      if( !this.internal_name ) this.internal_name = this.srv.entity.getRouteInternalName( this.route );\n\n      if( this.parent === 'client' ){\n        this.extension.client_id = +this.parentId;\n      }else if( this.parent === 'account' ){\n        const account = this.srv.tab.getCore().entity;\n        this.extension.client_id = +account.client_id;\n        this.extension.account_id = +account.id;\n      }\n      return resolve( true );\n    } );\n  }\n\n\n  /**\n   * Manage the sessionStorage settings\n   * @private\n   */\n  protected _setSessionSettings(): Promise<boolean>{\n    return new Promise( async( resolve ) => {\n      // Set session path for variables\n      this.asset.tabMenuSessionPath = `Entity.${TitleCase( this.core.params.internal_name )}.Menu`;\n      this.asset.showArchivedSessionPath = `Business.${PopBusiness.id}.Entity.${TitleCase( this.parent )}.Table.${TitleCase( this.internal_name )}.showArchived`;\n      this.asset.searchValueSessionPath = `Business.${PopBusiness.id}.Entity.${TitleCase( this.parent )}.Table.${TitleCase( this.internal_name )}.searchValue`;\n\n      // Set any session variables\n      // SetSessionSiteVar(this.asset.tabMenuSessionPath, null); // remove any menu session data for this entity\n      this.dom.state.showArchived = GetSessionSiteVar( this.asset.showArchivedSessionPath, false );\n\n      return resolve( true );\n    } );\n  }\n\n\n  /**z\n   * Determine the height of the table\n   * @private\n   */\n  protected _setHeight(): Promise<boolean>{\n    return new Promise( async( resolve ) => {\n      // Determine height of the table - have to account if filter bar is enabled\n      const overhead = 50; // trial and error , increase to make component shorter, lower to increase height\n      this.dom.setHeight( window.innerHeight - 200, overhead );\n      return resolve( true );\n    } );\n  }\n\n\n  protected _fetchData( update = false ){\n    if( !update ) this.dom.setTimeout( `lazy-load-fresh-data`, null );\n    return new Promise( async( resolve, reject ) => {\n      if( this.dataFactory ){\n        this.dataFactory( this.parentId, this.dom.state.showArchived ? 1 : 0 ).then( ( data ) => {\n          // console.log('data', data);\n          data = this._transformData( data );\n          if( update && this.table.config && typeof this.table.config.updateData === 'function' ){\n            this.table.config.updateData( data );\n          }\n          PopTemplate.clear();\n          resolve( data );\n        }, () => {\n          reject( [] );\n        } );\n      }else{\n        const params = {};\n        params[ `${this.parent}_id` ] = this.parentId;\n        // console.log(params);\n        this.core.repo.getEntities( { archived: ( this.dom.state.showArchived ? 1 : 0 ), ...params } ).then( ( list: Entity[] ) => {\n          list = this._transformData( list )\n          // this.core.repo.setCache('table', this.internal_name, data, 5);\n          if( update && this.table.config && typeof this.table.config.updateData === 'function' ){\n            this.table.config.updateData( list );\n          }\n          PopTemplate.clear();\n          resolve( list );\n        }, () => {\n          reject( [] );\n        } );\n      }\n\n    } );\n  }\n\n\n  protected _transformData( data: any[] ){\n    if( !( IsObject( this.asset.fieldKeys, true ) ) ) this._setFieldKeys( data[ 0 ] );\n    if( !( IsObject( this.asset.transformations, true ) ) ) this._setFieldTableTransformations();\n    data = this._prepareTableData( data );\n    this.core.repo.setCache( 'table', this.parent, data, 5 );\n\n    return data;\n  }\n\n\n  /**\n   * Retrieves the data set that this view will represent\n   * @param hardReset\n   *\n   */\n  protected _getTableData( hardReset = false ){\n    return new Promise( ( resolve, reject ) => {\n      if( this.dom.delay.data ) clearTimeout( this.dom.delay.data );\n      this.core.repo.getCache( 'table', this.parent ).then( ( cache ) => {\n        if( IsArray( cache, true ) ){\n          this._triggerDataFetch();\n          return resolve( { data: cache } );\n        }else{\n          this._fetchData( false ).then( ( data ) => {\n            return resolve( { data: data } );\n          } );\n        }\n      } );\n    } );\n  }\n\n\n  protected _configureFilterBar(): Promise<boolean>{\n    return new Promise( async( resolve ) => {\n      this.srv.filter.setActive( false );\n      return resolve( true );\n    } );\n  }\n\n\n  /**\n   * Generates a table config that will be used by the nested view component\n   * @param reset\n   *\n   */\n  protected _configureTable( reset = false ): Promise<boolean>{\n    return new Promise( async( resolve ) => {\n      if( !this.table.config ){\n        this._getTableData( reset ).then( ( tableData: any ) => {\n          if( IsArray( tableData.data, true ) ){\n            this.asset.blueprint = tableData.data[ 0 ];\n          }\n          this._getTableInterface().then( () => {\n            this.asset.tableInterface.paginator = false;\n            this.table.config = new TableConfig( { ...this.asset.tableInterface, ...tableData } );\n          } );\n        } );\n      }else{\n        this.table.config.loading = true;\n        this._getTableData().then( ( result: { data: Entity[] } ) => {\n          if( IsArray( result.data, true ) ) this.asset.blueprint = result.data[ 0 ];\n          this.table.config.buttons = this._buildTableButtons();\n          if( reset ){\n            this.table.config.reset( result.data );\n          }else{\n            this.table.config.updateData( result.data );\n          }\n          this.table.config.loading = false;\n          this.dom.state.refresh = false;\n          this.core.params.refresh = false;\n\n        } );\n      }\n      return resolve( true );\n    } );\n  }\n\n\n  /************************************************************************************************\n   *                                                                                              *\n   *                                      Under The Hood                                          *\n   *                                    ( Private Method )                                        *\n   *                                                                                              *\n   ************************************************************************************************/\n\n\n}\n\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'lib-pop-entity-address-edit',\n  templateUrl: './pop-entity-address-edit.component.html',\n  styleUrls: ['./pop-entity-address-edit.component.scss']\n})\nexport class PopEntityAddressEditComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'lib-pop-entity-scheme-custom-setting',\n  templateUrl: './pop-entity-scheme-custom-setting.component.html',\n  styleUrls: ['./pop-entity-scheme-custom-setting.component.scss']\n})\nexport class PopEntitySchemeCustomSettingComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { PortalModule } from '@angular/cdk/portal';\nimport { RouterModule } from '@angular/router';\nimport { DragDropModule } from '@angular/cdk/drag-drop';\n\nimport { PopTableModule } from '../base/pop-table/pop-table.module';\n\nimport { PopFieldItemGroupModule } from '../base/pop-field-item-group/pop-field-item-group.module';\nimport { PopIndicatorsModule } from '../base/pop-indicators/pop-indicators.module';\nimport { PopEntityPortalMenuComponent } from './pop-entity-tab-menu/pop-entity-portal-menu/pop-entity-portal-menu.component';\nimport { PopErrorsModule } from '../base/pop-errors/pop-errors.module';\nimport { PopEntityListComponent } from './pop-entity-list/pop-entity-list.component';\nimport { PopEntityTabMenuComponent } from './pop-entity-tab-menu/pop-entity-tab-menu.component';\nimport { PopTabMenuModule } from '../base/pop-tab-menu/pop-tab-menu.module';\nimport { PopEntityHistoryComponent } from './pop-entity-history/pop-entity-history.component';\nimport { PopEntityAccessComponent } from './pop-entity-access/pop-entity-access.component';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { MaterialModule } from '../material/material.module';\nimport { PopFieldItemModule } from '../base/pop-field-item/pop-field-item.module';\nimport { PopEntityAssignmentsComponent } from './pop-entity-assignments/pop-entity-assignments.component';\nimport { PopEntityProviderDialogComponent } from './pop-entity-assignments/pop-entity-provider-dialog/pop-entity-provider-dialog.component';\nimport { MatNativeDateModule } from '@angular/material/core';\n\nimport { PopEntityAdvancedSearchComponent } from './pop-entity-list/pop-entity-advanced-search/pop-entity-advanced-search.component';\nimport { PopEntityFieldGroupComponent } from './pop-entity-field-group/pop-entity-field-group.component';\nimport { PopEntityTabComponent } from './pop-entity-tab/pop-entity-tab.component';\nimport { PopEntityEmailComponent } from './pop-entity-field/pop-entity-email/pop-entity-email.component';\nimport { PopEntityPhoneComponent } from './pop-entity-field/pop-entity-phone/pop-entity-phone.component';\nimport { PopEntityAddressComponent } from './pop-entity-field/pop-entity-address/pop-entity-address.component';\nimport { PopEntityDatetimeComponent } from './pop-entity-field/pop-entity-datetime/pop-entity-datetime.component';\nimport { PopEntityInputComponent } from './pop-entity-field/pop-entity-input/pop-entity-input.component';\nimport { PopEntityNameComponent } from './pop-entity-field/pop-entity-name/pop-entity-name.component';\nimport { PopEntityFieldComponent } from './pop-entity-field/pop-entity-field.component';\nimport { PopEntityFieldActionBtnComponent } from './pop-entity-field/assets/pop-entity-field-action-btn.component';\nimport { PopEntityFieldEditIconComponent } from './pop-entity-field/assets/pop-entity-field-edit-icon/pop-entity-field-edit-icon.component';\nimport { PopEntityFieldDashComponent } from './pop-entity-field/assets/pop-entity-field-dash.component';\nimport { PopEntityFieldSpacerComponent } from './pop-entity-field/assets/pop-entity-field-spacer.component';\nimport { PopEntitySelectComponent } from './pop-entity-field/pop-entity-select/pop-entity-select.component';\nimport { PopEntityTextareaComponent } from './pop-entity-field/pop-entity-textarea/pop-entity-textarea.component';\nimport { PopEntityCheckboxComponent } from './pop-entity-field/pop-entity-checkbox/pop-entity-checkbox.component';\nimport { PopEntityRadioComponent } from './pop-entity-field/pop-entity-radio/pop-entity-radio.component';\nimport { PopContextMenuModule } from '../base/pop-context-menu/pop-context-menu.module';\nimport { PopEntityTabColumnComponent } from './pop-entity-tab/pop-entity-tab-column.component';\nimport { PopEntitySchemeComponent } from './pop-entity-scheme/pop-entity-scheme.component';\n\nimport { PopEntitySchemeDetailsComponent } from './pop-entity-scheme/pop-entity-scheme-details/pop-entity-scheme-details.component';\nimport { PopEntitySchemeAssetPoolComponent } from './pop-entity-scheme/pop-entity-scheme-asset-pool/pop-entity-scheme-asset-pool.component';\nimport { PopEntitySchemeAssetLayoutComponent } from './pop-entity-scheme/pop-entity-scheme-asset-layout/pop-entity-scheme-asset-layout.component';\nimport { FieldInputSettingComponent } from './pop-entity-scheme/pop-entity-asset-field-modal/params/field-input-setting.component';\nimport { FieldLabelSettingComponent } from './pop-entity-scheme/pop-entity-asset-field-modal/params/field-label-setting.component';\nimport { FieldRadioSettingComponent } from './pop-entity-scheme/pop-entity-asset-field-modal/params/field-radio-setting.component';\nimport { FieldSelectSettingComponent } from './pop-entity-scheme/pop-entity-asset-field-modal/params/field-select-setting.component';\nimport { FieldSwitchSettingComponent } from './pop-entity-scheme/pop-entity-asset-field-modal/params/field-switch-setting.component';\nimport { FieldTextareaSettingComponent } from './pop-entity-scheme/pop-entity-asset-field-modal/params/field-textarea-setting.component';\nimport { PopEntityAssetComponentModalComponent } from './pop-entity-scheme/pop-entity-asset-component-modal/pop-entity-asset-component-modal.component';\nimport { PopEntityAssetFieldModalComponent } from './pop-entity-scheme/pop-entity-asset-field-modal/pop-entity-asset-field-modal.component';\nimport { EntitySchemeLayoutSectionComponent } from './pop-entity-scheme/pop-entity-scheme-asset-layout/entity-scheme-layout-section/entity-scheme-layout-section.component';\nimport { PopEntitySchemeCustomComponent } from './pop-entity-scheme/pop-entity-scheme-custom-component/pop-entity-scheme-custom.component';\nimport { EntitySchemeFieldContentComponent } from './pop-entity-scheme/pop-entity-scheme-asset-layout/entity-scheme-layout-section/entity-scheme-field-content/entity-scheme-field-content.component';\nimport { EntitySchemeTableContentComponent } from './pop-entity-scheme/pop-entity-scheme-asset-layout/entity-scheme-layout-section/entity-scheme-table-content/entity-scheme-table-content.component';\nimport { EntitySchemeComponentContentComponent } from './pop-entity-scheme/pop-entity-scheme-asset-layout/entity-scheme-layout-section/entity-scheme-component-content/entity-scheme-component-content.component';\n\nimport { PopEntityFieldPreviewComponent } from './pop-entity-field-editor/pop-entity-field-preview/pop-entity-field-preview.component';\nimport { PopEntityFieldSettingsComponent } from './pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-settings.component';\nimport { PopEntityFieldItemsComponent } from './pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-items/pop-entity-field-items.component';\nimport { PopEntityFieldValuesComponent } from './pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-values/pop-entity-field-values.component';\nimport { PopEntityFieldItemParamsComponent } from './pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/pop-entity-field-item-params.component';\nimport { FieldInputParamComponent } from './pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-input-param.component';\nimport { FieldLabelParamComponent } from './pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-label-param.component';\nimport { FieldSelectParamComponent } from './pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-select-param.component';\nimport { FieldTextareaParamComponent } from './pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-textarea-param.component';\nimport { FieldRadioParamComponent } from './pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-radio-param.component';\nimport { FieldSwitchParamComponent } from './pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-switch-param.component';\nimport { PopEntityFieldEditorComponent } from './pop-entity-field-editor/pop-entity-field-editor.component';\nimport { PopEntityFieldDetailsComponent } from './pop-entity-field-editor/pop-entity-field-details/pop-entity-field-details.component';\nimport { FieldSliderParamComponent } from './pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-slider-param.component';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { PopEntityFieldBoilerComponent } from './pop-entity-field/pop-entity-field-boiler.component';\nimport { PopEntityFieldEntriesComponent } from './pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-entries/pop-entity-field-entries.component';\nimport { PopDialogsModule } from '../base/pop-dialogs/pop-dialogs.module';\nimport { FieldNumberParamComponent } from './pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-number-param.component';\nimport { PopEntityTabListComponent } from './pop-entity-tab-list/pop-entity-tab-list.component';\nimport { PopEntityStatusComponent } from './pop-entity-status/pop-entity-status.component';\nimport { PopEntityFieldModalComponent } from './pop-entity-field/pop-entity-field-modal/pop-entity-field-modal.component';\nimport { PopEntityAddressEditComponent } from './pop-entity-field/pop-entity-address/pop-entity-address-edit/pop-entity-address-edit.component';\nimport { PopEntitySwitchComponent } from './pop-entity-field/pop-entity-switch/pop-entity-switch.component';\nimport { PopEntitySelectMultiComponent } from './pop-entity-field/pop-entity-select-multi/pop-entity-select-multi.component';\nimport { PopTabMenuComponent } from '../base/pop-tab-menu/pop-tab-menu.component';\nimport { PopTableComponent } from '../base/pop-table/pop-table.component';\nimport { PopTabMenuSectionBarComponent } from '../base/pop-tab-menu/pop-tab-menu-section-bar/pop-tab-menu-section-bar.component';\nimport { PopEntitySchemeFieldSettingComponent } from './pop-entity-scheme/pop-entity-scheme-field-setting/pop-entity-scheme-field-setting.component';\nimport { PopEntitySchemeCustomSettingComponent } from './pop-entity-scheme/pop-entity-scheme-custom-setting/pop-entity-scheme-custom-setting.component';\n\n\n\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    HttpClientModule,\n    MatFormFieldModule,\n    MatInputModule,\n    RouterModule,\n    PortalModule,\n    FormsModule,\n    ReactiveFormsModule,\n    MaterialModule,\n    DragDropModule,\n    PopErrorsModule,\n    PopFieldItemModule,\n    PopFieldItemGroupModule,\n    PopIndicatorsModule,\n    PopTableModule,\n    PopTabMenuModule,\n    MatNativeDateModule,\n    PopContextMenuModule,\n    PopDialogsModule\n\n  ],\n  declarations: [\n    PopEntityListComponent,\n    PopEntityTabListComponent,\n    PopEntityAdvancedSearchComponent,\n    PopEntityPortalMenuComponent,\n    PopEntityFieldGroupComponent,\n    PopEntityPortalMenuComponent,\n    PopEntityTabMenuComponent,\n    PopEntityTabComponent,\n    PopEntityTabColumnComponent,\n    PopEntityHistoryComponent,\n    PopEntityAssignmentsComponent,\n    PopEntityProviderDialogComponent,\n    PopEntityAccessComponent,\n    PopEntityFieldComponent,\n    PopEntityFieldActionBtnComponent,\n    PopEntityFieldEditIconComponent,\n    PopEntityFieldDashComponent,\n    PopEntityFieldSpacerComponent,\n    PopEntityFieldBoilerComponent,\n    PopEntityFieldModalComponent,\n    PopEntityEmailComponent,\n    PopEntityPhoneComponent,\n    PopEntityAddressComponent,\n    PopEntityAddressEditComponent,\n    PopEntityDatetimeComponent,\n    PopEntityInputComponent,\n    PopEntitySelectComponent,\n    PopEntitySelectMultiComponent,\n    PopEntityCheckboxComponent,\n    PopEntityRadioComponent,\n    PopEntitySwitchComponent,\n    PopEntityNameComponent,\n    PopEntityTextareaComponent,\n    PopEntityStatusComponent,\n\n    PopEntitySchemeComponent,\n    PopEntitySchemeDetailsComponent,\n    PopEntitySchemeAssetPoolComponent,\n    PopEntitySchemeAssetLayoutComponent,\n    EntitySchemeLayoutSectionComponent,\n    PopEntitySchemeFieldSettingComponent,\n    EntitySchemeFieldContentComponent,\n    EntitySchemeComponentContentComponent,\n    EntitySchemeTableContentComponent,\n    PopEntityAssetComponentModalComponent,\n    PopEntityAssetFieldModalComponent,\n    FieldInputSettingComponent,\n    FieldLabelSettingComponent,\n    FieldRadioSettingComponent,\n    FieldSelectSettingComponent,\n    FieldSwitchSettingComponent,\n    FieldTextareaSettingComponent,\n    PopEntitySchemeCustomComponent,\n\n    PopEntityFieldEditorComponent,\n    PopEntityFieldDetailsComponent,\n    PopEntityFieldSettingsComponent,\n    PopEntityFieldPreviewComponent,\n    PopEntityFieldItemsComponent,\n    PopEntityFieldValuesComponent,\n    PopEntityFieldEntriesComponent,\n    PopEntityFieldItemsComponent,\n    PopEntityFieldItemParamsComponent,\n    FieldInputParamComponent,\n    FieldSelectParamComponent,\n    FieldLabelParamComponent,\n    FieldSwitchParamComponent,\n    FieldTextareaParamComponent,\n    FieldRadioParamComponent,\n    FieldSliderParamComponent,\n    FieldNumberParamComponent,\n    PopEntitySchemeCustomSettingComponent,\n\n  ],\n  exports: [\n    PopEntityListComponent,\n    PopEntityTabListComponent,\n    PopEntityAdvancedSearchComponent,\n    PopEntityPortalMenuComponent,\n    PopEntityFieldGroupComponent,\n    PopEntityPortalMenuComponent,\n    PopEntityTabMenuComponent,\n    PopEntityTabComponent,\n    PopEntityTabColumnComponent,\n    PopEntityHistoryComponent,\n    PopEntityAssignmentsComponent,\n    PopEntityProviderDialogComponent,\n    PopEntityAccessComponent,\n    PopEntityFieldComponent,\n    PopEntityFieldActionBtnComponent,\n    PopEntityFieldEditIconComponent,\n    PopEntityFieldDashComponent,\n    PopEntityFieldSpacerComponent,\n    PopEntityEmailComponent,\n    PopEntityPhoneComponent,\n    PopEntityFieldModalComponent,\n    PopEntityAddressComponent,\n    PopEntityAddressEditComponent,\n    PopEntityDatetimeComponent,\n    PopEntityInputComponent,\n    PopEntitySelectComponent,\n    PopEntitySelectMultiComponent,\n    PopEntityCheckboxComponent,\n    PopEntityRadioComponent,\n    PopEntitySwitchComponent,\n    PopEntityNameComponent,\n    PopEntityTextareaComponent,\n    PopEntityStatusComponent,\n\n    PopEntitySchemeComponent,\n    PopEntitySchemeDetailsComponent,\n    PopEntitySchemeAssetPoolComponent,\n    PopEntitySchemeAssetLayoutComponent,\n    EntitySchemeLayoutSectionComponent,\n    PopEntitySchemeFieldSettingComponent,\n    EntitySchemeFieldContentComponent,\n    EntitySchemeComponentContentComponent,\n    EntitySchemeTableContentComponent,\n    PopEntityAssetComponentModalComponent,\n    PopEntityAssetFieldModalComponent,\n    FieldInputSettingComponent,\n    FieldLabelSettingComponent,\n    FieldRadioSettingComponent,\n    FieldSelectSettingComponent,\n    FieldSwitchSettingComponent,\n    FieldTextareaSettingComponent,\n    PopEntitySchemeCustomComponent,\n\n    PopEntityFieldEditorComponent,\n    PopEntityFieldDetailsComponent,\n    PopEntityFieldSettingsComponent,\n    PopEntityFieldPreviewComponent,\n    PopEntityFieldItemsComponent,\n    PopEntityFieldValuesComponent,\n    PopEntityFieldEntriesComponent,\n    PopEntityFieldItemsComponent,\n\n    PopEntityFieldItemParamsComponent,\n    PopEntityFieldItemParamsComponent,\n    FieldInputParamComponent,\n    FieldSelectParamComponent,\n    FieldLabelParamComponent,\n    FieldSwitchParamComponent,\n    FieldTextareaParamComponent,\n    FieldRadioParamComponent,\n    FieldSliderParamComponent,\n    FieldNumberParamComponent\n  ],\n})\nexport class PopEntityModule {\n}\n","export interface PopAjaxDialogConfigInterface {\n    message:string; // the message to display after successful request (request error will display otherwise)\n    timeDelay?: number; // the time (in milliseconds) that the pop-table-dialog will stay open after successful request (if made)\n    patch?: PopAjaxDialogRequest; // if given, outlines the details for making a request\n    redirect?: PopAjaxDialogRedirectInterface; // if given, outlines the details for redirecting after request\n    response?: any;\n    body?:string;\n}\n\nexport interface PopAjaxDialogRequestInterface {\n    path: string;\n    body?: any;\n    type: 'patch' | 'post' | 'get' | 'delete';\n    version?: number;\n\n}\n\nexport class PopAjaxDialogRequest {\n    path: string; // the path to make the request to\n    body: any; // the body to include in the request, defaults to empty object\n    type: 'patch' | 'post' | 'get' | 'delete'; // the type of request to make\n    version: number; // the version number of api, defaults to 1\n\n    constructor(data:PopAjaxDialogRequestInterface) {\n        const fields = Object.keys(data);\n        for (const value of fields) {\n            this[value] = data[value];\n        }\n        if (!data.body) this.body = {};\n        if (!data.version) this.version = 1;\n    }\n}\n\nexport interface PopAjaxDialogRedirectInterface {\n    path: string; // the path the redirect to. Make sure to not include the app in the first part of the path. \n    app: string; // the app to redirect (acts as the first part of the path)\n}\n","import { Injectable } from '@angular/core';\nimport { HttpHeaders, HttpClient } from '@angular/common/http';\nimport { PopBaseService } from './pop-base.service';\nimport { PopRequestService } from './pop-request.service';\nimport { Observable } from 'rxjs';\n\n\n@Injectable({ providedIn: 'root' })\nexport class PopPreferenceService {\n\n  constructor(\n    private http: HttpClient,\n    private request: PopRequestService\n  ){\n  }\n\n\n  /**\n   * Get preferences at specified level.\n   *  - IE: getPreferences('admin', 'users', 'table');\n   *\n   * @param level1\n   * @param level2\n   * @param level3\n   * @param level4\n   * @returns\n   */\n  public getPreferences(level1: string, level2 = '', level3 = '', level4 = ''): Observable<any>{\n    let path = '/preferences/' + level1;\n    if( level2 ) path += '/' + level2;\n    if( level3 ) path += '/' + level3;\n    if( level4 ) path += '/' + level4;\n    return this.request.doGet(path, {}, 1);\n  }\n\n\n  /**\n   * Saves a preferences at the specified level.\n   *  - IE: savePreferences('TablePreferences', {some:object}, 'admin', 'users', 'table');\n   *\n   * @param name\n   * @param data\n   * @param level1\n   * @param level2\n   * @param level3\n   * @param level4\n   * @returns\n   */\n  public savePreferences(name: string, data: any, level1: string, level2 = '', level3 = '', level4 = ''): Observable<any>{\n    let path = '/preferences/' + level1;\n    if( level2 ) path += '/' + level2;\n    if( level3 ) path += '/' + level3;\n    if( level4 ) path += '/' + level4;\n\n    return this.request.doPost(path, { name: name, data: data });\n  }\n\n\n  /**\n   * Deletes a specified preference. Typically used when resetting to default.\n   *  - IE: deletePreferences('TablePreferences', 'admin', 'users', 'table');\n   *\n   * @param name\n   * @param level1\n   * @param level2\n   * @param level3\n   * @param level4\n   * @returns\n   */\n  public deletePreferences(name: string, level1: string, level2 = '', level3 = '', level4 = ''): Observable<any>{\n    let path = '/preferences/' + level1;\n    if( level2 ) path += '/' + level2;\n    if( level3 ) path += '/' + level3;\n    if( level4 ) path += '/' + level4;\n    path += '/' + name;\n\n    return this.request.doDelete(path);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { CanActivate, Router } from '@angular/router';\nimport { PopBaseService } from './pop-base.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PopAuthGuardService implements CanActivate {\n\n  constructor(public base: PopBaseService, public router: Router) {\n  }\n\n  canActivate(): boolean {\n    if (this.base.isAuthExpired()) {\n      this.router.navigate(['login']).catch((e) => console.log(e));\n      return false;\n    }\n    return true;\n  }\n}\n","import { ActivatedRouteSnapshot, CanActivate } from '@angular/router';\nimport { Inject, Injectable } from '@angular/core';\nimport { AppGlobalInterface } from '../pop-common.model';\n\n\n@Injectable( {\n  providedIn: 'root',\n} )\nexport class PopRouteVerifiedGuard implements CanActivate {\n  constructor(\n    @Inject( 'APP_GLOBAL' ) private APP_GLOBAL: AppGlobalInterface\n  ){\n  }\n\n\n  canActivate( route: ActivatedRouteSnapshot ): Promise<boolean>{\n    return new Promise<boolean>( async( resolve ) => {\n      const verified = await this.APP_GLOBAL.isVerified();\n      return resolve( verified );\n    } );\n  }\n}\n","import {ActivatedRouteSnapshot, CanActivate, Router} from '@angular/router';\nimport {Injectable} from '@angular/core';\nimport {PopEntity, PopTemplate, SetPopMessage} from '../pop-common.model';\nimport {IsArray, IsObject, TitleCase} from '../pop-common-utility';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PopAccessGuardService implements CanActivate {\n  constructor(private router: Router) {\n\n  }\n\n  canActivate(route: ActivatedRouteSnapshot) {\n\n    if (IsObject(route, ['data']) && IsObject(PopEntity, true) && route.data.can_read && !(PopEntity.checkAccess(route.data.can_read, 'can_read'))) {\n      this._exit();\n    }\n    if (IsObject(route, ['data']) && IsObject(PopEntity, true) && route.data.can_update && !(PopEntity.checkAccess(route.data.can_update, 'can_update'))) {\n      this._exit();\n    }\n    // to check if the entity has entry access\n    if (IsObject(route, ['data'])) {\n      const internalName = route.data.internal_name ?? route.data.can_read;\n      const entityNames = PopEntity.getEntityEntryAccess(internalName);\n\n      if (IsArray(entityNames, true)) {\n        const inaccessible = [];\n        entityNames.map((entityName) => {\n          if (!PopEntity.checkAccess(entityName, 'can_read')) {\n            inaccessible.push(TitleCase(entityName.split('_').join(\" \")));\n          }\n        });\n        if (IsArray(inaccessible, true)) {\n          this._exitWithMessage(inaccessible.join(', '));\n          return false;\n        }\n      } else {\n        return true;\n      }\n    }\n    return true;\n  }\n\n\n  private _exit() {\n    SetPopMessage('Access Denied.');\n    this.router.navigateByUrl('system/error/403').then(() => true);\n  }\n\n  private _exitWithMessage(entityName: string) {\n    SetPopMessage(`Access Denied. You need permission for ${entityName}`);\n    this.router.navigateByUrl('system/error/403').then(() => true);\n  }\n}\n","import { Injectable, OnDestroy } from '@angular/core';\nimport { PopExtendService } from '../../../services/pop-extend.service';\n\n\n@Injectable({ providedIn: 'root' })\nexport class PopEntityExtendService extends PopExtendService implements OnDestroy {\n  constructor(){\n    super();\n  }\n\n\n  ngOnDestroy(){\n    super.ngOnDestroy();\n  }\n}\n","/*\n * Public API Surface of pop-common\n */\n\n// Modules\nimport { PopEntityFieldEditorComponent } from './lib/modules/entity/pop-entity-field-editor/pop-entity-field-editor.component';\n\nexport * from './lib/pop-common.module';\n\n\nexport * from './lib/modules/pop-initializer.module';\nexport * from './lib/modules/base/pop-base.module';\nexport * from './lib/modules/entity/pop-entity.module';\nexport * from './lib/modules/material/material.module';\nexport * from './lib/modules/app/pop-template.module';\nexport * from './lib/modules/app/pop-cac-filter/pop-cac-filter.module';\nexport * from './lib/modules/app/pop-left-menu/pop-left-menu.module';\nexport * from './lib/modules/app/pop-menu/pop-menu.module';\nexport * from './lib/modules/app/pop-widget-bar/pop-widget-bar.module';\nexport * from './lib/modules/base/pop-context-menu/pop-context-menu.module';\nexport * from './lib/modules/base/pop-dialogs/pop-dialogs.module';\nexport * from './lib/modules/base/pop-side-by-side/pop-side-by-side.module';\nexport * from './lib/modules/base/pop-field-item-group/pop-field-item-group.module';\nexport * from './lib/modules/base/pop-errors/pop-errors.module';\nexport * from './lib/modules/base/pop-indicators/pop-indicators.module';\nexport * from './lib/modules/base/pop-table/pop-table.module';\nexport * from './lib/modules/base/pop-field-item/pop-field-item.module';\nexport * from './lib/modules/base/pop-tab-menu/pop-tab-menu.module';\nexport * from './lib/modules/base/pop-ajax-dialog/pop-ajax-dialog.module';\n\n\n\n// Pipes\nexport * from './lib/pipes/phone.pipe';\nexport * from './lib/pipes/toYesNo.pipe';\nexport * from './lib/pipes/toActiveOrArchived.pipe';\nexport * from './lib/pipes/label.pipe';\nexport * from './lib/pipes/truncate.pipe';\n\n// Directives\nexport * from './lib/directives/lib-container.directive';\nexport * from './lib/directives/lib-track-caps-lock.directive';\nexport * from './lib/directives/lib-outside-click.directive';\n\n// Models\n\nexport * from './lib/pop-common-utility';\nexport * from './lib/pop-common-token.model';\nexport * from './lib/pop-common-dom.models';\nexport * from './lib/pop-common.model';\nexport * from './lib/pop-common-animations.model';\n\n\nexport * from './lib/modules/app/pop-left-menu/entity-menu.model';\nexport * from './lib/modules/base/pop-ajax-dialog/pop-ajax-dialog.model';\nexport * from './lib/modules/base/pop-context-menu/pop-context-menu.model';\nexport * from './lib/modules/base/pop-dialogs/pop-dialogs.model';\nexport * from './lib/modules/base/pop-field-item/pop-input/input-config.model';\nexport * from './lib/modules/base/pop-field-item/pop-number/number-config.model';\nexport * from './lib/modules/base/pop-field-item/pop-time/time-config.model';\nexport * from './lib/modules/base/pop-field-item/pop-date/pop-date-range/date-range-config.models';\nexport * from './lib/modules/base/pop-field-item/pop-date/date-config.model';\nexport * from './lib/modules/base/pop-field-item/pop-select/select-config.model';\nexport * from './lib/modules/base/pop-field-item/pop-select-list/select-list-config.model';\nexport * from './lib/modules/base/pop-field-item/pop-select-filter/select-filter-config.model';\nexport * from './lib/modules/base/pop-field-item/pop-radio/radio-config.model';\nexport * from './lib/modules/base/pop-field-item/pop-checkbox/checkbox-config.model';\nexport * from './lib/modules/base/pop-field-item/pop-textarea/textarea-config.model';\nexport * from './lib/modules/base/pop-field-item/pop-button/button-config.model';\nexport * from './lib/modules/base/pop-field-item/pop-switch/switch-config.model';\nexport * from './lib/modules/base/pop-field-item/pop-select-multi/select-mulit-config.model';\nexport * from './lib/modules/base/pop-field-item/pop-label/label-config.model';\nexport * from './lib/modules/base/pop-field-item/pop-text/text-config.model';\nexport * from './lib/modules/base/pop-field-item-group/pop-field-item-group.model';\nexport * from './lib/modules/base/pop-tab-menu/tab-menu.model';\nexport * from './lib/modules/base/pop-indicators/pop-indicators.model';\nexport * from './lib/modules/base/pop-side-by-side/pop-side-by-side.model';\nexport * from './lib/modules/base/pop-table/pop-table.model';\nexport * from './lib/modules/entity/pop-entity-utility';\nexport * from './lib/modules/entity/pop-entity-tab/pop-entity-tab.model';\nexport * from './lib/modules/entity/pop-entity-field/pop-entity-field.model';\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-scheme.model';\n\n// Base Components\n\nexport * from './lib/modules/app/pop-template.component';\n\nexport * from './lib/pop-extend.component';\nexport * from './lib/pop-extend-dynamic.component';\n\n\nexport * from './lib/modules/base/pop-dialogs/pop-navigation-dialog/pop-navigation-dialog.component';\nexport * from './lib/modules/base/pop-dialogs/pop-confirmation-dialog/pop-confirmation-dialog.component';\nexport * from './lib/modules/base/pop-ajax-dialog/pop-ajax-dialog.component';\nexport * from './lib/modules/base/pop-dialogs/pop-table-dialog/pop-table-dialog.component';\nexport * from './lib/modules/base/pop-indicators/main-spinner.component';\nexport * from './lib/modules/base/pop-context-menu/pop-context-menu.component';\nexport * from './lib/modules/base/pop-dialogs/pop-confirmation-dialog/pop-confirmation-dialog.component';\nexport * from './lib/modules/base/pop-dialogs/pop-navigation-dialog/pop-navigation-dialog.component';\nexport * from './lib/modules/base/pop-dialogs/pop-table-dialog/pop-table-dialog.component';\nexport * from './lib/modules/base/pop-dialogs/pop-action-dialog/pop-action-dialog.component';\nexport * from './lib/modules/base/pop-dialogs/pop-success-dialog/pop-success-dialog.component';\nexport * from './lib/modules/base/pop-dialogs/pop-message-dialog/pop-message-dialog.component';\nexport * from './lib/modules/base/pop-errors/pop-errors.component';\n\nexport * from './lib/modules/base/pop-field-item/pop-field-item.component';\nexport * from './lib/modules/base/pop-field-item/pop-date/pop-date.component';\nexport * from './lib/modules/base/pop-field-item/pop-datepicker/pop-datepicker.component'\nexport * from './lib/modules/base/pop-field-item/pop-time/pop-time.component';\nexport * from './lib/modules/base/pop-field-item/pop-checkbox/pop-checkbox.component';\nexport * from './lib/modules/base/pop-field-item/pop-input/pop-input.component';\nexport * from './lib/modules/base/pop-field-item/pop-button/pop-button.component';\nexport * from './lib/modules/base/pop-field-item/pop-label/pop-label.component';\nexport * from './lib/modules/base/pop-field-item/pop-text/pop-text.component';\nexport * from './lib/modules/base/pop-field-item/pop-radio/pop-radio.component';\nexport * from './lib/modules/base/pop-field-item/pop-select/pop-select.component';\nexport * from './lib/modules/base/pop-field-item/pop-select-filter/pop-select-filter.component';\nexport * from './lib/modules/base/pop-field-item/pop-select-list/pop-select-list.component';\n\nexport * from './lib/modules/base/pop-field-item/pop-select-modal/select-modal-config.model';\nexport * from './lib/modules/base/pop-field-item/pop-select-multi/pop-select-multi.component';\nexport * from './lib/modules/base/pop-field-item/pop-select-modal/pop-select-modal.component';\nexport * from './lib/modules/base/pop-field-item/pop-select-modal/pop-select-modal-dialog/pop-select-modal-dialog.component';\nexport * from './lib/modules/base/pop-field-item/pop-textarea/pop-textarea.component';\nexport * from './lib/modules/base/pop-field-item/pop-switch/pop-switch.component';\n\nexport * from './lib/modules/entity/pop-entity-list/pop-entity-advanced-search/pop-entity-advanced-search.component';\nexport * from './lib/modules/entity/pop-entity-field/assets/pop-entity-field-action-btn.component';\nexport * from './lib/modules/entity/pop-entity-field/assets/pop-entity-field-edit-icon/pop-entity-field-edit-icon.component';\nexport * from './lib/modules/entity/pop-entity-field/assets/pop-entity-field-dash.component';\nexport * from './lib/modules/entity/pop-entity-field/assets/pop-entity-field-spacer.component';\n\nexport * from './lib/modules/base/pop-table/pop-table.component';\nexport * from './lib/modules/base/pop-table/pop-table-view/pop-table-view.component';\nexport * from './lib/modules/app/pop-menu/pop-menu.component';\nexport * from './lib/modules/app/pop-left-menu/pop-left-menu.component';\nexport * from './lib/modules/app/pop-widget-bar/pop-widget-bar.component';\n\nexport * from './lib/modules/base/pop-tab-menu/pop-tab-menu.component';\nexport * from './lib/modules/base/pop-tab-menu/pop-tab-menu-section-bar/pop-tab-menu-section-bar.component';\n\n\n// Entity Components\nexport * from './lib/modules/entity/pop-entity-access/pop-entity-access.component';\nexport * from './lib/modules/entity/pop-entity-assignments/pop-entity-assignments.component';\nexport * from './lib/modules/entity/pop-entity-assignments/pop-entity-provider-dialog/pop-entity-provider-dialog.component';\nexport * from './lib/modules/entity/pop-entity-field/pop-entity-field.component';\nexport * from './lib/modules/entity/pop-entity-field/pop-entity-address/pop-entity-address.component';\nexport * from './lib/modules/entity/pop-entity-field/pop-entity-checkbox/pop-entity-checkbox.component';\nexport * from './lib/modules/entity/pop-entity-field/pop-entity-datetime/pop-entity-datetime.component';\nexport * from './lib/modules/entity/pop-entity-field/pop-entity-email/pop-entity-email.component';\nexport * from './lib/modules/entity/pop-entity-field/pop-entity-input/pop-entity-input.component';\nexport * from './lib/modules/entity/pop-entity-field/pop-entity-name/pop-entity-name.component';\nexport * from './lib/modules/entity/pop-entity-field/pop-entity-phone/pop-entity-phone.component';\nexport * from './lib/modules/entity/pop-entity-field/pop-entity-radio/pop-entity-radio.component';\nexport * from './lib/modules/entity/pop-entity-field/pop-entity-select/pop-entity-select.component';\nexport * from './lib/modules/entity/pop-entity-field/pop-entity-switch/pop-entity-switch.component';\nexport * from './lib/modules/entity/pop-entity-field/pop-entity-select-multi/pop-entity-select-multi.component';\nexport * from './lib/modules/entity/pop-entity-status/pop-entity-status.component';\n\nexport * from './lib/modules/base/pop-field-item-group/pop-field-item-group.component';\nexport * from './lib/modules/base/pop-side-by-side/pop-side-by-side.component';\n\nexport * from './lib/modules/entity/pop-entity-field-editor/pop-entity-field-editor.component';\nexport * from './lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-items/pop-entity-field-items.component';\nexport * from './lib/modules/entity/pop-entity-field-editor/pop-entity-field-preview/pop-entity-field-preview.component';\nexport * from './lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-settings.component';\n\n\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-asset-field-modal/pop-entity-asset-field-modal.component';\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-asset-field-modal/params/field-switch-setting.component';\n\n\nexport * from './lib/modules/entity/pop-entity-field-group/pop-entity-field-group.component';\n\nexport * from './lib/modules/entity/pop-entity-history/pop-entity-history.component';\nexport * from './lib/modules/entity/pop-entity-list/pop-entity-list.component';\nexport * from './lib/modules/entity/pop-entity-tab-list/pop-entity-tab-list.component';\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-scheme.component';\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-scheme-custom-component/pop-entity-scheme-custom.component';\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-scheme-details/pop-entity-scheme-details.component';\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-scheme-asset-pool/pop-entity-scheme-asset-pool.component';\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-scheme-asset-layout/pop-entity-scheme-asset-layout.component';\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-scheme-asset-layout/entity-scheme-layout-section/entity-scheme-layout-section.component';\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-scheme-asset-layout/entity-scheme-layout-section/entity-scheme-field-content/entity-scheme-field-content.component';\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-scheme-asset-layout/entity-scheme-layout-section/entity-scheme-component-content/entity-scheme-component-content.component';\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-scheme-asset-layout/entity-scheme-layout-section/entity-scheme-table-content/entity-scheme-table-content.component';\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-asset-component-modal/pop-entity-asset-component-modal.component';\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-asset-field-modal/params/field-input-setting.component';\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-asset-field-modal/params/field-label-setting.component';\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-asset-field-modal/params/field-radio-setting.component';\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-asset-field-modal/params/field-select-setting.component';\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-asset-field-modal/params/field-textarea-setting.component';\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-scheme-custom-component/pop-entity-scheme-custom.component';\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-asset-field-modal/pop-entity-asset-field-modal.component';\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-asset-field-modal/params/field-switch-setting.component';\n\nexport * from './lib/modules/entity/pop-entity-tab/pop-entity-tab.component';\nexport * from './lib/modules/entity/pop-entity-tab/pop-entity-tab-column.component';\nexport * from './lib/modules/entity/pop-entity-tab-menu/pop-entity-tab-menu.component';\nexport * from './lib/modules/entity/pop-entity-tab-menu/pop-entity-portal-menu/pop-entity-portal-menu.component';\n\nexport * from './lib/modules/app/pop-cac-filter/pop-cac-filter.component';\nexport * from './lib/modules/app/pop-cac-filter/pop-cac-filter-view/pop-cac-filter-view.component';\nexport * from './lib/modules/base/pop-field-item/asset/pop-field-item-loader.component';\nexport * from './lib/modules/base/pop-field-item/asset/pop-field-item-helper.component';\nexport * from './lib/modules/base/pop-field-item/asset/pop-field-item-error.component';\nexport * from './lib/modules/base/pop-field-item/pop-number/pop-number.component';\nexport * from './lib/modules/base/pop-field-item/pop-date/pop-date-range/pop-date-range.component';\nexport * from './lib/modules/base/pop-field-item/pop-date/pop-date-range/expansion-items/date-range-expansion-items.component';\nexport * from './lib/modules/base/pop-field-item/pop-date/datepicker-expansion-items/expansion-items.component';\nexport * from './lib/modules/base/pop-field-item/pop-date/pop-date-range/expansion-items/custom-panel/date-range-panel.component';\nexport * from './lib/modules/base/pop-field-item/pop-date/datepicker-expansion-items/custom-panel/custom-panel.component';\nexport * from './lib/modules/base/pop-field-item/pop-min-max/pop-min-max.component';\nexport * from './lib/modules/base/pop-field-item/pop-slider/pop-slider.component';\nexport * from './lib/modules/base/pop-ajax-dialog/pop-ajax-dialog.module';\nexport * from './lib/modules/entity/pop-entity-field/pop-entity-field-modal/pop-entity-field-modal.component';\nexport * from './lib/modules/entity/pop-entity-field/pop-entity-address/pop-entity-address-edit/pop-entity-address-edit.component';\nexport * from './lib/modules/entity/pop-entity-field/pop-entity-textarea/pop-entity-textarea.component';\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-scheme-field-setting/pop-entity-scheme-field-setting.component';\nexport * from './lib/modules/entity/pop-entity-field-editor/pop-entity-field-details/pop-entity-field-details.component';\nexport * from './lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-values/pop-entity-field-values.component';\nexport * from './lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-entries/pop-entity-field-entries.component';\nexport * from './lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/pop-entity-field-item-params.component';\nexport * from './lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-input-param.component';\nexport * from './lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-select-param.component';\nexport * from './lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-label-param.component';\nexport * from './lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-switch-param.component';\nexport * from './lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-textarea-param.component';\nexport * from './lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-radio-param.component';\nexport * from './lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-slider-param.component';\nexport * from './lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-number-param.component';\nexport * from './lib/modules/entity/pop-entity-field-editor/pop-entity-field-settings/pop-entity-field-item-params/params/field-number-param.component';\nexport * from './lib/modules/app/pop-cac-filter/pop-cac-filter.component';\nexport * from './lib/modules/app/pop-cac-filter/pop-cac-filter-view/pop-cac-filter-view.component';\nexport * from './lib/modules/base/pop-field-item/asset/pop-field-item-loader.component';\nexport * from './lib/modules/base/pop-field-item/asset/pop-field-item-helper.component';\nexport * from './lib/modules/base/pop-field-item/asset/pop-field-item-error.component';\nexport * from './lib/modules/base/pop-field-item/pop-number/pop-number.component';\nexport * from './lib/modules/base/pop-field-item/pop-date/pop-date-range/pop-date-range.component';\nexport * from './lib/modules/base/pop-field-item/pop-date/pop-date-range/expansion-items/date-range-expansion-items.component';\nexport * from './lib/modules/base/pop-field-item/pop-date/datepicker-expansion-items/expansion-items.component';\nexport * from './lib/modules/base/pop-field-item/pop-date/pop-date-range/expansion-items/custom-panel/date-range-panel.component';\nexport * from './lib/modules/base/pop-field-item/pop-date/datepicker-expansion-items/custom-panel/custom-panel.component';\nexport * from './lib/modules/base/pop-field-item/pop-min-max/pop-min-max.component';\nexport * from './lib/modules/base/pop-field-item/pop-slider/pop-slider.component';\nexport * from './lib/modules/entity/pop-entity-field/pop-entity-field-modal/pop-entity-field-modal.component';\nexport * from './lib/modules/entity/pop-entity-field/pop-entity-address/pop-entity-address-edit/pop-entity-address-edit.component';\nexport * from './lib/modules/entity/pop-entity-field/pop-entity-textarea/pop-entity-textarea.component';\nexport * from './lib/modules/entity/pop-entity-scheme/pop-entity-scheme-field-setting/pop-entity-scheme-field-setting.component';\nexport * from './lib/modules/entity/pop-entity-field-editor/pop-entity-field-details/pop-entity-field-details.component';\n\n\n\n\n\n\n// Services\n\nexport * from './lib/services/pop-base.service';\nexport * from './lib/services/pop-base.interceptors';\nexport * from './lib/services/pop-extend.service';\nexport * from './lib/services/pop-cache.service';\nexport * from './lib/services/pop-common.service';\nexport * from './lib/services/pop-container.service';\nexport * from './lib/services/pop-credential.service';\nexport * from './lib/services/pop-datetime.service';\nexport * from './lib/services/pop-dom.service';\nexport * from './lib/services/pop-log.service';\nexport * from './lib/services/pop-pipe.service';\nexport * from './lib/services/pop-preference.service';\nexport * from './lib/services/pop-route-history.resolver';\nexport * from './lib/services/pop-auth-guard.guard';\nexport * from './lib/services/pop-route-verified.guard';\nexport * from './lib/services/pop-route-access.guard';\nexport * from './lib/services/pop-resource.service';\nexport * from './lib/services/pop-request.service';\nexport * from './lib/services/pop-display.service';\nexport * from './lib/services/pop-request-external.service';\nexport * from './lib/services/pop-validators';\nexport * from './lib/modules/base/pop-tab-menu/pop-tab-menu.service';\n\nexport * from './lib/modules/entity/services/pop-entity.service';\nexport * from './lib/modules/entity/services/pop-entity-event.service';\nexport * from './lib/modules/entity/services/pop-entity-extend.service';\nexport * from './lib/modules/entity/services/pop-entity-util-portal.service';\nexport * from './lib/modules/entity/services/pop-entity-repo.service';\n\nexport * from './lib/modules/entity/pop-entity-field-editor/pop-entity-field-editor.service';\nexport * from './lib/modules/entity/services/pop-entity-action.service';\nexport * from './lib/modules/entity/services/pop-entity-util-field.service';\nexport * from './lib/modules/entity/services/pop-entity-util-param.service';\n\n\n\n// Pop Entity\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n\nexport {PopTemplateAjaxLoaderComponent as ɵe} from './lib/modules/app/assets/ajax-loader.component';\nexport {PopTemplateBufferComponent as ɵi} from './lib/modules/app/assets/buffer.component';\nexport {PopTemplateErrorComponent as ɵh} from './lib/modules/app/assets/error.component';\nexport {PopTemplateGoodByeComponent as ɵg} from './lib/modules/app/assets/goodbye.component';\nexport {PopTemplateWelcomeComponent as ɵf} from './lib/modules/app/assets/welcome.component';\nexport {PopCacFilterBarService as ɵd} from './lib/modules/app/pop-cac-filter/pop-cac-filter.service';\nexport {PopMenuService as ɵa} from './lib/modules/app/pop-menu/pop-menu.service';\nexport {PopTemplateService as ɵc} from './lib/modules/app/pop-template.service';\nexport {DialogComponent as ɵu} from './lib/modules/base/pop-ajax-dialog/dialog/dialog.component';\nexport {ErrorComponent as ɵq} from './lib/modules/base/pop-errors/error/error.component';\nexport {GroupComponent as ɵs} from './lib/modules/base/pop-field-item-group/group/group.component';\nexport {InDialogComponent as ɵr} from './lib/modules/base/pop-field-item-group/in-dialog/in-dialog.component';\nexport {ClickOutsideDirective as ɵb} from './lib/modules/base/pop-field-item/click-outside-directive';\nexport {CustomDateAdapter as ɵo} from './lib/modules/base/pop-field-item/custom-date-adapter';\nexport {PopCacheRedirectComponent as ɵl} from './lib/modules/base/pop-redirects/pop-cache-redirect/pop-cache-redirect.component';\nexport {PopErrorRedirectComponent as ɵk} from './lib/modules/base/pop-redirects/pop-error-redirect/pop-error-redirect.component';\nexport {PopGuardRedirectComponent as ɵm} from './lib/modules/base/pop-redirects/pop-guard-redirect/pop-guard-redirect.component';\nexport {PopRedirectsModule as ɵj} from './lib/modules/base/pop-redirects/pop-redirects-module';\nexport {PopTableDialogComponent as ɵp} from './lib/modules/base/pop-table/pop-table-dialog/pop-table-dialog.component';\nexport {PopEntityFieldBoilerComponent as ɵv} from './lib/modules/entity/pop-entity-field/pop-entity-field-boiler.component';\nexport {PopEntitySchemeCustomSettingComponent as ɵx} from './lib/modules/entity/pop-entity-scheme/pop-entity-scheme-custom-setting/pop-entity-scheme-custom-setting.component';\nexport {PopEntitySchemeService as ɵw} from './lib/modules/entity/pop-entity-scheme/pop-entity-scheme.service';\nexport {PopEntitySchemeComponentService as ɵn} from './lib/modules/entity/services/pop-entity-scheme-component.service';\nexport {CharacterIconPipe as ɵt} from './lib/pipes/characterIcon.pipe';"],"names":["datePresets","PopTableDialogComponent","FieldTemplate","data.default"],"mappings":"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"}